<div class="container-fluid p-4">

  <!-- ============================================
       MODERN CARD SYSTEM EXAMPLES
       ============================================ -->
  <!-- Card Example 1 - Default Purple Gradient -->
  <div class="modern-card-system">
    <div class="card-header-modern">
      <h3 class="card-title-left">
        <i class="fas fa-user-graduate"></i>
        Sınav Performansım
      </h3>
      <div class="card-settings-right">
        <button class="settings-icon">
          <i class="bi bi-bookmark-plus-fill"></i>
        </button>
      </div>
    </div>
    <div class="card-contents-modern">
      <!--Grafik-->
      <div *ngIf="loadingExamResults" class="loading-section text-center py-3">
          <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Yükleniyor...</span>
          </div>
          <p class="mt-2">Sınav sonuçları yükleniyor...</p>
        </div>
        <div *ngIf="!loadingExamResults" class="chart-container">
          <canvas id="comparisonChart" width="100%" height="600px"></canvas>
        </div>
      <!--Grafik son-->

      <!-- Detaylı Sınav Bilgileri -->
           <table class="modern-table">
      <thead>
        <tr>
          <th>Sınav Adı</th>
          <th>Sınav Türü</th>
          <th>Doğru</th>
          <th>Yanlış</th>
          <th>Boş</th>
          <th>Net</th>
          <th>Başarı %</th>
          <th>Katılımcı</th>
          <th>Sıralama</th>
          <th>Tarih</th>
          <th>İşlemler</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let sinav of sinavSonuclari" [style.border-left]="'4px solid ' + getSinavTuruColor(sinav.sinav_turu)">
          <td>{{ sinav.sinav_adi }}</td>
          <td>{{ getSinavTuruLabel(sinav.sinav_turu) }}</td>
          <td>0532 123 45 67</td>
          <td><span class="table-badge badge-success">Aktif</span></td>
          <td>
            <button class="table-action-btn btn-view">
              <i class="fas fa-eye"></i>
              Görüntüle
            </button>
            <button class="table-action-btn btn-edit">
              <i class="fas fa-edit"></i>
              Düzenle
            </button>
            <button class="table-action-btn btn-delete">
              <i class="fas fa-trash"></i>
              Sil
            </button>
          </td>
        </tr>
      </tbody>
    </table>

    <!-- Mobile Card View -->
    <div class="mobile-table-cards">
      <div class="mobile-card-item">
        <div class="mobile-card-row">
          <span class="mobile-card-label">Öğrenci Adı</span>
          <span class="mobile-card-value">Ahmet Yılmaz</span>
        </div>
        <div class="mobile-card-row">
          <span class="mobile-card-label">Sınıf</span>
          <span class="mobile-card-value">10. Sınıf</span>
        </div>
        <div class="mobile-card-row">
          <span class="mobile-card-label">Telefon</span>
          <span class="mobile-card-value">0532 123 45 67</span>
        </div>
        <div class="mobile-card-row">
          <span class="mobile-card-label">Durum</span>
          <span class="mobile-card-value">
            <span class="table-badge badge-success">Aktif</span>
          </span>
        </div>
        <div class="mobile-card-row">
          <span class="mobile-card-label">İşlemler</span>
          <span class="mobile-card-value">
            <button class="table-action-btn btn-view">
              <i class="fas fa-eye"></i>
            </button>
            <button class="table-action-btn btn-edit">
              <i class="fas fa-edit"></i>
            </button>
            <button class="table-action-btn btn-delete">
              <i class="fas fa-trash"></i>
            </button>
          </span>
        </div>
      </div>
    </div>
      <!-- Detaylı Sınav Bilgileri Son-->
    </div>
  </div>

  <div class="col-12">
    <div class="card-ana bg-green">
      <div class="card-ana-header">
        <h4><i class="bi bi-bar-chart-fill"></i> Sınav Performansım</h4>
        <button><i class="bi bi-bookmark-plus-fill"></i></button>
      </div>
      <div class="card-ana-body">
        <!--İçerik-->
        <div *ngIf="loadingExamResults" class="loading-section text-center py-3">
          <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Yükleniyor...</span>
          </div>
          <p class="mt-2">Sınav sonuçları yükleniyor...</p>
        </div>
        <div *ngIf="!loadingExamResults" class="chart-container">
          <canvas id="comparisonChart" width="100%" height="600px"></canvas>
        </div>
        <!-- Detaylı Sınav Bilgileri -->
        <div class="sinav-detay-bilgileri mt-4" *ngIf="sinavSonuclari.length > 0">
        
          <!-- Desktop Table -->
          <div class="table-responsive d-none d-lg-block">
            <table class="table table-striped table-hover">
              <thead>
                <tr>
                  <th>Sınav Adı</th>
                  <th>Sınav Türü</th>
                  <th>Doğru</th>
                  <th>Yanlış</th>
                  <th>Boş</th>
                  <th>Net</th>
                  <th>Başarı %</th>
                  <th>Katılımcı</th>
                  <th>Sıralama</th>
                  <th>Tarih</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let sinav of sinavSonuclari"
                  [style.border-left]="'4px solid ' + getSinavTuruColor(sinav.sinav_turu)">
                  <td>
                      <span>{{ sinav.sinav_adi }}</span>
                  </td>
                  <td>
                      <span class="badge me-2" [style.background-color]="getSinavTuruColor(sinav.sinav_turu)">
                        {{ getSinavTuruLabel(sinav.sinav_turu) }}
                      </span>
                  </td>
                  <td>
                    <span class="badge bg-success">{{ sinav.dogru_sayisi }}</span>
                  </td>
                  <td>
                    <span class="badge bg-danger">{{ sinav.yanlis_sayisi }}</span>
                  </td>
                  <td>
                    <span class="badge bg-warning">{{ sinav.bos_sayisi }}</span>
                  </td>
                  <td>
                    <span class="badge bg-info">{{ calculateNet(sinav) }}</span>
                  </td>
                  <td>
                    <div class="progress" style="height: 20px;">
                      <div class="progress-bar" [style.width.%]="getSuccessPercentage(sinav)"
                        [style.background-color]="getSinavTuruColor(sinav.sinav_turu)">
                        {{ getSuccessPercentage(sinav) }}%
                      </div>
                    </div>
                  </td>
                  <td>
                    <i class="bi bi-people"></i>
                    <span class="ms-1">{{ sinav.katilimci_sayisi || 'Bilinmiyor' }}</span>
                  </td>
                  <td>
                    <i class="bi bi-trophy"></i>
                    <span class="ms-1">{{ sinav.siralama || 'Bilinmiyor' }}</span>
                  </td>
                  <td>
                    <small class="text-muted">{{ formatDate(sinav.gonderim_tarihi) }}</small>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        
          <!-- Mobile Cards -->
          <div class="d-lg-none">
            <div class="sinav-card mb-3" *ngFor="let sinav of sinavSonuclari"
              [style.border-left]="'4px solid ' + getSinavTuruColor(sinav.sinav_turu)">
              <div class="sinav-card-header">
                <h6 class="mb-0 fw-bold">{{ sinav.sinav_adi }}</h6>
                <small class="text-muted">{{ formatDate(sinav.gonderim_tarihi) }}</small>
              </div>
        
              <div class="sinav-card-body">
                <!-- Doğru/Yanlış/Boş -->
                <div class="row mb-2">
                  <div class="col-4 text-center">
                    <span class="badge bg-success d-block mb-1">{{ sinav.dogru_sayisi }}</span>
                    <small class="text-muted">Doğru</small>
                  </div>
                  <div class="col-4 text-center">
                    <span class="badge bg-danger d-block mb-1">{{ sinav.yanlis_sayisi }}</span>
                    <small class="text-muted">Yanlış</small>
                  </div>
                  <div class="col-4 text-center">
                    <span class="badge bg-warning d-block mb-1">{{ sinav.bos_sayisi }}</span>
                    <small class="text-muted">Boş</small>
                  </div>
                </div>
        
                <!-- Net ve Başarı -->
                <div class="row mb-2">
                  <div class="col-6 text-center">
                    <span class="badge bg-info d-block mb-1">{{ calculateNet(sinav) }}</span>
                    <small class="text-muted">Net</small>
                  </div>
                  <div class="col-6">
                    <div class="progress mb-1" style="height: 20px;">
                      <div class="progress-bar" [style.width.%]="getSuccessPercentage(sinav)"
                        [style.background-color]="getSinavTuruColor(sinav.sinav_turu)">
                        {{ getSuccessPercentage(sinav) }}%
                      </div>
                    </div>
                    <small class="text-muted">Başarı</small>
                  </div>
                </div>
        
                <!-- Katılımcı ve Sıralama -->
                <div class="row">
                  <div class="col-6 text-center">
                    <i class="bi bi-people text-primary"></i>
                    <span class="ms-1">{{ sinav.katilimci_sayisi || 'Bilinmiyor' }}</span>
                    <br><small class="text-muted">Katılımcı</small>
                  </div>
                  <div class="col-6 text-center">
                    <i class="bi bi-trophy text-warning"></i>
                    <span class="ms-1">{{ sinav.siralama || 'Bilinmiyor' }}</span>
                    <br><small class="text-muted">Sıralama</small>
                  </div>
                </div>
              </div>
            </div>
          </div>      
        </div>
        <!--İçerik Son-->
      </div>
    </div>
  </div>
</div>