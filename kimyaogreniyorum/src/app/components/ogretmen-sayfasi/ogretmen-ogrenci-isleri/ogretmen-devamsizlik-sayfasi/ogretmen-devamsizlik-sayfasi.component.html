<div class="devamsizlik-container">
  <!-- Header -->
  <div class="page-header">
    <div class="header-content">
      <h1 class="page-title">
        <i class="fas fa-calendar-times"></i>
        Devamsızlık Yönetimi
      </h1>
      <p class="page-description">Öğrenci devamsızlık durumlarını takip edin ve kaydedin</p>
    </div>
  </div>

  <!-- Controls Section -->
  <div class="controls-section">
    <div class="date-selector">
      <label for="tarih" class="form-label">
        <i class="fas fa-calendar"></i>
        Tarih Seçin
      </label>
      <input 
        type="date" 
        id="tarih" 
        [(ngModel)]="secilenTarih" 
        (change)="tarihDegisti()"
        class="form-input date-input">
    </div>

    <div class="quick-actions">
      <button 
        class="btn btn-secondary" 
        (click)="tumunuIsaretle(true)"
        title="Tümünü Devamsız Olarak İşaretle">
        <i class="fas fa-times-circle"></i>
        Tümü Devamsız
      </button>
      <button 
        class="btn btn-success" 
        (click)="tumunuIsaretle(false)"
        title="Tümünü Devam Etti Olarak İşaretle">
        <i class="fas fa-check-circle"></i>
        Tümü Devam Etti
      </button>
    </div>
  </div>

  <!-- Student List -->
  <div class="students-section">
    <div class="section-header">
      <h2 class="section-title">
        <i class="fas fa-users"></i>
        Öğrenci Listesi
        <span class="student-count">({{ogrenciler.length}} öğrenci)</span>
      </h2>
    </div>

    <div class="students-grid" *ngIf="ogrenciler.length > 0; else noStudents">
      <div 
        *ngFor="let ogrenci of ogrenciler; trackBy: trackByFn" 
        class="student-card"
        [class.absent]="ogrenci.devamsiz"
        [class.present]="!ogrenci.devamsiz">

        <div class="student-info">
          <div class="student-avatar">
            <img 
              [src]="ogrenci.avatar || getDefaultAvatar(ogrenci.adi_soyadi)" 
              [alt]="ogrenci.adi_soyadi"
              class="avatar-img">
          </div>

          <div class="student-details">
            <h3 class="student-name">{{ogrenci.adi_soyadi}}</h3>
            <p class="student-number">No: {{ogrenci.ogrenci_numarasi}}</p>
            <p class="student-class">Sınıf: {{ogrenci.sinif}}</p>
          </div>
        </div>

        <div class="attendance-controls">
          <div class="attendance-toggle">
            <label class="toggle-switch">
              <input 
                type="checkbox" 
                [(ngModel)]="ogrenci.devamsiz"
                (change)="devamsizlikDegisti(ogrenci)">
              <span class="toggle-slider">
                <span class="toggle-label present">Devam Etti</span>
                <span class="toggle-label absent">Devamsız</span>
              </span>
            </label>
          </div>

          <div class="status-indicator">
            <span 
              class="status-badge" 
              [class.present]="!ogrenci.devamsiz"
              [class.absent]="ogrenci.devamsiz">
              <i class="fas" [class.fa-check]="!ogrenci.devamsiz" [class.fa-times]="ogrenci.devamsiz"></i>
              {{ogrenci.devamsiz ? 'Devamsız' : 'Devam Etti'}}
            </span>
          </div>
        </div>
      </div>
    </div>

    <ng-template #noStudents>
      <div class="empty-state">
        <div class="empty-icon">
          <i class="fas fa-user-slash"></i>
        </div>
        <h3>Öğrenci Bulunamadı</h3>
        <p>Bu tarih için kayıtlı öğrenci bulunmuyor.</p>
      </div>
    </ng-template>
  </div>

  <!-- Action Buttons -->
  <div class="action-section">
    <div class="action-buttons">
      <button 
        class="btn btn-secondary btn-lg"
        (click)="geriDon()">
        <i class="fas fa-arrow-left"></i>
        Geri Dön
      </button>

      <button 
        class="btn btn-primary btn-lg"
        (click)="devamsizliklariKaydet()"
        [disabled]="kaydetmeIsleminde">
        <i class="fas" [class.fa-spinner]="kaydetmeIsleminde" [class.fa-save]="!kaydetmeIsleminde"></i>
        <span *ngIf="kaydetmeIsleminde">Kaydediliyor...</span>
        <span *ngIf="!kaydetmeIsleminde">Kaydet</span>
      </button>
    </div>
  </div>

  <!-- Summary Stats -->
  <div class="summary-section" *ngIf="ogrenciler.length > 0">
    <div class="stats-grid">
      <div class="stat-item present">
        <div class="stat-icon">
          <i class="fas fa-check-circle"></i>
        </div>
        <div class="stat-content">
          <span class="stat-number">{{getDevamEdenSayisi()}}</span>
          <span class="stat-label">Devam Eden</span>
        </div>
      </div>

      <div class="stat-item absent">
        <div class="stat-icon">
          <i class="fas fa-times-circle"></i>
        </div>
        <div class="stat-content">
          <span class="stat-number">{{getDevamsizSayisi()}}</span>
          <span class="stat-label">Devamsız</span>
        </div>
      </div>

      <div class="stat-item total">
        <div class="stat-icon">
          <i class="fas fa-users"></i>
        </div>
        <div class="stat-content">
          <span class="stat-number">{{ogrenciler.length}}</span>
          <span class="stat-label">Toplam</span>
        </div>
      </div>
    </div>
  </div>
</div>