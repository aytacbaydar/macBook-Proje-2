<nav class="pdf-toolbar pdf-toolbar--sticky">
  <div class="pdf-toolbar__left">
    <label class="pdf-secici">
      <span>&#128196;</span>
      <span>PDF Sec</span>
      <input type="file" accept="application/pdf" (change)="onPdfSec($event)" hidden>
    </label>

    <button type="button" class="btn-ikonlu" (click)="yeniSayfaEkle()" [disabled]="!isBlankDocument || exportInProgress">
      <i class="ikon">&#10133;</i>
      <span>Sayfa Ekle</span>
    </button>
  </div>

  <div class="pdf-toolbar__middle">
    <div class="pdf-toolbar__group">
      <span class="toolbar-label">Renkler</span>
      <button
        type="button"
        class="renk-ikon-btn"
        *ngFor="let renk of penColorOptions"
        (click)="setPenColor(renk)"
        [style.backgroundColor]="renk"
        [class.aktif]="penColor === renk"
        [attr.aria-label]="'Kalem rengi ' + renk"
      ></button>
    </div>

    <div class="pdf-toolbar__group">
      <span class="toolbar-label">Araclar</span>
      <button
        type="button"
        class="btn-ikonlu"
        (click)="setTool('select')"
        [class.aktif]="currentTool === 'select'"
        aria-label="Sec ve Tas"
      >
        <i class="ikon">ğŸ–±ï¸</i>
      </button>
      <button
        type="button"
        class="btn-ikonlu"
        (click)="setTool('pen')"
        [class.aktif]="currentTool === 'pen'"
        aria-label="Kalem"
      >
        <i class="ikon">âœ’ï¸</i>
      </button>
      <button
        type="button"
        class="btn-ikonlu"
        (click)="setTool('highlighter')"
        [class.aktif]="currentTool === 'highlighter'"
        aria-label="Fosforlu Kalem"
      >
        <i class="ikon">ğŸ–ï¸</i>
      </button>
      <button
        type="button"
        class="btn-ikonlu"
        (click)="setTool('eraser')"
        [class.aktif]="currentTool === 'eraser'"
        aria-label="Silgi"
      >
        <i class="ikon">ğŸ§½</i>
      </button>
    </div>

    <div class="pdf-toolbar__group">
      <span class="toolbar-label">Kalinlik</span>
      <select
        class="stroke-select"
        name="strokeSize"
        [ngModelOptions]="{ standalone: true }"
        [(ngModel)]="strokeSize"
        (ngModelChange)="onStrokeSizeChange($event)"
      >
        <option *ngFor="let size of strokeSizeOptions" [value]="size">{{ size }} px</option>
      </select>
    </div>

    <div class="pdf-toolbar__group">
      <span class="toolbar-label">DÃ¼zenle</span>
      <button
        type="button"
        class="btn-ikonlu"
        (click)="duplicateSelection()"
        [disabled]="!hasSelection || currentTool !== 'select'"
        aria-label="SeÃ§ili Ã¶ÄŸeyi kopyala"
      >
        <i class="ikon">ğŸ“‘</i>
        <span>Kopyala</span>
      </button>
      <button
        type="button"
        class="btn-ikonlu"
        (click)="pasteSelection()"
        [disabled]="!clipboardObject"
        aria-label="Panodaki Ã¶ÄŸeyi yapÄ±ÅŸtÄ±r"
      >
        <i class="ikon">ğŸ“‹</i>
        <span>YapÄ±ÅŸtÄ±r</span>
      </button>
    </div>

    <div class="pdf-toolbar__group">
      <span class="toolbar-label">Medya</span>
      <button type="button" class="btn-ikonlu" (click)="triggerImageUpload()" aria-label="GÃ¶rsel ekle">
        <i class="ikon">ğŸ–¼ï¸</i>
        <span>GÃ¶rsel YÃ¼kle</span>
      </button>
      <input
        #imageUploadInput
        type="file"
        accept="image/*"
        (change)="onImageSelected($event)"
        hidden
      >
    </div>

    <div class="pdf-toolbar__group pdf-toolbar__group--background">
      <span class="toolbar-label">Arka Plan</span>
      <button
        type="button"
        class="btn-ikonlu"
        (click)="setBackground('plain')"
        [class.aktif]="backgroundMode === 'plain'"
        [disabled]="!isBlankDocument"
        aria-label="Duz arka plan"
      >
        <i class="ikon">â¬œï¸</i>
      </button>
      <button
        type="button"
        class="btn-ikonlu"
        (click)="setBackground('grid')"
        [class.aktif]="backgroundMode === 'grid'"
        [disabled]="!isBlankDocument"
        aria-label="Kareli arka plan"
      >
        <i class="ikon">ğŸ§±</i>
      </button>
      <button
        type="button"
        class="btn-ikonlu"
        (click)="setBackground('lined')"
        [class.aktif]="backgroundMode === 'lined'"
        [disabled]="!isBlankDocument"
        aria-label="Cizgili arka plan"
      >
        <i class="ikon">ğŸ“</i>
      </button>
    </div>

    <div class="pdf-toolbar__group">
      <button type="button" class="btn-ikonlu btn-temizle" (click)="clearCurrentAnnotations()" [disabled]="!currentPage">
        <i class="ikon">ğŸ§¹</i>
        <span>Temizle</span>
      </button>
    </div>
  </div>

  <div class="pdf-toolbar__right">
    <button type="button" class="btn-ikonlu btn-indir" (click)="downloadPdf()" [disabled]="pdfYukleniyor || exportInProgress">
      <i class="ikon">ğŸ“¥</i>
      <span>PDF Indir</span>
    </button>
  </div>
</nav>

<div *ngIf="pdfYukleniyor" class="durum durum--ust">PDF yukleniyor...</div>
<div *ngIf="pdfHataMesaji" class="durum hata durum--ust">{{ pdfHataMesaji }}</div>

<div class="pdf-gorunumu" #pdfContainer>
  <canvas #pdfCanvas class="pdf-canvas" aria-label="PDF gorunumu"></canvas>
  <canvas
    #annotationCanvas
    class="annotation-canvas"
    aria-label="Cizim alani"
  ></canvas>

  <div
    class="selection-menu"
    *ngIf="selectionMenu.visible"
    [style.left.px]="selectionMenu.left"
    [style.top.px]="selectionMenu.top"
  >
    <ng-container *ngIf="selectionMenu.showCropActions; else selectionActions">
      <button type="button" class="selection-menu__button primary" (click)="confirmCrop()">
        <i class="ikon">âœ…</i>
        <span>KÄ±rpmayÄ± Onayla</span>
      </button>
      <button type="button" class="selection-menu__button" (click)="cancelCrop()">
        <i class="ikon">âŒ</i>
        <span>Ä°ptal</span>
      </button>
    </ng-container>
    <ng-template #selectionActions>
      <button
        type="button"
        class="selection-menu__button"
        (click)="startCrop()"
        *ngIf="selectionMenu.showCrop"
      >
        <i class="ikon">ğŸªš</i>
        <span>KÄ±rp</span>
      </button>
      <button type="button" class="selection-menu__button" (click)="duplicateSelection()">
        <i class="ikon">ğŸ“‘</i>
        <span>Kopyala</span>
      </button>
      <button type="button" class="selection-menu__button" (click)="cutSelection()">
        <i class="ikon">âœ‚ï¸</i>
        <span>Kes</span>
      </button>
      <button type="button" class="selection-menu__button danger" (click)="deleteSelection()">
        <i class="ikon">ğŸ—‘ï¸</i>
        <span>Sil</span>
      </button>
      <button
        type="button"
        class="selection-menu__button"
        *ngIf="selectionMenu.showPaste"
        (click)="pasteSelection()"
      >
        <i class="ikon">ğŸ“‹</i>
        <span>YapÄ±ÅŸtÄ±r</span>
      </button>
    </ng-template>
  </div>
</div>

<div *ngIf="totalPages > 0" class="pdf-sayfa-alt-kontrol">
  <button type="button" (click)="ilkSayfa()" [disabled]="currentPage <= 1 || pdfYukleniyor">Ilk</button>
  <button type="button" (click)="oncekiSayfa()" [disabled]="currentPage <= 1 || pdfYukleniyor">Onceki</button>
  <span>Sayfa {{ currentPage }} / {{ totalPages }}</span>
  <button type="button" (click)="sonrakiSayfa()" [disabled]="currentPage >= totalPages || pdfYukleniyor">
    Sonraki
  </button>
  <button type="button" (click)="sonSayfa()" [disabled]="currentPage >= totalPages || pdfYukleniyor">Son</button>
</div>
