<div class="sonuclar-container">
  <!-- Loading State -->
  <div *ngIf="loading" class="loading-container">
    <div class="loading-spinner">
      <div class="spinner"></div>
      <p>Sınav sonuçları yükleniyor...</p>
    </div>
  </div>

  <!-- Error State -->
  <div *ngIf="error && !loading" class="error-container">
    <div class="error-card">
      <i class="bi bi-exclamation-triangle-fill error-icon"></i>
      <h3>Hata Oluştu</h3>
      <p>{{ error }}</p>
      <button class="retry-button" (click)="goBackToExams()">
        <i class="bi bi-arrow-left me-1"></i>
        Sınavlara Dön
      </button>
    </div>
  </div>

  <!-- No Results State -->
  <div *ngIf="!loading && !error && sinavSonuclari.length === 0" class="empty-state">
    <div class="empty-content">
      <div class="empty-icon">
        <i class="bi bi-clipboard-x"></i>
      </div>
      <h3>Henüz Sınav Sonucu Yok</h3>
      <p>Henüz herhangi bir sınavı tamamlamadınız.</p>
      <button class="retry-button" (click)="goBackToExams()">
        <i class="bi bi-arrow-left me-1"></i>
        Sınavlara Dön
      </button>
    </div>
  </div>

  <!-- Results Content -->
  <div *ngIf="!loading && !error && sinavSonuclari.length > 0" class="results-content">
    <!-- Header -->
    <div class="results-header">
      <div class="header-content">
        <h1>
          <i class="bi bi-clipboard-data me-2"></i>
          Sınav Sonuçlarım
        </h1>
        <p class="header-description">{{ sinavSonuclari.length }} sınav sonucunuz bulunuyor</p>
      </div>
      <button class="back-btn" (click)="goBackToExams()">
        <i class="bi bi-arrow-left"></i>
        Sınavlara Dön
      </button>
    </div>

    <div class="results-layout">
      <!-- Exams List -->
      <div class="exams-sidebar">
        <h3>Sınav Listesi</h3>
        <div class="exam-list">
          <div 
            class="exam-item" 
            *ngFor="let sinav of sinavSonuclari"
            [class.active]="selectedSinav?.sinav_id === sinav.sinav_id"
            (click)="selectSinav(sinav)">
            <div class="exam-item-header">
              <span class="exam-type-badge" [style.background]="getSinavTuruColor(sinav.sinav_turu)">
                {{ getSinavTuruLabel(sinav.sinav_turu) }}
              </span>
              <span class="exam-date">{{ formatDate(sinav.gonderim_tarihi) }}</span>
            </div>
            <h4 class="exam-name">{{ sinav.sinav_adi }}</h4>
            <div class="exam-score">
              <span class="net-score">{{ sinav.net_sayisi }} Net</span>
              <span class="percentage">%{{ getSuccessPercentage(sinav) }}</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Selected Exam Details -->
      <div class="exam-details" *ngIf="selectedSinav">
        <!-- Exam Header -->
        <div class="exam-detail-header" [style.background]="getSinavTuruColor(selectedSinav.sinav_turu)">
          <h2>{{ selectedSinav.sinav_adi }}</h2>
          <div class="exam-meta">
            <span class="exam-type">{{ getSinavTuruLabel(selectedSinav.sinav_turu) }}</span>
            <span class="exam-date">{{ formatDate(selectedSinav.gonderim_tarihi) }}</span>
          </div>
        </div>

        <!-- Performance Summary -->
        <div class="performance-summary">
          <div class="performance-card correct">
            <div class="card-icon">
              <i class="bi bi-check-circle-fill"></i>
            </div>
            <div class="card-content">
              <h3>{{ selectedSinav.dogru_sayisi }}</h3>
              <p>Doğru</p>
            </div>
          </div>

          <div class="performance-card wrong">
            <div class="card-icon">
              <i class="bi bi-x-circle-fill"></i>
            </div>
            <div class="card-content">
              <h3>{{ selectedSinav.yanlis_sayisi }}</h3>
              <p>Yanlış</p>
            </div>
          </div>

          <div class="performance-card empty">
            <div class="card-icon">
              <i class="bi bi-circle"></i>
            </div>
            <div class="card-content">
              <h3>{{ selectedSinav.bos_sayisi }}</h3>
              <p>Boş</p>
            </div>
          </div>

          <div class="performance-card net">
            <div class="card-icon">
              <i class="bi bi-award-fill"></i>
            </div>
            <div class="card-content">
              <h3>{{ selectedSinav.net_sayisi }}</h3>
              <p>Net</p>
            </div>
          </div>
        </div>

        <!-- Chart Container -->
        <div class="chart-container">
          <h3>Performans Grafiği</h3>
          <div class="chart-wrapper">
            <canvas id="resultChart" width="300" height="300"></canvas>
          </div>
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons">
          <button class="action-btn retake" (click)="retakeExam()">
            <i class="bi bi-arrow-clockwise me-1"></i>
            Sınavı Tekrar Çöz
          </button>
          <button class="action-btn analyze" (click)="analyzeResults()">
            <i class="bi bi-graph-up me-1"></i>
            Detaylı Analiz
          </button>
        </div>
      </div>

      <!-- No Selection State -->
      <div class="exam-details" *ngIf="!selectedSinav">
        <div class="no-selection">
          <div class="no-selection-icon">
            <i class="bi bi-clipboard-data"></i>
          </div>
          <h3>Sınav Seçin</h3>
          <p>Detayları görüntülemek için soldaki listeden bir sınav seçin.</p>
        </div>
      </div>
    </div>
  </div>
</div>