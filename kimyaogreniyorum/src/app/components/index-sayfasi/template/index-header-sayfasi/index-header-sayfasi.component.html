
<div class="carousel-container" 
     (mouseenter)="onMouseEnter()" 
     (mouseleave)="onMouseLeave()"
     (touchstart)="onTouchStart($event)" 
     (touchend)="onTouchEnd($event)">
  
  <!-- Loading Screen -->
  <div class="loading-screen" *ngIf="isLoading">
    <div class="spinner"></div>
    <p>Yükleniyor...</p>
  </div>

  <!-- Fragment Grid Container -->
  <div class="fragment-grid" *ngIf="!isLoading">
    <!-- Current Slide Fragments -->
    <div class="fragment" 
         *ngFor="let fragment of fragments; trackBy: trackByFragment"
         [style]="getFragmentStyle(fragment)"
         [@fragmentRotate]="{ value: isTransitioning ? 'rotated' : 'initial', params: { delay: fragment.delay + 's' } }">
    </div>
    
    <!-- Next Slide Fragments (for transition) -->
    <div class="fragment fragment-next" 
         *ngFor="let fragment of fragments; trackBy: trackByFragment"
         [style]="getFragmentStyle(fragment, true)"
         [@fragmentRotateNext]="{ value: isTransitioning ? 'rotated' : 'initial', params: { delay: fragment.delay + 's' } }">
    </div>
  </div>

  <!-- Content Overlay -->
  <div class="content-overlay" *ngIf="!isLoading">
    <div class="slide-content" [@slideContent]="currentSlide">
      <div class="content-wrapper">
        <h1 class="slide-title">{{ getCurrentSlide().title }}</h1>
        <p class="slide-subtitle">{{ getCurrentSlide().subtitle }}</p>
        <button class="cta-button">{{ getCurrentSlide().buttonText }}</button>
      </div>
    </div>
  </div>

  <!-- Navigation Controls -->
  <div class="navigation-controls" *ngIf="!isLoading">
    <!-- Previous Button -->
    <button class="nav-button nav-prev" 
            (click)="previousSlide()" 
            [disabled]="isTransitioning"
            aria-label="Önceki slide">
      <i class="fas fa-chevron-left"></i>
    </button>

    <!-- Next Button -->
    <button class="nav-button nav-next" 
            (click)="nextSlide()" 
            [disabled]="isTransitioning"
            aria-label="Sonraki slide">
      <i class="fas fa-chevron-right"></i>
    </button>

    <!-- Slide Indicators -->
    <div class="slide-indicators">
      <button class="indicator" 
              *ngFor="let slide of slides; let i = index"
              [class.active]="i === currentSlide"
              (click)="goToSlide(i)"
              [disabled]="isTransitioning"
              [attr.aria-label]="'Slide ' + (i + 1)">
      </button>
    </div>
  </div>
</div>
