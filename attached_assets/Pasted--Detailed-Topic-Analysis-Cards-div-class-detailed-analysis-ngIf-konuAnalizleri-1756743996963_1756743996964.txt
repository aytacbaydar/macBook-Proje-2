    <!-- Detailed Topic Analysis Cards -->
    <div class="detailed-analysis" *ngIf="konuAnalizleri.length > 0">
      <h3><i class="bi bi-list-check me-2"></i>Detaylı Konu Analizi</h3>
      <div class="topics-cards-container">
        <div class="topic-card" *ngFor="let konu of konuAnalizleri; trackBy: trackByKonu">
          <!-- Card Header -->
          <div class="card-header">
            <div class="topic-title">
              <i class="bi bi-book me-2"></i>
              <h5>{{ konu?.konu_adi || 'Bilinmeyen Konu' }}</h5>
            </div>
            <div class="status-badge" [style.background-color]="getKonuSuccessColor(konu?.ortalama_basari || 0)">
              {{ getKonuSuccessText(konu?.ortalama_basari || 0) }}
            </div>
          </div>

          <!-- Statistics Grid -->
          <div class="stats-grid">
            <div class="stat-item">
              <div class="stat-icon bg-primary">
                <i class="bi bi-question-circle"></i>
              </div>
              <div class="stat-content">
                <h4>{{ getTotalQuestionsByTopic(konu) || 0 }}</h4>
                <p>Toplam Soru</p>
              </div>
            </div>

            <div class="stat-item">
              <div class="stat-icon bg-success">
                <i class="bi bi-check-circle"></i>
              </div>
              <div class="stat-content">
                <h4>{{ getCorrectAnswersByTopic(konu) || 0 }}</h4>
                <p>Doğru</p>
              </div>
            </div>

            <div class="stat-item">
              <div class="stat-icon bg-danger">
                <i class="bi bi-x-circle"></i>
              </div>
              <div class="stat-content">
                <h4>{{ getWrongAnswersByTopic(konu) || 0 }}</h4>
                <p>Yanlış</p>
              </div>
            </div>

            <div class="stat-item">
              <div class="stat-icon bg-warning">
                <i class="bi bi-dash-circle"></i>
              </div>
              <div class="stat-content">
                <h4>{{ getEmptyAnswersByTopic(konu) || 0 }}</h4>
                <p>Boş</p>
              </div>
            </div>
          </div>

          <!-- Success Rate Progress -->
          <div class="success-rate-container">
            <div class="progress-label">
              <span>Başarı Oranı</span>
              <span class="percentage">{{ konu?.ortalama_basari || 0 }}%</span>
            </div>
            <div class="progress-bar-container">
              <div class="progress-bar" 
                   [style.width.%]="konu?.ortalama_basari || 0"
                   [style.background-color]="getKonuSuccessColor(konu?.ortalama_basari || 0)">
              </div>
            </div>
          </div>

          <!-- Student Performance -->
          <div class="student-performance">
            <!-- En İyi Öğrenci -->
            <div class="best-student" *ngIf="getBestStudentForTopic(konu)">
              <h6><i class="bi bi-trophy me-2"></i>En İyi Öğrenci</h6>
              <div class="student-item best">
                <img [src]="getBestStudentForTopic(konu).avatar || getDefaultAvatar(getBestStudentForTopic(konu).adi_soyadi)" 
                     class="student-avatar" alt="Avatar">
                <div class="student-info">
                  <span class="student-name">{{ getBestStudentForTopic(konu).adi_soyadi }}</span>
                  <span class="student-score">{{ getBestStudentForTopic(konu).basari_yuzdesi }}%</span>
                </div>
              </div>
            </div>

            <!-- Geliştirilmesi Gereken Öğrenciler -->
            <div class="poor-students" *ngIf="getPoorStudentsForTopic(konu).length > 0">
              <h6><i class="bi bi-arrow-up-circle me-2"></i>Geliştirilmesi Gereken Öğrenciler</h6>
              <div class="students-list">
                <div class="student-item poor" *ngFor="let student of getPoorStudentsForTopic(konu)">
                  <img [src]="student.avatar || getDefaultAvatar(student.adi_soyadi)" 
                       class="student-avatar" alt="Avatar">
                  <div class="student-info">
                    <span class="student-name">{{ student.adi_soyadi }}</span>
                    <span class="student-score">{{ student.basari_yuzdesi }}%</span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Participation Info -->
          <div class="participation-info">
            <div class="participation-stat">
              <i class="bi bi-people"></i>
              <span>{{ konu.cevaplayan_ogrenci }}/{{ konu.toplam_ogrenci }} öğrenci katıldı</span>
            </div>
          </div>
        </div>
      </div>
    </div>