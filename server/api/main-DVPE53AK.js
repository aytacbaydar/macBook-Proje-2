import{a as aM}from"./chunk-VUA366Y3.js";import{a as $n}from"./chunk-FK6H3RFT.js";import{a as Ie,b as ot,c as sM,d as Vn,e as yh,f as Wl,g as Ge,h as B4}from"./chunk-R5ORV7EK.js";var YR=Vn((Ax,TA)=>{"use strict";(function(e,t){typeof Ax=="object"&&typeof TA=="object"?TA.exports=t():typeof define=="function"&&define.amd?define([],t):typeof Ax=="object"?Ax.jsQR=t():e.jsQR=t()})(typeof self<"u"?self:Ax,function(){return function(i){var e={};function t(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return i[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=i,t.c=e,t.d=function(n,r,o){t.o(n,r)||Object.defineProperty(n,r,{configurable:!1,enumerable:!0,get:o})},t.n=function(n){var r=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(r,"a",r),r},t.o=function(n,r){return Object.prototype.hasOwnProperty.call(n,r)},t.p="",t(t.s=3)}([function(i,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function r(o,s){this.width=s,this.height=o.length/s,this.data=o}return r.createEmpty=function(o,s){return new r(new Uint8ClampedArray(o*s),o)},r.prototype.get=function(o,s){return o<0||o>=this.width||s<0||s>=this.height?!1:!!this.data[s*this.width+o]},r.prototype.set=function(o,s,a){this.data[s*this.width+o]=a?1:0},r.prototype.setRegion=function(o,s,a,l,c){for(var d=s;d<s+l;d++)for(var h=o;h<o+a;h++)this.set(h,d,!!c)},r}();e.BitMatrix=n},function(i,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=t(2);function r(s,a){return s^a}e.addOrSubtractGF=r;var o=function(){function s(a,l,c){this.primitive=a,this.size=l,this.generatorBase=c,this.expTable=new Array(this.size),this.logTable=new Array(this.size);for(var d=1,h=0;h<this.size;h++)this.expTable[h]=d,d=d*2,d>=this.size&&(d=(d^this.primitive)&this.size-1);for(var h=0;h<this.size-1;h++)this.logTable[this.expTable[h]]=h;this.zero=new n.default(this,Uint8ClampedArray.from([0])),this.one=new n.default(this,Uint8ClampedArray.from([1]))}return s.prototype.multiply=function(a,l){return a===0||l===0?0:this.expTable[(this.logTable[a]+this.logTable[l])%(this.size-1)]},s.prototype.inverse=function(a){if(a===0)throw new Error("Can't invert 0");return this.expTable[this.size-this.logTable[a]-1]},s.prototype.buildMonomial=function(a,l){if(a<0)throw new Error("Invalid monomial degree less than 0");if(l===0)return this.zero;var c=new Uint8ClampedArray(a+1);return c[0]=l,new n.default(this,c)},s.prototype.log=function(a){if(a===0)throw new Error("Can't take log(0)");return this.logTable[a]},s.prototype.exp=function(a){return this.expTable[a]},s}();e.default=o},function(i,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=t(1),r=function(){function o(s,a){if(a.length===0)throw new Error("No coefficients.");this.field=s;var l=a.length;if(l>1&&a[0]===0){for(var c=1;c<l&&a[c]===0;)c++;if(c===l)this.coefficients=s.zero.coefficients;else{this.coefficients=new Uint8ClampedArray(l-c);for(var d=0;d<this.coefficients.length;d++)this.coefficients[d]=a[c+d]}}else this.coefficients=a}return o.prototype.degree=function(){return this.coefficients.length-1},o.prototype.isZero=function(){return this.coefficients[0]===0},o.prototype.getCoefficient=function(s){return this.coefficients[this.coefficients.length-1-s]},o.prototype.addOrSubtract=function(s){var a;if(this.isZero())return s;if(s.isZero())return this;var l=this.coefficients,c=s.coefficients;l.length>c.length&&(a=[c,l],l=a[0],c=a[1]);for(var d=new Uint8ClampedArray(c.length),h=c.length-l.length,p=0;p<h;p++)d[p]=c[p];for(var p=h;p<c.length;p++)d[p]=n.addOrSubtractGF(l[p-h],c[p]);return new o(this.field,d)},o.prototype.multiply=function(s){if(s===0)return this.field.zero;if(s===1)return this;for(var a=this.coefficients.length,l=new Uint8ClampedArray(a),c=0;c<a;c++)l[c]=this.field.multiply(this.coefficients[c],s);return new o(this.field,l)},o.prototype.multiplyPoly=function(s){if(this.isZero()||s.isZero())return this.field.zero;for(var a=this.coefficients,l=a.length,c=s.coefficients,d=c.length,h=new Uint8ClampedArray(l+d-1),p=0;p<l;p++)for(var g=a[p],_=0;_<d;_++)h[p+_]=n.addOrSubtractGF(h[p+_],this.field.multiply(g,c[_]));return new o(this.field,h)},o.prototype.multiplyByMonomial=function(s,a){if(s<0)throw new Error("Invalid degree less than 0");if(a===0)return this.field.zero;for(var l=this.coefficients.length,c=new Uint8ClampedArray(l+s),d=0;d<l;d++)c[d]=this.field.multiply(this.coefficients[d],a);return new o(this.field,c)},o.prototype.evaluateAt=function(s){var a=0;if(s===0)return this.getCoefficient(0);var l=this.coefficients.length;if(s===1)return this.coefficients.forEach(function(d){a=n.addOrSubtractGF(a,d)}),a;a=this.coefficients[0];for(var c=1;c<l;c++)a=n.addOrSubtractGF(this.field.multiply(s,a),this.coefficients[c]);return a},o}();e.default=r},function(i,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=t(4),r=t(5),o=t(11),s=t(12);function a(d){var h=s.locate(d);if(!h)return null;for(var p=0,g=h;p<g.length;p++){var _=g[p],b=o.extract(d,_),C=r.decode(b.matrix);if(C)return{binaryData:C.bytes,data:C.text,chunks:C.chunks,version:C.version,location:{topRightCorner:b.mappingFunction(_.dimension,0),topLeftCorner:b.mappingFunction(0,0),bottomRightCorner:b.mappingFunction(_.dimension,_.dimension),bottomLeftCorner:b.mappingFunction(0,_.dimension),topRightFinderPattern:_.topRight,topLeftFinderPattern:_.topLeft,bottomLeftFinderPattern:_.bottomLeft,bottomRightAlignmentPattern:_.alignmentPattern}}}return null}var l={inversionAttempts:"attemptBoth"};function c(d,h,p,g){g===void 0&&(g={});var _=l;Object.keys(_||{}).forEach(function(D){_[D]=g[D]||_[D]});var b=_.inversionAttempts==="attemptBoth"||_.inversionAttempts==="invertFirst",C=_.inversionAttempts==="onlyInvert"||_.inversionAttempts==="invertFirst",y=n.binarize(d,h,p,b),M=y.binarized,O=y.inverted,A=a(C?O:M);return!A&&(_.inversionAttempts==="attemptBoth"||_.inversionAttempts==="invertFirst")&&(A=a(C?M:O)),A}c.default=c,e.default=c},function(i,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=t(0),r=8,o=24;function s(c,d,h){return c<d?d:c>h?h:c}var a=function(){function c(d,h){this.width=d,this.data=new Uint8ClampedArray(d*h)}return c.prototype.get=function(d,h){return this.data[h*this.width+d]},c.prototype.set=function(d,h,p){this.data[h*this.width+d]=p},c}();function l(c,d,h,p){if(c.length!==d*h*4)throw new Error("Malformed data passed to binarizer.");for(var g=new a(d,h),_=0;_<d;_++)for(var b=0;b<h;b++){var C=c[(b*d+_)*4+0],y=c[(b*d+_)*4+1],M=c[(b*d+_)*4+2];g.set(_,b,.2126*C+.7152*y+.0722*M)}for(var O=Math.ceil(d/r),A=Math.ceil(h/r),D=new a(O,A),N=0;N<A;N++)for(var B=0;B<O;B++){for(var T=0,H=1/0,te=0,b=0;b<r;b++)for(var _=0;_<r;_++){var L=g.get(B*r+_,N*r+b);T+=L,H=Math.min(H,L),te=Math.max(te,L)}var z=T/Math.pow(r,2);if(te-H<=o&&(z=H/2,N>0&&B>0)){var J=(D.get(B,N-1)+2*D.get(B-1,N)+D.get(B-1,N-1))/4;H<J&&(z=J)}D.set(B,N,z)}var Q=n.BitMatrix.createEmpty(d,h),ce=null;p&&(ce=n.BitMatrix.createEmpty(d,h));for(var N=0;N<A;N++)for(var B=0;B<O;B++){for(var X=s(B,2,O-3),ie=s(N,2,A-3),T=0,oe=-2;oe<=2;oe++)for(var le=-2;le<=2;le++)T+=D.get(X+oe,ie+le);for(var Ce=T/25,oe=0;oe<r;oe++)for(var le=0;le<r;le++){var _=B*r+oe,b=N*r+le,Ne=g.get(_,b);Q.set(_,b,Ne<=Ce),p&&ce.set(_,b,!(Ne<=Ce))}}return p?{binarized:Q,inverted:ce}:{binarized:Q}}e.binarize=l},function(i,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=t(0),r=t(6),o=t(9),s=t(10);function a(M,O){for(var A=M^O,D=0;A;)D++,A&=A-1;return D}function l(M,O){return O<<1|M}var c=[{bits:21522,formatInfo:{errorCorrectionLevel:1,dataMask:0}},{bits:20773,formatInfo:{errorCorrectionLevel:1,dataMask:1}},{bits:24188,formatInfo:{errorCorrectionLevel:1,dataMask:2}},{bits:23371,formatInfo:{errorCorrectionLevel:1,dataMask:3}},{bits:17913,formatInfo:{errorCorrectionLevel:1,dataMask:4}},{bits:16590,formatInfo:{errorCorrectionLevel:1,dataMask:5}},{bits:20375,formatInfo:{errorCorrectionLevel:1,dataMask:6}},{bits:19104,formatInfo:{errorCorrectionLevel:1,dataMask:7}},{bits:30660,formatInfo:{errorCorrectionLevel:0,dataMask:0}},{bits:29427,formatInfo:{errorCorrectionLevel:0,dataMask:1}},{bits:32170,formatInfo:{errorCorrectionLevel:0,dataMask:2}},{bits:30877,formatInfo:{errorCorrectionLevel:0,dataMask:3}},{bits:26159,formatInfo:{errorCorrectionLevel:0,dataMask:4}},{bits:25368,formatInfo:{errorCorrectionLevel:0,dataMask:5}},{bits:27713,formatInfo:{errorCorrectionLevel:0,dataMask:6}},{bits:26998,formatInfo:{errorCorrectionLevel:0,dataMask:7}},{bits:5769,formatInfo:{errorCorrectionLevel:3,dataMask:0}},{bits:5054,formatInfo:{errorCorrectionLevel:3,dataMask:1}},{bits:7399,formatInfo:{errorCorrectionLevel:3,dataMask:2}},{bits:6608,formatInfo:{errorCorrectionLevel:3,dataMask:3}},{bits:1890,formatInfo:{errorCorrectionLevel:3,dataMask:4}},{bits:597,formatInfo:{errorCorrectionLevel:3,dataMask:5}},{bits:3340,formatInfo:{errorCorrectionLevel:3,dataMask:6}},{bits:2107,formatInfo:{errorCorrectionLevel:3,dataMask:7}},{bits:13663,formatInfo:{errorCorrectionLevel:2,dataMask:0}},{bits:12392,formatInfo:{errorCorrectionLevel:2,dataMask:1}},{bits:16177,formatInfo:{errorCorrectionLevel:2,dataMask:2}},{bits:14854,formatInfo:{errorCorrectionLevel:2,dataMask:3}},{bits:9396,formatInfo:{errorCorrectionLevel:2,dataMask:4}},{bits:8579,formatInfo:{errorCorrectionLevel:2,dataMask:5}},{bits:11994,formatInfo:{errorCorrectionLevel:2,dataMask:6}},{bits:11245,formatInfo:{errorCorrectionLevel:2,dataMask:7}}],d=[function(M){return(M.y+M.x)%2===0},function(M){return M.y%2===0},function(M){return M.x%3===0},function(M){return(M.y+M.x)%3===0},function(M){return(Math.floor(M.y/2)+Math.floor(M.x/3))%2===0},function(M){return M.x*M.y%2+M.x*M.y%3===0},function(M){return(M.y*M.x%2+M.y*M.x%3)%2===0},function(M){return((M.y+M.x)%2+M.y*M.x%3)%2===0}];function h(M){var O=17+4*M.versionNumber,A=n.BitMatrix.createEmpty(O,O);A.setRegion(0,0,9,9,!0),A.setRegion(O-8,0,8,9,!0),A.setRegion(0,O-8,9,8,!0);for(var D=0,N=M.alignmentPatternCenters;D<N.length;D++)for(var B=N[D],T=0,H=M.alignmentPatternCenters;T<H.length;T++){var te=H[T];B===6&&te===6||B===6&&te===O-7||B===O-7&&te===6||A.setRegion(B-2,te-2,5,5,!0)}return A.setRegion(6,9,1,O-17,!0),A.setRegion(9,6,O-17,1,!0),M.versionNumber>6&&(A.setRegion(O-11,0,3,6,!0),A.setRegion(0,O-11,6,3,!0)),A}function p(M,O,A){for(var D=d[A.dataMask],N=M.height,B=h(O),T=[],H=0,te=0,L=!0,z=N-1;z>0;z-=2){z===6&&z--;for(var J=0;J<N;J++)for(var Q=L?N-1-J:J,ce=0;ce<2;ce++){var X=z-ce;if(!B.get(X,Q)){te++;var ie=M.get(X,Q);D({y:Q,x:X})&&(ie=!ie),H=l(ie,H),te===8&&(T.push(H),te=0,H=0)}}L=!L}return T}function g(M){var O=M.height,A=Math.floor((O-17)/4);if(A<=6)return s.VERSIONS[A-1];for(var D=0,N=5;N>=0;N--)for(var B=O-9;B>=O-11;B--)D=l(M.get(B,N),D);for(var T=0,B=5;B>=0;B--)for(var N=O-9;N>=O-11;N--)T=l(M.get(B,N),T);for(var H=1/0,te,L=0,z=s.VERSIONS;L<z.length;L++){var J=z[L];if(J.infoBits===D||J.infoBits===T)return J;var Q=a(D,J.infoBits);Q<H&&(te=J,H=Q),Q=a(T,J.infoBits),Q<H&&(te=J,H=Q)}if(H<=3)return te}function _(M){for(var O=0,A=0;A<=8;A++)A!==6&&(O=l(M.get(A,8),O));for(var D=7;D>=0;D--)D!==6&&(O=l(M.get(8,D),O));for(var N=M.height,B=0,D=N-1;D>=N-7;D--)B=l(M.get(8,D),B);for(var A=N-8;A<N;A++)B=l(M.get(A,8),B);for(var T=1/0,H=null,te=0,L=c;te<L.length;te++){var z=L[te],J=z.bits,Q=z.formatInfo;if(J===O||J===B)return Q;var ce=a(O,J);ce<T&&(H=Q,T=ce),O!==B&&(ce=a(B,J),ce<T&&(H=Q,T=ce))}return T<=3?H:null}function b(M,O,A){var D=O.errorCorrectionLevels[A],N=[],B=0;if(D.ecBlocks.forEach(function(ie){for(var oe=0;oe<ie.numBlocks;oe++)N.push({numDataCodewords:ie.dataCodewordsPerBlock,codewords:[]}),B+=ie.dataCodewordsPerBlock+D.ecCodewordsPerBlock}),M.length<B)return null;M=M.slice(0,B);for(var T=D.ecBlocks[0].dataCodewordsPerBlock,H=0;H<T;H++)for(var te=0,L=N;te<L.length;te++){var z=L[te];z.codewords.push(M.shift())}if(D.ecBlocks.length>1)for(var J=D.ecBlocks[0].numBlocks,Q=D.ecBlocks[1].numBlocks,H=0;H<Q;H++)N[J+H].codewords.push(M.shift());for(;M.length>0;)for(var ce=0,X=N;ce<X.length;ce++){var z=X[ce];z.codewords.push(M.shift())}return N}function C(M){var O=g(M);if(!O)return null;var A=_(M);if(!A)return null;var D=p(M,O,A),N=b(D,O,A.errorCorrectionLevel);if(!N)return null;for(var B=N.reduce(function(ce,X){return ce+X.numDataCodewords},0),T=new Uint8ClampedArray(B),H=0,te=0,L=N;te<L.length;te++){var z=L[te],J=o.decode(z.codewords,z.codewords.length-z.numDataCodewords);if(!J)return null;for(var Q=0;Q<z.numDataCodewords;Q++)T[H++]=J[Q]}try{return r.decode(T,O.versionNumber)}catch{return null}}function y(M){if(M==null)return null;var O=C(M);if(O)return O;for(var A=0;A<M.width;A++)for(var D=A+1;D<M.height;D++)M.get(A,D)!==M.get(D,A)&&(M.set(A,D,!M.get(A,D)),M.set(D,A,!M.get(D,A)));return C(M)}e.decode=y},function(i,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=t(7),r=t(8),o;(function(g){g.Numeric="numeric",g.Alphanumeric="alphanumeric",g.Byte="byte",g.Kanji="kanji",g.ECI="eci"})(o=e.Mode||(e.Mode={}));var s=function(g){return g[g.Terminator=0]="Terminator",g[g.Numeric=1]="Numeric",g[g.Alphanumeric=2]="Alphanumeric",g[g.Byte=4]="Byte",g[g.Kanji=8]="Kanji",g[g.ECI=7]="ECI",g}(s||{});function a(g,_){for(var b=[],C="",y=[10,12,14][_],M=g.readBits(y);M>=3;){var O=g.readBits(10);if(O>=1e3)throw new Error("Invalid numeric value above 999");var A=Math.floor(O/100),D=Math.floor(O/10)%10,N=O%10;b.push(48+A,48+D,48+N),C+=A.toString()+D.toString()+N.toString(),M-=3}if(M===2){var O=g.readBits(7);if(O>=100)throw new Error("Invalid numeric value above 99");var A=Math.floor(O/10),D=O%10;b.push(48+A,48+D),C+=A.toString()+D.toString()}else if(M===1){var O=g.readBits(4);if(O>=10)throw new Error("Invalid numeric value above 9");b.push(48+O),C+=O.toString()}return{bytes:b,text:C}}var l=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function c(g,_){for(var b=[],C="",y=[9,11,13][_],M=g.readBits(y);M>=2;){var O=g.readBits(11),A=Math.floor(O/45),D=O%45;b.push(l[A].charCodeAt(0),l[D].charCodeAt(0)),C+=l[A]+l[D],M-=2}if(M===1){var A=g.readBits(6);b.push(l[A].charCodeAt(0)),C+=l[A]}return{bytes:b,text:C}}function d(g,_){for(var b=[],C="",y=[8,16,16][_],M=g.readBits(y),O=0;O<M;O++){var A=g.readBits(8);b.push(A)}try{C+=decodeURIComponent(b.map(function(D){return"%"+("0"+D.toString(16)).substr(-2)}).join(""))}catch{}return{bytes:b,text:C}}function h(g,_){for(var b=[],C="",y=[8,10,12][_],M=g.readBits(y),O=0;O<M;O++){var A=g.readBits(13),D=Math.floor(A/192)<<8|A%192;D<7936?D+=33088:D+=49472,b.push(D>>8,D&255),C+=String.fromCharCode(r.shiftJISTable[D])}return{bytes:b,text:C}}function p(g,_){for(var b,C,y,M,O=new n.BitStream(g),A=_<=9?0:_<=26?1:2,D={text:"",bytes:[],chunks:[],version:_};O.available()>=4;){var N=O.readBits(4);if(N===s.Terminator)return D;if(N===s.ECI)O.readBits(1)===0?D.chunks.push({type:o.ECI,assignmentNumber:O.readBits(7)}):O.readBits(1)===0?D.chunks.push({type:o.ECI,assignmentNumber:O.readBits(14)}):O.readBits(1)===0?D.chunks.push({type:o.ECI,assignmentNumber:O.readBits(21)}):D.chunks.push({type:o.ECI,assignmentNumber:-1});else if(N===s.Numeric){var B=a(O,A);D.text+=B.text,(b=D.bytes).push.apply(b,B.bytes),D.chunks.push({type:o.Numeric,text:B.text})}else if(N===s.Alphanumeric){var T=c(O,A);D.text+=T.text,(C=D.bytes).push.apply(C,T.bytes),D.chunks.push({type:o.Alphanumeric,text:T.text})}else if(N===s.Byte){var H=d(O,A);D.text+=H.text,(y=D.bytes).push.apply(y,H.bytes),D.chunks.push({type:o.Byte,bytes:H.bytes,text:H.text})}else if(N===s.Kanji){var te=h(O,A);D.text+=te.text,(M=D.bytes).push.apply(M,te.bytes),D.chunks.push({type:o.Kanji,bytes:te.bytes,text:te.text})}}if(O.available()===0||O.readBits(O.available())===0)return D}e.decode=p},function(i,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function r(o){this.byteOffset=0,this.bitOffset=0,this.bytes=o}return r.prototype.readBits=function(o){if(o<1||o>32||o>this.available())throw new Error("Cannot read "+o.toString()+" bits");var s=0;if(this.bitOffset>0){var a=8-this.bitOffset,l=o<a?o:a,c=a-l,d=255>>8-l<<c;s=(this.bytes[this.byteOffset]&d)>>c,o-=l,this.bitOffset+=l,this.bitOffset===8&&(this.bitOffset=0,this.byteOffset++)}if(o>0){for(;o>=8;)s=s<<8|this.bytes[this.byteOffset]&255,this.byteOffset++,o-=8;if(o>0){var c=8-o,d=255>>c<<c;s=s<<o|(this.bytes[this.byteOffset]&d)>>c,this.bitOffset+=o}}return s},r.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},r}();e.BitStream=n},function(i,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.shiftJISTable={32:32,33:33,34:34,35:35,36:36,37:37,38:38,39:39,40:40,41:41,42:42,43:43,44:44,45:45,46:46,47:47,48:48,49:49,50:50,51:51,52:52,53:53,54:54,55:55,56:56,57:57,58:58,59:59,60:60,61:61,62:62,63:63,64:64,65:65,66:66,67:67,68:68,69:69,70:70,71:71,72:72,73:73,74:74,75:75,76:76,77:77,78:78,79:79,80:80,81:81,82:82,83:83,84:84,85:85,86:86,87:87,88:88,89:89,90:90,91:91,92:165,93:93,94:94,95:95,96:96,97:97,98:98,99:99,100:100,101:101,102:102,103:103,104:104,105:105,106:106,107:107,108:108,109:109,110:110,111:111,112:112,113:113,114:114,115:115,116:116,117:117,118:118,119:119,120:120,121:121,122:122,123:123,124:124,125:125,126:8254,33088:12288,33089:12289,33090:12290,33091:65292,33092:65294,33093:12539,33094:65306,33095:65307,33096:65311,33097:65281,33098:12443,33099:12444,33100:180,33101:65344,33102:168,33103:65342,33104:65507,33105:65343,33106:12541,33107:12542,33108:12445,33109:12446,33110:12291,33111:20189,33112:12293,33113:12294,33114:12295,33115:12540,33116:8213,33117:8208,33118:65295,33119:92,33120:12316,33121:8214,33122:65372,33123:8230,33124:8229,33125:8216,33126:8217,33127:8220,33128:8221,33129:65288,33130:65289,33131:12308,33132:12309,33133:65339,33134:65341,33135:65371,33136:65373,33137:12296,33138:12297,33139:12298,33140:12299,33141:12300,33142:12301,33143:12302,33144:12303,33145:12304,33146:12305,33147:65291,33148:8722,33149:177,33150:215,33152:247,33153:65309,33154:8800,33155:65308,33156:65310,33157:8806,33158:8807,33159:8734,33160:8756,33161:9794,33162:9792,33163:176,33164:8242,33165:8243,33166:8451,33167:65509,33168:65284,33169:162,33170:163,33171:65285,33172:65283,33173:65286,33174:65290,33175:65312,33176:167,33177:9734,33178:9733,33179:9675,33180:9679,33181:9678,33182:9671,33183:9670,33184:9633,33185:9632,33186:9651,33187:9650,33188:9661,33189:9660,33190:8251,33191:12306,33192:8594,33193:8592,33194:8593,33195:8595,33196:12307,33208:8712,33209:8715,33210:8838,33211:8839,33212:8834,33213:8835,33214:8746,33215:8745,33224:8743,33225:8744,33226:172,33227:8658,33228:8660,33229:8704,33230:8707,33242:8736,33243:8869,33244:8978,33245:8706,33246:8711,33247:8801,33248:8786,33249:8810,33250:8811,33251:8730,33252:8765,33253:8733,33254:8757,33255:8747,33256:8748,33264:8491,33265:8240,33266:9839,33267:9837,33268:9834,33269:8224,33270:8225,33271:182,33276:9711,33359:65296,33360:65297,33361:65298,33362:65299,33363:65300,33364:65301,33365:65302,33366:65303,33367:65304,33368:65305,33376:65313,33377:65314,33378:65315,33379:65316,33380:65317,33381:65318,33382:65319,33383:65320,33384:65321,33385:65322,33386:65323,33387:65324,33388:65325,33389:65326,33390:65327,33391:65328,33392:65329,33393:65330,33394:65331,33395:65332,33396:65333,33397:65334,33398:65335,33399:65336,33400:65337,33401:65338,33409:65345,33410:65346,33411:65347,33412:65348,33413:65349,33414:65350,33415:65351,33416:65352,33417:65353,33418:65354,33419:65355,33420:65356,33421:65357,33422:65358,33423:65359,33424:65360,33425:65361,33426:65362,33427:65363,33428:65364,33429:65365,33430:65366,33431:65367,33432:65368,33433:65369,33434:65370,33439:12353,33440:12354,33441:12355,33442:12356,33443:12357,33444:12358,33445:12359,33446:12360,33447:12361,33448:12362,33449:12363,33450:12364,33451:12365,33452:12366,33453:12367,33454:12368,33455:12369,33456:12370,33457:12371,33458:12372,33459:12373,33460:12374,33461:12375,33462:12376,33463:12377,33464:12378,33465:12379,33466:12380,33467:12381,33468:12382,33469:12383,33470:12384,33471:12385,33472:12386,33473:12387,33474:12388,33475:12389,33476:12390,33477:12391,33478:12392,33479:12393,33480:12394,33481:12395,33482:12396,33483:12397,33484:12398,33485:12399,33486:12400,33487:12401,33488:12402,33489:12403,33490:12404,33491:12405,33492:12406,33493:12407,33494:12408,33495:12409,33496:12410,33497:12411,33498:12412,33499:12413,33500:12414,33501:12415,33502:12416,33503:12417,33504:12418,33505:12419,33506:12420,33507:12421,33508:12422,33509:12423,33510:12424,33511:12425,33512:12426,33513:12427,33514:12428,33515:12429,33516:12430,33517:12431,33518:12432,33519:12433,33520:12434,33521:12435,33600:12449,33601:12450,33602:12451,33603:12452,33604:12453,33605:12454,33606:12455,33607:12456,33608:12457,33609:12458,33610:12459,33611:12460,33612:12461,33613:12462,33614:12463,33615:12464,33616:12465,33617:12466,33618:12467,33619:12468,33620:12469,33621:12470,33622:12471,33623:12472,33624:12473,33625:12474,33626:12475,33627:12476,33628:12477,33629:12478,33630:12479,33631:12480,33632:12481,33633:12482,33634:12483,33635:12484,33636:12485,33637:12486,33638:12487,33639:12488,33640:12489,33641:12490,33642:12491,33643:12492,33644:12493,33645:12494,33646:12495,33647:12496,33648:12497,33649:12498,33650:12499,33651:12500,33652:12501,33653:12502,33654:12503,33655:12504,33656:12505,33657:12506,33658:12507,33659:12508,33660:12509,33661:12510,33662:12511,33664:12512,33665:12513,33666:12514,33667:12515,33668:12516,33669:12517,33670:12518,33671:12519,33672:12520,33673:12521,33674:12522,33675:12523,33676:12524,33677:12525,33678:12526,33679:12527,33680:12528,33681:12529,33682:12530,33683:12531,33684:12532,33685:12533,33686:12534,33695:913,33696:914,33697:915,33698:916,33699:917,33700:918,33701:919,33702:920,33703:921,33704:922,33705:923,33706:924,33707:925,33708:926,33709:927,33710:928,33711:929,33712:931,33713:932,33714:933,33715:934,33716:935,33717:936,33718:937,33727:945,33728:946,33729:947,33730:948,33731:949,33732:950,33733:951,33734:952,33735:953,33736:954,33737:955,33738:956,33739:957,33740:958,33741:959,33742:960,33743:961,33744:963,33745:964,33746:965,33747:966,33748:967,33749:968,33750:969,33856:1040,33857:1041,33858:1042,33859:1043,33860:1044,33861:1045,33862:1025,33863:1046,33864:1047,33865:1048,33866:1049,33867:1050,33868:1051,33869:1052,33870:1053,33871:1054,33872:1055,33873:1056,33874:1057,33875:1058,33876:1059,33877:1060,33878:1061,33879:1062,33880:1063,33881:1064,33882:1065,33883:1066,33884:1067,33885:1068,33886:1069,33887:1070,33888:1071,33904:1072,33905:1073,33906:1074,33907:1075,33908:1076,33909:1077,33910:1105,33911:1078,33912:1079,33913:1080,33914:1081,33915:1082,33916:1083,33917:1084,33918:1085,33920:1086,33921:1087,33922:1088,33923:1089,33924:1090,33925:1091,33926:1092,33927:1093,33928:1094,33929:1095,33930:1096,33931:1097,33932:1098,33933:1099,33934:1100,33935:1101,33936:1102,33937:1103,33951:9472,33952:9474,33953:9484,33954:9488,33955:9496,33956:9492,33957:9500,33958:9516,33959:9508,33960:9524,33961:9532,33962:9473,33963:9475,33964:9487,33965:9491,33966:9499,33967:9495,33968:9507,33969:9523,33970:9515,33971:9531,33972:9547,33973:9504,33974:9519,33975:9512,33976:9527,33977:9535,33978:9501,33979:9520,33980:9509,33981:9528,33982:9538,34975:20124,34976:21782,34977:23043,34978:38463,34979:21696,34980:24859,34981:25384,34982:23030,34983:36898,34984:33909,34985:33564,34986:31312,34987:24746,34988:25569,34989:28197,34990:26093,34991:33894,34992:33446,34993:39925,34994:26771,34995:22311,34996:26017,34997:25201,34998:23451,34999:22992,35e3:34427,35001:39156,35002:32098,35003:32190,35004:39822,35005:25110,35006:31903,35007:34999,35008:23433,35009:24245,35010:25353,35011:26263,35012:26696,35013:38343,35014:38797,35015:26447,35016:20197,35017:20234,35018:20301,35019:20381,35020:20553,35021:22258,35022:22839,35023:22996,35024:23041,35025:23561,35026:24799,35027:24847,35028:24944,35029:26131,35030:26885,35031:28858,35032:30031,35033:30064,35034:31227,35035:32173,35036:32239,35037:32963,35038:33806,35039:34915,35040:35586,35041:36949,35042:36986,35043:21307,35044:20117,35045:20133,35046:22495,35047:32946,35048:37057,35049:30959,35050:19968,35051:22769,35052:28322,35053:36920,35054:31282,35055:33576,35056:33419,35057:39983,35058:20801,35059:21360,35060:21693,35061:21729,35062:22240,35063:23035,35064:24341,35065:39154,35066:28139,35067:32996,35068:34093,35136:38498,35137:38512,35138:38560,35139:38907,35140:21515,35141:21491,35142:23431,35143:28879,35144:32701,35145:36802,35146:38632,35147:21359,35148:40284,35149:31418,35150:19985,35151:30867,35152:33276,35153:28198,35154:22040,35155:21764,35156:27421,35157:34074,35158:39995,35159:23013,35160:21417,35161:28006,35162:29916,35163:38287,35164:22082,35165:20113,35166:36939,35167:38642,35168:33615,35169:39180,35170:21473,35171:21942,35172:23344,35173:24433,35174:26144,35175:26355,35176:26628,35177:27704,35178:27891,35179:27945,35180:29787,35181:30408,35182:31310,35183:38964,35184:33521,35185:34907,35186:35424,35187:37613,35188:28082,35189:30123,35190:30410,35191:39365,35192:24742,35193:35585,35194:36234,35195:38322,35196:27022,35197:21421,35198:20870,35200:22290,35201:22576,35202:22852,35203:23476,35204:24310,35205:24616,35206:25513,35207:25588,35208:27839,35209:28436,35210:28814,35211:28948,35212:29017,35213:29141,35214:29503,35215:32257,35216:33398,35217:33489,35218:34199,35219:36960,35220:37467,35221:40219,35222:22633,35223:26044,35224:27738,35225:29989,35226:20985,35227:22830,35228:22885,35229:24448,35230:24540,35231:25276,35232:26106,35233:27178,35234:27431,35235:27572,35236:29579,35237:32705,35238:35158,35239:40236,35240:40206,35241:40644,35242:23713,35243:27798,35244:33659,35245:20740,35246:23627,35247:25014,35248:33222,35249:26742,35250:29281,35251:20057,35252:20474,35253:21368,35254:24681,35255:28201,35256:31311,35257:38899,35258:19979,35259:21270,35260:20206,35261:20309,35262:20285,35263:20385,35264:20339,35265:21152,35266:21487,35267:22025,35268:22799,35269:23233,35270:23478,35271:23521,35272:31185,35273:26247,35274:26524,35275:26550,35276:27468,35277:27827,35278:28779,35279:29634,35280:31117,35281:31166,35282:31292,35283:31623,35284:33457,35285:33499,35286:33540,35287:33655,35288:33775,35289:33747,35290:34662,35291:35506,35292:22057,35293:36008,35294:36838,35295:36942,35296:38686,35297:34442,35298:20420,35299:23784,35300:25105,35301:29273,35302:30011,35303:33253,35304:33469,35305:34558,35306:36032,35307:38597,35308:39187,35309:39381,35310:20171,35311:20250,35312:35299,35313:22238,35314:22602,35315:22730,35316:24315,35317:24555,35318:24618,35319:24724,35320:24674,35321:25040,35322:25106,35323:25296,35324:25913,35392:39745,35393:26214,35394:26800,35395:28023,35396:28784,35397:30028,35398:30342,35399:32117,35400:33445,35401:34809,35402:38283,35403:38542,35404:35997,35405:20977,35406:21182,35407:22806,35408:21683,35409:23475,35410:23830,35411:24936,35412:27010,35413:28079,35414:30861,35415:33995,35416:34903,35417:35442,35418:37799,35419:39608,35420:28012,35421:39336,35422:34521,35423:22435,35424:26623,35425:34510,35426:37390,35427:21123,35428:22151,35429:21508,35430:24275,35431:25313,35432:25785,35433:26684,35434:26680,35435:27579,35436:29554,35437:30906,35438:31339,35439:35226,35440:35282,35441:36203,35442:36611,35443:37101,35444:38307,35445:38548,35446:38761,35447:23398,35448:23731,35449:27005,35450:38989,35451:38990,35452:25499,35453:31520,35454:27179,35456:27263,35457:26806,35458:39949,35459:28511,35460:21106,35461:21917,35462:24688,35463:25324,35464:27963,35465:28167,35466:28369,35467:33883,35468:35088,35469:36676,35470:19988,35471:39993,35472:21494,35473:26907,35474:27194,35475:38788,35476:26666,35477:20828,35478:31427,35479:33970,35480:37340,35481:37772,35482:22107,35483:40232,35484:26658,35485:33541,35486:33841,35487:31909,35488:21e3,35489:33477,35490:29926,35491:20094,35492:20355,35493:20896,35494:23506,35495:21002,35496:21208,35497:21223,35498:24059,35499:21914,35500:22570,35501:23014,35502:23436,35503:23448,35504:23515,35505:24178,35506:24185,35507:24739,35508:24863,35509:24931,35510:25022,35511:25563,35512:25954,35513:26577,35514:26707,35515:26874,35516:27454,35517:27475,35518:27735,35519:28450,35520:28567,35521:28485,35522:29872,35523:29976,35524:30435,35525:30475,35526:31487,35527:31649,35528:31777,35529:32233,35530:32566,35531:32752,35532:32925,35533:33382,35534:33694,35535:35251,35536:35532,35537:36011,35538:36996,35539:37969,35540:38291,35541:38289,35542:38306,35543:38501,35544:38867,35545:39208,35546:33304,35547:20024,35548:21547,35549:23736,35550:24012,35551:29609,35552:30284,35553:30524,35554:23721,35555:32747,35556:36107,35557:38593,35558:38929,35559:38996,35560:39e3,35561:20225,35562:20238,35563:21361,35564:21916,35565:22120,35566:22522,35567:22855,35568:23305,35569:23492,35570:23696,35571:24076,35572:24190,35573:24524,35574:25582,35575:26426,35576:26071,35577:26082,35578:26399,35579:26827,35580:26820,35648:27231,35649:24112,35650:27589,35651:27671,35652:27773,35653:30079,35654:31048,35655:23395,35656:31232,35657:32e3,35658:24509,35659:35215,35660:35352,35661:36020,35662:36215,35663:36556,35664:36637,35665:39138,35666:39438,35667:39740,35668:20096,35669:20605,35670:20736,35671:22931,35672:23452,35673:25135,35674:25216,35675:25836,35676:27450,35677:29344,35678:30097,35679:31047,35680:32681,35681:34811,35682:35516,35683:35696,35684:25516,35685:33738,35686:38816,35687:21513,35688:21507,35689:21931,35690:26708,35691:27224,35692:35440,35693:30759,35694:26485,35695:40653,35696:21364,35697:23458,35698:33050,35699:34384,35700:36870,35701:19992,35702:20037,35703:20167,35704:20241,35705:21450,35706:21560,35707:23470,35708:24339,35709:24613,35710:25937,35712:26429,35713:27714,35714:27762,35715:27875,35716:28792,35717:29699,35718:31350,35719:31406,35720:31496,35721:32026,35722:31998,35723:32102,35724:26087,35725:29275,35726:21435,35727:23621,35728:24040,35729:25298,35730:25312,35731:25369,35732:28192,35733:34394,35734:35377,35735:36317,35736:37624,35737:28417,35738:31142,35739:39770,35740:20136,35741:20139,35742:20140,35743:20379,35744:20384,35745:20689,35746:20807,35747:31478,35748:20849,35749:20982,35750:21332,35751:21281,35752:21375,35753:21483,35754:21932,35755:22659,35756:23777,35757:24375,35758:24394,35759:24623,35760:24656,35761:24685,35762:25375,35763:25945,35764:27211,35765:27841,35766:29378,35767:29421,35768:30703,35769:33016,35770:33029,35771:33288,35772:34126,35773:37111,35774:37857,35775:38911,35776:39255,35777:39514,35778:20208,35779:20957,35780:23597,35781:26241,35782:26989,35783:23616,35784:26354,35785:26997,35786:29577,35787:26704,35788:31873,35789:20677,35790:21220,35791:22343,35792:24062,35793:37670,35794:26020,35795:27427,35796:27453,35797:29748,35798:31105,35799:31165,35800:31563,35801:32202,35802:33465,35803:33740,35804:34943,35805:35167,35806:35641,35807:36817,35808:37329,35809:21535,35810:37504,35811:20061,35812:20534,35813:21477,35814:21306,35815:29399,35816:29590,35817:30697,35818:33510,35819:36527,35820:39366,35821:39368,35822:39378,35823:20855,35824:24858,35825:34398,35826:21936,35827:31354,35828:20598,35829:23507,35830:36935,35831:38533,35832:20018,35833:27355,35834:37351,35835:23633,35836:23624,35904:25496,35905:31391,35906:27795,35907:38772,35908:36705,35909:31402,35910:29066,35911:38536,35912:31874,35913:26647,35914:32368,35915:26705,35916:37740,35917:21234,35918:21531,35919:34219,35920:35347,35921:32676,35922:36557,35923:37089,35924:21350,35925:34952,35926:31041,35927:20418,35928:20670,35929:21009,35930:20804,35931:21843,35932:22317,35933:29674,35934:22411,35935:22865,35936:24418,35937:24452,35938:24693,35939:24950,35940:24935,35941:25001,35942:25522,35943:25658,35944:25964,35945:26223,35946:26690,35947:28179,35948:30054,35949:31293,35950:31995,35951:32076,35952:32153,35953:32331,35954:32619,35955:33550,35956:33610,35957:34509,35958:35336,35959:35427,35960:35686,35961:36605,35962:38938,35963:40335,35964:33464,35965:36814,35966:39912,35968:21127,35969:25119,35970:25731,35971:28608,35972:38553,35973:26689,35974:20625,35975:27424,35976:27770,35977:28500,35978:31348,35979:32080,35980:34880,35981:35363,35982:26376,35983:20214,35984:20537,35985:20518,35986:20581,35987:20860,35988:21048,35989:21091,35990:21927,35991:22287,35992:22533,35993:23244,35994:24314,35995:25010,35996:25080,35997:25331,35998:25458,35999:26908,36e3:27177,36001:29309,36002:29356,36003:29486,36004:30740,36005:30831,36006:32121,36007:30476,36008:32937,36009:35211,36010:35609,36011:36066,36012:36562,36013:36963,36014:37749,36015:38522,36016:38997,36017:39443,36018:40568,36019:20803,36020:21407,36021:21427,36022:24187,36023:24358,36024:28187,36025:28304,36026:29572,36027:29694,36028:32067,36029:33335,36030:35328,36031:35578,36032:38480,36033:20046,36034:20491,36035:21476,36036:21628,36037:22266,36038:22993,36039:23396,36040:24049,36041:24235,36042:24359,36043:25144,36044:25925,36045:26543,36046:28246,36047:29392,36048:31946,36049:34996,36050:32929,36051:32993,36052:33776,36053:34382,36054:35463,36055:36328,36056:37431,36057:38599,36058:39015,36059:40723,36060:20116,36061:20114,36062:20237,36063:21320,36064:21577,36065:21566,36066:23087,36067:24460,36068:24481,36069:24735,36070:26791,36071:27278,36072:29786,36073:30849,36074:35486,36075:35492,36076:35703,36077:37264,36078:20062,36079:39881,36080:20132,36081:20348,36082:20399,36083:20505,36084:20502,36085:20809,36086:20844,36087:21151,36088:21177,36089:21246,36090:21402,36091:21475,36092:21521,36160:21518,36161:21897,36162:22353,36163:22434,36164:22909,36165:23380,36166:23389,36167:23439,36168:24037,36169:24039,36170:24055,36171:24184,36172:24195,36173:24218,36174:24247,36175:24344,36176:24658,36177:24908,36178:25239,36179:25304,36180:25511,36181:25915,36182:26114,36183:26179,36184:26356,36185:26477,36186:26657,36187:26775,36188:27083,36189:27743,36190:27946,36191:28009,36192:28207,36193:28317,36194:30002,36195:30343,36196:30828,36197:31295,36198:31968,36199:32005,36200:32024,36201:32094,36202:32177,36203:32789,36204:32771,36205:32943,36206:32945,36207:33108,36208:33167,36209:33322,36210:33618,36211:34892,36212:34913,36213:35611,36214:36002,36215:36092,36216:37066,36217:37237,36218:37489,36219:30783,36220:37628,36221:38308,36222:38477,36224:38917,36225:39321,36226:39640,36227:40251,36228:21083,36229:21163,36230:21495,36231:21512,36232:22741,36233:25335,36234:28640,36235:35946,36236:36703,36237:40633,36238:20811,36239:21051,36240:21578,36241:22269,36242:31296,36243:37239,36244:40288,36245:40658,36246:29508,36247:28425,36248:33136,36249:29969,36250:24573,36251:24794,36252:39592,36253:29403,36254:36796,36255:27492,36256:38915,36257:20170,36258:22256,36259:22372,36260:22718,36261:23130,36262:24680,36263:25031,36264:26127,36265:26118,36266:26681,36267:26801,36268:28151,36269:30165,36270:32058,36271:33390,36272:39746,36273:20123,36274:20304,36275:21449,36276:21766,36277:23919,36278:24038,36279:24046,36280:26619,36281:27801,36282:29811,36283:30722,36284:35408,36285:37782,36286:35039,36287:22352,36288:24231,36289:25387,36290:20661,36291:20652,36292:20877,36293:26368,36294:21705,36295:22622,36296:22971,36297:23472,36298:24425,36299:25165,36300:25505,36301:26685,36302:27507,36303:28168,36304:28797,36305:37319,36306:29312,36307:30741,36308:30758,36309:31085,36310:25998,36311:32048,36312:33756,36313:35009,36314:36617,36315:38555,36316:21092,36317:22312,36318:26448,36319:32618,36320:36001,36321:20916,36322:22338,36323:38442,36324:22586,36325:27018,36326:32948,36327:21682,36328:23822,36329:22524,36330:30869,36331:40442,36332:20316,36333:21066,36334:21643,36335:25662,36336:26152,36337:26388,36338:26613,36339:31364,36340:31574,36341:32034,36342:37679,36343:26716,36344:39853,36345:31545,36346:21273,36347:20874,36348:21047,36416:23519,36417:25334,36418:25774,36419:25830,36420:26413,36421:27578,36422:34217,36423:38609,36424:30352,36425:39894,36426:25420,36427:37638,36428:39851,36429:30399,36430:26194,36431:19977,36432:20632,36433:21442,36434:23665,36435:24808,36436:25746,36437:25955,36438:26719,36439:29158,36440:29642,36441:29987,36442:31639,36443:32386,36444:34453,36445:35715,36446:36059,36447:37240,36448:39184,36449:26028,36450:26283,36451:27531,36452:20181,36453:20180,36454:20282,36455:20351,36456:21050,36457:21496,36458:21490,36459:21987,36460:22235,36461:22763,36462:22987,36463:22985,36464:23039,36465:23376,36466:23629,36467:24066,36468:24107,36469:24535,36470:24605,36471:25351,36472:25903,36473:23388,36474:26031,36475:26045,36476:26088,36477:26525,36478:27490,36480:27515,36481:27663,36482:29509,36483:31049,36484:31169,36485:31992,36486:32025,36487:32043,36488:32930,36489:33026,36490:33267,36491:35222,36492:35422,36493:35433,36494:35430,36495:35468,36496:35566,36497:36039,36498:36060,36499:38604,36500:39164,36501:27503,36502:20107,36503:20284,36504:20365,36505:20816,36506:23383,36507:23546,36508:24904,36509:25345,36510:26178,36511:27425,36512:28363,36513:27835,36514:29246,36515:29885,36516:30164,36517:30913,36518:31034,36519:32780,36520:32819,36521:33258,36522:33940,36523:36766,36524:27728,36525:40575,36526:24335,36527:35672,36528:40235,36529:31482,36530:36600,36531:23437,36532:38635,36533:19971,36534:21489,36535:22519,36536:22833,36537:23241,36538:23460,36539:24713,36540:28287,36541:28422,36542:30142,36543:36074,36544:23455,36545:34048,36546:31712,36547:20594,36548:26612,36549:33437,36550:23649,36551:34122,36552:32286,36553:33294,36554:20889,36555:23556,36556:25448,36557:36198,36558:26012,36559:29038,36560:31038,36561:32023,36562:32773,36563:35613,36564:36554,36565:36974,36566:34503,36567:37034,36568:20511,36569:21242,36570:23610,36571:26451,36572:28796,36573:29237,36574:37196,36575:37320,36576:37675,36577:33509,36578:23490,36579:24369,36580:24825,36581:20027,36582:21462,36583:23432,36584:25163,36585:26417,36586:27530,36587:29417,36588:29664,36589:31278,36590:33131,36591:36259,36592:37202,36593:39318,36594:20754,36595:21463,36596:21610,36597:23551,36598:25480,36599:27193,36600:32172,36601:38656,36602:22234,36603:21454,36604:21608,36672:23447,36673:23601,36674:24030,36675:20462,36676:24833,36677:25342,36678:27954,36679:31168,36680:31179,36681:32066,36682:32333,36683:32722,36684:33261,36685:33311,36686:33936,36687:34886,36688:35186,36689:35728,36690:36468,36691:36655,36692:36913,36693:37195,36694:37228,36695:38598,36696:37276,36697:20160,36698:20303,36699:20805,36700:21313,36701:24467,36702:25102,36703:26580,36704:27713,36705:28171,36706:29539,36707:32294,36708:37325,36709:37507,36710:21460,36711:22809,36712:23487,36713:28113,36714:31069,36715:32302,36716:31899,36717:22654,36718:29087,36719:20986,36720:34899,36721:36848,36722:20426,36723:23803,36724:26149,36725:30636,36726:31459,36727:33308,36728:39423,36729:20934,36730:24490,36731:26092,36732:26991,36733:27529,36734:28147,36736:28310,36737:28516,36738:30462,36739:32020,36740:24033,36741:36981,36742:37255,36743:38918,36744:20966,36745:21021,36746:25152,36747:26257,36748:26329,36749:28186,36750:24246,36751:32210,36752:32626,36753:26360,36754:34223,36755:34295,36756:35576,36757:21161,36758:21465,36759:22899,36760:24207,36761:24464,36762:24661,36763:37604,36764:38500,36765:20663,36766:20767,36767:21213,36768:21280,36769:21319,36770:21484,36771:21736,36772:21830,36773:21809,36774:22039,36775:22888,36776:22974,36777:23100,36778:23477,36779:23558,36780:23567,36781:23569,36782:23578,36783:24196,36784:24202,36785:24288,36786:24432,36787:25215,36788:25220,36789:25307,36790:25484,36791:25463,36792:26119,36793:26124,36794:26157,36795:26230,36796:26494,36797:26786,36798:27167,36799:27189,36800:27836,36801:28040,36802:28169,36803:28248,36804:28988,36805:28966,36806:29031,36807:30151,36808:30465,36809:30813,36810:30977,36811:31077,36812:31216,36813:31456,36814:31505,36815:31911,36816:32057,36817:32918,36818:33750,36819:33931,36820:34121,36821:34909,36822:35059,36823:35359,36824:35388,36825:35412,36826:35443,36827:35937,36828:36062,36829:37284,36830:37478,36831:37758,36832:37912,36833:38556,36834:38808,36835:19978,36836:19976,36837:19998,36838:20055,36839:20887,36840:21104,36841:22478,36842:22580,36843:22732,36844:23330,36845:24120,36846:24773,36847:25854,36848:26465,36849:26454,36850:27972,36851:29366,36852:30067,36853:31331,36854:33976,36855:35698,36856:37304,36857:37664,36858:22065,36859:22516,36860:39166,36928:25325,36929:26893,36930:27542,36931:29165,36932:32340,36933:32887,36934:33394,36935:35302,36936:39135,36937:34645,36938:36785,36939:23611,36940:20280,36941:20449,36942:20405,36943:21767,36944:23072,36945:23517,36946:23529,36947:24515,36948:24910,36949:25391,36950:26032,36951:26187,36952:26862,36953:27035,36954:28024,36955:28145,36956:30003,36957:30137,36958:30495,36959:31070,36960:31206,36961:32051,36962:33251,36963:33455,36964:34218,36965:35242,36966:35386,36967:36523,36968:36763,36969:36914,36970:37341,36971:38663,36972:20154,36973:20161,36974:20995,36975:22645,36976:22764,36977:23563,36978:29978,36979:23613,36980:33102,36981:35338,36982:36805,36983:38499,36984:38765,36985:31525,36986:35535,36987:38920,36988:37218,36989:22259,36990:21416,36992:36887,36993:21561,36994:22402,36995:24101,36996:25512,36997:27700,36998:28810,36999:30561,37e3:31883,37001:32736,37002:34928,37003:36930,37004:37204,37005:37648,37006:37656,37007:38543,37008:29790,37009:39620,37010:23815,37011:23913,37012:25968,37013:26530,37014:36264,37015:38619,37016:25454,37017:26441,37018:26905,37019:33733,37020:38935,37021:38592,37022:35070,37023:28548,37024:25722,37025:23544,37026:19990,37027:28716,37028:30045,37029:26159,37030:20932,37031:21046,37032:21218,37033:22995,37034:24449,37035:24615,37036:25104,37037:25919,37038:25972,37039:26143,37040:26228,37041:26866,37042:26646,37043:27491,37044:28165,37045:29298,37046:29983,37047:30427,37048:31934,37049:32854,37050:22768,37051:35069,37052:35199,37053:35488,37054:35475,37055:35531,37056:36893,37057:37266,37058:38738,37059:38745,37060:25993,37061:31246,37062:33030,37063:38587,37064:24109,37065:24796,37066:25114,37067:26021,37068:26132,37069:26512,37070:30707,37071:31309,37072:31821,37073:32318,37074:33034,37075:36012,37076:36196,37077:36321,37078:36447,37079:30889,37080:20999,37081:25305,37082:25509,37083:25666,37084:25240,37085:35373,37086:31363,37087:31680,37088:35500,37089:38634,37090:32118,37091:33292,37092:34633,37093:20185,37094:20808,37095:21315,37096:21344,37097:23459,37098:23554,37099:23574,37100:24029,37101:25126,37102:25159,37103:25776,37104:26643,37105:26676,37106:27849,37107:27973,37108:27927,37109:26579,37110:28508,37111:29006,37112:29053,37113:26059,37114:31359,37115:31661,37116:32218,37184:32330,37185:32680,37186:33146,37187:33307,37188:33337,37189:34214,37190:35438,37191:36046,37192:36341,37193:36984,37194:36983,37195:37549,37196:37521,37197:38275,37198:39854,37199:21069,37200:21892,37201:28472,37202:28982,37203:20840,37204:31109,37205:32341,37206:33203,37207:31950,37208:22092,37209:22609,37210:23720,37211:25514,37212:26366,37213:26365,37214:26970,37215:29401,37216:30095,37217:30094,37218:30990,37219:31062,37220:31199,37221:31895,37222:32032,37223:32068,37224:34311,37225:35380,37226:38459,37227:36961,37228:40736,37229:20711,37230:21109,37231:21452,37232:21474,37233:20489,37234:21930,37235:22766,37236:22863,37237:29245,37238:23435,37239:23652,37240:21277,37241:24803,37242:24819,37243:25436,37244:25475,37245:25407,37246:25531,37248:25805,37249:26089,37250:26361,37251:24035,37252:27085,37253:27133,37254:28437,37255:29157,37256:20105,37257:30185,37258:30456,37259:31379,37260:31967,37261:32207,37262:32156,37263:32865,37264:33609,37265:33624,37266:33900,37267:33980,37268:34299,37269:35013,37270:36208,37271:36865,37272:36973,37273:37783,37274:38684,37275:39442,37276:20687,37277:22679,37278:24974,37279:33235,37280:34101,37281:36104,37282:36896,37283:20419,37284:20596,37285:21063,37286:21363,37287:24687,37288:25417,37289:26463,37290:28204,37291:36275,37292:36895,37293:20439,37294:23646,37295:36042,37296:26063,37297:32154,37298:21330,37299:34966,37300:20854,37301:25539,37302:23384,37303:23403,37304:23562,37305:25613,37306:26449,37307:36956,37308:20182,37309:22810,37310:22826,37311:27760,37312:35409,37313:21822,37314:22549,37315:22949,37316:24816,37317:25171,37318:26561,37319:33333,37320:26965,37321:38464,37322:39364,37323:39464,37324:20307,37325:22534,37326:23550,37327:32784,37328:23729,37329:24111,37330:24453,37331:24608,37332:24907,37333:25140,37334:26367,37335:27888,37336:28382,37337:32974,37338:33151,37339:33492,37340:34955,37341:36024,37342:36864,37343:36910,37344:38538,37345:40667,37346:39899,37347:20195,37348:21488,37349:22823,37350:31532,37351:37261,37352:38988,37353:40441,37354:28381,37355:28711,37356:21331,37357:21828,37358:23429,37359:25176,37360:25246,37361:25299,37362:27810,37363:28655,37364:29730,37365:35351,37366:37944,37367:28609,37368:35582,37369:33592,37370:20967,37371:34552,37372:21482,37440:21481,37441:20294,37442:36948,37443:36784,37444:22890,37445:33073,37446:24061,37447:31466,37448:36799,37449:26842,37450:35895,37451:29432,37452:40008,37453:27197,37454:35504,37455:20025,37456:21336,37457:22022,37458:22374,37459:25285,37460:25506,37461:26086,37462:27470,37463:28129,37464:28251,37465:28845,37466:30701,37467:31471,37468:31658,37469:32187,37470:32829,37471:32966,37472:34507,37473:35477,37474:37723,37475:22243,37476:22727,37477:24382,37478:26029,37479:26262,37480:27264,37481:27573,37482:30007,37483:35527,37484:20516,37485:30693,37486:22320,37487:24347,37488:24677,37489:26234,37490:27744,37491:30196,37492:31258,37493:32622,37494:33268,37495:34584,37496:36933,37497:39347,37498:31689,37499:30044,37500:31481,37501:31569,37502:33988,37504:36880,37505:31209,37506:31378,37507:33590,37508:23265,37509:30528,37510:20013,37511:20210,37512:23449,37513:24544,37514:25277,37515:26172,37516:26609,37517:27880,37518:34411,37519:34935,37520:35387,37521:37198,37522:37619,37523:39376,37524:27159,37525:28710,37526:29482,37527:33511,37528:33879,37529:36015,37530:19969,37531:20806,37532:20939,37533:21899,37534:23541,37535:24086,37536:24115,37537:24193,37538:24340,37539:24373,37540:24427,37541:24500,37542:25074,37543:25361,37544:26274,37545:26397,37546:28526,37547:29266,37548:30010,37549:30522,37550:32884,37551:33081,37552:33144,37553:34678,37554:35519,37555:35548,37556:36229,37557:36339,37558:37530,37559:38263,37560:38914,37561:40165,37562:21189,37563:25431,37564:30452,37565:26389,37566:27784,37567:29645,37568:36035,37569:37806,37570:38515,37571:27941,37572:22684,37573:26894,37574:27084,37575:36861,37576:37786,37577:30171,37578:36890,37579:22618,37580:26626,37581:25524,37582:27131,37583:20291,37584:28460,37585:26584,37586:36795,37587:34086,37588:32180,37589:37716,37590:26943,37591:28528,37592:22378,37593:22775,37594:23340,37595:32044,37596:29226,37597:21514,37598:37347,37599:40372,37600:20141,37601:20302,37602:20572,37603:20597,37604:21059,37605:35998,37606:21576,37607:22564,37608:23450,37609:24093,37610:24213,37611:24237,37612:24311,37613:24351,37614:24716,37615:25269,37616:25402,37617:25552,37618:26799,37619:27712,37620:30855,37621:31118,37622:31243,37623:32224,37624:33351,37625:35330,37626:35558,37627:36420,37628:36883,37696:37048,37697:37165,37698:37336,37699:40718,37700:27877,37701:25688,37702:25826,37703:25973,37704:28404,37705:30340,37706:31515,37707:36969,37708:37841,37709:28346,37710:21746,37711:24505,37712:25764,37713:36685,37714:36845,37715:37444,37716:20856,37717:22635,37718:22825,37719:23637,37720:24215,37721:28155,37722:32399,37723:29980,37724:36028,37725:36578,37726:39003,37727:28857,37728:20253,37729:27583,37730:28593,37731:3e4,37732:38651,37733:20814,37734:21520,37735:22581,37736:22615,37737:22956,37738:23648,37739:24466,37740:26007,37741:26460,37742:28193,37743:30331,37744:33759,37745:36077,37746:36884,37747:37117,37748:37709,37749:30757,37750:30778,37751:21162,37752:24230,37753:22303,37754:22900,37755:24594,37756:20498,37757:20826,37758:20908,37760:20941,37761:20992,37762:21776,37763:22612,37764:22616,37765:22871,37766:23445,37767:23798,37768:23947,37769:24764,37770:25237,37771:25645,37772:26481,37773:26691,37774:26812,37775:26847,37776:30423,37777:28120,37778:28271,37779:28059,37780:28783,37781:29128,37782:24403,37783:30168,37784:31095,37785:31561,37786:31572,37787:31570,37788:31958,37789:32113,37790:21040,37791:33891,37792:34153,37793:34276,37794:35342,37795:35588,37796:35910,37797:36367,37798:36867,37799:36879,37800:37913,37801:38518,37802:38957,37803:39472,37804:38360,37805:20685,37806:21205,37807:21516,37808:22530,37809:23566,37810:24999,37811:25758,37812:27934,37813:30643,37814:31461,37815:33012,37816:33796,37817:36947,37818:37509,37819:23776,37820:40199,37821:21311,37822:24471,37823:24499,37824:28060,37825:29305,37826:30563,37827:31167,37828:31716,37829:27602,37830:29420,37831:35501,37832:26627,37833:27233,37834:20984,37835:31361,37836:26932,37837:23626,37838:40182,37839:33515,37840:23493,37841:37193,37842:28702,37843:22136,37844:23663,37845:24775,37846:25958,37847:27788,37848:35930,37849:36929,37850:38931,37851:21585,37852:26311,37853:37389,37854:22856,37855:37027,37856:20869,37857:20045,37858:20970,37859:34201,37860:35598,37861:28760,37862:25466,37863:37707,37864:26978,37865:39348,37866:32260,37867:30071,37868:21335,37869:26976,37870:36575,37871:38627,37872:27741,37873:20108,37874:23612,37875:24336,37876:36841,37877:21250,37878:36049,37879:32905,37880:34425,37881:24319,37882:26085,37883:20083,37884:20837,37952:22914,37953:23615,37954:38894,37955:20219,37956:22922,37957:24525,37958:35469,37959:28641,37960:31152,37961:31074,37962:23527,37963:33905,37964:29483,37965:29105,37966:24180,37967:24565,37968:25467,37969:25754,37970:29123,37971:31896,37972:20035,37973:24316,37974:20043,37975:22492,37976:22178,37977:24745,37978:28611,37979:32013,37980:33021,37981:33075,37982:33215,37983:36786,37984:35223,37985:34468,37986:24052,37987:25226,37988:25773,37989:35207,37990:26487,37991:27874,37992:27966,37993:29750,37994:30772,37995:23110,37996:32629,37997:33453,37998:39340,37999:20467,38e3:24259,38001:25309,38002:25490,38003:25943,38004:26479,38005:30403,38006:29260,38007:32972,38008:32954,38009:36649,38010:37197,38011:20493,38012:22521,38013:23186,38014:26757,38016:26995,38017:29028,38018:29437,38019:36023,38020:22770,38021:36064,38022:38506,38023:36889,38024:34687,38025:31204,38026:30695,38027:33833,38028:20271,38029:21093,38030:21338,38031:25293,38032:26575,38033:27850,38034:30333,38035:31636,38036:31893,38037:33334,38038:34180,38039:36843,38040:26333,38041:28448,38042:29190,38043:32283,38044:33707,38045:39361,38046:40614,38047:20989,38048:31665,38049:30834,38050:31672,38051:32903,38052:31560,38053:27368,38054:24161,38055:32908,38056:30033,38057:30048,38058:20843,38059:37474,38060:28300,38061:30330,38062:37271,38063:39658,38064:20240,38065:32624,38066:25244,38067:31567,38068:38309,38069:40169,38070:22138,38071:22617,38072:34532,38073:38588,38074:20276,38075:21028,38076:21322,38077:21453,38078:21467,38079:24070,38080:25644,38081:26001,38082:26495,38083:27710,38084:27726,38085:29256,38086:29359,38087:29677,38088:30036,38089:32321,38090:33324,38091:34281,38092:36009,38093:31684,38094:37318,38095:29033,38096:38930,38097:39151,38098:25405,38099:26217,38100:30058,38101:30436,38102:30928,38103:34115,38104:34542,38105:21290,38106:21329,38107:21542,38108:22915,38109:24199,38110:24444,38111:24754,38112:25161,38113:25209,38114:25259,38115:26e3,38116:27604,38117:27852,38118:30130,38119:30382,38120:30865,38121:31192,38122:32203,38123:32631,38124:32933,38125:34987,38126:35513,38127:36027,38128:36991,38129:38750,38130:39131,38131:27147,38132:31800,38133:20633,38134:23614,38135:24494,38136:26503,38137:27608,38138:29749,38139:30473,38140:32654,38208:40763,38209:26570,38210:31255,38211:21305,38212:30091,38213:39661,38214:24422,38215:33181,38216:33777,38217:32920,38218:24380,38219:24517,38220:30050,38221:31558,38222:36924,38223:26727,38224:23019,38225:23195,38226:32016,38227:30334,38228:35628,38229:20469,38230:24426,38231:27161,38232:27703,38233:28418,38234:29922,38235:31080,38236:34920,38237:35413,38238:35961,38239:24287,38240:25551,38241:30149,38242:31186,38243:33495,38244:37672,38245:37618,38246:33948,38247:34541,38248:39981,38249:21697,38250:24428,38251:25996,38252:27996,38253:28693,38254:36007,38255:36051,38256:38971,38257:25935,38258:29942,38259:19981,38260:20184,38261:22496,38262:22827,38263:23142,38264:23500,38265:20904,38266:24067,38267:24220,38268:24598,38269:25206,38270:25975,38272:26023,38273:26222,38274:28014,38275:29238,38276:31526,38277:33104,38278:33178,38279:33433,38280:35676,38281:36e3,38282:36070,38283:36212,38284:38428,38285:38468,38286:20398,38287:25771,38288:27494,38289:33310,38290:33889,38291:34154,38292:37096,38293:23553,38294:26963,38295:39080,38296:33914,38297:34135,38298:20239,38299:21103,38300:24489,38301:24133,38302:26381,38303:31119,38304:33145,38305:35079,38306:35206,38307:28149,38308:24343,38309:25173,38310:27832,38311:20175,38312:29289,38313:39826,38314:20998,38315:21563,38316:22132,38317:22707,38318:24996,38319:25198,38320:28954,38321:22894,38322:31881,38323:31966,38324:32027,38325:38640,38326:25991,38327:32862,38328:19993,38329:20341,38330:20853,38331:22592,38332:24163,38333:24179,38334:24330,38335:26564,38336:20006,38337:34109,38338:38281,38339:38491,38340:31859,38341:38913,38342:20731,38343:22721,38344:30294,38345:30887,38346:21029,38347:30629,38348:34065,38349:31622,38350:20559,38351:22793,38352:29255,38353:31687,38354:32232,38355:36794,38356:36820,38357:36941,38358:20415,38359:21193,38360:23081,38361:24321,38362:38829,38363:20445,38364:33303,38365:37610,38366:22275,38367:25429,38368:27497,38369:29995,38370:35036,38371:36628,38372:31298,38373:21215,38374:22675,38375:24917,38376:25098,38377:26286,38378:27597,38379:31807,38380:33769,38381:20515,38382:20472,38383:21253,38384:21574,38385:22577,38386:22857,38387:23453,38388:23792,38389:23791,38390:23849,38391:24214,38392:25265,38393:25447,38394:25918,38395:26041,38396:26379,38464:27861,38465:27873,38466:28921,38467:30770,38468:32299,38469:32990,38470:33459,38471:33804,38472:34028,38473:34562,38474:35090,38475:35370,38476:35914,38477:37030,38478:37586,38479:39165,38480:40179,38481:40300,38482:20047,38483:20129,38484:20621,38485:21078,38486:22346,38487:22952,38488:24125,38489:24536,38490:24537,38491:25151,38492:26292,38493:26395,38494:26576,38495:26834,38496:20882,38497:32033,38498:32938,38499:33192,38500:35584,38501:35980,38502:36031,38503:37502,38504:38450,38505:21536,38506:38956,38507:21271,38508:20693,38509:21340,38510:22696,38511:25778,38512:26420,38513:29287,38514:30566,38515:31302,38516:37350,38517:21187,38518:27809,38519:27526,38520:22528,38521:24140,38522:22868,38523:26412,38524:32763,38525:20961,38526:30406,38528:25705,38529:30952,38530:39764,38531:40635,38532:22475,38533:22969,38534:26151,38535:26522,38536:27598,38537:21737,38538:27097,38539:24149,38540:33180,38541:26517,38542:39850,38543:26622,38544:40018,38545:26717,38546:20134,38547:20451,38548:21448,38549:25273,38550:26411,38551:27819,38552:36804,38553:20397,38554:32365,38555:40639,38556:19975,38557:24930,38558:28288,38559:28459,38560:34067,38561:21619,38562:26410,38563:39749,38564:24051,38565:31637,38566:23724,38567:23494,38568:34588,38569:28234,38570:34001,38571:31252,38572:33032,38573:22937,38574:31885,38575:27665,38576:30496,38577:21209,38578:22818,38579:28961,38580:29279,38581:30683,38582:38695,38583:40289,38584:26891,38585:23167,38586:23064,38587:20901,38588:21517,38589:21629,38590:26126,38591:30431,38592:36855,38593:37528,38594:40180,38595:23018,38596:29277,38597:28357,38598:20813,38599:26825,38600:32191,38601:32236,38602:38754,38603:40634,38604:25720,38605:27169,38606:33538,38607:22916,38608:23391,38609:27611,38610:29467,38611:30450,38612:32178,38613:32791,38614:33945,38615:20786,38616:26408,38617:40665,38618:30446,38619:26466,38620:21247,38621:39173,38622:23588,38623:25147,38624:31870,38625:36016,38626:21839,38627:24758,38628:32011,38629:38272,38630:21249,38631:20063,38632:20918,38633:22812,38634:29242,38635:32822,38636:37326,38637:24357,38638:30690,38639:21380,38640:24441,38641:32004,38642:34220,38643:35379,38644:36493,38645:38742,38646:26611,38647:34222,38648:37971,38649:24841,38650:24840,38651:27833,38652:30290,38720:35565,38721:36664,38722:21807,38723:20305,38724:20778,38725:21191,38726:21451,38727:23461,38728:24189,38729:24736,38730:24962,38731:25558,38732:26377,38733:26586,38734:28263,38735:28044,38736:29494,38737:29495,38738:30001,38739:31056,38740:35029,38741:35480,38742:36938,38743:37009,38744:37109,38745:38596,38746:34701,38747:22805,38748:20104,38749:20313,38750:19982,38751:35465,38752:36671,38753:38928,38754:20653,38755:24188,38756:22934,38757:23481,38758:24248,38759:25562,38760:25594,38761:25793,38762:26332,38763:26954,38764:27096,38765:27915,38766:28342,38767:29076,38768:29992,38769:31407,38770:32650,38771:32768,38772:33865,38773:33993,38774:35201,38775:35617,38776:36362,38777:36965,38778:38525,38779:39178,38780:24958,38781:25233,38782:27442,38784:27779,38785:28020,38786:32716,38787:32764,38788:28096,38789:32645,38790:34746,38791:35064,38792:26469,38793:33713,38794:38972,38795:38647,38796:27931,38797:32097,38798:33853,38799:37226,38800:20081,38801:21365,38802:23888,38803:27396,38804:28651,38805:34253,38806:34349,38807:35239,38808:21033,38809:21519,38810:23653,38811:26446,38812:26792,38813:29702,38814:29827,38815:30178,38816:35023,38817:35041,38818:37324,38819:38626,38820:38520,38821:24459,38822:29575,38823:31435,38824:33870,38825:25504,38826:30053,38827:21129,38828:27969,38829:28316,38830:29705,38831:30041,38832:30827,38833:31890,38834:38534,38835:31452,38836:40845,38837:20406,38838:24942,38839:26053,38840:34396,38841:20102,38842:20142,38843:20698,38844:20001,38845:20940,38846:23534,38847:26009,38848:26753,38849:28092,38850:29471,38851:30274,38852:30637,38853:31260,38854:31975,38855:33391,38856:35538,38857:36988,38858:37327,38859:38517,38860:38936,38861:21147,38862:32209,38863:20523,38864:21400,38865:26519,38866:28107,38867:29136,38868:29747,38869:33256,38870:36650,38871:38563,38872:40023,38873:40607,38874:29792,38875:22593,38876:28057,38877:32047,38878:39006,38879:20196,38880:20278,38881:20363,38882:20919,38883:21169,38884:23994,38885:24604,38886:29618,38887:31036,38888:33491,38889:37428,38890:38583,38891:38646,38892:38666,38893:40599,38894:40802,38895:26278,38896:27508,38897:21015,38898:21155,38899:28872,38900:35010,38901:24265,38902:24651,38903:24976,38904:28451,38905:29001,38906:31806,38907:32244,38908:32879,38976:34030,38977:36899,38978:37676,38979:21570,38980:39791,38981:27347,38982:28809,38983:36034,38984:36335,38985:38706,38986:21172,38987:23105,38988:24266,38989:24324,38990:26391,38991:27004,38992:27028,38993:28010,38994:28431,38995:29282,38996:29436,38997:31725,38998:32769,38999:32894,39e3:34635,39001:37070,39002:20845,39003:40595,39004:31108,39005:32907,39006:37682,39007:35542,39008:20525,39009:21644,39010:35441,39011:27498,39012:36036,39013:33031,39014:24785,39015:26528,39016:40434,39017:20121,39018:20120,39019:39952,39020:35435,39021:34241,39022:34152,39023:26880,39024:28286,39025:30871,39026:33109,39071:24332,39072:19984,39073:19989,39074:20010,39075:20017,39076:20022,39077:20028,39078:20031,39079:20034,39080:20054,39081:20056,39082:20098,39083:20101,39084:35947,39085:20106,39086:33298,39087:24333,39088:20110,39089:20126,39090:20127,39091:20128,39092:20130,39093:20144,39094:20147,39095:20150,39096:20174,39097:20173,39098:20164,39099:20166,39100:20162,39101:20183,39102:20190,39103:20205,39104:20191,39105:20215,39106:20233,39107:20314,39108:20272,39109:20315,39110:20317,39111:20311,39112:20295,39113:20342,39114:20360,39115:20367,39116:20376,39117:20347,39118:20329,39119:20336,39120:20369,39121:20335,39122:20358,39123:20374,39124:20760,39125:20436,39126:20447,39127:20430,39128:20440,39129:20443,39130:20433,39131:20442,39132:20432,39133:20452,39134:20453,39135:20506,39136:20520,39137:20500,39138:20522,39139:20517,39140:20485,39141:20252,39142:20470,39143:20513,39144:20521,39145:20524,39146:20478,39147:20463,39148:20497,39149:20486,39150:20547,39151:20551,39152:26371,39153:20565,39154:20560,39155:20552,39156:20570,39157:20566,39158:20588,39159:20600,39160:20608,39161:20634,39162:20613,39163:20660,39164:20658,39232:20681,39233:20682,39234:20659,39235:20674,39236:20694,39237:20702,39238:20709,39239:20717,39240:20707,39241:20718,39242:20729,39243:20725,39244:20745,39245:20737,39246:20738,39247:20758,39248:20757,39249:20756,39250:20762,39251:20769,39252:20794,39253:20791,39254:20796,39255:20795,39256:20799,39257:20800,39258:20818,39259:20812,39260:20820,39261:20834,39262:31480,39263:20841,39264:20842,39265:20846,39266:20864,39267:20866,39268:22232,39269:20876,39270:20873,39271:20879,39272:20881,39273:20883,39274:20885,39275:20886,39276:20900,39277:20902,39278:20898,39279:20905,39280:20906,39281:20907,39282:20915,39283:20913,39284:20914,39285:20912,39286:20917,39287:20925,39288:20933,39289:20937,39290:20955,39291:20960,39292:34389,39293:20969,39294:20973,39296:20976,39297:20981,39298:20990,39299:20996,39300:21003,39301:21012,39302:21006,39303:21031,39304:21034,39305:21038,39306:21043,39307:21049,39308:21071,39309:21060,39310:21067,39311:21068,39312:21086,39313:21076,39314:21098,39315:21108,39316:21097,39317:21107,39318:21119,39319:21117,39320:21133,39321:21140,39322:21138,39323:21105,39324:21128,39325:21137,39326:36776,39327:36775,39328:21164,39329:21165,39330:21180,39331:21173,39332:21185,39333:21197,39334:21207,39335:21214,39336:21219,39337:21222,39338:39149,39339:21216,39340:21235,39341:21237,39342:21240,39343:21241,39344:21254,39345:21256,39346:30008,39347:21261,39348:21264,39349:21263,39350:21269,39351:21274,39352:21283,39353:21295,39354:21297,39355:21299,39356:21304,39357:21312,39358:21318,39359:21317,39360:19991,39361:21321,39362:21325,39363:20950,39364:21342,39365:21353,39366:21358,39367:22808,39368:21371,39369:21367,39370:21378,39371:21398,39372:21408,39373:21414,39374:21413,39375:21422,39376:21424,39377:21430,39378:21443,39379:31762,39380:38617,39381:21471,39382:26364,39383:29166,39384:21486,39385:21480,39386:21485,39387:21498,39388:21505,39389:21565,39390:21568,39391:21548,39392:21549,39393:21564,39394:21550,39395:21558,39396:21545,39397:21533,39398:21582,39399:21647,39400:21621,39401:21646,39402:21599,39403:21617,39404:21623,39405:21616,39406:21650,39407:21627,39408:21632,39409:21622,39410:21636,39411:21648,39412:21638,39413:21703,39414:21666,39415:21688,39416:21669,39417:21676,39418:21700,39419:21704,39420:21672,39488:21675,39489:21698,39490:21668,39491:21694,39492:21692,39493:21720,39494:21733,39495:21734,39496:21775,39497:21780,39498:21757,39499:21742,39500:21741,39501:21754,39502:21730,39503:21817,39504:21824,39505:21859,39506:21836,39507:21806,39508:21852,39509:21829,39510:21846,39511:21847,39512:21816,39513:21811,39514:21853,39515:21913,39516:21888,39517:21679,39518:21898,39519:21919,39520:21883,39521:21886,39522:21912,39523:21918,39524:21934,39525:21884,39526:21891,39527:21929,39528:21895,39529:21928,39530:21978,39531:21957,39532:21983,39533:21956,39534:21980,39535:21988,39536:21972,39537:22036,39538:22007,39539:22038,39540:22014,39541:22013,39542:22043,39543:22009,39544:22094,39545:22096,39546:29151,39547:22068,39548:22070,39549:22066,39550:22072,39552:22123,39553:22116,39554:22063,39555:22124,39556:22122,39557:22150,39558:22144,39559:22154,39560:22176,39561:22164,39562:22159,39563:22181,39564:22190,39565:22198,39566:22196,39567:22210,39568:22204,39569:22209,39570:22211,39571:22208,39572:22216,39573:22222,39574:22225,39575:22227,39576:22231,39577:22254,39578:22265,39579:22272,39580:22271,39581:22276,39582:22281,39583:22280,39584:22283,39585:22285,39586:22291,39587:22296,39588:22294,39589:21959,39590:22300,39591:22310,39592:22327,39593:22328,39594:22350,39595:22331,39596:22336,39597:22351,39598:22377,39599:22464,39600:22408,39601:22369,39602:22399,39603:22409,39604:22419,39605:22432,39606:22451,39607:22436,39608:22442,39609:22448,39610:22467,39611:22470,39612:22484,39613:22482,39614:22483,39615:22538,39616:22486,39617:22499,39618:22539,39619:22553,39620:22557,39621:22642,39622:22561,39623:22626,39624:22603,39625:22640,39626:27584,39627:22610,39628:22589,39629:22649,39630:22661,39631:22713,39632:22687,39633:22699,39634:22714,39635:22750,39636:22715,39637:22712,39638:22702,39639:22725,39640:22739,39641:22737,39642:22743,39643:22745,39644:22744,39645:22757,39646:22748,39647:22756,39648:22751,39649:22767,39650:22778,39651:22777,39652:22779,39653:22780,39654:22781,39655:22786,39656:22794,39657:22800,39658:22811,39659:26790,39660:22821,39661:22828,39662:22829,39663:22834,39664:22840,39665:22846,39666:31442,39667:22869,39668:22864,39669:22862,39670:22874,39671:22872,39672:22882,39673:22880,39674:22887,39675:22892,39676:22889,39744:22904,39745:22913,39746:22941,39747:20318,39748:20395,39749:22947,39750:22962,39751:22982,39752:23016,39753:23004,39754:22925,39755:23001,39756:23002,39757:23077,39758:23071,39759:23057,39760:23068,39761:23049,39762:23066,39763:23104,39764:23148,39765:23113,39766:23093,39767:23094,39768:23138,39769:23146,39770:23194,39771:23228,39772:23230,39773:23243,39774:23234,39775:23229,39776:23267,39777:23255,39778:23270,39779:23273,39780:23254,39781:23290,39782:23291,39783:23308,39784:23307,39785:23318,39786:23346,39787:23248,39788:23338,39789:23350,39790:23358,39791:23363,39792:23365,39793:23360,39794:23377,39795:23381,39796:23386,39797:23387,39798:23397,39799:23401,39800:23408,39801:23411,39802:23413,39803:23416,39804:25992,39805:23418,39806:23424,39808:23427,39809:23462,39810:23480,39811:23491,39812:23495,39813:23497,39814:23508,39815:23504,39816:23524,39817:23526,39818:23522,39819:23518,39820:23525,39821:23531,39822:23536,39823:23542,39824:23539,39825:23557,39826:23559,39827:23560,39828:23565,39829:23571,39830:23584,39831:23586,39832:23592,39833:23608,39834:23609,39835:23617,39836:23622,39837:23630,39838:23635,39839:23632,39840:23631,39841:23409,39842:23660,39843:23662,39844:20066,39845:23670,39846:23673,39847:23692,39848:23697,39849:23700,39850:22939,39851:23723,39852:23739,39853:23734,39854:23740,39855:23735,39856:23749,39857:23742,39858:23751,39859:23769,39860:23785,39861:23805,39862:23802,39863:23789,39864:23948,39865:23786,39866:23819,39867:23829,39868:23831,39869:23900,39870:23839,39871:23835,39872:23825,39873:23828,39874:23842,39875:23834,39876:23833,39877:23832,39878:23884,39879:23890,39880:23886,39881:23883,39882:23916,39883:23923,39884:23926,39885:23943,39886:23940,39887:23938,39888:23970,39889:23965,39890:23980,39891:23982,39892:23997,39893:23952,39894:23991,39895:23996,39896:24009,39897:24013,39898:24019,39899:24018,39900:24022,39901:24027,39902:24043,39903:24050,39904:24053,39905:24075,39906:24090,39907:24089,39908:24081,39909:24091,39910:24118,39911:24119,39912:24132,39913:24131,39914:24128,39915:24142,39916:24151,39917:24148,39918:24159,39919:24162,39920:24164,39921:24135,39922:24181,39923:24182,39924:24186,39925:40636,39926:24191,39927:24224,39928:24257,39929:24258,39930:24264,39931:24272,39932:24271,4e4:24278,40001:24291,40002:24285,40003:24282,40004:24283,40005:24290,40006:24289,40007:24296,40008:24297,40009:24300,40010:24305,40011:24307,40012:24304,40013:24308,40014:24312,40015:24318,40016:24323,40017:24329,40018:24413,40019:24412,40020:24331,40021:24337,40022:24342,40023:24361,40024:24365,40025:24376,40026:24385,40027:24392,40028:24396,40029:24398,40030:24367,40031:24401,40032:24406,40033:24407,40034:24409,40035:24417,40036:24429,40037:24435,40038:24439,40039:24451,40040:24450,40041:24447,40042:24458,40043:24456,40044:24465,40045:24455,40046:24478,40047:24473,40048:24472,40049:24480,40050:24488,40051:24493,40052:24508,40053:24534,40054:24571,40055:24548,40056:24568,40057:24561,40058:24541,40059:24755,40060:24575,40061:24609,40062:24672,40064:24601,40065:24592,40066:24617,40067:24590,40068:24625,40069:24603,40070:24597,40071:24619,40072:24614,40073:24591,40074:24634,40075:24666,40076:24641,40077:24682,40078:24695,40079:24671,40080:24650,40081:24646,40082:24653,40083:24675,40084:24643,40085:24676,40086:24642,40087:24684,40088:24683,40089:24665,40090:24705,40091:24717,40092:24807,40093:24707,40094:24730,40095:24708,40096:24731,40097:24726,40098:24727,40099:24722,40100:24743,40101:24715,40102:24801,40103:24760,40104:24800,40105:24787,40106:24756,40107:24560,40108:24765,40109:24774,40110:24757,40111:24792,40112:24909,40113:24853,40114:24838,40115:24822,40116:24823,40117:24832,40118:24820,40119:24826,40120:24835,40121:24865,40122:24827,40123:24817,40124:24845,40125:24846,40126:24903,40127:24894,40128:24872,40129:24871,40130:24906,40131:24895,40132:24892,40133:24876,40134:24884,40135:24893,40136:24898,40137:24900,40138:24947,40139:24951,40140:24920,40141:24921,40142:24922,40143:24939,40144:24948,40145:24943,40146:24933,40147:24945,40148:24927,40149:24925,40150:24915,40151:24949,40152:24985,40153:24982,40154:24967,40155:25004,40156:24980,40157:24986,40158:24970,40159:24977,40160:25003,40161:25006,40162:25036,40163:25034,40164:25033,40165:25079,40166:25032,40167:25027,40168:25030,40169:25018,40170:25035,40171:32633,40172:25037,40173:25062,40174:25059,40175:25078,40176:25082,40177:25076,40178:25087,40179:25085,40180:25084,40181:25086,40182:25088,40183:25096,40184:25097,40185:25101,40186:25100,40187:25108,40188:25115,40256:25118,40257:25121,40258:25130,40259:25134,40260:25136,40261:25138,40262:25139,40263:25153,40264:25166,40265:25182,40266:25187,40267:25179,40268:25184,40269:25192,40270:25212,40271:25218,40272:25225,40273:25214,40274:25234,40275:25235,40276:25238,40277:25300,40278:25219,40279:25236,40280:25303,40281:25297,40282:25275,40283:25295,40284:25343,40285:25286,40286:25812,40287:25288,40288:25308,40289:25292,40290:25290,40291:25282,40292:25287,40293:25243,40294:25289,40295:25356,40296:25326,40297:25329,40298:25383,40299:25346,40300:25352,40301:25327,40302:25333,40303:25424,40304:25406,40305:25421,40306:25628,40307:25423,40308:25494,40309:25486,40310:25472,40311:25515,40312:25462,40313:25507,40314:25487,40315:25481,40316:25503,40317:25525,40318:25451,40320:25449,40321:25534,40322:25577,40323:25536,40324:25542,40325:25571,40326:25545,40327:25554,40328:25590,40329:25540,40330:25622,40331:25652,40332:25606,40333:25619,40334:25638,40335:25654,40336:25885,40337:25623,40338:25640,40339:25615,40340:25703,40341:25711,40342:25718,40343:25678,40344:25898,40345:25749,40346:25747,40347:25765,40348:25769,40349:25736,40350:25788,40351:25818,40352:25810,40353:25797,40354:25799,40355:25787,40356:25816,40357:25794,40358:25841,40359:25831,40360:33289,40361:25824,40362:25825,40363:25260,40364:25827,40365:25839,40366:25900,40367:25846,40368:25844,40369:25842,40370:25850,40371:25856,40372:25853,40373:25880,40374:25884,40375:25861,40376:25892,40377:25891,40378:25899,40379:25908,40380:25909,40381:25911,40382:25910,40383:25912,40384:30027,40385:25928,40386:25942,40387:25941,40388:25933,40389:25944,40390:25950,40391:25949,40392:25970,40393:25976,40394:25986,40395:25987,40396:35722,40397:26011,40398:26015,40399:26027,40400:26039,40401:26051,40402:26054,40403:26049,40404:26052,40405:26060,40406:26066,40407:26075,40408:26073,40409:26080,40410:26081,40411:26097,40412:26482,40413:26122,40414:26115,40415:26107,40416:26483,40417:26165,40418:26166,40419:26164,40420:26140,40421:26191,40422:26180,40423:26185,40424:26177,40425:26206,40426:26205,40427:26212,40428:26215,40429:26216,40430:26207,40431:26210,40432:26224,40433:26243,40434:26248,40435:26254,40436:26249,40437:26244,40438:26264,40439:26269,40440:26305,40441:26297,40442:26313,40443:26302,40444:26300,40512:26308,40513:26296,40514:26326,40515:26330,40516:26336,40517:26175,40518:26342,40519:26345,40520:26352,40521:26357,40522:26359,40523:26383,40524:26390,40525:26398,40526:26406,40527:26407,40528:38712,40529:26414,40530:26431,40531:26422,40532:26433,40533:26424,40534:26423,40535:26438,40536:26462,40537:26464,40538:26457,40539:26467,40540:26468,40541:26505,40542:26480,40543:26537,40544:26492,40545:26474,40546:26508,40547:26507,40548:26534,40549:26529,40550:26501,40551:26551,40552:26607,40553:26548,40554:26604,40555:26547,40556:26601,40557:26552,40558:26596,40559:26590,40560:26589,40561:26594,40562:26606,40563:26553,40564:26574,40565:26566,40566:26599,40567:27292,40568:26654,40569:26694,40570:26665,40571:26688,40572:26701,40573:26674,40574:26702,40576:26803,40577:26667,40578:26713,40579:26723,40580:26743,40581:26751,40582:26783,40583:26767,40584:26797,40585:26772,40586:26781,40587:26779,40588:26755,40589:27310,40590:26809,40591:26740,40592:26805,40593:26784,40594:26810,40595:26895,40596:26765,40597:26750,40598:26881,40599:26826,40600:26888,40601:26840,40602:26914,40603:26918,40604:26849,40605:26892,40606:26829,40607:26836,40608:26855,40609:26837,40610:26934,40611:26898,40612:26884,40613:26839,40614:26851,40615:26917,40616:26873,40617:26848,40618:26863,40619:26920,40620:26922,40621:26906,40622:26915,40623:26913,40624:26822,40625:27001,40626:26999,40627:26972,40628:27e3,40629:26987,40630:26964,40631:27006,40632:26990,40633:26937,40634:26996,40635:26941,40636:26969,40637:26928,40638:26977,40639:26974,40640:26973,40641:27009,40642:26986,40643:27058,40644:27054,40645:27088,40646:27071,40647:27073,40648:27091,40649:27070,40650:27086,40651:23528,40652:27082,40653:27101,40654:27067,40655:27075,40656:27047,40657:27182,40658:27025,40659:27040,40660:27036,40661:27029,40662:27060,40663:27102,40664:27112,40665:27138,40666:27163,40667:27135,40668:27402,40669:27129,40670:27122,40671:27111,40672:27141,40673:27057,40674:27166,40675:27117,40676:27156,40677:27115,40678:27146,40679:27154,40680:27329,40681:27171,40682:27155,40683:27204,40684:27148,40685:27250,40686:27190,40687:27256,40688:27207,40689:27234,40690:27225,40691:27238,40692:27208,40693:27192,40694:27170,40695:27280,40696:27277,40697:27296,40698:27268,40699:27298,40700:27299,40768:27287,40769:34327,40770:27323,40771:27331,40772:27330,40773:27320,40774:27315,40775:27308,40776:27358,40777:27345,40778:27359,40779:27306,40780:27354,40781:27370,40782:27387,40783:27397,40784:34326,40785:27386,40786:27410,40787:27414,40788:39729,40789:27423,40790:27448,40791:27447,40792:30428,40793:27449,40794:39150,40795:27463,40796:27459,40797:27465,40798:27472,40799:27481,40800:27476,40801:27483,40802:27487,40803:27489,40804:27512,40805:27513,40806:27519,40807:27520,40808:27524,40809:27523,40810:27533,40811:27544,40812:27541,40813:27550,40814:27556,40815:27562,40816:27563,40817:27567,40818:27570,40819:27569,40820:27571,40821:27575,40822:27580,40823:27590,40824:27595,40825:27603,40826:27615,40827:27628,40828:27627,40829:27635,40830:27631,40832:40638,40833:27656,40834:27667,40835:27668,40836:27675,40837:27684,40838:27683,40839:27742,40840:27733,40841:27746,40842:27754,40843:27778,40844:27789,40845:27802,40846:27777,40847:27803,40848:27774,40849:27752,40850:27763,40851:27794,40852:27792,40853:27844,40854:27889,40855:27859,40856:27837,40857:27863,40858:27845,40859:27869,40860:27822,40861:27825,40862:27838,40863:27834,40864:27867,40865:27887,40866:27865,40867:27882,40868:27935,40869:34893,40870:27958,40871:27947,40872:27965,40873:27960,40874:27929,40875:27957,40876:27955,40877:27922,40878:27916,40879:28003,40880:28051,40881:28004,40882:27994,40883:28025,40884:27993,40885:28046,40886:28053,40887:28644,40888:28037,40889:28153,40890:28181,40891:28170,40892:28085,40893:28103,40894:28134,40895:28088,40896:28102,40897:28140,40898:28126,40899:28108,40900:28136,40901:28114,40902:28101,40903:28154,40904:28121,40905:28132,40906:28117,40907:28138,40908:28142,40909:28205,40910:28270,40911:28206,40912:28185,40913:28274,40914:28255,40915:28222,40916:28195,40917:28267,40918:28203,40919:28278,40920:28237,40921:28191,40922:28227,40923:28218,40924:28238,40925:28196,40926:28415,40927:28189,40928:28216,40929:28290,40930:28330,40931:28312,40932:28361,40933:28343,40934:28371,40935:28349,40936:28335,40937:28356,40938:28338,40939:28372,40940:28373,40941:28303,40942:28325,40943:28354,40944:28319,40945:28481,40946:28433,40947:28748,40948:28396,40949:28408,40950:28414,40951:28479,40952:28402,40953:28465,40954:28399,40955:28466,40956:28364,161:65377,162:65378,163:65379,164:65380,165:65381,166:65382,167:65383,168:65384,169:65385,170:65386,171:65387,172:65388,173:65389,174:65390,175:65391,176:65392,177:65393,178:65394,179:65395,180:65396,181:65397,182:65398,183:65399,184:65400,185:65401,186:65402,187:65403,188:65404,189:65405,190:65406,191:65407,192:65408,193:65409,194:65410,195:65411,196:65412,197:65413,198:65414,199:65415,200:65416,201:65417,202:65418,203:65419,204:65420,205:65421,206:65422,207:65423,208:65424,209:65425,210:65426,211:65427,212:65428,213:65429,214:65430,215:65431,216:65432,217:65433,218:65434,219:65435,220:65436,221:65437,222:65438,223:65439,57408:28478,57409:28435,57410:28407,57411:28550,57412:28538,57413:28536,57414:28545,57415:28544,57416:28527,57417:28507,57418:28659,57419:28525,57420:28546,57421:28540,57422:28504,57423:28558,57424:28561,57425:28610,57426:28518,57427:28595,57428:28579,57429:28577,57430:28580,57431:28601,57432:28614,57433:28586,57434:28639,57435:28629,57436:28652,57437:28628,57438:28632,57439:28657,57440:28654,57441:28635,57442:28681,57443:28683,57444:28666,57445:28689,57446:28673,57447:28687,57448:28670,57449:28699,57450:28698,57451:28532,57452:28701,57453:28696,57454:28703,57455:28720,57456:28734,57457:28722,57458:28753,57459:28771,57460:28825,57461:28818,57462:28847,57463:28913,57464:28844,57465:28856,57466:28851,57467:28846,57468:28895,57469:28875,57470:28893,57472:28889,57473:28937,57474:28925,57475:28956,57476:28953,57477:29029,57478:29013,57479:29064,57480:29030,57481:29026,57482:29004,57483:29014,57484:29036,57485:29071,57486:29179,57487:29060,57488:29077,57489:29096,57490:29100,57491:29143,57492:29113,57493:29118,57494:29138,57495:29129,57496:29140,57497:29134,57498:29152,57499:29164,57500:29159,57501:29173,57502:29180,57503:29177,57504:29183,57505:29197,57506:29200,57507:29211,57508:29224,57509:29229,57510:29228,57511:29232,57512:29234,57513:29243,57514:29244,57515:29247,57516:29248,57517:29254,57518:29259,57519:29272,57520:29300,57521:29310,57522:29314,57523:29313,57524:29319,57525:29330,57526:29334,57527:29346,57528:29351,57529:29369,57530:29362,57531:29379,57532:29382,57533:29380,57534:29390,57535:29394,57536:29410,57537:29408,57538:29409,57539:29433,57540:29431,57541:20495,57542:29463,57543:29450,57544:29468,57545:29462,57546:29469,57547:29492,57548:29487,57549:29481,57550:29477,57551:29502,57552:29518,57553:29519,57554:40664,57555:29527,57556:29546,57557:29544,57558:29552,57559:29560,57560:29557,57561:29563,57562:29562,57563:29640,57564:29619,57565:29646,57566:29627,57567:29632,57568:29669,57569:29678,57570:29662,57571:29858,57572:29701,57573:29807,57574:29733,57575:29688,57576:29746,57577:29754,57578:29781,57579:29759,57580:29791,57581:29785,57582:29761,57583:29788,57584:29801,57585:29808,57586:29795,57587:29802,57588:29814,57589:29822,57590:29835,57591:29854,57592:29863,57593:29898,57594:29903,57595:29908,57596:29681,57664:29920,57665:29923,57666:29927,57667:29929,57668:29934,57669:29938,57670:29936,57671:29937,57672:29944,57673:29943,57674:29956,57675:29955,57676:29957,57677:29964,57678:29966,57679:29965,57680:29973,57681:29971,57682:29982,57683:29990,57684:29996,57685:30012,57686:30020,57687:30029,57688:30026,57689:30025,57690:30043,57691:30022,57692:30042,57693:30057,57694:30052,57695:30055,57696:30059,57697:30061,57698:30072,57699:30070,57700:30086,57701:30087,57702:30068,57703:30090,57704:30089,57705:30082,57706:30100,57707:30106,57708:30109,57709:30117,57710:30115,57711:30146,57712:30131,57713:30147,57714:30133,57715:30141,57716:30136,57717:30140,57718:30129,57719:30157,57720:30154,57721:30162,57722:30169,57723:30179,57724:30174,57725:30206,57726:30207,57728:30204,57729:30209,57730:30192,57731:30202,57732:30194,57733:30195,57734:30219,57735:30221,57736:30217,57737:30239,57738:30247,57739:30240,57740:30241,57741:30242,57742:30244,57743:30260,57744:30256,57745:30267,57746:30279,57747:30280,57748:30278,57749:30300,57750:30296,57751:30305,57752:30306,57753:30312,57754:30313,57755:30314,57756:30311,57757:30316,57758:30320,57759:30322,57760:30326,57761:30328,57762:30332,57763:30336,57764:30339,57765:30344,57766:30347,57767:30350,57768:30358,57769:30355,57770:30361,57771:30362,57772:30384,57773:30388,57774:30392,57775:30393,57776:30394,57777:30402,57778:30413,57779:30422,57780:30418,57781:30430,57782:30433,57783:30437,57784:30439,57785:30442,57786:34351,57787:30459,57788:30472,57789:30471,57790:30468,57791:30505,57792:30500,57793:30494,57794:30501,57795:30502,57796:30491,57797:30519,57798:30520,57799:30535,57800:30554,57801:30568,57802:30571,57803:30555,57804:30565,57805:30591,57806:30590,57807:30585,57808:30606,57809:30603,57810:30609,57811:30624,57812:30622,57813:30640,57814:30646,57815:30649,57816:30655,57817:30652,57818:30653,57819:30651,57820:30663,57821:30669,57822:30679,57823:30682,57824:30684,57825:30691,57826:30702,57827:30716,57828:30732,57829:30738,57830:31014,57831:30752,57832:31018,57833:30789,57834:30862,57835:30836,57836:30854,57837:30844,57838:30874,57839:30860,57840:30883,57841:30901,57842:30890,57843:30895,57844:30929,57845:30918,57846:30923,57847:30932,57848:30910,57849:30908,57850:30917,57851:30922,57852:30956,57920:30951,57921:30938,57922:30973,57923:30964,57924:30983,57925:30994,57926:30993,57927:31001,57928:31020,57929:31019,57930:31040,57931:31072,57932:31063,57933:31071,57934:31066,57935:31061,57936:31059,57937:31098,57938:31103,57939:31114,57940:31133,57941:31143,57942:40779,57943:31146,57944:31150,57945:31155,57946:31161,57947:31162,57948:31177,57949:31189,57950:31207,57951:31212,57952:31201,57953:31203,57954:31240,57955:31245,57956:31256,57957:31257,57958:31264,57959:31263,57960:31104,57961:31281,57962:31291,57963:31294,57964:31287,57965:31299,57966:31319,57967:31305,57968:31329,57969:31330,57970:31337,57971:40861,57972:31344,57973:31353,57974:31357,57975:31368,57976:31383,57977:31381,57978:31384,57979:31382,57980:31401,57981:31432,57982:31408,57984:31414,57985:31429,57986:31428,57987:31423,57988:36995,57989:31431,57990:31434,57991:31437,57992:31439,57993:31445,57994:31443,57995:31449,57996:31450,57997:31453,57998:31457,57999:31458,58e3:31462,58001:31469,58002:31472,58003:31490,58004:31503,58005:31498,58006:31494,58007:31539,58008:31512,58009:31513,58010:31518,58011:31541,58012:31528,58013:31542,58014:31568,58015:31610,58016:31492,58017:31565,58018:31499,58019:31564,58020:31557,58021:31605,58022:31589,58023:31604,58024:31591,58025:31600,58026:31601,58027:31596,58028:31598,58029:31645,58030:31640,58031:31647,58032:31629,58033:31644,58034:31642,58035:31627,58036:31634,58037:31631,58038:31581,58039:31641,58040:31691,58041:31681,58042:31692,58043:31695,58044:31668,58045:31686,58046:31709,58047:31721,58048:31761,58049:31764,58050:31718,58051:31717,58052:31840,58053:31744,58054:31751,58055:31763,58056:31731,58057:31735,58058:31767,58059:31757,58060:31734,58061:31779,58062:31783,58063:31786,58064:31775,58065:31799,58066:31787,58067:31805,58068:31820,58069:31811,58070:31828,58071:31823,58072:31808,58073:31824,58074:31832,58075:31839,58076:31844,58077:31830,58078:31845,58079:31852,58080:31861,58081:31875,58082:31888,58083:31908,58084:31917,58085:31906,58086:31915,58087:31905,58088:31912,58089:31923,58090:31922,58091:31921,58092:31918,58093:31929,58094:31933,58095:31936,58096:31941,58097:31938,58098:31960,58099:31954,58100:31964,58101:31970,58102:39739,58103:31983,58104:31986,58105:31988,58106:31990,58107:31994,58108:32006,58176:32002,58177:32028,58178:32021,58179:32010,58180:32069,58181:32075,58182:32046,58183:32050,58184:32063,58185:32053,58186:32070,58187:32115,58188:32086,58189:32078,58190:32114,58191:32104,58192:32110,58193:32079,58194:32099,58195:32147,58196:32137,58197:32091,58198:32143,58199:32125,58200:32155,58201:32186,58202:32174,58203:32163,58204:32181,58205:32199,58206:32189,58207:32171,58208:32317,58209:32162,58210:32175,58211:32220,58212:32184,58213:32159,58214:32176,58215:32216,58216:32221,58217:32228,58218:32222,58219:32251,58220:32242,58221:32225,58222:32261,58223:32266,58224:32291,58225:32289,58226:32274,58227:32305,58228:32287,58229:32265,58230:32267,58231:32290,58232:32326,58233:32358,58234:32315,58235:32309,58236:32313,58237:32323,58238:32311,58240:32306,58241:32314,58242:32359,58243:32349,58244:32342,58245:32350,58246:32345,58247:32346,58248:32377,58249:32362,58250:32361,58251:32380,58252:32379,58253:32387,58254:32213,58255:32381,58256:36782,58257:32383,58258:32392,58259:32393,58260:32396,58261:32402,58262:32400,58263:32403,58264:32404,58265:32406,58266:32398,58267:32411,58268:32412,58269:32568,58270:32570,58271:32581,58272:32588,58273:32589,58274:32590,58275:32592,58276:32593,58277:32597,58278:32596,58279:32600,58280:32607,58281:32608,58282:32616,58283:32617,58284:32615,58285:32632,58286:32642,58287:32646,58288:32643,58289:32648,58290:32647,58291:32652,58292:32660,58293:32670,58294:32669,58295:32666,58296:32675,58297:32687,58298:32690,58299:32697,58300:32686,58301:32694,58302:32696,58303:35697,58304:32709,58305:32710,58306:32714,58307:32725,58308:32724,58309:32737,58310:32742,58311:32745,58312:32755,58313:32761,58314:39132,58315:32774,58316:32772,58317:32779,58318:32786,58319:32792,58320:32793,58321:32796,58322:32801,58323:32808,58324:32831,58325:32827,58326:32842,58327:32838,58328:32850,58329:32856,58330:32858,58331:32863,58332:32866,58333:32872,58334:32883,58335:32882,58336:32880,58337:32886,58338:32889,58339:32893,58340:32895,58341:32900,58342:32902,58343:32901,58344:32923,58345:32915,58346:32922,58347:32941,58348:20880,58349:32940,58350:32987,58351:32997,58352:32985,58353:32989,58354:32964,58355:32986,58356:32982,58357:33033,58358:33007,58359:33009,58360:33051,58361:33065,58362:33059,58363:33071,58364:33099,58432:38539,58433:33094,58434:33086,58435:33107,58436:33105,58437:33020,58438:33137,58439:33134,58440:33125,58441:33126,58442:33140,58443:33155,58444:33160,58445:33162,58446:33152,58447:33154,58448:33184,58449:33173,58450:33188,58451:33187,58452:33119,58453:33171,58454:33193,58455:33200,58456:33205,58457:33214,58458:33208,58459:33213,58460:33216,58461:33218,58462:33210,58463:33225,58464:33229,58465:33233,58466:33241,58467:33240,58468:33224,58469:33242,58470:33247,58471:33248,58472:33255,58473:33274,58474:33275,58475:33278,58476:33281,58477:33282,58478:33285,58479:33287,58480:33290,58481:33293,58482:33296,58483:33302,58484:33321,58485:33323,58486:33336,58487:33331,58488:33344,58489:33369,58490:33368,58491:33373,58492:33370,58493:33375,58494:33380,58496:33378,58497:33384,58498:33386,58499:33387,58500:33326,58501:33393,58502:33399,58503:33400,58504:33406,58505:33421,58506:33426,58507:33451,58508:33439,58509:33467,58510:33452,58511:33505,58512:33507,58513:33503,58514:33490,58515:33524,58516:33523,58517:33530,58518:33683,58519:33539,58520:33531,58521:33529,58522:33502,58523:33542,58524:33500,58525:33545,58526:33497,58527:33589,58528:33588,58529:33558,58530:33586,58531:33585,58532:33600,58533:33593,58534:33616,58535:33605,58536:33583,58537:33579,58538:33559,58539:33560,58540:33669,58541:33690,58542:33706,58543:33695,58544:33698,58545:33686,58546:33571,58547:33678,58548:33671,58549:33674,58550:33660,58551:33717,58552:33651,58553:33653,58554:33696,58555:33673,58556:33704,58557:33780,58558:33811,58559:33771,58560:33742,58561:33789,58562:33795,58563:33752,58564:33803,58565:33729,58566:33783,58567:33799,58568:33760,58569:33778,58570:33805,58571:33826,58572:33824,58573:33725,58574:33848,58575:34054,58576:33787,58577:33901,58578:33834,58579:33852,58580:34138,58581:33924,58582:33911,58583:33899,58584:33965,58585:33902,58586:33922,58587:33897,58588:33862,58589:33836,58590:33903,58591:33913,58592:33845,58593:33994,58594:33890,58595:33977,58596:33983,58597:33951,58598:34009,58599:33997,58600:33979,58601:34010,58602:34e3,58603:33985,58604:33990,58605:34006,58606:33953,58607:34081,58608:34047,58609:34036,58610:34071,58611:34072,58612:34092,58613:34079,58614:34069,58615:34068,58616:34044,58617:34112,58618:34147,58619:34136,58620:34120,58688:34113,58689:34306,58690:34123,58691:34133,58692:34176,58693:34212,58694:34184,58695:34193,58696:34186,58697:34216,58698:34157,58699:34196,58700:34203,58701:34282,58702:34183,58703:34204,58704:34167,58705:34174,58706:34192,58707:34249,58708:34234,58709:34255,58710:34233,58711:34256,58712:34261,58713:34269,58714:34277,58715:34268,58716:34297,58717:34314,58718:34323,58719:34315,58720:34302,58721:34298,58722:34310,58723:34338,58724:34330,58725:34352,58726:34367,58727:34381,58728:20053,58729:34388,58730:34399,58731:34407,58732:34417,58733:34451,58734:34467,58735:34473,58736:34474,58737:34443,58738:34444,58739:34486,58740:34479,58741:34500,58742:34502,58743:34480,58744:34505,58745:34851,58746:34475,58747:34516,58748:34526,58749:34537,58750:34540,58752:34527,58753:34523,58754:34543,58755:34578,58756:34566,58757:34568,58758:34560,58759:34563,58760:34555,58761:34577,58762:34569,58763:34573,58764:34553,58765:34570,58766:34612,58767:34623,58768:34615,58769:34619,58770:34597,58771:34601,58772:34586,58773:34656,58774:34655,58775:34680,58776:34636,58777:34638,58778:34676,58779:34647,58780:34664,58781:34670,58782:34649,58783:34643,58784:34659,58785:34666,58786:34821,58787:34722,58788:34719,58789:34690,58790:34735,58791:34763,58792:34749,58793:34752,58794:34768,58795:38614,58796:34731,58797:34756,58798:34739,58799:34759,58800:34758,58801:34747,58802:34799,58803:34802,58804:34784,58805:34831,58806:34829,58807:34814,58808:34806,58809:34807,58810:34830,58811:34770,58812:34833,58813:34838,58814:34837,58815:34850,58816:34849,58817:34865,58818:34870,58819:34873,58820:34855,58821:34875,58822:34884,58823:34882,58824:34898,58825:34905,58826:34910,58827:34914,58828:34923,58829:34945,58830:34942,58831:34974,58832:34933,58833:34941,58834:34997,58835:34930,58836:34946,58837:34967,58838:34962,58839:34990,58840:34969,58841:34978,58842:34957,58843:34980,58844:34992,58845:35007,58846:34993,58847:35011,58848:35012,58849:35028,58850:35032,58851:35033,58852:35037,58853:35065,58854:35074,58855:35068,58856:35060,58857:35048,58858:35058,58859:35076,58860:35084,58861:35082,58862:35091,58863:35139,58864:35102,58865:35109,58866:35114,58867:35115,58868:35137,58869:35140,58870:35131,58871:35126,58872:35128,58873:35148,58874:35101,58875:35168,58876:35166,58944:35174,58945:35172,58946:35181,58947:35178,58948:35183,58949:35188,58950:35191,58951:35198,58952:35203,58953:35208,58954:35210,58955:35219,58956:35224,58957:35233,58958:35241,58959:35238,58960:35244,58961:35247,58962:35250,58963:35258,58964:35261,58965:35263,58966:35264,58967:35290,58968:35292,58969:35293,58970:35303,58971:35316,58972:35320,58973:35331,58974:35350,58975:35344,58976:35340,58977:35355,58978:35357,58979:35365,58980:35382,58981:35393,58982:35419,58983:35410,58984:35398,58985:35400,58986:35452,58987:35437,58988:35436,58989:35426,58990:35461,58991:35458,58992:35460,58993:35496,58994:35489,58995:35473,58996:35493,58997:35494,58998:35482,58999:35491,59e3:35524,59001:35533,59002:35522,59003:35546,59004:35563,59005:35571,59006:35559,59008:35556,59009:35569,59010:35604,59011:35552,59012:35554,59013:35575,59014:35550,59015:35547,59016:35596,59017:35591,59018:35610,59019:35553,59020:35606,59021:35600,59022:35607,59023:35616,59024:35635,59025:38827,59026:35622,59027:35627,59028:35646,59029:35624,59030:35649,59031:35660,59032:35663,59033:35662,59034:35657,59035:35670,59036:35675,59037:35674,59038:35691,59039:35679,59040:35692,59041:35695,59042:35700,59043:35709,59044:35712,59045:35724,59046:35726,59047:35730,59048:35731,59049:35734,59050:35737,59051:35738,59052:35898,59053:35905,59054:35903,59055:35912,59056:35916,59057:35918,59058:35920,59059:35925,59060:35938,59061:35948,59062:35960,59063:35962,59064:35970,59065:35977,59066:35973,59067:35978,59068:35981,59069:35982,59070:35988,59071:35964,59072:35992,59073:25117,59074:36013,59075:36010,59076:36029,59077:36018,59078:36019,59079:36014,59080:36022,59081:36040,59082:36033,59083:36068,59084:36067,59085:36058,59086:36093,59087:36090,59088:36091,59089:36100,59090:36101,59091:36106,59092:36103,59093:36111,59094:36109,59095:36112,59096:40782,59097:36115,59098:36045,59099:36116,59100:36118,59101:36199,59102:36205,59103:36209,59104:36211,59105:36225,59106:36249,59107:36290,59108:36286,59109:36282,59110:36303,59111:36314,59112:36310,59113:36300,59114:36315,59115:36299,59116:36330,59117:36331,59118:36319,59119:36323,59120:36348,59121:36360,59122:36361,59123:36351,59124:36381,59125:36382,59126:36368,59127:36383,59128:36418,59129:36405,59130:36400,59131:36404,59132:36426,59200:36423,59201:36425,59202:36428,59203:36432,59204:36424,59205:36441,59206:36452,59207:36448,59208:36394,59209:36451,59210:36437,59211:36470,59212:36466,59213:36476,59214:36481,59215:36487,59216:36485,59217:36484,59218:36491,59219:36490,59220:36499,59221:36497,59222:36500,59223:36505,59224:36522,59225:36513,59226:36524,59227:36528,59228:36550,59229:36529,59230:36542,59231:36549,59232:36552,59233:36555,59234:36571,59235:36579,59236:36604,59237:36603,59238:36587,59239:36606,59240:36618,59241:36613,59242:36629,59243:36626,59244:36633,59245:36627,59246:36636,59247:36639,59248:36635,59249:36620,59250:36646,59251:36659,59252:36667,59253:36665,59254:36677,59255:36674,59256:36670,59257:36684,59258:36681,59259:36678,59260:36686,59261:36695,59262:36700,59264:36706,59265:36707,59266:36708,59267:36764,59268:36767,59269:36771,59270:36781,59271:36783,59272:36791,59273:36826,59274:36837,59275:36834,59276:36842,59277:36847,59278:36999,59279:36852,59280:36869,59281:36857,59282:36858,59283:36881,59284:36885,59285:36897,59286:36877,59287:36894,59288:36886,59289:36875,59290:36903,59291:36918,59292:36917,59293:36921,59294:36856,59295:36943,59296:36944,59297:36945,59298:36946,59299:36878,59300:36937,59301:36926,59302:36950,59303:36952,59304:36958,59305:36968,59306:36975,59307:36982,59308:38568,59309:36978,59310:36994,59311:36989,59312:36993,59313:36992,59314:37002,59315:37001,59316:37007,59317:37032,59318:37039,59319:37041,59320:37045,59321:37090,59322:37092,59323:25160,59324:37083,59325:37122,59326:37138,59327:37145,59328:37170,59329:37168,59330:37194,59331:37206,59332:37208,59333:37219,59334:37221,59335:37225,59336:37235,59337:37234,59338:37259,59339:37257,59340:37250,59341:37282,59342:37291,59343:37295,59344:37290,59345:37301,59346:37300,59347:37306,59348:37312,59349:37313,59350:37321,59351:37323,59352:37328,59353:37334,59354:37343,59355:37345,59356:37339,59357:37372,59358:37365,59359:37366,59360:37406,59361:37375,59362:37396,59363:37420,59364:37397,59365:37393,59366:37470,59367:37463,59368:37445,59369:37449,59370:37476,59371:37448,59372:37525,59373:37439,59374:37451,59375:37456,59376:37532,59377:37526,59378:37523,59379:37531,59380:37466,59381:37583,59382:37561,59383:37559,59384:37609,59385:37647,59386:37626,59387:37700,59388:37678,59456:37657,59457:37666,59458:37658,59459:37667,59460:37690,59461:37685,59462:37691,59463:37724,59464:37728,59465:37756,59466:37742,59467:37718,59468:37808,59469:37804,59470:37805,59471:37780,59472:37817,59473:37846,59474:37847,59475:37864,59476:37861,59477:37848,59478:37827,59479:37853,59480:37840,59481:37832,59482:37860,59483:37914,59484:37908,59485:37907,59486:37891,59487:37895,59488:37904,59489:37942,59490:37931,59491:37941,59492:37921,59493:37946,59494:37953,59495:37970,59496:37956,59497:37979,59498:37984,59499:37986,59500:37982,59501:37994,59502:37417,59503:38e3,59504:38005,59505:38007,59506:38013,59507:37978,59508:38012,59509:38014,59510:38017,59511:38015,59512:38274,59513:38279,59514:38282,59515:38292,59516:38294,59517:38296,59518:38297,59520:38304,59521:38312,59522:38311,59523:38317,59524:38332,59525:38331,59526:38329,59527:38334,59528:38346,59529:28662,59530:38339,59531:38349,59532:38348,59533:38357,59534:38356,59535:38358,59536:38364,59537:38369,59538:38373,59539:38370,59540:38433,59541:38440,59542:38446,59543:38447,59544:38466,59545:38476,59546:38479,59547:38475,59548:38519,59549:38492,59550:38494,59551:38493,59552:38495,59553:38502,59554:38514,59555:38508,59556:38541,59557:38552,59558:38549,59559:38551,59560:38570,59561:38567,59562:38577,59563:38578,59564:38576,59565:38580,59566:38582,59567:38584,59568:38585,59569:38606,59570:38603,59571:38601,59572:38605,59573:35149,59574:38620,59575:38669,59576:38613,59577:38649,59578:38660,59579:38662,59580:38664,59581:38675,59582:38670,59583:38673,59584:38671,59585:38678,59586:38681,59587:38692,59588:38698,59589:38704,59590:38713,59591:38717,59592:38718,59593:38724,59594:38726,59595:38728,59596:38722,59597:38729,59598:38748,59599:38752,59600:38756,59601:38758,59602:38760,59603:21202,59604:38763,59605:38769,59606:38777,59607:38789,59608:38780,59609:38785,59610:38778,59611:38790,59612:38795,59613:38799,59614:38800,59615:38812,59616:38824,59617:38822,59618:38819,59619:38835,59620:38836,59621:38851,59622:38854,59623:38856,59624:38859,59625:38876,59626:38893,59627:40783,59628:38898,59629:31455,59630:38902,59631:38901,59632:38927,59633:38924,59634:38968,59635:38948,59636:38945,59637:38967,59638:38973,59639:38982,59640:38991,59641:38987,59642:39019,59643:39023,59644:39024,59712:39025,59713:39028,59714:39027,59715:39082,59716:39087,59717:39089,59718:39094,59719:39108,59720:39107,59721:39110,59722:39145,59723:39147,59724:39171,59725:39177,59726:39186,59727:39188,59728:39192,59729:39201,59730:39197,59731:39198,59732:39204,59733:39200,59734:39212,59735:39214,59736:39229,59737:39230,59738:39234,59739:39241,59740:39237,59741:39248,59742:39243,59743:39249,59744:39250,59745:39244,59746:39253,59747:39319,59748:39320,59749:39333,59750:39341,59751:39342,59752:39356,59753:39391,59754:39387,59755:39389,59756:39384,59757:39377,59758:39405,59759:39406,59760:39409,59761:39410,59762:39419,59763:39416,59764:39425,59765:39439,59766:39429,59767:39394,59768:39449,59769:39467,59770:39479,59771:39493,59772:39490,59773:39488,59774:39491,59776:39486,59777:39509,59778:39501,59779:39515,59780:39511,59781:39519,59782:39522,59783:39525,59784:39524,59785:39529,59786:39531,59787:39530,59788:39597,59789:39600,59790:39612,59791:39616,59792:39631,59793:39633,59794:39635,59795:39636,59796:39646,59797:39647,59798:39650,59799:39651,59800:39654,59801:39663,59802:39659,59803:39662,59804:39668,59805:39665,59806:39671,59807:39675,59808:39686,59809:39704,59810:39706,59811:39711,59812:39714,59813:39715,59814:39717,59815:39719,59816:39720,59817:39721,59818:39722,59819:39726,59820:39727,59821:39730,59822:39748,59823:39747,59824:39759,59825:39757,59826:39758,59827:39761,59828:39768,59829:39796,59830:39827,59831:39811,59832:39825,59833:39830,59834:39831,59835:39839,59836:39840,59837:39848,59838:39860,59839:39872,59840:39882,59841:39865,59842:39878,59843:39887,59844:39889,59845:39890,59846:39907,59847:39906,59848:39908,59849:39892,59850:39905,59851:39994,59852:39922,59853:39921,59854:39920,59855:39957,59856:39956,59857:39945,59858:39955,59859:39948,59860:39942,59861:39944,59862:39954,59863:39946,59864:39940,59865:39982,59866:39963,59867:39973,59868:39972,59869:39969,59870:39984,59871:40007,59872:39986,59873:40006,59874:39998,59875:40026,59876:40032,59877:40039,59878:40054,59879:40056,59880:40167,59881:40172,59882:40176,59883:40201,59884:40200,59885:40171,59886:40195,59887:40198,59888:40234,59889:40230,59890:40367,59891:40227,59892:40223,59893:40260,59894:40213,59895:40210,59896:40257,59897:40255,59898:40254,59899:40262,59900:40264,59968:40285,59969:40286,59970:40292,59971:40273,59972:40272,59973:40281,59974:40306,59975:40329,59976:40327,59977:40363,59978:40303,59979:40314,59980:40346,59981:40356,59982:40361,59983:40370,59984:40388,59985:40385,59986:40379,59987:40376,59988:40378,59989:40390,59990:40399,59991:40386,59992:40409,59993:40403,59994:40440,59995:40422,59996:40429,59997:40431,59998:40445,59999:40474,6e4:40475,60001:40478,60002:40565,60003:40569,60004:40573,60005:40577,60006:40584,60007:40587,60008:40588,60009:40594,60010:40597,60011:40593,60012:40605,60013:40613,60014:40617,60015:40632,60016:40618,60017:40621,60018:38753,60019:40652,60020:40654,60021:40655,60022:40656,60023:40660,60024:40668,60025:40670,60026:40669,60027:40672,60028:40677,60029:40680,60030:40687,60032:40692,60033:40694,60034:40695,60035:40697,60036:40699,60037:40700,60038:40701,60039:40711,60040:40712,60041:30391,60042:40725,60043:40737,60044:40748,60045:40766,60046:40778,60047:40786,60048:40788,60049:40803,60050:40799,60051:40800,60052:40801,60053:40806,60054:40807,60055:40812,60056:40810,60057:40823,60058:40818,60059:40822,60060:40853,60061:40860,60062:40864,60063:22575,60064:27079,60065:36953,60066:29796,60067:20956,60068:29081}},function(i,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=t(1),r=t(2);function o(c,d,h,p){var g;d.degree()<h.degree()&&(g=[h,d],d=g[0],h=g[1]);for(var _=d,b=h,C=c.zero,y=c.one;b.degree()>=p/2;){var M=_,O=C;if(_=b,C=y,_.isZero())return null;b=M;for(var A=c.zero,D=_.getCoefficient(_.degree()),N=c.inverse(D);b.degree()>=_.degree()&&!b.isZero();){var B=b.degree()-_.degree(),T=c.multiply(b.getCoefficient(b.degree()),N);A=A.addOrSubtract(c.buildMonomial(B,T)),b=b.addOrSubtract(_.multiplyByMonomial(B,T))}if(y=A.multiplyPoly(C).addOrSubtract(O),b.degree()>=_.degree())return null}var H=y.getCoefficient(0);if(H===0)return null;var te=c.inverse(H);return[y.multiply(te),b.multiply(te)]}function s(c,d){var h=d.degree();if(h===1)return[d.getCoefficient(1)];for(var p=new Array(h),g=0,_=1;_<c.size&&g<h;_++)d.evaluateAt(_)===0&&(p[g]=c.inverse(_),g++);return g!==h?null:p}function a(c,d,h){for(var p=h.length,g=new Array(p),_=0;_<p;_++){for(var b=c.inverse(h[_]),C=1,y=0;y<p;y++)_!==y&&(C=c.multiply(C,n.addOrSubtractGF(1,c.multiply(h[y],b))));g[_]=c.multiply(d.evaluateAt(b),c.inverse(C)),c.generatorBase!==0&&(g[_]=c.multiply(g[_],b))}return g}function l(c,d){var h=new Uint8ClampedArray(c.length);h.set(c);for(var p=new n.default(285,256,0),g=new r.default(p,h),_=new Uint8ClampedArray(d),b=!1,C=0;C<d;C++){var y=g.evaluateAt(p.exp(C+p.generatorBase));_[_.length-1-C]=y,y!==0&&(b=!0)}if(!b)return h;var M=new r.default(p,_),O=o(p,p.buildMonomial(d,1),M,d);if(O===null)return null;var A=s(p,O[0]);if(A==null)return null;for(var D=a(p,O[1],A),N=0;N<A.length;N++){var B=h.length-1-p.log(A[N]);if(B<0)return null;h[B]=n.addOrSubtractGF(h[B],D[N])}return h}e.decode=l},function(i,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VERSIONS=[{infoBits:null,versionNumber:1,alignmentPatternCenters:[],errorCorrectionLevels:[{ecCodewordsPerBlock:7,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:13,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:13}]},{ecCodewordsPerBlock:17,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:2,alignmentPatternCenters:[6,18],errorCorrectionLevels:[{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:34}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:28}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]}]},{infoBits:null,versionNumber:3,alignmentPatternCenters:[6,22],errorCorrectionLevels:[{ecCodewordsPerBlock:15,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:55}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:13}]}]},{infoBits:null,versionNumber:4,alignmentPatternCenters:[6,26],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:80}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:32}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:5,alignmentPatternCenters:[6,30],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:43}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:11},{numBlocks:2,dataCodewordsPerBlock:12}]}]},{infoBits:null,versionNumber:6,alignmentPatternCenters:[6,34],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:27}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:31892,versionNumber:7,alignmentPatternCenters:[6,22,38],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:78}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:31}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:13},{numBlocks:1,dataCodewordsPerBlock:14}]}]},{infoBits:34236,versionNumber:8,alignmentPatternCenters:[6,24,42],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:97}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:38},{numBlocks:2,dataCodewordsPerBlock:39}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:18},{numBlocks:2,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:14},{numBlocks:2,dataCodewordsPerBlock:15}]}]},{infoBits:39577,versionNumber:9,alignmentPatternCenters:[6,26,46],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:12},{numBlocks:4,dataCodewordsPerBlock:13}]}]},{infoBits:42195,versionNumber:10,alignmentPatternCenters:[6,28,50],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68},{numBlocks:2,dataCodewordsPerBlock:69}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:43},{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]}]},{infoBits:48118,versionNumber:11,alignmentPatternCenters:[6,30,54],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:81}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:50},{numBlocks:4,dataCodewordsPerBlock:51}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:22},{numBlocks:4,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:12},{numBlocks:8,dataCodewordsPerBlock:13}]}]},{infoBits:51042,versionNumber:12,alignmentPatternCenters:[6,32,58],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:92},{numBlocks:2,dataCodewordsPerBlock:93}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:20},{numBlocks:6,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:55367,versionNumber:13,alignmentPatternCenters:[6,34,62],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:37},{numBlocks:1,dataCodewordsPerBlock:38}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:20},{numBlocks:4,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:11},{numBlocks:4,dataCodewordsPerBlock:12}]}]},{infoBits:58893,versionNumber:14,alignmentPatternCenters:[6,26,46,66],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:40},{numBlocks:5,dataCodewordsPerBlock:41}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:16},{numBlocks:5,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:5,dataCodewordsPerBlock:13}]}]},{infoBits:63784,versionNumber:15,alignmentPatternCenters:[6,26,48,70],errorCorrectionLevels:[{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:87},{numBlocks:1,dataCodewordsPerBlock:88}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:41},{numBlocks:5,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:7,dataCodewordsPerBlock:13}]}]},{infoBits:68472,versionNumber:16,alignmentPatternCenters:[6,26,50,74],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:98},{numBlocks:1,dataCodewordsPerBlock:99}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:70749,versionNumber:17,alignmentPatternCenters:[6,30,54,78],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:1,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22},{numBlocks:15,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:17,dataCodewordsPerBlock:15}]}]},{infoBits:76311,versionNumber:18,alignmentPatternCenters:[6,30,56,82],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:120},{numBlocks:1,dataCodewordsPerBlock:121}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:43},{numBlocks:4,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:1,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:19,dataCodewordsPerBlock:15}]}]},{infoBits:79154,versionNumber:19,alignmentPatternCenters:[6,30,58,86],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:113},{numBlocks:4,dataCodewordsPerBlock:114}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:44},{numBlocks:11,dataCodewordsPerBlock:45}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:21},{numBlocks:4,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:13},{numBlocks:16,dataCodewordsPerBlock:14}]}]},{infoBits:84390,versionNumber:20,alignmentPatternCenters:[6,34,62,90],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:41},{numBlocks:13,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:5,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:15},{numBlocks:10,dataCodewordsPerBlock:16}]}]},{infoBits:87683,versionNumber:21,alignmentPatternCenters:[6,28,50,72,94],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:116},{numBlocks:4,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:16},{numBlocks:6,dataCodewordsPerBlock:17}]}]},{infoBits:92361,versionNumber:22,alignmentPatternCenters:[6,26,50,74,98],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:111},{numBlocks:7,dataCodewordsPerBlock:112}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:13}]}]},{infoBits:96236,versionNumber:23,alignmentPatternCenters:[6,30,54,74,102],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:121},{numBlocks:5,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:47},{numBlocks:14,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:16,dataCodewordsPerBlock:15},{numBlocks:14,dataCodewordsPerBlock:16}]}]},{infoBits:102084,versionNumber:24,alignmentPatternCenters:[6,28,54,80,106],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:45},{numBlocks:14,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:30,dataCodewordsPerBlock:16},{numBlocks:2,dataCodewordsPerBlock:17}]}]},{infoBits:102881,versionNumber:25,alignmentPatternCenters:[6,32,58,84,110],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:106},{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:47},{numBlocks:13,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:110507,versionNumber:26,alignmentPatternCenters:[6,30,58,86,114],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:114},{numBlocks:2,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:46},{numBlocks:4,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:28,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:33,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]}]},{infoBits:110734,versionNumber:27,alignmentPatternCenters:[6,34,62,90,118],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:23},{numBlocks:26,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:117786,versionNumber:28,alignmentPatternCenters:[6,26,50,74,98,122],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:117},{numBlocks:10,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:45},{numBlocks:23,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:24},{numBlocks:31,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:31,dataCodewordsPerBlock:16}]}]},{infoBits:119615,versionNumber:29,alignmentPatternCenters:[6,30,54,78,102,126],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:116},{numBlocks:7,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:21,dataCodewordsPerBlock:45},{numBlocks:7,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:23},{numBlocks:37,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:26,dataCodewordsPerBlock:16}]}]},{infoBits:126325,versionNumber:30,alignmentPatternCenters:[6,26,52,78,104,130],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:115},{numBlocks:10,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:47},{numBlocks:10,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:25,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:25,dataCodewordsPerBlock:16}]}]},{infoBits:127568,versionNumber:31,alignmentPatternCenters:[6,30,56,82,108,134],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:3,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:46},{numBlocks:29,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:24},{numBlocks:1,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:133589,versionNumber:32,alignmentPatternCenters:[6,34,60,86,112,138],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:24},{numBlocks:35,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:35,dataCodewordsPerBlock:16}]}]},{infoBits:136944,versionNumber:33,alignmentPatternCenters:[6,30,58,86,114,142],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:21,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:24},{numBlocks:19,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:141498,versionNumber:34,alignmentPatternCenters:[6,34,62,90,118,146],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:6,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:44,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:59,dataCodewordsPerBlock:16},{numBlocks:1,dataCodewordsPerBlock:17}]}]},{infoBits:145311,versionNumber:35,alignmentPatternCenters:[6,30,54,78,102,126,150],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:121},{numBlocks:7,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:47},{numBlocks:26,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:39,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:41,dataCodewordsPerBlock:16}]}]},{infoBits:150283,versionNumber:36,alignmentPatternCenters:[6,24,50,76,102,128,154],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:121},{numBlocks:14,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:47},{numBlocks:34,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:46,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:64,dataCodewordsPerBlock:16}]}]},{infoBits:152622,versionNumber:37,alignmentPatternCenters:[6,28,54,80,106,132,158],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:46},{numBlocks:14,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:49,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:24,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:158308,versionNumber:38,alignmentPatternCenters:[6,32,58,84,110,136,162],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:122},{numBlocks:18,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:46},{numBlocks:32,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:48,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:15},{numBlocks:32,dataCodewordsPerBlock:16}]}]},{infoBits:161089,versionNumber:39,alignmentPatternCenters:[6,26,54,82,110,138,166],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:40,dataCodewordsPerBlock:47},{numBlocks:7,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:43,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:15},{numBlocks:67,dataCodewordsPerBlock:16}]}]},{infoBits:167017,versionNumber:40,alignmentPatternCenters:[6,30,58,86,114,142,170],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:118},{numBlocks:6,dataCodewordsPerBlock:119}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:18,dataCodewordsPerBlock:47},{numBlocks:31,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:24},{numBlocks:34,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:15},{numBlocks:61,dataCodewordsPerBlock:16}]}]}]},function(i,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=t(0);function r(l,c,d,h){var p=l.x-c.x+d.x-h.x,g=l.y-c.y+d.y-h.y;if(p===0&&g===0)return{a11:c.x-l.x,a12:c.y-l.y,a13:0,a21:d.x-c.x,a22:d.y-c.y,a23:0,a31:l.x,a32:l.y,a33:1};var _=c.x-d.x,b=h.x-d.x,C=c.y-d.y,y=h.y-d.y,M=_*y-b*C,O=(p*y-b*g)/M,A=(_*g-p*C)/M;return{a11:c.x-l.x+O*c.x,a12:c.y-l.y+O*c.y,a13:O,a21:h.x-l.x+A*h.x,a22:h.y-l.y+A*h.y,a23:A,a31:l.x,a32:l.y,a33:1}}function o(l,c,d,h){var p=r(l,c,d,h);return{a11:p.a22*p.a33-p.a23*p.a32,a12:p.a13*p.a32-p.a12*p.a33,a13:p.a12*p.a23-p.a13*p.a22,a21:p.a23*p.a31-p.a21*p.a33,a22:p.a11*p.a33-p.a13*p.a31,a23:p.a13*p.a21-p.a11*p.a23,a31:p.a21*p.a32-p.a22*p.a31,a32:p.a12*p.a31-p.a11*p.a32,a33:p.a11*p.a22-p.a12*p.a21}}function s(l,c){return{a11:l.a11*c.a11+l.a21*c.a12+l.a31*c.a13,a12:l.a12*c.a11+l.a22*c.a12+l.a32*c.a13,a13:l.a13*c.a11+l.a23*c.a12+l.a33*c.a13,a21:l.a11*c.a21+l.a21*c.a22+l.a31*c.a23,a22:l.a12*c.a21+l.a22*c.a22+l.a32*c.a23,a23:l.a13*c.a21+l.a23*c.a22+l.a33*c.a23,a31:l.a11*c.a31+l.a21*c.a32+l.a31*c.a33,a32:l.a12*c.a31+l.a22*c.a32+l.a32*c.a33,a33:l.a13*c.a31+l.a23*c.a32+l.a33*c.a33}}function a(l,c){for(var d=o({x:3.5,y:3.5},{x:c.dimension-3.5,y:3.5},{x:c.dimension-6.5,y:c.dimension-6.5},{x:3.5,y:c.dimension-3.5}),h=r(c.topLeft,c.topRight,c.alignmentPattern,c.bottomLeft),p=s(h,d),g=n.BitMatrix.createEmpty(c.dimension,c.dimension),_=function(A,D){var N=p.a13*A+p.a23*D+p.a33;return{x:(p.a11*A+p.a21*D+p.a31)/N,y:(p.a12*A+p.a22*D+p.a32)/N}},b=0;b<c.dimension;b++)for(var C=0;C<c.dimension;C++){var y=C+.5,M=b+.5,O=_(y,M);g.set(C,b,l.get(Math.floor(O.x),Math.floor(O.y)))}return{matrix:g,mappingFunction:_}}e.extract=a},function(i,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=4,r=.5,o=1.5,s=function(y,M){return Math.sqrt(Math.pow(M.x-y.x,2)+Math.pow(M.y-y.y,2))};function a(y){return y.reduce(function(M,O){return M+O})}function l(y,M,O){var A,D,N,B,T=s(y,M),H=s(M,O),te=s(y,O),L,z,J;return H>=T&&H>=te?(A=[M,y,O],L=A[0],z=A[1],J=A[2]):te>=H&&te>=T?(D=[y,M,O],L=D[0],z=D[1],J=D[2]):(N=[y,O,M],L=N[0],z=N[1],J=N[2]),(J.x-z.x)*(L.y-z.y)-(J.y-z.y)*(L.x-z.x)<0&&(B=[J,L],L=B[0],J=B[1]),{bottomLeft:L,topLeft:z,topRight:J}}function c(y,M,O,A){var D=(a(h(y,O,A,5))/7+a(h(y,M,A,5))/7+a(h(O,y,A,5))/7+a(h(M,y,A,5))/7)/4;if(D<1)throw new Error("Invalid module size");var N=Math.round(s(y,M)/D),B=Math.round(s(y,O)/D),T=Math.floor((N+B)/2)+7;switch(T%4){case 0:T++;break;case 2:T--;break}return{dimension:T,moduleSize:D}}function d(y,M,O,A){var D=[{x:Math.floor(y.x),y:Math.floor(y.y)}],N=Math.abs(M.y-y.y)>Math.abs(M.x-y.x),B,T,H,te;N?(B=Math.floor(y.y),T=Math.floor(y.x),H=Math.floor(M.y),te=Math.floor(M.x)):(B=Math.floor(y.x),T=Math.floor(y.y),H=Math.floor(M.x),te=Math.floor(M.y));for(var L=Math.abs(H-B),z=Math.abs(te-T),J=Math.floor(-L/2),Q=B<H?1:-1,ce=T<te?1:-1,X=!0,ie=B,oe=T;ie!==H+Q;ie+=Q){var le=N?oe:ie,Ce=N?ie:oe;if(O.get(le,Ce)!==X&&(X=!X,D.push({x:le,y:Ce}),D.length===A+1))break;if(J+=z,J>0){if(oe===te)break;oe+=ce,J-=L}}for(var Ne=[],R=0;R<A;R++)D[R]&&D[R+1]?Ne.push(s(D[R],D[R+1])):Ne.push(0);return Ne}function h(y,M,O,A){var D,N=M.y-y.y,B=M.x-y.x,T=d(y,M,O,Math.ceil(A/2)),H=d(y,{x:y.x-B,y:y.y-N},O,Math.ceil(A/2)),te=T.shift()+H.shift()-1;return(D=H.concat(te)).concat.apply(D,T)}function p(y,M){var O=a(y)/a(M),A=0;return M.forEach(function(D,N){A+=Math.pow(y[N]-D*O,2)}),{averageSize:O,error:A}}function g(y,M,O){try{var A=h(y,{x:-1,y:y.y},O,M.length),D=h(y,{x:y.x,y:-1},O,M.length),N={x:Math.max(0,y.x-y.y)-1,y:Math.max(0,y.y-y.x)-1},B=h(y,N,O,M.length),T={x:Math.min(O.width,y.x+y.y)+1,y:Math.min(O.height,y.y+y.x)+1},H=h(y,T,O,M.length),te=p(A,M),L=p(D,M),z=p(B,M),J=p(H,M),Q=Math.sqrt(te.error*te.error+L.error*L.error+z.error*z.error+J.error*J.error),ce=(te.averageSize+L.averageSize+z.averageSize+J.averageSize)/4,X=(Math.pow(te.averageSize-ce,2)+Math.pow(L.averageSize-ce,2)+Math.pow(z.averageSize-ce,2)+Math.pow(J.averageSize-ce,2))/ce;return Q+X}catch{return 1/0}}function _(y,M){for(var O=Math.round(M.x);y.get(O,Math.round(M.y));)O--;for(var A=Math.round(M.x);y.get(A,Math.round(M.y));)A++;for(var D=(O+A)/2,N=Math.round(M.y);y.get(Math.round(D),N);)N--;for(var B=Math.round(M.y);y.get(Math.round(D),B);)B++;var T=(N+B)/2;return{x:D,y:T}}function b(y){for(var M=[],O=[],A=[],D=[],N=function(le){for(var Ce=0,Ne=!1,R=[0,0,0,0,0],ne=function(de){var fe=y.get(de,le);if(fe===Ne)Ce++;else{R=[R[1],R[2],R[3],R[4],Ce],Ce=1,Ne=fe;var me=a(R)/7,Pe=Math.abs(R[0]-me)<me&&Math.abs(R[1]-me)<me&&Math.abs(R[2]-3*me)<3*me&&Math.abs(R[3]-me)<me&&Math.abs(R[4]-me)<me&&!fe,Me=a(R.slice(-3))/3,Ue=Math.abs(R[2]-Me)<Me&&Math.abs(R[3]-Me)<Me&&Math.abs(R[4]-Me)<Me&&fe;if(Pe){var He=de-R[3]-R[4],Xe=He-R[2],Ye={startX:Xe,endX:He,y:le},wt=O.filter(function(Ot){return Xe>=Ot.bottom.startX&&Xe<=Ot.bottom.endX||He>=Ot.bottom.startX&&Xe<=Ot.bottom.endX||Xe<=Ot.bottom.startX&&He>=Ot.bottom.endX&&R[2]/(Ot.bottom.endX-Ot.bottom.startX)<o&&R[2]/(Ot.bottom.endX-Ot.bottom.startX)>r});wt.length>0?wt[0].bottom=Ye:O.push({top:Ye,bottom:Ye})}if(Ue){var Te=de-R[4],ue=Te-R[3],Ye={startX:ue,y:le,endX:Te},wt=D.filter(function(We){return ue>=We.bottom.startX&&ue<=We.bottom.endX||Te>=We.bottom.startX&&ue<=We.bottom.endX||ue<=We.bottom.startX&&Te>=We.bottom.endX&&R[2]/(We.bottom.endX-We.bottom.startX)<o&&R[2]/(We.bottom.endX-We.bottom.startX)>r});wt.length>0?wt[0].bottom=Ye:D.push({top:Ye,bottom:Ye})}}},re=-1;re<=y.width;re++)ne(re);M.push.apply(M,O.filter(function(de){return de.bottom.y!==le&&de.bottom.y-de.top.y>=2})),O=O.filter(function(de){return de.bottom.y===le}),A.push.apply(A,D.filter(function(de){return de.bottom.y!==le})),D=D.filter(function(de){return de.bottom.y===le})},B=0;B<=y.height;B++)N(B);M.push.apply(M,O.filter(function(le){return le.bottom.y-le.top.y>=2})),A.push.apply(A,D);var T=M.filter(function(le){return le.bottom.y-le.top.y>=2}).map(function(le){var Ce=(le.top.startX+le.top.endX+le.bottom.startX+le.bottom.endX)/4,Ne=(le.top.y+le.bottom.y+1)/2;if(y.get(Math.round(Ce),Math.round(Ne))){var R=[le.top.endX-le.top.startX,le.bottom.endX-le.bottom.startX,le.bottom.y-le.top.y+1],ne=a(R)/R.length,re=g({x:Math.round(Ce),y:Math.round(Ne)},[1,1,3,1,1],y);return{score:re,x:Ce,y:Ne,size:ne}}}).filter(function(le){return!!le}).sort(function(le,Ce){return le.score-Ce.score}).map(function(le,Ce,Ne){if(Ce>n)return null;var R=Ne.filter(function(re,de){return Ce!==de}).map(function(re){return{x:re.x,y:re.y,score:re.score+Math.pow(re.size-le.size,2)/le.size,size:re.size}}).sort(function(re,de){return re.score-de.score});if(R.length<2)return null;var ne=le.score+R[0].score+R[1].score;return{points:[le].concat(R.slice(0,2)),score:ne}}).filter(function(le){return!!le}).sort(function(le,Ce){return le.score-Ce.score});if(T.length===0)return null;var H=l(T[0].points[0],T[0].points[1],T[0].points[2]),te=H.topRight,L=H.topLeft,z=H.bottomLeft,J=C(y,A,te,L,z),Q=[];J&&Q.push({alignmentPattern:{x:J.alignmentPattern.x,y:J.alignmentPattern.y},bottomLeft:{x:z.x,y:z.y},dimension:J.dimension,topLeft:{x:L.x,y:L.y},topRight:{x:te.x,y:te.y}});var ce=_(y,te),X=_(y,L),ie=_(y,z),oe=C(y,A,ce,X,ie);return oe&&Q.push({alignmentPattern:{x:oe.alignmentPattern.x,y:oe.alignmentPattern.y},bottomLeft:{x:ie.x,y:ie.y},topLeft:{x:X.x,y:X.y},topRight:{x:ce.x,y:ce.y},dimension:oe.dimension}),Q.length===0?null:Q}e.locate=b;function C(y,M,O,A,D){var N,B,T;try{N=c(A,O,D,y),B=N.dimension,T=N.moduleSize}catch{return null}var H={x:O.x-A.x+D.x,y:O.y-A.y+D.y},te=(s(A,D)+s(A,O))/2/T,L=1-3/te,z={x:A.x+L*(H.x-A.x),y:A.y+L*(H.y-A.y)},J=M.map(function(ce){var X=(ce.top.startX+ce.top.endX+ce.bottom.startX+ce.bottom.endX)/4,ie=(ce.top.y+ce.bottom.y+1)/2;if(y.get(Math.floor(X),Math.floor(ie))){var oe=[ce.top.endX-ce.top.startX,ce.bottom.endX-ce.bottom.startX,ce.bottom.y-ce.top.y+1],le=a(oe)/oe.length,Ce=g({x:Math.floor(X),y:Math.floor(ie)},[1,1,1],y),Ne=Ce+s({x:X,y:ie},z);return{x:X,y:ie,score:Ne}}}).filter(function(ce){return!!ce}).sort(function(ce,X){return ce.score-X.score}),Q=te>=15&&J.length?J[0]:z;return{alignmentPattern:Q,dimension:B}}}]).default})});var mz=Vn((P3e,pz)=>{"use strict";pz.exports=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}});var jd=Vn(D0=>{"use strict";var GA,nde=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];D0.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};D0.getSymbolTotalCodewords=function(e){return nde[e]};D0.getBCHDigit=function(i){let e=0;for(;i!==0;)e++,i>>>=1;return e};D0.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');GA=e};D0.isKanjiModeEnabled=function(){return typeof GA<"u"};D0.toSJIS=function(e){return GA(e)}});var k2=Vn(Us=>{"use strict";Us.L={bit:1};Us.M={bit:0};Us.Q={bit:3};Us.H={bit:2};function ide(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"l":case"low":return Us.L;case"m":case"medium":return Us.M;case"q":case"quartile":return Us.Q;case"h":case"high":return Us.H;default:throw new Error("Unknown EC Level: "+i)}}Us.isValid=function(e){return e&&typeof e.bit<"u"&&e.bit>=0&&e.bit<4};Us.from=function(e,t){if(Us.isValid(e))return e;try{return ide(e)}catch{return t}}});var vz=Vn((k3e,_z)=>{"use strict";function xz(){this.buffer=[],this.length=0}xz.prototype={get:function(i){let e=Math.floor(i/8);return(this.buffer[e]>>>7-i%8&1)===1},put:function(i,e){for(let t=0;t<e;t++)this.putBit((i>>>e-t-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(i){let e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),i&&(this.buffer[e]|=128>>>this.length%8),this.length++}};_z.exports=xz});var Cz=Vn((A3e,bz)=>{"use strict";function Ix(i){if(!i||i<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=i,this.data=new Uint8Array(i*i),this.reservedBit=new Uint8Array(i*i)}Ix.prototype.set=function(i,e,t,n){let r=i*this.size+e;this.data[r]=t,n&&(this.reservedBit[r]=!0)};Ix.prototype.get=function(i,e){return this.data[i*this.size+e]};Ix.prototype.xor=function(i,e,t){this.data[i*this.size+e]^=t};Ix.prototype.isReserved=function(i,e){return this.reservedBit[i*this.size+e]};bz.exports=Ix});var yz=Vn(A2=>{"use strict";var rde=jd().getSymbolSize;A2.getRowColCoords=function(e){if(e===1)return[];let t=Math.floor(e/7)+2,n=rde(e),r=n===145?26:Math.ceil((n-13)/(2*t-2))*2,o=[n-7];for(let s=1;s<t-1;s++)o[s]=o[s-1]-r;return o.push(6),o.reverse()};A2.getPositions=function(e){let t=[],n=A2.getRowColCoords(e),r=n.length;for(let o=0;o<r;o++)for(let s=0;s<r;s++)o===0&&s===0||o===0&&s===r-1||o===r-1&&s===0||t.push([n[o],n[s]]);return t}});var Ez=Vn(Mz=>{"use strict";var ode=jd().getSymbolSize,wz=7;Mz.getPositions=function(e){let t=ode(e);return[[0,0],[t-wz,0],[0,t-wz]]}});var Pz=Vn(di=>{"use strict";di.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var F0={N1:3,N2:3,N3:40,N4:10};di.isValid=function(e){return e!=null&&e!==""&&!isNaN(e)&&e>=0&&e<=7};di.from=function(e){return di.isValid(e)?parseInt(e,10):void 0};di.getPenaltyN1=function(e){let t=e.size,n=0,r=0,o=0,s=null,a=null;for(let l=0;l<t;l++){r=o=0,s=a=null;for(let c=0;c<t;c++){let d=e.get(l,c);d===s?r++:(r>=5&&(n+=F0.N1+(r-5)),s=d,r=1),d=e.get(c,l),d===a?o++:(o>=5&&(n+=F0.N1+(o-5)),a=d,o=1)}r>=5&&(n+=F0.N1+(r-5)),o>=5&&(n+=F0.N1+(o-5))}return n};di.getPenaltyN2=function(e){let t=e.size,n=0;for(let r=0;r<t-1;r++)for(let o=0;o<t-1;o++){let s=e.get(r,o)+e.get(r,o+1)+e.get(r+1,o)+e.get(r+1,o+1);(s===4||s===0)&&n++}return n*F0.N2};di.getPenaltyN3=function(e){let t=e.size,n=0,r=0,o=0;for(let s=0;s<t;s++){r=o=0;for(let a=0;a<t;a++)r=r<<1&2047|e.get(s,a),a>=10&&(r===1488||r===93)&&n++,o=o<<1&2047|e.get(a,s),a>=10&&(o===1488||o===93)&&n++}return n*F0.N3};di.getPenaltyN4=function(e){let t=0,n=e.data.length;for(let o=0;o<n;o++)t+=e.data[o];return Math.abs(Math.ceil(t*100/n/5)-10)*F0.N4};function sde(i,e,t){switch(i){case di.Patterns.PATTERN000:return(e+t)%2===0;case di.Patterns.PATTERN001:return e%2===0;case di.Patterns.PATTERN010:return t%3===0;case di.Patterns.PATTERN011:return(e+t)%3===0;case di.Patterns.PATTERN100:return(Math.floor(e/2)+Math.floor(t/3))%2===0;case di.Patterns.PATTERN101:return e*t%2+e*t%3===0;case di.Patterns.PATTERN110:return(e*t%2+e*t%3)%2===0;case di.Patterns.PATTERN111:return(e*t%3+(e+t)%2)%2===0;default:throw new Error("bad maskPattern:"+i)}}di.applyMask=function(e,t){let n=t.size;for(let r=0;r<n;r++)for(let o=0;o<n;o++)t.isReserved(o,r)||t.xor(o,r,sde(e,o,r))};di.getBestMask=function(e,t){let n=Object.keys(di.Patterns).length,r=0,o=1/0;for(let s=0;s<n;s++){t(s),di.applyMask(s,e);let a=di.getPenaltyN1(e)+di.getPenaltyN2(e)+di.getPenaltyN3(e)+di.getPenaltyN4(e);di.applyMask(s,e),a<o&&(o=a,r=s)}return r}});var WA=Vn($A=>{"use strict";var Vd=k2(),D2=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],F2=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];$A.getBlocksCount=function(e,t){switch(t){case Vd.L:return D2[(e-1)*4+0];case Vd.M:return D2[(e-1)*4+1];case Vd.Q:return D2[(e-1)*4+2];case Vd.H:return D2[(e-1)*4+3];default:return}};$A.getTotalCodewordsCount=function(e,t){switch(t){case Vd.L:return F2[(e-1)*4+0];case Vd.M:return F2[(e-1)*4+1];case Vd.Q:return F2[(e-1)*4+2];case Vd.H:return F2[(e-1)*4+3];default:return}}});var Oz=Vn(T2=>{"use strict";var Tx=new Uint8Array(512),I2=new Uint8Array(256);(function(){let e=1;for(let t=0;t<255;t++)Tx[t]=e,I2[e]=t,e<<=1,e&256&&(e^=285);for(let t=255;t<512;t++)Tx[t]=Tx[t-255]})();T2.log=function(e){if(e<1)throw new Error("log("+e+")");return I2[e]};T2.exp=function(e){return Tx[e]};T2.mul=function(e,t){return e===0||t===0?0:Tx[I2[e]+I2[t]]}});var Sz=Vn(Bx=>{"use strict";var qA=Oz();Bx.mul=function(e,t){let n=new Uint8Array(e.length+t.length-1);for(let r=0;r<e.length;r++)for(let o=0;o<t.length;o++)n[r+o]^=qA.mul(e[r],t[o]);return n};Bx.mod=function(e,t){let n=new Uint8Array(e);for(;n.length-t.length>=0;){let r=n[0];for(let s=0;s<t.length;s++)n[s]^=qA.mul(t[s],r);let o=0;for(;o<n.length&&n[o]===0;)o++;n=n.slice(o)}return n};Bx.generateECPolynomial=function(e){let t=new Uint8Array([1]);for(let n=0;n<e;n++)t=Bx.mul(t,new Uint8Array([1,qA.exp(n)]));return t}});var Dz=Vn((L3e,Az)=>{"use strict";var kz=Sz();function KA(i){this.genPoly=void 0,this.degree=i,this.degree&&this.initialize(this.degree)}KA.prototype.initialize=function(e){this.degree=e,this.genPoly=kz.generateECPolynomial(this.degree)};KA.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");let t=new Uint8Array(e.length+this.degree);t.set(e);let n=kz.mod(t,this.genPoly),r=this.degree-n.length;if(r>0){let o=new Uint8Array(this.degree);return o.set(n,r),o}return n};Az.exports=KA});var YA=Vn(Fz=>{"use strict";Fz.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}});var XA=Vn(kc=>{"use strict";var Iz="[0-9]+",ade="[A-Z $%*+\\-./:]+",Nx="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Nx=Nx.replace(/u/g,"\\u");var lde="(?:(?![A-Z0-9 $%*+\\-./:]|"+Nx+`)(?:.|[\r
]))+`;kc.KANJI=new RegExp(Nx,"g");kc.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");kc.BYTE=new RegExp(lde,"g");kc.NUMERIC=new RegExp(Iz,"g");kc.ALPHANUMERIC=new RegExp(ade,"g");var cde=new RegExp("^"+Nx+"$"),dde=new RegExp("^"+Iz+"$"),ude=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");kc.testKanji=function(e){return cde.test(e)};kc.testNumeric=function(e){return dde.test(e)};kc.testAlphanumeric=function(e){return ude.test(e)}});var Ud=Vn(lr=>{"use strict";var hde=YA(),QA=XA();lr.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]};lr.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]};lr.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]};lr.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]};lr.MIXED={bit:-1};lr.getCharCountIndicator=function(e,t){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!hde.isValid(t))throw new Error("Invalid version: "+t);return t>=1&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2]};lr.getBestModeForData=function(e){return QA.testNumeric(e)?lr.NUMERIC:QA.testAlphanumeric(e)?lr.ALPHANUMERIC:QA.testKanji(e)?lr.KANJI:lr.BYTE};lr.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")};lr.isValid=function(e){return e&&e.bit&&e.ccBits};function fde(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return lr.NUMERIC;case"alphanumeric":return lr.ALPHANUMERIC;case"kanji":return lr.KANJI;case"byte":return lr.BYTE;default:throw new Error("Unknown mode: "+i)}}lr.from=function(e,t){if(lr.isValid(e))return e;try{return fde(e)}catch{return t}}});var Rz=Vn(I0=>{"use strict";var B2=jd(),gde=WA(),Tz=k2(),Hd=Ud(),JA=YA(),Nz=7973,Bz=B2.getBCHDigit(Nz);function pde(i,e,t){for(let n=1;n<=40;n++)if(e<=I0.getCapacity(n,t,i))return n}function Lz(i,e){return Hd.getCharCountIndicator(i,e)+4}function mde(i,e){let t=0;return i.forEach(function(n){let r=Lz(n.mode,e);t+=r+n.getBitsLength()}),t}function xde(i,e){for(let t=1;t<=40;t++)if(mde(i,t)<=I0.getCapacity(t,e,Hd.MIXED))return t}I0.from=function(e,t){return JA.isValid(e)?parseInt(e,10):t};I0.getCapacity=function(e,t,n){if(!JA.isValid(e))throw new Error("Invalid QR Code version");typeof n>"u"&&(n=Hd.BYTE);let r=B2.getSymbolTotalCodewords(e),o=gde.getTotalCodewordsCount(e,t),s=(r-o)*8;if(n===Hd.MIXED)return s;let a=s-Lz(n,e);switch(n){case Hd.NUMERIC:return Math.floor(a/10*3);case Hd.ALPHANUMERIC:return Math.floor(a/11*2);case Hd.KANJI:return Math.floor(a/13);case Hd.BYTE:default:return Math.floor(a/8)}};I0.getBestVersionForData=function(e,t){let n,r=Tz.from(t,Tz.M);if(Array.isArray(e)){if(e.length>1)return xde(e,r);if(e.length===0)return 1;n=e[0]}else n=e;return pde(n.mode,n.getLength(),r)};I0.getEncodedBits=function(e){if(!JA.isValid(e)||e<7)throw new Error("Invalid QR Code version");let t=e<<12;for(;B2.getBCHDigit(t)-Bz>=0;)t^=Nz<<B2.getBCHDigit(t)-Bz;return e<<12|t}});var Uz=Vn(Vz=>{"use strict";var ZA=jd(),jz=1335,_de=21522,zz=ZA.getBCHDigit(jz);Vz.getEncodedBits=function(e,t){let n=e.bit<<3|t,r=n<<10;for(;ZA.getBCHDigit(r)-zz>=0;)r^=jz<<ZA.getBCHDigit(r)-zz;return(n<<10|r)^_de}});var Gz=Vn((H3e,Hz)=>{"use strict";var vde=Ud();function cg(i){this.mode=vde.NUMERIC,this.data=i.toString()}cg.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};cg.prototype.getLength=function(){return this.data.length};cg.prototype.getBitsLength=function(){return cg.getBitsLength(this.data.length)};cg.prototype.write=function(e){let t,n,r;for(t=0;t+3<=this.data.length;t+=3)n=this.data.substr(t,3),r=parseInt(n,10),e.put(r,10);let o=this.data.length-t;o>0&&(n=this.data.substr(t),r=parseInt(n,10),e.put(r,o*3+1))};Hz.exports=cg});var Wz=Vn((G3e,$z)=>{"use strict";var bde=Ud(),eD=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function dg(i){this.mode=bde.ALPHANUMERIC,this.data=i}dg.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};dg.prototype.getLength=function(){return this.data.length};dg.prototype.getBitsLength=function(){return dg.getBitsLength(this.data.length)};dg.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let n=eD.indexOf(this.data[t])*45;n+=eD.indexOf(this.data[t+1]),e.put(n,11)}this.data.length%2&&e.put(eD.indexOf(this.data[t]),6)};$z.exports=dg});var Kz=Vn(($3e,qz)=>{"use strict";var Cde=Ud();function ug(i){this.mode=Cde.BYTE,typeof i=="string"?this.data=new TextEncoder().encode(i):this.data=new Uint8Array(i)}ug.getBitsLength=function(e){return e*8};ug.prototype.getLength=function(){return this.data.length};ug.prototype.getBitsLength=function(){return ug.getBitsLength(this.data.length)};ug.prototype.write=function(i){for(let e=0,t=this.data.length;e<t;e++)i.put(this.data[e],8)};qz.exports=ug});var Xz=Vn((W3e,Yz)=>{"use strict";var yde=Ud(),wde=jd();function hg(i){this.mode=yde.KANJI,this.data=i}hg.getBitsLength=function(e){return e*13};hg.prototype.getLength=function(){return this.data.length};hg.prototype.getBitsLength=function(){return hg.getBitsLength(this.data.length)};hg.prototype.write=function(i){let e;for(e=0;e<this.data.length;e++){let t=wde.toSJIS(this.data[e]);if(t>=33088&&t<=40956)t-=33088;else if(t>=57408&&t<=60351)t-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);t=(t>>>8&255)*192+(t&255),i.put(t,13)}};Yz.exports=hg});var Qz=Vn((q3e,tD)=>{"use strict";var Lx={single_source_shortest_paths:function(i,e,t){var n={},r={};r[e]=0;var o=Lx.PriorityQueue.make();o.push(e,0);for(var s,a,l,c,d,h,p,g,_;!o.empty();){s=o.pop(),a=s.value,c=s.cost,d=i[a]||{};for(l in d)d.hasOwnProperty(l)&&(h=d[l],p=c+h,g=r[l],_=typeof r[l]>"u",(_||g>p)&&(r[l]=p,o.push(l,p),n[l]=a))}if(typeof t<"u"&&typeof r[t]>"u"){var b=["Could not find a path from ",e," to ",t,"."].join("");throw new Error(b)}return n},extract_shortest_path_from_predecessor_list:function(i,e){for(var t=[],n=e,r;n;)t.push(n),r=i[n],n=i[n];return t.reverse(),t},find_path:function(i,e,t){var n=Lx.single_source_shortest_paths(i,e,t);return Lx.extract_shortest_path_from_predecessor_list(n,t)},PriorityQueue:{make:function(i){var e=Lx.PriorityQueue,t={},n;i=i||{};for(n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t.queue=[],t.sorter=i.sorter||e.default_sorter,t},default_sorter:function(i,e){return i.cost-e.cost},push:function(i,e){var t={value:i,cost:e};this.queue.push(t),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};typeof tD<"u"&&(tD.exports=Lx)});var oj=Vn(fg=>{"use strict";var Ln=Ud(),ej=Gz(),tj=Wz(),nj=Kz(),ij=Xz(),Rx=XA(),N2=jd(),Mde=Qz();function Jz(i){return unescape(encodeURIComponent(i)).length}function zx(i,e,t){let n=[],r;for(;(r=i.exec(t))!==null;)n.push({data:r[0],index:r.index,mode:e,length:r[0].length});return n}function rj(i){let e=zx(Rx.NUMERIC,Ln.NUMERIC,i),t=zx(Rx.ALPHANUMERIC,Ln.ALPHANUMERIC,i),n,r;return N2.isKanjiModeEnabled()?(n=zx(Rx.BYTE,Ln.BYTE,i),r=zx(Rx.KANJI,Ln.KANJI,i)):(n=zx(Rx.BYTE_KANJI,Ln.BYTE,i),r=[]),e.concat(t,n,r).sort(function(s,a){return s.index-a.index}).map(function(s){return{data:s.data,mode:s.mode,length:s.length}})}function nD(i,e){switch(e){case Ln.NUMERIC:return ej.getBitsLength(i);case Ln.ALPHANUMERIC:return tj.getBitsLength(i);case Ln.KANJI:return ij.getBitsLength(i);case Ln.BYTE:return nj.getBitsLength(i)}}function Ede(i){return i.reduce(function(e,t){let n=e.length-1>=0?e[e.length-1]:null;return n&&n.mode===t.mode?(e[e.length-1].data+=t.data,e):(e.push(t),e)},[])}function Pde(i){let e=[];for(let t=0;t<i.length;t++){let n=i[t];switch(n.mode){case Ln.NUMERIC:e.push([n,{data:n.data,mode:Ln.ALPHANUMERIC,length:n.length},{data:n.data,mode:Ln.BYTE,length:n.length}]);break;case Ln.ALPHANUMERIC:e.push([n,{data:n.data,mode:Ln.BYTE,length:n.length}]);break;case Ln.KANJI:e.push([n,{data:n.data,mode:Ln.BYTE,length:Jz(n.data)}]);break;case Ln.BYTE:e.push([{data:n.data,mode:Ln.BYTE,length:Jz(n.data)}])}}return e}function Ode(i,e){let t={},n={start:{}},r=["start"];for(let o=0;o<i.length;o++){let s=i[o],a=[];for(let l=0;l<s.length;l++){let c=s[l],d=""+o+l;a.push(d),t[d]={node:c,lastCount:0},n[d]={};for(let h=0;h<r.length;h++){let p=r[h];t[p]&&t[p].node.mode===c.mode?(n[p][d]=nD(t[p].lastCount+c.length,c.mode)-nD(t[p].lastCount,c.mode),t[p].lastCount+=c.length):(t[p]&&(t[p].lastCount=c.length),n[p][d]=nD(c.length,c.mode)+4+Ln.getCharCountIndicator(c.mode,e))}}r=a}for(let o=0;o<r.length;o++)n[r[o]].end=0;return{map:n,table:t}}function Zz(i,e){let t,n=Ln.getBestModeForData(i);if(t=Ln.from(e,n),t!==Ln.BYTE&&t.bit<n.bit)throw new Error('"'+i+'" cannot be encoded with mode '+Ln.toString(t)+`.
 Suggested mode is: `+Ln.toString(n));switch(t===Ln.KANJI&&!N2.isKanjiModeEnabled()&&(t=Ln.BYTE),t){case Ln.NUMERIC:return new ej(i);case Ln.ALPHANUMERIC:return new tj(i);case Ln.KANJI:return new ij(i);case Ln.BYTE:return new nj(i)}}fg.fromArray=function(e){return e.reduce(function(t,n){return typeof n=="string"?t.push(Zz(n,null)):n.data&&t.push(Zz(n.data,n.mode)),t},[])};fg.fromString=function(e,t){let n=rj(e,N2.isKanjiModeEnabled()),r=Pde(n),o=Ode(r,t),s=Mde.find_path(o.map,"start","end"),a=[];for(let l=1;l<s.length-1;l++)a.push(o.table[s[l]].node);return fg.fromArray(Ede(a))};fg.rawSplit=function(e){return fg.fromArray(rj(e,N2.isKanjiModeEnabled()))}});var aj=Vn(sj=>{"use strict";var R2=jd(),iD=k2(),Sde=vz(),kde=Cz(),Ade=yz(),Dde=Ez(),sD=Pz(),aD=WA(),Fde=Dz(),L2=Rz(),Ide=Uz(),Tde=Ud(),rD=oj();function Bde(i,e){let t=i.size,n=Dde.getPositions(e);for(let r=0;r<n.length;r++){let o=n[r][0],s=n[r][1];for(let a=-1;a<=7;a++)if(!(o+a<=-1||t<=o+a))for(let l=-1;l<=7;l++)s+l<=-1||t<=s+l||(a>=0&&a<=6&&(l===0||l===6)||l>=0&&l<=6&&(a===0||a===6)||a>=2&&a<=4&&l>=2&&l<=4?i.set(o+a,s+l,!0,!0):i.set(o+a,s+l,!1,!0))}}function Nde(i){let e=i.size;for(let t=8;t<e-8;t++){let n=t%2===0;i.set(t,6,n,!0),i.set(6,t,n,!0)}}function Lde(i,e){let t=Ade.getPositions(e);for(let n=0;n<t.length;n++){let r=t[n][0],o=t[n][1];for(let s=-2;s<=2;s++)for(let a=-2;a<=2;a++)s===-2||s===2||a===-2||a===2||s===0&&a===0?i.set(r+s,o+a,!0,!0):i.set(r+s,o+a,!1,!0)}}function Rde(i,e){let t=i.size,n=L2.getEncodedBits(e),r,o,s;for(let a=0;a<18;a++)r=Math.floor(a/3),o=a%3+t-8-3,s=(n>>a&1)===1,i.set(r,o,s,!0),i.set(o,r,s,!0)}function oD(i,e,t){let n=i.size,r=Ide.getEncodedBits(e,t),o,s;for(o=0;o<15;o++)s=(r>>o&1)===1,o<6?i.set(o,8,s,!0):o<8?i.set(o+1,8,s,!0):i.set(n-15+o,8,s,!0),o<8?i.set(8,n-o-1,s,!0):o<9?i.set(8,15-o-1+1,s,!0):i.set(8,15-o-1,s,!0);i.set(n-8,8,1,!0)}function zde(i,e){let t=i.size,n=-1,r=t-1,o=7,s=0;for(let a=t-1;a>0;a-=2)for(a===6&&a--;;){for(let l=0;l<2;l++)if(!i.isReserved(r,a-l)){let c=!1;s<e.length&&(c=(e[s]>>>o&1)===1),i.set(r,a-l,c),o--,o===-1&&(s++,o=7)}if(r+=n,r<0||t<=r){r-=n,n=-n;break}}}function jde(i,e,t){let n=new Sde;t.forEach(function(l){n.put(l.mode.bit,4),n.put(l.getLength(),Tde.getCharCountIndicator(l.mode,i)),l.write(n)});let r=R2.getSymbolTotalCodewords(i),o=aD.getTotalCodewordsCount(i,e),s=(r-o)*8;for(n.getLengthInBits()+4<=s&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);let a=(s-n.getLengthInBits())/8;for(let l=0;l<a;l++)n.put(l%2?17:236,8);return Vde(n,i,e)}function Vde(i,e,t){let n=R2.getSymbolTotalCodewords(e),r=aD.getTotalCodewordsCount(e,t),o=n-r,s=aD.getBlocksCount(e,t),a=n%s,l=s-a,c=Math.floor(n/s),d=Math.floor(o/s),h=d+1,p=c-d,g=new Fde(p),_=0,b=new Array(s),C=new Array(s),y=0,M=new Uint8Array(i.buffer);for(let B=0;B<s;B++){let T=B<l?d:h;b[B]=M.slice(_,_+T),C[B]=g.encode(b[B]),_+=T,y=Math.max(y,T)}let O=new Uint8Array(n),A=0,D,N;for(D=0;D<y;D++)for(N=0;N<s;N++)D<b[N].length&&(O[A++]=b[N][D]);for(D=0;D<p;D++)for(N=0;N<s;N++)O[A++]=C[N][D];return O}function Ude(i,e,t,n){let r;if(Array.isArray(i))r=rD.fromArray(i);else if(typeof i=="string"){let c=e;if(!c){let d=rD.rawSplit(i);c=L2.getBestVersionForData(d,t)}r=rD.fromString(i,c||40)}else throw new Error("Invalid data");let o=L2.getBestVersionForData(r,t);if(!o)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=o;else if(e<o)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+o+`.
`);let s=jde(e,t,r),a=R2.getSymbolSize(e),l=new kde(a);return Bde(l,e),Nde(l),Lde(l,e),oD(l,t,0),e>=7&&Rde(l,e),zde(l,s),isNaN(n)&&(n=sD.getBestMask(l,oD.bind(null,l,t))),sD.applyMask(n,l),oD(l,t,n),{modules:l,version:e,errorCorrectionLevel:t,maskPattern:n,segments:r}}sj.create=function(e,t){if(typeof e>"u"||e==="")throw new Error("No input text");let n=iD.M,r,o;return typeof t<"u"&&(n=iD.from(t.errorCorrectionLevel,iD.M),r=L2.from(t.version),o=sD.from(t.maskPattern),t.toSJISFunc&&R2.setToSJISFunction(t.toSJISFunc)),Ude(e,r,n,o)}});var lD=Vn(T0=>{"use strict";function lj(i){if(typeof i=="number"&&(i=i.toString()),typeof i!="string")throw new Error("Color should be defined as hex string");let e=i.slice().replace("#","").split("");if(e.length<3||e.length===5||e.length>8)throw new Error("Invalid hex color: "+i);(e.length===3||e.length===4)&&(e=Array.prototype.concat.apply([],e.map(function(n){return[n,n]}))),e.length===6&&e.push("F","F");let t=parseInt(e.join(""),16);return{r:t>>24&255,g:t>>16&255,b:t>>8&255,a:t&255,hex:"#"+e.slice(0,6).join("")}}T0.getOptions=function(e){e||(e={}),e.color||(e.color={});let t=typeof e.margin>"u"||e.margin===null||e.margin<0?4:e.margin,n=e.width&&e.width>=21?e.width:void 0,r=e.scale||4;return{width:n,scale:n?4:r,margin:t,color:{dark:lj(e.color.dark||"#000000ff"),light:lj(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}};T0.getScale=function(e,t){return t.width&&t.width>=e+t.margin*2?t.width/(e+t.margin*2):t.scale};T0.getImageWidth=function(e,t){let n=T0.getScale(e,t);return Math.floor((e+t.margin*2)*n)};T0.qrToImageData=function(e,t,n){let r=t.modules.size,o=t.modules.data,s=T0.getScale(r,n),a=Math.floor((r+n.margin*2)*s),l=n.margin*s,c=[n.color.light,n.color.dark];for(let d=0;d<a;d++)for(let h=0;h<a;h++){let p=(d*a+h)*4,g=n.color.light;if(d>=l&&h>=l&&d<a-l&&h<a-l){let _=Math.floor((d-l)/s),b=Math.floor((h-l)/s);g=c[o[_*r+b]?1:0]}e[p++]=g.r,e[p++]=g.g,e[p++]=g.b,e[p]=g.a}}});var cj=Vn(z2=>{"use strict";var cD=lD();function Hde(i,e,t){i.clearRect(0,0,e.width,e.height),e.style||(e.style={}),e.height=t,e.width=t,e.style.height=t+"px",e.style.width=t+"px"}function Gde(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}z2.render=function(e,t,n){let r=n,o=t;typeof r>"u"&&(!t||!t.getContext)&&(r=t,t=void 0),t||(o=Gde()),r=cD.getOptions(r);let s=cD.getImageWidth(e.modules.size,r),a=o.getContext("2d"),l=a.createImageData(s,s);return cD.qrToImageData(l.data,e,r),Hde(a,o,s),a.putImageData(l,0,0),o};z2.renderToDataURL=function(e,t,n){let r=n;typeof r>"u"&&(!t||!t.getContext)&&(r=t,t=void 0),r||(r={});let o=z2.render(e,t,r),s=r.type||"image/png",a=r.rendererOpts||{};return o.toDataURL(s,a.quality)}});var hj=Vn(uj=>{"use strict";var $de=lD();function dj(i,e){let t=i.a/255,n=e+'="'+i.hex+'"';return t<1?n+" "+e+'-opacity="'+t.toFixed(2).slice(1)+'"':n}function dD(i,e,t){let n=i+e;return typeof t<"u"&&(n+=" "+t),n}function Wde(i,e,t){let n="",r=0,o=!1,s=0;for(let a=0;a<i.length;a++){let l=Math.floor(a%e),c=Math.floor(a/e);!l&&!o&&(o=!0),i[a]?(s++,a>0&&l>0&&i[a-1]||(n+=o?dD("M",l+t,.5+c+t):dD("m",r,0),r=0,o=!1),l+1<e&&i[a+1]||(n+=dD("h",s),s=0)):r++}return n}uj.render=function(e,t,n){let r=$de.getOptions(t),o=e.modules.size,s=e.modules.data,a=o+r.margin*2,l=r.color.light.a?"<path "+dj(r.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",c="<path "+dj(r.color.dark,"stroke")+' d="'+Wde(s,o,r.margin)+'"/>',d='viewBox="0 0 '+a+" "+a+'"',p='<svg xmlns="http://www.w3.org/2000/svg" '+(r.width?'width="'+r.width+'" height="'+r.width+'" ':"")+d+' shape-rendering="crispEdges">'+l+c+`</svg>
`;return typeof n=="function"&&n(null,p),p}});var fD=Vn(jx=>{"use strict";var qde=mz(),uD=aj(),fj=cj(),Kde=hj();function hD(i,e,t,n,r){let o=[].slice.call(arguments,1),s=o.length,a=typeof o[s-1]=="function";if(!a&&!qde())throw new Error("Callback required as last argument");if(a){if(s<2)throw new Error("Too few arguments provided");s===2?(r=t,t=e,e=n=void 0):s===3&&(e.getContext&&typeof r>"u"?(r=n,n=void 0):(r=n,n=t,t=e,e=void 0))}else{if(s<1)throw new Error("Too few arguments provided");return s===1?(t=e,e=n=void 0):s===2&&!e.getContext&&(n=t,t=e,e=void 0),new Promise(function(l,c){try{let d=uD.create(t,n);l(i(d,e,n))}catch(d){c(d)}})}try{let l=uD.create(t,n);r(null,i(l,e,n))}catch(l){r(l)}}jx.create=uD.create;jx.toCanvas=hD.bind(null,fj.render);jx.toDataURL=hD.bind(null,fj.renderToDataURL);jx.toString=hD.bind(null,function(i,e,t){return Kde.render(i,t)})});function uM(i,e){return Object.is(i,e)}var hr=null,o_=!1,hM=1,Ss=Symbol("SIGNAL");function dn(i){let e=hr;return hr=i,e}function fM(){return hr}var dp={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function up(i){if(o_)throw new Error("");if(hr===null)return;hr.consumerOnSignalRead(i);let e=hr.nextProducerIndex++;if(c_(hr),e<hr.producerNode.length&&hr.producerNode[e]!==i&&cp(hr)){let t=hr.producerNode[e];l_(t,hr.producerIndexOfThis[e])}hr.producerNode[e]!==i&&(hr.producerNode[e]=i,hr.producerIndexOfThis[e]=cp(hr)?L4(i,hr,e):0),hr.producerLastReadVersion[e]=i.version}function N4(){hM++}function gM(i){if(!(cp(i)&&!i.dirty)&&!(!i.dirty&&i.lastCleanEpoch===hM)){if(!i.producerMustRecompute(i)&&!_M(i)){dM(i);return}i.producerRecomputeValue(i),dM(i)}}function pM(i){if(i.liveConsumerNode===void 0)return;let e=o_;o_=!0;try{for(let t of i.liveConsumerNode)t.dirty||hG(t)}finally{o_=e}}function mM(){return hr?.consumerAllowSignalWrites!==!1}function hG(i){i.dirty=!0,pM(i),i.consumerMarkedDirty?.(i)}function dM(i){i.dirty=!1,i.lastCleanEpoch=hM}function a_(i){return i&&(i.nextProducerIndex=0),dn(i)}function xM(i,e){if(dn(e),!(!i||i.producerNode===void 0||i.producerIndexOfThis===void 0||i.producerLastReadVersion===void 0)){if(cp(i))for(let t=i.nextProducerIndex;t<i.producerNode.length;t++)l_(i.producerNode[t],i.producerIndexOfThis[t]);for(;i.producerNode.length>i.nextProducerIndex;)i.producerNode.pop(),i.producerLastReadVersion.pop(),i.producerIndexOfThis.pop()}}function _M(i){c_(i);for(let e=0;e<i.producerNode.length;e++){let t=i.producerNode[e],n=i.producerLastReadVersion[e];if(n!==t.version||(gM(t),n!==t.version))return!0}return!1}function vM(i){if(c_(i),cp(i))for(let e=0;e<i.producerNode.length;e++)l_(i.producerNode[e],i.producerIndexOfThis[e]);i.producerNode.length=i.producerLastReadVersion.length=i.producerIndexOfThis.length=0,i.liveConsumerNode&&(i.liveConsumerNode.length=i.liveConsumerIndexOfThis.length=0)}function L4(i,e,t){if(R4(i),i.liveConsumerNode.length===0&&z4(i))for(let n=0;n<i.producerNode.length;n++)i.producerIndexOfThis[n]=L4(i.producerNode[n],i,n);return i.liveConsumerIndexOfThis.push(t),i.liveConsumerNode.push(e)-1}function l_(i,e){if(R4(i),i.liveConsumerNode.length===1&&z4(i))for(let n=0;n<i.producerNode.length;n++)l_(i.producerNode[n],i.producerIndexOfThis[n]);let t=i.liveConsumerNode.length-1;if(i.liveConsumerNode[e]=i.liveConsumerNode[t],i.liveConsumerIndexOfThis[e]=i.liveConsumerIndexOfThis[t],i.liveConsumerNode.length--,i.liveConsumerIndexOfThis.length--,e<i.liveConsumerNode.length){let n=i.liveConsumerIndexOfThis[e],r=i.liveConsumerNode[e];c_(r),r.producerIndexOfThis[n]=e}}function cp(i){return i.consumerIsAlwaysLive||(i?.liveConsumerNode?.length??0)>0}function c_(i){i.producerNode??=[],i.producerIndexOfThis??=[],i.producerLastReadVersion??=[]}function R4(i){i.liveConsumerNode??=[],i.liveConsumerIndexOfThis??=[]}function z4(i){return i.producerNode!==void 0}function bM(i,e){let t=Object.create(fG);t.computation=i,e!==void 0&&(t.equal=e);let n=()=>{if(gM(t),up(t),t.value===s_)throw t.error;return t.value};return n[Ss]=t,n}var lM=Symbol("UNSET"),cM=Symbol("COMPUTING"),s_=Symbol("ERRORED"),fG=ot(Ie({},dp),{value:lM,dirty:!0,error:null,equal:uM,kind:"computed",producerMustRecompute(i){return i.value===lM||i.value===cM},producerRecomputeValue(i){if(i.value===cM)throw new Error("Detected cycle in computations.");let e=i.value;i.value=cM;let t=a_(i),n,r=!1;try{n=i.computation(),dn(null),r=e!==lM&&e!==s_&&n!==s_&&i.equal(e,n)}catch(o){n=s_,i.error=o}finally{xM(i,t)}if(r){i.value=e;return}i.value=n,i.version++}});function gG(){throw new Error}var j4=gG;function V4(i){j4(i)}function CM(i){j4=i}var pG=null;function yM(i,e){let t=Object.create(d_);t.value=i,e!==void 0&&(t.equal=e);let n=()=>(up(t),t.value);return n[Ss]=t,n}function hp(i,e){mM()||V4(i),i.equal(i.value,e)||(i.value=e,mG(i))}function wM(i,e){mM()||V4(i),hp(i,e(i.value))}var d_=ot(Ie({},dp),{equal:uM,value:void 0,kind:"signal"});function mG(i){i.version++,N4(),pM(i),pG?.()}function MM(i){let e=dn(null);try{return i()}finally{dn(e)}}var EM;function fp(){return EM}function ql(i){let e=EM;return EM=i,e}var u_=Symbol("NotFound");function $t(i){return typeof i=="function"}function wh(i){let t=i(n=>{Error.call(n),n.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var h_=wh(i=>function(t){i(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((n,r)=>`${r+1}) ${n.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function gp(i,e){if(i){let t=i.indexOf(e);0<=t&&i.splice(t,1)}}var er=class i{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:n}=this;if($t(n))try{n()}catch(o){e=o instanceof h_?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{U4(o)}catch(s){e=e??[],s instanceof h_?e=[...e,...s.errors]:e.push(s)}}if(e)throw new h_(e)}}add(e){var t;if(e&&e!==this)if(this.closed)U4(e);else{if(e instanceof i){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&gp(t,e)}remove(e){let{_finalizers:t}=this;t&&gp(t,e),e instanceof i&&e._removeParent(this)}};er.EMPTY=(()=>{let i=new er;return i.closed=!0,i})();var PM=er.EMPTY;function f_(i){return i instanceof er||i&&"closed"in i&&$t(i.remove)&&$t(i.add)&&$t(i.unsubscribe)}function U4(i){$t(i)?i():i.unsubscribe()}var ia={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Mh={setTimeout(i,e,...t){let{delegate:n}=Mh;return n?.setTimeout?n.setTimeout(i,e,...t):setTimeout(i,e,...t)},clearTimeout(i){let{delegate:e}=Mh;return(e?.clearTimeout||clearTimeout)(i)},delegate:void 0};function g_(i){Mh.setTimeout(()=>{let{onUnhandledError:e}=ia;if(e)e(i);else throw i})}function pp(){}var H4=OM("C",void 0,void 0);function G4(i){return OM("E",void 0,i)}function $4(i){return OM("N",i,void 0)}function OM(i,e,t){return{kind:i,value:e,error:t}}var pu=null;function Eh(i){if(ia.useDeprecatedSynchronousErrorHandling){let e=!pu;if(e&&(pu={errorThrown:!1,error:null}),i(),e){let{errorThrown:t,error:n}=pu;if(pu=null,t)throw n}}else i()}function W4(i){ia.useDeprecatedSynchronousErrorHandling&&pu&&(pu.errorThrown=!0,pu.error=i)}var mu=class extends er{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,f_(e)&&e.add(this)):this.destination=yG}static create(e,t,n){return new Ph(e,t,n)}next(e){this.isStopped?kM($4(e),this):this._next(e)}error(e){this.isStopped?kM(G4(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?kM(H4,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},bG=Function.prototype.bind;function SM(i,e){return bG.call(i,e)}var AM=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(n){p_(n)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(n){p_(n)}else p_(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){p_(t)}}},Ph=class extends mu{constructor(e,t,n){super();let r;if($t(e)||!e)r={next:e??void 0,error:t??void 0,complete:n??void 0};else{let o;this&&ia.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&SM(e.next,o),error:e.error&&SM(e.error,o),complete:e.complete&&SM(e.complete,o)}):r=e}this.destination=new AM(r)}};function p_(i){ia.useDeprecatedSynchronousErrorHandling?W4(i):g_(i)}function CG(i){throw i}function kM(i,e){let{onStoppedNotification:t}=ia;t&&Mh.setTimeout(()=>t(i,e))}var yG={closed:!0,next:pp,error:CG,complete:pp};var Oh=typeof Symbol=="function"&&Symbol.observable||"@@observable";function es(i){return i}function DM(...i){return FM(i)}function FM(i){return i.length===0?es:i.length===1?i[0]:function(t){return i.reduce((n,r)=>r(n),t)}}var wn=(()=>{class i{constructor(t){t&&(this._subscribe=t)}lift(t){let n=new i;return n.source=this,n.operator=t,n}subscribe(t,n,r){let o=MG(t)?t:new Ph(t,n,r);return Eh(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(n){t.error(n)}}forEach(t,n){return n=q4(n),new n((r,o)=>{let s=new Ph({next:a=>{try{t(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(t){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(t)}[Oh](){return this}pipe(...t){return FM(t)(this)}toPromise(t){return t=q4(t),new t((n,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>n(o))})}}return i.create=e=>new i(e),i})();function q4(i){var e;return(e=i??ia.Promise)!==null&&e!==void 0?e:Promise}function wG(i){return i&&$t(i.next)&&$t(i.error)&&$t(i.complete)}function MG(i){return i&&i instanceof mu||wG(i)&&f_(i)}function IM(i){return $t(i?.lift)}function _n(i){return e=>{if(IM(e))return e.lift(function(t){try{return i(t,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function un(i,e,t,n,r){return new TM(i,e,t,n,r)}var TM=class extends mu{constructor(e,t,n,r,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=n?function(){try{n()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Sh(){return _n((i,e)=>{let t=null;i._refCount++;let n=un(e,void 0,void 0,void 0,()=>{if(!i||i._refCount<=0||0<--i._refCount){t=null;return}let r=i._connection,o=t;t=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});i.subscribe(n),n.closed||(t=i.connect())})}var kh=class extends wn{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,IM(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new er;let t=this.getSubject();e.add(this.source.subscribe(un(t,void 0,()=>{this._teardown(),t.complete()},n=>{this._teardown(),t.error(n)},()=>this._teardown()))),e.closed&&(this._connection=null,e=er.EMPTY)}return e}refCount(){return Sh()(this)}};var K4=wh(i=>function(){i(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Pn=(()=>{class i extends wn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let n=new m_(this,this);return n.operator=t,n}_throwIfClosed(){if(this.closed)throw new K4}next(t){Eh(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let n of this.currentObservers)n.next(t)}})}error(t){Eh(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:n}=this;for(;n.length;)n.shift().error(t)}})}complete(){Eh(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:n,isStopped:r,observers:o}=this;return n||r?PM:(this.currentObservers=null,o.push(t),new er(()=>{this.currentObservers=null,gp(o,t)}))}_checkFinalizedStatuses(t){let{hasError:n,thrownError:r,isStopped:o}=this;n?t.error(r):o&&t.complete()}asObservable(){let t=new wn;return t.source=this,t}}return i.create=(e,t)=>new m_(e,t),i})(),m_=class extends Pn{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.next)===null||n===void 0||n.call(t,e)}error(e){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.error)===null||n===void 0||n.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,n;return(n=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&n!==void 0?n:PM}};var fr=class extends Pn{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:n}=this;if(e)throw t;return this._throwIfClosed(),n}next(e){super.next(this._value=e)}};var yo=new wn(i=>i.complete());function Y4(i){return i&&$t(i.schedule)}function X4(i){return i[i.length-1]}function x_(i){return $t(X4(i))?i.pop():void 0}function Zc(i){return Y4(X4(i))?i.pop():void 0}function J4(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})}function Q4(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],n=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function xu(i){return this instanceof xu?(this.v=i,this):new xu(i)}function Z4(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(i,e||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(g){return function(_){return Promise.resolve(_).then(g,h)}}function a(g,_){n[g]&&(r[g]=function(b){return new Promise(function(C,y){o.push([g,b,C,y])>1||l(g,b)})},_&&(r[g]=_(r[g])))}function l(g,_){try{c(n[g](_))}catch(b){p(o[0][3],b)}}function c(g){g.value instanceof xu?Promise.resolve(g.value.v).then(d,h):p(o[0][2],g)}function d(g){l("next",g)}function h(g){l("throw",g)}function p(g,_){g(_),o.shift(),o.length&&l(o[0][0],o[0][1])}}function e6(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof Q4=="function"?Q4(i):i[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(o){t[o]=i[o]&&function(s){return new Promise(function(a,l){s=i[o](s),r(a,l,s.done,s.value)})}}function r(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}}var __=i=>i&&typeof i.length=="number"&&typeof i!="function";function v_(i){return $t(i?.then)}function b_(i){return $t(i[Oh])}function C_(i){return Symbol.asyncIterator&&$t(i?.[Symbol.asyncIterator])}function y_(i){return new TypeError(`You provided ${i!==null&&typeof i=="object"?"an invalid object":`'${i}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function EG(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var w_=EG();function M_(i){return $t(i?.[w_])}function E_(i){return Z4(this,arguments,function*(){let t=i.getReader();try{for(;;){let{value:n,done:r}=yield xu(t.read());if(r)return yield xu(void 0);yield yield xu(n)}}finally{t.releaseLock()}})}function P_(i){return $t(i?.getReader)}function tr(i){if(i instanceof wn)return i;if(i!=null){if(b_(i))return PG(i);if(__(i))return OG(i);if(v_(i))return SG(i);if(C_(i))return t6(i);if(M_(i))return kG(i);if(P_(i))return AG(i)}throw y_(i)}function PG(i){return new wn(e=>{let t=i[Oh]();if($t(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function OG(i){return new wn(e=>{for(let t=0;t<i.length&&!e.closed;t++)e.next(i[t]);e.complete()})}function SG(i){return new wn(e=>{i.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,g_)})}function kG(i){return new wn(e=>{for(let t of i)if(e.next(t),e.closed)return;e.complete()})}function t6(i){return new wn(e=>{DG(i,e).catch(t=>e.error(t))})}function AG(i){return t6(E_(i))}function DG(i,e){var t,n,r,o;return J4(this,void 0,void 0,function*(){try{for(t=e6(i);n=yield t.next(),!n.done;){let s=n.value;if(e.next(s),e.closed)return}}catch(s){r={error:s}}finally{try{n&&!n.done&&(o=t.return)&&(yield o.call(t))}finally{if(r)throw r.error}}e.complete()})}function wo(i,e,t,n=0,r=!1){let o=e.schedule(function(){t(),r?i.add(this.schedule(null,n)):this.unsubscribe()},n);if(i.add(o),!r)return o}function O_(i,e=0){return _n((t,n)=>{t.subscribe(un(n,r=>wo(n,i,()=>n.next(r),e),()=>wo(n,i,()=>n.complete(),e),r=>wo(n,i,()=>n.error(r),e)))})}function S_(i,e=0){return _n((t,n)=>{n.add(i.schedule(()=>t.subscribe(n),e))})}function n6(i,e){return tr(i).pipe(S_(e),O_(e))}function i6(i,e){return tr(i).pipe(S_(e),O_(e))}function r6(i,e){return new wn(t=>{let n=0;return e.schedule(function(){n===i.length?t.complete():(t.next(i[n++]),t.closed||this.schedule())})})}function o6(i,e){return new wn(t=>{let n;return wo(t,e,()=>{n=i[w_](),wo(t,e,()=>{let r,o;try{({value:r,done:o}=n.next())}catch(s){t.error(s);return}o?t.complete():t.next(r)},0,!0)}),()=>$t(n?.return)&&n.return()})}function k_(i,e){if(!i)throw new Error("Iterable cannot be null");return new wn(t=>{wo(t,e,()=>{let n=i[Symbol.asyncIterator]();wo(t,e,()=>{n.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function s6(i,e){return k_(E_(i),e)}function a6(i,e){if(i!=null){if(b_(i))return n6(i,e);if(__(i))return r6(i,e);if(v_(i))return i6(i,e);if(C_(i))return k_(i,e);if(M_(i))return o6(i,e);if(P_(i))return s6(i,e)}throw y_(i)}function oi(i,e){return e?a6(i,e):tr(i)}function At(...i){let e=Zc(i);return oi(i,e)}function Ah(i,e){let t=$t(i)?i:()=>i,n=r=>r.error(t());return new wn(e?r=>e.schedule(n,0,r):n)}function BM(i){return!!i&&(i instanceof wn||$t(i.lift)&&$t(i.subscribe))}var Kl=wh(i=>function(){i(this),this.name="EmptyError",this.message="no elements in sequence"});function Jt(i,e){return _n((t,n)=>{let r=0;t.subscribe(un(n,o=>{n.next(i.call(e,o,r++))}))})}var{isArray:FG}=Array;function IG(i,e){return FG(e)?i(...e):i(e)}function A_(i){return Jt(e=>IG(i,e))}var{isArray:TG}=Array,{getPrototypeOf:BG,prototype:NG,keys:LG}=Object;function D_(i){if(i.length===1){let e=i[0];if(TG(e))return{args:e,keys:null};if(RG(e)){let t=LG(e);return{args:t.map(n=>e[n]),keys:t}}}return{args:i,keys:null}}function RG(i){return i&&typeof i=="object"&&BG(i)===NG}function F_(i,e){return i.reduce((t,n,r)=>(t[n]=e[r],t),{})}function mp(...i){let e=Zc(i),t=x_(i),{args:n,keys:r}=D_(i);if(n.length===0)return oi([],e);let o=new wn(zG(n,e,r?s=>F_(r,s):es));return t?o.pipe(A_(t)):o}function zG(i,e,t=es){return n=>{l6(e,()=>{let{length:r}=i,o=new Array(r),s=r,a=r;for(let l=0;l<r;l++)l6(e,()=>{let c=oi(i[l],e),d=!1;c.subscribe(un(n,h=>{o[l]=h,d||(d=!0,a--),a||n.next(t(o.slice()))},()=>{--s||n.complete()}))},n)},n)}}function l6(i,e,t){i?wo(t,i,e):e()}function c6(i,e,t,n,r,o,s,a){let l=[],c=0,d=0,h=!1,p=()=>{h&&!l.length&&!c&&e.complete()},g=b=>c<n?_(b):l.push(b),_=b=>{o&&e.next(b),c++;let C=!1;tr(t(b,d++)).subscribe(un(e,y=>{r?.(y),o?g(y):e.next(y)},()=>{C=!0},void 0,()=>{if(C)try{for(c--;l.length&&c<n;){let y=l.shift();s?wo(e,s,()=>_(y)):_(y)}p()}catch(y){e.error(y)}}))};return i.subscribe(un(e,g,()=>{h=!0,p()})),()=>{a?.()}}function Vi(i,e,t=1/0){return $t(e)?Vi((n,r)=>Jt((o,s)=>e(n,o,r,s))(tr(i(n,r))),t):(typeof e=="number"&&(t=e),_n((n,r)=>c6(n,r,i,t)))}function Dh(i=1/0){return Vi(es,i)}function d6(){return Dh(1)}function Fh(...i){return d6()(oi(i,Zc(i)))}function I_(i){return new wn(e=>{tr(i()).subscribe(e)})}function NM(...i){let e=x_(i),{args:t,keys:n}=D_(i),r=new wn(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),l=s,c=s;for(let d=0;d<s;d++){let h=!1;tr(t[d]).subscribe(un(o,p=>{h||(h=!0,c--),a[d]=p},()=>l--,void 0,()=>{(!l||!h)&&(c||o.next(n?F_(n,a):a),o.complete())}))}});return e?r.pipe(A_(e)):r}function gr(i,e){return _n((t,n)=>{let r=0;t.subscribe(un(n,o=>i.call(e,o,r++)&&n.next(o)))})}function Yl(i){return _n((e,t)=>{let n=null,r=!1,o;n=e.subscribe(un(t,void 0,void 0,s=>{o=tr(i(s,Yl(i)(e))),n?(n.unsubscribe(),n=null,o.subscribe(t)):r=!0})),r&&(n.unsubscribe(),n=null,o.subscribe(t))})}function u6(i,e,t,n,r){return(o,s)=>{let a=t,l=e,c=0;o.subscribe(un(s,d=>{let h=c++;l=a?i(l,d,h):(a=!0,d),n&&s.next(l)},r&&(()=>{a&&s.next(l),s.complete()})))}}function Ka(i,e){return $t(e)?Vi(i,e,1):Vi(i,1)}function ed(i){return _n((e,t)=>{let n=!1;e.subscribe(un(t,r=>{n=!0,t.next(r)},()=>{n||t.next(i),t.complete()}))})}function Xl(i){return i<=0?()=>yo:_n((e,t)=>{let n=0;e.subscribe(un(t,r=>{++n<=i&&(t.next(r),i<=n&&t.complete())}))})}function T_(i=jG){return _n((e,t)=>{let n=!1;e.subscribe(un(t,r=>{n=!0,t.next(r)},()=>n?t.complete():t.error(i())))})}function jG(){return new Kl}function td(i){return _n((e,t)=>{try{e.subscribe(t)}finally{t.add(i)}})}function Ql(i,e){let t=arguments.length>=2;return n=>n.pipe(i?gr((r,o)=>i(r,o,n)):es,Xl(1),t?ed(e):T_(()=>new Kl))}function Ih(i){return i<=0?()=>yo:_n((e,t)=>{let n=[];e.subscribe(un(t,r=>{n.push(r),i<n.length&&n.shift()},()=>{for(let r of n)t.next(r);t.complete()},void 0,()=>{n=null}))})}function LM(i,e){let t=arguments.length>=2;return n=>n.pipe(i?gr((r,o)=>i(r,o,n)):es,Ih(1),t?ed(e):T_(()=>new Kl))}function RM(i,e){return _n(u6(i,e,arguments.length>=2,!0))}function zM(...i){let e=Zc(i);return _n((t,n)=>{(e?Fh(i,t,e):Fh(i,t)).subscribe(n)})}function Mo(i,e){return _n((t,n)=>{let r=null,o=0,s=!1,a=()=>s&&!r&&n.complete();t.subscribe(un(n,l=>{r?.unsubscribe();let c=0,d=o++;tr(i(l,d)).subscribe(r=un(n,h=>n.next(e?e(l,h,d,c++):h),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function B_(i){return _n((e,t)=>{tr(i).subscribe(un(t,()=>t.complete(),pp)),!t.closed&&e.subscribe(t)})}function Dr(i,e,t){let n=$t(i)||e||t?{next:i,error:e,complete:t}:i;return n?_n((r,o)=>{var s;(s=n.subscribe)===null||s===void 0||s.call(n);let a=!0;r.subscribe(un(o,l=>{var c;(c=n.next)===null||c===void 0||c.call(n,l),o.next(l)},()=>{var l;a=!1,(l=n.complete)===null||l===void 0||l.call(n),o.complete()},l=>{var c;a=!1,(c=n.error)===null||c===void 0||c.call(n,l),o.error(l)},()=>{var l,c;a&&((l=n.unsubscribe)===null||l===void 0||l.call(n)),(c=n.finalize)===null||c===void 0||c.call(n)}))}):es}var r9="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",je=class extends Error{code;constructor(e,t){super(nP(e,t)),this.code=e}};function VG(i){return`NG0${Math.abs(i)}`}function nP(i,e){return`${VG(i)}${e?": "+e:""}`}var o9=Symbol("InputSignalNode#UNSET"),UG=ot(Ie({},d_),{transformFn:void 0,applyValueToInputSignal(i,e){hp(i,e)}});function s9(i,e){let t=Object.create(UG);t.value=i,t.transformFn=e?.transform;function n(){if(up(t),t.value===o9){let r=null;throw new je(-950,r)}return t.value}return n[Ss]=t,n}function Sp(i){return{toString:i}.toString()}var N_="__parameters__";function HG(i){return function(...t){if(i){let n=i(...t);for(let r in n)this[r]=n[r]}}}function a9(i,e,t){return Sp(()=>{let n=HG(e);function r(...o){if(this instanceof r)return n.apply(this,o),this;let s=new r(...o);return a.annotation=s,a;function a(l,c,d){let h=l.hasOwnProperty(N_)?l[N_]:Object.defineProperty(l,N_,{value:[]})[N_];for(;h.length<=d;)h.push(null);return(h[d]=h[d]||[]).push(s),l}}return r.prototype.ngMetadataName=i,r.annotationCls=r,r})}var Mr=globalThis;function Zn(i){for(let e in i)if(i[e]===Zn)return e;throw Error("Could not find renamed property on target object.")}function GG(i,e){for(let t in e)e.hasOwnProperty(t)&&!i.hasOwnProperty(t)&&(i[t]=e[t])}function Oo(i){if(typeof i=="string")return i;if(Array.isArray(i))return`[${i.map(Oo).join(", ")}]`;if(i==null)return""+i;let e=i.overriddenName||i.name;if(e)return`${e}`;let t=i.toString();if(t==null)return""+t;let n=t.indexOf(`
`);return n>=0?t.slice(0,n):t}function eE(i,e){return i?e?`${i} ${e}`:i:e||""}var $G=Zn({__forward_ref__:Zn});function Vr(i){return i.__forward_ref__=Vr,i.toString=function(){return Oo(this())},i}function ro(i){return l9(i)?i():i}function l9(i){return typeof i=="function"&&i.hasOwnProperty($G)&&i.__forward_ref__===Vr}function tt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function vn(i){return{providers:i.providers||[],imports:i.imports||[]}}function bv(i){return h6(i,d9)||h6(i,u9)}function c9(i){return bv(i)!==null}function h6(i,e){return i.hasOwnProperty(e)?i[e]:null}function WG(i){let e=i&&(i[d9]||i[u9]);return e||null}function f6(i){return i&&(i.hasOwnProperty(g6)||i.hasOwnProperty(qG))?i[g6]:null}var d9=Zn({\u0275prov:Zn}),g6=Zn({\u0275inj:Zn}),u9=Zn({ngInjectableDef:Zn}),qG=Zn({ngInjectorDef:Zn}),Ze=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=tt({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function h9(i){return i&&!!i.\u0275providers}var KG=Zn({\u0275cmp:Zn}),YG=Zn({\u0275dir:Zn}),XG=Zn({\u0275pipe:Zn}),QG=Zn({\u0275mod:Zn}),q_=Zn({\u0275fac:Zn}),bp=Zn({__NG_ELEMENT_ID__:Zn}),p6=Zn({__NG_ENV_ID__:Zn});function Cu(i){return typeof i=="string"?i:i==null?"":String(i)}function JG(i){return typeof i=="function"?i.name||i.toString():typeof i=="object"&&i!=null&&typeof i.type=="function"?i.type.name||i.type.toString():Cu(i)}function f9(i,e){throw new je(-200,i)}function iP(i,e){throw new je(-201,!1)}var Yt=function(i){return i[i.Default=0]="Default",i[i.Host=1]="Host",i[i.Self=2]="Self",i[i.SkipSelf=4]="SkipSelf",i[i.Optional=8]="Optional",i}(Yt||{}),tE;function g9(){return tE}function Eo(i){let e=tE;return tE=i,e}function p9(i,e,t){let n=bv(i);if(n&&n.providedIn=="root")return n.value===void 0?n.value=n.factory():n.value;if(t&Yt.Optional)return null;if(e!==void 0)return e;iP(i,"Injector")}var ZG={},vu=ZG,nE="__NG_DI_FLAG__",K_=class{injector;constructor(e){this.injector=e}retrieve(e,t){let n=t;return this.injector.get(e,n.optional?u_:vu,n)}},Y_="ngTempTokenPath",e$="ngTokenPath",t$=/\n/gm,n$="\u0275",m6="__source";function i$(i,e=Yt.Default){if(fp()===void 0)throw new je(-203,!1);if(fp()===null)return p9(i,void 0,e);{let t=fp(),n;return t instanceof K_?n=t.injector:n=t,n.get(i,e&Yt.Optional?null:void 0,e)}}function ht(i,e=Yt.Default){return(g9()||i$)(ro(i),e)}function $e(i,e=Yt.Default){return ht(i,Cv(e))}function Cv(i){return typeof i>"u"||typeof i=="number"?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function iE(i){let e=[];for(let t=0;t<i.length;t++){let n=ro(i[t]);if(Array.isArray(n)){if(n.length===0)throw new je(900,!1);let r,o=Yt.Default;for(let s=0;s<n.length;s++){let a=n[s],l=r$(a);typeof l=="number"?l===-1?r=a.token:o|=l:r=a}e.push(ht(r,o))}else e.push(ht(n))}return e}function m9(i,e){return i[nE]=e,i.prototype[nE]=e,i}function r$(i){return i[nE]}function o$(i,e,t,n){let r=i[Y_];throw e[m6]&&r.unshift(e[m6]),i.message=s$(`
`+i.message,r,t,n),i[e$]=r,i[Y_]=null,i}function s$(i,e,t,n=null){i=i&&i.charAt(0)===`
`&&i.charAt(1)==n$?i.slice(2):i;let r=Oo(e);if(Array.isArray(e))r=e.map(Oo).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Oo(a)))}r=`{${o.join(", ")}}`}return`${t}${n?"("+n+")":""}[${r}]: ${i.replace(t$,`
  `)}`}var x9=m9(a9("Optional"),8);var a$=m9(a9("SkipSelf"),4);function yu(i,e){let t=i.hasOwnProperty(q_);return t?i[q_]:null}function l$(i,e,t){if(i.length!==e.length)return!1;for(let n=0;n<i.length;n++){let r=i[n],o=e[n];if(t&&(r=t(r),o=t(o)),o!==r)return!1}return!0}function c$(i){return i.flat(Number.POSITIVE_INFINITY)}function rP(i,e){i.forEach(t=>Array.isArray(t)?rP(t,e):e(t))}function _9(i,e,t){e>=i.length?i.push(t):i.splice(e,0,t)}function X_(i,e){return e>=i.length-1?i.pop():i.splice(e,1)[0]}function d$(i,e,t,n){let r=i.length;if(r==e)i.push(t,n);else if(r===1)i.push(n,i[0]),i[0]=t;else{for(r--,i.push(i[r-1],i[r]);r>e;){let o=r-2;i[r]=i[o],r--}i[e]=t,i[e+1]=n}}function yv(i,e,t){let n=kp(i,e);return n>=0?i[n|1]=t:(n=~n,d$(i,n,e,t)),n}function jM(i,e){let t=kp(i,e);if(t>=0)return i[t|1]}function kp(i,e){return u$(i,e,1)}function u$(i,e,t){let n=0,r=i.length>>t;for(;r!==n;){let o=n+(r-n>>1),s=i[o<<t];if(e===s)return o<<t;s>e?r=o:n=o+1}return~(r<<t)}var wu={},Po=[],jh=new Ze(""),v9=new Ze("",-1),b9=new Ze(""),Q_=class{get(e,t=vu){if(t===vu){let n=new Error(`NullInjectorError: No provider for ${Oo(e)}!`);throw n.name="NullInjectorError",n}return t}};function C9(i,e){let t=i[QG]||null;if(!t&&e===!0)throw new Error(`Type ${Oo(i)} does not have '\u0275mod' property.`);return t}function Mu(i){return i[KG]||null}function h$(i){return i[YG]||null}function f$(i){return i[XG]||null}function od(i){return{\u0275providers:i}}function g$(...i){return{\u0275providers:y9(!0,i),\u0275fromNgModule:!0}}function y9(i,...e){let t=[],n=new Set,r,o=s=>{t.push(s)};return rP(e,s=>{let a=s;rE(a,o,[],n)&&(r||=[],r.push(a))}),r!==void 0&&w9(r,o),t}function w9(i,e){for(let t=0;t<i.length;t++){let{ngModule:n,providers:r}=i[t];oP(r,o=>{e(o,n)})}}function rE(i,e,t,n){if(i=ro(i),!i)return!1;let r=null,o=f6(i),s=!o&&Mu(i);if(!o&&!s){let l=i.ngModule;if(o=f6(l),o)r=l;else return!1}else{if(s&&!s.standalone)return!1;r=i}let a=n.has(r);if(s){if(a)return!1;if(n.add(r),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let c of l)rE(c,e,t,n)}}else if(o){if(o.imports!=null&&!a){n.add(r);let c;try{rP(o.imports,d=>{rE(d,e,t,n)&&(c||=[],c.push(d))})}finally{}c!==void 0&&w9(c,e)}if(!a){let c=yu(r)||(()=>new r);e({provide:r,useFactory:c,deps:Po},r),e({provide:b9,useValue:r,multi:!0},r),e({provide:jh,useValue:()=>ht(r),multi:!0},r)}let l=o.providers;if(l!=null&&!a){let c=i;oP(l,d=>{e(d,c)})}}else return!1;return r!==i&&i.providers!==void 0}function oP(i,e){for(let t of i)h9(t)&&(t=t.\u0275providers),Array.isArray(t)?oP(t,e):e(t)}var p$=Zn({provide:String,useValue:Zn});function M9(i){return i!==null&&typeof i=="object"&&p$ in i}function m$(i){return!!(i&&i.useExisting)}function x$(i){return!!(i&&i.useFactory)}function Vh(i){return typeof i=="function"}function _$(i){return!!i.useClass}var wv=new Ze(""),U_={},x6={},VM;function sP(){return VM===void 0&&(VM=new Q_),VM}var zr=class{},yp=class extends zr{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,n,r){super(),this.parent=t,this.source=n,this.scopes=r,sE(e,s=>this.processProvider(s)),this.records.set(v9,Th(void 0,this)),r.has("environment")&&this.records.set(zr,Th(void 0,this));let o=this.records.get(wv);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(b9,Po,Yt.Self))}retrieve(e,t){let n=t;return this.get(e,n.optional?u_:vu,n)}destroy(){_p(this),this._destroyed=!0;let e=dn(null);try{for(let n of this._ngOnDestroyHooks)n.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let n of t)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),dn(e)}}onDestroy(e){return _p(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){_p(this);let t=ql(this),n=Eo(void 0),r;try{return e()}finally{ql(t),Eo(n)}}get(e,t=vu,n=Yt.Default){if(_p(this),e.hasOwnProperty(p6))return e[p6](this);n=Cv(n);let r,o=ql(this),s=Eo(void 0);try{if(!(n&Yt.SkipSelf)){let l=this.records.get(e);if(l===void 0){let c=w$(e)&&bv(e);c&&this.injectableDefInScope(c)?l=Th(oE(e),U_):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,n)}let a=n&Yt.Self?sP():this.parent;return t=n&Yt.Optional&&t===vu?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Y_]=a[Y_]||[]).unshift(Oo(e)),o)throw a;return o$(a,e,"R3InjectorError",this.source)}else throw a}finally{Eo(s),ql(o)}}resolveInjectorInitializers(){let e=dn(null),t=ql(this),n=Eo(void 0),r;try{let o=this.get(jh,Po,Yt.Self);for(let s of o)s()}finally{ql(t),Eo(n),dn(e)}}toString(){let e=[],t=this.records;for(let n of t.keys())e.push(Oo(n));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=ro(e);let t=Vh(e)?e:ro(e&&e.provide),n=b$(e);if(!Vh(e)&&e.multi===!0){let r=this.records.get(t);r||(r=Th(void 0,U_,!0),r.factory=()=>iE(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,n)}hydrate(e,t,n){let r=dn(null);try{return t.value===x6?f9(Oo(e)):t.value===U_&&(t.value=x6,t.value=t.factory(void 0,n)),typeof t.value=="object"&&t.value&&y$(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{dn(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=ro(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function oE(i){let e=bv(i),t=e!==null?e.factory:yu(i);if(t!==null)return t;if(i instanceof Ze)throw new je(204,!1);if(i instanceof Function)return v$(i);throw new je(204,!1)}function v$(i){if(i.length>0)throw new je(204,!1);let t=WG(i);return t!==null?()=>t.factory(i):()=>new i}function b$(i){if(M9(i))return Th(void 0,i.useValue);{let e=E9(i);return Th(e,U_)}}function E9(i,e,t){let n;if(Vh(i)){let r=ro(i);return yu(r)||oE(r)}else if(M9(i))n=()=>ro(i.useValue);else if(x$(i))n=()=>i.useFactory(...iE(i.deps||[]));else if(m$(i))n=(r,o)=>ht(ro(i.useExisting),o!==void 0&&o&Yt.Optional?Yt.Optional:void 0);else{let r=ro(i&&(i.useClass||i.provide));if(C$(i))n=()=>new r(...iE(i.deps));else return yu(r)||oE(r)}return n}function _p(i){if(i.destroyed)throw new je(205,!1)}function Th(i,e,t=!1){return{factory:i,value:e,multi:t?[]:void 0}}function C$(i){return!!i.deps}function y$(i){return i!==null&&typeof i=="object"&&typeof i.ngOnDestroy=="function"}function w$(i){return typeof i=="function"||typeof i=="object"&&i instanceof Ze}function sE(i,e){for(let t of i)Array.isArray(t)?sE(t,e):t&&h9(t)?sE(t.\u0275providers,e):e(t)}function ko(i,e){let t;i instanceof yp?(_p(i),t=i):t=new K_(i);let n,r=ql(t),o=Eo(void 0);try{return e()}finally{ql(r),Eo(o)}}function P9(){return g9()!==void 0||fp()!=null}function M$(i){if(!P9())throw new je(-203,!1)}function E$(i){let e=Mr.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function P$(i){return typeof i=="function"}var tl=0,tn=1,zt=2,jr=3,sa=4,ca=5,J_=6,Z_=7,So=8,Eu=9,Jl=10,yi=11,wp=12,_6=13,Yh=14,Xa=15,Pu=16,Bh=17,Zl=18,Mv=19,O9=20,nd=21,UM=22,ev=23,ks=24,Rh=25,ns=26,aP=1;var Ou=7,tv=8,Uh=9,ts=10;function id(i){return Array.isArray(i)&&typeof i[aP]=="object"}function nc(i){return Array.isArray(i)&&i[aP]===!0}function lP(i){return(i.flags&4)!==0}function Xh(i){return i.componentOffset>-1}function Ev(i){return(i.flags&1)===1}function aa(i){return!!i.template}function nv(i){return(i[zt]&512)!==0}function Qh(i){return(i[zt]&256)===256}var aE=class{previousValue;currentValue;firstChange;constructor(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}isFirstChange(){return this.firstChange}};function S9(i,e,t,n){e!==null?e.applyValueToInputSignal(e,n):i[t]=n}var As=(()=>{let i=()=>k9;return i.ngInherit=!0,i})();function k9(i){return i.type.prototype.ngOnChanges&&(i.setInput=S$),O$}function O$(){let i=D9(this),e=i?.current;if(e){let t=i.previous;if(t===wu)i.previous=e;else for(let n in e)t[n]=e[n];i.current=null,this.ngOnChanges(e)}}function S$(i,e,t,n,r){let o=this.declaredInputs[n],s=D9(i)||k$(i,{previous:wu,current:null}),a=s.current||(s.current={}),l=s.previous,c=l[o];a[o]=new aE(c&&c.currentValue,t,l===wu),S9(i,e,r,t)}var A9="__ngSimpleChanges__";function D9(i){return i[A9]||null}function k$(i,e){return i[A9]=e}var v6=null;var si=function(i,e=null,t){v6?.(i,e,t)},A$="svg",D$="math";function Qa(i){for(;Array.isArray(i);)i=i[tl];return i}function F$(i){for(;Array.isArray(i);){if(typeof i[aP]=="object")return i;i=i[tl]}return null}function F9(i,e){return Qa(e[i])}function nl(i,e){return Qa(e[i.index])}function I9(i,e){return i.data[e]}function T9(i,e){return i[e]}function Ja(i,e){let t=e[i];return id(t)?t:t[tl]}function I$(i){return(i[zt]&4)===4}function cP(i){return(i[zt]&128)===128}function T$(i){return nc(i[jr])}function Hh(i,e){return e==null?null:i[e]}function B9(i){i[Bh]=0}function N9(i){i[zt]&1024||(i[zt]|=1024,cP(i)&&Ap(i))}function B$(i,e){for(;i>0;)e=e[Yh],i--;return e}function Pv(i){return!!(i[zt]&9216||i[ks]?.dirty)}function lE(i){i[Jl].changeDetectionScheduler?.notify(8),i[zt]&64&&(i[zt]|=1024),Pv(i)&&Ap(i)}function Ap(i){i[Jl].changeDetectionScheduler?.notify(0);let e=Su(i);for(;e!==null&&!(e[zt]&8192||(e[zt]|=8192,!cP(e)));)e=Su(e)}function L9(i,e){if(Qh(i))throw new je(911,!1);i[nd]===null&&(i[nd]=[]),i[nd].push(e)}function N$(i,e){if(i[nd]===null)return;let t=i[nd].indexOf(e);t!==-1&&i[nd].splice(t,1)}function Su(i){let e=i[jr];return nc(e)?e[jr]:e}function dP(i){return i[Z_]??=[]}function uP(i){return i.cleanup??=[]}function L$(i,e,t,n){let r=dP(e);r.push(t),i.firstCreatePass&&uP(i).push(n,r.length-1)}var Zt={lFrame:$9(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var cE=!1;function R$(){return Zt.lFrame.elementDepthCount}function z$(){Zt.lFrame.elementDepthCount++}function j$(){Zt.lFrame.elementDepthCount--}function hP(){return Zt.bindingsEnabled}function V$(){return Zt.skipHydrationRootTNode!==null}function U$(i){return Zt.skipHydrationRootTNode===i}function H$(){Zt.skipHydrationRootTNode=null}function Xt(){return Zt.lFrame.lView}function Ui(){return Zt.lFrame.tView}function K(i){return Zt.lFrame.contextLView=i,i[So]}function Y(i){return Zt.lFrame.contextLView=null,i}function oo(){let i=R9();for(;i!==null&&i.type===64;)i=i.parent;return i}function R9(){return Zt.lFrame.currentTNode}function G$(){let i=Zt.lFrame,e=i.currentTNode;return i.isParent?e:e.parent}function Iu(i,e){let t=Zt.lFrame;t.currentTNode=i,t.isParent=e}function fP(){return Zt.lFrame.isParent}function z9(){Zt.lFrame.isParent=!1}function $$(){return Zt.lFrame.contextLView}function j9(){return cE}function b6(i){let e=cE;return cE=i,e}function Jh(){let i=Zt.lFrame,e=i.bindingRootIndex;return e===-1&&(e=i.bindingRootIndex=i.tView.bindingStartIndex),e}function W$(){return Zt.lFrame.bindingIndex}function q$(i){return Zt.lFrame.bindingIndex=i}function Dp(){return Zt.lFrame.bindingIndex++}function gP(i){let e=Zt.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+i,t}function K$(){return Zt.lFrame.inI18n}function Y$(i,e){let t=Zt.lFrame;t.bindingIndex=t.bindingRootIndex=i,dE(e)}function X$(){return Zt.lFrame.currentDirectiveIndex}function dE(i){Zt.lFrame.currentDirectiveIndex=i}function V9(i){let e=Zt.lFrame.currentDirectiveIndex;return e===-1?null:i[e]}function U9(){return Zt.lFrame.currentQueryIndex}function pP(i){Zt.lFrame.currentQueryIndex=i}function Q$(i){let e=i[tn];return e.type===2?e.declTNode:e.type===1?i[ca]:null}function H9(i,e,t){if(t&Yt.SkipSelf){let r=e,o=i;for(;r=r.parent,r===null&&!(t&Yt.Host);)if(r=Q$(o),r===null||(o=o[Yh],r.type&10))break;if(r===null)return!1;e=r,i=o}let n=Zt.lFrame=G9();return n.currentTNode=e,n.lView=i,!0}function mP(i){let e=G9(),t=i[tn];Zt.lFrame=e,e.currentTNode=t.firstChild,e.lView=i,e.tView=t,e.contextLView=i,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function G9(){let i=Zt.lFrame,e=i===null?null:i.child;return e===null?$9(i):e}function $9(i){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return i!==null&&(i.child=e),e}function W9(){let i=Zt.lFrame;return Zt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}var q9=W9;function xP(){let i=W9();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function J$(i){return(Zt.lFrame.contextLView=B$(i,Zt.lFrame.contextLView))[So]}function sd(){return Zt.lFrame.selectedIndex}function ku(i){Zt.lFrame.selectedIndex=i}function Fp(){let i=Zt.lFrame;return I9(i.tView,i.selectedIndex)}function Z$(){return Zt.lFrame.currentNamespace}var K9=!0;function Ov(){return K9}function Sv(i){K9=i}function eW(i,e,t){let{ngOnChanges:n,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(n){let s=k9(e);(t.preOrderHooks??=[]).push(i,s),(t.preOrderCheckHooks??=[]).push(i,s)}r&&(t.preOrderHooks??=[]).push(0-i,r),o&&((t.preOrderHooks??=[]).push(i,o),(t.preOrderCheckHooks??=[]).push(i,o))}function _P(i,e){for(let t=e.directiveStart,n=e.directiveEnd;t<n;t++){let o=i.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:d}=o;s&&(i.contentHooks??=[]).push(-t,s),a&&((i.contentHooks??=[]).push(t,a),(i.contentCheckHooks??=[]).push(t,a)),l&&(i.viewHooks??=[]).push(-t,l),c&&((i.viewHooks??=[]).push(t,c),(i.viewCheckHooks??=[]).push(t,c)),d!=null&&(i.destroyHooks??=[]).push(t,d)}}function H_(i,e,t){Y9(i,e,3,t)}function G_(i,e,t,n){(i[zt]&3)===t&&Y9(i,e,t,n)}function HM(i,e){let t=i[zt];(t&3)===e&&(t&=16383,t+=1,i[zt]=t)}function Y9(i,e,t,n){let r=n!==void 0?i[Bh]&65535:0,o=n??-1,s=e.length-1,a=0;for(let l=r;l<s;l++)if(typeof e[l+1]=="number"){if(a=e[l],n!=null&&a>=n)break}else e[l]<0&&(i[Bh]+=65536),(a<o||o==-1)&&(tW(i,t,e,l),i[Bh]=(i[Bh]&4294901760)+l+2),l++}function C6(i,e){si(4,i,e);let t=dn(null);try{e.call(i)}finally{dn(t),si(5,i,e)}}function tW(i,e,t,n){let r=t[n]<0,o=t[n+1],s=r?-t[n]:t[n],a=i[s];r?i[zt]>>14<i[Bh]>>16&&(i[zt]&3)===e&&(i[zt]+=16384,C6(a,o)):C6(a,o)}var zh=-1,Au=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,n){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=n}};function nW(i){return(i.flags&8)!==0}function iW(i){return(i.flags&16)!==0}function rW(i,e,t){let n=0;for(;n<t.length;){let r=t[n];if(typeof r=="number"){if(r!==0)break;n++;let o=t[n++],s=t[n++],a=t[n++];i.setAttribute(e,s,a,o)}else{let o=r,s=t[++n];oW(o)?i.setProperty(e,o,s):i.setAttribute(e,o,s),n++}}return n}function X9(i){return i===3||i===4||i===6}function oW(i){return i.charCodeAt(0)===64}function Gh(i,e){if(!(e===null||e.length===0))if(i===null||i.length===0)i=e.slice();else{let t=-1;for(let n=0;n<e.length;n++){let r=e[n];typeof r=="number"?t=r:t===0||(t===-1||t===2?y6(i,t,r,null,e[++n]):y6(i,t,r,null,null))}}return i}function y6(i,e,t,n,r){let o=0,s=i.length;if(e===-1)s=-1;else for(;o<i.length;){let a=i[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<i.length;){let a=i[o];if(typeof a=="number")break;if(a===t){r!==null&&(i[o+1]=r);return}o++,r!==null&&o++}s!==-1&&(i.splice(s,0,e),o=s+1),i.splice(o++,0,t),r!==null&&i.splice(o++,0,r)}function Q9(i){return i!==zh}function iv(i){return i&32767}function sW(i){return i>>16}function rv(i,e){let t=sW(i),n=e;for(;t>0;)n=n[Yh],t--;return n}var uE=!0;function ov(i){let e=uE;return uE=i,e}var aW=256,J9=aW-1,Z9=5,lW=0,Ya={};function cW(i,e,t){let n;typeof t=="string"?n=t.charCodeAt(0)||0:t.hasOwnProperty(bp)&&(n=t[bp]),n==null&&(n=t[bp]=lW++);let r=n&J9,o=1<<r;e.data[i+(r>>Z9)]|=o}function sv(i,e){let t=eF(i,e);if(t!==-1)return t;let n=e[tn];n.firstCreatePass&&(i.injectorIndex=e.length,GM(n.data,i),GM(e,null),GM(n.blueprint,null));let r=vP(i,e),o=i.injectorIndex;if(Q9(r)){let s=iv(r),a=rv(r,e),l=a[tn].data;for(let c=0;c<8;c++)e[o+c]=a[s+c]|l[s+c]}return e[o+8]=r,o}function GM(i,e){i.push(0,0,0,0,0,0,0,0,e)}function eF(i,e){return i.injectorIndex===-1||i.parent&&i.parent.injectorIndex===i.injectorIndex||e[i.injectorIndex+8]===null?-1:i.injectorIndex}function vP(i,e){if(i.parent&&i.parent.injectorIndex!==-1)return i.parent.injectorIndex;let t=0,n=null,r=e;for(;r!==null;){if(n=oF(r),n===null)return zh;if(t++,r=r[Yh],n.injectorIndex!==-1)return n.injectorIndex|t<<16}return zh}function hE(i,e,t){cW(i,e,t)}function dW(i,e){if(e==="class")return i.classes;if(e==="style")return i.styles;let t=i.attrs;if(t){let n=t.length,r=0;for(;r<n;){let o=t[r];if(X9(o))break;if(o===0)r=r+2;else if(typeof o=="number")for(r++;r<n&&typeof t[r]=="string";)r++;else{if(o===e)return t[r+1];r=r+2}}}return null}function tF(i,e,t){if(t&Yt.Optional||i!==void 0)return i;iP(e,"NodeInjector")}function nF(i,e,t,n){if(t&Yt.Optional&&n===void 0&&(n=null),(t&(Yt.Self|Yt.Host))===0){let r=i[Eu],o=Eo(void 0);try{return r?r.get(e,n,t&Yt.Optional):p9(e,n,t&Yt.Optional)}finally{Eo(o)}}return tF(n,e,t)}function iF(i,e,t,n=Yt.Default,r){if(i!==null){if(e[zt]&2048&&!(n&Yt.Self)){let s=gW(i,e,t,n,Ya);if(s!==Ya)return s}let o=rF(i,e,t,n,Ya);if(o!==Ya)return o}return nF(e,t,n,r)}function rF(i,e,t,n,r){let o=hW(t);if(typeof o=="function"){if(!H9(e,i,n))return n&Yt.Host?tF(r,t,n):nF(e,t,n,r);try{let s;if(s=o(n),s==null&&!(n&Yt.Optional))iP(t);else return s}finally{q9()}}else if(typeof o=="number"){let s=null,a=eF(i,e),l=zh,c=n&Yt.Host?e[Xa][ca]:null;for((a===-1||n&Yt.SkipSelf)&&(l=a===-1?vP(i,e):e[a+8],l===zh||!M6(n,!1)?a=-1:(s=e[tn],a=iv(l),e=rv(l,e)));a!==-1;){let d=e[tn];if(w6(o,a,d.data)){let h=uW(a,e,t,s,n,c);if(h!==Ya)return h}l=e[a+8],l!==zh&&M6(n,e[tn].data[a+8]===c)&&w6(o,a,e)?(s=d,a=iv(l),e=rv(l,e)):a=-1}}return r}function uW(i,e,t,n,r,o){let s=e[tn],a=s.data[i+8],l=n==null?Xh(a)&&uE:n!=s&&(a.type&3)!==0,c=r&Yt.Host&&o===a,d=$_(a,s,t,l,c);return d!==null?Mp(e,s,d,a,r):Ya}function $_(i,e,t,n,r){let o=i.providerIndexes,s=e.data,a=o&1048575,l=i.directiveStart,c=i.directiveEnd,d=o>>20,h=n?a:a+d,p=r?a+d:c;for(let g=h;g<p;g++){let _=s[g];if(g<l&&t===_||g>=l&&_.type===t)return g}if(r){let g=s[l];if(g&&aa(g)&&g.type===t)return l}return null}function Mp(i,e,t,n,r){let o=i[t],s=e.data;if(o instanceof Au){let a=o;a.resolving&&f9(JG(s[t]));let l=ov(a.canSeeViewProviders);a.resolving=!0;let c,d=a.injectImpl?Eo(a.injectImpl):null,h=H9(i,n,Yt.Default);try{o=i[t]=a.factory(void 0,r,s,i,n),e.firstCreatePass&&t>=n.directiveStart&&eW(t,s[t],e)}finally{d!==null&&Eo(d),ov(l),a.resolving=!1,q9()}}return o}function hW(i){if(typeof i=="string")return i.charCodeAt(0)||0;let e=i.hasOwnProperty(bp)?i[bp]:void 0;return typeof e=="number"?e>=0?e&J9:fW:e}function w6(i,e,t){let n=1<<i;return!!(t[e+(i>>Z9)]&n)}function M6(i,e){return!(i&Yt.Self)&&!(i&Yt.Host&&e)}var bu=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,n){return iF(this._tNode,this._lView,e,Cv(n),t)}};function fW(){return new bu(oo(),Xt())}function rs(i){return Sp(()=>{let e=i.prototype.constructor,t=e[q_]||fE(e),n=Object.prototype,r=Object.getPrototypeOf(i.prototype).constructor;for(;r&&r!==n;){let o=r[q_]||fE(r);if(o&&o!==t)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function fE(i){return l9(i)?()=>{let e=fE(ro(i));return e&&e()}:yu(i)}function gW(i,e,t,n,r){let o=i,s=e;for(;o!==null&&s!==null&&s[zt]&2048&&!nv(s);){let a=rF(o,s,t,n|Yt.Self,Ya);if(a!==Ya)return a;let l=o.parent;if(!l){let c=s[O9];if(c){let d=c.get(t,Ya,n);if(d!==Ya)return d}l=oF(s),s=s[Yh]}o=l}return r}function oF(i){let e=i[tn],t=e.type;return t===2?e.declTNode:t===1?i[ca]:null}function bP(i){return dW(oo(),i)}function E6(i,e=null,t=null,n){let r=sF(i,e,t,n);return r.resolveInjectorInitializers(),r}function sF(i,e=null,t=null,n,r=new Set){let o=[t||Po,g$(i)];return n=n||(typeof i=="object"?void 0:Oo(i)),new yp(o,e||sP(),n||null,r)}var pr=class i{static THROW_IF_NOT_FOUND=vu;static NULL=new Q_;static create(e,t){if(Array.isArray(e))return E6({name:""},t,e,"");{let n=e.name??"";return E6({name:n},e.parent,e.providers,n)}}static \u0275prov=tt({token:i,providedIn:"any",factory:()=>ht(v9)});static __NG_ELEMENT_ID__=-1};var pW=new Ze("");pW.__NG_ELEMENT_ID__=i=>{let e=oo();if(e===null)throw new je(204,!1);if(e.type&2)return e.value;if(i&Yt.Optional)return null;throw new je(204,!1)};var aF=!1,Ip=(()=>{class i{static __NG_ELEMENT_ID__=mW;static __NG_ENV_ID__=t=>t}return i})(),gE=class extends Ip{_lView;constructor(e){super(),this._lView=e}onDestroy(e){let t=this._lView;return Qh(t)?(e(),()=>{}):(L9(t,e),()=>N$(t,e))}};function mW(){return new gE(Xt())}var $h=class{},CP=new Ze("",{providedIn:"root",factory:()=>!1});var lF=new Ze(""),cF=new Ze(""),ic=(()=>{class i{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new fr(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=tt({token:i,providedIn:"root",factory:()=>new i})}return i})();var pE=class extends Pn{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,P9()&&(this.destroyRef=$e(Ip,{optional:!0})??void 0,this.pendingTasks=$e(ic,{optional:!0})??void 0)}emit(e){let t=dn(null);try{super.next(e)}finally{dn(t)}}subscribe(e,t,n){let r=e,o=t||(()=>null),s=n;if(e&&typeof e=="object"){let l=e;r=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=this.wrapInTimeout(o),r&&(r=this.wrapInTimeout(r)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:r,error:o,complete:s});return e instanceof er&&e.add(a),a}wrapInTimeout(e){return t=>{let n=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{n!==void 0&&this.pendingTasks?.remove(n)}})}}},Ci=pE;function av(...i){}function dF(i){let e,t;function n(){i=av;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{i(),n()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{i(),n()})),()=>n()}function P6(i){return queueMicrotask(()=>i()),()=>{i=av}}var yP="isAngularZone",lv=yP+"_ID",xW=0,On=class i{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Ci(!1);onMicrotaskEmpty=new Ci(!1);onStable=new Ci(!1);onError=new Ci(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:o=aF}=e;if(typeof Zone>"u")throw new je(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!r&&n,s.shouldCoalesceRunChangeDetection=r,s.callbackScheduled=!1,s.scheduleInRootZone=o,bW(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(yP)===!0}static assertInAngularZone(){if(!i.isInAngularZone())throw new je(909,!1)}static assertNotInAngularZone(){if(i.isInAngularZone())throw new je(909,!1)}run(e,t,n){return this._inner.run(e,t,n)}runTask(e,t,n,r){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,e,_W,av,av);try{return o.runTask(s,t,n)}finally{o.cancelTask(s)}}runGuarded(e,t,n){return this._inner.runGuarded(e,t,n)}runOutsideAngular(e){return this._outer.run(e)}},_W={};function wP(i){if(i._nesting==0&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function vW(i){if(i.isCheckStableRunning||i.callbackScheduled)return;i.callbackScheduled=!0;function e(){dF(()=>{i.callbackScheduled=!1,mE(i),i.isCheckStableRunning=!0,wP(i),i.isCheckStableRunning=!1})}i.scheduleInRootZone?Zone.root.run(()=>{e()}):i._outer.run(()=>{e()}),mE(i)}function bW(i){let e=()=>{vW(i)},t=xW++;i._inner=i._inner.fork({name:"angular",properties:{[yP]:!0,[lv]:t,[lv+t]:!0},onInvokeTask:(n,r,o,s,a,l)=>{if(CW(l))return n.invokeTask(o,s,a,l);try{return O6(i),n.invokeTask(o,s,a,l)}finally{(i.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||i.shouldCoalesceRunChangeDetection)&&e(),S6(i)}},onInvoke:(n,r,o,s,a,l,c)=>{try{return O6(i),n.invoke(o,s,a,l,c)}finally{i.shouldCoalesceRunChangeDetection&&!i.callbackScheduled&&!yW(l)&&e(),S6(i)}},onHasTask:(n,r,o,s)=>{n.hasTask(o,s),r===o&&(s.change=="microTask"?(i._hasPendingMicrotasks=s.microTask,mE(i),wP(i)):s.change=="macroTask"&&(i.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,o,s)=>(n.handleError(o,s),i.runOutsideAngular(()=>i.onError.emit(s)),!1)})}function mE(i){i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&i.callbackScheduled===!0?i.hasPendingMicrotasks=!0:i.hasPendingMicrotasks=!1}function O6(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function S6(i){i._nesting--,wP(i)}var cv=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Ci;onMicrotaskEmpty=new Ci;onStable=new Ci;onError=new Ci;run(e,t,n){return e.apply(t,n)}runGuarded(e,t,n){return e.apply(t,n)}runOutsideAngular(e){return e()}runTask(e,t,n,r){return e.apply(t,n)}};function CW(i){return uF(i,"__ignore_ng_zone__")}function yW(i){return uF(i,"__scheduler_tick__")}function uF(i,e){return!Array.isArray(i)||i.length!==1?!1:i[0]?.data?.[e]===!0}function wW(i="zone.js",e){return i==="noop"?new cv:i==="zone.js"?new On(e):i}var Za=class{_console=console;handleError(e){this._console.error("ERROR",e)}},MW=new Ze("",{providedIn:"root",factory:()=>{let i=$e(On),e=$e(Za);return t=>i.runOutsideAngular(()=>e.handleError(t))}});function k6(i,e){return s9(i,e)}function EW(i){return s9(o9,i)}var hF=(k6.required=EW,k6);function PW(){return Zh(oo(),Xt())}function Zh(i,e){return new Ur(nl(i,e))}var Ur=(()=>{class i{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=PW}return i})();function OW(i){return i instanceof Ur?i.nativeElement:i}function SW(i){return typeof i=="function"&&i[Ss]!==void 0}function da(i,e){let t=yM(i,e?.equal),n=t[Ss];return t.set=r=>hp(n,r),t.update=r=>wM(n,r),t.asReadonly=kW.bind(t),t}function kW(){let i=this[Ss];if(i.readonlyFn===void 0){let e=()=>this();e[Ss]=i,i.readonlyFn=e}return i.readonlyFn}function fF(i){return SW(i)&&typeof i.set=="function"}function AW(){return this._results[Symbol.iterator]()}var xE=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Pn}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let n=c$(e);(this._changesDetected=!l$(this._results,n,t))&&(this._results=n,this.length=n.length,this.last=n[this.length-1],this.first=n[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=AW};function gF(i){return(i.flags&128)===128}var pF=function(i){return i[i.OnPush=0]="OnPush",i[i.Default=1]="Default",i}(pF||{}),mF=new Map,DW=0;function FW(){return DW++}function IW(i){mF.set(i[Mv],i)}function _E(i){mF.delete(i[Mv])}var A6="__ngContext__";function ef(i,e){id(e)?(i[A6]=e[Mv],IW(e)):i[A6]=e}function xF(i){return vF(i[wp])}function _F(i){return vF(i[sa])}function vF(i){for(;i!==null&&!nc(i);)i=i[sa];return i}var vE;function bF(i){vE=i}function CF(){if(vE!==void 0)return vE;if(typeof document<"u")return document;throw new je(210,!1)}var kv=new Ze("",{providedIn:"root",factory:()=>TW}),TW="ng",MP=new Ze(""),tf=new Ze("",{providedIn:"platform",factory:()=>"unknown"});var EP=new Ze(""),PP=new Ze("",{providedIn:"root",factory:()=>CF().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var BW="h",NW="b";var yF=!1,LW=new Ze("",{providedIn:"root",factory:()=>yF});var OP=function(i){return i[i.CHANGE_DETECTION=0]="CHANGE_DETECTION",i[i.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",i}(OP||{}),nf=new Ze(""),D6=new Set;function rf(i){D6.has(i)||(D6.add(i),performance?.mark?.("mark_feature_usage",{detail:{feature:i}}))}var wF=(()=>{class i{view;node;constructor(t,n){this.view=t,this.node=n}static __NG_ELEMENT_ID__=RW}return i})();function RW(){return new wF(Xt(),oo())}var Nh=function(i){return i[i.EarlyRead=0]="EarlyRead",i[i.Write=1]="Write",i[i.MixedReadWrite=2]="MixedReadWrite",i[i.Read=3]="Read",i}(Nh||{}),MF=(()=>{class i{impl=null;execute(){this.impl?.execute()}static \u0275prov=tt({token:i,providedIn:"root",factory:()=>new i})}return i})(),zW=[Nh.EarlyRead,Nh.Write,Nh.MixedReadWrite,Nh.Read],jW=(()=>{class i{ngZone=$e(On);scheduler=$e($h);errorHandler=$e(Za,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){$e(nf,{optional:!0})}execute(){let t=this.sequences.size>0;t&&si(16),this.executing=!0;for(let n of zW)for(let r of this.sequences)if(!(r.erroredOrDestroyed||!r.hooks[n]))try{r.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=r.hooks[n];return o(r.pipelinedValue)},r.snapshot))}catch(o){r.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let n of this.sequences)n.afterRun(),n.once&&(this.sequences.delete(n),n.destroy());for(let n of this.deferredRegistrations)this.sequences.add(n);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&si(17)}register(t){let{view:n}=t;n!==void 0?((n[Rh]??=[]).push(t),Ap(n),n[zt]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,n){return n?n.run(OP.AFTER_NEXT_RENDER,t):t()}static \u0275prov=tt({token:i,providedIn:"root",factory:()=>new i})}return i})(),bE=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,n,r,o,s=null){this.impl=e,this.hooks=t,this.view=n,this.once=r,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Rh];e&&(this.view[Rh]=e.filter(t=>t!==this))}};function SP(i,e){!e?.injector&&M$(SP);let t=e?.injector??$e(pr);return rf("NgAfterNextRender"),UW(i,t,e,!0)}function VW(i,e){if(i instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=i,t}else return[i.earlyRead,i.write,i.mixedReadWrite,i.read]}function UW(i,e,t,n){let r=e.get(MF);r.impl??=e.get(jW);let o=e.get(nf,null,{optional:!0}),s=t?.phase??Nh.MixedReadWrite,a=t?.manualCleanup!==!0?e.get(Ip):null,l=e.get(wF,null,{optional:!0}),c=new bE(r.impl,VW(i,s),l?.view,n,a,o?.snapshot(null));return r.impl.register(c),c}var HW=()=>null;function EF(i,e,t=!1){return HW(i,e,t)}function PF(i,e){let t=i.contentQueries;if(t!==null){let n=dn(null);try{for(let r=0;r<t.length;r+=2){let o=t[r],s=t[r+1];if(s!==-1){let a=i.data[s];pP(o),a.contentQueries(2,e[s],s)}}}finally{dn(n)}}}function CE(i,e,t){pP(0);let n=dn(null);try{e(i,t)}finally{dn(n)}}function kP(i,e,t){if(lP(e)){let n=dn(null);try{let r=e.directiveStart,o=e.directiveEnd;for(let s=r;s<o;s++){let a=i.data[s];if(a.contentQueries){let l=t[s];a.contentQueries(1,l,s)}}}finally{dn(n)}}}var el=function(i){return i[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",i}(el||{}),L_;function GW(){if(L_===void 0&&(L_=null,Mr.trustedTypes))try{L_=Mr.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return L_}function Av(i){return GW()?.createHTML(i)||i}var R_;function OF(){if(R_===void 0&&(R_=null,Mr.trustedTypes))try{R_=Mr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return R_}function F6(i){return OF()?.createHTML(i)||i}function I6(i){return OF()?.createScriptURL(i)||i}var ec=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${r9})`}},yE=class extends ec{getTypeName(){return"HTML"}},wE=class extends ec{getTypeName(){return"Style"}},ME=class extends ec{getTypeName(){return"Script"}},EE=class extends ec{getTypeName(){return"URL"}},PE=class extends ec{getTypeName(){return"ResourceURL"}};function Ds(i){return i instanceof ec?i.changingThisBreaksApplicationSecurity:i}function rc(i,e){let t=$W(i);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${r9})`)}return t===e}function $W(i){return i instanceof ec&&i.getTypeName()||null}function SF(i){return new yE(i)}function kF(i){return new wE(i)}function AF(i){return new ME(i)}function DF(i){return new EE(i)}function FF(i){return new PE(i)}function WW(i){let e=new SE(i);return qW()?new OE(e):e}var OE=class{inertDocumentHelper;constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(Av(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}},SE=class{defaultDoc;inertDocument;constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=Av(e),t}};function qW(){try{return!!new window.DOMParser().parseFromString(Av(""),"text/html")}catch{return!1}}var KW=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Dv(i){return i=String(i),i.match(KW)?i:"unsafe:"+i}function oc(i){let e={};for(let t of i.split(","))e[t]=!0;return e}function Tp(...i){let e={};for(let t of i)for(let n in t)t.hasOwnProperty(n)&&(e[n]=!0);return e}var IF=oc("area,br,col,hr,img,wbr"),TF=oc("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),BF=oc("rp,rt"),YW=Tp(BF,TF),XW=Tp(TF,oc("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),QW=Tp(BF,oc("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),T6=Tp(IF,XW,QW,YW),NF=oc("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),JW=oc("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ZW=oc("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),eq=Tp(NF,JW,ZW),tq=oc("script,style,template"),kE=class{sanitizedSomething=!1;buf=[];sanitizeChildren(e){let t=e.firstChild,n=!0,r=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?n=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,n&&t.firstChild){r.push(t),t=rq(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let o=iq(t);if(o){t=o;break}t=r.pop()}}return this.buf.join("")}startElement(e){let t=B6(e).toLowerCase();if(!T6.hasOwnProperty(t))return this.sanitizedSomething=!0,!tq.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let n=e.attributes;for(let r=0;r<n.length;r++){let o=n.item(r),s=o.name,a=s.toLowerCase();if(!eq.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=o.value;NF[a]&&(l=Dv(l)),this.buf.push(" ",s,'="',N6(l),'"')}return this.buf.push(">"),!0}endElement(e){let t=B6(e).toLowerCase();T6.hasOwnProperty(t)&&!IF.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(N6(e))}};function nq(i,e){return(i.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function iq(i){let e=i.nextSibling;if(e&&i!==e.previousSibling)throw LF(e);return e}function rq(i){let e=i.firstChild;if(e&&nq(i,e))throw LF(e);return e}function B6(i){let e=i.nodeName;return typeof e=="string"?e:"FORM"}function LF(i){return new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`)}var oq=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,sq=/([^\#-~ |!])/g;function N6(i){return i.replace(/&/g,"&amp;").replace(oq,function(e){let t=e.charCodeAt(0),n=e.charCodeAt(1);return"&#"+((t-55296)*1024+(n-56320)+65536)+";"}).replace(sq,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var z_;function AP(i,e){let t=null;try{z_=z_||WW(i);let n=e?String(e):"";t=z_.getInertBodyElement(n);let r=5,o=n;do{if(r===0)throw new Error("Failed to sanitize html because the input is unstable");r--,n=o,o=t.innerHTML,t=z_.getInertBodyElement(n)}while(n!==o);let a=new kE().sanitizeChildren(L6(t)||t);return Av(a)}finally{if(t){let n=L6(t)||t;for(;n.firstChild;)n.firstChild.remove()}}}function L6(i){return"content"in i&&aq(i)?i.content:null}function aq(i){return i.nodeType===Node.ELEMENT_NODE&&i.nodeName==="TEMPLATE"}var os=function(i){return i[i.NONE=0]="NONE",i[i.HTML=1]="HTML",i[i.STYLE=2]="STYLE",i[i.SCRIPT=3]="SCRIPT",i[i.URL=4]="URL",i[i.RESOURCE_URL=5]="RESOURCE_URL",i}(os||{});function Fv(i){let e=DP();return e?F6(e.sanitize(os.HTML,i)||""):rc(i,"HTML")?F6(Ds(i)):AP(CF(),Cu(i))}function vt(i){let e=DP();return e?e.sanitize(os.URL,i)||"":rc(i,"URL")?Ds(i):Dv(Cu(i))}function Bp(i){let e=DP();if(e)return I6(e.sanitize(os.RESOURCE_URL,i)||"");if(rc(i,"ResourceURL"))return I6(Ds(i));throw new je(904,!1)}function lq(i,e){return e==="src"&&(i==="embed"||i==="frame"||i==="iframe"||i==="media"||i==="script")||e==="href"&&(i==="base"||i==="link")?Bp:vt}function RF(i,e,t){return lq(e,t)(i)}function DP(){let i=Xt();return i&&i[Jl].sanitizer}var cq=/^>|^->|<!--|-->|--!>|<!-$/g,dq=/(<|>)/g,uq="\u200B$1\u200B";function hq(i){return i.replace(cq,e=>e.replace(dq,uq))}function ad(i){return i.ownerDocument.defaultView}function zF(i){return i.ownerDocument}function jF(i){return i instanceof Function?i():i}function fq(i,e,t){let n=i.length;for(;;){let r=i.indexOf(e,t);if(r===-1)return r;if(r===0||i.charCodeAt(r-1)<=32){let o=e.length;if(r+o===n||i.charCodeAt(r+o)<=32)return r}t=r+1}}var VF="ng-template";function gq(i,e,t,n){let r=0;if(n){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&fq(e[r+1].toLowerCase(),t,0)!==-1)return!0}else if(FP(i))return!1;if(r=e.indexOf(1,r),r>-1){let o;for(;++r<e.length&&typeof(o=e[r])=="string";)if(o.toLowerCase()===t)return!0}return!1}function FP(i){return i.type===4&&i.value!==VF}function pq(i,e,t){let n=i.type===4&&!t?VF:i.value;return e===n}function mq(i,e,t){let n=4,r=i.attrs,o=r!==null?vq(r):0,s=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!s&&!ra(n)&&!ra(l))return!1;if(s&&ra(l))continue;s=!1,n=l|n&1;continue}if(!s)if(n&4){if(n=2|n&1,l!==""&&!pq(i,l,t)||l===""&&e.length===1){if(ra(n))return!1;s=!0}}else if(n&8){if(r===null||!gq(i,r,l,t)){if(ra(n))return!1;s=!0}}else{let c=e[++a],d=xq(l,r,FP(i),t);if(d===-1){if(ra(n))return!1;s=!0;continue}if(c!==""){let h;if(d>o?h="":h=r[d+1].toLowerCase(),n&2&&c!==h){if(ra(n))return!1;s=!0}}}}return ra(n)||s}function ra(i){return(i&1)===0}function xq(i,e,t,n){if(e===null)return-1;let r=0;if(n||!t){let o=!1;for(;r<e.length;){let s=e[r];if(s===i)return r;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++r];for(;typeof a=="string";)a=e[++r];continue}else{if(s===4)break;if(s===0){r+=4;continue}}r+=o?1:2}return-1}else return bq(e,i)}function _q(i,e,t=!1){for(let n=0;n<e.length;n++)if(mq(i,e[n],t))return!0;return!1}function vq(i){for(let e=0;e<i.length;e++){let t=i[e];if(X9(t))return e}return i.length}function bq(i,e){let t=i.indexOf(4);if(t>-1)for(t++;t<i.length;){let n=i[t];if(typeof n=="number")return-1;if(n===e)return t;t++}return-1}function R6(i,e){return i?":not("+e.trim()+")":e}function Cq(i){let e=i[0],t=1,n=2,r="",o=!1;for(;t<i.length;){let s=i[t];if(typeof s=="string")if(n&2){let a=i[++t];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else n&8?r+="."+s:n&4&&(r+=" "+s);else r!==""&&!ra(s)&&(e+=R6(o,r),r=""),n=s,o=o||!ra(n);t++}return r!==""&&(e+=R6(o,r)),e}function yq(i){return i.map(Cq).join(",")}function wq(i){let e=[],t=[],n=1,r=2;for(;n<i.length;){let o=i[n];if(typeof o=="string")r===2?o!==""&&e.push(o,i[++n]):r===8&&t.push(o);else{if(!ra(r))break;r=o}n++}return t.length&&e.push(1,...t),e}var ss={};function Mq(i,e){return i.createText(e)}function Eq(i,e,t){i.setValue(e,t)}function Pq(i,e){return i.createComment(hq(e))}function UF(i,e,t){return i.createElement(e,t)}function dv(i,e,t,n,r){i.insertBefore(e,t,n,r)}function HF(i,e,t){i.appendChild(e,t)}function z6(i,e,t,n,r){n!==null?dv(i,e,t,n,r):HF(i,e,t)}function Oq(i,e,t){i.removeChild(null,e,t)}function Sq(i,e,t){i.setAttribute(e,"style",t)}function kq(i,e,t){t===""?i.removeAttribute(e,"class"):i.setAttribute(e,"class",t)}function GF(i,e,t){let{mergedAttrs:n,classes:r,styles:o}=t;n!==null&&rW(i,e,n),r!==null&&kq(i,e,r),o!==null&&Sq(i,e,o)}function IP(i,e,t,n,r,o,s,a,l,c,d){let h=ns+n,p=h+r,g=Aq(h,p),_=typeof c=="function"?c():c;return g[tn]={type:i,blueprint:g,template:t,queries:null,viewQuery:a,declTNode:e,data:g.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:_,incompleteFirstPass:!1,ssrId:d}}function Aq(i,e){let t=[];for(let n=0;n<e;n++)t.push(n<i?null:ss);return t}function Dq(i){let e=i.tView;return e===null||e.incompleteFirstPass?i.tView=IP(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts,i.id):e}function TP(i,e,t,n,r,o,s,a,l,c,d){let h=e.blueprint.slice();return h[tl]=r,h[zt]=n|4|128|8|64|1024,(c!==null||i&&i[zt]&2048)&&(h[zt]|=2048),B9(h),h[jr]=h[Yh]=i,h[So]=t,h[Jl]=s||i&&i[Jl],h[yi]=a||i&&i[yi],h[Eu]=l||i&&i[Eu]||null,h[ca]=o,h[Mv]=FW(),h[J_]=d,h[O9]=c,h[Xa]=e.type==2?i[Xa]:h,h}function Fq(i,e,t){let n=nl(e,i),r=Dq(t),o=i[Jl].rendererFactory,s=BP(i,TP(i,r,null,$F(t),n,e,null,o.createRenderer(n,t),null,null,null));return i[e.index]=s}function $F(i){let e=16;return i.signals?e=4096:i.onPush&&(e=64),e}function WF(i,e,t,n){if(t===0)return-1;let r=e.length;for(let o=0;o<t;o++)e.push(n),i.blueprint.push(n),i.data.push(null);return r}function BP(i,e){return i[wp]?i[_6][sa]=e:i[wp]=e,i[_6]=e,e}function x(i=1){qF(Ui(),Xt(),sd()+i,!1)}function qF(i,e,t,n){if(!n)if((e[zt]&3)===3){let o=i.preOrderCheckHooks;o!==null&&H_(e,o,t)}else{let o=i.preOrderHooks;o!==null&&G_(e,o,0,t)}ku(t)}var Iv=function(i){return i[i.None=0]="None",i[i.SignalBased=1]="SignalBased",i[i.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",i}(Iv||{});function AE(i,e,t,n){let r=dn(null);try{let[o,s,a]=i.inputs[t],l=null;(s&Iv.SignalBased)!==0&&(l=e[o][Ss]),l!==null&&l.transformFn!==void 0?n=l.transformFn(n):a!==null&&(n=a.call(e,n)),i.setInput!==null?i.setInput(e,l,n,t,o):S9(e,l,o,n)}finally{dn(r)}}function KF(i,e,t,n,r){let o=sd(),s=n&2;try{ku(-1),s&&e.length>ns&&qF(i,e,ns,!1),si(s?2:0,r),t(n,r)}finally{ku(o),si(s?3:1,r)}}function Tv(i,e,t){Rq(i,e,t),(t.flags&64)===64&&zq(i,e,t)}function NP(i,e,t=nl){let n=e.localNames;if(n!==null){let r=e.index+1;for(let o=0;o<n.length;o+=2){let s=n[o+1],a=s===-1?t(e,i):i[s];i[r++]=a}}}function Iq(i,e,t,n){let o=n.get(LW,yF)||t===el.ShadowDom,s=i.selectRootElement(e,o);return Tq(s),s}function Tq(i){Bq(i)}var Bq=()=>null;function Nq(i){return i==="class"?"className":i==="for"?"htmlFor":i==="formaction"?"formAction":i==="innerHtml"?"innerHTML":i==="readonly"?"readOnly":i==="tabindex"?"tabIndex":i}function Bv(i,e,t,n,r,o,s,a){if(!a&&RP(e,i,t,n,r)){Xh(e)&&Lq(t,e.index);return}if(e.type&3){let l=nl(e,t);n=Nq(n),r=s!=null?s(r,e.value||"",n):r,o.setProperty(l,n,r)}else e.type&12}function Lq(i,e){let t=Ja(e,i);t[zt]&16||(t[zt]|=64)}function Rq(i,e,t){let n=t.directiveStart,r=t.directiveEnd;Xh(t)&&Fq(e,t,i.data[n+t.componentOffset]),i.firstCreatePass||sv(t,e);let o=t.initialInputs;for(let s=n;s<r;s++){let a=i.data[s],l=Mp(e,i,s,t);if(ef(l,e),o!==null&&Hq(e,s-n,l,a,t,o),aa(a)){let c=Ja(t.index,e);c[So]=Mp(e,i,s,t)}}}function zq(i,e,t){let n=t.directiveStart,r=t.directiveEnd,o=t.index,s=X$();try{ku(o);for(let a=n;a<r;a++){let l=i.data[a],c=e[a];dE(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&jq(l,c)}}finally{ku(-1),dE(s)}}function jq(i,e){i.hostBindings!==null&&i.hostBindings(1,e)}function LP(i,e){let t=i.directiveRegistry,n=null;if(t)for(let r=0;r<t.length;r++){let o=t[r];_q(e,o.selectors,!1)&&(n??=[],aa(o)?n.unshift(o):n.push(o))}return n}function Vq(i,e,t,n,r,o){let s=nl(i,e);Uq(e[yi],s,o,i.value,t,n,r)}function Uq(i,e,t,n,r,o,s){if(o==null)i.removeAttribute(e,r,t);else{let a=s==null?Cu(o):s(o,n||"",r);i.setAttribute(e,r,a,t)}}function Hq(i,e,t,n,r,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let l=s[a],c=s[a+1];AE(n,t,l,c)}}function Gq(i,e,t){return(i===null||aa(i))&&(t=F$(t[e.index])),t[yi]}function $q(i,e){let t=i[Eu],n=t?t.get(Za,null):null;n&&n.handleError(e)}function RP(i,e,t,n,r){let o=i.inputs?.[n],s=i.hostDirectiveInputs?.[n],a=!1;if(s)for(let l=0;l<s.length;l+=2){let c=s[l],d=s[l+1],h=e.data[c];AE(h,t[c],d,r),a=!0}if(o)for(let l of o){let c=t[l],d=e.data[l];AE(d,c,n,r),a=!0}return a}function Wq(i,e){let t=Ja(e,i),n=t[tn];qq(n,t);let r=t[tl];r!==null&&t[J_]===null&&(t[J_]=EF(r,t[Eu])),si(18),zP(n,t,t[So]),si(19,t[So])}function qq(i,e){for(let t=e.length;t<i.blueprint.length;t++)e.push(i.blueprint[t])}function zP(i,e,t){mP(e);try{let n=i.viewQuery;n!==null&&CE(1,n,t);let r=i.template;r!==null&&KF(i,e,r,1,t),i.firstCreatePass&&(i.firstCreatePass=!1),e[Zl]?.finishViewCreation(i),i.staticContentQueries&&PF(i,e),i.staticViewQueries&&CE(2,i.viewQuery,t);let o=i.components;o!==null&&Kq(e,o)}catch(n){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),n}finally{e[zt]&=-5,xP()}}function Kq(i,e){for(let t=0;t<e.length;t++)Wq(i,e[t])}function Yq(i,e,t,n){let r=dn(null);try{let o=e.tView,a=i[zt]&4096?4096:16,l=TP(i,o,t,a,null,e,null,null,n?.injector??null,n?.embeddedViewInjector??null,n?.dehydratedView??null),c=i[e.index];l[Pu]=c;let d=i[Zl];return d!==null&&(l[Zl]=d.createEmbeddedView(o)),zP(o,l,t),l}finally{dn(r)}}function j6(i,e){return!e||e.firstChild===null||gF(i)}var Xq;function jP(i,e){return Xq(i,e)}var tc=function(i){return i[i.Important=1]="Important",i[i.DashCase=2]="DashCase",i}(tc||{});function YF(i){return(i.flags&32)===32}function Lh(i,e,t,n,r){if(n!=null){let o,s=!1;nc(n)?o=n:id(n)&&(s=!0,n=n[tl]);let a=Qa(n);i===0&&t!==null?r==null?HF(e,t,a):dv(e,t,a,r||null,!0):i===1&&t!==null?dv(e,t,a,r||null,!0):i===2?Oq(e,a,s):i===3&&e.destroyNode(a),o!=null&&lK(e,i,o,t,r)}}function Qq(i,e){XF(i,e),e[tl]=null,e[ca]=null}function Jq(i,e,t,n,r,o){n[tl]=r,n[ca]=e,Lv(i,n,t,1,r,o)}function XF(i,e){e[Jl].changeDetectionScheduler?.notify(9),Lv(i,e,e[yi],2,null,null)}function Zq(i){let e=i[wp];if(!e)return $M(i[tn],i);for(;e;){let t=null;if(id(e))t=e[wp];else{let n=e[ts];n&&(t=n)}if(!t){for(;e&&!e[sa]&&e!==i;)id(e)&&$M(e[tn],e),e=e[jr];e===null&&(e=i),id(e)&&$M(e[tn],e),t=e&&e[sa]}e=t}}function VP(i,e){let t=i[Uh],n=t.indexOf(e);t.splice(n,1)}function QF(i,e){if(Qh(e))return;let t=e[yi];t.destroyNode&&Lv(i,e,t,3,null,null),Zq(e)}function $M(i,e){if(Qh(e))return;let t=dn(null);try{e[zt]&=-129,e[zt]|=256,e[ks]&&vM(e[ks]),tK(i,e),eK(i,e),e[tn].type===1&&e[yi].destroy();let n=e[Pu];if(n!==null&&nc(e[jr])){n!==e[jr]&&VP(n,e);let r=e[Zl];r!==null&&r.detachView(i)}_E(e)}finally{dn(t)}}function eK(i,e){let t=i.cleanup,n=e[Z_];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?n[a]():n[-a].unsubscribe(),s+=2}else{let a=n[t[s+1]];t[s].call(a)}n!==null&&(e[Z_]=null);let r=e[nd];if(r!==null){e[nd]=null;for(let s=0;s<r.length;s++){let a=r[s];a()}}let o=e[ev];if(o!==null){e[ev]=null;for(let s of o)s.destroy()}}function tK(i,e){let t;if(i!=null&&(t=i.destroyHooks)!=null)for(let n=0;n<t.length;n+=2){let r=e[t[n]];if(!(r instanceof Au)){let o=t[n+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=r[o[s]],l=o[s+1];si(4,a,l);try{l.call(a)}finally{si(5,a,l)}}else{si(4,r,o);try{o.call(r)}finally{si(5,r,o)}}}}}function nK(i,e,t){return iK(i,e.parent,t)}function iK(i,e,t){let n=e;for(;n!==null&&n.type&168;)e=n,n=e.parent;if(n===null)return t[tl];if(Xh(n)){let{encapsulation:r}=i.data[n.directiveStart+n.componentOffset];if(r===el.None||r===el.Emulated)return null}return nl(n,t)}function rK(i,e,t){return sK(i,e,t)}function oK(i,e,t){return i.type&40?nl(i,t):null}var sK=oK,V6;function Nv(i,e,t,n){let r=nK(i,n,e),o=e[yi],s=n.parent||e[ca],a=rK(s,n,e);if(r!=null)if(Array.isArray(t))for(let l=0;l<t.length;l++)z6(o,r,t[l],a,!1);else z6(o,r,t,a,!1);V6!==void 0&&V6(o,n,e,t,r)}function vp(i,e){if(e!==null){let t=e.type;if(t&3)return nl(e,i);if(t&4)return DE(-1,i[e.index]);if(t&8){let n=e.child;if(n!==null)return vp(i,n);{let r=i[e.index];return nc(r)?DE(-1,r):Qa(r)}}else{if(t&128)return vp(i,e.next);if(t&32)return jP(e,i)()||Qa(i[e.index]);{let n=JF(i,e);if(n!==null){if(Array.isArray(n))return n[0];let r=Su(i[Xa]);return vp(r,n)}else return vp(i,e.next)}}}return null}function JF(i,e){if(e!==null){let n=i[Xa][ca],r=e.projection;return n.projection[r]}return null}function DE(i,e){let t=ts+i+1;if(t<e.length){let n=e[t],r=n[tn].firstChild;if(r!==null)return vp(n,r)}return e[Ou]}function UP(i,e,t,n,r,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=n[t.index],l=t.type;if(s&&e===0&&(a&&ef(Qa(a),n),t.flags|=2),!YF(t))if(l&8)UP(i,e,t.child,n,r,o,!1),Lh(e,i,r,a,o);else if(l&32){let c=jP(t,n),d;for(;d=c();)Lh(e,i,r,d,o);Lh(e,i,r,a,o)}else l&16?aK(i,e,n,t,r,o):Lh(e,i,r,a,o);t=s?t.projectionNext:t.next}}function Lv(i,e,t,n,r,o){UP(t,n,i.firstChild,e,r,o,!1)}function aK(i,e,t,n,r,o){let s=t[Xa],l=s[ca].projection[n.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let d=l[c];Lh(e,i,r,d,o)}else{let c=l,d=s[jr];gF(n)&&(c.flags|=128),UP(i,e,c,d,r,o,!0)}}function lK(i,e,t,n,r){let o=t[Ou],s=Qa(t);o!==s&&Lh(e,i,n,o,r);for(let a=ts;a<t.length;a++){let l=t[a];Lv(l[tn],l,i,e,n,o)}}function cK(i,e,t,n,r){if(e)r?i.addClass(t,n):i.removeClass(t,n);else{let o=n.indexOf("-")===-1?void 0:tc.DashCase;r==null?i.removeStyle(t,n,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=tc.Important),i.setStyle(t,n,r,o))}}function uv(i,e,t,n,r=!1){for(;t!==null;){if(t.type===128){t=r?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&n.push(Qa(o)),nc(o)&&dK(o,n);let s=t.type;if(s&8)uv(i,e,t.child,n);else if(s&32){let a=jP(t,e),l;for(;l=a();)n.push(l)}else if(s&16){let a=JF(e,t);if(Array.isArray(a))n.push(...a);else{let l=Su(e[Xa]);uv(l[tn],l,a,n,!0)}}t=r?t.projectionNext:t.next}return n}function dK(i,e){for(let t=ts;t<i.length;t++){let n=i[t],r=n[tn].firstChild;r!==null&&uv(n[tn],n,r,e)}i[Ou]!==i[tl]&&e.push(i[Ou])}function ZF(i){if(i[Rh]!==null){for(let e of i[Rh])e.impl.addSequence(e);i[Rh].length=0}}var eI=[];function uK(i){return i[ks]??hK(i)}function hK(i){let e=eI.pop()??Object.create(gK);return e.lView=i,e}function fK(i){i.lView[ks]!==i&&(i.lView=null,eI.push(i))}var gK=ot(Ie({},dp),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:i=>{Ap(i.lView)},consumerOnSignalRead(){this.lView[ks]=this}});function pK(i){let e=i[ks]??Object.create(mK);return e.lView=i,e}var mK=ot(Ie({},dp),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:i=>{let e=Su(i.lView);for(;e&&!tI(e[tn]);)e=Su(e);e&&N9(e)},consumerOnSignalRead(){this.lView[ks]=this}});function tI(i){return i.type!==2}function nI(i){if(i[ev]===null)return;let e=!0;for(;e;){let t=!1;for(let n of i[ev])n.dirty&&(t=!0,n.zone===null||Zone.current===n.zone?n.run():n.zone.run(()=>n.run()));e=t&&!!(i[zt]&8192)}}var xK=100;function iI(i,e=!0,t=0){let r=i[Jl].rendererFactory,o=!1;o||r.begin?.();try{_K(i,t)}catch(s){throw e&&$q(i,s),s}finally{o||r.end?.()}}function _K(i,e){let t=j9();try{b6(!0),FE(i,e);let n=0;for(;Pv(i);){if(n===xK)throw new je(103,!1);n++,FE(i,1)}}finally{b6(t)}}function vK(i,e,t,n){if(Qh(e))return;let r=e[zt],o=!1,s=!1;mP(e);let a=!0,l=null,c=null;o||(tI(i)?(c=uK(e),l=a_(c)):fM()===null?(a=!1,c=pK(e),l=a_(c)):e[ks]&&(vM(e[ks]),e[ks]=null));try{B9(e),q$(i.bindingStartIndex),t!==null&&KF(i,e,t,2,n);let d=(r&3)===3;if(!o)if(d){let g=i.preOrderCheckHooks;g!==null&&H_(e,g,null)}else{let g=i.preOrderHooks;g!==null&&G_(e,g,0,null),HM(e,0)}if(s||bK(e),nI(e),rI(e,0),i.contentQueries!==null&&PF(i,e),!o)if(d){let g=i.contentCheckHooks;g!==null&&H_(e,g)}else{let g=i.contentHooks;g!==null&&G_(e,g,1),HM(e,1)}yK(i,e);let h=i.components;h!==null&&sI(e,h,0);let p=i.viewQuery;if(p!==null&&CE(2,p,n),!o)if(d){let g=i.viewCheckHooks;g!==null&&H_(e,g)}else{let g=i.viewHooks;g!==null&&G_(e,g,2),HM(e,2)}if(i.firstUpdatePass===!0&&(i.firstUpdatePass=!1),e[UM]){for(let g of e[UM])g();e[UM]=null}o||(ZF(e),e[zt]&=-73)}catch(d){throw o||Ap(e),d}finally{c!==null&&(xM(c,l),a&&fK(c)),xP()}}function rI(i,e){for(let t=xF(i);t!==null;t=_F(t))for(let n=ts;n<t.length;n++){let r=t[n];oI(r,e)}}function bK(i){for(let e=xF(i);e!==null;e=_F(e)){if(!(e[zt]&2))continue;let t=e[Uh];for(let n=0;n<t.length;n++){let r=t[n];N9(r)}}}function CK(i,e,t){si(18);let n=Ja(e,i);oI(n,t),si(19,n[So])}function oI(i,e){cP(i)&&FE(i,e)}function FE(i,e){let n=i[tn],r=i[zt],o=i[ks],s=!!(e===0&&r&16);if(s||=!!(r&64&&e===0),s||=!!(r&1024),s||=!!(o?.dirty&&_M(o)),s||=!1,o&&(o.dirty=!1),i[zt]&=-9217,s)vK(n,i,n.template,i[So]);else if(r&8192){nI(i),rI(i,1);let a=n.components;a!==null&&sI(i,a,1),ZF(i)}}function sI(i,e,t){for(let n=0;n<e.length;n++)CK(i,e[n],t)}function yK(i,e){let t=i.hostBindingOpCodes;if(t!==null)try{for(let n=0;n<t.length;n++){let r=t[n];if(r<0)ku(~r);else{let o=r,s=t[++n],a=t[++n];Y$(s,o);let l=e[o];si(24,l),a(2,l),si(25,l)}}}finally{ku(-1)}}function HP(i,e){let t=j9()?64:1088;for(i[Jl].changeDetectionScheduler?.notify(e);i;){i[zt]|=t;let n=Su(i);if(nv(i)&&!n)return i;i=n}return null}function aI(i,e,t,n){return[i,!0,0,e,null,n,null,t,null,null]}function wK(i,e,t,n=!0){let r=e[tn];if(MK(r,e,i,t),n){let s=DE(t,i),a=e[yi],l=a.parentNode(i[Ou]);l!==null&&Jq(r,i[ca],a,e,l,s)}let o=e[J_];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function IE(i,e){if(i.length<=ts)return;let t=ts+e,n=i[t];if(n){let r=n[Pu];r!==null&&r!==i&&VP(r,n),e>0&&(i[t-1][sa]=n[sa]);let o=X_(i,ts+e);Qq(n[tn],n);let s=o[Zl];s!==null&&s.detachView(o[tn]),n[jr]=null,n[sa]=null,n[zt]&=-129}return n}function MK(i,e,t,n){let r=ts+n,o=t.length;n>0&&(t[r-1][sa]=e),n<o-ts?(e[sa]=t[r],_9(t,ts+n,e)):(t.push(e),e[sa]=null),e[jr]=t;let s=e[Pu];s!==null&&t!==s&&lI(s,e);let a=e[Zl];a!==null&&a.insertView(i),lE(e),e[zt]|=128}function lI(i,e){let t=i[Uh],n=e[jr];if(id(n))i[zt]|=2;else{let r=n[jr][Xa];e[Xa]!==r&&(i[zt]|=2)}t===null?i[Uh]=[e]:t.push(e)}var Ep=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[tn];return uv(t,e,t.firstChild,[])}constructor(e,t,n=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=n}get context(){return this._lView[So]}set context(e){this._lView[So]=e}get destroyed(){return Qh(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[jr];if(nc(e)){let t=e[tv],n=t?t.indexOf(this):-1;n>-1&&(IE(e,n),X_(t,n))}this._attachedToViewContainer=!1}QF(this._lView[tn],this._lView)}onDestroy(e){L9(this._lView,e)}markForCheck(){HP(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[zt]&=-129}reattach(){lE(this._lView),this._lView[zt]|=128}detectChanges(){this._lView[zt]|=1024,iI(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new je(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=nv(this._lView),t=this._lView[Pu];t!==null&&!e&&VP(t,this._lView),XF(this._lView[tn],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new je(902,!1);this._appRef=e;let t=nv(this._lView),n=this._lView[Pu];n!==null&&!t&&lI(n,this._lView),lE(this._lView)}};var Du=(()=>{class i{static __NG_ELEMENT_ID__=OK}return i})(),EK=Du,PK=class extends EK{_declarationLView;_declarationTContainer;elementRef;constructor(e,t,n){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=n}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,n){let r=Yq(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:n});return new Ep(r)}};function OK(){return GP(oo(),Xt())}function GP(i,e){return i.type&4?new PK(e,i,Zh(i,e)):null}function Rv(i,e,t,n,r){let o=i.data[e];if(o===null)o=SK(i,e,t,n,r),K$()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=n,o.attrs=r;let s=G$();o.injectorIndex=s===null?-1:s.injectorIndex}return Iu(o,!0),o}function SK(i,e,t,n,r){let o=R9(),s=fP(),a=s?o:o&&o.parent,l=i.data[e]=AK(i,a,t,e,n,r);return kK(i,l,o,s),l}function kK(i,e,t,n){i.firstChild===null&&(i.firstChild=e),t!==null&&(n?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function AK(i,e,t,n,r,o){let s=e?e.injectorIndex:-1,a=0;return V$()&&(a|=128),{type:t,index:n,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var Z5e=new RegExp(`^(\\d+)*(${NW}|${BW})*(.*)`);var DK=()=>null;function U6(i,e){return DK(i,e)}var FK=class{},cI=class{},TE=class{resolveComponentFactory(e){throw Error(`No component factory found for ${Oo(e)}.`)}},of=class{static NULL=new TE},rd=class{},il=(()=>{class i{destroyNode=null;static __NG_ELEMENT_ID__=()=>IK()}return i})();function IK(){let i=Xt(),e=oo(),t=Ja(e.index,i);return(id(t)?t:i)[yi]}var TK=(()=>{class i{static \u0275prov=tt({token:i,providedIn:"root",factory:()=>null})}return i})();var WM={},BE=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,n){n=Cv(n);let r=this.injector.get(e,WM,n);return r!==WM||t===WM?r:this.parentInjector.get(e,t,n)}};function NE(i,e,t){let n=t?i.styles:null,r=t?i.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)r=eE(r,a);else if(o==2){let l=a,c=e[++s];n=eE(n,l+": "+c+";")}}t?i.styles=n:i.stylesWithoutHost=n,t?i.classes=r:i.classesWithoutHost=r}function ke(i,e=Yt.Default){let t=Xt();if(t===null)return ht(i,e);let n=oo();return iF(n,t,ro(i),e)}function dI(){let i="invalid";throw new Error(i)}function $P(i,e,t,n,r){let o=n===null?null:{"":-1},s=r(i,t);if(s!==null){let a,l=null,c=null,d=NK(s);d===null?a=s:[a,l,c]=d,zK(i,e,t,a,o,l,c)}o!==null&&n!==null&&BK(t,n,o)}function BK(i,e,t){let n=i.localNames=[];for(let r=0;r<e.length;r+=2){let o=t[e[r+1]];if(o==null)throw new je(-301,!1);n.push(e[r],o)}}function NK(i){let e=null,t=!1;for(let s=0;s<i.length;s++){let a=i[s];if(s===0&&aa(a)&&(e=a),a.findHostDirectiveDefs!==null){t=!0;break}}if(!t)return null;let n=null,r=null,o=null;for(let s of i)s.findHostDirectiveDefs!==null&&(n??=[],r??=new Map,o??=new Map,LK(s,n,o,r)),s===e&&(n??=[],n.push(s));return n!==null?(n.push(...e===null?i:i.slice(1)),[n,r,o]):null}function LK(i,e,t,n){let r=e.length;i.findHostDirectiveDefs(i,e,n),t.set(i,[r,e.length-1])}function RK(i,e,t){e.componentOffset=t,(i.components??=[]).push(e.index)}function zK(i,e,t,n,r,o,s){let a=n.length,l=!1;for(let p=0;p<a;p++){let g=n[p];!l&&aa(g)&&(l=!0,RK(i,t,p)),hE(sv(t,e),i,g.type)}$K(t,i.data.length,a);for(let p=0;p<a;p++){let g=n[p];g.providersResolver&&g.providersResolver(g)}let c=!1,d=!1,h=WF(i,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let p=0;p<a;p++){let g=n[p];if(t.mergedAttrs=Gh(t.mergedAttrs,g.hostAttrs),VK(i,t,e,h,g),GK(h,g,r),s!==null&&s.has(g)){let[b,C]=s.get(g);t.directiveToIndex.set(g.type,[h,b+t.directiveStart,C+t.directiveStart])}else(o===null||!o.has(g))&&t.directiveToIndex.set(g.type,h);g.contentQueries!==null&&(t.flags|=4),(g.hostBindings!==null||g.hostAttrs!==null||g.hostVars!==0)&&(t.flags|=64);let _=g.type.prototype;!c&&(_.ngOnChanges||_.ngOnInit||_.ngDoCheck)&&((i.preOrderHooks??=[]).push(t.index),c=!0),!d&&(_.ngOnChanges||_.ngDoCheck)&&((i.preOrderCheckHooks??=[]).push(t.index),d=!0),h++}jK(i,t,o)}function jK(i,e,t){for(let n=e.directiveStart;n<e.directiveEnd;n++){let r=i.data[n];if(t===null||!t.has(r))H6(0,e,r,n),H6(1,e,r,n),$6(e,n,!1);else{let o=t.get(r);G6(0,e,o,n),G6(1,e,o,n),$6(e,n,!0)}}}function H6(i,e,t,n){let r=i===0?t.inputs:t.outputs;for(let o in r)if(r.hasOwnProperty(o)){let s;i===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(n),uI(e,o)}}function G6(i,e,t,n){let r=i===0?t.inputs:t.outputs;for(let o in r)if(r.hasOwnProperty(o)){let s=r[o],a;i===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(n,o),uI(e,s)}}function uI(i,e){e==="class"?i.flags|=8:e==="style"&&(i.flags|=16)}function $6(i,e,t){let{attrs:n,inputs:r,hostDirectiveInputs:o}=i;if(n===null||!t&&r===null||t&&o===null||FP(i)){i.initialInputs??=[],i.initialInputs.push(null);return}let s=null,a=0;for(;a<n.length;){let l=n[a];if(l===0){a+=4;continue}else if(l===5){a+=2;continue}else if(typeof l=="number")break;if(!t&&r.hasOwnProperty(l)){let c=r[l];for(let d of c)if(d===e){s??=[],s.push(l,n[a+1]);break}}else if(t&&o.hasOwnProperty(l)){let c=o[l];for(let d=0;d<c.length;d+=2)if(c[d]===e){s??=[],s.push(c[d+1],n[a+1]);break}}a+=2}i.initialInputs??=[],i.initialInputs.push(s)}function VK(i,e,t,n,r){i.data[n]=r;let o=r.factory||(r.factory=yu(r.type,!0)),s=new Au(o,aa(r),ke);i.blueprint[n]=s,t[n]=s,UK(i,e,n,WF(i,t,r.hostVars,ss),r)}function UK(i,e,t,n,r){let o=r.hostBindings;if(o){let s=i.hostBindingOpCodes;s===null&&(s=i.hostBindingOpCodes=[]);let a=~e.index;HK(s)!=a&&s.push(a),s.push(t,n,o)}}function HK(i){let e=i.length;for(;e>0;){let t=i[--e];if(typeof t=="number"&&t<0)return t}return 0}function GK(i,e,t){if(t){if(e.exportAs)for(let n=0;n<e.exportAs.length;n++)t[e.exportAs[n]]=i;aa(e)&&(t[""]=i)}}function $K(i,e,t){i.flags|=1,i.directiveStart=e,i.directiveEnd=e+t,i.providerIndexes=e}function hI(i,e,t,n,r,o,s,a){let l=e.consts,c=Hh(l,s),d=Rv(e,i,2,n,c);return o&&$P(e,t,d,Hh(l,a),r),d.mergedAttrs=Gh(d.mergedAttrs,d.attrs),d.attrs!==null&&NE(d,d.attrs,!1),d.mergedAttrs!==null&&NE(d,d.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,d),d}function fI(i,e){_P(i,e),lP(e)&&i.queries.elementEnd(e)}var hv=class extends of{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Mu(e);return new Wh(t,this.ngModule)}};function WK(i){return Object.keys(i).map(e=>{let[t,n,r]=i[e],o={propName:t,templateName:e,isSignal:(n&Iv.SignalBased)!==0};return r&&(o.transform=r),o})}function qK(i){return Object.keys(i).map(e=>({propName:i[e],templateName:e}))}function KK(i,e,t){let n=e instanceof zr?e:e?.injector;return n&&i.getStandaloneInjector!==null&&(n=i.getStandaloneInjector(n)||n),n?new BE(t,n):t}function YK(i){let e=i.get(rd,null);if(e===null)throw new je(407,!1);let t=i.get(TK,null),n=i.get($h,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:n}}function XK(i,e){let t=(i.selectors[0][0]||"div").toLowerCase();return UF(e,t,t==="svg"?A$:t==="math"?D$:null)}var Wh=class extends cI{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=WK(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=qK(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=yq(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,n,r){si(22);let o=dn(null);try{let s=this.componentDef,a=n?["ng-version","19.2.11"]:wq(this.componentDef.selectors[0]),l=IP(0,null,null,1,0,null,null,null,null,[a],null),c=KK(s,r||this.ngModule,e),d=YK(c),h=d.rendererFactory.createRenderer(null,s),p=n?Iq(h,n,s.encapsulation,c):XK(s,h),g=TP(null,l,null,512|$F(s),null,null,d,h,c,null,EF(p,c,!0));g[ns]=p,mP(g);let _=null;try{let b=hI(ns,l,g,"#host",()=>[this.componentDef],!0,0);p&&(GF(h,p,b),ef(p,g)),Tv(l,g,b),kP(l,b,g),fI(l,b),t!==void 0&&QK(b,this.ngContentSelectors,t),_=Ja(b.index,g),g[So]=_[So],zP(l,g,null)}catch(b){throw _!==null&&_E(_),_E(g),b}finally{si(23),xP()}return new LE(this.componentType,g)}finally{dn(o)}}},LE=class extends FK{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t){super(),this._rootLView=t,this._tNode=I9(t[tn],ns),this.location=Zh(this._tNode,t),this.instance=Ja(this._tNode.index,t)[So],this.hostView=this.changeDetectorRef=new Ep(t,void 0,!1),this.componentType=e}setInput(e,t){let n=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let r=this._rootLView,o=RP(n,r[tn],r,e,t);this.previousInputValues.set(e,t);let s=Ja(n.index,r);HP(s,1)}get injector(){return new bu(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function QK(i,e,t){let n=i.projection=[];for(let r=0;r<e.length;r++){let o=t[r];n.push(o!=null&&o.length?Array.from(o):null)}}var ld=(()=>{class i{static __NG_ELEMENT_ID__=JK}return i})();function JK(){let i=oo();return pI(i,Xt())}var ZK=ld,gI=class extends ZK{_lContainer;_hostTNode;_hostLView;constructor(e,t,n){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=n}get element(){return Zh(this._hostTNode,this._hostLView)}get injector(){return new bu(this._hostTNode,this._hostLView)}get parentInjector(){let e=vP(this._hostTNode,this._hostLView);if(Q9(e)){let t=rv(e,this._hostLView),n=iv(e),r=t[tn].data[n+8];return new bu(r,t)}else return new bu(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=W6(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-ts}createEmbeddedView(e,t,n){let r,o;typeof n=="number"?r=n:n!=null&&(r=n.index,o=n.injector);let s=U6(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,r,j6(this._hostTNode,s)),a}createComponent(e,t,n,r,o){let s=e&&!P$(e),a;if(s)a=t;else{let _=t||{};a=_.index,n=_.injector,r=_.projectableNodes,o=_.environmentInjector||_.ngModuleRef}let l=s?e:new Wh(Mu(e)),c=n||this.parentInjector;if(!o&&l.ngModule==null){let b=(s?c:this.parentInjector).get(zr,null);b&&(o=b)}let d=Mu(l.componentType??{}),h=U6(this._lContainer,d?.id??null),p=h?.firstChild??null,g=l.create(c,r,p,o);return this.insertImpl(g.hostView,a,j6(this._hostTNode,h)),g}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,n){let r=e._lView;if(T$(r)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=r[jr],c=new gI(l,l[ca],l[jr]);c.detach(c.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return wK(s,r,o,n),e.attachToViewContainerRef(),_9(qM(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=W6(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),n=IE(this._lContainer,t);n&&(X_(qM(this._lContainer),t),QF(n[tn],n))}detach(e){let t=this._adjustIndex(e,-1),n=IE(this._lContainer,t);return n&&X_(qM(this._lContainer),t)!=null?new Ep(n):null}_adjustIndex(e,t=0){return e??this.length+t}};function W6(i){return i[tv]}function qM(i){return i[tv]||(i[tv]=[])}function pI(i,e){let t,n=e[i.index];return nc(n)?t=n:(t=aI(n,e,null,i),e[i.index]=t,BP(e,t)),tY(t,e,i,n),new gI(t,i,e)}function eY(i,e){let t=i[yi],n=t.createComment(""),r=nl(e,i),o=t.parentNode(r);return dv(t,o,n,t.nextSibling(r),!1),n}var tY=rY,nY=()=>!1;function iY(i,e,t){return nY(i,e,t)}function rY(i,e,t,n){if(i[Ou])return;let r;t.type&8?r=Qa(n):r=eY(e,t),i[Ou]=r}var RE=class i{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new i(this.queryList)}setDirty(){this.queryList.setDirty()}},zE=class i{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let n=e.contentQueries!==null?e.contentQueries[0]:t.length,r=[];for(let o=0;o<n;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];r.push(a.clone())}return new i(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)WP(e,t).matches!==null&&this.queries[t].setDirty()}},jE=class{flags;read;predicate;constructor(e,t,n=null){this.flags=t,this.read=n,typeof e=="string"?this.predicate=hY(e):this.predicate=e}},VE=class i{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let n=0;n<this.length;n++){let r=t!==null?t.length:0,o=this.getByIndex(n).embeddedTView(e,r);o&&(o.indexInDeclarationView=n,t!==null?t.push(o):t=[o])}return t!==null?new i(t):null}template(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},UE=class i{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new i(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,n=e.parent;for(;n!==null&&n.type&8&&n.index!==t;)n=n.parent;return t===(n!==null?n.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){let o=n[r];this.matchTNodeWithReadOption(e,t,oY(t,o)),this.matchTNodeWithReadOption(e,t,$_(t,e,o,!1,!1))}else n===Du?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,$_(t,e,n,!1,!1))}matchTNodeWithReadOption(e,t,n){if(n!==null){let r=this.metadata.read;if(r!==null)if(r===Ur||r===ld||r===Du&&t.type&4)this.addMatch(t.index,-2);else{let o=$_(t,e,r,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,n)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function oY(i,e){let t=i.localNames;if(t!==null){for(let n=0;n<t.length;n+=2)if(t[n]===e)return t[n+1]}return null}function sY(i,e){return i.type&11?Zh(i,e):i.type&4?GP(i,e):null}function aY(i,e,t,n){return t===-1?sY(e,i):t===-2?lY(i,e,n):Mp(i,i[tn],t,e)}function lY(i,e,t){if(t===Ur)return Zh(e,i);if(t===Du)return GP(e,i);if(t===ld)return pI(e,i)}function mI(i,e,t,n){let r=e[Zl].queries[n];if(r.matches===null){let o=i.data,s=t.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let c=s[l];if(c<0)a.push(null);else{let d=o[c];a.push(aY(e,d,s[l+1],t.metadata.read))}}r.matches=a}return r.matches}function HE(i,e,t,n){let r=i.queries.getByIndex(t),o=r.matches;if(o!==null){let s=mI(i,e,r,t);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)n.push(s[a/2]);else{let c=o[a+1],d=e[-l];for(let h=ts;h<d.length;h++){let p=d[h];p[Pu]===p[jr]&&HE(p[tn],p,c,n)}if(d[Uh]!==null){let h=d[Uh];for(let p=0;p<h.length;p++){let g=h[p];HE(g[tn],g,c,n)}}}}}return n}function cY(i,e){return i[Zl].queries[e].queryList}function dY(i,e,t){let n=new xE((t&4)===4);return L$(i,e,n,n.destroy),(e[Zl]??=new zE).queries.push(new RE(n))-1}function uY(i,e,t){let n=Ui();return n.firstCreatePass&&(fY(n,new jE(i,e,t),-1),(e&2)===2&&(n.staticViewQueries=!0)),dY(n,Xt(),e)}function hY(i){return i.split(",").map(e=>e.trim())}function fY(i,e,t){i.queries===null&&(i.queries=new VE),i.queries.track(new UE(e,t))}function WP(i,e){return i.queries.getByIndex(e)}function gY(i,e){let t=i[tn],n=WP(t,e);return n.crossesNgTemplate?HE(t,i,e,[]):mI(t,i,n,e)}function pY(i){let e=[],t=new Map;function n(r){let o=t.get(r);if(!o){let s=i(r);t.set(r,o=s.then(vY))}return o}return fv.forEach((r,o)=>{let s=[];r.templateUrl&&s.push(n(r.templateUrl).then(c=>{r.template=c}));let a=typeof r.styles=="string"?[r.styles]:r.styles||[];if(r.styles=a,r.styleUrl&&r.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(r.styleUrls?.length){let c=r.styles.length,d=r.styleUrls;r.styleUrls.forEach((h,p)=>{a.push(""),s.push(n(h).then(g=>{a[c+p]=g,d.splice(d.indexOf(h),1),d.length==0&&(r.styleUrls=void 0)}))})}else r.styleUrl&&s.push(n(r.styleUrl).then(c=>{a.push(c),r.styleUrl=void 0}));let l=Promise.all(s).then(()=>bY(o));e.push(l)}),xY(),Promise.all(e).then(()=>{})}var fv=new Map,mY=new Set;function xY(){let i=fv;return fv=new Map,i}function _Y(){return fv.size===0}function vY(i){return typeof i=="string"?i:i.text()}function bY(i){mY.delete(i)}var qh=class{},qP=class{};var gv=class extends qh{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new hv(this);constructor(e,t,n,r=!0){super(),this.ngModuleType=e,this._parent=t;let o=C9(e);this._bootstrapComponents=jF(o.bootstrap),this._r3Injector=sF(e,t,[{provide:qh,useValue:this},{provide:of,useValue:this.componentFactoryResolver},...n],Oo(e),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},pv=class extends qP{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new gv(this.moduleType,e,[])}};function CY(i,e,t){return new gv(i,e,t,!1)}var GE=class extends qh{injector;componentFactoryResolver=new hv(this);instance=null;constructor(e){super();let t=new yp([...e.providers,{provide:qh,useValue:this},{provide:of,useValue:this.componentFactoryResolver}],e.parent||sP(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Np(i,e,t=null){return new GE({providers:i,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var yY=(()=>{class i{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let n=y9(!1,t.type),r=n.length>0?Np([n],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=tt({token:i,providedIn:"environment",factory:()=>new i(ht(zr))})}return i})();function Ke(i){return Sp(()=>{let e=xI(i),t=ot(Ie({},e),{decls:i.decls,vars:i.vars,template:i.template,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,onPush:i.changeDetection===pF.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&i.dependencies||null,getStandaloneInjector:e.standalone?r=>r.get(yY).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:i.signals??!1,data:i.data||{},encapsulation:i.encapsulation||el.Emulated,styles:i.styles||Po,_:null,schemas:i.schemas||null,tView:null,id:""});e.standalone&&rf("NgStandalone"),_I(t);let n=i.dependencies;return t.directiveDefs=q6(n,!1),t.pipeDefs=q6(n,!0),t.id=OY(t),t})}function wY(i){return Mu(i)||h$(i)}function MY(i){return i!==null}function bn(i){return Sp(()=>({type:i.type,bootstrap:i.bootstrap||Po,declarations:i.declarations||Po,imports:i.imports||Po,exports:i.exports||Po,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function EY(i,e){if(i==null)return wu;let t={};for(let n in i)if(i.hasOwnProperty(n)){let r=i[n],o,s,a,l;Array.isArray(r)?(a=r[0],o=r[1],s=r[2]??o,l=r[3]||null):(o=r,s=r,a=Iv.None,l=null),t[o]=[n,a,l],e[o]=s}return t}function PY(i){if(i==null)return wu;let e={};for(let t in i)i.hasOwnProperty(t)&&(e[i[t]]=t);return e}function Sn(i){return Sp(()=>{let e=xI(i);return _I(e),e})}function zv(i){return{type:i.type,name:i.name,factory:null,pure:i.pure!==!1,standalone:i.standalone??!0,onDestroy:i.type.prototype.ngOnDestroy||null}}function xI(i){let e={};return{type:i.type,providersResolver:null,factory:null,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:e,inputConfig:i.inputs||wu,exportAs:i.exportAs||null,standalone:i.standalone??!0,signals:i.signals===!0,selectors:i.selectors||Po,viewQuery:i.viewQuery||null,features:i.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:EY(i.inputs,e),outputs:PY(i.outputs),debugInfo:null}}function _I(i){i.features?.forEach(e=>e(i))}function q6(i,e){if(!i)return null;let t=e?f$:wY;return()=>(typeof i=="function"?i():i).map(n=>t(n)).filter(MY)}function OY(i){let e=0,t=typeof i.consts=="function"?"":i.consts,n=[i.selectors,i.ngContentSelectors,i.hostVars,i.hostAttrs,t,i.vars,i.decls,i.encapsulation,i.standalone,i.signals,i.exportAs,JSON.stringify(i.inputs),JSON.stringify(i.outputs),Object.getOwnPropertyNames(i.type.prototype),!!i.contentQueries,!!i.viewQuery];for(let o of n.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function SY(i){return Object.getPrototypeOf(i.prototype).constructor}function Er(i){let e=SY(i.type),t=!0,n=[i];for(;e;){let r;if(aa(i))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new je(903,!1);r=e.\u0275dir}if(r){if(t){n.push(r);let s=i;s.inputs=KM(i.inputs),s.declaredInputs=KM(i.declaredInputs),s.outputs=KM(i.outputs);let a=r.hostBindings;a&&IY(i,a);let l=r.viewQuery,c=r.contentQueries;if(l&&DY(i,l),c&&FY(i,c),kY(i,r),GG(i.outputs,r.outputs),aa(r)&&r.data.animation){let d=i.data;d.animation=(d.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(i),a===Er&&(t=!1)}}e=Object.getPrototypeOf(e)}AY(n)}function kY(i,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||i.inputs.hasOwnProperty(t))continue;let n=e.inputs[t];n!==void 0&&(i.inputs[t]=n,i.declaredInputs[t]=e.declaredInputs[t])}}function AY(i){let e=0,t=null;for(let n=i.length-1;n>=0;n--){let r=i[n];r.hostVars=e+=r.hostVars,r.hostAttrs=Gh(r.hostAttrs,t=Gh(t,r.hostAttrs))}}function KM(i){return i===wu?{}:i===Po?[]:i}function DY(i,e){let t=i.viewQuery;t?i.viewQuery=(n,r)=>{e(n,r),t(n,r)}:i.viewQuery=e}function FY(i,e){let t=i.contentQueries;t?i.contentQueries=(n,r,o)=>{e(n,r,o),t(n,r,o)}:i.contentQueries=e}function IY(i,e){let t=i.hostBindings;t?i.hostBindings=(n,r)=>{e(n,r),t(n,r)}:i.hostBindings=e}function vI(i){return BY(i)?Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i:!1}function TY(i,e){if(Array.isArray(i))for(let t=0;t<i.length;t++)e(i[t]);else{let t=i[Symbol.iterator](),n;for(;!(n=t.next()).done;)e(n.value)}}function BY(i){return i!==null&&(typeof i=="function"||typeof i=="object")}function Lp(i,e,t){return i[e]=t}function NY(i,e){return i[e]}function la(i,e,t){let n=i[e];return Object.is(n,t)?!1:(i[e]=t,!0)}function Pp(i,e,t,n){let r=la(i,e,t);return la(i,e+1,n)||r}function LY(i,e,t,n,r){let o=Pp(i,e,t,n);return la(i,e+2,r)||o}function RY(i,e,t,n,r,o){let s=Pp(i,e,t,n);return Pp(i,e+2,r,o)||s}function zY(i,e,t,n,r,o,s,a,l){let c=e.consts,d=Rv(e,i,4,s||null,a||null);hP()&&$P(e,t,d,Hh(c,l),LP),d.mergedAttrs=Gh(d.mergedAttrs,d.attrs),_P(e,d);let h=d.tView=IP(2,d,n,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return e.queries!==null&&(e.queries.template(e,d),h.queries=e.queries.embeddedTView(d)),d}function jY(i,e,t,n,r,o,s,a,l,c){let d=t+ns,h=e.firstCreatePass?zY(d,e,i,n,r,o,s,a,l):e.data[d];Iu(h,!1);let p=VY(e,i,h,t);Ov()&&Nv(e,i,p,h),ef(p,i);let g=aI(p,i,p,h);return i[d]=g,BP(i,g),iY(g,h,i),Ev(h)&&Tv(e,i,h),l!=null&&NP(i,h,c),h}function ee(i,e,t,n,r,o,s,a){let l=Xt(),c=Ui(),d=Hh(c.consts,o);return jY(l,c,i,e,t,n,r,d,s,a),ee}var VY=UY;function UY(i,e,t,n){return Sv(!0),e[yi].createComment("")}var KP=(()=>{class i{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(n){return new(n||i)};static \u0275prov=tt({token:i,factory:i.\u0275fac,providedIn:"platform"})}return i})();var YP=new Ze(""),Rp=new Ze(""),jv=(()=>{class i{_ngZone;registry;_isZoneStable=!0;_callbacks=[];taskTrackingZone=null;constructor(t,n,r){this._ngZone=t,this.registry=n,XP||(HY(r),r.addToWindow(n)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{On.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(n=>n.updateCb&&n.updateCb(t)?(clearTimeout(n.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,n,r){let o=-1;n&&n>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},n)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:r})}whenStable(t,n,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,n,r),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,n,r){return[]}static \u0275fac=function(n){return new(n||i)(ht(On),ht(Vv),ht(Rp))};static \u0275prov=tt({token:i,factory:i.\u0275fac})}return i})(),Vv=(()=>{class i{_applications=new Map;registerApplication(t,n){this._applications.set(t,n)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,n=!0){return XP?.findTestabilityInTree(this,t,n)??null}static \u0275fac=function(n){return new(n||i)};static \u0275prov=tt({token:i,factory:i.\u0275fac,providedIn:"platform"})}return i})();function HY(i){XP=i}var XP,GY=(()=>{class i{static \u0275prov=tt({token:i,providedIn:"root",factory:()=>new $E})}return i})(),$E=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let t=e.zone,n=this.queues.get(t);n.has(e)&&(n.delete(e),this.queuedEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let n=this.queues.get(t);n.has(e)||(this.queuedEffectCount++,n.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}};function Tu(i){return!!i&&typeof i.then=="function"}function bI(i){return!!i&&typeof i.subscribe=="function"}var CI=new Ze("");function QP(i){return od([{provide:CI,multi:!0,useValue:i}])}var yI=(()=>{class i{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,n)=>{this.resolve=t,this.reject=n});appInits=$e(CI,{optional:!0})??[];injector=$e(pr);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let r of this.appInits){let o=ko(this.injector,r);if(Tu(o))t.push(o);else if(bI(o)){let s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});t.push(s)}}let n=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{n()}).catch(r=>{this.reject(r)}),t.length===0&&n(),this.initialized=!0}static \u0275fac=function(n){return new(n||i)};static \u0275prov=tt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),JP=new Ze("");function $Y(){CM(()=>{throw new je(600,!1)})}function WY(i){return i.isBoundToModule}var qY=10;function wI(i,e){return Array.isArray(e)?e.reduce(wI,i):Ie(Ie({},i),e)}var is=(()=>{class i{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=$e(MW);afterRenderManager=$e(MF);zonelessEnabled=$e(CP);rootEffectScheduler=$e(GY);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new Pn;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=$e(ic).hasPendingTasks.pipe(Jt(t=>!t));constructor(){$e(nf,{optional:!0})}whenStable(){let t;return new Promise(n=>{t=this.isStable.subscribe({next:r=>{r&&n()}})}).finally(()=>{t.unsubscribe()})}_injector=$e(zr);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,n){return this.bootstrapImpl(t,n)}bootstrapImpl(t,n,r=pr.NULL){si(10);let o=t instanceof cI;if(!this._injector.get(yI).done){let g="";throw new je(405,g)}let a;o?a=t:a=this._injector.get(of).resolveComponentFactory(t),this.componentTypes.push(a.componentType);let l=WY(a)?void 0:this._injector.get(qh),c=n||a.selector,d=a.create(r,[],c,l),h=d.location.nativeElement,p=d.injector.get(YP,null);return p?.registerApplication(h),d.onDestroy(()=>{this.detachView(d.hostView),W_(this.components,d),p?.unregisterApplication(h)}),this._loadComponent(d),si(11,d),d}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){si(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(OP.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new je(101,!1);let t=dn(null);try{this._runningTick=!0,this.synchronize()}catch(n){this.internalErrorHandler(n)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,dn(t),this.afterTick.next(),si(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(rd,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<qY;)si(14),this.synchronizeOnce(),si(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let t=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:n,notifyErrorHandler:r}of this.allViews)KY(n,r,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Pv(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let n=t;this._views.push(n),n.attachToAppRef(this)}detachView(t){let n=t;W_(this._views,n),n.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(JP,[]).forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>W_(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new je(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(n){return new(n||i)};static \u0275prov=tt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function W_(i,e){let t=i.indexOf(e);t>-1&&i.splice(t,1)}function KY(i,e,t,n){if(!t&&!Pv(i))return;iI(i,e,t&&!n?0:1)}function wi(i,e,t,n){let r=Xt(),o=Dp();if(la(r,o,e)){let s=Ui(),a=Fp();Vq(a,r,i,e,t,n)}return wi}function ZP(i,e,t,n){return la(i,Dp(),t)?e+Cu(t)+n:ss}function YY(i,e,t,n,r,o){let s=W$(),a=Pp(i,s,t,r);return gP(2),a?e+Cu(t)+n+Cu(r)+o:ss}function j_(i,e){return i<<17|e<<2}function Fu(i){return i>>17&32767}function XY(i){return(i&2)==2}function QY(i,e){return i&131071|e<<17}function WE(i){return i|2}function Kh(i){return(i&131068)>>2}function YM(i,e){return i&-131069|e<<2}function JY(i){return(i&1)===1}function qE(i){return i|1}function ZY(i,e,t,n,r,o){let s=o?e.classBindings:e.styleBindings,a=Fu(s),l=Kh(s);i[n]=t;let c=!1,d;if(Array.isArray(t)){let h=t;d=h[1],(d===null||kp(h,d)>0)&&(c=!0)}else d=t;if(r)if(l!==0){let p=Fu(i[a+1]);i[n+1]=j_(p,a),p!==0&&(i[p+1]=YM(i[p+1],n)),i[a+1]=QY(i[a+1],n)}else i[n+1]=j_(a,0),a!==0&&(i[a+1]=YM(i[a+1],n)),a=n;else i[n+1]=j_(l,0),a===0?a=n:i[l+1]=YM(i[l+1],n),l=n;c&&(i[n+1]=WE(i[n+1])),K6(i,d,n,!0),K6(i,d,n,!1),eX(e,d,i,n,o),s=j_(a,l),o?e.classBindings=s:e.styleBindings=s}function eX(i,e,t,n,r){let o=r?i.residualClasses:i.residualStyles;o!=null&&typeof e=="string"&&kp(o,e)>=0&&(t[n+1]=qE(t[n+1]))}function K6(i,e,t,n){let r=i[t+1],o=e===null,s=n?Fu(r):Kh(r),a=!1;for(;s!==0&&(a===!1||o);){let l=i[s],c=i[s+1];tX(l,e)&&(a=!0,i[s+1]=n?qE(c):WE(c)),s=n?Fu(c):Kh(c)}a&&(i[t+1]=n?WE(r):qE(r))}function tX(i,e){return i===null||e==null||(Array.isArray(i)?i[1]:i)===e?!0:Array.isArray(i)&&typeof e=="string"?kp(i,e)>=0:!1}var oa={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function nX(i){return i.substring(oa.key,oa.keyEnd)}function iX(i){return rX(i),MI(i,EI(i,0,oa.textEnd))}function MI(i,e){let t=oa.textEnd;return t===e?-1:(e=oa.keyEnd=oX(i,oa.key=e,t),EI(i,e,t))}function rX(i){oa.key=0,oa.keyEnd=0,oa.value=0,oa.valueEnd=0,oa.textEnd=i.length}function EI(i,e,t){for(;e<t&&i.charCodeAt(e)<=32;)e++;return e}function oX(i,e,t){for(;e<t&&i.charCodeAt(e)>32;)e++;return e}function S(i,e,t){let n=Xt(),r=Dp();if(la(n,r,e)){let o=Ui(),s=Fp();Bv(o,s,n,i,e,n[yi],t,!1)}return S}function KE(i,e,t,n,r){RP(e,i,t,r?"class":"style",n)}function It(i,e,t){return OI(i,e,t,!1),It}function xe(i,e){return OI(i,e,null,!0),xe}function ei(i){SI(uX,PI,i,!0)}function PI(i,e){for(let t=iX(e);t>=0;t=MI(e,t))yv(i,nX(e),!0)}function OI(i,e,t,n){let r=Xt(),o=Ui(),s=gP(2);if(o.firstUpdatePass&&AI(o,i,s,n),e!==ss&&la(r,s,e)){let a=o.data[sd()];DI(o,a,r,r[yi],i,r[s+1]=fX(e,t),n,s)}}function SI(i,e,t,n){let r=Ui(),o=gP(2);r.firstUpdatePass&&AI(r,null,o,n);let s=Xt();if(t!==ss&&la(s,o,t)){let a=r.data[sd()];if(FI(a,n)&&!kI(r,o)){let l=n?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(t=eE(l,t||"")),KE(r,a,s,t,n)}else hX(r,a,s,s[yi],s[o+1],s[o+1]=dX(i,e,t),n,o)}}function kI(i,e){return e>=i.expandoStartIndex}function AI(i,e,t,n){let r=i.data;if(r[t+1]===null){let o=r[sd()],s=kI(i,t);FI(o,n)&&e===null&&!s&&(e=!1),e=sX(r,o,e,n),ZY(r,o,e,t,s,n)}}function sX(i,e,t,n){let r=V9(i),o=n?e.residualClasses:e.residualStyles;if(r===null)(n?e.classBindings:e.styleBindings)===0&&(t=XM(null,i,e,t,n),t=Op(t,e.attrs,n),o=null);else{let s=e.directiveStylingLast;if(s===-1||i[s]!==r)if(t=XM(r,i,e,t,n),o===null){let l=aX(i,e,n);l!==void 0&&Array.isArray(l)&&(l=XM(null,i,e,l[1],n),l=Op(l,e.attrs,n),lX(i,e,n,l))}else o=cX(i,e,n)}return o!==void 0&&(n?e.residualClasses=o:e.residualStyles=o),t}function aX(i,e,t){let n=t?e.classBindings:e.styleBindings;if(Kh(n)!==0)return i[Fu(n)]}function lX(i,e,t,n){let r=t?e.classBindings:e.styleBindings;i[Fu(r)]=n}function cX(i,e,t){let n,r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++){let s=i[o].hostAttrs;n=Op(n,s,t)}return Op(n,e.attrs,t)}function XM(i,e,t,n,r){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],n=Op(n,o.hostAttrs,r),o!==i);)a++;return i!==null&&(t.directiveStylingLast=a),n}function Op(i,e,t){let n=t?1:2,r=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?r=s:r===n&&(Array.isArray(i)||(i=i===void 0?[]:["",i]),yv(i,s,t?!0:e[++o]))}return i===void 0?null:i}function dX(i,e,t){if(t==null||t==="")return Po;let n=[],r=Ds(t);if(Array.isArray(r))for(let o=0;o<r.length;o++)i(n,r[o],!0);else if(typeof r=="object")for(let o in r)r.hasOwnProperty(o)&&i(n,o,r[o]);else typeof r=="string"&&e(n,r);return n}function uX(i,e,t){let n=String(e);n!==""&&!n.includes(" ")&&yv(i,n,t)}function hX(i,e,t,n,r,o,s,a){r===ss&&(r=Po);let l=0,c=0,d=0<r.length?r[0]:null,h=0<o.length?o[0]:null;for(;d!==null||h!==null;){let p=l<r.length?r[l+1]:void 0,g=c<o.length?o[c+1]:void 0,_=null,b;d===h?(l+=2,c+=2,p!==g&&(_=h,b=g)):h===null||d!==null&&d<h?(l+=2,_=d):(c+=2,_=h,b=g),_!==null&&DI(i,e,t,n,_,b,s,a),d=l<r.length?r[l]:null,h=c<o.length?o[c]:null}}function DI(i,e,t,n,r,o,s,a){if(!(e.type&3))return;let l=i.data,c=l[a+1],d=JY(c)?Y6(l,e,t,r,Kh(c),s):void 0;if(!mv(d)){mv(o)||XY(c)&&(o=Y6(l,null,t,r,a,s));let h=F9(sd(),t);cK(n,s,h,r,o)}}function Y6(i,e,t,n,r,o){let s=e===null,a;for(;r>0;){let l=i[r],c=Array.isArray(l),d=c?l[1]:l,h=d===null,p=t[r+1];p===ss&&(p=h?Po:void 0);let g=h?jM(p,n):d===n?p:void 0;if(c&&!mv(g)&&(g=jM(l,n)),mv(g)&&(a=g,s))return a;let _=i[r+1];r=s?Fu(_):Kh(_)}if(e!==null){let l=o?e.residualClasses:e.residualStyles;l!=null&&(a=jM(l,n))}return a}function mv(i){return i!==void 0}function fX(i,e){return i==null||i===""||(typeof e=="string"?i=i+e:typeof i=="object"&&(i=Oo(Ds(i)))),i}function FI(i,e){return(i.flags&(e?8:16))!==0}function Uv(i,e,t){let n=Xt(),r=ZP(n,i,e,t);SI(yv,PI,r,!0)}function u(i,e,t,n){let r=Xt(),o=Ui(),s=ns+i,a=r[yi],l=o.firstCreatePass?hI(s,o,r,e,LP,hP(),t,n):o.data[s],c=gX(o,r,l,a,e,i);r[s]=c;let d=Ev(l);return Iu(l,!0),GF(a,c,l),!YF(l)&&Ov()&&Nv(o,r,c,l),(R$()===0||d)&&ef(c,r),z$(),d&&(Tv(o,r,l),kP(o,l,r)),n!==null&&NP(r,l),u}function f(){let i=oo();fP()?z9():(i=i.parent,Iu(i,!1));let e=i;U$(e)&&H$(),j$();let t=Ui();return t.firstCreatePass&&fI(t,e),e.classesWithoutHost!=null&&nW(e)&&KE(t,e,Xt(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&iW(e)&&KE(t,e,Xt(),e.stylesWithoutHost,!1),f}function k(i,e,t,n){return u(i,e,t,n),f(),k}var gX=(i,e,t,n,r,o)=>(Sv(!0),UF(n,r,Z$()));function pX(i,e,t,n,r){let o=e.consts,s=Hh(o,n),a=Rv(e,i,8,"ng-container",s);s!==null&&NE(a,s,!0);let l=Hh(o,r);return hP()&&$P(e,t,a,l,LP),a.mergedAttrs=Gh(a.mergedAttrs,a.attrs),e.queries!==null&&e.queries.elementStart(e,a),a}function zp(i,e,t){let n=Xt(),r=Ui(),o=i+ns,s=r.firstCreatePass?pX(o,r,n,e,t):r.data[o];Iu(s,!0);let a=mX(r,n,s,i);return n[o]=a,Ov()&&Nv(r,n,a,s),ef(a,n),Ev(s)&&(Tv(r,n,s),kP(r,s,n)),t!=null&&NP(n,s),zp}function jp(){let i=oo(),e=Ui();return fP()?z9():(i=i.parent,Iu(i,!1)),e.firstCreatePass&&(_P(e,i),lP(i)&&e.queries.elementEnd(i)),jp}var mX=(i,e,t,n)=>(Sv(!0),Pq(e[yi],""));function Ae(){return Xt()}function eO(i,e,t){let n=Xt(),r=Dp();if(la(n,r,e)){let o=Ui(),s=Fp(),a=V9(o.data),l=Gq(a,s,n);Bv(o,s,n,i,e,l,t,!0)}return eO}var _u=void 0;function xX(i){let e=Math.floor(Math.abs(i)),t=i.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var _X=["en",[["a","p"],["AM","PM"],_u],[["AM","PM"],_u,_u],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],_u,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],_u,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",_u,"{1} 'at' {0}",_u],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",xX],QM={};function Fs(i){let e=vX(i),t=X6(e);if(t)return t;let n=e.split("-")[0];if(t=X6(n),t)return t;if(n==="en")return _X;throw new je(701,!1)}function X6(i){return i in QM||(QM[i]=Mr.ng&&Mr.ng.common&&Mr.ng.common.locales&&Mr.ng.common.locales[i]),QM[i]}var Hi=function(i){return i[i.LocaleId=0]="LocaleId",i[i.DayPeriodsFormat=1]="DayPeriodsFormat",i[i.DayPeriodsStandalone=2]="DayPeriodsStandalone",i[i.DaysFormat=3]="DaysFormat",i[i.DaysStandalone=4]="DaysStandalone",i[i.MonthsFormat=5]="MonthsFormat",i[i.MonthsStandalone=6]="MonthsStandalone",i[i.Eras=7]="Eras",i[i.FirstDayOfWeek=8]="FirstDayOfWeek",i[i.WeekendRange=9]="WeekendRange",i[i.DateFormat=10]="DateFormat",i[i.TimeFormat=11]="TimeFormat",i[i.DateTimeFormat=12]="DateTimeFormat",i[i.NumberSymbols=13]="NumberSymbols",i[i.NumberFormats=14]="NumberFormats",i[i.CurrencyCode=15]="CurrencyCode",i[i.CurrencySymbol=16]="CurrencySymbol",i[i.CurrencyName=17]="CurrencyName",i[i.Currencies=18]="Currencies",i[i.Directionality=19]="Directionality",i[i.PluralCase=20]="PluralCase",i[i.ExtraData=21]="ExtraData",i}(Hi||{});function vX(i){return i.toLowerCase().replace(/_/g,"-")}var xv="en-US";var bX=xv;function CX(i){typeof i=="string"&&(bX=i.toLowerCase().replace(/_/g,"-"))}function Q6(i,e,t){return function n(r){if(r===Function)return t;let o=Xh(i)?Ja(i.index,e):e;HP(o,5);let s=e[So],a=J6(e,s,t,r),l=n.__ngNextListenerFn__;for(;l;)a=J6(e,s,l,r)&&a,l=l.__ngNextListenerFn__;return a}}function J6(i,e,t,n){let r=dn(null);try{return si(6,e,t),t(n)!==!1}catch(o){return yX(i,o),!1}finally{si(7,e,t),dn(r)}}function yX(i,e){let t=i[Eu],n=t?t.get(Za,null):null;n&&n.handleError(e)}function Z6(i,e,t,n,r,o){let s=e[t],a=e[tn],c=a.data[t].outputs[n],d=s[c],h=a.firstCreatePass?uP(a):null,p=dP(e),g=d.subscribe(o),_=p.length;p.push(o,g),h&&h.push(r,i.index,_,-(_+1))}var wX=new Map;function U(i,e,t,n){let r=Xt(),o=Ui(),s=oo();return II(o,r,r[yi],s,i,e,n),U}function MX(i,e,t,n){let r=i.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let s=r[o];if(s===t&&r[o+1]===n){let a=e[Z_],l=r[o+2];return a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function II(i,e,t,n,r,o,s){let a=Ev(n),c=i.firstCreatePass?uP(i):null,d=dP(e),h=!0;if(n.type&3||s){let p=nl(n,e),g=s?s(p):p,_=d.length,b=s?y=>s(Qa(y[n.index])):n.index,C=null;if(!s&&a&&(C=MX(i,e,r,n.index)),C!==null){let y=C.__ngLastListenerFn__||C;y.__ngNextListenerFn__=o,C.__ngLastListenerFn__=o,h=!1}else{o=Q6(n,e,o);let y=e[Eu].get(kv);wX.get(y)?.(g,r,o);let O=t.listen(g,r,o);d.push(o,O),c&&c.push(r,b,_,_+1)}}else o=Q6(n,e,o);if(h){let p=n.outputs?.[r],g=n.hostDirectiveOutputs?.[r];if(g&&g.length)for(let _=0;_<g.length;_+=2){let b=g[_],C=g[_+1];Z6(n,e,b,C,r,o)}if(p&&p.length)for(let _ of p)Z6(n,e,_,r,r,o)}}function F(i=1){return J$(i)}function Vp(i,e,t){return sc(i,"",e,"",t),Vp}function sc(i,e,t,n,r){let o=Xt(),s=ZP(o,e,t,n);if(s!==ss){let a=Ui(),l=Fp();Bv(a,l,o,i,s,o[yi],r,!1)}return sc}function Gi(i,e,t){uY(i,e,t)}function Di(i){let e=Xt(),t=Ui(),n=U9();pP(n+1);let r=WP(t,n);if(i.dirty&&I$(e)===((r.metadata.flags&2)===2)){if(r.matches===null)i.reset([]);else{let o=gY(e,n);i.reset(o,OW),i.notifyOnChanges()}return!0}return!1}function Fi(){return cY(Xt(),U9())}function EX(i,e,t,n){t>=i.data.length&&(i.data[t]=null,i.blueprint[t]=null),e[t]=n}function ua(i){let e=$$();return T9(e,ns+i)}function m(i,e=""){let t=Xt(),n=Ui(),r=i+ns,o=n.firstCreatePass?Rv(n,r,1,e,null):n.data[r],s=PX(n,t,o,e,i);t[r]=s,Ov()&&Nv(n,t,s,o),Iu(o,!1)}var PX=(i,e,t,n,r)=>(Sv(!0),Mq(e[yi],n));function W(i){return he("",i,""),W}function he(i,e,t){let n=Xt(),r=ZP(n,i,e,t);return r!==ss&&TI(n,sd(),r),he}function hn(i,e,t,n,r){let o=Xt(),s=YY(o,i,e,t,n,r);return s!==ss&&TI(o,sd(),s),hn}function TI(i,e,t){let n=F9(e,i);Eq(i[yi],n,t)}function st(i,e,t){fF(e)&&(e=e());let n=Xt(),r=Dp();if(la(n,r,e)){let o=Ui(),s=Fp();Bv(o,s,n,i,e,n[yi],t,!1)}return st}function dt(i,e){let t=fF(i);return t&&i.set(e),t}function at(i,e){let t=Xt(),n=Ui(),r=oo();return II(n,t,t[yi],r,i,e),at}function OX(i,e,t){let n=Ui();if(n.firstCreatePass){let r=aa(i);YE(t,n.data,n.blueprint,r,!0),YE(e,n.data,n.blueprint,r,!1)}}function YE(i,e,t,n,r){if(i=ro(i),Array.isArray(i))for(let o=0;o<i.length;o++)YE(i[o],e,t,n,r);else{let o=Ui(),s=Xt(),a=oo(),l=Vh(i)?i:ro(i.provide),c=E9(i),d=a.providerIndexes&1048575,h=a.directiveStart,p=a.providerIndexes>>20;if(Vh(i)||!i.multi){let g=new Au(c,r,ke),_=ZM(l,e,r?d:d+p,h);_===-1?(hE(sv(a,s),o,l),JM(o,i,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(g),s.push(g)):(t[_]=g,s[_]=g)}else{let g=ZM(l,e,d+p,h),_=ZM(l,e,d,d+p),b=g>=0&&t[g],C=_>=0&&t[_];if(r&&!C||!r&&!b){hE(sv(a,s),o,l);let y=AX(r?kX:SX,t.length,r,n,c);!r&&C&&(t[_].providerFactory=y),JM(o,i,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(y),s.push(y)}else{let y=BI(t[r?_:g],c,!r&&n);JM(o,i,g>-1?g:_,y)}!r&&n&&C&&t[_].componentProviders++}}}function JM(i,e,t,n){let r=Vh(e),o=_$(e);if(r||o){let l=(o?ro(e.useClass):e).prototype.ngOnDestroy;if(l){let c=i.destroyHooks||(i.destroyHooks=[]);if(!r&&e.multi){let d=c.indexOf(t);d===-1?c.push(t,[n,l]):c[d+1].push(n,l)}else c.push(t,l)}}}function BI(i,e,t){return t&&i.componentProviders++,i.multi.push(e)-1}function ZM(i,e,t,n){for(let r=t;r<n;r++)if(e[r]===i)return r;return-1}function SX(i,e,t,n,r){return XE(this.multi,[])}function kX(i,e,t,n,r){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,l=Mp(n,n[tn],this.providerFactory.index,r);s=l.slice(0,a),XE(o,s);for(let c=a;c<l.length;c++)s.push(l[c])}else s=[],XE(o,s);return s}function XE(i,e){for(let t=0;t<i.length;t++){let n=i[t];e.push(n())}return e}function AX(i,e,t,n,r){let o=new Au(i,t,ke);return o.multi=[],o.index=e,o.componentProviders=0,BI(o,r,n&&!t),o}function Ao(i,e=[]){return t=>{t.providersResolver=(n,r)=>OX(n,r?r(i):i,e)}}function rl(i,e,t){let n=Jh()+i,r=Xt();return r[n]===ss?Lp(r,n,t?e.call(t):e()):NY(r,n)}function Do(i,e,t,n){return DX(Xt(),Jh(),i,e,t,n)}function Up(i,e,t,n,r){return NI(Xt(),Jh(),i,e,t,n,r)}function Hv(i,e,t,n,r,o){return FX(Xt(),Jh(),i,e,t,n,r,o)}function Gv(i,e,t,n,r,o,s){return IX(Xt(),Jh(),i,e,t,n,r,o,s)}function $v(i,e){let t=i[e];return t===ss?void 0:t}function DX(i,e,t,n,r,o){let s=e+t;return la(i,s,r)?Lp(i,s+1,o?n.call(o,r):n(r)):$v(i,s+1)}function NI(i,e,t,n,r,o,s){let a=e+t;return Pp(i,a,r,o)?Lp(i,a+2,s?n.call(s,r,o):n(r,o)):$v(i,a+2)}function FX(i,e,t,n,r,o,s,a){let l=e+t;return LY(i,l,r,o,s)?Lp(i,l+3,a?n.call(a,r,o,s):n(r,o,s)):$v(i,l+3)}function IX(i,e,t,n,r,o,s,a,l){let c=e+t;return RY(i,c,r,o,s,a)?Lp(i,c+4,l?n.call(l,r,o,s,a):n(r,o,s,a)):$v(i,c+4)}function ha(i,e){let t=Ui(),n,r=i+ns;t.firstCreatePass?(n=TX(e,t.pipeRegistry),t.data[r]=n,n.onDestroy&&(t.destroyHooks??=[]).push(r,n.onDestroy)):n=t.data[r];let o=n.factory||(n.factory=yu(n.type,!0)),s,a=Eo(ke);try{let l=ov(!1),c=o();return ov(l),EX(t,Xt(),r,c),c}finally{Eo(a)}}function TX(i,e){if(e)for(let t=e.length-1;t>=0;t--){let n=e[t];if(i===n.name)return n}}function ol(i,e,t,n){let r=i+ns,o=Xt(),s=T9(o,r);return BX(o,r)?NI(o,Jh(),e,s.transform,t,n,s):s.transform(t,n)}function BX(i,e){return i[tn].data[e].pure}var V_=null;function NX(i){V_!==null&&(i.defaultEncapsulation!==V_.defaultEncapsulation||i.preserveWhitespaces!==V_.preserveWhitespaces)||(V_=i)}var QE=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},LI=(()=>{class i{compileModuleSync(t){return new pv(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let n=this.compileModuleSync(t),r=C9(t),o=jF(r.declarations).reduce((s,a)=>{let l=Mu(a);return l&&s.push(new Wh(l)),s},[]);return new QE(n,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(n){return new(n||i)};static \u0275prov=tt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),LX=new Ze("");function RX(i,e,t){let n=new pv(t);return Promise.resolve(n)}function e9(i){for(let e=i.length-1;e>=0;e--)if(i[e]!==void 0)return i[e]}var zX=(()=>{class i{zone=$e(On);changeDetectionScheduler=$e($h);applicationRef=$e(is);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(n){return new(n||i)};static \u0275prov=tt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function jX({ngZoneFactory:i,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return i??=()=>new On(ot(Ie({},RI()),{scheduleInRootZone:t})),[{provide:On,useFactory:i},{provide:jh,multi:!0,useFactory:()=>{let n=$e(zX,{optional:!0});return()=>n.initialize()}},{provide:jh,multi:!0,useFactory:()=>{let n=$e(VX);return()=>{n.initialize()}}},e===!0?{provide:lF,useValue:!0}:[],{provide:cF,useValue:t??aF}]}function RI(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:i?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:i?.runCoalescing??!1}}var VX=(()=>{class i{subscription=new er;initialized=!1;zone=$e(On);pendingTasks=$e(ic);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{On.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{On.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(n){return new(n||i)};static \u0275prov=tt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var UX=(()=>{class i{appRef=$e(is);taskService=$e(ic);ngZone=$e(On);zonelessEnabled=$e(CP);tracing=$e(nf,{optional:!0});disableScheduling=$e(lF,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new er;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(lv):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&($e(cF,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof cv||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let n=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,n=!0;break}case 12:{this.appRef.dirtyFlags|=16,n=!0;break}case 13:{this.appRef.dirtyFlags|=2,n=!0;break}case 11:{n=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(n))return;let r=this.useMicrotaskScheduler?P6:dF;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(lv+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(n){throw this.taskService.remove(t),n}finally{this.cleanup()}this.useMicrotaskScheduler=!0,P6(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(n){return new(n||i)};static \u0275prov=tt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function HX(){return typeof $localize<"u"&&$localize.locale||xv}var Wv=new Ze("",{providedIn:"root",factory:()=>$e(Wv,Yt.Optional|Yt.SkipSelf)||HX()});var _v=new Ze(""),GX=new Ze("");function xp(i){return!i.moduleRef}function $X(i){let e=xp(i)?i.r3Injector:i.moduleRef.injector,t=e.get(On);return t.run(()=>{xp(i)?i.r3Injector.resolveInjectorInitializers():i.moduleRef.resolveInjectorInitializers();let n=e.get(Za,null),r;if(t.runOutsideAngular(()=>{r=t.onError.subscribe({next:o=>{n.handleError(o)}})}),xp(i)){let o=()=>e.destroy(),s=i.platformInjector.get(_v);s.add(o),e.onDestroy(()=>{r.unsubscribe(),s.delete(o)})}else{let o=()=>i.moduleRef.destroy(),s=i.platformInjector.get(_v);s.add(o),i.moduleRef.onDestroy(()=>{W_(i.allPlatformModules,i.moduleRef),r.unsubscribe(),s.delete(o)})}return qX(n,t,()=>{let o=e.get(yI);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Wv,xv);if(CX(s||xv),!e.get(GX,!0))return xp(i)?e.get(is):(i.allPlatformModules.push(i.moduleRef),i.moduleRef);if(xp(i)){let l=e.get(is);return i.rootComponent!==void 0&&l.bootstrap(i.rootComponent),l}else return WX(i.moduleRef,i.allPlatformModules),i.moduleRef})})})}function WX(i,e){let t=i.injector.get(is);if(i._bootstrapComponents.length>0)i._bootstrapComponents.forEach(n=>t.bootstrap(n));else if(i.instance.ngDoBootstrap)i.instance.ngDoBootstrap(t);else throw new je(-403,!1);e.push(i)}function qX(i,e,t){try{let n=t();return Tu(n)?n.catch(r=>{throw e.runOutsideAngular(()=>i.handleError(r)),r}):n}catch(n){throw e.runOutsideAngular(()=>i.handleError(n)),n}}var zI=(()=>{class i{_injector;_modules=[];_destroyListeners=[];_destroyed=!1;constructor(t){this._injector=t}bootstrapModuleFactory(t,n){let r=n?.scheduleInRootZone,o=()=>wW(n?.ngZone,ot(Ie({},RI({eventCoalescing:n?.ngZoneEventCoalescing,runCoalescing:n?.ngZoneRunCoalescing})),{scheduleInRootZone:r})),s=n?.ignoreChangesOutsideZone,a=[jX({ngZoneFactory:o,ignoreChangesOutsideZone:s}),{provide:$h,useExisting:UX}],l=CY(t.moduleType,this.injector,a);return $X({moduleRef:l,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,n=[]){let r=wI({},n);return RX(this.injector,r,t).then(o=>this.bootstrapModuleFactory(o,r))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new je(404,!1);this._modules.slice().forEach(n=>n.destroy()),this._destroyListeners.forEach(n=>n());let t=this._injector.get(_v,null);t&&(t.forEach(n=>n()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static \u0275fac=function(n){return new(n||i)(ht(pr))};static \u0275prov=tt({token:i,factory:i.\u0275fac,providedIn:"platform"})}return i})(),Cp=null,jI=new Ze("");function KX(i){if(Cp&&!Cp.get(jI,!1))throw new je(400,!1);$Y(),Cp=i;let e=i.get(zI);return QX(i),e}function tO(i,e,t=[]){let n=`Platform: ${e}`,r=new Ze(n);return(o=[])=>{let s=VI();if(!s||s.injector.get(jI,!1)){let a=[...t,...o,{provide:r,useValue:!0}];i?i(a):KX(YX(a,n))}return XX(r)}}function YX(i=[],e){return pr.create({name:e,providers:[{provide:wv,useValue:"platform"},{provide:_v,useValue:new Set([()=>Cp=null])},...i]})}function XX(i){let e=VI();if(!e)throw new je(401,!1);return e}function VI(){return Cp?.get(zI)??null}function QX(i){let e=i.get(MP,null);ko(i,()=>{e?.forEach(t=>t())})}var as=(()=>{class i{static __NG_ELEMENT_ID__=JX}return i})();function JX(i){return ZX(oo(),Xt(),(i&16)===16)}function ZX(i,e,t){if(Xh(i)&&!t){let n=Ja(i.index,e);return new Ep(n,n)}else if(i.type&175){let n=e[Xa];return new Ep(n,e)}return null}var JE=class{constructor(){}supports(e){return vI(e)}create(e){return new ZE(e)}},eQ=(i,e)=>e,ZE=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||eQ}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,n=this._removalsHead,r=0,o=null;for(;t||n;){let s=!n||t&&t.currentIndex<t9(n,r,o)?t:n,a=t9(s,r,o),l=s.currentIndex;if(s===n)r--,n=n._nextRemoved;else if(t=t._next,s.previousIndex==null)r++;else{o||(o=[]);let c=a-r,d=l-r;if(c!=d){for(let p=0;p<c;p++){let g=p<o.length?o[p]:o[p]=0,_=g+p;d<=_&&_<c&&(o[p]=g+1)}let h=s.previousIndex;o[h]=d-c}}a!==l&&e(s,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!vI(e))throw new je(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,n=!1,r,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),n=!0):(n&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else r=0,TY(e,a=>{s=this._trackByFn(r,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,r),n=!0):(n&&(t=this._verifyReinsertion(t,a,s,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,n,r){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(n,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,r)):(e=this._linkedRecords===null?null:this._linkedRecords.get(n,r),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,r)):e=this._addAfter(new eP(t,n),o,r)),e}_verifyReinsertion(e,t,n,r){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(n,null);return o!==null?e=this._reinsertAfter(o,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,n){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let r=e._prevRemoved,o=e._nextRemoved;return r===null?this._removalsHead=o:r._nextRemoved=o,o===null?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}_moveAfter(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}_addAfter(e,t,n){return this._insertAfter(e,t,n),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,n){let r=t===null?this._itHead:t._next;return e._next=r,e._prev=t,r===null?this._itTail=e:r._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new vv),this._linkedRecords.put(e),e.currentIndex=n,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,n=e._next;return t===null?this._itHead=n:t._next=n,n===null?this._itTail=t:n._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new vv),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},eP=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},tP=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let n;for(n=this._head;n!==null;n=n._nextDup)if((t===null||t<=n.currentIndex)&&Object.is(n.trackById,e))return n;return null}remove(e){let t=e._prevDup,n=e._nextDup;return t===null?this._head=n:t._nextDup=n,n===null?this._tail=t:n._prevDup=t,this._head===null}},vv=class{map=new Map;put(e){let t=e.trackById,n=this.map.get(t);n||(n=new tP,this.map.set(t,n)),n.add(e)}get(e,t){let n=e,r=this.map.get(n);return r?r.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function t9(i,e,t){let n=i.previousIndex;if(n===null)return n;let r=0;return t&&n<t.length&&(r=t[n]),n+e+r}function n9(){return new nO([new JE])}var nO=(()=>{class i{factories;static \u0275prov=tt({token:i,providedIn:"root",factory:n9});constructor(t){this.factories=t}static create(t,n){if(n!=null){let r=n.factories.slice();t=t.concat(r)}return new i(t)}static extend(t){return{provide:i,useFactory:n=>i.create(t,n||n9()),deps:[[i,new a$,new x9]]}}find(t){let n=this.factories.find(r=>r.supports(t));if(n!=null)return n;throw new je(901,!1)}}return i})();var UI=tO(null,"core",[]),HI=(()=>{class i{constructor(t){}static \u0275fac=function(n){return new(n||i)(ht(is))};static \u0275mod=bn({type:i});static \u0275inj=vn({})}return i})();function cd(i){return typeof i=="boolean"?i:i!=null&&i!=="false"}function sl(i){return MM(i)}function sf(i,e){return bM(i,e?.equal)}var i9=class{[Ss];constructor(e){this[Ss]=e}destroy(){this[Ss].destroy()}};function GI(i){let e=Mu(i);if(!e)return null;let t=new Wh(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var ai=new Ze("");var qI=null;function ls(){return qI}function iO(i){qI??=i}var Hp=class{},Gp=(()=>{class i{historyGo(t){throw new Error("")}static \u0275fac=function(n){return new(n||i)};static \u0275prov=tt({token:i,factory:()=>$e(KI),providedIn:"platform"})}return i})(),rO=new Ze(""),KI=(()=>{class i extends Gp{_location;_history;_doc=$e(ai);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ls().getBaseHref(this._doc)}onPopState(t){let n=ls().getGlobalEventTarget(this._doc,"window");return n.addEventListener("popstate",t,!1),()=>n.removeEventListener("popstate",t)}onHashChange(t){let n=ls().getGlobalEventTarget(this._doc,"window");return n.addEventListener("hashchange",t,!1),()=>n.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,n,r){this._history.pushState(t,n,r)}replaceState(t,n,r){this._history.replaceState(t,n,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(n){return new(n||i)};static \u0275prov=tt({token:i,factory:()=>new i,providedIn:"platform"})}return i})();function qv(i,e){return i?e?i.endsWith("/")?e.startsWith("/")?i+e.slice(1):i+e:e.startsWith("/")?i+e:`${i}/${e}`:i:e}function $I(i){let e=i.search(/#|\?|$/);return i[e-1]==="/"?i.slice(0,e-1)+i.slice(e):i}function fa(i){return i&&i[0]!=="?"?`?${i}`:i}var ga=(()=>{class i{historyGo(t){throw new Error("")}static \u0275fac=function(n){return new(n||i)};static \u0275prov=tt({token:i,factory:()=>$e(Yv),providedIn:"root"})}return i})(),Kv=new Ze(""),Yv=(()=>{class i extends ga{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,n){super(),this._platformLocation=t,this._baseHref=n??this._platformLocation.getBaseHrefFromDOM()??$e(ai).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return qv(this._baseHref,t)}path(t=!1){let n=this._platformLocation.pathname+fa(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${n}${r}`:n}pushState(t,n,r,o){let s=this.prepareExternalUrl(r+fa(o));this._platformLocation.pushState(t,n,s)}replaceState(t,n,r,o){let s=this.prepareExternalUrl(r+fa(o));this._platformLocation.replaceState(t,n,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(n){return new(n||i)(ht(Gp),ht(Kv,8))};static \u0275prov=tt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),dd=(()=>{class i{_subject=new Pn;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let n=this._locationStrategy.getBaseHref();this._basePath=iQ($I(WI(n))),this._locationStrategy.onPopState(r=>{this._subject.next({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,n=""){return this.path()==this.normalize(t+fa(n))}normalize(t){return i.stripTrailingSlash(nQ(this._basePath,WI(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,n="",r=null){this._locationStrategy.pushState(r,"",t,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+fa(n)),r)}replaceState(t,n="",r=null){this._locationStrategy.replaceState(r,"",t,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+fa(n)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(n=>{this._notifyUrlChangeListeners(n.url,n.state)}),()=>{let n=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(n,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",n){this._urlChangeListeners.forEach(r=>r(t,n))}subscribe(t,n,r){return this._subject.subscribe({next:t,error:n??void 0,complete:r??void 0})}static normalizeQueryParams=fa;static joinWithSlash=qv;static stripTrailingSlash=$I;static \u0275fac=function(n){return new(n||i)(ht(ga))};static \u0275prov=tt({token:i,factory:()=>tQ(),providedIn:"root"})}return i})();function tQ(){return new dd(ht(ga))}function nQ(i,e){if(!i||!e.startsWith(i))return e;let t=e.substring(i.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function WI(i){return i.replace(/\/index.html$/,"")}function iQ(i){if(new RegExp("^(https?:)?//").test(i)){let[,t]=i.split(/\/\/[^\/]+/);return t}return i}var cO=(()=>{class i extends ga{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,n){super(),this._platformLocation=t,n!=null&&(this._baseHref=n)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let n=this._platformLocation.hash??"#";return n.length>0?n.substring(1):n}prepareExternalUrl(t){let n=qv(this._baseHref,t);return n.length>0?"#"+n:n}pushState(t,n,r,o){let s=this.prepareExternalUrl(r+fa(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,n,s)}replaceState(t,n,r,o){let s=this.prepareExternalUrl(r+fa(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,n,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(n){return new(n||i)(ht(Gp),ht(Kv,8))};static \u0275prov=tt({token:i,factory:i.\u0275fac})}return i})();var Hr=function(i){return i[i.Format=0]="Format",i[i.Standalone=1]="Standalone",i}(Hr||{}),Wn=function(i){return i[i.Narrow=0]="Narrow",i[i.Abbreviated=1]="Abbreviated",i[i.Wide=2]="Wide",i[i.Short=3]="Short",i}(Wn||{}),Fo=function(i){return i[i.Short=0]="Short",i[i.Medium=1]="Medium",i[i.Long=2]="Long",i[i.Full=3]="Full",i}(Fo||{}),lc={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function ZI(i){return Fs(i)[Hi.LocaleId]}function eT(i,e,t){let n=Fs(i),r=[n[Hi.DayPeriodsFormat],n[Hi.DayPeriodsStandalone]],o=Is(r,e);return Is(o,t)}function tT(i,e,t){let n=Fs(i),r=[n[Hi.DaysFormat],n[Hi.DaysStandalone]],o=Is(r,e);return Is(o,t)}function nT(i,e,t){let n=Fs(i),r=[n[Hi.MonthsFormat],n[Hi.MonthsStandalone]],o=Is(r,e);return Is(o,t)}function iT(i,e){let n=Fs(i)[Hi.Eras];return Is(n,e)}function $p(i,e){let t=Fs(i);return Is(t[Hi.DateFormat],e)}function Wp(i,e){let t=Fs(i);return Is(t[Hi.TimeFormat],e)}function qp(i,e){let n=Fs(i)[Hi.DateTimeFormat];return Is(n,e)}function Kp(i,e){let t=Fs(i),n=t[Hi.NumberSymbols][e];if(typeof n>"u"){if(e===lc.CurrencyDecimal)return t[Hi.NumberSymbols][lc.Decimal];if(e===lc.CurrencyGroup)return t[Hi.NumberSymbols][lc.Group]}return n}function rT(i){if(!i[Hi.ExtraData])throw new Error(`Missing extra locale data for the locale "${i[Hi.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function oT(i){let e=Fs(i);return rT(e),(e[Hi.ExtraData][2]||[]).map(n=>typeof n=="string"?oO(n):[oO(n[0]),oO(n[1])])}function sT(i,e,t){let n=Fs(i);rT(n);let r=[n[Hi.ExtraData][0],n[Hi.ExtraData][1]],o=Is(r,e)||[];return Is(o,t)||[]}function Is(i,e){for(let t=e;t>-1;t--)if(typeof i[t]<"u")return i[t];throw new Error("Locale data API: locale data undefined")}function oO(i){let[e,t]=i.split(":");return{hours:+e,minutes:+t}}var rQ=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Xv={},oQ=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function aT(i,e,t,n){let r=gQ(i);e=ac(t,e)||e;let s=[],a;for(;e;)if(a=oQ.exec(e),a){s=s.concat(a.slice(1));let d=s.pop();if(!d)break;e=d}else{s.push(e);break}let l=r.getTimezoneOffset();n&&(l=cT(n,l),r=fQ(r,n));let c="";return s.forEach(d=>{let h=uQ(d);c+=h?h(r,t,l):d==="''"?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}function tb(i,e,t){let n=new Date(0);return n.setFullYear(i,e,t),n.setHours(0,0,0),n}function ac(i,e){let t=ZI(i);if(Xv[t]??={},Xv[t][e])return Xv[t][e];let n="";switch(e){case"shortDate":n=$p(i,Fo.Short);break;case"mediumDate":n=$p(i,Fo.Medium);break;case"longDate":n=$p(i,Fo.Long);break;case"fullDate":n=$p(i,Fo.Full);break;case"shortTime":n=Wp(i,Fo.Short);break;case"mediumTime":n=Wp(i,Fo.Medium);break;case"longTime":n=Wp(i,Fo.Long);break;case"fullTime":n=Wp(i,Fo.Full);break;case"short":let r=ac(i,"shortTime"),o=ac(i,"shortDate");n=Qv(qp(i,Fo.Short),[r,o]);break;case"medium":let s=ac(i,"mediumTime"),a=ac(i,"mediumDate");n=Qv(qp(i,Fo.Medium),[s,a]);break;case"long":let l=ac(i,"longTime"),c=ac(i,"longDate");n=Qv(qp(i,Fo.Long),[l,c]);break;case"full":let d=ac(i,"fullTime"),h=ac(i,"fullDate");n=Qv(qp(i,Fo.Full),[d,h]);break}return n&&(Xv[t][e]=n),n}function Qv(i,e){return e&&(i=i.replace(/\{([^}]+)}/g,function(t,n){return e!=null&&n in e?e[n]:t})),i}function pa(i,e,t="-",n,r){let o="";(i<0||r&&i<=0)&&(r?i=-i+1:(i=-i,o=t));let s=String(i);for(;s.length<e;)s="0"+s;return n&&(s=s.slice(s.length-e)),o+s}function sQ(i,e){return pa(i,3).substring(0,e)}function nr(i,e,t=0,n=!1,r=!1){return function(o,s){let a=aQ(i,o);if((t>0||a>-t)&&(a+=t),i===3)a===0&&t===-12&&(a=12);else if(i===6)return sQ(a,e);let l=Kp(s,lc.MinusSign);return pa(a,e,l,n,r)}}function aQ(i,e){switch(i){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new Error(`Unknown DateType value "${i}".`)}}function li(i,e,t=Hr.Format,n=!1){return function(r,o){return lQ(r,o,i,e,t,n)}}function lQ(i,e,t,n,r,o){switch(t){case 2:return nT(e,r,n)[i.getMonth()];case 1:return tT(e,r,n)[i.getDay()];case 0:let s=i.getHours(),a=i.getMinutes();if(o){let c=oT(e),d=sT(e,r,n),h=c.findIndex(p=>{if(Array.isArray(p)){let[g,_]=p,b=s>=g.hours&&a>=g.minutes,C=s<_.hours||s===_.hours&&a<_.minutes;if(g.hours<_.hours){if(b&&C)return!0}else if(b||C)return!0}else if(p.hours===s&&p.minutes===a)return!0;return!1});if(h!==-1)return d[h]}return eT(e,r,n)[s<12?0:1];case 3:return iT(e,n)[i.getFullYear()<=0?0:1];default:let l=t;throw new Error(`unexpected translation type ${l}`)}}function Jv(i){return function(e,t,n){let r=-1*n,o=Kp(t,lc.MinusSign),s=r>0?Math.floor(r/60):Math.ceil(r/60);switch(i){case 0:return(r>=0?"+":"")+pa(s,2,o)+pa(Math.abs(r%60),2,o);case 1:return"GMT"+(r>=0?"+":"")+pa(s,1,o);case 2:return"GMT"+(r>=0?"+":"")+pa(s,2,o)+":"+pa(Math.abs(r%60),2,o);case 3:return n===0?"Z":(r>=0?"+":"")+pa(s,2,o)+":"+pa(Math.abs(r%60),2,o);default:throw new Error(`Unknown zone width "${i}"`)}}}var cQ=0,eb=4;function dQ(i){let e=tb(i,cQ,1).getDay();return tb(i,0,1+(e<=eb?eb:eb+7)-e)}function lT(i){let e=i.getDay(),t=e===0?-3:eb-e;return tb(i.getFullYear(),i.getMonth(),i.getDate()+t)}function sO(i,e=!1){return function(t,n){let r;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();r=1+Math.floor((s+o)/7)}else{let o=lT(t),s=dQ(o.getFullYear()),a=o.getTime()-s.getTime();r=1+Math.round(a/6048e5)}return pa(r,i,Kp(n,lc.MinusSign))}}function Zv(i,e=!1){return function(t,n){let o=lT(t).getFullYear();return pa(o,i,Kp(n,lc.MinusSign),e)}}var aO={};function uQ(i){if(aO[i])return aO[i];let e;switch(i){case"G":case"GG":case"GGG":e=li(3,Wn.Abbreviated);break;case"GGGG":e=li(3,Wn.Wide);break;case"GGGGG":e=li(3,Wn.Narrow);break;case"y":e=nr(0,1,0,!1,!0);break;case"yy":e=nr(0,2,0,!0,!0);break;case"yyy":e=nr(0,3,0,!1,!0);break;case"yyyy":e=nr(0,4,0,!1,!0);break;case"Y":e=Zv(1);break;case"YY":e=Zv(2,!0);break;case"YYY":e=Zv(3);break;case"YYYY":e=Zv(4);break;case"M":case"L":e=nr(1,1,1);break;case"MM":case"LL":e=nr(1,2,1);break;case"MMM":e=li(2,Wn.Abbreviated);break;case"MMMM":e=li(2,Wn.Wide);break;case"MMMMM":e=li(2,Wn.Narrow);break;case"LLL":e=li(2,Wn.Abbreviated,Hr.Standalone);break;case"LLLL":e=li(2,Wn.Wide,Hr.Standalone);break;case"LLLLL":e=li(2,Wn.Narrow,Hr.Standalone);break;case"w":e=sO(1);break;case"ww":e=sO(2);break;case"W":e=sO(1,!0);break;case"d":e=nr(2,1);break;case"dd":e=nr(2,2);break;case"c":case"cc":e=nr(7,1);break;case"ccc":e=li(1,Wn.Abbreviated,Hr.Standalone);break;case"cccc":e=li(1,Wn.Wide,Hr.Standalone);break;case"ccccc":e=li(1,Wn.Narrow,Hr.Standalone);break;case"cccccc":e=li(1,Wn.Short,Hr.Standalone);break;case"E":case"EE":case"EEE":e=li(1,Wn.Abbreviated);break;case"EEEE":e=li(1,Wn.Wide);break;case"EEEEE":e=li(1,Wn.Narrow);break;case"EEEEEE":e=li(1,Wn.Short);break;case"a":case"aa":case"aaa":e=li(0,Wn.Abbreviated);break;case"aaaa":e=li(0,Wn.Wide);break;case"aaaaa":e=li(0,Wn.Narrow);break;case"b":case"bb":case"bbb":e=li(0,Wn.Abbreviated,Hr.Standalone,!0);break;case"bbbb":e=li(0,Wn.Wide,Hr.Standalone,!0);break;case"bbbbb":e=li(0,Wn.Narrow,Hr.Standalone,!0);break;case"B":case"BB":case"BBB":e=li(0,Wn.Abbreviated,Hr.Format,!0);break;case"BBBB":e=li(0,Wn.Wide,Hr.Format,!0);break;case"BBBBB":e=li(0,Wn.Narrow,Hr.Format,!0);break;case"h":e=nr(3,1,-12);break;case"hh":e=nr(3,2,-12);break;case"H":e=nr(3,1);break;case"HH":e=nr(3,2);break;case"m":e=nr(4,1);break;case"mm":e=nr(4,2);break;case"s":e=nr(5,1);break;case"ss":e=nr(5,2);break;case"S":e=nr(6,1);break;case"SS":e=nr(6,2);break;case"SSS":e=nr(6,3);break;case"Z":case"ZZ":case"ZZZ":e=Jv(0);break;case"ZZZZZ":e=Jv(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Jv(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=Jv(2);break;default:return null}return aO[i]=e,e}function cT(i,e){i=i.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+i)/6e4;return isNaN(t)?e:t}function hQ(i,e){return i=new Date(i.getTime()),i.setMinutes(i.getMinutes()+e),i}function fQ(i,e,t){let r=i.getTimezoneOffset(),o=cT(e,r);return hQ(i,-1*(o-r))}function gQ(i){if(YI(i))return i;if(typeof i=="number"&&!isNaN(i))return new Date(i);if(typeof i=="string"){if(i=i.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(i)){let[r,o=1,s=1]=i.split("-").map(a=>+a);return tb(r,o-1,s)}let t=parseFloat(i);if(!isNaN(i-t))return new Date(t);let n;if(n=i.match(rQ))return pQ(n)}let e=new Date(i);if(!YI(e))throw new Error(`Unable to convert "${i}" into a date`);return e}function pQ(i){let e=new Date(0),t=0,n=0,r=i[8]?e.setUTCFullYear:e.setFullYear,o=i[8]?e.setUTCHours:e.setHours;i[9]&&(t=Number(i[9]+i[10]),n=Number(i[9]+i[11])),r.call(e,Number(i[1]),Number(i[2])-1,Number(i[3]));let s=Number(i[4]||0)-t,a=Number(i[5]||0)-n,l=Number(i[6]||0),c=Math.floor(parseFloat("0."+(i[7]||0))*1e3);return o.call(e,s,a,l,c),e}function YI(i){return i instanceof Date&&!isNaN(i.valueOf())}var lO=/\s+/,XI=[],ma=(()=>{class i{_ngEl;_renderer;initialClasses=XI;rawClass;stateMap=new Map;constructor(t,n){this._ngEl=t,this._renderer=n}set klass(t){this.initialClasses=t!=null?t.trim().split(lO):XI}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(lO):t}ngDoCheck(){for(let n of this.initialClasses)this._updateState(n,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let n of t)this._updateState(n,!0);else if(t!=null)for(let n of Object.keys(t))this._updateState(n,!!t[n]);this._applyStateDiff()}_updateState(t,n){let r=this.stateMap.get(t);r!==void 0?(r.enabled!==n&&(r.changed=!0,r.enabled=n),r.touched=!0):this.stateMap.set(t,{enabled:n,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let n=t[0],r=t[1];r.changed?(this._toggleClass(n,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(n,!1),this.stateMap.delete(n)),r.touched=!1}}_toggleClass(t,n){t=t.trim(),t.length>0&&t.split(lO).forEach(r=>{n?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static \u0275fac=function(n){return new(n||i)(ke(Ur),ke(il))};static \u0275dir=Sn({type:i,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return i})();var nb=class{$implicit;ngForOf;index;count;constructor(e,t,n,r){this.$implicit=e,this.ngForOf=t,this.index=n,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},yt=(()=>{class i{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,n,r){this._viewContainer=t,this._template=n,this._differs=r}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let n=this._viewContainer;t.forEachOperation((r,o,s)=>{if(r.previousIndex==null)n.createEmbeddedView(this._template,new nb(r.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)n.remove(o===null?void 0:o);else if(o!==null){let a=n.get(o);n.move(a,s),QI(a,r)}});for(let r=0,o=n.length;r<o;r++){let a=n.get(r).context;a.index=r,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{let o=n.get(r.currentIndex);QI(o,r)})}static ngTemplateContextGuard(t,n){return!0}static \u0275fac=function(n){return new(n||i)(ke(ld),ke(Du),ke(nO))};static \u0275dir=Sn({type:i,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return i})();function QI(i,e){i.context.$implicit=e.item}var lt=(()=>{class i{_viewContainer;_context=new ib;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,n){this._viewContainer=t,this._thenTemplateRef=n}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){JI(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){JI(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,n){return!0}static \u0275fac=function(n){return new(n||i)(ke(ld),ke(Du))};static \u0275dir=Sn({type:i,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return i})(),ib=class{$implicit=null;ngIf=null};function JI(i,e){if(i&&!i.createEmbeddedView)throw new je(2020,!1)}function mQ(i,e){return new je(2100,!1)}var xQ="mediumDate",dT=new Ze(""),uT=new Ze(""),cc=(()=>{class i{locale;defaultTimezone;defaultOptions;constructor(t,n,r){this.locale=t,this.defaultTimezone=n,this.defaultOptions=r}transform(t,n,r,o){if(t==null||t===""||t!==t)return null;try{let s=n??this.defaultOptions?.dateFormat??xQ,a=r??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return aT(t,s,o||this.locale,a)}catch(s){throw mQ(i,s.message)}}static \u0275fac=function(n){return new(n||i)(ke(Wv,16),ke(dT,24),ke(uT,24))};static \u0275pipe=zv({name:"date",type:i,pure:!0})}return i})();var cs=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=bn({type:i});static \u0275inj=vn({})}return i})();function Yp(i,e){e=encodeURIComponent(e);for(let t of i.split(";")){let n=t.indexOf("="),[r,o]=n==-1?[t,""]:[t.slice(0,n),t.slice(n+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}var dO="browser",hT="server";function rb(i){return i===hT}var Bu=class{};var gT=(()=>{class i{static \u0275prov=tt({token:i,providedIn:"root",factory:()=>new uO($e(ai),window)})}return i})(),uO=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=_Q(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(n-o[0],r-o[1])}};function _Q(i,e){let t=i.getElementById(e)||i.getElementsByName(e)[0];if(t)return t;if(typeof i.createTreeWalker=="function"&&i.body&&typeof i.body.attachShadow=="function"){let n=i.createTreeWalker(i.body,NodeFilter.SHOW_ELEMENT),r=n.currentNode;for(;r;){let o=r.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}r=n.nextNode()}}return null}var ab=new Ze(""),pO=(()=>{class i{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,n){this._zone=n,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,n,r,o){return this._findPluginFor(n).addEventListener(t,n,r,o)}getZone(){return this._zone}_findPluginFor(t){let n=this._eventNameToPlugin.get(t);if(n)return n;if(n=this._plugins.find(o=>o.supports(t)),!n)throw new je(5101,!1);return this._eventNameToPlugin.set(t,n),n}static \u0275fac=function(n){return new(n||i)(ht(ab),ht(On))};static \u0275prov=tt({token:i,factory:i.\u0275fac})}return i})(),Xp=class{_doc;constructor(e){this._doc=e}manager},ob="ng-app-id";function pT(i){for(let e of i)e.remove()}function mT(i,e){let t=e.createElement("style");return t.textContent=i,t}function vQ(i,e,t,n){let r=i.head?.querySelectorAll(`style[${ob}="${e}"],link[${ob}="${e}"]`);if(r)for(let o of r)o.removeAttribute(ob),o instanceof HTMLLinkElement?n.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function fO(i,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",i),t}var mO=(()=>{class i{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,n,r,o={}){this.doc=t,this.appId=n,this.nonce=r,this.isServer=rb(o),vQ(t,n,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,n){for(let r of t)this.addUsage(r,this.inline,mT);n?.forEach(r=>this.addUsage(r,this.external,fO))}removeStyles(t,n){for(let r of t)this.removeUsage(r,this.inline);n?.forEach(r=>this.removeUsage(r,this.external))}addUsage(t,n,r){let o=n.get(t);o?o.usage++:n.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,r(t,this.doc)))})}removeUsage(t,n){let r=n.get(t);r&&(r.usage--,r.usage<=0&&(pT(r.elements),n.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])pT(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[n,{elements:r}]of this.inline)r.push(this.addElement(t,mT(n,this.doc)));for(let[n,{elements:r}]of this.external)r.push(this.addElement(t,fO(n,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,n){return this.nonce&&n.setAttribute("nonce",this.nonce),this.isServer&&n.setAttribute(ob,this.appId),t.appendChild(n)}static \u0275fac=function(n){return new(n||i)(ht(ai),ht(kv),ht(PP,8),ht(tf))};static \u0275prov=tt({token:i,factory:i.\u0275fac})}return i})(),hO={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},xO=/%COMP%/g;var _T="%COMP%",bQ=`_nghost-${_T}`,CQ=`_ngcontent-${_T}`,yQ=!0,wQ=new Ze("",{providedIn:"root",factory:()=>yQ});function MQ(i){return CQ.replace(xO,i)}function EQ(i){return bQ.replace(xO,i)}function vT(i,e){return e.map(t=>t.replace(xO,i))}var Zp=(()=>{class i{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,n,r,o,s,a,l,c=null,d=null){this.eventManager=t,this.sharedStylesHost=n,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=l,this.nonce=c,this.tracingService=d,this.platformIsServer=rb(a),this.defaultRenderer=new Qp(t,s,l,this.platformIsServer,this.tracingService)}createRenderer(t,n){if(!t||!n)return this.defaultRenderer;this.platformIsServer&&n.encapsulation===el.ShadowDom&&(n=ot(Ie({},n),{encapsulation:el.Emulated}));let r=this.getOrCreateRenderer(t,n);return r instanceof sb?r.applyToHost(t):r instanceof Jp&&r.applyStyles(),r}getOrCreateRenderer(t,n){let r=this.rendererByCompId,o=r.get(n.id);if(!o){let s=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer,p=this.tracingService;switch(n.encapsulation){case el.Emulated:o=new sb(l,c,n,this.appId,d,s,a,h,p);break;case el.ShadowDom:return new gO(l,c,t,n,s,a,this.nonce,h,p);default:o=new Jp(l,c,n,d,s,a,h,p);break}r.set(n.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(n){return new(n||i)(ht(pO),ht(mO),ht(kv),ht(wQ),ht(ai),ht(tf),ht(On),ht(PP),ht(nf,8))};static \u0275prov=tt({token:i,factory:i.\u0275fac})}return i})(),Qp=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,n,r,o){this.eventManager=e,this.doc=t,this.ngZone=n,this.platformIsServer=r,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(hO[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(xT(e)?e.content:e).appendChild(t)}insertBefore(e,t,n){e&&(xT(e)?e.content:e).insertBefore(t,n)}removeChild(e,t){t.remove()}selectRootElement(e,t){let n=typeof e=="string"?this.doc.querySelector(e):e;if(!n)throw new je(-5104,!1);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,r){if(r){t=r+":"+t;let o=hO[r];o?e.setAttributeNS(o,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){let r=hO[n];r?e.removeAttributeNS(r,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,r){r&(tc.DashCase|tc.Important)?e.style.setProperty(t,n,r&tc.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&tc.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){e!=null&&(e[t]=n)}setValue(e,t){e.nodeValue=t}listen(e,t,n,r){if(typeof e=="string"&&(e=ls().getGlobalEventTarget(this.doc,e),!e))throw new je(5102,!1);let o=this.decoratePreventDefault(n);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,r)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function xT(i){return i.tagName==="TEMPLATE"&&i.content!==void 0}var gO=class extends Qp{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,n,r,o,s,a,l,c){super(e,o,s,l,c),this.sharedStylesHost=t,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=r.styles;d=vT(r.id,d);for(let p of d){let g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=p,this.shadowRoot.appendChild(g)}let h=r.getExternalStyles?.();if(h)for(let p of h){let g=fO(p,o);a&&g.setAttribute("nonce",a),this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Jp=class extends Qp{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,n,r,o,s,a,l,c){super(e,o,s,a,l),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r;let d=n.styles;this.styles=c?vT(c,d):d,this.styleUrls=n.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},sb=class extends Jp{contentAttr;hostAttr;constructor(e,t,n,r,o,s,a,l,c){let d=r+"-"+n.id;super(e,t,n,o,s,a,l,c,d),this.contentAttr=MQ(d),this.hostAttr=EQ(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}};var lb=class i extends Hp{supportsDOMEvents=!0;static makeCurrent(){iO(new i)}onAndCancel(e,t,n,r){return e.addEventListener(t,n,r),()=>{e.removeEventListener(t,n,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=PQ();return t==null?null:OQ(t)}resetBaseElement(){em=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Yp(document.cookie,e)}},em=null;function PQ(){return em=em||document.querySelector("base"),em?em.getAttribute("href"):null}function OQ(i){return new URL(i,document.baseURI).pathname}var cb=class{addToWindow(e){Mr.getAngularTestability=(n,r=!0)=>{let o=e.findTestabilityInTree(n,r);if(o==null)throw new je(5103,!1);return o},Mr.getAllAngularTestabilities=()=>e.getAllTestabilities(),Mr.getAllAngularRootElements=()=>e.getAllRootElements();let t=n=>{let r=Mr.getAllAngularTestabilities(),o=r.length,s=function(){o--,o==0&&n()};r.forEach(a=>{a.whenStable(s)})};Mr.frameworkStabilizers||(Mr.frameworkStabilizers=[]),Mr.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,n){if(t==null)return null;let r=e.getTestability(t);return r??(n?ls().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},SQ=(()=>{class i{build(){return new XMLHttpRequest}static \u0275fac=function(n){return new(n||i)};static \u0275prov=tt({token:i,factory:i.\u0275fac})}return i})(),CT=(()=>{class i extends Xp{constructor(t){super(t)}supports(t){return!0}addEventListener(t,n,r,o){return t.addEventListener(n,r,o),()=>this.removeEventListener(t,n,r,o)}removeEventListener(t,n,r,o){return t.removeEventListener(n,r,o)}static \u0275fac=function(n){return new(n||i)(ht(ai))};static \u0275prov=tt({token:i,factory:i.\u0275fac})}return i})(),bT=["alt","control","meta","shift"],kQ={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},AQ={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey},yT=(()=>{class i extends Xp{constructor(t){super(t)}supports(t){return i.parseEventName(t)!=null}addEventListener(t,n,r,o){let s=i.parseEventName(n),a=i.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ls().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let n=t.toLowerCase().split("."),r=n.shift();if(n.length===0||!(r==="keydown"||r==="keyup"))return null;let o=i._normalizeKey(n.pop()),s="",a=n.indexOf("code");if(a>-1&&(n.splice(a,1),s="code."),bT.forEach(c=>{let d=n.indexOf(c);d>-1&&(n.splice(d,1),s+=c+".")}),s+=o,n.length!=0||o.length===0)return null;let l={};return l.domEventName=r,l.fullKey=s,l}static matchEventFullKeyCode(t,n){let r=kQ[t.key]||t.key,o="";return n.indexOf("code.")>-1&&(r=t.code,o="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),bT.forEach(s=>{if(s!==r){let a=AQ[s];a(t)&&(o+=s+".")}}),o+=r,o===n)}static eventCallback(t,n,r){return o=>{i.matchEventFullKeyCode(o,t)&&r.runGuarded(()=>n(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(n){return new(n||i)(ht(ai))};static \u0275prov=tt({token:i,factory:i.\u0275fac})}return i})();function DQ(){lb.makeCurrent()}function FQ(){return new Za}function IQ(){return bF(document),document}var TQ=[{provide:tf,useValue:dO},{provide:MP,useValue:DQ,multi:!0},{provide:ai,useFactory:IQ}],_O=tO(UI,"browser",TQ);var BQ=[{provide:Rp,useClass:cb},{provide:YP,useClass:jv,deps:[On,Vv,Rp]},{provide:jv,useClass:jv,deps:[On,Vv,Rp]}],NQ=[{provide:wv,useValue:"root"},{provide:Za,useFactory:FQ},{provide:ab,useClass:CT,multi:!0,deps:[ai]},{provide:ab,useClass:yT,multi:!0,deps:[ai]},Zp,mO,pO,{provide:rd,useExisting:Zp},{provide:Bu,useClass:SQ},[]],ds=(()=>{class i{constructor(){}static \u0275fac=function(n){return new(n||i)};static \u0275mod=bn({type:i});static \u0275inj=vn({providers:[...NQ,...BQ],imports:[cs,HI]})}return i})();var lf=class{},tm=class{},xt=class i{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let n=t.indexOf(":");if(n>0){let r=t.slice(0,n),o=t.slice(n+1).trim();this.addHeaderEntry(r,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,n)=>{this.addHeaderEntry(n,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,n])=>{this.setHeaderEntries(t,n)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof i?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new i;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof i?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let n=e.value;if(typeof n=="string"&&(n=[n]),n.length===0)return;this.maybeSetNormalizedName(e.name,t);let r=(e.op==="a"?this.headers.get(t):void 0)||[];r.push(...n),this.headers.set(t,r);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(e,t){let n=e.toLowerCase();this.maybeSetNormalizedName(e,n),this.headers.has(n)?this.headers.get(n).push(t):this.headers.set(n,[t])}setHeaderEntries(e,t){let n=(Array.isArray(t)?t:[t]).map(o=>o.toString()),r=e.toLowerCase();this.headers.set(r,n),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var ub=class{encodeKey(e){return wT(e)}encodeValue(e){return wT(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function LQ(i,e){let t=new Map;return i.length>0&&i.replace(/^\?/,"").split("&").forEach(r=>{let o=r.indexOf("="),[s,a]=o==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,o)),e.decodeValue(r.slice(o+1))],l=t.get(s)||[];l.push(a),t.set(s,l)}),t}var RQ=/%(\d[a-f0-9])/gi,zQ={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function wT(i){return encodeURIComponent(i).replace(RQ,(e,t)=>zQ[t]??e)}function db(i){return`${i}`}var dc=class i{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new ub,e.fromString){if(e.fromObject)throw new je(2805,!1);this.map=LQ(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let n=e.fromObject[t],r=Array.isArray(n)?n.map(db):[db(n)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(n=>{let r=e[n];Array.isArray(r)?r.forEach(o=>{t.push({param:n,value:o,op:"a"})}):t.push({param:n,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(n=>t+"="+this.encoder.encodeValue(n)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new i({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(db(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let n=this.map.get(e.param)||[],r=n.indexOf(db(e.value));r!==-1&&n.splice(r,1),n.length>0?this.map.set(e.param,n):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var hb=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function jQ(i){switch(i){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function MT(i){return typeof ArrayBuffer<"u"&&i instanceof ArrayBuffer}function ET(i){return typeof Blob<"u"&&i instanceof Blob}function PT(i){return typeof FormData<"u"&&i instanceof FormData}function VQ(i){return typeof URLSearchParams<"u"&&i instanceof URLSearchParams}var OT="Content-Type",ST="Accept",AT="X-Request-URL",DT="text/plain",FT="application/json",UQ=`${FT}, ${DT}, */*`,af=class i{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(e,t,n,r){this.url=t,this.method=e.toUpperCase();let o;if(jQ(this.method)||r?(this.body=n!==void 0?n:null,o=r):o=n,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new xt,this.context??=new hb,!this.params)this.params=new dc,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),l=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+l+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||MT(this.body)||ET(this.body)||PT(this.body)||VQ(this.body)?this.body:this.body instanceof dc?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||PT(this.body)?null:ET(this.body)?this.body.type||null:MT(this.body)?null:typeof this.body=="string"?DT:this.body instanceof dc?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?FT:null}clone(e={}){let t=e.method||this.method,n=e.url||this.url,r=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress,c=e.headers||this.headers,d=e.params||this.params,h=e.context??this.context;return e.setHeaders!==void 0&&(c=Object.keys(e.setHeaders).reduce((p,g)=>p.set(g,e.setHeaders[g]),c)),e.setParams&&(d=Object.keys(e.setParams).reduce((p,g)=>p.set(g,e.setParams[g]),d)),new i(t,n,s,{params:d,headers:c,context:h,reportProgress:l,responseType:r,withCredentials:a,transferCache:o})}},Nu=function(i){return i[i.Sent=0]="Sent",i[i.UploadProgress=1]="UploadProgress",i[i.ResponseHeader=2]="ResponseHeader",i[i.DownloadProgress=3]="DownloadProgress",i[i.Response=4]="Response",i[i.User=5]="User",i}(Nu||{}),cf=class{headers;status;statusText;url;ok;type;constructor(e,t=200,n="OK"){this.headers=e.headers||new xt,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||n,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},fb=class i extends cf{constructor(e={}){super(e)}type=Nu.ResponseHeader;clone(e={}){return new i({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},nm=class i extends cf{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=Nu.Response;clone(e={}){return new i({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},im=class extends cf{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},HQ=200,GQ=204;function vO(i,e){return{body:e,headers:i.headers,context:i.context,observe:i.observe,params:i.params,reportProgress:i.reportProgress,responseType:i.responseType,withCredentials:i.withCredentials,transferCache:i.transferCache}}var gt=(()=>{class i{handler;constructor(t){this.handler=t}request(t,n,r={}){let o;if(t instanceof af)o=t;else{let l;r.headers instanceof xt?l=r.headers:l=new xt(r.headers);let c;r.params&&(r.params instanceof dc?c=r.params:c=new dc({fromObject:r.params})),o=new af(t,n,r.body!==void 0?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}let s=At(o).pipe(Ka(l=>this.handler.handle(l)));if(t instanceof af||r.observe==="events")return s;let a=s.pipe(gr(l=>l instanceof nm));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(Jt(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new je(2806,!1);return l.body}));case"blob":return a.pipe(Jt(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new je(2807,!1);return l.body}));case"text":return a.pipe(Jt(l=>{if(l.body!==null&&typeof l.body!="string")throw new je(2808,!1);return l.body}));case"json":default:return a.pipe(Jt(l=>l.body))}case"response":return a;default:throw new je(2809,!1)}}delete(t,n={}){return this.request("DELETE",t,n)}get(t,n={}){return this.request("GET",t,n)}head(t,n={}){return this.request("HEAD",t,n)}jsonp(t,n){return this.request("JSONP",t,{params:new dc().append(n,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,n={}){return this.request("OPTIONS",t,n)}patch(t,n,r={}){return this.request("PATCH",t,vO(r,n))}post(t,n,r={}){return this.request("POST",t,vO(r,n))}put(t,n,r={}){return this.request("PUT",t,vO(r,n))}static \u0275fac=function(n){return new(n||i)(ht(lf))};static \u0275prov=tt({token:i,factory:i.\u0275fac})}return i})();var $Q=new Ze("");function IT(i,e){return e(i)}function WQ(i,e){return(t,n)=>e.intercept(t,{handle:r=>i(r,n)})}function qQ(i,e,t){return(n,r)=>ko(t,()=>e(n,o=>i(o,r)))}var TT=new Ze(""),CO=new Ze(""),BT=new Ze(""),yO=new Ze("",{providedIn:"root",factory:()=>!0});function KQ(){let i=null;return(e,t)=>{i===null&&(i=($e(TT,{optional:!0})??[]).reduceRight(WQ,IT));let n=$e(ic);if($e(yO)){let o=n.add();return i(e,t).pipe(td(()=>n.remove(o)))}else return i(e,t)}}var gb=(()=>{class i extends lf{backend;injector;chain=null;pendingTasks=$e(ic);contributeToStability=$e(yO);constructor(t,n){super(),this.backend=t,this.injector=n}handle(t){if(this.chain===null){let n=Array.from(new Set([...this.injector.get(CO),...this.injector.get(BT,[])]));this.chain=n.reduceRight((r,o)=>qQ(r,o,this.injector),IT)}if(this.contributeToStability){let n=this.pendingTasks.add();return this.chain(t,r=>this.backend.handle(r)).pipe(td(()=>this.pendingTasks.remove(n)))}else return this.chain(t,n=>this.backend.handle(n))}static \u0275fac=function(n){return new(n||i)(ht(tm),ht(zr))};static \u0275prov=tt({token:i,factory:i.\u0275fac})}return i})();var YQ=/^\)\]\}',?\n/,XQ=RegExp(`^${AT}:`,"m");function QQ(i){return"responseURL"in i&&i.responseURL?i.responseURL:XQ.test(i.getAllResponseHeaders())?i.getResponseHeader(AT):null}var bO=(()=>{class i{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new je(-2800,!1);let n=this.xhrFactory;return(n.\u0275loadImpl?oi(n.\u0275loadImpl()):At(null)).pipe(Mo(()=>new wn(o=>{let s=n.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((b,C)=>s.setRequestHeader(b,C.join(","))),t.headers.has(ST)||s.setRequestHeader(ST,UQ),!t.headers.has(OT)){let b=t.detectContentTypeHeader();b!==null&&s.setRequestHeader(OT,b)}if(t.responseType){let b=t.responseType.toLowerCase();s.responseType=b!=="json"?b:"text"}let a=t.serializeBody(),l=null,c=()=>{if(l!==null)return l;let b=s.statusText||"OK",C=new xt(s.getAllResponseHeaders()),y=QQ(s)||t.url;return l=new fb({headers:C,status:s.status,statusText:b,url:y}),l},d=()=>{let{headers:b,status:C,statusText:y,url:M}=c(),O=null;C!==GQ&&(O=typeof s.response>"u"?s.responseText:s.response),C===0&&(C=O?HQ:0);let A=C>=200&&C<300;if(t.responseType==="json"&&typeof O=="string"){let D=O;O=O.replace(YQ,"");try{O=O!==""?JSON.parse(O):null}catch(N){O=D,A&&(A=!1,O={error:N,text:O})}}A?(o.next(new nm({body:O,headers:b,status:C,statusText:y,url:M||void 0})),o.complete()):o.error(new im({error:O,headers:b,status:C,statusText:y,url:M||void 0}))},h=b=>{let{url:C}=c(),y=new im({error:b,status:s.status||0,statusText:s.statusText||"Unknown Error",url:C||void 0});o.error(y)},p=!1,g=b=>{p||(o.next(c()),p=!0);let C={type:Nu.DownloadProgress,loaded:b.loaded};b.lengthComputable&&(C.total=b.total),t.responseType==="text"&&s.responseText&&(C.partialText=s.responseText),o.next(C)},_=b=>{let C={type:Nu.UploadProgress,loaded:b.loaded};b.lengthComputable&&(C.total=b.total),o.next(C)};return s.addEventListener("load",d),s.addEventListener("error",h),s.addEventListener("timeout",h),s.addEventListener("abort",h),t.reportProgress&&(s.addEventListener("progress",g),a!==null&&s.upload&&s.upload.addEventListener("progress",_)),s.send(a),o.next({type:Nu.Sent}),()=>{s.removeEventListener("error",h),s.removeEventListener("abort",h),s.removeEventListener("load",d),s.removeEventListener("timeout",h),t.reportProgress&&(s.removeEventListener("progress",g),a!==null&&s.upload&&s.upload.removeEventListener("progress",_)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(n){return new(n||i)(ht(Bu))};static \u0275prov=tt({token:i,factory:i.\u0275fac})}return i})(),NT=new Ze(""),JQ="XSRF-TOKEN",ZQ=new Ze("",{providedIn:"root",factory:()=>JQ}),eJ="X-XSRF-TOKEN",tJ=new Ze("",{providedIn:"root",factory:()=>eJ}),rm=class{},nJ=(()=>{class i{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,n){this.doc=t,this.cookieName=n}getToken(){let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Yp(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(n){return new(n||i)(ht(ai),ht(ZQ))};static \u0275prov=tt({token:i,factory:i.\u0275fac})}return i})();function iJ(i,e){let t=i.url.toLowerCase();if(!$e(NT)||i.method==="GET"||i.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(i);let n=$e(rm).getToken(),r=$e(tJ);return n!=null&&!i.headers.has(r)&&(i=i.clone({headers:i.headers.set(r,n)})),e(i)}var wO=function(i){return i[i.Interceptors=0]="Interceptors",i[i.LegacyInterceptors=1]="LegacyInterceptors",i[i.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",i[i.NoXsrfProtection=3]="NoXsrfProtection",i[i.JsonpSupport=4]="JsonpSupport",i[i.RequestsMadeViaParent=5]="RequestsMadeViaParent",i[i.Fetch=6]="Fetch",i}(wO||{});function rJ(i,e){return{\u0275kind:i,\u0275providers:e}}function LT(...i){let e=[gt,bO,gb,{provide:lf,useExisting:gb},{provide:tm,useFactory:()=>$e($Q,{optional:!0})??$e(bO)},{provide:CO,useValue:iJ,multi:!0},{provide:NT,useValue:!0},{provide:rm,useClass:nJ}];for(let t of i)e.push(...t.\u0275providers);return od(e)}var kT=new Ze("");function RT(){return rJ(wO.LegacyInterceptors,[{provide:kT,useFactory:KQ},{provide:CO,useExisting:kT,multi:!0}])}var xa=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=bn({type:i});static \u0275inj=vn({providers:[LT(RT())]})}return i})();var zT=(()=>{class i{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(n){return new(n||i)(ht(ai))};static \u0275prov=tt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var MO=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275prov=tt({token:i,factory:function(n){let r=null;return n?r=new(n||i):r=ht(oJ),r},providedIn:"root"})}return i})(),oJ=(()=>{class i extends MO{_doc;constructor(t){super(),this._doc=t}sanitize(t,n){if(n==null)return null;switch(t){case os.NONE:return n;case os.HTML:return rc(n,"HTML")?Ds(n):AP(this._doc,String(n)).toString();case os.STYLE:return rc(n,"Style")?Ds(n):n;case os.SCRIPT:if(rc(n,"Script"))return Ds(n);throw new je(5200,!1);case os.URL:return rc(n,"URL")?Ds(n):Dv(String(n));case os.RESOURCE_URL:if(rc(n,"ResourceURL"))return Ds(n);throw new je(5201,!1);default:throw new je(5202,!1)}}bypassSecurityTrustHtml(t){return SF(t)}bypassSecurityTrustStyle(t){return kF(t)}bypassSecurityTrustScript(t){return AF(t)}bypassSecurityTrustUrl(t){return DF(t)}bypassSecurityTrustResourceUrl(t){return FF(t)}static \u0275fac=function(n){return new(n||i)(ht(ai))};static \u0275prov=tt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var qt="primary",xm=Symbol("RouteTitle"),kO=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function zu(i){return new kO(i)}function KT(i,e,t){let n=t.path.split("/");if(n.length>i.length||t.pathMatch==="full"&&(e.hasChildren()||n.length<i.length))return null;let r={};for(let o=0;o<n.length;o++){let s=n[o],a=i[o];if(s[0]===":")r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:i.slice(0,n.length),posParams:r}}function sJ(i,e){if(i.length!==e.length)return!1;for(let t=0;t<i.length;++t)if(!al(i[t],e[t]))return!1;return!0}function al(i,e){let t=i?AO(i):void 0,n=e?AO(e):void 0;if(!t||!n||t.length!=n.length)return!1;let r;for(let o=0;o<t.length;o++)if(r=t[o],!YT(i[r],e[r]))return!1;return!0}function AO(i){return[...Object.keys(i),...Object.getOwnPropertySymbols(i)]}function YT(i,e){if(Array.isArray(i)&&Array.isArray(e)){if(i.length!==e.length)return!1;let t=[...i].sort(),n=[...e].sort();return t.every((r,o)=>n[o]===r)}else return i===e}function XT(i){return i.length>0?i[i.length-1]:null}function pd(i){return BM(i)?i:Tu(i)?oi(Promise.resolve(i)):At(i)}var aJ={exact:JT,subset:ZT},QT={exact:lJ,subset:cJ,ignored:()=>!0};function VT(i,e,t){return aJ[t.paths](i.root,e.root,t.matrixParams)&&QT[t.queryParams](i.queryParams,e.queryParams)&&!(t.fragment==="exact"&&i.fragment!==e.fragment)}function lJ(i,e){return al(i,e)}function JT(i,e,t){if(!Lu(i.segments,e.segments)||!xb(i.segments,e.segments,t)||i.numberOfChildren!==e.numberOfChildren)return!1;for(let n in e.children)if(!i.children[n]||!JT(i.children[n],e.children[n],t))return!1;return!0}function cJ(i,e){return Object.keys(e).length<=Object.keys(i).length&&Object.keys(e).every(t=>YT(i[t],e[t]))}function ZT(i,e,t){return e7(i,e,e.segments,t)}function e7(i,e,t,n){if(i.segments.length>t.length){let r=i.segments.slice(0,t.length);return!(!Lu(r,t)||e.hasChildren()||!xb(r,t,n))}else if(i.segments.length===t.length){if(!Lu(i.segments,t)||!xb(i.segments,t,n))return!1;for(let r in e.children)if(!i.children[r]||!ZT(i.children[r],e.children[r],n))return!1;return!0}else{let r=t.slice(0,i.segments.length),o=t.slice(i.segments.length);return!Lu(i.segments,r)||!xb(i.segments,r,n)||!i.children[qt]?!1:e7(i.children[qt],e,o,n)}}function xb(i,e,t){return e.every((n,r)=>QT[t](i[r].parameters,n.parameters))}var cl=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Dn([],{}),t={},n=null){this.root=e,this.queryParams=t,this.fragment=n}get queryParamMap(){return this._queryParamMap??=zu(this.queryParams),this._queryParamMap}toString(){return hJ.serialize(this)}},Dn=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(n=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return _b(this)}},ud=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=zu(this.parameters),this._parameterMap}toString(){return n7(this)}};function dJ(i,e){return Lu(i,e)&&i.every((t,n)=>al(t.parameters,e[n].parameters))}function Lu(i,e){return i.length!==e.length?!1:i.every((t,n)=>t.path===e[n].path)}function uJ(i,e){let t=[];return Object.entries(i.children).forEach(([n,r])=>{n===qt&&(t=t.concat(e(r,n)))}),Object.entries(i.children).forEach(([n,r])=>{n!==qt&&(t=t.concat(e(r,n)))}),t}var ju=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275prov=tt({token:i,factory:()=>new hd,providedIn:"root"})}return i})(),hd=class{parse(e){let t=new FO(e);return new cl(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${om(e.root,!0)}`,n=pJ(e.queryParams),r=typeof e.fragment=="string"?`#${fJ(e.fragment)}`:"";return`${t}${n}${r}`}},hJ=new hd;function _b(i){return i.segments.map(e=>n7(e)).join("/")}function om(i,e){if(!i.hasChildren())return _b(i);if(e){let t=i.children[qt]?om(i.children[qt],!1):"",n=[];return Object.entries(i.children).forEach(([r,o])=>{r!==qt&&n.push(`${r}:${om(o,!1)}`)}),n.length>0?`${t}(${n.join("//")})`:t}else{let t=uJ(i,(n,r)=>r===qt?[om(i.children[qt],!1)]:[`${r}:${om(n,!1)}`]);return Object.keys(i.children).length===1&&i.children[qt]!=null?`${_b(i)}/${t[0]}`:`${_b(i)}/(${t.join("//")})`}}function t7(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function pb(i){return t7(i).replace(/%3B/gi,";")}function fJ(i){return encodeURI(i)}function DO(i){return t7(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function vb(i){return decodeURIComponent(i)}function UT(i){return vb(i.replace(/\+/g,"%20"))}function n7(i){return`${DO(i.path)}${gJ(i.parameters)}`}function gJ(i){return Object.entries(i).map(([e,t])=>`;${DO(e)}=${DO(t)}`).join("")}function pJ(i){let e=Object.entries(i).map(([t,n])=>Array.isArray(n)?n.map(r=>`${pb(t)}=${pb(r)}`).join("&"):`${pb(t)}=${pb(n)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var mJ=/^[^\/()?;#]+/;function EO(i){let e=i.match(mJ);return e?e[0]:""}var xJ=/^[^\/()?;=#]+/;function _J(i){let e=i.match(xJ);return e?e[0]:""}var vJ=/^[^=?&#]+/;function bJ(i){let e=i.match(vJ);return e?e[0]:""}var CJ=/^[^&#]+/;function yJ(i){let e=i.match(CJ);return e?e[0]:""}var FO=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Dn([],{}):new Dn([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n[qt]=new Dn(e,t)),n}parseSegment(){let e=EO(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new je(4009,!1);return this.capture(e),new ud(vb(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=_J(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){let r=EO(this.remaining);r&&(n=r,this.capture(n))}e[vb(t)]=vb(n)}parseQueryParam(e){let t=bJ(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){let s=yJ(this.remaining);s&&(n=s,this.capture(n))}let r=UT(t),o=UT(n);if(e.hasOwnProperty(r)){let s=e[r];Array.isArray(s)||(s=[s],e[r]=s),s.push(o)}else e[r]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let n=EO(this.remaining),r=this.remaining[n.length];if(r!=="/"&&r!==")"&&r!==";")throw new je(4010,!1);let o;n.indexOf(":")>-1?(o=n.slice(0,n.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=qt);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[qt]:new Dn([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new je(4011,!1)}};function i7(i){return i.segments.length>0?new Dn([],{[qt]:i}):i}function r7(i){let e={};for(let[n,r]of Object.entries(i.children)){let o=r7(r);if(n===qt&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[n]=o)}let t=new Dn(i.segments,e);return wJ(t)}function wJ(i){if(i.numberOfChildren===1&&i.children[qt]){let e=i.children[qt];return new Dn(i.segments.concat(e.segments),e.children)}return i}function fd(i){return i instanceof cl}function o7(i,e,t=null,n=null){let r=s7(i);return a7(r,e,t,n)}function s7(i){let e;function t(o){let s={};for(let l of o.children){let c=t(l);s[l.outlet]=c}let a=new Dn(o.url,s);return o===i&&(e=a),a}let n=t(i.root),r=i7(n);return e??r}function a7(i,e,t,n){let r=i;for(;r.parent;)r=r.parent;if(e.length===0)return PO(r,r,r,t,n);let o=MJ(e);if(o.toRoot())return PO(r,r,new Dn([],{}),t,n);let s=EJ(o,r,i),a=s.processChildren?am(s.segmentGroup,s.index,o.commands):c7(s.segmentGroup,s.index,o.commands);return PO(r,s.segmentGroup,a,t,n)}function Cb(i){return typeof i=="object"&&i!=null&&!i.outlets&&!i.segmentPath}function cm(i){return typeof i=="object"&&i!=null&&i.outlets}function PO(i,e,t,n,r){let o={};n&&Object.entries(n).forEach(([l,c])=>{o[l]=Array.isArray(c)?c.map(d=>`${d}`):`${c}`});let s;i===e?s=t:s=l7(i,e,t);let a=i7(r7(s));return new cl(a,o,r)}function l7(i,e,t){let n={};return Object.entries(i.children).forEach(([r,o])=>{o===e?n[r]=t:n[r]=l7(o,e,t)}),new Dn(i.segments,n)}var yb=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,n){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=n,e&&n.length>0&&Cb(n[0]))throw new je(4003,!1);let r=n.find(cm);if(r&&r!==XT(n))throw new je(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function MJ(i){if(typeof i[0]=="string"&&i.length===1&&i[0]==="/")return new yb(!0,0,i);let e=0,t=!1,n=i.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?t=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,o]},[]);return new yb(t,e,n)}var hf=class{segmentGroup;processChildren;index;constructor(e,t,n){this.segmentGroup=e,this.processChildren=t,this.index=n}};function EJ(i,e,t){if(i.isAbsolute)return new hf(e,!0,0);if(!t)return new hf(e,!1,NaN);if(t.parent===null)return new hf(t,!0,0);let n=Cb(i.commands[0])?0:1,r=t.segments.length-1+n;return PJ(t,r,i.numberOfDoubleDots)}function PJ(i,e,t){let n=i,r=e,o=t;for(;o>r;){if(o-=r,n=n.parent,!n)throw new je(4005,!1);r=n.segments.length}return new hf(n,!1,r-o)}function OJ(i){return cm(i[0])?i[0].outlets:{[qt]:i}}function c7(i,e,t){if(i??=new Dn([],{}),i.segments.length===0&&i.hasChildren())return am(i,e,t);let n=SJ(i,e,t),r=t.slice(n.commandIndex);if(n.match&&n.pathIndex<i.segments.length){let o=new Dn(i.segments.slice(0,n.pathIndex),{});return o.children[qt]=new Dn(i.segments.slice(n.pathIndex),i.children),am(o,0,r)}else return n.match&&r.length===0?new Dn(i.segments,{}):n.match&&!i.hasChildren()?IO(i,e,t):n.match?am(i,0,r):IO(i,e,t)}function am(i,e,t){if(t.length===0)return new Dn(i.segments,{});{let n=OJ(t),r={};if(Object.keys(n).some(o=>o!==qt)&&i.children[qt]&&i.numberOfChildren===1&&i.children[qt].segments.length===0){let o=am(i.children[qt],e,t);return new Dn(i.segments,o.children)}return Object.entries(n).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=c7(i.children[o],e,s))}),Object.entries(i.children).forEach(([o,s])=>{n[o]===void 0&&(r[o]=s)}),new Dn(i.segments,r)}}function SJ(i,e,t){let n=0,r=e,o={match:!1,pathIndex:0,commandIndex:0};for(;r<i.segments.length;){if(n>=t.length)return o;let s=i.segments[r],a=t[n];if(cm(a))break;let l=`${a}`,c=n<t.length-1?t[n+1]:null;if(r>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!GT(l,c,s))return o;n+=2}else{if(!GT(l,{},s))return o;n++}r++}return{match:!0,pathIndex:r,commandIndex:n}}function IO(i,e,t){let n=i.segments.slice(0,e),r=0;for(;r<t.length;){let o=t[r];if(cm(o)){let l=kJ(o.outlets);return new Dn(n,l)}if(r===0&&Cb(t[0])){let l=i.segments[e];n.push(new ud(l.path,HT(t[0]))),r++;continue}let s=cm(o)?o.outlets[qt]:`${o}`,a=r<t.length-1?t[r+1]:null;s&&a&&Cb(a)?(n.push(new ud(s,HT(a))),r+=2):(n.push(new ud(s,{})),r++)}return new Dn(n,{})}function kJ(i){let e={};return Object.entries(i).forEach(([t,n])=>{typeof n=="string"&&(n=[n]),n!==null&&(e[t]=IO(new Dn([],{}),0,n))}),e}function HT(i){let e={};return Object.entries(i).forEach(([t,n])=>e[t]=`${n}`),e}function GT(i,e,t){return i==t.path&&al(e,t.parameters)}var bb="imperative",mr=function(i){return i[i.NavigationStart=0]="NavigationStart",i[i.NavigationEnd=1]="NavigationEnd",i[i.NavigationCancel=2]="NavigationCancel",i[i.NavigationError=3]="NavigationError",i[i.RoutesRecognized=4]="RoutesRecognized",i[i.ResolveStart=5]="ResolveStart",i[i.ResolveEnd=6]="ResolveEnd",i[i.GuardsCheckStart=7]="GuardsCheckStart",i[i.GuardsCheckEnd=8]="GuardsCheckEnd",i[i.RouteConfigLoadStart=9]="RouteConfigLoadStart",i[i.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",i[i.ChildActivationStart=11]="ChildActivationStart",i[i.ChildActivationEnd=12]="ChildActivationEnd",i[i.ActivationStart=13]="ActivationStart",i[i.ActivationEnd=14]="ActivationEnd",i[i.Scroll=15]="Scroll",i[i.NavigationSkipped=16]="NavigationSkipped",i}(mr||{}),hs=class{id;url;constructor(e,t){this.id=e,this.url=t}},gd=class extends hs{type=mr.NavigationStart;navigationTrigger;restoredState;constructor(e,t,n="imperative",r=null){super(e,t),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},To=class extends hs{urlAfterRedirects;type=mr.NavigationEnd;constructor(e,t,n){super(e,t),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Io=function(i){return i[i.Redirect=0]="Redirect",i[i.SupersededByNewNavigation=1]="SupersededByNewNavigation",i[i.NoDataFromResolver=2]="NoDataFromResolver",i[i.GuardRejected=3]="GuardRejected",i}(Io||{}),gf=function(i){return i[i.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",i[i.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",i}(gf||{}),ll=class extends hs{reason;code;type=mr.NavigationCancel;constructor(e,t,n,r){super(e,t),this.reason=n,this.code=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},dl=class extends hs{reason;code;type=mr.NavigationSkipped;constructor(e,t,n,r){super(e,t),this.reason=n,this.code=r}},pf=class extends hs{error;target;type=mr.NavigationError;constructor(e,t,n,r){super(e,t),this.error=n,this.target=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},dm=class extends hs{urlAfterRedirects;state;type=mr.RoutesRecognized;constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},wb=class extends hs{urlAfterRedirects;state;type=mr.GuardsCheckStart;constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Mb=class extends hs{urlAfterRedirects;state;shouldActivate;type=mr.GuardsCheckEnd;constructor(e,t,n,r,o){super(e,t),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Eb=class extends hs{urlAfterRedirects;state;type=mr.ResolveStart;constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Pb=class extends hs{urlAfterRedirects;state;type=mr.ResolveEnd;constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ob=class{route;type=mr.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Sb=class{route;type=mr.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},kb=class{snapshot;type=mr.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ab=class{snapshot;type=mr.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Db=class{snapshot;type=mr.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Fb=class{snapshot;type=mr.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},mf=class{routerEvent;position;anchor;type=mr.Scroll;constructor(e,t,n){this.routerEvent=e,this.position=t,this.anchor=n}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},um=class{},xf=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function AJ(i,e){return i.providers&&!i._injector&&(i._injector=Np(i.providers,e,`Route: ${i.path}`)),i._injector??e}function _a(i){return i.outlet||qt}function DJ(i,e){let t=i.filter(n=>_a(n)===e);return t.push(...i.filter(n=>_a(n)!==e)),t}function _m(i){if(!i)return null;if(i.routeConfig?._injector)return i.routeConfig._injector;for(let e=i.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Ib=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return _m(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Vu(this.rootInjector)}},Vu=(()=>{class i{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,n){let r=this.getOrCreateContext(t);r.outlet=n,this.contexts.set(t,r)}onChildOutletDestroyed(t){let n=this.getContext(t);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let n=this.getContext(t);return n||(n=new Ib(this.rootInjector),this.contexts.set(t,n)),n}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(n){return new(n||i)(ht(zr))};static \u0275prov=tt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Tb=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=TO(e,this._root);return t?t.children.map(n=>n.value):[]}firstChild(e){let t=TO(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=BO(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return BO(e,this._root).map(t=>t.value)}};function TO(i,e){if(i===e.value)return e;for(let t of e.children){let n=TO(i,t);if(n)return n}return null}function BO(i,e){if(i===e.value)return[e];for(let t of e.children){let n=BO(i,t);if(n.length)return n.unshift(e),n}return[]}var us=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function uf(i){let e={};return i&&i.children.forEach(t=>e[t.value.outlet]=t),e}var hm=class extends Tb{snapshot;constructor(e,t){super(e),this.snapshot=t,HO(this,e)}toString(){return this.snapshot.toString()}};function d7(i){let e=FJ(i),t=new fr([new ud("",{})]),n=new fr({}),r=new fr({}),o=new fr({}),s=new fr(""),a=new Mi(t,n,o,s,r,qt,i,e.root);return a.snapshot=e.root,new hm(new us(a,[]),e)}function FJ(i){let e={},t={},n={},r="",o=new Ru([],e,n,r,t,qt,i,null,{});return new fm("",new us(o,[]))}var Mi=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,n,r,o,s,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=n,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(Jt(c=>c[xm]))??At(void 0),this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Jt(e=>zu(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Jt(e=>zu(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Bb(i,e,t="emptyOnly"){let n,{routeConfig:r}=i;return e!==null&&(t==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?n={params:Ie(Ie({},e.params),i.params),data:Ie(Ie({},e.data),i.data),resolve:Ie(Ie(Ie(Ie({},i.data),e.data),r?.data),i._resolvedData)}:n={params:Ie({},i.params),data:Ie({},i.data),resolve:Ie(Ie({},i.data),i._resolvedData??{})},r&&h7(r)&&(n.resolve[xm]=r.title),n}var Ru=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[xm]}constructor(e,t,n,r,o,s,a,l,c){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=zu(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=zu(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(n=>n.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},fm=class extends Tb{url;constructor(e,t){super(t),this.url=e,HO(this,t)}toString(){return u7(this._root)}};function HO(i,e){e.value._routerState=i,e.children.forEach(t=>HO(i,t))}function u7(i){let e=i.children.length>0?` { ${i.children.map(u7).join(", ")} } `:"";return`${i.value}${e}`}function OO(i){if(i.snapshot){let e=i.snapshot,t=i._futureSnapshot;i.snapshot=t,al(e.queryParams,t.queryParams)||i.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&i.fragmentSubject.next(t.fragment),al(e.params,t.params)||i.paramsSubject.next(t.params),sJ(e.url,t.url)||i.urlSubject.next(t.url),al(e.data,t.data)||i.dataSubject.next(t.data)}else i.snapshot=i._futureSnapshot,i.dataSubject.next(i._futureSnapshot.data)}function NO(i,e){let t=al(i.params,e.params)&&dJ(i.url,e.url),n=!i.parent!=!e.parent;return t&&!n&&(!i.parent||NO(i.parent,e.parent))}function h7(i){return typeof i.title=="string"||i.title===null}var f7=new Ze(""),va=(()=>{class i{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=qt;activateEvents=new Ci;deactivateEvents=new Ci;attachEvents=new Ci;detachEvents=new Ci;routerOutletData=hF(void 0);parentContexts=$e(Vu);location=$e(ld);changeDetector=$e(as);inputBinder=$e(vm,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:n,previousValue:r}=t.name;if(n)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new je(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new je(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new je(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,n){this.activated=t,this._activatedRoute=n,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,n){if(this.isActivated)throw new je(4013,!1);this._activatedRoute=t;let r=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new LO(t,a,r.injector,this.routerOutletData);this.activated=r.createComponent(s,{index:r.length,injector:l,environmentInjector:n}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(n){return new(n||i)};static \u0275dir=Sn({type:i,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[As]})}return i})(),LO=class{route;childContexts;parent;outletData;constructor(e,t,n,r){this.route=e,this.childContexts=t,this.parent=n,this.outletData=r}get(e,t){return e===Mi?this.route:e===Vu?this.childContexts:e===f7?this.outletData:this.parent.get(e,t)}},vm=new Ze(""),GO=(()=>{class i{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:n}=t,r=mp([n.queryParams,n.params,n.data]).pipe(Mo(([o,s,a],l)=>(a=Ie(Ie(Ie({},o),s),a),l===0?At(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==n||n.component===null){this.unsubscribeFromRouteData(t);return}let s=GI(n.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,r)}static \u0275fac=function(n){return new(n||i)};static \u0275prov=tt({token:i,factory:i.\u0275fac})}return i})(),$O=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275cmp=Ke({type:i,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(n,r){n&1&&k(0,"router-outlet")},dependencies:[va],encapsulation:2})}return i})();function WO(i){let e=i.children&&i.children.map(WO),t=e?ot(Ie({},i),{children:e}):Ie({},i);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==qt&&(t.component=$O),t}function IJ(i,e,t){let n=gm(i,e._root,t?t._root:void 0);return new hm(n,e)}function gm(i,e,t){if(t&&i.shouldReuseRoute(e.value,t.value.snapshot)){let n=t.value;n._futureSnapshot=e.value;let r=TJ(i,e,t);return new us(n,r)}else{if(i.shouldAttach(e.value)){let o=i.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>gm(i,a)),s}}let n=BJ(e.value),r=e.children.map(o=>gm(i,o));return new us(n,r)}}function TJ(i,e,t){return e.children.map(n=>{for(let r of t.children)if(i.shouldReuseRoute(n.value,r.value.snapshot))return gm(i,n,r);return gm(i,n)})}function BJ(i){return new Mi(new fr(i.url),new fr(i.params),new fr(i.queryParams),new fr(i.fragment),new fr(i.data),i.outlet,i.component,i)}var _f=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},g7="ngNavigationCancelingError";function Nb(i,e){let{redirectTo:t,navigationBehaviorOptions:n}=fd(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=p7(!1,Io.Redirect);return r.url=t,r.navigationBehaviorOptions=n,r}function p7(i,e){let t=new Error(`NavigationCancelingError: ${i||""}`);return t[g7]=!0,t.cancellationCode=e,t}function NJ(i){return m7(i)&&fd(i.url)}function m7(i){return!!i&&i[g7]}var LJ=(i,e,t,n)=>Jt(r=>(new RO(e,r.targetRouterState,r.currentRouterState,t,n).activate(i),r)),RO=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,n,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=n,this.forwardEvent=r,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),OO(this.futureState.root),this.activateChildRoutes(t,n,e)}deactivateChildRoutes(e,t,n){let r=uf(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],n),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,n)})}deactivateRoutes(e,t,n){let r=e.value,o=t?t.value:null;if(r===o)if(r.component){let s=n.getContext(r.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,n);else o&&this.deactivateRouteAndItsChildren(t,n)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let n=t.getContext(e.value.outlet),r=n&&e.value.component?n.children:t,o=uf(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);if(n&&n.outlet){let s=n.outlet.detach(),a=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let n=t.getContext(e.value.outlet),r=n&&e.value.component?n.children:t,o=uf(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);n&&(n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated()),n.attachRef=null,n.route=null)}activateChildRoutes(e,t,n){let r=uf(t);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],n),this.forwardEvent(new Fb(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Ab(e.value.snapshot))}activateRoutes(e,t,n){let r=e.value,o=t?t.value:null;if(OO(r),r===o)if(r.component){let s=n.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,n);else if(r.component){let s=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),OO(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=r,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,n)}},Lb=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ff=class{component;route;constructor(e,t){this.component=e,this.route=t}};function RJ(i,e,t){let n=i._root,r=e?e._root:null;return sm(n,r,t,[n.value])}function zJ(i){let e=i.routeConfig?i.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:i,guards:e}}function bf(i,e){let t=Symbol(),n=e.get(i,t);return n===t?typeof i=="function"&&!c9(i)?i:e.get(i):n}function sm(i,e,t,n,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=uf(e);return i.children.forEach(s=>{jJ(s,o[s.value.outlet],t,n.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>lm(a,t.getContext(s),r)),r}function jJ(i,e,t,n,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=i.value,s=e?e.value:null,a=t?t.getContext(i.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=VJ(s,o,o.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new Lb(n)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?sm(i,e,a?a.children:null,n,r):sm(i,e,t,n,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new ff(a.outlet.component,s))}else s&&lm(e,a,r),r.canActivateChecks.push(new Lb(n)),o.component?sm(i,null,a?a.children:null,n,r):sm(i,null,t,n,r);return r}function VJ(i,e,t){if(typeof t=="function")return t(i,e);switch(t){case"pathParamsChange":return!Lu(i.url,e.url);case"pathParamsOrQueryParamsChange":return!Lu(i.url,e.url)||!al(i.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!NO(i,e)||!al(i.queryParams,e.queryParams);case"paramsChange":default:return!NO(i,e)}}function lm(i,e,t){let n=uf(i),r=i.value;Object.entries(n).forEach(([o,s])=>{r.component?e?lm(s,e.children.getContext(o),t):lm(s,null,t):lm(s,e,t)}),r.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new ff(e.outlet.component,r)):t.canDeactivateChecks.push(new ff(null,r)):t.canDeactivateChecks.push(new ff(null,r))}function bm(i){return typeof i=="function"}function UJ(i){return typeof i=="boolean"}function HJ(i){return i&&bm(i.canLoad)}function GJ(i){return i&&bm(i.canActivate)}function $J(i){return i&&bm(i.canActivateChild)}function WJ(i){return i&&bm(i.canDeactivate)}function qJ(i){return i&&bm(i.canMatch)}function x7(i){return i instanceof Kl||i?.name==="EmptyError"}var mb=Symbol("INITIAL_VALUE");function vf(){return Mo(i=>mp(i.map(e=>e.pipe(Xl(1),zM(mb)))).pipe(Jt(e=>{for(let t of e)if(t!==!0){if(t===mb)return mb;if(t===!1||KJ(t))return t}return!0}),gr(e=>e!==mb),Xl(1)))}function KJ(i){return fd(i)||i instanceof _f}function YJ(i,e){return Vi(t=>{let{targetSnapshot:n,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?At(ot(Ie({},t),{guardsResult:!0})):XJ(s,n,r,i).pipe(Vi(a=>a&&UJ(a)?QJ(n,o,i,e):At(a)),Jt(a=>ot(Ie({},t),{guardsResult:a})))})}function XJ(i,e,t,n){return oi(i).pipe(Vi(r=>nZ(r.component,r.route,t,e,n)),Ql(r=>r!==!0,!0))}function QJ(i,e,t,n){return oi(e).pipe(Ka(r=>Fh(ZJ(r.route.parent,n),JJ(r.route,n),tZ(i,r.path,t),eZ(i,r.route,t))),Ql(r=>r!==!0,!0))}function JJ(i,e){return i!==null&&e&&e(new Db(i)),At(!0)}function ZJ(i,e){return i!==null&&e&&e(new kb(i)),At(!0)}function eZ(i,e,t){let n=e.routeConfig?e.routeConfig.canActivate:null;if(!n||n.length===0)return At(!0);let r=n.map(o=>I_(()=>{let s=_m(e)??t,a=bf(o,s),l=GJ(a)?a.canActivate(e,i):ko(s,()=>a(e,i));return pd(l).pipe(Ql())}));return At(r).pipe(vf())}function tZ(i,e,t){let n=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>zJ(s)).filter(s=>s!==null).map(s=>I_(()=>{let a=s.guards.map(l=>{let c=_m(s.node)??t,d=bf(l,c),h=$J(d)?d.canActivateChild(n,i):ko(c,()=>d(n,i));return pd(h).pipe(Ql())});return At(a).pipe(vf())}));return At(o).pipe(vf())}function nZ(i,e,t,n,r){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return At(!0);let s=o.map(a=>{let l=_m(e)??r,c=bf(a,l),d=WJ(c)?c.canDeactivate(i,e,t,n):ko(l,()=>c(i,e,t,n));return pd(d).pipe(Ql())});return At(s).pipe(vf())}function iZ(i,e,t,n){let r=e.canLoad;if(r===void 0||r.length===0)return At(!0);let o=r.map(s=>{let a=bf(s,i),l=HJ(a)?a.canLoad(e,t):ko(i,()=>a(e,t));return pd(l)});return At(o).pipe(vf(),_7(n))}function _7(i){return DM(Dr(e=>{if(typeof e!="boolean")throw Nb(i,e)}),Jt(e=>e===!0))}function rZ(i,e,t,n){let r=e.canMatch;if(!r||r.length===0)return At(!0);let o=r.map(s=>{let a=bf(s,i),l=qJ(a)?a.canMatch(e,t):ko(i,()=>a(e,t));return pd(l)});return At(o).pipe(vf(),_7(n))}var pm=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},mm=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function df(i){return Ah(new pm(i))}function oZ(i){return Ah(new je(4e3,!1))}function sZ(i){return Ah(p7(!1,Io.GuardRejected))}var zO=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let n=[],r=t.root;for(;;){if(n=n.concat(r.segments),r.numberOfChildren===0)return At(n);if(r.numberOfChildren>1||!r.children[qt])return oZ(`${e.redirectTo}`);r=r.children[qt]}}applyRedirectCommands(e,t,n,r,o){if(typeof t!="string"){let a=t,{queryParams:l,fragment:c,routeConfig:d,url:h,outlet:p,params:g,data:_,title:b}=r,C=ko(o,()=>a({params:g,data:_,queryParams:l,fragment:c,routeConfig:d,url:h,outlet:p,title:b}));if(C instanceof cl)throw new mm(C);t=C}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,n);if(t[0]==="/")throw new mm(s);return s}applyRedirectCreateUrlTree(e,t,n,r){let o=this.createSegmentGroup(e,t.root,n,r);return new cl(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let n={};return Object.entries(e).forEach(([r,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);n[r]=t[a]}else n[r]=o}),n}createSegmentGroup(e,t,n,r){let o=this.createSegments(e,t.segments,n,r),s={};return Object.entries(t.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(e,l,n,r)}),new Dn(o,s)}createSegments(e,t,n,r){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,r):this.findOrReturn(o,n))}findPosParam(e,t,n){let r=n[t.path.substring(1)];if(!r)throw new je(4001,!1);return r}findOrReturn(e,t){let n=0;for(let r of t){if(r.path===e.path)return t.splice(n),r;n++}return e}},jO={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function aZ(i,e,t,n,r){let o=v7(i,e,t);return o.matched?(n=AJ(e,n),rZ(n,e,t,r).pipe(Jt(s=>s===!0?o:Ie({},jO)))):At(o)}function v7(i,e,t){if(e.path==="**")return lZ(t);if(e.path==="")return e.pathMatch==="full"&&(i.hasChildren()||t.length>0)?Ie({},jO):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(e.matcher||KT)(t,i,e);if(!r)return Ie({},jO);let o={};Object.entries(r.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=r.consumed.length>0?Ie(Ie({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function lZ(i){return{matched:!0,parameters:i.length>0?XT(i).parameters:{},consumedSegments:i,remainingSegments:[],positionalParamSegments:{}}}function $T(i,e,t,n){return t.length>0&&uZ(i,t,n)?{segmentGroup:new Dn(e,dZ(n,new Dn(t,i.children))),slicedSegments:[]}:t.length===0&&hZ(i,t,n)?{segmentGroup:new Dn(i.segments,cZ(i,t,n,i.children)),slicedSegments:t}:{segmentGroup:new Dn(i.segments,i.children),slicedSegments:t}}function cZ(i,e,t,n){let r={};for(let o of t)if(zb(i,e,o)&&!n[_a(o)]){let s=new Dn([],{});r[_a(o)]=s}return Ie(Ie({},n),r)}function dZ(i,e){let t={};t[qt]=e;for(let n of i)if(n.path===""&&_a(n)!==qt){let r=new Dn([],{});t[_a(n)]=r}return t}function uZ(i,e,t){return t.some(n=>zb(i,e,n)&&_a(n)!==qt)}function hZ(i,e,t){return t.some(n=>zb(i,e,n))}function zb(i,e,t){return(i.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function fZ(i,e,t){return e.length===0&&!i.children[t]}var VO=class{};function gZ(i,e,t,n,r,o,s="emptyOnly"){return new UO(i,e,t,n,r,s,o).recognize()}var pZ=31,UO=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,n,r,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=n,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new zO(this.urlSerializer,this.urlTree)}noMatchError(e){return new je(4002,`'${e.segmentGroup}'`)}recognize(){let e=$T(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Jt(({children:t,rootSnapshot:n})=>{let r=new us(n,t),o=new fm("",r),s=o7(n,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Ru([],Object.freeze({}),Object.freeze(Ie({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),qt,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,qt,t).pipe(Jt(n=>({children:n,rootSnapshot:t})),Yl(n=>{if(n instanceof mm)return this.urlTree=n.urlTree,this.match(n.urlTree.root);throw n instanceof pm?this.noMatchError(n):n}))}processSegmentGroup(e,t,n,r,o){return n.segments.length===0&&n.hasChildren()?this.processChildren(e,t,n,o):this.processSegment(e,t,n,n.segments,r,!0,o).pipe(Jt(s=>s instanceof us?[s]:[]))}processChildren(e,t,n,r){let o=[];for(let s of Object.keys(n.children))s==="primary"?o.unshift(s):o.push(s);return oi(o).pipe(Ka(s=>{let a=n.children[s],l=DJ(t,s);return this.processSegmentGroup(e,l,a,s,r)}),RM((s,a)=>(s.push(...a),s)),ed(null),LM(),Vi(s=>{if(s===null)return df(n);let a=b7(s);return mZ(a),At(a)}))}processSegment(e,t,n,r,o,s,a){return oi(t).pipe(Ka(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,n,r,o,s,a).pipe(Yl(c=>{if(c instanceof pm)return At(null);throw c}))),Ql(l=>!!l),Yl(l=>{if(x7(l))return fZ(n,r,o)?At(new VO):df(n);throw l}))}processSegmentAgainstRoute(e,t,n,r,o,s,a,l){return _a(n)!==s&&(s===qt||!zb(r,o,n))?df(r):n.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,n,o,s,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,n,o,s,l):df(r)}expandSegmentAgainstRouteUsingRedirect(e,t,n,r,o,s,a){let{matched:l,parameters:c,consumedSegments:d,positionalParamSegments:h,remainingSegments:p}=v7(t,r,o);if(!l)return df(t);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>pZ&&(this.allowRedirects=!1));let g=new Ru(o,c,Object.freeze(Ie({},this.urlTree.queryParams)),this.urlTree.fragment,WT(r),_a(r),r.component??r._loadedComponent??null,r,qT(r)),_=Bb(g,a,this.paramsInheritanceStrategy);g.params=Object.freeze(_.params),g.data=Object.freeze(_.data);let b=this.applyRedirects.applyRedirectCommands(d,r.redirectTo,h,g,e);return this.applyRedirects.lineralizeSegments(r,b).pipe(Vi(C=>this.processSegment(e,n,t,C.concat(p),s,!1,a)))}matchSegmentAgainstRoute(e,t,n,r,o,s){let a=aZ(t,n,r,e,this.urlSerializer);return n.path==="**"&&(t.children={}),a.pipe(Mo(l=>l.matched?(e=n._injector??e,this.getChildConfig(e,n,r).pipe(Mo(({routes:c})=>{let d=n._loadedInjector??e,{parameters:h,consumedSegments:p,remainingSegments:g}=l,_=new Ru(p,h,Object.freeze(Ie({},this.urlTree.queryParams)),this.urlTree.fragment,WT(n),_a(n),n.component??n._loadedComponent??null,n,qT(n)),b=Bb(_,s,this.paramsInheritanceStrategy);_.params=Object.freeze(b.params),_.data=Object.freeze(b.data);let{segmentGroup:C,slicedSegments:y}=$T(t,p,g,c);if(y.length===0&&C.hasChildren())return this.processChildren(d,c,C,_).pipe(Jt(O=>new us(_,O)));if(c.length===0&&y.length===0)return At(new us(_,[]));let M=_a(n)===o;return this.processSegment(d,c,C,y,M?qt:o,!0,_).pipe(Jt(O=>new us(_,O instanceof us?[O]:[])))}))):df(t)))}getChildConfig(e,t,n){return t.children?At({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?At({routes:t._loadedRoutes,injector:t._loadedInjector}):iZ(e,t,n,this.urlSerializer).pipe(Vi(r=>r?this.configLoader.loadChildren(e,t).pipe(Dr(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):sZ(t))):At({routes:[],injector:e})}};function mZ(i){i.sort((e,t)=>e.value.outlet===qt?-1:t.value.outlet===qt?1:e.value.outlet.localeCompare(t.value.outlet))}function xZ(i){let e=i.value.routeConfig;return e&&e.path===""}function b7(i){let e=[],t=new Set;for(let n of i){if(!xZ(n)){e.push(n);continue}let r=e.find(o=>n.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...n.children),t.add(r)):e.push(n)}for(let n of t){let r=b7(n.children);e.push(new us(n.value,r))}return e.filter(n=>!t.has(n))}function WT(i){return i.data||{}}function qT(i){return i.resolve||{}}function _Z(i,e,t,n,r,o){return Vi(s=>gZ(i,e,t,n,s.extractedUrl,r,o).pipe(Jt(({state:a,tree:l})=>ot(Ie({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function vZ(i,e){return Vi(t=>{let{targetSnapshot:n,guards:{canActivateChecks:r}}=t;if(!r.length)return At(t);let o=new Set(r.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let c of C7(l))s.add(c);let a=0;return oi(s).pipe(Ka(l=>o.has(l)?bZ(l,n,i,e):(l.data=Bb(l,l.parent,i).resolve,At(void 0))),Dr(()=>a++),Ih(1),Vi(l=>a===s.size?At(t):yo))})}function C7(i){let e=i.children.map(t=>C7(t)).flat();return[i,...e]}function bZ(i,e,t,n){let r=i.routeConfig,o=i._resolve;return r?.title!==void 0&&!h7(r)&&(o[xm]=r.title),CZ(o,i,e,n).pipe(Jt(s=>(i._resolvedData=s,i.data=Bb(i,i.parent,t).resolve,null)))}function CZ(i,e,t,n){let r=AO(i);if(r.length===0)return At({});let o={};return oi(r).pipe(Vi(s=>yZ(i[s],e,t,n).pipe(Ql(),Dr(a=>{if(a instanceof _f)throw Nb(new hd,a);o[s]=a}))),Ih(1),Jt(()=>o),Yl(s=>x7(s)?yo:Ah(s)))}function yZ(i,e,t,n){let r=_m(e)??n,o=bf(i,r),s=o.resolve?o.resolve(e,t):ko(r,()=>o(e,t));return pd(s)}function SO(i){return Mo(e=>{let t=i(e);return t?oi(t).pipe(Jt(()=>e)):At(e)})}var qO=(()=>{class i{buildTitle(t){let n,r=t.root;for(;r!==void 0;)n=this.getResolvedTitleForRoute(r)??n,r=r.children.find(o=>o.outlet===qt);return n}getResolvedTitleForRoute(t){return t.data[xm]}static \u0275fac=function(n){return new(n||i)};static \u0275prov=tt({token:i,factory:()=>$e(y7),providedIn:"root"})}return i})(),y7=(()=>{class i extends qO{title;constructor(t){super(),this.title=t}updateTitle(t){let n=this.buildTitle(t);n!==void 0&&this.title.setTitle(n)}static \u0275fac=function(n){return new(n||i)(ht(zT))};static \u0275prov=tt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Uu=new Ze("",{providedIn:"root",factory:()=>({})}),Cf=new Ze(""),jb=(()=>{class i{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=$e(LI);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return At(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let n=pd(t.loadComponent()).pipe(Jt(M7),Dr(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),td(()=>{this.componentLoaders.delete(t)})),r=new kh(n,()=>new Pn).pipe(Sh());return this.componentLoaders.set(t,r),r}loadChildren(t,n){if(this.childrenLoaders.get(n))return this.childrenLoaders.get(n);if(n._loadedRoutes)return At({routes:n._loadedRoutes,injector:n._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(n);let o=w7(n,this.compiler,t,this.onLoadEndListener).pipe(td(()=>{this.childrenLoaders.delete(n)})),s=new kh(o,()=>new Pn).pipe(Sh());return this.childrenLoaders.set(n,s),s}static \u0275fac=function(n){return new(n||i)};static \u0275prov=tt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function w7(i,e,t,n){return pd(i.loadChildren()).pipe(Jt(M7),Vi(r=>r instanceof qP||Array.isArray(r)?At(r):oi(e.compileModuleAsync(r))),Jt(r=>{n&&n(i);let o,s,a=!1;return Array.isArray(r)?(s=r,a=!0):(o=r.create(t).injector,s=o.get(Cf,[],{optional:!0,self:!0}).flat()),{routes:s.map(WO),injector:o}}))}function wZ(i){return i&&typeof i=="object"&&"default"in i}function M7(i){return wZ(i)?i.default:i}var Vb=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275prov=tt({token:i,factory:()=>$e(MZ),providedIn:"root"})}return i})(),MZ=(()=>{class i{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,n){return t}static \u0275fac=function(n){return new(n||i)};static \u0275prov=tt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),KO=new Ze(""),YO=new Ze("");function E7(i,e,t){let n=i.get(YO),r=i.get(ai);return i.get(On).runOutsideAngular(()=>{if(!r.startViewTransition||n.skipNextTransition)return n.skipNextTransition=!1,new Promise(c=>setTimeout(c));let o,s=new Promise(c=>{o=c}),a=r.startViewTransition(()=>(o(),EZ(i))),{onViewTransitionCreated:l}=n;return l&&ko(i,()=>l({transition:a,from:e,to:t})),s})}function EZ(i){return new Promise(e=>{SP({read:()=>setTimeout(e)},{injector:i})})}var XO=new Ze(""),Ub=(()=>{class i{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Pn;transitionAbortSubject=new Pn;configLoader=$e(jb);environmentInjector=$e(zr);destroyRef=$e(Ip);urlSerializer=$e(ju);rootContexts=$e(Vu);location=$e(dd);inputBindingEnabled=$e(vm,{optional:!0})!==null;titleStrategy=$e(qO);options=$e(Uu,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=$e(Vb);createViewTransition=$e(KO,{optional:!0});navigationErrorHandler=$e(XO,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>At(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=r=>this.events.next(new Ob(r)),n=r=>this.events.next(new Sb(r));this.configLoader.onLoadEndListener=n,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let n=++this.navigationId;this.transitions?.next(ot(Ie({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:n}))}setupNavigations(t){return this.transitions=new fr(null),this.transitions.pipe(gr(n=>n!==null),Mo(n=>{let r=!1,o=!1;return At(n).pipe(Mo(s=>{if(this.navigationId>n.id)return this.cancelNavigationTransition(n,"",Io.SupersededByNewNavigation),yo;this.currentTransition=n,this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?ot(Ie({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let a=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=s.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!a&&l!=="reload"){let c="";return this.events.next(new dl(s.id,this.urlSerializer.serialize(s.rawUrl),c,gf.IgnoredSameUrlNavigation)),s.resolve(!1),yo}if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return At(s).pipe(Mo(c=>(this.events.next(new gd(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?yo:Promise.resolve(c))),_Z(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Dr(c=>{n.targetSnapshot=c.targetSnapshot,n.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation=ot(Ie({},this.currentNavigation),{finalUrl:c.urlAfterRedirects});let d=new dm(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:c,extractedUrl:d,source:h,restoredState:p,extras:g}=s,_=new gd(c,this.urlSerializer.serialize(d),h,p);this.events.next(_);let b=d7(this.rootComponentType).snapshot;return this.currentTransition=n=ot(Ie({},s),{targetSnapshot:b,urlAfterRedirects:d,extras:ot(Ie({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=d,At(n)}else{let c="";return this.events.next(new dl(s.id,this.urlSerializer.serialize(s.extractedUrl),c,gf.IgnoredByUrlHandlingStrategy)),s.resolve(!1),yo}}),Dr(s=>{let a=new wb(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Jt(s=>(this.currentTransition=n=ot(Ie({},s),{guards:RJ(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),n)),YJ(this.environmentInjector,s=>this.events.next(s)),Dr(s=>{if(n.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw Nb(this.urlSerializer,s.guardsResult);let a=new Mb(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),gr(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",Io.GuardRejected),!1)),SO(s=>{if(s.guards.canActivateChecks.length!==0)return At(s).pipe(Dr(a=>{let l=new Eb(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),Mo(a=>{let l=!1;return At(a).pipe(vZ(this.paramsInheritanceStrategy,this.environmentInjector),Dr({next:()=>l=!0,complete:()=>{l||this.cancelNavigationTransition(a,"",Io.NoDataFromResolver)}}))}),Dr(a=>{let l=new Pb(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}))}),SO(s=>{let a=l=>{let c=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(l.routeConfig).pipe(Dr(d=>{l.component=d}),Jt(()=>{})));for(let d of l.children)c.push(...a(d));return c};return mp(a(s.targetSnapshot.root)).pipe(ed(null),Xl(1))}),SO(()=>this.afterPreactivation()),Mo(()=>{let{currentSnapshot:s,targetSnapshot:a}=n,l=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return l?oi(l).pipe(Jt(()=>n)):At(n)}),Jt(s=>{let a=IJ(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=n=ot(Ie({},s),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,n}),Dr(()=>{this.events.next(new um)}),LJ(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),Xl(1),Dr({next:s=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new To(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{r=!0}}),B_(this.transitionAbortSubject.pipe(Dr(s=>{throw s}))),td(()=>{!r&&!o&&this.cancelNavigationTransition(n,"",Io.SupersededByNewNavigation),this.currentTransition?.id===n.id&&(this.currentNavigation=null,this.currentTransition=null)}),Yl(s=>{if(this.destroyed)return n.resolve(!1),yo;if(o=!0,m7(s))this.events.next(new ll(n.id,this.urlSerializer.serialize(n.extractedUrl),s.message,s.cancellationCode)),NJ(s)?this.events.next(new xf(s.url,s.navigationBehaviorOptions)):n.resolve(!1);else{let a=new pf(n.id,this.urlSerializer.serialize(n.extractedUrl),s,n.targetSnapshot??void 0);try{let l=ko(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(l instanceof _f){let{message:c,cancellationCode:d}=Nb(this.urlSerializer,l);this.events.next(new ll(n.id,this.urlSerializer.serialize(n.extractedUrl),c,d)),this.events.next(new xf(l.redirectTo,l.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(l){this.options.resolveNavigationPromiseOnError?n.resolve(!1):n.reject(l)}}return yo}))}))}cancelNavigationTransition(t,n,r){let o=new ll(t.id,this.urlSerializer.serialize(t.extractedUrl),n,r);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),n=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==n?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(n){return new(n||i)};static \u0275prov=tt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function PZ(i){return i!==bb}var P7=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275prov=tt({token:i,factory:()=>$e(OZ),providedIn:"root"})}return i})(),Rb=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},OZ=(()=>{class i extends Rb{static \u0275fac=(()=>{let t;return function(r){return(t||(t=rs(i)))(r||i)}})();static \u0275prov=tt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),O7=(()=>{class i{urlSerializer=$e(ju);options=$e(Uu,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=$e(dd);urlHandlingStrategy=$e(Vb);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new cl;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:n,targetBrowserUrl:r}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,n):n,s=r??o;return s instanceof cl?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:n,initialUrl:r}){n&&t?(this.currentUrlTree=n,this.rawUrlTree=this.urlHandlingStrategy.merge(n,r),this.routerState=t):this.rawUrlTree=r}routerState=d7(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(n){return new(n||i)};static \u0275prov=tt({token:i,factory:()=>$e(SZ),providedIn:"root"})}return i})(),SZ=(()=>{class i extends O7{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(n=>{n.type==="popstate"&&setTimeout(()=>{t(n.url,n.state,"popstate")})})}handleRouterEvent(t,n){t instanceof gd?this.updateStateMemento():t instanceof dl?this.commitTransition(n):t instanceof dm?this.urlUpdateStrategy==="eager"&&(n.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(n),n)):t instanceof um?(this.commitTransition(n),this.urlUpdateStrategy==="deferred"&&!n.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(n),n)):t instanceof ll&&(t.code===Io.GuardRejected||t.code===Io.NoDataFromResolver)?this.restoreHistory(n):t instanceof pf?this.restoreHistory(n,!0):t instanceof To&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:n,id:r}){let{replaceUrl:o,state:s}=n;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,l=Ie(Ie({},s),this.generateNgRouterState(r,a));this.location.replaceState(t,"",l)}else{let a=Ie(Ie({},s),this.generateNgRouterState(r,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,n=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,o=this.currentPageId-r;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(n&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,n){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:n}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(r){return(t||(t=rs(i)))(r||i)}})();static \u0275prov=tt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function Hb(i,e){i.events.pipe(gr(t=>t instanceof To||t instanceof ll||t instanceof pf||t instanceof dl),Jt(t=>t instanceof To||t instanceof dl?0:(t instanceof ll?t.code===Io.Redirect||t.code===Io.SupersededByNewNavigation:!1)?2:1),gr(t=>t!==2),Xl(1)).subscribe(()=>{e()})}var kZ={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},AZ={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},an=(()=>{class i{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=$e(KP);stateManager=$e(O7);options=$e(Uu,{optional:!0})||{};pendingTasks=$e(ic);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=$e(Ub);urlSerializer=$e(ju);location=$e(dd);urlHandlingStrategy=$e(Vb);_events=new Pn;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=$e(P7);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=$e(Cf,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!$e(vm,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new er;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(n=>{try{let r=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(r!==null&&o!==null){if(this.stateManager.handleRouterEvent(n,o),n instanceof ll&&n.code!==Io.Redirect&&n.code!==Io.SupersededByNewNavigation)this.navigated=!0;else if(n instanceof To)this.navigated=!0;else if(n instanceof xf){let s=n.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(n.url,r.currentRawUrl),l=Ie({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||PZ(r.source)},s);this.scheduleNavigation(a,bb,null,l,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}FZ(n)&&this._events.next(n)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),bb,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,n,r)=>{this.navigateToSyncWithBrowser(t,r,n)})}navigateToSyncWithBrowser(t,n,r){let o={replaceUrl:!0},s=r?.navigationId?r:null;if(r){let l=Ie({},r);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let a=this.parseUrl(t);this.scheduleNavigation(a,n,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(WO),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,n={}){let{relativeTo:r,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=n,c=l?this.currentUrlTree.fragment:s,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=Ie(Ie({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let p=r?r.snapshot:this.routerState.snapshot.root;h=s7(p)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),h=this.currentUrlTree.root}return a7(h,t,d,c??null)}navigateByUrl(t,n={skipLocationChange:!1}){let r=fd(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,bb,null,n)}navigate(t,n={skipLocationChange:!1}){return DZ(t),this.navigateByUrl(this.createUrlTree(t,n),n)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,n){let r;if(n===!0?r=Ie({},kZ):n===!1?r=Ie({},AZ):r=n,fd(t))return VT(this.currentUrlTree,t,r);let o=this.parseUrl(t);return VT(this.currentUrlTree,o,r)}removeEmptyProps(t){return Object.entries(t).reduce((n,[r,o])=>(o!=null&&(n[r]=o),n),{})}scheduleNavigation(t,n,r,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,c;s?(a=s.resolve,l=s.reject,c=s.promise):c=new Promise((h,p)=>{a=h,l=p});let d=this.pendingTasks.add();return Hb(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:n,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(h=>Promise.reject(h))}static \u0275fac=function(n){return new(n||i)};static \u0275prov=tt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function DZ(i){for(let e=0;e<i.length;e++)if(i[e]==null)throw new je(4008,!1)}function FZ(i){return!(i instanceof um)&&!(i instanceof xf)}var xi=(()=>{class i{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Pn;constructor(t,n,r,o,s,a){this.router=t,this.route=n,this.tabIndexAttribute=r,this.renderer=o,this.el=s,this.locationStrategy=a;let l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=t.events.subscribe(c=>{c instanceof To&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(fd(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,n,r,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||n||r||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let n=this.href===null?null:RF(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",n)}applyAttributeValue(t,n){let r=this.renderer,o=this.el.nativeElement;n!==null?r.setAttribute(o,t,n):r.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:fd(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(n){return new(n||i)(ke(an),ke(Mi),bP("tabindex"),ke(il),ke(Ur),ke(ga))};static \u0275dir=Sn({type:i,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(n,r){n&1&&U("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),n&2&&wi("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",cd],skipLocationChange:[2,"skipLocationChange","skipLocationChange",cd],replaceUrl:[2,"replaceUrl","replaceUrl",cd],routerLink:"routerLink"},features:[As]})}return i})();var Cm=class{};var S7=(()=>{class i{router;injector;preloadingStrategy;loader;subscription;constructor(t,n,r,o){this.router=t,this.injector=n,this.preloadingStrategy=r,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(gr(t=>t instanceof To),Ka(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,n){let r=[];for(let o of n){o.providers&&!o._injector&&(o._injector=Np(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&r.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&r.push(this.processRoutes(a,o.children??o._loadedRoutes))}return oi(r).pipe(Dh())}preloadConfig(t,n){return this.preloadingStrategy.preload(n,()=>{let r;n.loadChildren&&n.canLoad===void 0?r=this.loader.loadChildren(t,n):r=At(null);let o=r.pipe(Vi(s=>s===null?At(void 0):(n._loadedRoutes=s.routes,n._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(n.loadComponent&&!n._loadedComponent){let s=this.loader.loadComponent(n);return oi([o,s]).pipe(Dh())}else return o})}static \u0275fac=function(n){return new(n||i)(ht(an),ht(zr),ht(Cm),ht(jb))};static \u0275prov=tt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),k7=new Ze(""),IZ=(()=>{class i{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(t,n,r,o,s={}){this.urlSerializer=t,this.transitions=n,this.viewportScroller=r,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof gd?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof To?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof dl&&t.code===gf.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof mf&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,n){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new mf(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,n))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(n){dI()};static \u0275prov=tt({token:i,factory:i.\u0275fac})}return i})();function TZ(i){return i.routerState.root}function ym(i,e){return{\u0275kind:i,\u0275providers:e}}function BZ(){let i=$e(pr);return e=>{let t=i.get(is);if(e!==t.components[0])return;let n=i.get(an),r=i.get(A7);i.get(JO)===1&&n.initialNavigation(),i.get(I7,null,Yt.Optional)?.setUpPreloading(),i.get(k7,null,Yt.Optional)?.init(),n.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var A7=new Ze("",{factory:()=>new Pn}),JO=new Ze("",{providedIn:"root",factory:()=>1});function D7(){let i=[{provide:JO,useValue:0},QP(()=>{let e=$e(pr);return e.get(rO,Promise.resolve()).then(()=>new Promise(n=>{let r=e.get(an),o=e.get(A7);Hb(r,()=>{n(!0)}),e.get(Ub).afterPreactivation=()=>(n(!0),o.closed?At(void 0):o),r.initialNavigation()}))})];return ym(2,i)}function F7(){let i=[QP(()=>{$e(an).setUpLocationChangeListener()}),{provide:JO,useValue:2}];return ym(3,i)}var I7=new Ze("");function T7(i){return ym(0,[{provide:I7,useExisting:S7},{provide:Cm,useExisting:i}])}function B7(){return ym(8,[GO,{provide:vm,useExisting:GO}])}function N7(i){rf("NgRouterViewTransitions");let e=[{provide:KO,useValue:E7},{provide:YO,useValue:Ie({skipNextTransition:!!i?.skipInitialTransition},i)}];return ym(9,e)}var L7=[dd,{provide:ju,useClass:hd},an,Vu,{provide:Mi,useFactory:TZ,deps:[an]},jb,[]],md=(()=>{class i{constructor(){}static forRoot(t,n){return{ngModule:i,providers:[L7,[],{provide:Cf,multi:!0,useValue:t},[],n?.errorHandler?{provide:XO,useValue:n.errorHandler}:[],{provide:Uu,useValue:n||{}},n?.useHash?LZ():RZ(),NZ(),n?.preloadingStrategy?T7(n.preloadingStrategy).\u0275providers:[],n?.initialNavigation?zZ(n):[],n?.bindToComponentInputs?B7().\u0275providers:[],n?.enableViewTransitions?N7().\u0275providers:[],jZ()]}}static forChild(t){return{ngModule:i,providers:[{provide:Cf,multi:!0,useValue:t}]}}static \u0275fac=function(n){return new(n||i)};static \u0275mod=bn({type:i});static \u0275inj=vn({})}return i})();function NZ(){return{provide:k7,useFactory:()=>{let i=$e(gT),e=$e(On),t=$e(Uu),n=$e(Ub),r=$e(ju);return t.scrollOffset&&i.setOffset(t.scrollOffset),new IZ(r,n,i,e,t)}}}function LZ(){return{provide:ga,useClass:cO}}function RZ(){return{provide:ga,useClass:Yv}}function zZ(i){return[i.initialNavigation==="disabled"?F7().\u0275providers:[],i.initialNavigation==="enabledBlocking"?D7().\u0275providers:[]]}var QO=new Ze("");function jZ(){return[{provide:QO,useFactory:BZ},{provide:JP,multi:!0,useExisting:QO}]}var q7=(()=>{class i{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,n){this._renderer=t,this._elementRef=n}setProperty(t,n){this._renderer.setProperty(this._elementRef.nativeElement,t,n)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(n){return new(n||i)(ke(il),ke(Ur))};static \u0275dir=Sn({type:i})}return i})(),km=(()=>{class i extends q7{static \u0275fac=(()=>{let t;return function(r){return(t||(t=rs(i)))(r||i)}})();static \u0275dir=Sn({type:i,features:[Er]})}return i})(),Gu=new Ze(""),VZ={provide:Gu,useExisting:Vr(()=>$u),multi:!0},$u=(()=>{class i extends km{writeValue(t){this.setProperty("checked",t)}static \u0275fac=(()=>{let t;return function(r){return(t||(t=rs(i)))(r||i)}})();static \u0275dir=Sn({type:i,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(n,r){n&1&&U("change",function(s){return r.onChange(s.target.checked)})("blur",function(){return r.onTouched()})},standalone:!1,features:[Ao([VZ]),Er]})}return i})(),UZ={provide:Gu,useExisting:Vr(()=>rn),multi:!0};function HZ(){let i=ls()?ls().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}var GZ=new Ze(""),rn=(()=>{class i extends q7{_compositionMode;_composing=!1;constructor(t,n,r){super(t,n),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!HZ())}writeValue(t){let n=t??"";this.setProperty("value",n)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(n){return new(n||i)(ke(il),ke(Ur),ke(GZ,8))};static \u0275dir=Sn({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,r){n&1&&U("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},standalone:!1,features:[Ao([UZ]),Er]})}return i})();function nS(i){return i==null||iS(i)===0}function iS(i){return i==null?null:Array.isArray(i)||typeof i=="string"?i.length:i instanceof Set?i.size:null}var _d=new Ze(""),tC=new Ze(""),$Z=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,fi=class{static min(e){return K7(e)}static max(e){return Y7(e)}static required(e){return X7(e)}static requiredTrue(e){return WZ(e)}static email(e){return qZ(e)}static minLength(e){return KZ(e)}static maxLength(e){return Q7(e)}static pattern(e){return YZ(e)}static nullValidator(e){return $b()}static compose(e){return iB(e)}static composeAsync(e){return rB(e)}};function K7(i){return e=>{if(e.value==null||i==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<i?{min:{min:i,actual:e.value}}:null}}function Y7(i){return e=>{if(e.value==null||i==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>i?{max:{max:i,actual:e.value}}:null}}function X7(i){return nS(i.value)?{required:!0}:null}function WZ(i){return i.value===!0?null:{required:!0}}function qZ(i){return nS(i.value)||$Z.test(i.value)?null:{email:!0}}function KZ(i){return e=>{let t=e.value?.length??iS(e.value);return t===null||t===0?null:t<i?{minlength:{requiredLength:i,actualLength:t}}:null}}function Q7(i){return e=>{let t=e.value?.length??iS(e.value);return t!==null&&t>i?{maxlength:{requiredLength:i,actualLength:t}}:null}}function YZ(i){if(!i)return $b;let e,t;return typeof i=="string"?(t="",i.charAt(0)!=="^"&&(t+="^"),t+=i,i.charAt(i.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=i.toString(),e=i),n=>{if(nS(n.value))return null;let r=n.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}function $b(i){return null}function J7(i){return i!=null}function Z7(i){return Tu(i)?oi(i):i}function eB(i){let e={};return i.forEach(t=>{e=t!=null?Ie(Ie({},e),t):e}),Object.keys(e).length===0?null:e}function tB(i,e){return e.map(t=>t(i))}function XZ(i){return!i.validate}function nB(i){return i.map(e=>XZ(e)?e:t=>e.validate(t))}function iB(i){if(!i)return null;let e=i.filter(J7);return e.length==0?null:function(t){return eB(tB(t,e))}}function rS(i){return i!=null?iB(nB(i)):null}function rB(i){if(!i)return null;let e=i.filter(J7);return e.length==0?null:function(t){let n=tB(t,e).map(Z7);return NM(n).pipe(Jt(eB))}}function oS(i){return i!=null?rB(nB(i)):null}function R7(i,e){return i===null?[e]:Array.isArray(i)?[...i,e]:[i,e]}function oB(i){return i._rawValidators}function sB(i){return i._rawAsyncValidators}function ZO(i){return i?Array.isArray(i)?i:[i]:[]}function Wb(i,e){return Array.isArray(i)?i.includes(e):i===e}function z7(i,e){let t=ZO(e);return ZO(i).forEach(r=>{Wb(t,r)||t.push(r)}),t}function j7(i,e){return ZO(e).filter(t=>!Wb(i,t))}var qb=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=rS(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=oS(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},uc=class extends qb{name;get formDirective(){return null}get path(){return null}},Hu=class extends qb{_parent=null;name=null;valueAccessor=null},Kb=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},QZ={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},YPe=ot(Ie({},QZ),{"[class.ng-submitted]":"isSubmitted"}),fn=(()=>{class i extends Kb{constructor(t){super(t)}static \u0275fac=function(n){return new(n||i)(ke(Hu,2))};static \u0275dir=Sn({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,r){n&2&&xe("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[Er]})}return i})(),Gr=(()=>{class i extends Kb{constructor(t){super(t)}static \u0275fac=function(n){return new(n||i)(ke(uc,10))};static \u0275dir=Sn({type:i,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(n,r){n&2&&xe("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},standalone:!1,features:[Er]})}return i})();var wm="VALID",Gb="INVALID",yf="PENDING",Mm="DISABLED",xd=class{},Yb=class extends xd{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Pm=class extends xd{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Om=class extends xd{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},wf=class extends xd{status;source;constructor(e,t){super(),this.status=e,this.source=t}},Xb=class extends xd{source;constructor(e){super(),this.source=e}},Qb=class extends xd{source;constructor(e){super(),this.source=e}};function sS(i){return(nC(i)?i.validators:i)||null}function JZ(i){return Array.isArray(i)?rS(i):i||null}function aS(i,e){return(nC(e)?e.asyncValidators:i)||null}function ZZ(i){return Array.isArray(i)?oS(i):i||null}function nC(i){return i!=null&&!Array.isArray(i)&&typeof i=="object"}function aB(i,e,t){let n=i.controls;if(!(e?Object.keys(n):n).length)throw new je(1e3,"");if(!n[t])throw new je(1001,"")}function lB(i,e,t){i._forEachChild((n,r)=>{if(t[r]===void 0)throw new je(1002,"")})}var Mf=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return sl(this.statusReactive)}set status(e){sl(()=>this.statusReactive.set(e))}_status=sf(()=>this.statusReactive());statusReactive=da(void 0);get valid(){return this.status===wm}get invalid(){return this.status===Gb}get pending(){return this.status==yf}get disabled(){return this.status===Mm}get enabled(){return this.status!==Mm}errors;get pristine(){return sl(this.pristineReactive)}set pristine(e){sl(()=>this.pristineReactive.set(e))}_pristine=sf(()=>this.pristineReactive());pristineReactive=da(!0);get dirty(){return!this.pristine}get touched(){return sl(this.touchedReactive)}set touched(e){sl(()=>this.touchedReactive.set(e))}_touched=sf(()=>this.touchedReactive());touchedReactive=da(!1);get untouched(){return!this.touched}_events=new Pn;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(z7(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(z7(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(j7(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(j7(e,this._rawAsyncValidators))}hasValidator(e){return Wb(this._rawValidators,e)}hasAsyncValidator(e){return Wb(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let n=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ot(Ie({},e),{sourceControl:n})),t&&e.emitEvent!==!1&&this._events.next(new Om(!0,n))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let n=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:n})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n),t&&e.emitEvent!==!1&&this._events.next(new Om(!1,n))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let n=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ot(Ie({},e),{sourceControl:n})),t&&e.emitEvent!==!1&&this._events.next(new Pm(!1,n))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let n=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),t&&e.emitEvent!==!1&&this._events.next(new Pm(!0,n))}markAsPending(e={}){this.status=yf;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new wf(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ot(Ie({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Mm,this.errors=null,this._forEachChild(r=>{r.disable(ot(Ie({},e),{onlySelf:!0}))}),this._updateValue();let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Yb(this.value,n)),this._events.next(new wf(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ot(Ie({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=wm,this._forEachChild(n=>{n.enable(ot(Ie({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ot(Ie({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let n=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===wm||this.status===yf)&&this._runAsyncValidator(n,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Yb(this.value,t)),this._events.next(new wf(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ot(Ie({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Mm:wm}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=yf,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let n=Z7(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((n,r)=>n&&n._find(r),this)}getError(e,t){let n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,n){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||n)&&this._events.next(new wf(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,n)}_initObservables(){this.valueChanges=new Ci,this.statusChanges=new Ci}_calculateStatus(){return this._allControlsDisabled()?Mm:this.errors?Gb:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(yf)?yf:this._anyControlsHaveStatus(Gb)?Gb:wm}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let n=!this._anyControlsDirty(),r=this.pristine!==n;this.pristine=n,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new Pm(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Om(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){nC(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=JZ(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=ZZ(this._rawAsyncValidators)}},Ef=class extends Mf{constructor(e,t,n){super(sS(t),aS(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,n={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){lB(this,!0,e),Object.keys(e).forEach(n=>{aB(this,!0,n),this.controls[n].setValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(n=>{let r=this.controls[n];r&&r.patchValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((n,r)=>{n.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,n)=>(e[n]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,n)=>n._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let n=this.controls[t];n&&e(n,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,n]of Object.entries(this.controls))if(this.contains(t)&&e(n))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,n,r)=>((n.enabled||this.disabled)&&(t[r]=n.value),t))}_reduceChildren(e,t){let n=e;return this._forEachChild((r,o)=>{n=t(n,r,o)}),n}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var eS=class extends Ef{};var Am=new Ze("",{providedIn:"root",factory:()=>iC}),iC="always";function cB(i,e){return[...e.path,i]}function Jb(i,e,t=iC){lS(i,e),e.valueAccessor.writeValue(i.value),(i.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(i.disabled),tee(i,e),iee(i,e),nee(i,e),eee(i,e)}function V7(i,e,t=!0){let n=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(n),e.valueAccessor.registerOnTouched(n)),eC(i,e),i&&(e._invokeOnDestroyCallbacks(),i._registerOnCollectionChange(()=>{}))}function Zb(i,e){i.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function eee(i,e){if(e.valueAccessor.setDisabledState){let t=n=>{e.valueAccessor.setDisabledState(n)};i.registerOnDisabledChange(t),e._registerOnDestroy(()=>{i._unregisterOnDisabledChange(t)})}}function lS(i,e){let t=oB(i);e.validator!==null?i.setValidators(R7(t,e.validator)):typeof t=="function"&&i.setValidators([t]);let n=sB(i);e.asyncValidator!==null?i.setAsyncValidators(R7(n,e.asyncValidator)):typeof n=="function"&&i.setAsyncValidators([n]);let r=()=>i.updateValueAndValidity();Zb(e._rawValidators,r),Zb(e._rawAsyncValidators,r)}function eC(i,e){let t=!1;if(i!==null){if(e.validator!==null){let r=oB(i);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==e.validator);o.length!==r.length&&(t=!0,i.setValidators(o))}}if(e.asyncValidator!==null){let r=sB(i);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==e.asyncValidator);o.length!==r.length&&(t=!0,i.setAsyncValidators(o))}}}let n=()=>{};return Zb(e._rawValidators,n),Zb(e._rawAsyncValidators,n),t}function tee(i,e){e.valueAccessor.registerOnChange(t=>{i._pendingValue=t,i._pendingChange=!0,i._pendingDirty=!0,i.updateOn==="change"&&dB(i,e)})}function nee(i,e){e.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,i.updateOn==="blur"&&i._pendingChange&&dB(i,e),i.updateOn!=="submit"&&i.markAsTouched()})}function dB(i,e){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function iee(i,e){let t=(n,r)=>{e.valueAccessor.writeValue(n),r&&e.viewToModelUpdate(n)};i.registerOnChange(t),e._registerOnDestroy(()=>{i._unregisterOnChange(t)})}function uB(i,e){i==null,lS(i,e)}function ree(i,e){return eC(i,e)}function hB(i,e){if(!i.hasOwnProperty("model"))return!1;let t=i.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function oee(i){return Object.getPrototypeOf(i.constructor)===km}function fB(i,e){i._syncPendingControls(),e.forEach(t=>{let n=t.control;n.updateOn==="submit"&&n._pendingChange&&(t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)})}function gB(i,e){if(!e)return null;Array.isArray(e);let t,n,r;return e.forEach(o=>{o.constructor===rn?t=o:oee(o)?n=o:r=o}),r||n||t||null}function see(i,e){let t=i.indexOf(e);t>-1&&i.splice(t,1)}var aee={provide:uc,useExisting:Vr(()=>Wu)},Em=Promise.resolve(),Wu=(()=>{class i extends uc{callSetDisabledState;get submitted(){return sl(this.submittedReactive)}_submitted=sf(()=>this.submittedReactive());submittedReactive=da(!1);_directives=new Set;form;ngSubmit=new Ci;options;constructor(t,n,r){super(),this.callSetDisabledState=r,this.form=new Ef({},rS(t),oS(n))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Em.then(()=>{let n=this._findContainer(t.path);t.control=n.registerControl(t.name,t.control),Jb(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Em.then(()=>{let n=this._findContainer(t.path);n&&n.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Em.then(()=>{let n=this._findContainer(t.path),r=new Ef({});uB(r,t),n.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Em.then(()=>{let n=this._findContainer(t.path);n&&n.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,n){Em.then(()=>{this.form.get(t.path).setValue(n)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),fB(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new Xb(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1),this.form._events.next(new Qb(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(n){return new(n||i)(ke(_d,10),ke(tC,10),ke(Am,8))};static \u0275dir=Sn({type:i,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(n,r){n&1&&U("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Ao([aee]),Er]})}return i})();function U7(i,e){let t=i.indexOf(e);t>-1&&i.splice(t,1)}function H7(i){return typeof i=="object"&&i!==null&&Object.keys(i).length===2&&"value"in i&&"disabled"in i}var Sm=class extends Mf{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,n){super(sS(t),aS(n,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),nC(t)&&(t.nonNullable||t.initialValueIsDefault)&&(H7(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(n=>n(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){U7(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){U7(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){H7(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var lee=i=>i instanceof Sm;var cee={provide:Hu,useExisting:Vr(()=>Un)},G7=Promise.resolve(),Un=(()=>{class i extends Hu{_changeDetectorRef;callSetDisabledState;control=new Sm;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Ci;constructor(t,n,r,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=gB(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let n=t.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),hB(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Jb(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){G7.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let n=t.isDisabled.currentValue,r=n!==0&&cd(n);G7.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?cB(t,this._parent):[t]}static \u0275fac=function(n){return new(n||i)(ke(uc,9),ke(_d,10),ke(tC,10),ke(Gu,10),ke(as,8),ke(Am,8))};static \u0275dir=Sn({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Ao([cee]),Er,As]})}return i})();var $r=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275dir=Sn({type:i,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return i})(),dee={provide:Gu,useExisting:Vr(()=>hc),multi:!0},hc=(()=>{class i extends km{writeValue(t){let n=t??"";this.setProperty("value",n)}registerOnChange(t){this.onChange=n=>{t(n==""?null:parseFloat(n))}}static \u0275fac=(()=>{let t;return function(r){return(t||(t=rs(i)))(r||i)}})();static \u0275dir=Sn({type:i,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(n,r){n&1&&U("input",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},standalone:!1,features:[Ao([dee]),Er]})}return i})();var pB=new Ze("");var uee={provide:uc,useExisting:Vr(()=>ba)},ba=(()=>{class i extends uc{callSetDisabledState;get submitted(){return sl(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=sf(()=>this._submittedReactive());_submittedReactive=da(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new Ci;constructor(t,n,r){super(),this.callSetDisabledState=r,this._setValidators(t),this._setAsyncValidators(n)}ngOnChanges(t){t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(eC(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let n=this.form.get(t.path);return Jb(n,t,this.callSetDisabledState),n.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),n}getControl(t){return this.form.get(t.path)}removeControl(t){V7(t.control||null,t,!1),see(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,n){this.form.get(t.path).setValue(n)}onSubmit(t){return this._submittedReactive.set(!0),fB(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new Xb(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new Qb(this.form))}_updateDomValue(){this.directives.forEach(t=>{let n=t.control,r=this.form.get(t.path);n!==r&&(V7(n||null,t),lee(r)&&(Jb(r,t,this.callSetDisabledState),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let n=this.form.get(t.path);uB(n,t),n.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let n=this.form.get(t.path);n&&ree(n,t)&&n.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){lS(this.form,this),this._oldForm&&eC(this._oldForm,this)}static \u0275fac=function(n){return new(n||i)(ke(_d,10),ke(tC,10),ke(Am,8))};static \u0275dir=Sn({type:i,selectors:[["","formGroup",""]],hostBindings:function(n,r){n&1&&U("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Ao([uee]),Er,As]})}return i})();var hee={provide:Hu,useExisting:Vr(()=>Ca)},Ca=(()=>{class i extends Hu{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new Ci;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,n,r,o,s){super(),this._ngModelWarningConfig=s,this._parent=t,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=gB(this,o)}ngOnChanges(t){this._added||this._setUpControl(),hB(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return cB(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(n){return new(n||i)(ke(uc,13),ke(_d,10),ke(tC,10),ke(Gu,10),ke(pB,8))};static \u0275dir=Sn({type:i,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[Ao([hee]),Er,As]})}return i})();var fee={provide:Gu,useExisting:Vr(()=>qn),multi:!0};function mB(i,e){return i==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${i}: ${e}`.slice(0,50))}function gee(i){return i.split(":")[0]}var qn=(()=>{class i extends km{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let n=this._getOptionId(t),r=mB(n,t);this.setProperty("value",r)}registerOnChange(t){this.onChange=n=>{this.value=this._getOptionValue(n),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let n of this._optionMap.keys())if(this._compareWith(this._optionMap.get(n),t))return n;return null}_getOptionValue(t){let n=gee(t);return this._optionMap.has(n)?this._optionMap.get(n):t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=rs(i)))(r||i)}})();static \u0275dir=Sn({type:i,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(n,r){n&1&&U("change",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Ao([fee]),Er]})}return i})(),Kn=(()=>{class i{_element;_renderer;_select;id;constructor(t,n,r){this._element=t,this._renderer=n,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(mB(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(n){return new(n||i)(ke(Ur),ke(il),ke(qn,9))};static \u0275dir=Sn({type:i,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return i})(),pee={provide:Gu,useExisting:Vr(()=>xB),multi:!0};function $7(i,e){return i==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${i}: ${e}`.slice(0,50))}function mee(i){return i.split(":")[0]}var xB=(()=>{class i extends km{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let n;if(Array.isArray(t)){let r=t.map(o=>this._getOptionId(o));n=(o,s)=>{o._setSelected(r.indexOf(s.toString())>-1)}}else n=(r,o)=>{r._setSelected(!1)};this._optionMap.forEach(n)}registerOnChange(t){this.onChange=n=>{let r=[],o=n.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let l=s[a],c=this._getOptionValue(l.value);r.push(c)}}else{let s=n.options;for(let a=0;a<s.length;a++){let l=s[a];if(l.selected){let c=this._getOptionValue(l.value);r.push(c)}}}this.value=r,t(r)}}_registerOption(t){let n=(this._idCounter++).toString();return this._optionMap.set(n,t),n}_getOptionId(t){for(let n of this._optionMap.keys())if(this._compareWith(this._optionMap.get(n)._value,t))return n;return null}_getOptionValue(t){let n=mee(t);return this._optionMap.has(n)?this._optionMap.get(n)._value:t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=rs(i)))(r||i)}})();static \u0275dir=Sn({type:i,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(n,r){n&1&&U("change",function(s){return r.onChange(s.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Ao([pee]),Er]})}return i})(),Yn=(()=>{class i{_element;_renderer;_select;id;_value;constructor(t,n,r){this._element=t,this._renderer=n,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue($7(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue($7(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(n){return new(n||i)(ke(Ur),ke(il),ke(xB,9))};static \u0275dir=Sn({type:i,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return i})();function xee(i){return typeof i=="number"?i:parseInt(i,10)}function _B(i){return typeof i=="number"?i:parseFloat(i)}var rC=(()=>{class i{_validator=$b;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let n=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(n),this._validator=this._enabled?this.createValidator(n):$b,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(n){return new(n||i)};static \u0275dir=Sn({type:i,features:[As]})}return i})(),_ee={provide:_d,useExisting:Vr(()=>cS),multi:!0},cS=(()=>{class i extends rC{max;inputName="max";normalizeInput=t=>_B(t);createValidator=t=>Y7(t);static \u0275fac=(()=>{let t;return function(r){return(t||(t=rs(i)))(r||i)}})();static \u0275dir=Sn({type:i,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(n,r){n&2&&wi("max",r._enabled?r.max:null)},inputs:{max:"max"},standalone:!1,features:[Ao([_ee]),Er]})}return i})(),vee={provide:_d,useExisting:Vr(()=>dS),multi:!0},dS=(()=>{class i extends rC{min;inputName="min";normalizeInput=t=>_B(t);createValidator=t=>K7(t);static \u0275fac=(()=>{let t;return function(r){return(t||(t=rs(i)))(r||i)}})();static \u0275dir=Sn({type:i,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(n,r){n&2&&wi("min",r._enabled?r.min:null)},inputs:{min:"min"},standalone:!1,features:[Ao([vee]),Er]})}return i})(),bee={provide:_d,useExisting:Vr(()=>Dm),multi:!0};var Dm=(()=>{class i extends rC{required;inputName="required";normalizeInput=cd;createValidator=t=>X7;enabled(t){return t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=rs(i)))(r||i)}})();static \u0275dir=Sn({type:i,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(n,r){n&2&&wi("required",r._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Ao([bee]),Er]})}return i})();var Cee={provide:_d,useExisting:Vr(()=>uS),multi:!0},uS=(()=>{class i extends rC{maxlength;inputName="maxlength";normalizeInput=t=>xee(t);createValidator=t=>Q7(t);static \u0275fac=(()=>{let t;return function(r){return(t||(t=rs(i)))(r||i)}})();static \u0275dir=Sn({type:i,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(n,r){n&2&&wi("maxlength",r._enabled?r.maxlength:null)},inputs:{maxlength:"maxlength"},standalone:!1,features:[Ao([Cee]),Er]})}return i})();var vB=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=bn({type:i});static \u0275inj=vn({})}return i})(),tS=class extends Mf{constructor(e,t,n){super(sS(t),aS(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,n={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(e,t={}){let n=this._adjustIndex(e);n<0&&(n=0),this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,n={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),t&&(this.controls.splice(r,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){lB(this,!1,e),e.forEach((n,r)=>{aB(this,!1,r),this.at(r).setValue(n,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((n,r)=>{this.at(r)&&this.at(r).patchValue(n,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((n,r)=>{n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,n)=>n._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,n)=>{e(t,n)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function W7(i){return!!i&&(i.asyncValidators!==void 0||i.validators!==void 0||i.updateOn!==void 0)}var ul=(()=>{class i{useNonNullable=!1;get nonNullable(){let t=new i;return t.useNonNullable=!0,t}group(t,n=null){let r=this._reduceControls(t),o={};return W7(n)?o=n:n!==null&&(o.validators=n.validator,o.asyncValidators=n.asyncValidator),new Ef(r,o)}record(t,n=null){let r=this._reduceControls(t);return new eS(r,n)}control(t,n,r){let o={};return this.useNonNullable?(W7(n)?o=n:(o.validators=n,o.asyncValidators=r),new Sm(t,ot(Ie({},o),{nonNullable:!0}))):new Sm(t,n,r)}array(t,n,r){let o=t.map(s=>this._createControl(s));return new tS(o,n,r)}_reduceControls(t){let n={};return Object.keys(t).forEach(r=>{n[r]=this._createControl(t[r])}),n}_createControl(t){if(t instanceof Sm)return t;if(t instanceof Mf)return t;if(Array.isArray(t)){let n=t[0],r=t.length>1?t[1]:null,o=t.length>2?t[2]:null;return this.control(n,r,o)}else return this.control(t)}static \u0275fac=function(n){return new(n||i)};static \u0275prov=tt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var hl=(()=>{class i{static withConfig(t){return{ngModule:i,providers:[{provide:Am,useValue:t.callSetDisabledState??iC}]}}static \u0275fac=function(n){return new(n||i)};static \u0275mod=bn({type:i});static \u0275inj=vn({imports:[vB]})}return i})(),fl=(()=>{class i{static withConfig(t){return{ngModule:i,providers:[{provide:pB,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Am,useValue:t.callSetDisabledState??iC}]}}static \u0275fac=function(n){return new(n||i)};static \u0275mod=bn({type:i});static \u0275inj=vn({imports:[vB]})}return i})();var jt=function(i){return i[i.State=0]="State",i[i.Transition=1]="Transition",i[i.Sequence=2]="Sequence",i[i.Group=3]="Group",i[i.Animate=4]="Animate",i[i.Keyframes=5]="Keyframes",i[i.Style=6]="Style",i[i.Trigger=7]="Trigger",i[i.Reference=8]="Reference",i[i.AnimateChild=9]="AnimateChild",i[i.AnimateRef=10]="AnimateRef",i[i.Query=11]="Query",i[i.Stagger=12]="Stagger",i}(jt||{}),Ts="*";function hS(i,e){return{type:jt.Trigger,name:i,definitions:e,options:{}}}function oC(i,e=null){return{type:jt.Animate,styles:e,timings:i}}function bB(i,e=null){return{type:jt.Sequence,steps:i,options:e}}function vd(i){return{type:jt.Style,styles:i,offset:null}}function Fm(i,e,t){return{type:jt.State,name:i,styles:e,options:t}}function sC(i,e,t=null){return{type:jt.Transition,expr:i,animation:e,options:t}}var gl=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(e=0,t=0){this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}},qu=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(e){this.players=e;let t=0,n=0,r=0,o=this.players.length;o==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++t==o&&this._onFinish()}),s.onDestroy(()=>{++n==o&&this._onDestroy()}),s.onStart(()=>{++r==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(n=>{let r=n.totalTime?Math.min(1,t/n.totalTime):1;n.setPosition(r)})}getPosition(){let e=this.players.reduce((t,n)=>t===null||n.totalTime>t.totalTime?n:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}},Pf="!";var CB=["toast-component",""];function yee(i,e){if(i&1){let t=Ae();u(0,"button",5),U("click",function(){K(t);let r=F();return Y(r.remove())}),u(1,"span",6),m(2,"\xD7"),f()()}}function wee(i,e){if(i&1&&(zp(0),m(1),jp()),i&2){let t=F(2);x(),he("[",t.duplicatesCount+1,"]")}}function Mee(i,e){if(i&1&&(u(0,"div"),m(1),ee(2,wee,2,1,"ng-container",4),f()),i&2){let t=F();ei(t.options.titleClass),wi("aria-label",t.title),x(),he(" ",t.title," "),x(),S("ngIf",t.duplicatesCount)}}function Eee(i,e){if(i&1&&k(0,"div",7),i&2){let t=F();ei(t.options.messageClass),S("innerHTML",t.message,Fv)}}function Pee(i,e){if(i&1&&(u(0,"div",8),m(1),f()),i&2){let t=F();ei(t.options.messageClass),wi("aria-label",t.message),x(),he(" ",t.message," ")}}function Oee(i,e){if(i&1&&(u(0,"div"),k(1,"div",9),f()),i&2){let t=F();x(),It("width",t.width()+"%")}}function See(i,e){if(i&1){let t=Ae();u(0,"button",5),U("click",function(){K(t);let r=F();return Y(r.remove())}),u(1,"span",6),m(2,"\xD7"),f()()}}function kee(i,e){if(i&1&&(zp(0),m(1),jp()),i&2){let t=F(2);x(),he("[",t.duplicatesCount+1,"]")}}function Aee(i,e){if(i&1&&(u(0,"div"),m(1),ee(2,kee,2,1,"ng-container",4),f()),i&2){let t=F();ei(t.options.titleClass),wi("aria-label",t.title),x(),he(" ",t.title," "),x(),S("ngIf",t.duplicatesCount)}}function Dee(i,e){if(i&1&&k(0,"div",7),i&2){let t=F();ei(t.options.messageClass),S("innerHTML",t.message,Fv)}}function Fee(i,e){if(i&1&&(u(0,"div",8),m(1),f()),i&2){let t=F();ei(t.options.messageClass),wi("aria-label",t.message),x(),he(" ",t.message," ")}}function Iee(i,e){if(i&1&&(u(0,"div"),k(1,"div",9),f()),i&2){let t=F();x(),It("width",t.width()+"%")}}var fS=class{_attachedHost;component;viewContainerRef;injector;constructor(e,t){this.component=e,this.injector=t}attach(e,t){return this._attachedHost=e,e.attach(this,t)}detach(){let e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},gS=class{_attachedPortal;_disposeFn;attach(e,t){return this._attachedPortal=e,this.attachComponentPortal(e,t)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}},pS=class{_overlayRef;componentInstance;duplicatesCount=0;_afterClosed=new Pn;_activate=new Pn;_manualClose=new Pn;_resetTimeout=new Pn;_countDuplicate=new Pn;constructor(e){this._overlayRef=e}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,t){e&&this._resetTimeout.next(),t&&this._countDuplicate.next(++this.duplicatesCount)}},Of=class{toastId;config;message;title;toastType;toastRef;_onTap=new Pn;_onAction=new Pn;constructor(e,t,n,r,o,s){this.toastId=e,this.config=t,this.message=n,this.title=r,this.toastType=o,this.toastRef=s,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}},yB={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing"},wB=new Ze("ToastConfig"),mS=class extends gS{_hostDomElement;_componentFactoryResolver;_appRef;constructor(e,t,n){super(),this._hostDomElement=e,this._componentFactoryResolver=t,this._appRef=n}attachComponentPortal(e,t){let n=this._componentFactoryResolver.resolveComponentFactory(e.component),r;return r=n.create(e.injector),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.detachView(r.hostView),r.destroy()}),t?this._hostDomElement.insertBefore(this._getComponentRootNode(r),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(r)),r}_getComponentRootNode(e){return e.hostView.rootNodes[0]}},Tee=(()=>{class i{_document=$e(ai);_containerElement;ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let t=this._document.createElement("div");t.classList.add("overlay-container"),t.setAttribute("aria-live","polite"),this._document.body.appendChild(t),this._containerElement=t}static \u0275fac=function(n){return new(n||i)};static \u0275prov=tt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),xS=class{_portalHost;constructor(e){this._portalHost=e}attach(e,t=!0){return this._portalHost.attach(e,t)}detach(){return this._portalHost.detach()}},Bee=(()=>{class i{_overlayContainer=$e(Tee);_componentFactoryResolver=$e(of);_appRef=$e(is);_document=$e(ai);_paneElements=new Map;create(t,n){return this._createOverlayRef(this.getPaneElement(t,n))}getPaneElement(t="",n){return this._paneElements.get(n)||this._paneElements.set(n,{}),this._paneElements.get(n)[t]||(this._paneElements.get(n)[t]=this._createPaneElement(t,n)),this._paneElements.get(n)[t]}_createPaneElement(t,n){let r=this._document.createElement("div");return r.id="toast-container",r.classList.add(t),r.classList.add("toast-container"),n?n.getContainerElement().appendChild(r):this._overlayContainer.getContainerElement().appendChild(r),r}_createPortalHost(t){return new mS(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new xS(this._createPortalHost(t))}static \u0275fac=function(n){return new(n||i)};static \u0275prov=tt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Bs=(()=>{class i{overlay;_injector;sanitizer;ngZone;toastrConfig;currentlyActive=0;toasts=[];overlayContainer;previousToastMessage;index=0;constructor(t,n,r,o,s){this.overlay=n,this._injector=r,this.sanitizer=o,this.ngZone=s,this.toastrConfig=Ie(Ie({},t.default),t.config),t.config.iconClasses&&(this.toastrConfig.iconClasses=Ie(Ie({},t.default.iconClasses),t.config.iconClasses))}show(t,n,r={},o=""){return this._preBuildNotification(o,t,n,this.applyConfig(r))}success(t,n,r={}){let o=this.toastrConfig.iconClasses.success||"";return this._preBuildNotification(o,t,n,this.applyConfig(r))}error(t,n,r={}){let o=this.toastrConfig.iconClasses.error||"";return this._preBuildNotification(o,t,n,this.applyConfig(r))}info(t,n,r={}){let o=this.toastrConfig.iconClasses.info||"";return this._preBuildNotification(o,t,n,this.applyConfig(r))}warning(t,n,r={}){let o=this.toastrConfig.iconClasses.warning||"";return this._preBuildNotification(o,t,n,this.applyConfig(r))}clear(t){for(let n of this.toasts)if(t!==void 0){if(n.toastId===t){n.toastRef.manualClose();return}}else n.toastRef.manualClose()}remove(t){let n=this._findToast(t);if(!n||(n.activeToast.toastRef.close(),this.toasts.splice(n.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){let r=this.toasts[this.currentlyActive].toastRef;r.isInactive()||(this.currentlyActive=this.currentlyActive+1,r.activate())}return!0}findDuplicate(t="",n="",r,o){let{includeTitleDuplicates:s}=this.toastrConfig;for(let a of this.toasts){let l=s&&a.title===t;if((!s||l)&&a.message===n)return a.toastRef.onDuplicate(r,o),a}return null}applyConfig(t={}){return Ie(Ie({},this.toastrConfig),t)}_findToast(t){for(let n=0;n<this.toasts.length;n++)if(this.toasts[n].toastId===t)return{index:n,activeToast:this.toasts[n]};return null}_preBuildNotification(t,n,r,o){return o.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,n,r,o)):this._buildNotification(t,n,r,o)}_buildNotification(t,n,r,o){if(!o.toastComponent)throw new Error("toastComponent required");let s=this.findDuplicate(r,n,this.toastrConfig.resetTimeoutOnDuplicate&&o.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&r||n)&&this.toastrConfig.preventDuplicates&&s!==null)return s;this.previousToastMessage=n;let a=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(a=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));let l=this.overlay.create(o.positionClass,this.overlayContainer);this.index=this.index+1;let c=n;n&&o.enableHtml&&(c=this.sanitizer.sanitize(os.HTML,n));let d=new pS(l),h=new Of(this.index,o,c,r,t,d),p=[{provide:Of,useValue:h}],g=pr.create({providers:p,parent:this._injector}),_=new fS(o.toastComponent,g),b=l.attach(_,o.newestOnTop);d.componentInstance=b.instance;let C={toastId:this.index,title:r||"",message:n||"",toastRef:d,onShown:d.afterActivate(),onHidden:d.afterClosed(),onTap:h.onTap(),onAction:h.onAction(),portal:b};return a||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{C.toastRef.activate()})),this.toasts.push(C),C}static \u0275fac=function(n){return new(n||i)(ht(wB),ht(Bee),ht(pr),ht(MO),ht(On))};static \u0275prov=tt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Nee=(()=>{class i{toastrService;toastPackage;ngZone;message;title;options;duplicatesCount;originalTimeout;width=da(-1);toastClasses="";state;get _state(){return this.state()}get displayStyle(){if(this.state().value==="inactive")return"none"}timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(t,n,r){this.toastrService=t,this.toastPackage=n,this.ngZone=r,this.message=n.message,this.title=n.title,this.options=n.config,this.originalTimeout=n.config.timeOut,this.toastClasses=`${n.toastType} ${n.config.toastClass}`,this.sub=n.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=n.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=n.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=n.toastRef.countDuplicate().subscribe(o=>{this.duplicatesCount=o}),this.state=da({value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}})}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state.update(t=>ot(Ie({},t),{value:"active"})),!(this.options.disableTimeOut===!0||this.options.disableTimeOut==="timeOut")&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=new Date().getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(this.width()===0||this.width()===100||!this.options.timeOut)return;let t=new Date().getTime(),n=this.hideTime-t;this.width.set(n/this.options.timeOut*100),this.options.progressAnimation==="increasing"&&this.width.update(r=>100-r),this.width()<=0&&this.width.set(0),this.width()>=100&&this.width.set(100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state.update(t=>ot(Ie({},t),{value:"active"})),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){this.state().value!=="removed"&&(clearTimeout(this.timeout),this.state.update(t=>ot(Ie({},t),{value:"removed"})),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){this.state().value!=="removed"&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){this.state().value!=="removed"&&this.options.disableTimeOut!=="extendedTimeOut"&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width.set(0))}delayedHideToast(){this.options.disableTimeOut===!0||this.options.disableTimeOut==="extendedTimeOut"||this.options.extendedTimeOut===0||this.state().value==="removed"||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,n){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),n)):this.timeout=setTimeout(()=>t(),n)}outsideInterval(t,n){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),n)):this.intervalId=setInterval(()=>t(),n)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}static \u0275fac=function(n){return new(n||i)(ke(Bs),ke(Of),ke(On))};static \u0275cmp=Ke({type:i,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(n,r){n&1&&U("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),n&2&&(eO("@flyInOut",r._state),ei(r.toastClasses),It("display",r.displayStyle))},attrs:CB,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(n,r){n&1&&ee(0,yee,3,0,"button",0)(1,Mee,3,5,"div",1)(2,Eee,1,3,"div",2)(3,Pee,2,4,"div",3)(4,Oee,2,2,"div",4),n&2&&(S("ngIf",r.options.closeButton),x(),S("ngIf",r.title),x(),S("ngIf",r.message&&r.options.enableHtml),x(),S("ngIf",r.message&&!r.options.enableHtml),x(),S("ngIf",r.options.progressBar))},dependencies:[lt],encapsulation:2,data:{animation:[hS("flyInOut",[Fm("inactive",vd({opacity:0})),Fm("active",vd({opacity:1})),Fm("removed",vd({opacity:0})),sC("inactive => active",oC("{{ easeTime }}ms {{ easing }}")),sC("active => removed",oC("{{ easeTime }}ms {{ easing }}"))])]},changeDetection:0})}return i})(),Lee=ot(Ie({},yB),{toastComponent:Nee}),Ree=(i={})=>od([{provide:wB,useValue:{default:Lee,config:i}}]),MB=(()=>{class i{static forRoot(t={}){return{ngModule:i,providers:[Ree(t)]}}static \u0275fac=function(n){return new(n||i)};static \u0275mod=bn({type:i});static \u0275inj=vn({})}return i})();var zee=(()=>{class i{toastrService;toastPackage;appRef;message;title;options;duplicatesCount;originalTimeout;width=da(-1);toastClasses="";get displayStyle(){return this.state()==="inactive"?"none":null}state=da("inactive");timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(t,n,r){this.toastrService=t,this.toastPackage=n,this.appRef=r,this.message=n.message,this.title=n.title,this.options=n.config,this.originalTimeout=n.config.timeOut,this.toastClasses=`${n.toastType} ${n.config.toastClass}`,this.sub=n.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=n.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=n.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=n.toastRef.countDuplicate().subscribe(o=>{this.duplicatesCount=o})}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state.set("active"),!(this.options.disableTimeOut===!0||this.options.disableTimeOut==="timeOut")&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=new Date().getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(this.width()===0||this.width()===100||!this.options.timeOut)return;let t=new Date().getTime(),n=this.hideTime-t;this.width.set(n/this.options.timeOut*100),this.options.progressAnimation==="increasing"&&this.width.update(r=>100-r),this.width()<=0&&this.width.set(0),this.width()>=100&&this.width.set(100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state.set("active"),this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=new Date().getTime()+(this.originalTimeout||0),this.width.set(-1),this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){this.state()!=="removed"&&(clearTimeout(this.timeout),this.state.set("removed"),this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){this.state()!=="removed"&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){this.state()!=="removed"&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width.set(0))}delayedHideToast(){this.options.disableTimeOut===!0||this.options.disableTimeOut==="extendedTimeOut"||this.options.extendedTimeOut===0||this.state()==="removed"||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}static \u0275fac=function(n){return new(n||i)(ke(Bs),ke(Of),ke(is))};static \u0275cmp=Ke({type:i,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(n,r){n&1&&U("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),n&2&&(ei(r.toastClasses),It("display",r.displayStyle))},attrs:CB,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(n,r){n&1&&ee(0,See,3,0,"button",0)(1,Aee,3,5,"div",1)(2,Dee,1,3,"div",2)(3,Fee,2,4,"div",3)(4,Iee,2,2,"div",4),n&2&&(S("ngIf",r.options.closeButton),x(),S("ngIf",r.title),x(),S("ngIf",r.message&&r.options.enableHtml),x(),S("ngIf",r.message&&!r.options.enableHtml),x(),S("ngIf",r.options.progressBar))},dependencies:[lt],encapsulation:2,changeDetection:0})}return i})(),bOe=ot(Ie({},yB),{toastComponent:zee});var EB="primary",Tm=class i{constructor(e){Object.assign(this,e)}static create(e){return!e?.template&&!e?.type&&console.warn(`[ngx-spinner]: Property "type" is missed. Please, provide animation type to <ngx-spinner> component
        and ensure css is added to angular.json file`),new i(e)}},PB=(()=>{class i{constructor(){this.spinnerObservable=new fr(null)}getSpinner(t){return this.spinnerObservable.asObservable().pipe(gr(n=>n&&n.name===t))}show(t=EB,n){return new Promise((r,o)=>{setTimeout(()=>{n&&Object.keys(n).length?(n.name=t,this.spinnerObservable.next(new Tm(ot(Ie({},n),{show:!0}))),r(!0)):(this.spinnerObservable.next(new Tm({name:t,show:!0})),r(!0))},10)})}hide(t=EB,n=10){return new Promise((r,o)=>{setTimeout(()=>{this.spinnerObservable.next(new Tm({name:t,show:!1})),r(!0)},n)})}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=tt({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),jee=new Ze("NGX_SPINNER_CONFIG");var OB=(()=>{class i{static forRoot(t){return{ngModule:i,providers:[{provide:jee,useValue:t}]}}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=bn({type:i})}static{this.\u0275inj=vn({})}}return i})();function Uee(i,e){i&1&&(u(0,"span"),m(1,"Email alan\u0131 bo\u015F b\u0131rak\u0131lamaz"),f())}function Hee(i,e){i&1&&(u(0,"span"),m(1,"Ge\xE7erli bir email adresi girin"),f())}function Gee(i,e){if(i&1&&(u(0,"div",30),ee(1,Uee,2,0,"span",23)(2,Hee,2,0,"span",23),f()),i&2){let t=F();x(),S("ngIf",t.f.email.errors.required),x(),S("ngIf",t.f.email.errors.email)}}function $ee(i,e){i&1&&(u(0,"span"),m(1,"\u015Eifre alan\u0131 bo\u015F b\u0131rak\u0131lamaz"),f())}function Wee(i,e){if(i&1&&(u(0,"div",30),ee(1,$ee,2,0,"span",23),f()),i&2){let t=F();x(),S("ngIf",t.f.sifre.errors.required)}}function qee(i,e){i&1&&(u(0,"span"),m(1,"Giri\u015F Yap"),f())}function Kee(i,e){i&1&&(u(0,"span"),m(1,"Giri\u015F Yap\u0131l\u0131yor..."),f())}function Yee(i,e){i&1&&k(0,"div",31)}var aC=class i{constructor(e,t,n,r,o){this.fb=e;this.http=t;this.router=n;this.toastr=r;this.spinner=o}loginForm;showPassword=!1;submitted=!1;isSubmitting=!1;showToast=!1;toastTitle="";toastMessage="";toastType="success";ngOnInit(){this.loginForm=this.fb.group({email:["",[fi.required,fi.email]],sifre:["",[fi.required]],remember:[!1]})}get f(){return this.loginForm.controls}togglePassword(){this.showPassword=!this.showPassword}onSubmit(){if(this.submitted=!0,this.loginForm.invalid)return;this.isSubmitting=!0;let e={email:this.loginForm.value.email,sifre:this.loginForm.value.sifre};this.http.post("./server/api/ogrenci_girisi.php",e).subscribe({next:t=>{if(t.success){this.toastr.success("Giri\u015F ba\u015Far\u0131l\u0131. Y\xF6nlendiriliyorsunuz...","",{timeOut:3e3,progressBar:!0,closeButton:!0}),this.spinner.show();let n=t.data||t;if(console.log("Storing user data:",n),console.log("Token in response:",n.token),!n.token||n.token.trim()===""){console.error("Token bulunamad\u0131 veya bo\u015F!",n),this.toastr.error("Giri\u015F s\u0131ras\u0131nda ge\xE7erli token al\u0131namad\u0131!","Hata"),this.spinner.hide();return}let r=ot(Ie({},n),{loginTime:new Date().toISOString()});this.loginForm.value.remember?(localStorage.setItem("user",JSON.stringify(r)),console.log("User data saved to localStorage with token:",n.token.substring(0,10)+"...")):(sessionStorage.setItem("user",JSON.stringify(r)),console.log("User data saved to sessionStorage with token:",n.token.substring(0,10)+"..."));let o=localStorage.getItem("user")||sessionStorage.getItem("user");if(o){let s=JSON.parse(o);console.log("Verification - Token saved correctly:",!!s.token)}setTimeout(()=>{console.log("Response data:",t.data);let s=t.data?.rutbe||t.rutbe;console.log("User rutbe:",s),s==="admin"?this.router.navigate(["/yonetici-sayfasi"]):s==="ogretmen"?this.router.navigate(["/ogretmen-sayfasi"]):s==="ogrenci"?this.router.navigate(["/ogrenci-sayfasi"]):(console.log("Rutbe tan\u0131ms\u0131z veya bilinmeyen, onay sayfas\u0131na y\xF6nlendiriliyor"),this.router.navigate(["/onay-sayfasi"])),this.spinner.hide()},1500)}else this.toastr.error("Hata",t.error||"Giri\u015F ba\u015Far\u0131s\u0131z",{timeOut:3e3,progressBar:!0,closeButton:!0}),this.isSubmitting=!1},error:t=>{let n="Beklenmeyen bir hata olu\u015Ftu";t.error&&t.error.error?n=t.error.error:t.message&&(n=t.message),this.toastr.error("Hata",n,{timeOut:3e3,progressBar:!0,closeButton:!0}),this.isSubmitting=!1}})}navigateToRegister(){this.router.navigate(["/kayit-sayfasi"])}static \u0275fac=function(t){return new(t||i)(ke(ul),ke(gt),ke(an),ke(Bs),ke(PB))};static \u0275cmp=Ke({type:i,selectors:[["app-ogrenci-giris-sayfasi"]],standalone:!1,decls:49,vars:19,consts:[[1,"login-container"],[1,"overlay"],[1,"form-container"],[1,"form-header"],[3,"ngSubmit","formGroup"],[1,"form-fields"],[1,"form-group"],["for","email"],[1,"input-with-icon"],[1,"bi","bi-envelope"],["type","email","id","email","formControlName","email","placeholder","Email adresinizi girin"],["class","error-message",4,"ngIf"],["for","sifre"],[1,"bi","bi-lock"],["id","sifre","formControlName","sifre","placeholder","\u015Eifrenizi girin",3,"type"],["type","button",1,"password-toggle",3,"click"],[1,"remember-forgot"],[1,"remember-me"],["type","checkbox","id","remember","formControlName","remember"],["for","remember"],["href","#",1,"forgot-password"],[1,"form-actions"],["type","submit",1,"primary-button",3,"disabled"],[4,"ngIf"],["class","spinner",4,"ngIf"],["type","button",1,"secondary-button",3,"click"],[1,"toast"],[1,"toast-content"],[1,"toast-icon",3,"ngClass"],[1,"toast-message"],[1,"error-message"],[1,"spinner"]],template:function(t,n){t&1&&(u(0,"div",0),k(1,"div",1),u(2,"div",2)(3,"div",3)(4,"h2"),m(5,"\xD6\u011Frenci Giri\u015Fi"),f(),u(6,"p"),m(7,"Hesap bilgilerinizle giri\u015F yap\u0131n\u0131z"),f()(),u(8,"form",4),U("ngSubmit",function(){return n.onSubmit()}),u(9,"div",5)(10,"div",6)(11,"label",7),m(12,"Email"),f(),u(13,"div",8),k(14,"i",9)(15,"input",10),f(),ee(16,Gee,3,2,"div",11),f(),u(17,"div",6)(18,"label",12),m(19,"\u015Eifre"),f(),u(20,"div",8),k(21,"i",13)(22,"input",14),u(23,"button",15),U("click",function(){return n.togglePassword()}),k(24,"i"),f()(),ee(25,Wee,2,1,"div",11),f(),u(26,"div",16)(27,"div",17),k(28,"input",18),u(29,"label",19),m(30,"Beni Hat\u0131rla"),f()(),u(31,"a",20),m(32,"\u015Eifremi Unuttum"),f()()(),u(33,"div",21)(34,"button",22),ee(35,qee,2,0,"span",23)(36,Kee,2,0,"span",23)(37,Yee,1,0,"div",24),f(),u(38,"button",25),U("click",function(){return n.navigateToRegister()}),m(39," Yeni Hesap Olu\u015Ftur "),f()()()()(),u(40,"div",26)(41,"div",27)(42,"div",28),k(43,"i"),f(),u(44,"div",29)(45,"h4"),m(46),f(),u(47,"p"),m(48),f()()()()),t&2&&(x(8),S("formGroup",n.loginForm),x(8),S("ngIf",n.submitted&&n.f.email.errors),x(6),S("type",n.showPassword?"text":"password"),x(2),ei(n.showPassword?"bi bi-eye-slash":"bi bi-eye"),x(),S("ngIf",n.submitted&&n.f.sifre.errors),x(9),S("disabled",n.isSubmitting),x(),S("ngIf",!n.isSubmitting),x(),S("ngIf",n.isSubmitting),x(),S("ngIf",n.isSubmitting),x(3),xe("visible",n.showToast)("hidden",!n.showToast),x(2),S("ngClass",n.toastType),x(),ei(n.toastType==="success"?"bi bi-check-circle":"bi bi-x-circle"),x(3),W(n.toastTitle),x(2),W(n.toastMessage))},dependencies:[ma,lt,$r,rn,$u,fn,Gr,ba,Ca],styles:["[_nghost-%COMP%]{display:block;height:100%}.login-container[_ngcontent-%COMP%]{min-height:100vh;width:100%;display:flex;align-items:center;justify-content:center;padding:3rem 1rem;background-image:url(/header/header-1.png);background-size:cover;background-position:center;background-repeat:no-repeat;position:relative}.overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background-color:#29303c80;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.form-container[_ngcontent-%COMP%]{position:relative;z-index:10;width:100%;max-width:26rem;background-color:#ffffff1a;-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);border:1px solid rgba(255,255,255,.2);border-radius:.5rem;box-shadow:0 10px 25px #0003;padding:2rem}.form-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#fff;text-shadow:0 1px 3px rgba(0,0,0,.3)}.form-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fffc;font-size:.875rem;margin-top:.25rem}.form-fields[_ngcontent-%COMP%]{margin-bottom:1.5rem;display:flex;flex-direction:column;gap:1.25rem}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:#fff}.input-with-icon[_ngcontent-%COMP%]{position:relative}.input-with-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:.75rem;top:50%;transform:translateY(-50%);color:#fff9;pointer-events:none}.input-with-icon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.75rem .75rem .75rem 2.5rem;background-color:#ffffff1a;border:1px solid rgba(255,255,255,.2);color:#fff;border-radius:.5rem;font-size:.875rem;transition:all .3s ease}.input-with-icon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#f60;box-shadow:0 0 0 3px #ff660080}.input-with-icon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#fff9}.password-toggle[_ngcontent-%COMP%]{position:absolute;right:15px;top:50%;transform:translateY(-50%);background:none;border:none;color:#fff9;cursor:pointer;transition:color .3s ease}.password-toggle[_ngcontent-%COMP%]:hover{color:#fff}.error-message[_ngcontent-%COMP%]{font-size:.75rem;color:#ff4d4f;margin-top:.25rem;min-height:1rem}.remember-forgot[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:.5rem}.remember-me[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.remember-me[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:1rem;height:1rem;cursor:pointer;accent-color:#ff6600}.remember-me[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.75rem;color:#fffc;cursor:pointer}.forgot-password[_ngcontent-%COMP%]{font-size:.75rem;color:#fffc;text-decoration:none;transition:color .3s ease}.forgot-password[_ngcontent-%COMP%]:hover{color:#f60;text-decoration:underline}.form-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem;padding-top:.5rem}.primary-button[_ngcontent-%COMP%], .secondary-button[_ngcontent-%COMP%]{width:100%;padding:.75rem;border-radius:.5rem;font-weight:500;font-size:.875rem;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s ease;color:#fff}.primary-button[_ngcontent-%COMP%]{background-color:#f60;border:none}.primary-button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#ff6600e6}.primary-button[_ngcontent-%COMP%]:active:not(:disabled){background-color:#e65c00}.primary-button[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.secondary-button[_ngcontent-%COMP%]{background-color:#29303c;border:none}.secondary-button[_ngcontent-%COMP%]:hover{background-color:#29303ce6}.secondary-button[_ngcontent-%COMP%]:active{background-color:#1f242d}.toast[_ngcontent-%COMP%]{position:fixed;bottom:2rem;right:2rem;background-color:#fff;border-radius:.5rem;box-shadow:0 5px 15px #0003;min-width:18rem;max-width:24rem;z-index:1000;opacity:0;transform:translateY(1rem);transition:all .3s ease}.toast.visible[_ngcontent-%COMP%]{opacity:1;transform:translateY(0)}.toast-content[_ngcontent-%COMP%]{display:flex;align-items:flex-start;padding:1rem}.toast-icon[_ngcontent-%COMP%]{flex-shrink:0;margin-right:.75rem;width:1.5rem;height:1.5rem;display:flex;align-items:center;justify-content:center;border-radius:50%}.toast-icon.success[_ngcontent-%COMP%]{background-color:#eaee0426;color:#29303c}.toast-icon.error[_ngcontent-%COMP%]{background-color:#ff4d4f26;color:#ff4d4f}.toast-message[_ngcontent-%COMP%]{flex:1}.toast-message[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#333;font-size:.875rem;margin-bottom:.25rem}.toast-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:.75rem}.spinner[_ngcontent-%COMP%]{width:1rem;height:1rem;border:2px solid rgba(255,255,255,.3);border-radius:50%;border-top-color:#fff;animation:_ngcontent-%COMP%_spin .8s linear infinite;margin-left:.5rem}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}@media (max-width: 640px){.form-container[_ngcontent-%COMP%]{padding:1.5rem}.toast[_ngcontent-%COMP%]{left:1rem;right:1rem;bottom:1rem;min-width:auto}}"]})};var Xee=["fileInput"];function Qee(i,e){if(i&1&&k(0,"img",45),i&2){let t=F();S("src",t.previewUrl,vt)}}function Jee(i,e){i&1&&(u(0,"div",46),k(1,"i",47),u(2,"span"),m(3,"Avatar Se\xE7"),f(),u(4,"span",48),m(5,"veya s\xFCr\xFCkleyin"),f()())}function Zee(i,e){if(i&1&&(u(0,"div",49),m(1),f()),i&2){let t=F();x(),W(t.avatarError)}}function ete(i,e){i&1&&(u(0,"span"),m(1,"\u0130sim alan\u0131 bo\u015F b\u0131rak\u0131lamaz"),f())}function tte(i,e){if(i&1&&(u(0,"div",49),ee(1,ete,2,0,"span",38),f()),i&2){let t=F();x(),S("ngIf",t.f.adi_soyadi.errors.required)}}function nte(i,e){i&1&&(u(0,"span"),m(1,"Email alan\u0131 bo\u015F b\u0131rak\u0131lamaz"),f())}function ite(i,e){i&1&&(u(0,"span"),m(1,"Ge\xE7erli bir email adresi girin"),f())}function rte(i,e){if(i&1&&(u(0,"div",49),ee(1,nte,2,0,"span",38)(2,ite,2,0,"span",38),f()),i&2){let t=F();x(),S("ngIf",t.f.email.errors.required),x(),S("ngIf",t.f.email.errors.email)}}function ote(i,e){i&1&&(u(0,"span"),m(1,"\u015Eifre alan\u0131 bo\u015F b\u0131rak\u0131lamaz"),f())}function ste(i,e){i&1&&(u(0,"span"),m(1,"\u015Eifre en az 6 karakter olmal\u0131d\u0131r"),f())}function ate(i,e){if(i&1&&(u(0,"div",49),ee(1,ote,2,0,"span",38)(2,ste,2,0,"span",38),f()),i&2){let t=F();x(),S("ngIf",t.f.sifre.errors.required),x(),S("ngIf",t.f.sifre.errors.minlength)}}function lte(i,e){if(i&1&&(u(0,"div",50)(1,"div",51),k(2,"div",52),f(),u(3,"span",53),m(4),f()()),i&2){let t=F();x(2),S("ngClass",t.passwordStrength.cssClass),x(2),W(t.passwordStrength.label)}}function cte(i,e){if(i&1&&(u(0,"option",54),m(1),f()),i&2){let t=e.$implicit;S("value",t.ogrt_adi_soyadi),x(),hn(" ",t.ogrt_adi_soyadi,"",t.brans?" - "+t.brans:""," ")}}function dte(i,e){if(i&1&&(u(0,"div",55),m(1),f()),i&2){let t=F();x(),he(" Toplam ",t.teachers.length||0," \xF6\u011Fretmen bulundu ")}}function ute(i,e){i&1&&(u(0,"span"),m(1,"\xD6\u011Fretmen se\xE7imi zorunludur"),f())}function hte(i,e){if(i&1&&(u(0,"div",49),ee(1,ute,2,0,"span",38),f()),i&2){let t=F();x(),S("ngIf",t.f.ogretmeni.errors.required)}}function fte(i,e){i&1&&(u(0,"span"),m(1,"\xD6\u011Frenci Kaydet"),f())}function gte(i,e){i&1&&(u(0,"span"),m(1,"Kaydediliyor..."),f())}function pte(i,e){i&1&&k(0,"div",56)}var lC=class i{constructor(e,t,n,r,o){this.fb=e;this.http=t;this.router=n;this.toast=r;this.cdr=o}fileInput;registrationForm;selectedFile=null;previewUrl=null;isDragActive=!1;showPassword=!1;submitted=!1;isSubmitting=!1;avatarError="";teachers=[];isLoadingTeachers=!1;showToast=!1;toastTitle="";toastMessage="";toastType="success";passwordStrength={score:0,label:"\xC7ok Zay\u0131f",cssClass:""};ngOnInit(){this.registrationForm=this.fb.group({adi_soyadi:["",fi.required],email:["",[fi.required,fi.email]],cep_telefonu:[""],sifre:["",[fi.required,fi.minLength(6)]],rutbe:["yeni"],aktiflik_durumu:[!1],ogretmeni:["",[fi.required]]}),this.registrationForm.get("sifre")?.valueChanges.subscribe(e=>{e?this.calculatePasswordStrength(e):this.resetPasswordStrength()}),this.loadTeachers()}get f(){return this.registrationForm.controls}onFileChange(e){if(e.target.files&&e.target.files.length){let t=e.target.files[0];this.handleFileSelect(t)}}handleDrag(e){e.preventDefault(),e.stopPropagation(),this.isDragActive=e.type==="dragenter"||e.type==="dragover"}trackByTeacherId(e,t){return t.id||t.adi_soyadi}handleDrop(e){if(e.preventDefault(),e.stopPropagation(),this.isDragActive=!1,e.dataTransfer&&e.dataTransfer.files.length){let t=e.dataTransfer.files[0];this.handleFileSelect(t)}}handleFileSelect(e){if(this.avatarError="",!this.isValidImage(e)){this.avatarError="L\xFCtfen ge\xE7erli bir resim dosyas\u0131 se\xE7in (JPEG, PNG, GIF, WEBP)";return}if(!this.isValidFileSize(e)){this.avatarError="Dosya boyutu 5MB'den k\xFC\xE7\xFCk olmal\u0131d\u0131r";return}this.selectedFile=e;let t=new FileReader;t.onload=n=>{this.previewUrl=n.target.result},t.readAsDataURL(e)}isValidImage(e){return["image/jpeg","image/png","image/gif","image/webp"].includes(e.type)}isValidFileSize(e){return e.size<=5*1024*1024}togglePassword(){this.showPassword=!this.showPassword}calculatePasswordStrength(e){let t=0;e.length>=8&&(t+=1),e.length>=12&&(t+=1),/[A-Z]/.test(e)&&(t+=1),/[0-9]/.test(e)&&(t+=1),/[^A-Za-z0-9]/.test(e)&&(t+=1);let n="\xC7ok Zay\u0131f",r="";t>=5?(n="\xC7ok G\xFC\xE7l\xFC",r="very-strong"):t===4?(n="G\xFC\xE7l\xFC",r="strong"):t===3?(n="Orta",r="medium"):t===2&&(n="Zay\u0131f",r="weak"),this.passwordStrength={score:t,label:n,cssClass:r}}resetPasswordStrength(){this.passwordStrength={score:0,label:"\xC7ok Zay\u0131f",cssClass:""}}loadTeachers(){console.log("\xD6\u011Fretmenler y\xFCkleniyor..."),this.http.get("./server/api/ogretmenler_listesi.php").subscribe({next:e=>{console.log("API yan\u0131t\u0131:",e),e.success?(this.teachers=e.data||[],console.log("Y\xFCklenen \xF6\u011Fretmenler: ",e.data),console.log("Teachers array length: ",this.teachers.length),console.log("Teachers array: ",this.teachers),this.cdr.detectChanges()):this.toast.error("Hata",e.message||"\xD6\u011Fretmenler y\xFCklenemedi",{timeOut:3e3,progressBar:!0,closeButton:!0})},error:e=>{console.error("\xD6\u011Fretmenler y\xFCklenirken hata:",e),this.toast.error("Hata",e.message||"\xD6\u011Fretmenler y\xFCklenirken hata olu\u015Ftu",{timeOut:3e3,progressBar:!0,closeButton:!0})}})}onSubmit(){if(this.submitted=!0,this.registrationForm.invalid)return;if(!this.selectedFile){this.avatarError="L\xFCtfen bir profil foto\u011Fraf\u0131 se\xE7in";return}this.isSubmitting=!0;let e=new FormData;Object.keys(this.registrationForm.value).forEach(t=>{e.append(t,this.registrationForm.value[t])}),e.append("avatar",this.selectedFile),e.append("ogretmeni",this.registrationForm.get("ogretmeni")?.value),this.http.post("./server/api/ogrenci_kayit.php",e).subscribe({next:t=>{t.success?(this.toast.success("Ba\u015Far\u0131l\u0131",t.message||"\xD6\u011Frenci kayd\u0131n\u0131z ba\u015Far\u0131yla al\u0131nd\u0131!",{timeOut:3e3,progressBar:!0,closeButton:!0}),this.isSubmitting=!1,setTimeout(()=>{this.router.navigate(["/onay-sayfasi"])},1500)):(this.toast.error("Hata",t.message||"Kay\u0131t i\u015Flemi ba\u015Far\u0131s\u0131z oldu",{timeOut:3e3,progressBar:!0,closeButton:!0}),this.isSubmitting=!1)},error:t=>{let n="Beklenmeyen bir hata olu\u015Ftu";t.error&&t.error.error?n=t.error.error:t.message&&(n=t.message),this.toast.error("Hata",n,{timeOut:3e3,progressBar:!0,closeButton:!0}),this.isSubmitting=!1},complete:()=>{}})}navigateToLogin(){this.router.navigate(["/giris-sayfasi"])}static \u0275fac=function(t){return new(t||i)(ke(ul),ke(gt),ke(an),ke(Bs),ke(as))};static \u0275cmp=Ke({type:i,selectors:[["app-ogrenci-kayit-sayfasi"]],viewQuery:function(t,n){if(t&1&&Gi(Xee,5),t&2){let r;Di(r=Fi())&&(n.fileInput=r.first)}},standalone:!1,decls:77,vars:33,consts:[["fileInput",""],[1,"registration-container"],[1,"overlay"],[1,"form-container"],[1,"form-header"],["enctype","multipart/form-data",3,"ngSubmit","formGroup"],[1,"avatar-upload"],[1,"avatar-container",3,"click","dragenter","dragover","dragleave","drop"],[1,"avatar-preview"],["alt","Avatar","class","avatar-image",3,"src",4,"ngIf"],["class","avatar-placeholder",4,"ngIf"],["type","file","hidden","","accept","image/jpeg,image/png,image/gif,image/webp",3,"change"],["class","error-message",4,"ngIf"],[1,"avatar-help-text"],[1,"form-fields"],[1,"form-group"],["for","adi_soyadi"],[1,"input-with-icon"],[1,"bi","bi-person"],["type","text","id","adi_soyadi","formControlName","adi_soyadi","placeholder","Ad ve soyad\u0131n\u0131z\u0131 girin"],["for","cep_telefonu"],[1,"bi","bi-phone"],["type","text","id","cep_telefonu","formControlName","cep_telefonu","placeholder","Cep telefonunuzu girin"],["for","email"],[1,"bi","bi-envelope"],["type","email","id","email","formControlName","email","placeholder","Email adresinizi girin"],["for","sifre"],[1,"bi","bi-lock"],["id","sifre","formControlName","sifre","placeholder","\u015Eifrenizi olu\u015Fturun",3,"type"],["type","button",1,"password-toggle",3,"click"],["class","password-strength",4,"ngIf"],["for","ogretmeni"],["id","ogretmeni","formControlName","ogretmeni",3,"disabled"],["value",""],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],["class","text-muted small mt-1",4,"ngIf"],[1,"form-actions"],["type","submit",1,"primary-button",3,"disabled"],[4,"ngIf"],["class","spinner",4,"ngIf"],["type","button",1,"secondary-button",3,"click"],[1,"toast"],[1,"toast-content"],[1,"toast-icon",3,"ngClass"],[1,"toast-message"],["alt","Avatar",1,"avatar-image",3,"src"],[1,"avatar-placeholder"],[1,"bi","bi-image"],[1,"drag-text"],[1,"error-message"],[1,"password-strength"],[1,"strength-bar"],[1,"strength-fill",3,"ngClass"],[1,"strength-label"],[3,"value"],[1,"text-muted","small","mt-1"],[1,"spinner"]],template:function(t,n){if(t&1){let r=Ae();u(0,"div",1),k(1,"div",2),u(2,"div",3)(3,"div",4)(4,"h2"),m(5,"\xD6\u011Frenci Kay\u0131t"),f(),u(6,"p"),m(7,"L\xFCtfen t\xFCm bilgilerinizi eksiksiz doldurunuz"),f()(),u(8,"form",5),U("ngSubmit",function(){return K(r),Y(n.onSubmit())}),u(9,"div",6)(10,"div",7),U("click",function(){K(r);let s=ua(15);return Y(s.click())})("dragenter",function(s){return K(r),Y(n.handleDrag(s))})("dragover",function(s){return K(r),Y(n.handleDrag(s))})("dragleave",function(s){return K(r),Y(n.handleDrag(s))})("drop",function(s){return K(r),Y(n.handleDrop(s))}),u(11,"div",8),ee(12,Qee,1,1,"img",9)(13,Jee,6,0,"div",10),f(),u(14,"input",11,0),U("change",function(s){return K(r),Y(n.onFileChange(s))}),f()(),ee(16,Zee,2,1,"div",12),u(17,"p",13),m(18),f()(),u(19,"div",14)(20,"div",15)(21,"label",16),m(22,"Ad\u0131 Soyad\u0131"),f(),u(23,"div",17),k(24,"i",18)(25,"input",19),f(),ee(26,tte,2,1,"div",12),f(),u(27,"div",15)(28,"label",20),m(29,"Cep Telefonu"),f(),u(30,"div",17),k(31,"i",21)(32,"input",22),f()(),u(33,"div",15)(34,"label",23),m(35,"Email"),f(),u(36,"div",17),k(37,"i",24)(38,"input",25),f(),ee(39,rte,3,2,"div",12),f(),u(40,"div",15)(41,"label",26),m(42,"\u015Eifre"),f(),u(43,"div",17),k(44,"i",27)(45,"input",28),u(46,"button",29),U("click",function(){return K(r),Y(n.togglePassword())}),k(47,"i"),f()(),ee(48,ate,3,2,"div",12)(49,lte,5,2,"div",30),f(),u(50,"div",15)(51,"label",31),m(52,"\xD6\u011Fretmen Se\xE7imi"),f(),u(53,"div",17),k(54,"i",18),u(55,"select",32)(56,"option",33),m(57),f(),ee(58,cte,2,3,"option",34),f(),ee(59,dte,2,1,"div",35),f(),ee(60,hte,2,1,"div",12),f()(),u(61,"div",36)(62,"button",37),ee(63,fte,2,0,"span",38)(64,gte,2,0,"span",38)(65,pte,1,0,"div",39),f(),u(66,"button",40),U("click",function(){return K(r),Y(n.navigateToLogin())}),m(67," \xD6\u011Frenci Giri\u015Fi "),f()()()()(),u(68,"div",41)(69,"div",42)(70,"div",43),k(71,"i"),f(),u(72,"div",44)(73,"h4"),m(74),f(),u(75,"p"),m(76),f()()()()}if(t&2){let r;x(8),S("formGroup",n.registrationForm),x(2),xe("drag-active",n.isDragActive),x(2),S("ngIf",n.previewUrl),x(),S("ngIf",!n.previewUrl),x(3),S("ngIf",n.avatarError),x(2),W(n.previewUrl?"De\u011Fi\u015Ftirmek i\xE7in t\u0131klay\u0131n":"Profil avatar\u0131n\u0131z\u0131 y\xFCkleyin"),x(8),S("ngIf",n.submitted&&n.f.adi_soyadi.errors),x(13),S("ngIf",n.submitted&&n.f.email.errors),x(6),S("type",n.showPassword?"text":"password"),x(2),ei(n.showPassword?"bi bi-eye-slash":"bi bi-eye"),x(),S("ngIf",n.submitted&&n.f.sifre.errors),x(),S("ngIf",(r=n.registrationForm.get("sifre"))==null?null:r.value),x(6),S("disabled",n.isLoadingTeachers),x(2),he(" ",n.isLoadingTeachers?"\xD6\u011Fretmenler y\xFCkleniyor...":"\xD6\u011Fretmen se\xE7iniz..."," "),x(),S("ngForOf",n.teachers)("ngForTrackBy",n.trackByTeacherId),x(),S("ngIf",!n.isLoadingTeachers),x(),S("ngIf",n.submitted&&n.f.ogretmeni.errors),x(2),S("disabled",n.isSubmitting||!n.selectedFile),x(),S("ngIf",!n.isSubmitting),x(),S("ngIf",n.isSubmitting),x(),S("ngIf",n.isSubmitting),x(3),xe("visible",n.showToast)("hidden",!n.showToast),x(2),S("ngClass",n.toastType),x(),ei(n.toastType==="success"?"bi bi-check-circle":"bi bi-x-circle"),x(3),W(n.toastTitle),x(2),W(n.toastMessage)}},dependencies:[ma,yt,lt,$r,Kn,Yn,rn,qn,fn,Gr,ba,Ca],styles:[`[_nghost-%COMP%]{display:block;height:100%}.registration-container[_ngcontent-%COMP%]{min-height:100vh;width:100%;display:flex;align-items:center;justify-content:center;padding:3rem 1rem;background-image:url(/header/header-1.png);background-size:cover;background-position:center;background-repeat:no-repeat;position:relative}.overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background-color:#29303c80;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.form-container[_ngcontent-%COMP%]{position:relative;z-index:10;width:100%;max-width:28rem;background-color:#ffffff1a;-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);border:1px solid rgba(255,255,255,.2);border-radius:.5rem;box-shadow:0 10px 25px #0003;padding:2rem}.form-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem}.form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#fff;text-shadow:0 1px 3px rgba(0,0,0,.3)}.form-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fffc;font-size:.875rem;margin-top:.25rem}.avatar-upload[_ngcontent-%COMP%]{margin-bottom:1.5rem;display:flex;flex-direction:column;align-items:center}.avatar-container[_ngcontent-%COMP%]{width:7rem;height:7rem;border-radius:50%;cursor:pointer;overflow:hidden;border:1px solid rgba(255,255,255,.2);background-color:#ffffff1a;transition:all .3s ease}.avatar-container[_ngcontent-%COMP%]:hover{border-color:#f60;background-color:#fff3}.avatar-container.drag-active[_ngcontent-%COMP%]{border:2px solid #ff6600;background-color:#fff3}.avatar-preview[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}.avatar-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.avatar-placeholder[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%}.avatar-placeholder[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem;color:#fff9;margin-bottom:.25rem}.avatar-placeholder[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fffc;font-size:.875rem}.avatar-placeholder[_ngcontent-%COMP%]   .drag-text[_ngcontent-%COMP%]{font-size:.625rem;color:#fff9;margin-top:.25rem}.avatar-help-text[_ngcontent-%COMP%]{margin-top:.5rem;font-size:.75rem;color:#fff9}.form-fields[_ngcontent-%COMP%]{margin-bottom:1.5rem;display:flex;flex-direction:column;gap:1rem}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:#fff}.input-with-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:.75rem;top:50%;transform:translateY(-50%);color:#fff9;pointer-events:none}.input-with-icon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.625rem .75rem .625rem 2.5rem;background-color:#ffffff1a;border:1px solid rgba(255,255,255,.2);color:#fff;border-radius:.5rem;font-size:.875rem;transition:all .3s ease}.input-with-icon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#f60;box-shadow:0 0 0 3px #ff660080}.input-with-icon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#fff9}.password-toggle[_ngcontent-%COMP%]{position:absolute;right:.75rem;top:50%;transform:translateY(-50%);background:none;border:none;color:#fff9;cursor:pointer;transition:color .3s ease}.password-toggle[_ngcontent-%COMP%]:hover{color:#fff}.error-message[_ngcontent-%COMP%]{font-size:.75rem;color:#ff4d4f;margin-top:.25rem;min-height:1rem}.password-strength[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem;margin-top:.25rem}.strength-bar[_ngcontent-%COMP%]{height:.25rem;flex:1;background-color:#fff3;border-radius:9999px;overflow:hidden}.strength-fill[_ngcontent-%COMP%]{height:100%;border-radius:9999px;width:25%;background-color:#ff4d4f;transition:all .3s ease}.strength-fill.weak[_ngcontent-%COMP%]{width:33%;background-color:#ff4d4f}.strength-fill.medium[_ngcontent-%COMP%]{width:50%;background-color:#faad14}.strength-fill.strong[_ngcontent-%COMP%]{width:75%;background-color:#1890ff}.strength-fill.very-strong[_ngcontent-%COMP%]{width:100%;background-color:#52c41a}.strength-label[_ngcontent-%COMP%]{font-size:.75rem;color:#ffffffb3}.form-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem;padding-top:.5rem}.primary-button[_ngcontent-%COMP%], .secondary-button[_ngcontent-%COMP%]{width:100%;padding:.625rem;border-radius:.5rem;font-weight:500;font-size:.875rem;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s ease;color:#fff}.primary-button[_ngcontent-%COMP%]{background-color:#f60;border:none}.primary-button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#ff6600e6}.primary-button[_ngcontent-%COMP%]:active:not(:disabled){background-color:#e65c00}.primary-button[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.secondary-button[_ngcontent-%COMP%]{background-color:#29303c;border:none}.secondary-button[_ngcontent-%COMP%]:hover{background-color:#29303ce6}.secondary-button[_ngcontent-%COMP%]:active{background-color:#1f242d}.toast[_ngcontent-%COMP%]{position:fixed;bottom:2rem;right:2rem;background-color:#fff;border-radius:.5rem;box-shadow:0 5px 15px #0003;min-width:18rem;max-width:24rem;z-index:1000;opacity:0;transform:translateY(1rem);transition:all .3s ease}.toast.visible[_ngcontent-%COMP%]{opacity:1;transform:translateY(0)}.toast-content[_ngcontent-%COMP%]{display:flex;align-items:flex-start;padding:1rem}.toast-icon[_ngcontent-%COMP%]{flex-shrink:0;margin-right:.75rem;width:1.5rem;height:1.5rem;display:flex;align-items:center;justify-content:center;border-radius:50%}.toast-icon.success[_ngcontent-%COMP%]{background-color:#52c41a26;color:#52c41a}.toast-icon.error[_ngcontent-%COMP%]{background-color:#ff4d4f26;color:#ff4d4f}.toast-message[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#333;font-size:.875rem;font-weight:600;margin-bottom:.25rem}.toast-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:.75rem}.spinner[_ngcontent-%COMP%]{width:1rem;height:1rem;border:2px solid rgba(255,255,255,.3);border-radius:50%;border-top-color:#fff;animation:_ngcontent-%COMP%_spin .8s linear infinite;margin-left:.5rem}@media (max-width: 640px){.form-container[_ngcontent-%COMP%]{padding:1.5rem}.toast[_ngcontent-%COMP%]{left:1rem;right:1rem;bottom:1rem;min-width:auto}}.register-container[_ngcontent-%COMP%]{position:relative;min-height:100vh;display:flex;justify-content:center;align-items:center;background-image:url(/assets/images/chemistry-bg.jpg);background-size:cover;background-position:center;color:#fff;padding:40px 20px}.overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#0009}.form-container[_ngcontent-%COMP%]{position:relative;background:#232323d9;border-radius:8px;padding:40px;width:100%;max-width:550px;box-shadow:0 4px 20px #0000004d;z-index:1}.form-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:10px;color:#fff}.form-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#ccc;font-size:.9rem}.form-fields[_ngcontent-%COMP%]{margin-bottom:25px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-size:.9rem;color:#eee}.input-with-icon[_ngcontent-%COMP%]{position:relative}.input-with-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:15px;top:50%;transform:translateY(-50%);color:#aaa}.input-with-icon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .input-with-icon[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:12px 15px 12px 40px;border:1px solid rgba(255,255,255,.1);border-radius:4px;background:#ffffff14;color:#fff;transition:all .3s}.input-with-icon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .input-with-icon[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#f70;background:#ffffff1f}.input-with-icon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder, .input-with-icon[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]::placeholder{color:#999}.input-with-icon[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{appearance:none;background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="white" viewBox="0 0 16 16"><path d="M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"/></svg>');background-repeat:no-repeat;background-position:calc(100% - 12px) center}.input-with-icon[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background-color:#333;color:#fff}.input-with-icon[_ngcontent-%COMP%]   .password-toggle[_ngcontent-%COMP%]{position:absolute;right:10px;top:50%;transform:translateY(-50%);background:none;border:none;color:#aaa;cursor:pointer}.input-with-icon[_ngcontent-%COMP%]   .password-toggle[_ngcontent-%COMP%]:hover{color:#fff}.error-message[_ngcontent-%COMP%]{color:#f55;font-size:.8rem;margin-top:5px}.error-message[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block}.avatar-upload[_ngcontent-%COMP%]{margin-bottom:20px}.avatar-upload[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:10px;font-size:.9rem;color:#eee}.dropzone[_ngcontent-%COMP%]{border:2px dashed rgba(255,255,255,.3);border-radius:6px;padding:20px;text-align:center;cursor:pointer;transition:all .3s ease;margin-bottom:10px}.dropzone.active[_ngcontent-%COMP%]{border-color:#f70;background:#ff77001a}.dropzone[_ngcontent-%COMP%]   .upload-icon[_ngcontent-%COMP%]{font-size:32px;color:#ccc;margin-bottom:10px}.dropzone[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#ccc;font-size:.9rem}.dropzone[_ngcontent-%COMP%]   .upload-hint[_ngcontent-%COMP%]{font-size:.8rem;color:#999;margin-top:5px}.avatar-preview[_ngcontent-%COMP%]{margin-top:15px;text-align:center}.avatar-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;object-fit:cover;border:2px solid rgba(255,255,255,.2)}.form-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:relative;padding:12px;border:none;border-radius:4px;font-weight:600;cursor:pointer;transition:all .3s}.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.form-actions[_ngcontent-%COMP%]   .primary-button[_ngcontent-%COMP%]{background:#f70;color:#fff}.form-actions[_ngcontent-%COMP%]   .primary-button[_ngcontent-%COMP%]:hover:not(:disabled){background:#ff8c24}.form-actions[_ngcontent-%COMP%]   .secondary-button[_ngcontent-%COMP%]{background:#ffffff1a;color:#fff}.form-actions[_ngcontent-%COMP%]   .secondary-button[_ngcontent-%COMP%]:hover{background:#fff3}.form-actions[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{display:inline-block;width:18px;height:18px;margin-left:10px;border:2px solid rgba(255,255,255,.3);border-radius:50%;border-top-color:#fff;animation:_ngcontent-%COMP%_spin .8s linear infinite;vertical-align:middle}.toast[_ngcontent-%COMP%]{position:fixed;bottom:30px;right:30px;padding:16px;border-radius:6px;box-shadow:0 4px 8px #7c7c7c4d;background:#333;min-width:300px;max-width:400px;z-index:1000;transform:translateY(100px);opacity:0;visibility:hidden;transition:all .3s ease}.toast.visible[_ngcontent-%COMP%]{transform:translateY(0);opacity:1;visibility:visible}.toast.hidden[_ngcontent-%COMP%]{transform:translateY(100px);opacity:0;visibility:hidden}.toast-content[_ngcontent-%COMP%]{display:flex;align-items:flex-start}.toast-icon[_ngcontent-%COMP%]{margin-right:12px;font-size:24px}.toast-icon.success[_ngcontent-%COMP%]{color:#29303c}.toast-icon.error[_ngcontent-%COMP%]{color:#f44336}.toast-message[_ngcontent-%COMP%]{flex:1}.toast-message[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 5px;font-size:16px;color:#fff}.toast-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px;color:#ddd}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}@media (max-width: 576px){.form-container[_ngcontent-%COMP%]{padding:25px;margin:0 15px}.toast[_ngcontent-%COMP%]{left:15px;right:15px;bottom:15px;min-width:auto}}`]})};var cC=class i{constructor(e){this.router=e}ngOnInit(){}navigateToLogin(){this.router.navigate(["/giris-sayfasi"])}navigateToHome(){this.router.navigate(["/index-sayfasi"])}static \u0275fac=function(t){return new(t||i)(ke(an))};static \u0275cmp=Ke({type:i,selectors:[["app-ogrenci-onay-sayfasi"]],standalone:!1,decls:15,vars:0,consts:[[1,"confirmation-container"],[1,"confirmation-content"],[1,"confirmation-icon"],[1,"bi","bi-check-circle-fill"],[1,"button-group"],[1,"primary-button",3,"click"],[1,"secondary-button",3,"click"]],template:function(t,n){t&1&&(u(0,"div",0)(1,"div",1)(2,"div",2),k(3,"i",3),f(),u(4,"h1"),m(5,"Kay\u0131t Ba\u015Far\u0131l\u0131!"),f(),u(6,"p"),m(7,"Kimya \xD6\u011Freniyorum platformuna kayd\u0131n\u0131z ba\u015Far\u0131yla tamamland\u0131."),f(),u(8,"p"),m(9,"Hesab\u0131n\u0131z onayland\u0131ktan sonra giri\u015F yapabilirsiniz."),f(),u(10,"div",4)(11,"button",5),U("click",function(){return n.navigateToLogin()}),m(12,"Giri\u015F Yap"),f(),u(13,"button",6),U("click",function(){return n.navigateToHome()}),m(14,"Ana Sayfaya D\xF6n"),f()()()())},styles:[".confirmation-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background-color:#f5f5f5;padding:20px}.confirmation-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 4px 15px #0000001a;padding:40px;text-align:center;max-width:600px;width:100%}.confirmation-icon[_ngcontent-%COMP%]{font-size:80px;color:#4caf50;margin-bottom:20px}h1[_ngcontent-%COMP%]{font-size:28px;color:#333;margin-bottom:20px}p[_ngcontent-%COMP%]{font-size:16px;color:#666;line-height:1.5;margin-bottom:10px}.button-group[_ngcontent-%COMP%]{margin-top:30px;display:flex;justify-content:center;gap:15px}.primary-button[_ngcontent-%COMP%], .secondary-button[_ngcontent-%COMP%]{padding:12px 24px;border-radius:4px;font-weight:500;cursor:pointer;transition:all .3s ease;border:none}.primary-button[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.primary-button[_ngcontent-%COMP%]:hover{background-color:#45a049}.secondary-button[_ngcontent-%COMP%]{background-color:#f5f5f5;color:#333;border:1px solid #ddd}.secondary-button[_ngcontent-%COMP%]:hover{background-color:#e8e8e8}@media (max-width: 768px){.button-group[_ngcontent-%COMP%]{flex-direction:column}.primary-button[_ngcontent-%COMP%], .secondary-button[_ngcontent-%COMP%]{width:100%;margin-bottom:10px}}"]})};function mte(i,e){i&1&&(u(0,"span",32),m(1,"Kimya\xD6\u011Freni"),f())}function xte(i,e){i&1&&(u(0,"div",33),m(1,"Ana Men\xFC"),f())}function _te(i,e){i&1&&(u(0,"span",34),m(1,"Dashboard"),f())}function vte(i,e){i&1&&(u(0,"span",34),m(1,"Dersler"),f())}function bte(i,e){i&1&&(u(0,"span",34),m(1,"Raporlar"),f())}function Cte(i,e){i&1&&(u(0,"div",10)(1,"div",33),m(2,"Kullan\u0131c\u0131 Y\xF6netimi"),f(),u(3,"a",35),k(4,"i",36),u(5,"span",34),m(6,"\xD6\u011Frenci Listesi"),f()(),u(7,"a",37),k(8,"i",38),u(9,"span",34),m(10,"\xD6\u011Frenci Gruplar\u0131"),f()(),u(11,"a",39),k(12,"i",40),u(13,"span",34),m(14,"\xD6\u011Fretmenler"),f()(),u(15,"a",41),k(16,"i",42),u(17,"span",34),m(18,"\xDCcretler"),f()()())}function yte(i,e){i&1&&(u(0,"div",10)(1,"div",33),m(2,"Sistem"),f(),u(3,"a",43),k(4,"i",44),u(5,"span",34),m(6,"MySQL Ara\xE7lar\u0131"),f()()())}function wte(i,e){i&1&&(u(0,"span",45),m(1,"3"),f())}function Mte(i,e){if(i&1){let t=Ae();u(0,"div",46)(1,"button",47),k(2,"img",48),u(3,"div",49)(4,"div",50),m(5),f(),u(6,"div",51),m(7,"Y\xF6netici"),f()(),k(8,"i",52),f(),u(9,"ul",53)(10,"li")(11,"a",54),k(12,"i",55),m(13,"Profil"),f()(),u(14,"li")(15,"a",56),k(16,"i",57),m(17,"Ayarlar"),f()(),u(18,"li"),k(19,"div",58),f(),u(20,"li")(21,"a",59),U("click",function(){K(t);let r=F();return Y(r.logout())}),k(22,"i",60),m(23,"\xC7\u0131k\u0131\u015F"),f()()()()}if(i&2){let t=F();x(2),S("src",t.admin.avatar,vt),x(3),W(t.admin.adi_soyadi)}}var dC=class i{constructor(e,t){this.http=e;this.router=t;this.router.events.pipe(gr(n=>n instanceof To)).subscribe(()=>{this.updateCurrentPage(),this.windowWidth<992&&(this.sidebarExpanded=!1),this.closeAllDropdowns()})}sidebarExpanded=!0;admin={adi_soyadi:"",email:"",avatar:""};isLoading=!0;currentDate=new Date;currentPage="Dashboard";showNotifications=!1;showMessages=!1;showUserMenu=!1;isSettingsOpen=!1;isStudentsOpen=!1;windowWidth=window.innerWidth;ngOnInit(){this.checkWindowSize(),setInterval(()=>{this.currentDate=new Date},6e4);let e=localStorage.getItem("user");if(e||(e=sessionStorage.getItem("user")),!e){this.router.navigate(["/"]);return}try{let t=JSON.parse(e);if(t.rutbe!=="admin"){this.router.navigate(["/"]);return}this.admin={adi_soyadi:t.adi_soyadi||"Admin",email:t.email||"",avatar:t.avatar||"https://ui-avatars.com/api/?name="+encodeURIComponent(t.adi_soyadi||"Admin")+"&background=random"},this.isLoading=!1}catch{this.router.navigate(["/"])}this.updateCurrentPage()}onResize(e){this.windowWidth=e.target.innerWidth,this.checkWindowSize()}checkWindowSize(){this.windowWidth<992?this.sidebarExpanded=!1:this.sidebarExpanded=!0}submenuHeight=0;toggleSidebar(){this.sidebarExpanded=!this.sidebarExpanded,localStorage.setItem("sidebarExpanded",this.sidebarExpanded.toString())}toggleNotifications(){this.showNotifications=!this.showNotifications,this.showMessages=!1,this.showUserMenu=!1}toggleMessages(){this.showMessages=!this.showMessages,this.showNotifications=!1,this.showUserMenu=!1}toggleUserMenu(){this.showUserMenu=!this.showUserMenu,this.showNotifications=!1,this.showMessages=!1}toggleSettings(e){e&&e.preventDefault(),this.isSettingsOpen=!this.isSettingsOpen}toggleStudents(e){e&&e.preventDefault(),this.isStudentsOpen=!this.isStudentsOpen}getSubmenuHeight(){return 40*3}onDocumentClick(e){let t=e.target;!t.closest(".notification-dropdown")&&!t.closest(".message-dropdown")&&!t.closest(".admin-profile")&&this.closeAllDropdowns()}closeAllDropdowns(){this.showNotifications=!1,this.showMessages=!1,this.showUserMenu=!1}updateCurrentPage(){let e=this.router.url;e.includes("/ogrenci-liste-sayfasi")?this.currentPage="\xD6\u011Frenciler":e.includes("/teachers")?this.currentPage="\xD6\u011Fretmenler":e.includes("/konu-anlat\u0131m-sayfasi")?this.currentPage="Dersler":e.includes("/reports")?this.currentPage="Raporlar":e.includes("/settings")?this.currentPage="Ayarlar":e.includes("/mysql-sayfasi")?this.currentPage="MySQL Ara\xE7lar\u0131":this.currentPage="Dashboard"}logout(){localStorage.removeItem("user"),sessionStorage.removeItem("user"),this.router.navigate(["/"])}static \u0275fac=function(t){return new(t||i)(ke(gt),ke(an))};static \u0275cmp=Ke({type:i,selectors:[["app-yonetici-index-sayfasi"]],hostBindings:function(t,n){t&1&&U("resize",function(o){return n.onResize(o)},!1,ad)("click",function(o){return n.onDocumentClick(o)},!1,zF)},standalone:!1,decls:37,vars:21,consts:[[1,"app-container"],[1,"unified-sidebar"],[1,"sidebar-header"],[1,"brand"],[1,"brand-icon"],[1,"fas","fa-graduation-cap"],["class","brand-text",4,"ngIf"],[1,"sidebar-toggle",3,"click"],[1,"fas"],[1,"sidebar-nav"],[1,"nav-section"],["class","nav-section-title",4,"ngIf"],["routerLink","/yonetici-sayfasi",1,"nav-item","active"],[1,"nav-icon","fas","fa-tachometer-alt"],["class","nav-text",4,"ngIf"],["routerLink","/yonetici-sayfasi/konu-anlatim-sayfasi",1,"nav-item"],[1,"nav-icon","fas","fa-book"],["routerLink","/yonetici-sayfasi/reports",1,"nav-item"],[1,"nav-icon","fas","fa-chart-line"],["class","nav-section",4,"ngIf"],[1,"main-content"],[1,"unified-header"],[1,"header-left"],[1,"mobile-menu-btn",3,"click"],[1,"fas","fa-bars"],[1,"page-title"],[1,"header-right"],[1,"header-btn"],[1,"fas","fa-bell"],["class","notification-badge",4,"ngIf"],["class","user-menu dropdown",4,"ngIf"],[1,"content-area"],[1,"brand-text"],[1,"nav-section-title"],[1,"nav-text"],["routerLink","/yonetici-sayfasi/ogrenci-liste-sayfasi",1,"nav-item"],[1,"nav-icon","fas","fa-user-graduate"],["routerLink","/yonetici-sayfasi/ogrenci-gruplar",1,"nav-item"],[1,"nav-icon","fas","fa-users"],["routerLink","/yonetici-sayfasi/teachers",1,"nav-item"],[1,"nav-icon","fas","fa-chalkboard-teacher"],["routerLink","/yonetici-sayfasi/ogrenci-ucretler",1,"nav-item"],[1,"nav-icon","fas","fa-credit-card"],["routerLink","/yonetici-sayfasi/mysql-sayfasi",1,"nav-item"],[1,"nav-icon","fas","fa-database"],[1,"notification-badge"],[1,"user-menu","dropdown"],["data-bs-toggle","dropdown",1,"user-menu"],["alt","Avatar",1,"user-avatar",3,"src"],[1,"user-info","d-none","d-md-block"],[1,"user-name"],[1,"user-role"],[1,"fas","fa-chevron-down",2,"font-size","12px","color","var(--text-secondary)"],[1,"dropdown-menu","dropdown-menu-end"],["href","#profil",1,"dropdown-item"],[1,"fas","fa-user"],["href","#ayarlar",1,"dropdown-item"],[1,"fas","fa-cog"],[1,"dropdown-divider"],[1,"dropdown-item","danger",3,"click"],[1,"fas","fa-sign-out-alt"]],template:function(t,n){t&1&&(u(0,"div",0)(1,"aside",1)(2,"div",2)(3,"div",3)(4,"div",4),k(5,"i",5),f(),ee(6,mte,2,0,"span",6),f(),u(7,"button",7),U("click",function(){return n.toggleSidebar()}),k(8,"i",8),f()(),u(9,"nav",9)(10,"div",10),ee(11,xte,2,0,"div",11),u(12,"a",12),k(13,"i",13),ee(14,_te,2,0,"span",14),f(),u(15,"a",15),k(16,"i",16),ee(17,vte,2,0,"span",14),f(),u(18,"a",17),k(19,"i",18),ee(20,bte,2,0,"span",14),f()(),ee(21,Cte,19,0,"div",19)(22,yte,7,0,"div",19),f()(),u(23,"main",20)(24,"header",21)(25,"div",22)(26,"button",23),U("click",function(){return n.toggleSidebar()}),k(27,"i",24),f(),u(28,"h1",25),m(29,"Y\xF6netici Dashboard"),f()(),u(30,"div",26)(31,"button",27),k(32,"i",28),ee(33,wte,2,0,"span",29),f(),ee(34,Mte,24,2,"div",30),f()(),u(35,"div",31),k(36,"router-outlet"),f()()()),t&2&&(x(),xe("collapsed",!n.sidebarExpanded)("mobile-hidden",!n.sidebarExpanded),x(2),xe("collapsed",!n.sidebarExpanded),x(3),S("ngIf",n.sidebarExpanded),x(2),xe("fa-chevron-left",n.sidebarExpanded)("fa-chevron-right",!n.sidebarExpanded),x(3),S("ngIf",n.sidebarExpanded),x(3),S("ngIf",n.sidebarExpanded),x(3),S("ngIf",n.sidebarExpanded),x(3),S("ngIf",n.sidebarExpanded),x(),S("ngIf",n.sidebarExpanded),x(),S("ngIf",n.sidebarExpanded),x(),xe("sidebar-collapsed",!n.sidebarExpanded),x(10),S("ngIf",n.showNotifications),x(),S("ngIf",!n.isLoading))},dependencies:[lt,va,xi],styles:['.app-container[_ngcontent-%COMP%]{display:flex;min-height:100vh;background:var(--background-primary);font-family:var(--font-family);color:var(--text-primary);overflow-x:hidden}:[_nghost-%COMP%]{display:block;height:100vh;font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.unified-card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .6s ease forwards}.unified-card[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.unified-card[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.unified-card[_ngcontent-%COMP%]:nth-child(3){animation-delay:.3s}.stat-icon.admin-users[_ngcontent-%COMP%]{background:linear-gradient(135deg,#238636,#1a6b2b)}.stat-icon.admin-teachers[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1f6feb,#0969da)}.stat-icon.admin-courses[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d29922,#bf8700)}.stat-icon.admin-system[_ngcontent-%COMP%]{background:linear-gradient(135deg,#da3633,#b91c1c)}.admin-container[_ngcontent-%COMP%]{display:flex;height:100vh;overflow:hidden;background-color:#f8f9fa}.admin-container[_ngcontent-%COMP%]{display:flex;height:100vh;overflow:hidden}.sidebar[_ngcontent-%COMP%]{width:250px;height:100%;background-color:#2d3748;color:#fff;display:flex;flex-direction:column;transition:all .3s;overflow-y:auto;box-shadow:0 0 20px #0000001a;position:relative;z-index:100}.sidebar.toggled[_ngcontent-%COMP%]{width:60px}.sidebar.toggled[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .sidebar.toggled[_ngcontent-%COMP%]   .sidebar-footer[_ngcontent-%COMP%]{display:none}.sidebar.toggled[_ngcontent-%COMP%]   .sidebar-brand[_ngcontent-%COMP%]{justify-content:center;padding:10px 0}.sidebar.toggled[_ngcontent-%COMP%]   .submenu[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}.sidebar-brand[_ngcontent-%COMP%]{padding:15px;display:flex;align-items:center;justify-content:space-between;height:55px;border-bottom:1px solid rgba(255,255,255,.08)}.admin-avatar-logo[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;overflow:hidden;background-color:#4a5568;display:flex;align-items:center;justify-content:center}.admin-avatar-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.toggle-btn[_ngcontent-%COMP%]{background:none;border:none;color:#e2e8f0;cursor:pointer;font-size:16px;display:flex;align-items:center;justify-content:center;transition:all .3s ease;padding:0;width:30px;height:30px}.toggle-btn[_ngcontent-%COMP%]:hover{color:#63b3ed}.toggle-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transition:transform .3s ease}.sidebar-menu[_ngcontent-%COMP%]{flex:1;padding:10px 0}.sidebar-menu[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]{padding:0;margin:0;list-style:none;width:100%}.sidebar-menu[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{width:100%;margin:2px 0}.sidebar-menu[_ngcontent-%COMP%]   .nav-item.active[_ngcontent-%COMP%] > .nav-link[_ngcontent-%COMP%]{color:#63b3ed}.sidebar-menu[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{display:flex;align-items:center;padding:12px 15px;color:#e2e8f0;text-decoration:none;transition:all .3s ease;border-radius:6px;margin:0 8px;width:calc(100% - 16px);position:relative}.sidebar-menu[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{color:#63b3ed}.sidebar-menu[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:first-child{margin-right:12px;font-size:16px;min-width:20px;text-align:center}.sidebar-menu[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:500;letter-spacing:.2px;flex:1}.sidebar-menu[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   i.bi-chevron-up[_ngcontent-%COMP%], .sidebar-menu[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   i.bi-chevron-down[_ngcontent-%COMP%]{font-size:14px;margin-left:5px}.sidebar-menu[_ngcontent-%COMP%]   .nav-link.dropdown-toggle[_ngcontent-%COMP%]:after{display:none}.submenu-container[_ngcontent-%COMP%]{max-height:500px;overflow-y:auto}.submenu[_ngcontent-%COMP%]{list-style:none;padding:0 0 0 12px;margin:5px 8px;background-color:#3a4556;border-radius:6px;width:calc(100% - 16px)}.submenu[_ngcontent-%COMP%]   .submenu-item[_ngcontent-%COMP%]{padding:5px 0;width:100%}.submenu[_ngcontent-%COMP%]   .submenu-item.active[_ngcontent-%COMP%]   .submenu-link[_ngcontent-%COMP%]{color:#63b3ed}.submenu[_ngcontent-%COMP%]   .submenu-link[_ngcontent-%COMP%]{display:flex;align-items:center;padding:10px 15px;color:#e2e8f0;text-decoration:none;transition:all .3s ease;border-radius:6px;width:calc(100% - 30px)}.submenu[_ngcontent-%COMP%]   .submenu-link[_ngcontent-%COMP%]:hover{color:#63b3ed}.submenu[_ngcontent-%COMP%]   .submenu-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:10px;font-size:14px;min-width:16px;text-align:center}.submenu[_ngcontent-%COMP%]   .submenu-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:400}.sidebar-footer[_ngcontent-%COMP%]{padding:15px;border-top:1px solid rgba(255,255,255,.08);font-size:12px;background-color:#2a3140}.system-status[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:8px}.system-status[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:10px;font-size:12px}.system-status[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%]   .text-success[_ngcontent-%COMP%]{color:#68d391}.toggled[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{justify-content:center;padding:12px 0}.toggled[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:0;font-size:18px}.content-wrapper[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column;background-color:#f8f9fa;overflow:hidden;position:relative}.navbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background-color:#f8fafc;padding:0 1.8rem;height:55px;box-shadow:0 4px 15px #0000000d;z-index:99;position:relative;border-bottom:1px solid #e2e8f0;backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px)}.navbar-left[_ngcontent-%COMP%]{display:flex;align-items:center}.mobile-sidebar-toggle[_ngcontent-%COMP%]{display:none;background:none;border:none;font-size:1.5rem;cursor:pointer;color:#333;margin-right:1rem}.breadcrumb-wrapper[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{margin:0;padding:0;background:transparent;display:flex}.breadcrumb-wrapper[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]   .breadcrumb-item[_ngcontent-%COMP%]{display:inline-flex;align-items:center;font-size:.875rem;font-weight:500;position:relative}.breadcrumb-wrapper[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]   .breadcrumb-item[_ngcontent-%COMP%]:not(:first-child):before{content:"\\f105";font-family:"Font Awesome 5 Free";font-weight:900;color:#4299e1;padding:0 .7rem;font-size:.85rem}.breadcrumb-wrapper[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]   .breadcrumb-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#4a5568;text-decoration:none;padding:5px 10px;border-radius:20px;transition:all .2s}.breadcrumb-wrapper[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]   .breadcrumb-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#edf2f7;color:#4299e1}.breadcrumb-wrapper[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]   .breadcrumb-item.active[_ngcontent-%COMP%]{color:#4299e1;font-weight:600}.navbar-right[_ngcontent-%COMP%]{display:flex;align-items:center}.search-box[_ngcontent-%COMP%]{position:relative;margin-right:1.5rem}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.7rem 1.2rem .7rem 3rem;border:1px solid #e2e8f0;border-radius:100px;background-color:#f8fafc;font-size:.9rem;transition:all .3s ease;width:200px;box-shadow:0 2px 10px #00000008}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{width:250px;outline:none;border-color:#63b3ed;box-shadow:0 0 0 3px #63b3ed26;background-color:#fff}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#a0aec0}.search-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:1rem;top:50%;transform:translateY(-50%);color:#4a5568;font-size:1rem;pointer-events:none}.nav-item[_ngcontent-%COMP%]{position:relative;margin-right:1.2rem}.nav-item[_ngcontent-%COMP%]   .icon-container[_ngcontent-%COMP%]{position:relative;width:40px;height:40px;display:flex;align-items:center;justify-content:center;border-radius:50%;cursor:pointer;transition:all .3s ease;background-color:#edf2f7;border:1px solid #e2e8f0}.nav-item[_ngcontent-%COMP%]   .icon-container[_ngcontent-%COMP%]:hover{background-color:#e2e8f0;transform:translateY(-2px)}.nav-item[_ngcontent-%COMP%]   .icon-container[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{color:#4299e1}.nav-item[_ngcontent-%COMP%]   .icon-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem;color:#4a5568;transition:all .3s}.nav-item[_ngcontent-%COMP%]   .icon-container[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{position:absolute;top:-2px;right:-2px;background:#4299e1;color:#fff;font-size:.65rem;font-weight:600;width:20px;height:20px;border-radius:50%;display:flex;align-items:center;justify-content:center;border:2px solid #ffffff;box-shadow:0 2px 5px #0000001a}.dropdown-menu[_ngcontent-%COMP%]{position:absolute;right:0;top:100%;background-color:#fff;border-radius:.5rem;box-shadow:0 5px 15px #00000014;width:320px;margin-top:.5rem;z-index:1000;display:none;overflow:hidden;border:1px solid #edf2f7}.dropdown-menu.show[_ngcontent-%COMP%]{display:block;animation:_ngcontent-%COMP%_fadeIn .2s ease-in-out}.dropdown-menu[_ngcontent-%COMP%]   .dropdown-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem;border-bottom:1px solid #edf2f7;background-color:#f8fafc}.dropdown-menu[_ngcontent-%COMP%]   .dropdown-header[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin:0;font-weight:600;color:#2d3748;font-size:.95rem}.dropdown-menu[_ngcontent-%COMP%]   .dropdown-header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:.75rem;color:#4299e1;text-decoration:none}.dropdown-menu[_ngcontent-%COMP%]   .dropdown-header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.dropdown-menu[_ngcontent-%COMP%]   .dropdown-body[_ngcontent-%COMP%]{max-height:320px;overflow-y:auto}.dropdown-menu[_ngcontent-%COMP%]   .dropdown-body[_ngcontent-%COMP%]   .notification-item[_ngcontent-%COMP%], .dropdown-menu[_ngcontent-%COMP%]   .dropdown-body[_ngcontent-%COMP%]   .message-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.85rem 1rem;border-bottom:1px solid #edf2f7;text-decoration:none;color:#4a5568;transition:all .2s ease}.dropdown-menu[_ngcontent-%COMP%]   .dropdown-body[_ngcontent-%COMP%]   .notification-item[_ngcontent-%COMP%]:hover, .dropdown-menu[_ngcontent-%COMP%]   .dropdown-body[_ngcontent-%COMP%]   .message-item[_ngcontent-%COMP%]:hover{background-color:#f7fafc}.dropdown-menu[_ngcontent-%COMP%]   .dropdown-body[_ngcontent-%COMP%]   .notification-item[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;margin-right:1rem;flex-shrink:0}.dropdown-menu[_ngcontent-%COMP%]   .dropdown-body[_ngcontent-%COMP%]   .notification-item[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff;font-size:1rem}.dropdown-menu[_ngcontent-%COMP%]   .dropdown-body[_ngcontent-%COMP%]   .notification-item[_ngcontent-%COMP%]   .icon.bg-primary[_ngcontent-%COMP%]{background-color:#4299e1}.dropdown-menu[_ngcontent-%COMP%]   .dropdown-body[_ngcontent-%COMP%]   .notification-item[_ngcontent-%COMP%]   .icon.bg-success[_ngcontent-%COMP%]{background-color:#48bb78}.dropdown-menu[_ngcontent-%COMP%]   .dropdown-body[_ngcontent-%COMP%]   .notification-item[_ngcontent-%COMP%]   .icon.bg-warning[_ngcontent-%COMP%]{background-color:#ecc94b}.dropdown-menu[_ngcontent-%COMP%]   .dropdown-body[_ngcontent-%COMP%]   .notification-item[_ngcontent-%COMP%]   .icon.bg-danger[_ngcontent-%COMP%]{background-color:#f56565}.dropdown-menu[_ngcontent-%COMP%]   .dropdown-body[_ngcontent-%COMP%]   .notification-item[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{flex-grow:1}.dropdown-menu[_ngcontent-%COMP%]   .dropdown-body[_ngcontent-%COMP%]   .notification-item[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 .25rem;font-weight:500;color:#2d3748}.dropdown-menu[_ngcontent-%COMP%]   .dropdown-body[_ngcontent-%COMP%]   .notification-item[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.75rem;color:#718096}.dropdown-menu[_ngcontent-%COMP%]   .dropdown-body[_ngcontent-%COMP%]   .message-item[_ngcontent-%COMP%]   .sender-avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;overflow:hidden;margin-right:1rem;flex-shrink:0;border:1px solid #e2e8f0}.dropdown-menu[_ngcontent-%COMP%]   .dropdown-body[_ngcontent-%COMP%]   .message-item[_ngcontent-%COMP%]   .sender-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.dropdown-menu[_ngcontent-%COMP%]   .dropdown-body[_ngcontent-%COMP%]   .message-item[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{flex-grow:1}.dropdown-menu[_ngcontent-%COMP%]   .dropdown-body[_ngcontent-%COMP%]   .message-item[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin:0 0 .25rem;font-weight:600;font-size:.875rem;color:#2d3748}.dropdown-menu[_ngcontent-%COMP%]   .dropdown-body[_ngcontent-%COMP%]   .message-item[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 .25rem;font-size:.8125rem;color:#4a5568;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:220px}.dropdown-menu[_ngcontent-%COMP%]   .dropdown-body[_ngcontent-%COMP%]   .message-item[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.75rem;color:#718096}.dropdown-menu[_ngcontent-%COMP%]   .dropdown-footer[_ngcontent-%COMP%]{padding:.85rem 1rem;text-align:center;border-top:1px solid #edf2f7;background-color:#f8fafc}.dropdown-menu[_ngcontent-%COMP%]   .dropdown-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#4299e1;text-decoration:none;font-size:.875rem;font-weight:500}.dropdown-menu[_ngcontent-%COMP%]   .dropdown-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.admin-profile[_ngcontent-%COMP%]{position:relative}.admin-profile[_ngcontent-%COMP%]   .admin-info-header[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;padding:.5rem .75rem;border-radius:.5rem;transition:all .3s ease}.admin-profile[_ngcontent-%COMP%]   .admin-info-header[_ngcontent-%COMP%]:hover{background-color:#edf2f7}.admin-profile[_ngcontent-%COMP%]   .admin-info-header[_ngcontent-%COMP%]   .admin-name[_ngcontent-%COMP%]{margin-right:.75rem;font-weight:500;color:#2d3748;font-size:.9rem}.admin-profile[_ngcontent-%COMP%]   .admin-info-header[_ngcontent-%COMP%]   .admin-avatar[_ngcontent-%COMP%]{width:38px;height:38px;border-radius:50%;overflow:hidden;margin-right:.5rem;border:2px solid #4299e1;box-shadow:0 2px 5px #0000001a}.admin-profile[_ngcontent-%COMP%]   .admin-info-header[_ngcontent-%COMP%]   .admin-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.admin-profile[_ngcontent-%COMP%]   .admin-info-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.875rem;color:#718096}.admin-profile[_ngcontent-%COMP%]   .user-dropdown[_ngcontent-%COMP%]{position:absolute;right:0;top:100%;background-color:#fff;border-radius:.5rem;box-shadow:0 5px 15px #00000014;width:200px;margin-top:.5rem;z-index:1000;display:none;overflow:hidden;border:1px solid #edf2f7}.admin-profile[_ngcontent-%COMP%]   .user-dropdown.show[_ngcontent-%COMP%]{display:block;animation:_ngcontent-%COMP%_fadeIn .2s ease-in-out}.admin-profile[_ngcontent-%COMP%]   .user-dropdown[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{padding:.75rem 1rem;display:flex;align-items:center;color:#4a5568;text-decoration:none;transition:all .2s ease}.admin-profile[_ngcontent-%COMP%]   .user-dropdown[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.75rem;font-size:1rem;width:1.25rem;text-align:center}.admin-profile[_ngcontent-%COMP%]   .user-dropdown[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:hover{background-color:#f7fafc;color:#4299e1}.admin-profile[_ngcontent-%COMP%]   .user-dropdown[_ngcontent-%COMP%]   .dropdown-divider[_ngcontent-%COMP%]{height:0;margin:.5rem 0;overflow:hidden;border-top:1px solid #edf2f7}.dashboard-content[_ngcontent-%COMP%]{flex-grow:1;padding:1.8rem;overflow-y:auto;background-color:#f7fafc;background-image:radial-gradient(rgba(99,179,237,.02) 1px,transparent 1px);background-size:20px 20px}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 991px){.sidebar[_ngcontent-%COMP%]{position:fixed;left:0;top:0;height:100%;transform:translate(-100%);transition:transform .3s ease,width .3s ease;z-index:1040}.sidebar.collapsed[_ngcontent-%COMP%]{transform:translate(-100%)}.sidebar[_ngcontent-%COMP%]:not(.collapsed){transform:translate(0);width:260px}.mobile-sidebar-toggle[_ngcontent-%COMP%]{display:block}.search-box[_ngcontent-%COMP%], .admin-name[_ngcontent-%COMP%]{display:none}.content-wrapper[_ngcontent-%COMP%]{margin-left:0}}@media (max-width: 768px){.navbar[_ngcontent-%COMP%]{padding:.75rem 1rem}.breadcrumb-wrapper[_ngcontent-%COMP%]{display:none}.dropdown-menu[_ngcontent-%COMP%]{width:280px}.footer-content[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}.footer-content[_ngcontent-%COMP%]   .footer-links[_ngcontent-%COMP%]{gap:1rem}}@media (max-width: 576px){.dashboard-content[_ngcontent-%COMP%]{padding:1rem}.dropdown-menu[_ngcontent-%COMP%]{width:260px}.notification-item[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .message-item[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{max-width:180px}}[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px;height:6px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a8a8a8}@media (max-width: 991px){.admin-name[_ngcontent-%COMP%]{display:none}}@media (max-width: 768px){.search-box[_ngcontent-%COMP%], .breadcrumb-wrapper[_ngcontent-%COMP%]{display:none}}']})};var _S=i=>["/yonetici-sayfasi/ogrenci-detay-sayfasi",i],Ete=i=>["/yonetici-sayfasi/ogretmen-detay-sayfasi",i];function Pte(i,e){if(i&1){let t=Ae();u(0,"button",45),U("click",function(){K(t);let r=F();return Y(r.clearSearch())}),k(1,"i",46),f()}}function Ote(i,e){if(i&1&&(u(0,"span",47),m(1),f()),i&2){let t=F();x(),W(t.newUsers.length)}}function Ste(i,e){i&1&&(u(0,"span",76),m(1," Aktif "),f())}function kte(i,e){i&1&&(u(0,"span",77),m(1," Pasif "),f())}function Ate(i,e){if(i&1&&(u(0,"span",78),m(1),f()),i&2){let t=F().$implicit;x(),he(" ",t.grubu," ")}}function Dte(i,e){if(i&1&&(u(0,"div",79),k(1,"i",80),m(2),f()),i&2){let t=F().$implicit;x(2),he(" ",t.ders_gunu," ")}}function Fte(i,e){if(i&1&&(u(0,"div",79),k(1,"i",81),m(2),f()),i&2){let t=F().$implicit;x(2),he(" ",t.ders_saati," ")}}function Ite(i,e){if(i&1&&(u(0,"div",79),k(1,"i",82),m(2),f()),i&2){let t=F().$implicit;x(2),he(" ",t.ucret," ")}}function Tte(i,e){if(i&1){let t=Ae();u(0,"tr")(1,"td"),ee(2,Ste,2,0,"span",64)(3,kte,2,0,"span",65),f(),u(4,"td"),m(5),f(),u(6,"td"),k(7,"img",66),f(),u(8,"td",67),m(9),f(),u(10,"td"),m(11),f(),u(12,"td"),m(13),f(),u(14,"td"),m(15),f(),u(16,"td"),m(17),f(),u(18,"td"),ee(19,Ate,2,1,"span",68),f(),u(20,"td"),m(21),f(),u(22,"td")(23,"div",69),ee(24,Dte,3,1,"div",70)(25,Fte,3,1,"div",70)(26,Ite,3,1,"div",70),f()(),u(27,"td")(28,"div",71)(29,"a",72),k(30,"i",73),m(31," D\xFCzenle "),f(),u(32,"button",74),U("click",function(){let r=K(t).$implicit,o=F(2);return Y(o.deleteStudent(r.id))}),k(33,"i",75),m(34," Sil "),f()()()()}if(i&2){let t=e.$implicit;x(2),S("ngIf",t.aktif),x(),S("ngIf",!t.aktif),x(2),W(t.id),x(2),S("src",t.avatar||"https://ui-avatars.com/api/?name="+t.adi_soyadi+"&background=random",vt),x(2),W(t.adi_soyadi),x(2),W(t.email),x(2),W(t.cep_telefonu||"Belirtilmemi\u015F"),x(2),W(t.okulu||"Belirtilmemi\u015F"),x(2),W(t.sinifi||"Belirtilmemi\u015F"),x(2),S("ngIf",t.grubu),x(2),W(t.ogretmeni||"Belirtilmemi\u015F"),x(3),S("ngIf",t.ders_gunu),x(),S("ngIf",t.ders_saati),x(),S("ngIf",t.ucret),x(3),S("routerLink",Do(15,_S,t.id))}}function Bte(i,e){i&1&&(u(0,"tr")(1,"td",83)(2,"div",84)(3,"div",85),k(4,"i",86),f(),u(5,"p"),m(6,"Hen\xFCz \xF6\u011Frenci bulunamad\u0131."),f()()()())}function Nte(i,e){i&1&&(u(0,"span",104),m(1,"Aktif"),f())}function Lte(i,e){i&1&&(u(0,"span",105),m(1,"Pasif"),f())}function Rte(i,e){if(i&1&&(u(0,"span",78),m(1),f()),i&2){let t=F().$implicit;x(),he(" ",t.grubu," ")}}function zte(i,e){if(i&1&&(u(0,"div",5),k(1,"i",80),m(2),f()),i&2){let t=F().$implicit;x(2),he(" ",t.ders_gunu," ")}}function jte(i,e){if(i&1&&(u(0,"div",5),k(1,"i",81),m(2),f()),i&2){let t=F().$implicit;x(2),he(" ",t.ders_saati," ")}}function Vte(i,e){if(i&1&&(u(0,"div",5),k(1,"i",82),m(2),f()),i&2){let t=F().$implicit;x(2),he(" ",t.ucret," ")}}function Ute(i,e){i&1&&(u(0,"span",106),m(1," Belirtilmemi\u015F "),f())}function Hte(i,e){if(i&1){let t=Ae();u(0,"div",87)(1,"div",4)(2,"div",88),k(3,"img",89),u(4,"div",90)(5,"div",5)(6,"h6",91),m(7),f(),ee(8,Nte,2,0,"span",92)(9,Lte,2,0,"span",93),f(),u(10,"p",94),m(11),f(),ee(12,Rte,2,1,"span",68),f()(),u(13,"div",95)(14,"div",96)(15,"div",97)(16,"div",98),m(17,"Telefon"),f(),u(18,"div"),m(19),f()()(),u(20,"div",96)(21,"div",97)(22,"div",98),m(23,"Okul"),f(),u(24,"div",99),m(25),f()()(),u(26,"div",96)(27,"div",97)(28,"div",98),m(29,"S\u0131n\u0131f"),f(),u(30,"div"),m(31),f()()(),u(32,"div",96)(33,"div",97)(34,"div",98),m(35,"Ders Bilgileri"),f(),u(36,"div",100),ee(37,zte,3,1,"div",101)(38,jte,3,1,"div",101)(39,Vte,3,1,"div",101)(40,Ute,2,0,"span",102),f()()()(),u(41,"div",103)(42,"a",72),k(43,"i",73),m(44," D\xFCzenle "),f(),u(45,"button",74),U("click",function(){let r=K(t).$implicit,o=F(2);return Y(o.deleteStudent(r.id))}),k(46,"i",75),m(47," Sil "),f()()()()}if(i&2){let t=e.$implicit;x(3),S("src",t.avatar||"https://ui-avatars.com/api/?name="+t.adi_soyadi+"&background=random",vt),x(4),W(t.adi_soyadi),x(),S("ngIf",t.aktif),x(),S("ngIf",!t.aktif),x(2),W(t.email),x(),S("ngIf",t.grubu),x(7),W(t.cep_telefonu||"Belirtilmemi\u015F"),x(6),W(t.okulu||"Belirtilmemi\u015F"),x(6),W(t.sinifi||"Belirtilmemi\u015F"),x(6),S("ngIf",t.ders_gunu),x(),S("ngIf",t.ders_saati),x(),S("ngIf",t.ucret),x(),S("ngIf",!t.ders_gunu&&!t.ders_saati&&!t.ucret),x(2),S("routerLink",Do(14,_S,t.id))}}function Gte(i,e){i&1&&(u(0,"div",107)(1,"div",84)(2,"div",85),k(3,"i",86),f(),u(4,"p"),m(5,"Hen\xFCz \xF6\u011Frenci bulunamad\u0131."),f()()())}function $te(i,e){if(i&1){let t=Ae();u(0,"li",117)(1,"button",122),U("click",function(){let r=K(t).$implicit,o=F(3);return Y(o.setStudentPage(r))}),m(2),f()()}if(i&2){let t=e.$implicit,n=F(3);xe("active",n.currentStudentPage===t),x(2),W(t)}}function Wte(i,e){if(i&1){let t=Ae();u(0,"div",108)(1,"div",109)(2,"div",110),m(3," Toplam "),u(4,"span",67),m(5),f(),m(6," \xF6\u011Frenci, "),u(7,"span",67),m(8),f(),m(9," aras\u0131 g\xF6steriliyor "),u(10,"div",111)(11,"span",112),m(12,"G\xF6ster:"),f(),u(13,"select",113),at("ngModelChange",function(r){K(t);let o=F(2);return dt(o.itemsPerPage,r)||(o.itemsPerPage=r),Y(r)}),U("change",function(){K(t);let r=F(2);return Y(r.setStudentPage(1))}),u(14,"option",114),m(15,"5"),f(),u(16,"option",114),m(17,"10"),f(),u(18,"option",114),m(19,"15"),f()()()(),u(20,"nav",115)(21,"ul",116)(22,"li",117)(23,"button",118),U("click",function(){K(t);let r=F(2);return Y(r.setStudentPage(r.currentStudentPage-1))}),u(24,"span",119),m(25,"\xAB"),f()()(),ee(26,$te,3,3,"li",120),u(27,"li",117)(28,"button",121),U("click",function(){K(t);let r=F(2);return Y(r.setStudentPage(r.currentStudentPage+1))}),u(29,"span",119),m(30,"\xBB"),f()()()()()()()}if(i&2){let t=F(2);x(5),W(t.totalStudentCount),x(3),hn("",(t.currentStudentPage-1)*t.itemsPerPage+1,"-",t.Math.min(t.currentStudentPage*t.itemsPerPage,t.totalStudentCount),""),x(5),st("ngModel",t.itemsPerPage),x(),S("value",5),x(2),S("value",10),x(2),S("value",15),x(4),xe("disabled",t.currentStudentPage===1),x(4),S("ngForOf",t.getStudentPageArray()),x(),xe("disabled",t.currentStudentPage===t.totalStudentPages)}}function qte(i,e){if(i&1&&(u(0,"div",48)(1,"div",49)(2,"div")(3,"h5",50),m(4,"\xD6\u011Frenci Listesi"),f(),u(5,"p",51),m(6),f()(),u(7,"a",52),k(8,"i",53),m(9," Yeni \xD6\u011Frenci "),f()(),u(10,"div",54)(11,"table",55)(12,"thead",56)(13,"tr")(14,"th",57),m(15,"Durum"),f(),u(16,"th",57),m(17,"ID"),f(),u(18,"th",57),m(19,"Avatar"),f(),u(20,"th",57),m(21,"Ad Soyad"),f(),u(22,"th",57),m(23,"Email"),f(),u(24,"th",57),m(25,"Telefon"),f(),u(26,"th",57),m(27,"Okul"),f(),u(28,"th",57),m(29,"S\u0131n\u0131f"),f(),u(30,"th",57),m(31,"Grup"),f(),u(32,"th",57),m(33,"\xD6\u011Fretmeni"),f(),u(34,"th",57),m(35,"Ders Bilgileri"),f(),u(36,"th",57),m(37,"\u0130\u015Flemler"),f()()(),u(38,"tbody"),ee(39,Tte,35,17,"tr",58)(40,Bte,7,0,"tr",59),f()()(),u(41,"div",60),ee(42,Hte,48,16,"div",61)(43,Gte,6,0,"div",62),f(),ee(44,Wte,31,12,"div",63),f()),i&2){let t=F();x(6),he("Toplam ",t.totalStudentCount," \xF6\u011Frenci"),x(33),S("ngForOf",t.paginatedStudents),x(),S("ngIf",t.students.length===0),x(2),S("ngForOf",t.paginatedStudents),x(),S("ngIf",t.students.length===0),x(),S("ngIf",t.students.length>0)}}function Kte(i,e){i&1&&(u(0,"span",76),m(1," Aktif "),f())}function Yte(i,e){i&1&&(u(0,"span",77),m(1," Pasif "),f())}function Xte(i,e){if(i&1&&(u(0,"span",126),m(1),f()),i&2){let t=F().$implicit;x(),he(" ",t.brans," ")}}function Qte(i,e){i&1&&(u(0,"span",110),m(1," Belirtilmemi\u015F "),f())}function Jte(i,e){if(i&1){let t=Ae();u(0,"tr")(1,"td"),ee(2,Kte,2,0,"span",64)(3,Yte,2,0,"span",65),f(),u(4,"td"),m(5),f(),u(6,"td"),k(7,"img",66),f(),u(8,"td",67),m(9),f(),u(10,"td"),m(11),f(),u(12,"td"),m(13),f(),u(14,"td"),ee(15,Xte,2,1,"span",124)(16,Qte,2,0,"span",125),f(),u(17,"td")(18,"div",71)(19,"a",72),k(20,"i",73),m(21," D\xFCzenle "),f(),u(22,"button",74),U("click",function(){let r=K(t).$implicit,o=F(2);return Y(o.deleteTeacher(r.id))}),k(23,"i",75),m(24," Sil "),f()()()()}if(i&2){let t=e.$implicit;x(2),S("ngIf",t.aktif),x(),S("ngIf",!t.aktif),x(2),W(t.id),x(2),S("src",t.avatar||"https://ui-avatars.com/api/?name="+t.adi_soyadi+"&background=random",vt),x(2),W(t.adi_soyadi),x(2),W(t.email),x(2),W(t.cep_telefonu||"Belirtilmemi\u015F"),x(2),S("ngIf",t.brans),x(),S("ngIf",!t.brans),x(3),S("routerLink",Do(10,_S,t.id))}}function Zte(i,e){i&1&&(u(0,"tr")(1,"td",127)(2,"div",84)(3,"div",85),k(4,"i",128),f(),u(5,"p"),m(6,"Hen\xFCz \xF6\u011Fretmen bulunamad\u0131."),f()()()())}function ene(i,e){i&1&&(u(0,"span",104),m(1,"Aktif"),f())}function tne(i,e){i&1&&(u(0,"span",105),m(1,"Pasif"),f())}function nne(i,e){if(i&1&&(u(0,"span",126),m(1),f()),i&2){let t=F().$implicit;x(),he(" ",t.brans," ")}}function ine(i,e){if(i&1){let t=Ae();u(0,"div",87)(1,"div",4)(2,"div",88),k(3,"img",89),u(4,"div",90)(5,"div",5)(6,"h6",91),m(7),f(),ee(8,ene,2,0,"span",92)(9,tne,2,0,"span",93),f(),u(10,"p",94),m(11),f(),ee(12,nne,2,1,"span",124),f()(),u(13,"div",95)(14,"div",96)(15,"div",97)(16,"div",98),m(17,"Telefon"),f(),u(18,"div"),m(19),f()()()(),u(20,"div",103)(21,"a",72),k(22,"i",73),m(23," D\xFCzenle "),f(),u(24,"button",74),U("click",function(){let r=K(t).$implicit,o=F(2);return Y(o.deleteTeacher(r.id))}),k(25,"i",75),m(26," Sil "),f()()()()}if(i&2){let t=e.$implicit;x(3),S("src",t.avatar||"https://ui-avatars.com/api/?name="+t.adi_soyadi+"&background=random",vt),x(4),W(t.adi_soyadi),x(),S("ngIf",t.aktif),x(),S("ngIf",!t.aktif),x(2),W(t.email),x(),S("ngIf",t.brans),x(7),W(t.cep_telefonu||"Belirtilmemi\u015F"),x(2),S("routerLink",Do(8,Ete,t.id))}}function rne(i,e){i&1&&(u(0,"div",107)(1,"div",84)(2,"div",85),k(3,"i",128),f(),u(4,"p"),m(5,"Hen\xFCz \xF6\u011Fretmen bulunamad\u0131."),f()()())}function one(i,e){if(i&1){let t=Ae();u(0,"li",117)(1,"button",122),U("click",function(){let r=K(t).$implicit,o=F(3);return Y(o.setTeacherPage(r))}),m(2),f()()}if(i&2){let t=e.$implicit,n=F(3);xe("active",n.currentTeacherPage===t),x(2),W(t)}}function sne(i,e){if(i&1){let t=Ae();u(0,"div",108)(1,"div",109)(2,"div",110),m(3," Toplam "),u(4,"span",67),m(5),f(),m(6," \xF6\u011Fretmen, "),u(7,"span",67),m(8),f(),m(9," aras\u0131 g\xF6steriliyor "),u(10,"div",111)(11,"span",112),m(12,"G\xF6ster:"),f(),u(13,"select",113),at("ngModelChange",function(r){K(t);let o=F(2);return dt(o.itemsPerPage,r)||(o.itemsPerPage=r),Y(r)}),U("change",function(){K(t);let r=F(2);return Y(r.setTeacherPage(1))}),u(14,"option",114),m(15,"5"),f(),u(16,"option",114),m(17,"10"),f(),u(18,"option",114),m(19,"15"),f()()()(),u(20,"nav",115)(21,"ul",116)(22,"li",117)(23,"button",118),U("click",function(){K(t);let r=F(2);return Y(r.setTeacherPage(r.currentTeacherPage-1))}),u(24,"span",119),m(25,"\xAB"),f()()(),ee(26,one,3,3,"li",120),u(27,"li",117)(28,"button",121),U("click",function(){K(t);let r=F(2);return Y(r.setTeacherPage(r.currentTeacherPage+1))}),u(29,"span",119),m(30,"\xBB"),f()()()()()()()}if(i&2){let t=F(2);x(5),W(t.totalTeacherCount),x(3),hn("",(t.currentTeacherPage-1)*t.itemsPerPage+1,"-",t.Math.min(t.currentTeacherPage*t.itemsPerPage,t.totalTeacherCount),""),x(5),st("ngModel",t.itemsPerPage),x(),S("value",5),x(2),S("value",10),x(2),S("value",15),x(4),xe("disabled",t.currentTeacherPage===1),x(4),S("ngForOf",t.getTeacherPageArray()),x(),xe("disabled",t.currentTeacherPage===t.totalTeacherPages)}}function ane(i,e){if(i&1&&(u(0,"div",48)(1,"div",49)(2,"div")(3,"h5",50),m(4,"\xD6\u011Fretmen Listesi"),f(),u(5,"p",51),m(6),f()(),u(7,"a",123),k(8,"i",53),m(9," Yeni \xD6\u011Fretmen "),f()(),u(10,"div",54)(11,"table",55)(12,"thead",56)(13,"tr")(14,"th",57),m(15,"Durum"),f(),u(16,"th",57),m(17,"ID"),f(),u(18,"th",57),m(19,"Avatar"),f(),u(20,"th",57),m(21,"Ad Soyad"),f(),u(22,"th",57),m(23,"Email"),f(),u(24,"th",57),m(25,"Telefon"),f(),u(26,"th",57),m(27,"Bran\u015F"),f(),u(28,"th",57),m(29,"\u0130\u015Flemler"),f()()(),u(30,"tbody"),ee(31,Jte,25,12,"tr",58)(32,Zte,7,0,"tr",59),f()()(),u(33,"div",60),ee(34,ine,27,10,"div",61)(35,rne,6,0,"div",62),f(),ee(36,sne,31,12,"div",63),f()),i&2){let t=F();x(6),he("Toplam ",t.totalTeacherCount," \xF6\u011Fretmen"),x(25),S("ngForOf",t.paginatedTeachers),x(),S("ngIf",t.teachers.length===0),x(2),S("ngForOf",t.paginatedTeachers),x(),S("ngIf",t.teachers.length===0),x(),S("ngIf",t.teachers.length>0)}}function lne(i,e){if(i&1){let t=Ae();u(0,"button",131),U("click",function(){K(t);let r=F(2);return Y(r.approveAllUsers())}),k(1,"i",132),m(2," T\xFCm\xFCn\xFC Onayla "),f()}}function cne(i,e){i&1&&(u(0,"span",78),m(1," \xD6\u011Frenci "),f())}function dne(i,e){i&1&&(u(0,"span",138),m(1," \xD6\u011Fretmen "),f())}function une(i,e){i&1&&(u(0,"span",139),m(1," Admin "),f())}function hne(i,e){i&1&&(u(0,"span",140),m(1," Belirtilmemi\u015F "),f())}function fne(i,e){if(i&1&&(u(0,"span",110),m(1),f()),i&2){let t=F().$implicit,n=F(2);x(),he(" ",n.formatDate(t.created_at)," ")}}function gne(i,e){if(i&1){let t=Ae();u(0,"tr")(1,"td"),m(2),f(),u(3,"td"),k(4,"img",66),f(),u(5,"td",67),m(6),f(),u(7,"td"),m(8),f(),u(9,"td"),m(10),f(),u(11,"td"),ee(12,cne,2,0,"span",68)(13,dne,2,0,"span",133)(14,une,2,0,"span",134)(15,hne,2,0,"span",135),f(),u(16,"td"),ee(17,fne,2,1,"span",125),f(),u(18,"td")(19,"div",71)(20,"button",136),U("click",function(){let r=K(t).$implicit,o=F(2);return Y(o.approveUser(r.id))}),k(21,"i",132),m(22," Onayla "),f(),u(23,"button",74),U("click",function(){let r=K(t).$implicit,o=F(2);return Y(o.rejectUser(r.id))}),k(24,"i",137),m(25," Reddet "),f()()()()}if(i&2){let t=e.$implicit;x(2),W(t.id),x(2),S("src",t.avatar||"https://ui-avatars.com/api/?name="+t.adi_soyadi+"&background=random",vt),x(2),W(t.adi_soyadi),x(2),W(t.email),x(2),W(t.cep_telefonu||"Belirtilmemi\u015F"),x(2),S("ngIf",t.rutbe==="ogrenci"),x(),S("ngIf",t.rutbe==="ogretmen"),x(),S("ngIf",t.rutbe==="admin"),x(),S("ngIf",!t.rutbe||t.rutbe==="belirtilmemis"),x(2),S("ngIf",t.created_at)}}function pne(i,e){i&1&&(u(0,"tr")(1,"td",127)(2,"div",84)(3,"div",85),k(4,"i",141),f(),u(5,"p"),m(6,"Onay bekleyen kullan\u0131c\u0131 bulunmamaktad\u0131r."),f()()()())}function mne(i,e){i&1&&(u(0,"span",78),m(1," \xD6\u011Frenci "),f())}function xne(i,e){i&1&&(u(0,"span",138),m(1," \xD6\u011Fretmen "),f())}function _ne(i,e){i&1&&(u(0,"span",139),m(1," Admin "),f())}function vne(i,e){i&1&&(u(0,"span",140),m(1," Belirtilmemi\u015F "),f())}function bne(i,e){if(i&1){let t=Ae();u(0,"div",87)(1,"div",4)(2,"div",88),k(3,"img",89),u(4,"div",90)(5,"h6",91),m(6),f(),u(7,"p",94),m(8),f(),ee(9,mne,2,0,"span",68)(10,xne,2,0,"span",133)(11,_ne,2,0,"span",134)(12,vne,2,0,"span",135),f()(),u(13,"div",95)(14,"div",96)(15,"div",97)(16,"div",98),m(17,"Telefon"),f(),u(18,"div"),m(19),f()()(),u(20,"div",96)(21,"div",97)(22,"div",98),m(23,"Kay\u0131t Tarihi"),f(),u(24,"div",100),m(25),f()()()(),u(26,"div",103)(27,"button",136),U("click",function(){let r=K(t).$implicit,o=F(2);return Y(o.approveUser(r.id))}),k(28,"i",132),m(29," Onayla "),f(),u(30,"button",74),U("click",function(){let r=K(t).$implicit,o=F(2);return Y(o.rejectUser(r.id))}),k(31,"i",137),m(32," Reddet "),f()()()()}if(i&2){let t=e.$implicit,n=F(2);x(3),S("src",t.avatar||"https://ui-avatars.com/api/?name="+t.adi_soyadi+"&background=random",vt),x(3),W(t.adi_soyadi),x(2),W(t.email),x(),S("ngIf",t.rutbe==="ogrenci"),x(),S("ngIf",t.rutbe==="ogretmen"),x(),S("ngIf",t.rutbe==="admin"),x(),S("ngIf",!t.rutbe||t.rutbe==="belirtilmemis"),x(7),W(t.cep_telefonu||"Belirtilmemi\u015F"),x(6),W(t.created_at?n.formatDate(t.created_at):"Belirtilmemi\u015F")}}function Cne(i,e){i&1&&(u(0,"div",107)(1,"div",84)(2,"div",85),k(3,"i",141),f(),u(4,"p"),m(5,"Onay bekleyen kullan\u0131c\u0131 bulunmamaktad\u0131r."),f()()())}function yne(i,e){if(i&1){let t=Ae();u(0,"li",117)(1,"button",122),U("click",function(){let r=K(t).$implicit,o=F(3);return Y(o.setNewUserPage(r))}),m(2),f()()}if(i&2){let t=e.$implicit,n=F(3);xe("active",n.currentNewUserPage===t),x(2),W(t)}}function wne(i,e){if(i&1){let t=Ae();u(0,"div",108)(1,"div",109)(2,"div",110),m(3," Toplam "),u(4,"span",67),m(5),f(),m(6," bekleyen kullan\u0131c\u0131, "),u(7,"span",67),m(8),f(),m(9," aras\u0131 g\xF6steriliyor "),u(10,"div",111)(11,"span",112),m(12,"G\xF6ster:"),f(),u(13,"select",113),at("ngModelChange",function(r){K(t);let o=F(2);return dt(o.itemsPerPage,r)||(o.itemsPerPage=r),Y(r)}),U("change",function(){K(t);let r=F(2);return Y(r.setNewUserPage(1))}),u(14,"option",114),m(15,"5"),f(),u(16,"option",114),m(17,"10"),f(),u(18,"option",114),m(19,"15"),f()()()(),u(20,"nav",115)(21,"ul",116)(22,"li",117)(23,"button",118),U("click",function(){K(t);let r=F(2);return Y(r.setNewUserPage(r.currentNewUserPage-1))}),u(24,"span",119),m(25,"\xAB"),f()()(),ee(26,yne,3,3,"li",120),u(27,"li",117)(28,"button",121),U("click",function(){K(t);let r=F(2);return Y(r.setNewUserPage(r.currentNewUserPage+1))}),u(29,"span",119),m(30,"\xBB"),f()()()()()()()}if(i&2){let t=F(2);x(5),W(t.totalNewUserCount),x(3),hn("",(t.currentNewUserPage-1)*t.itemsPerPage+1,"-",t.Math.min(t.currentNewUserPage*t.itemsPerPage,t.totalNewUserCount),""),x(5),st("ngModel",t.itemsPerPage),x(),S("value",5),x(2),S("value",10),x(2),S("value",15),x(4),xe("disabled",t.currentNewUserPage===1),x(4),S("ngForOf",t.getNewUserPageArray()),x(),xe("disabled",t.currentNewUserPage===t.totalNewUserPages)}}function Mne(i,e){if(i&1&&(u(0,"div",48)(1,"div",49)(2,"div")(3,"h5",50),m(4,"Onay Bekleyen Kullan\u0131c\u0131lar"),f(),u(5,"p",51),k(6,"span",129),m(7),f()(),ee(8,lne,3,0,"button",130),f(),u(9,"div",54)(10,"table",55)(11,"thead",56)(12,"tr")(13,"th",57),m(14,"ID"),f(),u(15,"th",57),m(16,"Avatar"),f(),u(17,"th",57),m(18,"Ad Soyad"),f(),u(19,"th",57),m(20,"Email"),f(),u(21,"th",57),m(22,"Telefon"),f(),u(23,"th",57),m(24,"R\xFCtbe"),f(),u(25,"th",57),m(26,"Kay\u0131t Tarihi"),f(),u(27,"th",57),m(28,"\u0130\u015Flemler"),f()()(),u(29,"tbody"),ee(30,gne,26,10,"tr",58)(31,pne,7,0,"tr",59),f()()(),u(32,"div",60),ee(33,bne,33,9,"div",61)(34,Cne,6,0,"div",62),f(),ee(35,wne,31,12,"div",63),f()),i&2){let t=F();x(7),he(" ",t.newUsers.length," kullan\u0131c\u0131 onay bekliyor "),x(),S("ngIf",t.newUsers.length>0),x(22),S("ngForOf",t.paginatedNewUsers),x(),S("ngIf",t.newUsers.length===0),x(2),S("ngForOf",t.paginatedNewUsers),x(),S("ngIf",t.newUsers.length===0),x(),S("ngIf",t.newUsers.length>0)}}var Bm=class i{constructor(e,t){this.http=e;this.router=t}students=[];teachers=[];newUsers=[];isLoading=!0;error=null;searchQuery="";activeTab="ogrenci";currentStudentPage=1;currentTeacherPage=1;currentNewUserPage=1;itemsPerPage=5;Math=Math;ngOnInit(){this.loadUsers()}setActiveTab(e){this.activeTab=e,e==="ogrenci"&&(this.currentStudentPage=1),e==="ogretmen"&&(this.currentTeacherPage=1),e==="yeni"&&(this.currentNewUserPage=1)}loadUsers(){this.isLoading=!0;let e="",t=localStorage.getItem("user")||sessionStorage.getItem("user");t&&(e=JSON.parse(t).token||""),this.http.get("./server/api/ogrenciler_listesi.php",{headers:{Authorization:`Bearer ${e}`}}).subscribe({next:n=>{if(n.success){let r=Array.isArray(n.data)?n.data:[];this.students=r.filter(o=>o.rutbe==="ogrenci"),this.teachers=r.filter(o=>o.rutbe==="ogretmen"),this.newUsers=r.filter(o=>o.rutbe==="yeni"),console.log("Y\xFCklenen kullan\u0131c\u0131lar:",{students:this.students.length,teachers:this.teachers.length,newUsers:this.newUsers.length})}else console.error("API yan\u0131t\u0131 ba\u015Far\u0131s\u0131z:",n.error);this.isLoading=!1},error:n=>{console.error("API hatas\u0131:",n),this.isLoading=!1}})}onSearch(){this.currentStudentPage=1,this.currentTeacherPage=1,this.currentNewUserPage=1,console.log("Arama yap\u0131l\u0131yor:",this.searchQuery)}clearSearch(){this.searchQuery="",this.onSearch()}filterItems(e,t){if(!t||t.trim()==="")return e;let n=t.toLowerCase().trim();return e.filter(r=>r.adi_soyadi.toLowerCase().includes(n)||r.email.toLowerCase().includes(n)||r.cep_telefonu&&r.cep_telefonu.toLowerCase().includes(n)||r.okulu&&r.okulu.toLowerCase().includes(n)||r.sinifi&&r.sinifi.toLowerCase().includes(n)||r.grubu&&r.grubu.toLowerCase().includes(n)||r.brans&&r.brans.toLowerCase().includes(n))}get filteredStudents(){return this.filterItems(this.students,this.searchQuery)}get totalStudentCount(){return this.filteredStudents.length}get totalStudentPages(){return Math.ceil(this.totalStudentCount/this.itemsPerPage)}get paginatedStudents(){let e=(this.currentStudentPage-1)*this.itemsPerPage;return this.filteredStudents.slice(e,e+this.itemsPerPage)}setStudentPage(e){e<1||e>this.totalStudentPages||(this.currentStudentPage=e)}getStudentPageArray(){return this.generatePageArray(this.currentStudentPage,this.totalStudentPages)}get filteredTeachers(){return this.filterItems(this.teachers,this.searchQuery)}get totalTeacherCount(){return this.filteredTeachers.length}get totalTeacherPages(){return Math.ceil(this.totalTeacherCount/this.itemsPerPage)}get paginatedTeachers(){let e=(this.currentTeacherPage-1)*this.itemsPerPage;return this.filteredTeachers.slice(e,e+this.itemsPerPage)}setTeacherPage(e){e<1||e>this.totalTeacherPages||(this.currentTeacherPage=e)}getTeacherPageArray(){return this.generatePageArray(this.currentTeacherPage,this.totalTeacherPages)}get filteredNewUsers(){return this.filterItems(this.newUsers,this.searchQuery)}get totalNewUserCount(){return this.filteredNewUsers.length}get totalNewUserPages(){return Math.ceil(this.totalNewUserCount/this.itemsPerPage)}get paginatedNewUsers(){let e=(this.currentNewUserPage-1)*this.itemsPerPage;return this.filteredNewUsers.slice(e,e+this.itemsPerPage)}setNewUserPage(e){e<1||e>this.totalNewUserPages||(this.currentNewUserPage=e)}getNewUserPageArray(){return this.generatePageArray(this.currentNewUserPage,this.totalNewUserPages)}generatePageArray(e,t){let n=[];if(t<=5)for(let r=1;r<=t;r++)n.push(r);else if(e<=3)for(let r=1;r<=5;r++)n.push(r);else if(e>=t-2)for(let r=t-4;r<=t;r++)n.push(r);else for(let r=e-2;r<=e+2;r++)n.push(r);return n}deleteStudent(e){if(!confirm("Bu \xF6\u011Frenciyi silmek istedi\u011Finize emin misiniz?"))return;let t="",n=localStorage.getItem("user")||sessionStorage.getItem("user");n&&(t=JSON.parse(n).token||""),this.http.post("./server/api/ogrenci_sil.php",{id:e},{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}}).subscribe({next:r=>{r.success?(alert("\xD6\u011Frenci ba\u015Far\u0131yla silindi!"),this.loadUsers()):alert("Silme i\u015Flemi ba\u015Far\u0131s\u0131z: "+r.error)},error:r=>{console.error("API hatas\u0131:",r),alert("Silme i\u015Flemi s\u0131ras\u0131nda bir hata olu\u015Ftu: "+(r.message||"Bilinmeyen bir hata"))}})}deleteTeacher(e){if(!confirm("Bu \xF6\u011Fretmeni silmek istedi\u011Finize emin misiniz?"))return;let t="",n=localStorage.getItem("user")||sessionStorage.getItem("user");n&&(t=JSON.parse(n).token||""),this.http.post("./server/api/ogrenci_sil.php",{id:e},{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}}).subscribe({next:r=>{r.success?(alert("\xD6\u011Fretmen ba\u015Far\u0131yla silindi!"),this.loadUsers()):alert("Silme i\u015Flemi ba\u015Far\u0131s\u0131z: "+r.error)},error:r=>{console.error("API hatas\u0131:",r),alert("Silme i\u015Flemi s\u0131ras\u0131nda bir hata olu\u015Ftu: "+(r.message||"Bilinmeyen bir hata"))}})}approveUser(e){if(!confirm("Bu kullan\u0131c\u0131y\u0131 onaylamak istedi\u011Finizden emin misiniz?"))return;let t="",n=localStorage.getItem("user")||sessionStorage.getItem("user");n&&(t=JSON.parse(n).token||"");let r={id:e,rutbe:"ogrenci",aktif:1};this.http.post("./server/api/kullanici_guncelle.php",r,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}}).subscribe({next:o=>{o.success?(alert("Kullan\u0131c\u0131 ba\u015Far\u0131yla onayland\u0131!"),this.loadUsers()):alert("Kullan\u0131c\u0131 onaylanamad\u0131: "+o.error)},error:o=>{console.error("Onaylama hatas\u0131:",o),alert("Onaylama i\u015Flemi s\u0131ras\u0131nda bir hata olu\u015Ftu: "+(o.message||"Bilinmeyen bir hata"))}})}rejectUser(e){if(!confirm("Bu kullan\u0131c\u0131y\u0131 reddetmek istedi\u011Finizden emin misiniz? Bu i\u015Flem kullan\u0131c\u0131y\u0131 silecektir."))return;let t="",n=localStorage.getItem("user")||sessionStorage.getItem("user");n&&(t=JSON.parse(n).token||""),this.http.post("./server/api/ogrenci_sil.php",{id:e},{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}}).subscribe({next:r=>{r.success?(alert("Kullan\u0131c\u0131 ba\u015Far\u0131yla reddedildi ve silindi!"),this.loadUsers()):alert("Kullan\u0131c\u0131 reddedilemedi: "+r.error)},error:r=>{console.error("Reddetme hatas\u0131:",r),alert("Reddetme i\u015Flemi s\u0131ras\u0131nda bir hata olu\u015Ftu: "+(r.message||"Bilinmeyen bir hata"))}})}approveAllUsers(){if(!confirm("T\xFCm bekleyen kullan\u0131c\u0131lar\u0131 onaylamak istedi\u011Finizden emin misiniz?"))return;let e="",t=localStorage.getItem("user")||sessionStorage.getItem("user");t&&(e=JSON.parse(t).token||""),this.http.post("./server/api/tum_ogrencileri_onayla.php",{},{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}}).subscribe({next:n=>{n.success?(alert("T\xFCm kullan\u0131c\u0131lar ba\u015Far\u0131yla onayland\u0131!"),this.loadUsers()):alert("Kullan\u0131c\u0131lar onaylanamad\u0131: "+n.error)},error:n=>{console.error("Onaylama hatas\u0131:",n),alert("Onaylama i\u015Flemi s\u0131ras\u0131nda bir hata olu\u015Ftu: "+(n.message||"Bilinmeyen bir hata"))}})}formatDate(e){return new Date(e).toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}getActiveStudents(){return this.students.filter(e=>e.aktif).length}getInactiveStudents(){return this.students.filter(e=>!e.aktif).length}getActiveTeachers(){return this.teachers.filter(e=>e.aktif).length}getInactiveTeachers(){return this.teachers.filter(e=>!e.aktif).length}getStudentsWaiting(){return this.newUsers.filter(e=>e.rutbe==="ogrenci"||e.rutbe==="").length}getTeachersWaiting(){return this.newUsers.filter(e=>e.rutbe==="ogretmen").length}static \u0275fac=function(t){return new(t||i)(ke(gt),ke(an))};static \u0275cmp=Ke({type:i,selectors:[["app-ogrenci-listesi-sayfasi"]],standalone:!1,decls:103,vars:24,consts:[[1,"container-fluid","p-2","p-md-3"],[1,"row","g-2","mb-3"],[1,"col-md-3","col-sm-6"],[1,"card","h-100","border-primary","border-start","border-4","rounded-lg"],[1,"card-body","p-3"],[1,"d-flex","align-items-center"],[1,"icon-bg","rounded-circle","bg-primary-subtle","p-2","me-3"],[1,"bi","bi-people-fill","fs-4","text-primary"],[1,"text-muted","mb-0","small"],[1,"mb-0"],[1,"small","text-muted","mt-1"],[1,"text-success"],[1,"text-danger"],[1,"card","h-100","border-success","border-start","border-4","rounded-lg"],[1,"icon-bg","rounded-circle","bg-success-subtle","p-2","me-3"],[1,"bi","bi-mortarboard","fs-4","text-success"],[1,"card","h-100","border-info","border-start","border-4","rounded-lg"],[1,"icon-bg","rounded-circle","bg-info-subtle","p-2","me-3"],[1,"bi","bi-person-badge","fs-4","text-info"],[1,"card","h-100","border-danger","border-start","border-4","rounded-lg"],[1,"icon-bg","rounded-circle","bg-danger-subtle","p-2","me-3"],[1,"bi","bi-clock-history","fs-4","text-danger"],[1,"text-primary"],[1,"card","rounded-lg","shadow","mb-3"],[1,"card-header","bg-primary","text-white","p-3"],[1,"d-flex","flex-column","flex-md-row","justify-content-between","align-items-start","align-items-md-center"],[1,"mb-0","fw-semibold"],[1,"d-flex","mt-3","mt-md-0","w-100","w-md-auto"],[1,"input-group","me-2"],[1,"input-group-text","bg-white"],[1,"bi","bi-search","text-muted","small"],["type","text","placeholder","Kullan\u0131c\u0131 ara...",1,"form-control",3,"ngModelChange","keyup.enter","ngModel"],["class","btn btn-outline-secondary border-0","type","button",3,"click",4,"ngIf"],[1,"btn","btn-light","d-flex","align-items-center",3,"click"],[1,"bi","bi-arrow-clockwise","me-1"],[1,"card-body","p-0"],[1,"nav","nav-tabs","nav-fill","sticky-top","bg-white","border-bottom"],[1,"nav-item"],[1,"nav-link","d-flex","align-items-center","py-2",3,"click"],[1,"bi","bi-mortarboard","me-2"],[1,"bi","bi-person","me-2"],[1,"bi","bi-person-plus","me-2"],["class","badge bg-danger ms-2 rounded-pill",4,"ngIf"],[1,"p-2","p-md-3"],["class","fade-in",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary","border-0",3,"click"],[1,"bi","bi-x"],[1,"badge","bg-danger","ms-2","rounded-pill"],[1,"fade-in"],[1,"d-flex","flex-column","flex-md-row","justify-content-between","align-items-start","align-items-md-center","mb-3"],[1,"fw-medium","text-dark"],[1,"text-muted","small","mt-1"],["routerLink","/yonetici-sayfasi/ogrenci-detay-sayfasi/new",1,"btn","btn-primary","d-flex","align-items-center","shadow-sm"],[1,"bi","bi-plus-circle","me-1"],[1,"table-responsive","d-none","d-md-block","rounded","border"],[1,"table","table-hover","align-middle","mb-0"],[1,"bg-light"],[1,"text-uppercase","small","fw-medium"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"d-md-none"],["class","card mb-2 shadow-sm border",4,"ngFor","ngForOf"],["class","card shadow-sm text-center p-4 text-muted",4,"ngIf"],["class","mt-3",4,"ngIf"],["class","badge bg-success rounded-pill",4,"ngIf"],["class","badge bg-danger rounded-pill",4,"ngIf"],["width","40","height","40","alt","Avatar",1,"rounded-circle","border","border-2","border-light","shadow-sm",3,"src"],[1,"fw-medium"],["class","badge bg-primary-subtle text-primary rounded-pill",4,"ngIf"],[1,"d-flex","flex-column","gap-1","small"],["class","d-flex align-items-center text-muted",4,"ngIf"],[1,"btn-group"],[1,"btn","btn-outline-primary","btn-sm",3,"routerLink"],[1,"bi","bi-pencil","me-1"],[1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"bi","bi-trash","me-1"],[1,"badge","bg-success","rounded-pill"],[1,"badge","bg-danger","rounded-pill"],[1,"badge","bg-primary-subtle","text-primary","rounded-pill"],[1,"d-flex","align-items-center","text-muted"],[1,"bi","bi-calendar","me-1"],[1,"bi","bi-clock","me-1"],[1,"bi","bi-credit-card","me-1"],["colspan","11",1,"text-center","py-4","text-muted"],[1,"d-flex","flex-column","align-items-center"],[1,"bg-light","rounded-circle","p-3","mb-2"],[1,"bi","bi-mortarboard","fs-5","text-muted"],[1,"card","mb-2","shadow-sm","border"],[1,"d-flex"],["width","50","height","50","alt","Avatar",1,"rounded-circle","border","border-2","border-light","shadow-sm",3,"src"],[1,"ms-3"],[1,"fw-medium","mb-0"],["class","badge bg-success rounded-pill ms-2",4,"ngIf"],["class","badge bg-danger rounded-pill ms-2",4,"ngIf"],[1,"text-muted","small","mb-1"],[1,"row","mt-2","g-2"],[1,"col-6"],[1,"bg-light","rounded","p-2"],[1,"text-muted","small","fw-medium","mb-1"],[1,"text-truncate"],[1,"small"],["class","d-flex align-items-center",4,"ngIf"],["class","text-muted",4,"ngIf"],[1,"d-flex","justify-content-end","gap-2","mt-2","border-top","pt-2"],[1,"badge","bg-success","rounded-pill","ms-2"],[1,"badge","bg-danger","rounded-pill","ms-2"],[1,"text-muted"],[1,"card","shadow-sm","text-center","p-4","text-muted"],[1,"mt-3"],[1,"d-flex","justify-content-between","align-items-center"],[1,"text-muted","small"],[1,"d-inline-block","ms-3"],[1,"text-muted","small","me-2"],[1,"form-select","form-select-sm","d-inline-block","w-auto",3,"ngModelChange","change","ngModel"],[3,"value"],["aria-label","Page navigation"],[1,"pagination","pagination-sm","mb-0"],[1,"page-item"],["aria-label","Previous",1,"page-link",3,"click"],["aria-hidden","true"],["class","page-item",3,"active",4,"ngFor","ngForOf"],["aria-label","Next",1,"page-link",3,"click"],[1,"page-link",3,"click"],["routerLink","/yonetici-sayfasi/ogretmen-detay-sayfasi/new",1,"btn","btn-primary","d-flex","align-items-center","shadow-sm"],["class","badge bg-info-subtle text-info rounded-pill",4,"ngIf"],["class","text-muted small",4,"ngIf"],[1,"badge","bg-info-subtle","text-info","rounded-pill"],["colspan","8",1,"text-center","py-4","text-muted"],[1,"bi","bi-person","fs-5","text-muted"],[1,"d-inline-block","bg-danger","rounded-circle","me-1",2,"width","8px","height","8px"],["class","btn btn-success d-flex align-items-center shadow-sm",3,"click",4,"ngIf"],[1,"btn","btn-success","d-flex","align-items-center","shadow-sm",3,"click"],[1,"bi","bi-check-circle","me-1"],["class","badge bg-success-subtle text-success rounded-pill",4,"ngIf"],["class","badge bg-danger-subtle text-danger rounded-pill",4,"ngIf"],["class","badge bg-secondary-subtle text-secondary rounded-pill",4,"ngIf"],[1,"btn","btn-outline-success","btn-sm",3,"click"],[1,"bi","bi-x-circle","me-1"],[1,"badge","bg-success-subtle","text-success","rounded-pill"],[1,"badge","bg-danger-subtle","text-danger","rounded-pill"],[1,"badge","bg-secondary-subtle","text-secondary","rounded-pill"],[1,"bi","bi-person-plus","fs-5","text-muted"]],template:function(t,n){t&1&&(u(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),k(7,"i",7),f(),u(8,"div")(9,"h6",8),m(10,"Toplam Kullan\u0131c\u0131"),f(),u(11,"h4",9),m(12),f(),u(13,"div",10)(14,"span",11),m(15),f(),m(16," | "),u(17,"span",12),m(18),f()()()()()()(),u(19,"div",2)(20,"div",13)(21,"div",4)(22,"div",5)(23,"div",14),k(24,"i",15),f(),u(25,"div")(26,"h6",8),m(27,"\xD6\u011Frenciler"),f(),u(28,"h4",9),m(29),f(),u(30,"div",10)(31,"span",11),m(32),f(),m(33," | "),u(34,"span",12),m(35),f()()()()()()(),u(36,"div",2)(37,"div",16)(38,"div",4)(39,"div",5)(40,"div",17),k(41,"i",18),f(),u(42,"div")(43,"h6",8),m(44,"\xD6\u011Fretmenler"),f(),u(45,"h4",9),m(46),f(),u(47,"div",10)(48,"span",11),m(49),f(),m(50," | "),u(51,"span",12),m(52),f()()()()()()(),u(53,"div",2)(54,"div",19)(55,"div",4)(56,"div",5)(57,"div",20),k(58,"i",21),f(),u(59,"div")(60,"h6",8),m(61,"Onay Bekleyen"),f(),u(62,"h4",9),m(63),f(),u(64,"div",10)(65,"span",22),m(66),f(),m(67," | "),u(68,"span",11),m(69),f()()()()()()()(),u(70,"div",23)(71,"div",24)(72,"div",25)(73,"h4",26),m(74,"Kullan\u0131c\u0131 Y\xF6netimi"),f(),u(75,"div",27)(76,"div",28)(77,"span",29),k(78,"i",30),f(),u(79,"input",31),at("ngModelChange",function(o){return dt(n.searchQuery,o)||(n.searchQuery=o),o}),U("keyup.enter",function(){return n.onSearch()}),f(),ee(80,Pte,2,0,"button",32),f(),u(81,"button",33),U("click",function(){return n.loadUsers()}),k(82,"i",34),m(83," Yenile "),f()()()(),u(84,"div",35)(85,"ul",36)(86,"li",37)(87,"a",38),U("click",function(){return n.setActiveTab("ogrenci")}),k(88,"i",39),m(89," \xD6\u011Frenciler "),f()(),u(90,"li",37)(91,"a",38),U("click",function(){return n.setActiveTab("ogretmen")}),k(92,"i",40),m(93," \xD6\u011Fretmenler "),f()(),u(94,"li",37)(95,"a",38),U("click",function(){return n.setActiveTab("yeni")}),k(96,"i",41),m(97," Yeni Kullan\u0131c\u0131lar "),ee(98,Ote,2,1,"span",42),f()()(),u(99,"div",43),ee(100,qte,45,6,"div",44)(101,ane,37,6,"div",44)(102,Mne,36,7,"div",44),f()()()()),t&2&&(x(12),W(n.students.length+n.teachers.length+n.newUsers.length),x(3),he("",n.getActiveStudents()+n.getActiveTeachers()," Aktif"),x(3),he("",n.getInactiveStudents()+n.getInactiveTeachers()," Pasif"),x(11),W(n.students.length),x(3),he("",n.getActiveStudents()," Aktif"),x(3),he("",n.getInactiveStudents()," Pasif"),x(11),W(n.teachers.length),x(3),he("",n.getActiveTeachers()," Aktif"),x(3),he("",n.getInactiveTeachers()," Pasif"),x(11),W(n.newUsers.length),x(3),he("",n.getStudentsWaiting()," \xD6\u011Frenci"),x(3),he("",n.getTeachersWaiting()," \xD6\u011Fretmen"),x(10),st("ngModel",n.searchQuery),x(),S("ngIf",n.searchQuery),x(7),xe("active",n.activeTab==="ogrenci"),x(4),xe("active",n.activeTab==="ogretmen"),x(4),xe("active",n.activeTab==="yeni"),x(3),S("ngIf",n.newUsers.length>0),x(2),S("ngIf",n.activeTab==="ogrenci"),x(),S("ngIf",n.activeTab==="ogretmen"),x(),S("ngIf",n.activeTab==="yeni"))},dependencies:[yt,lt,Kn,Yn,rn,qn,fn,xi,Un],styles:['@charset "UTF-8";.card.border-4[_ngcontent-%COMP%]{transition:all .3s ease}.card.border-4[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 .5rem 1rem #00000026!important}.icon-bg[_ngcontent-%COMP%]{width:45px;height:45px;display:flex;align-items:center;justify-content:center}.small[_ngcontent-%COMP%]{font-size:.875rem}.fw-medium[_ngcontent-%COMP%]{font-weight:500}.rounded-lg[_ngcontent-%COMP%]{border-radius:.5rem}.shadow-sm[_ngcontent-%COMP%]{box-shadow:0 .125rem .25rem #00000013!important}.bg-gradient-primary[_ngcontent-%COMP%]{background:linear-gradient(to right,var(--bs-primary),#3a87ff)!important}.nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{border:none;color:#6c757d;position:relative;transition:all .2s;font-weight:500}.nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{color:var(--bs-primary);background-color:rgba(var(--bs-primary-rgb),.05)}.nav-tabs[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:var(--bs-primary);background-color:transparent;border-bottom:2px solid var(--bs-primary)}@media (max-width: 767.98px){.card-body[_ngcontent-%COMP%]{padding:1rem}.table-responsive[_ngcontent-%COMP%]{border:none!important}.pagination[_ngcontent-%COMP%]{justify-content:center}}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .4s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.pagination[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{color:var(--bs-primary);border-radius:.25rem;margin:0 2px}.pagination[_ngcontent-%COMP%]   .page-item.active[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{background-color:var(--bs-primary);border-color:var(--bs-primary)}.form-select-sm[_ngcontent-%COMP%]{min-width:70px;padding-top:.25rem;padding-bottom:.25rem;font-size:.875rem}.bg-primary-subtle[_ngcontent-%COMP%]{background-color:rgba(var(--bs-primary-rgb),.1)}.bg-success-subtle[_ngcontent-%COMP%]{background-color:rgba(var(--bs-success-rgb),.1)}.bg-info-subtle[_ngcontent-%COMP%]{background-color:rgba(var(--bs-info-rgb),.1)}.bg-danger-subtle[_ngcontent-%COMP%]{background-color:rgba(var(--bs-danger-rgb),.1)}.bg-secondary-subtle[_ngcontent-%COMP%]{background-color:rgba(var(--bs-secondary-rgb),.1)}.btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-radius:.25rem;margin:0 1px}.card-header[_ngcontent-%COMP%], .card-body[_ngcontent-%COMP%]{padding:1rem}@media (min-width: 768px){.card-header[_ngcontent-%COMP%], .card-body[_ngcontent-%COMP%]{padding:1.25rem}}@media (min-width: 992px){.card-header[_ngcontent-%COMP%], .card-body[_ngcontent-%COMP%]{padding:1.5rem}}']})};function Ene(i,e){i&1&&(u(0,"div",9)(1,"div",10)(2,"span",11),m(3,"Y\xFCkleniyor..."),f()(),u(4,"p",12),m(5,"Y\xFCkleniyor..."),f()())}function Pne(i,e){if(i&1&&(u(0,"div",13)(1,"div",14),k(2,"i",15),f(),u(3,"div",16)(4,"h3",17),m(5,"Hata"),f(),u(6,"p",18),m(7),f()()()),i&2){let t=F();x(7),W(t.error)}}function One(i,e){if(i&1&&(u(0,"div",19)(1,"div",14),k(2,"i",20),f(),u(3,"div",16)(4,"h3",17),m(5,"Ba\u015Far\u0131l\u0131"),f(),u(6,"p",18),m(7),f()()()),i&2){let t=F();x(7),W(t.success)}}function Sne(i,e){if(i&1&&(u(0,"div",96)(1,"span",97),m(2),f(),u(3,"span",98),m(4),f(),u(5,"small",99),m(6,"Kaydet butonuna bas\u0131nca y\xFCklenecektir"),f()()),i&2){let t=F(2);x(2),W(t.selectedFile.name),x(2),he("(",(t.selectedFile.size/1024).toFixed(1)," KB)")}}function kne(i,e){i&1&&(u(0,"div",100)(1,"small"),m(2,"Ad Soyad gereklidir"),f()())}function Ane(i,e){i&1&&(u(0,"div",100)(1,"small"),m(2,"Ge\xE7erli bir email adresi gereklidir"),f()())}function Dne(i,e){i&1&&(u(0,"div",100)(1,"small"),m(2,"\u015Eifreler e\u015Fle\u015Fmiyor"),f()())}function Fne(i,e){if(i&1){let t=Ae();u(0,"div",44)(1,"input",101),U("focus",function(){K(t);let r=F(2);return Y(r.onFocus("ogretmeni"))})("blur",function(){K(t);let r=F(2);return Y(r.onBlur("ogretmeni"))}),f(),u(2,"label",102),m(3,"\xD6\u011Fretmeni"),f()()}if(i&2){let t=F(2);xe("focused",t.isFocused("ogretmeni")),x(2),xe("raised",t.isRaised("ogretmeni"))}}function Ine(i,e){if(i&1){let t=Ae();u(0,"div",44)(1,"input",103),U("focus",function(){K(t);let r=F(2);return Y(r.onFocus("brans"))})("blur",function(){K(t);let r=F(2);return Y(r.onBlur("brans"))}),f(),u(2,"label",104),m(3,"Bran\u015F"),f()()}if(i&2){let t=F(2);xe("focused",t.isFocused("brans")),x(2),xe("raised",t.isRaised("brans"))}}function Tne(i,e){i&1&&k(0,"span",105)}function Bne(i,e){if(i&1){let t=Ae();u(0,"div",21)(1,"form",22),U("ngSubmit",function(){K(t);let r=F();return Y(r.onSubmit())}),u(2,"div",23)(3,"div",24)(4,"div",25),U("click",function(){K(t);let r=ua(11);return Y(r.click())}),k(5,"img",26),u(6,"div",27),k(7,"i",28),u(8,"span",29),m(9,"Foto\u011Fraf De\u011Fi\u015Ftir"),f()()(),u(10,"input",30,0),U("change",function(r){K(t);let o=F();return Y(o.onFileChange(r))}),f(),u(12,"div",31)(13,"h2",32),m(14),f(),u(15,"p",33),m(16),f(),ee(17,Sne,7,2,"div",34),f()()(),u(18,"div",35)(19,"div",36)(20,"div",37)(21,"div",38),k(22,"i",39),u(23,"h2",40),m(24,"Temel Bilgiler"),f()(),u(25,"div",41)(26,"div",42)(27,"div",43)(28,"div",44)(29,"input",45),U("focus",function(){K(t);let r=F();return Y(r.onFocus("adi_soyadi"))})("blur",function(){K(t);let r=F();return Y(r.onBlur("adi_soyadi"))}),f(),u(30,"label",46),m(31,"Ad\u0131 Soyad\u0131"),f()(),ee(32,kne,3,0,"div",47),f(),u(33,"div",43)(34,"div",44)(35,"input",48),U("focus",function(){K(t);let r=F();return Y(r.onFocus("email"))})("blur",function(){K(t);let r=F();return Y(r.onBlur("email"))}),f(),u(36,"label",49),m(37,"Email"),f()(),ee(38,Ane,3,0,"div",47),f()(),u(39,"div",42)(40,"div",43)(41,"div",44)(42,"input",50),U("focus",function(){K(t);let r=F();return Y(r.onFocus("cep_telefonu"))})("blur",function(){K(t);let r=F();return Y(r.onBlur("cep_telefonu"))}),f(),u(43,"label",51),m(44,"Cep Telefonu"),f()()(),u(45,"div",43)(46,"div",52)(47,"select",53),U("focus",function(){K(t);let r=F();return Y(r.onFocus("rutbe"))})("blur",function(){K(t);let r=F();return Y(r.onBlur("rutbe"))}),u(48,"option",54),m(49,"\xD6\u011Frenci"),f(),u(50,"option",55),m(51,"\xD6\u011Fretmen"),f(),u(52,"option",56),m(53,"Admin"),f()(),u(54,"label",57),m(55,"R\xFCtbe"),f()()()(),u(56,"div",42)(57,"div",43)(58,"div",44)(59,"select",58),U("focus",function(){K(t);let r=F();return Y(r.onFocus("aktif"))})("blur",function(){K(t);let r=F();return Y(r.onBlur("aktif"))}),u(60,"option",59),m(61,"Aktif"),f(),u(62,"option",59),m(63,"Pasif"),f()(),u(64,"label",60),m(65,"Hesap Durumu"),f()()()(),u(66,"div",42)(67,"div",43)(68,"div",44)(69,"input",61),U("focus",function(){K(t);let r=F();return Y(r.onFocus("sifre"))})("blur",function(){K(t);let r=F();return Y(r.onBlur("sifre"))}),f(),u(70,"label",62),m(71,"Yeni \u015Eifre (Bo\u015F b\u0131rak\u0131labilir)"),f()()(),u(72,"div",43)(73,"div",44)(74,"input",63),U("focus",function(){K(t);let r=F();return Y(r.onFocus("sifre_tekrar"))})("blur",function(){K(t);let r=F();return Y(r.onBlur("sifre_tekrar"))}),f(),u(75,"label",64),m(76,"\u015Eifre Tekrar"),f()(),ee(77,Dne,3,0,"div",47),f()()()(),u(78,"div",37)(79,"div",38),k(80,"i",65),u(81,"h2",40),m(82,"E\u011Fitim Bilgileri"),f()(),u(83,"div",41)(84,"div",42)(85,"div",43)(86,"div",44)(87,"input",66),U("focus",function(){K(t);let r=F();return Y(r.onFocus("okulu"))})("blur",function(){K(t);let r=F();return Y(r.onBlur("okulu"))}),f(),u(88,"label",67),m(89,"Okul"),f()()(),u(90,"div",43)(91,"div",44)(92,"input",68),U("focus",function(){K(t);let r=F();return Y(r.onFocus("sinifi"))})("blur",function(){K(t);let r=F();return Y(r.onBlur("sinifi"))}),f(),u(93,"label",69),m(94,"S\u0131n\u0131f"),f()()()(),u(95,"div",42)(96,"div",43)(97,"div",44)(98,"input",70),U("focus",function(){K(t);let r=F();return Y(r.onFocus("grubu"))})("blur",function(){K(t);let r=F();return Y(r.onBlur("grubu"))}),f(),u(99,"label",71),m(100,"Grup"),f()()(),u(101,"div",43),ee(102,Fne,4,4,"div",72)(103,Ine,4,4,"div",72),f()(),u(104,"div",42)(105,"div",43)(106,"div",44)(107,"select",73),U("focus",function(){K(t);let r=F();return Y(r.onFocus("ders_gunu"))})("blur",function(){K(t);let r=F();return Y(r.onBlur("ders_gunu"))}),u(108,"option",74),m(109,"Se\xE7iniz"),f(),u(110,"option",75),m(111,"Pazartesi"),f(),u(112,"option",76),m(113,"Sal\u0131"),f(),u(114,"option",77),m(115,"\xC7ar\u015Famba"),f(),u(116,"option",78),m(117,"Per\u015Fembe"),f(),u(118,"option",79),m(119,"Cuma"),f(),u(120,"option",80),m(121,"Cumartesi"),f(),u(122,"option",81),m(123,"Pazar"),f()(),u(124,"label",82),m(125,"Ders G\xFCn\xFC"),f()()(),u(126,"div",43)(127,"div",44)(128,"input",83),U("focus",function(){K(t);let r=F();return Y(r.onFocus("ders_saati"))})("blur",function(){K(t);let r=F();return Y(r.onBlur("ders_saati"))}),f(),u(129,"label",84),m(130,"Ders Saati"),f()()()(),u(131,"div",42)(132,"div",43)(133,"div",44)(134,"input",85),U("focus",function(){K(t);let r=F();return Y(r.onFocus("ucret"))})("blur",function(){K(t);let r=F();return Y(r.onBlur("ucret"))}),f(),u(135,"label",86),m(136,"Ayl\u0131k \xDCcret"),f()()()()()(),u(137,"div",37)(138,"div",38),k(139,"i",87),u(140,"h2",40),m(141,"Veli Bilgileri"),f()(),u(142,"div",41)(143,"div",42)(144,"div",43)(145,"div",44)(146,"input",88),U("focus",function(){K(t);let r=F();return Y(r.onFocus("veli_adi"))})("blur",function(){K(t);let r=F();return Y(r.onBlur("veli_adi"))}),f(),u(147,"label",89),m(148,"Veli Ad\u0131"),f()()(),u(149,"div",43)(150,"div",44)(151,"input",90),U("focus",function(){K(t);let r=F();return Y(r.onFocus("veli_cep"))})("blur",function(){K(t);let r=F();return Y(r.onBlur("veli_cep"))}),f(),u(152,"label",91),m(153,"Veli Telefon"),f()()()()()(),u(154,"div",92)(155,"button",93),U("click",function(){K(t);let r=F();return Y(r.navigateBack())}),m(156,"\u0130ptal"),f(),u(157,"button",94),ee(158,Tne,1,0,"span",95),m(159," Kaydet "),f()()()()()()}if(i&2){let t,n,r,o,s=F();x(),S("formGroup",s.editForm),x(4),S("src",s.student.avatar||"assets/images/default-avatar.png",vt),x(9),W(s.student.adi_soyadi),x(2),W(s.student.email),x(),S("ngIf",s.selectedFile),x(11),xe("focused",s.isFocused("adi_soyadi"))("error",s.isInvalid("adi_soyadi")),x(2),xe("raised",s.isRaised("adi_soyadi")),x(2),S("ngIf",((t=s.editForm.get("adi_soyadi"))==null?null:t.invalid)&&((t=s.editForm.get("adi_soyadi"))==null?null:t.touched)),x(2),xe("focused",s.isFocused("email"))("error",s.isInvalid("email")),x(2),xe("raised",s.isRaised("email")),x(2),S("ngIf",((n=s.editForm.get("email"))==null?null:n.invalid)&&((n=s.editForm.get("email"))==null?null:n.touched)),x(3),xe("focused",s.isFocused("cep_telefonu")),x(2),xe("raised",s.isRaised("cep_telefonu")),x(3),xe("focused",s.isFocused("rutbe")),x(8),xe("raised",s.isRaised("rutbe")),x(4),xe("focused",s.isFocused("aktif")),x(2),S("ngValue",!0),x(2),S("ngValue",!1),x(2),xe("raised",s.isRaised("aktif")),x(4),xe("focused",s.isFocused("sifre")),x(2),xe("raised",s.isRaised("sifre")),x(3),xe("focused",s.isFocused("sifre_tekrar"))("error",s.editForm.errors==null?null:s.editForm.errors.passwordMismatch),x(2),xe("raised",s.isRaised("sifre_tekrar")),x(2),S("ngIf",s.editForm.errors==null?null:s.editForm.errors.passwordMismatch),x(9),xe("focused",s.isFocused("okulu")),x(2),xe("raised",s.isRaised("okulu")),x(3),xe("focused",s.isFocused("sinifi")),x(2),xe("raised",s.isRaised("sinifi")),x(4),xe("focused",s.isFocused("grubu")),x(2),xe("raised",s.isRaised("grubu")),x(3),S("ngIf",((r=s.editForm.get("rutbe"))==null?null:r.value)==="ogrenci"),x(),S("ngIf",((o=s.editForm.get("rutbe"))==null?null:o.value)==="ogretmen"),x(3),xe("focused",s.isFocused("ders_gunu")),x(18),xe("raised",s.isRaised("ders_gunu")),x(3),xe("focused",s.isFocused("ders_saati")),x(2),xe("raised",s.isRaised("ders_saati")),x(4),xe("focused",s.isFocused("ucret")),x(2),xe("raised",s.isRaised("ucret")),x(10),xe("focused",s.isFocused("veli_adi")),x(2),xe("raised",s.isRaised("veli_adi")),x(3),xe("focused",s.isFocused("veli_cep")),x(2),xe("raised",s.isRaised("veli_cep")),x(5),S("disabled",s.editForm.invalid||s.isSubmitting),x(),S("ngIf",s.isSubmitting)}}var uC=class i{constructor(e,t,n,r){this.http=e;this.route=t;this.router=n;this.fb=r}studentId=1;student={id:"",adi_soyadi:"",email:"",cep_telefonu:"",rutbe:"",brans:"",ogretmeni:"",aktif:!0,avatar:"",okulu:"",sinifi:"",grubu:"",ders_adi:"",ders_gunu:"",ders_saati:"",ucret:""};editForm;isLoading=!0;isSubmitting=!1;error=null;success=null;selectedFile=null;focusedFields={};ngOnInit(){this.initForm(),this.route.paramMap.subscribe(e=>{let t=e.get("id");t?(this.studentId=+t,this.loadStudentData()):(this.isLoading=!1,this.error="\xD6\u011Frenci ID bulunamad\u0131.")})}initForm(){this.editForm=this.fb.group({adi_soyadi:["",fi.required],email:["",[fi.required,fi.email]],cep_telefonu:[""],aktif:[!0],rutbe:[""],sifre:[""],sifre_tekrar:[""],okulu:[""],sinifi:[""],grubu:[""],ders_adi:[""],ders_gunu:[""],ders_saati:[""],ucret:[""],brans:[""],ogretmeni:[""],veli_adi:[""],veli_cep:[""]},{validators:this.passwordMatchValidator})}passwordMatchValidator(e){let t=e.get("sifre"),n=e.get("sifre_tekrar");return t&&n&&t.value&&t.value!==n.value?{passwordMismatch:!0}:null}loadStudentData(){this.isLoading=!0,this.error=null;let e="",t=localStorage.getItem("user")||sessionStorage.getItem("user");t&&(e=JSON.parse(t).token||"");let n=new xt({Authorization:`Bearer ${e}`});this.http.get(`./server/api/ogrenci_bilgileri.php?id=${this.studentId}`,{headers:n}).subscribe({next:r=>{r.success?(this.student=r.data,console.log("\xD6\u011Frenci verileri:",this.student),this.editForm.patchValue({adi_soyadi:this.student.adi_soyadi||"",email:this.student.email||"",cep_telefonu:this.student.cep_telefonu||"",aktif:this.student.aktif===1||this.student.aktif===!0,rutbe:this.student.rutbe||"",okulu:this.student.okulu||"",sinifi:this.student.sinifi||"",grubu:this.student.grubu||"",ders_adi:this.student.ders_adi||"",ders_gunu:this.student.ders_gunu||"",ders_saati:this.student.ders_saati||"",ucret:this.student.ucret||"",brans:this.student.brans||"",ogretmeni:this.student.ogretmeni||"",veli_adi:this.student.veli_adi||"",veli_cep:this.student.veli_cep||""}),this.isLoading=!1):(this.isLoading=!1,this.error=r.error||"\xD6\u011Frenci bilgileri al\u0131namad\u0131.")},error:r=>{this.isLoading=!1,this.error="Ba\u011Flant\u0131 hatas\u0131: "+(r.message||"Bilinmeyen bir hata olu\u015Ftu.")}})}onFileChange(e){let t=e.target.files;if(t&&t.length>0){this.selectedFile=t[0];let n=new FileReader;n.onload=r=>{r.target&&r.target.result&&(this.student.avatar=r.target.result)},this.selectedFile&&n.readAsDataURL(this.selectedFile)}}onSubmit(){if(this.editForm.invalid){Object.keys(this.editForm.controls).forEach(r=>{this.editForm.get(r)?.markAsTouched()});return}this.isSubmitting=!0,this.error=null,this.success=null;let e="",t=localStorage.getItem("user")||sessionStorage.getItem("user");t&&(e=JSON.parse(t).token||"");let n=new xt({Authorization:`Bearer ${e}`});this.uploadAvatar().then(r=>{let o=this.prepareFormData(r);this.http.post("./server/api/ogrenci_profil.php",o,{headers:n}).subscribe({next:s=>{s.success?(this.success="\xD6\u011Frenci bilgileri ba\u015Far\u0131yla g\xFCncellendi.",setTimeout(()=>{this.loadStudentData()},1500)):this.error=s.error||"G\xFCncelleme s\u0131ras\u0131nda bir hata olu\u015Ftu.",setTimeout(()=>{this.isSubmitting=!1},1500)},error:s=>{this.isSubmitting=!1,this.error="Ba\u011Flant\u0131 hatas\u0131: "+(s.message||"Bilinmeyen bir hata olu\u015Ftu."),setTimeout(()=>{this.isSubmitting=!1},1e3)}})}).catch(r=>{this.isSubmitting=!1,this.error="Avatar y\xFCkleme hatas\u0131: "+r})}uploadAvatar(){return new Promise((e,t)=>{if(!this.selectedFile){e(this.student?.avatar||"");return}let n="",r=localStorage.getItem("user")||sessionStorage.getItem("user");r&&(n=JSON.parse(r).token||"");let o=new FormData;o.append("avatar",this.selectedFile),o.append("id",this.studentId.toString());let s=new xt({Authorization:`Bearer ${n}`});this.http.post("./server/api/ogrenci_guncelle.php",o,{headers:s}).subscribe({next:a=>{a.success&&a.data&&a.data.avatar?e(a.data.avatar):t(a.error||"Dosya y\xFCklenemedi.")},error:a=>{console.error("Avatar y\xFCkleme hatas\u0131:",a),t(a.message||"Ba\u011Flant\u0131 hatas\u0131.")}})})}prepareFormData(e){let t=this.editForm.value,n={id:this.studentId,temel_bilgiler:{adi_soyadi:t.adi_soyadi,email:t.email,cep_telefonu:t.cep_telefonu,aktif:t.aktif?1:0,rutbe:t.rutbe,brans:t.brans,ogretmeni:t.ogretmeni},detay_bilgiler:{okulu:t.okulu,sinifi:t.sinifi,grubu:t.grubu,ders_adi:t.ders_adi,ders_gunu:t.ders_gunu,ders_saati:t.ders_saati,ucret:t.ucret,veli_adi:t.veli_adi,veli_cep:t.veli_cep}};return e&&(n.temel_bilgiler.avatar=e),t.sifre&&(n.temel_bilgiler.sifre=t.sifre),n}navigateBack(){this.router.navigate(["/yonetici-sayfasi/ogrenci-liste-sayfasi"])}onFocus(e){this.focusedFields[e]=!0}onBlur(e){this.focusedFields[e]=!1}isFocused(e){return this.focusedFields[e]===!0}isRaised(e){let t=this.editForm.get(e);return this.focusedFields[e]===!0||t?.value!==""&&t?.value!==null&&t?.value!==void 0}isInvalid(e){let t=this.editForm.get(e);return(t?.invalid&&t?.touched)??!1}static \u0275fac=function(t){return new(t||i)(ke(gt),ke(Mi),ke(an),ke(ul))};static \u0275cmp=Ke({type:i,selectors:[["app-ogrenci-detay-sayfasi"]],standalone:!1,decls:11,vars:4,consts:[["fileInput",""],[1,"edit-container"],[1,"page-header"],[1,"back-button",3,"click"],[1,"bi","bi-arrow-left"],["class","loading-spinner",4,"ngIf"],["class","alert alert-error",4,"ngIf"],["class","alert alert-success",4,"ngIf"],["class","edit-form",4,"ngIf"],[1,"loading-spinner"],[1,"spinner"],[1,"visually-hidden"],[1,"loading-text"],[1,"alert","alert-error"],[1,"alert-icon"],[1,"bi","bi-exclamation-triangle"],[1,"alert-content"],[1,"alert-title"],[1,"alert-message"],[1,"alert","alert-success"],[1,"bi","bi-check-circle"],[1,"edit-form"],[3,"ngSubmit","formGroup"],[1,"profile-header"],[1,"avatar-upload"],[1,"avatar-container",3,"click"],["alt","Avatar",1,"avatar-image",3,"src"],[1,"avatar-overlay"],[1,"bi","bi-camera"],[1,"avatar-text"],["type","file","hidden","","accept","image/jpeg,image/png,image/gif,image/webp",3,"change"],[1,"avatar-info"],[1,"student-name"],[1,"student-email"],["class","selected-file-info",4,"ngIf"],[1,"form-grid"],[1,"form-column"],[1,"info-card"],[1,"card-header"],[1,"bi","bi-person","card-icon"],[1,"card-title"],[1,"card-body"],[1,"form-row"],[1,"form-field"],[1,"material-input-container"],["id","adi_soyadi","type","text","formControlName","adi_soyadi",1,"material-input",3,"focus","blur"],["for","adi_soyadi",1,"material-input-label"],["class","error-message",4,"ngIf"],["id","email","type","email","formControlName","email",1,"material-input",3,"focus","blur"],["for","email",1,"material-input-label"],["id","cep_telefonu","type","text","formControlName","cep_telefonu",1,"material-input",3,"focus","blur"],["for","cep_telefonu",1,"material-input-label"],[1,"material-input-container","rutbe-select"],["id","rutbe","formControlName","rutbe",1,"material-input","material-select",3,"focus","blur"],["value","ogrenci"],["value","ogretmen"],["value","admin"],["for","rutbe",1,"material-input-label"],["id","aktif","formControlName","aktif",1,"material-input","material-select",3,"focus","blur"],[3,"ngValue"],["for","aktif",1,"material-input-label"],["id","sifre","type","password","formControlName","sifre",1,"material-input",3,"focus","blur"],["for","sifre",1,"material-input-label"],["id","sifre_tekrar","type","password","formControlName","sifre_tekrar",1,"material-input",3,"focus","blur"],["for","sifre_tekrar",1,"material-input-label"],[1,"bi","bi-book","card-icon"],["id","okulu","type","text","formControlName","okulu",1,"material-input",3,"focus","blur"],["for","okulu",1,"material-input-label"],["id","sinifi","type","text","formControlName","sinifi",1,"material-input",3,"focus","blur"],["for","sinifi",1,"material-input-label"],["id","grubu","type","text","formControlName","grubu",1,"material-input",3,"focus","blur"],["for","grubu",1,"material-input-label"],["class","material-input-container",3,"focused",4,"ngIf"],["id","ders_gunu","formControlName","ders_gunu",1,"material-input","material-select",3,"focus","blur"],["value",""],["value","Pazartesi"],["value","Sal\u0131"],["value","\xC7ar\u015Famba"],["value","Per\u015Fembe"],["value","Cuma"],["value","Cumartesi"],["value","Pazar"],["for","ders_gunu",1,"material-input-label"],["id","ders_saati","type","text","formControlName","ders_saati",1,"material-input",3,"focus","blur"],["for","ders_saati",1,"material-input-label"],["id","ucret","type","number","formControlName","ucret",1,"material-input",3,"focus","blur"],["for","ucret",1,"material-input-label"],[1,"bi","bi-people","card-icon"],["id","veli_adi","type","text","formControlName","veli_adi",1,"material-input",3,"focus","blur"],["for","veli_adi",1,"material-input-label"],["id","veli_cep","type","text","formControlName","veli_cep",1,"material-input",3,"focus","blur"],["for","veli_cep",1,"material-input-label"],[1,"form-actions"],["type","button",1,"button","button-secondary",3,"click"],["type","submit",1,"button","button-primary",3,"disabled"],["class","spinner-small",4,"ngIf"],[1,"selected-file-info"],[1,"file-name"],[1,"file-size"],[1,"file-notice"],[1,"error-message"],["id","ogretmeni","type","text","formControlName","ogretmeni",1,"material-input",3,"focus","blur"],["for","ogretmeni",1,"material-input-label"],["id","brans","type","text","formControlName","brans",1,"material-input",3,"focus","blur"],["for","brans",1,"material-input-label"],[1,"spinner-small"]],template:function(t,n){t&1&&(u(0,"div",1)(1,"header",2)(2,"h1"),m(3,"\xD6\u011Frenci D\xFCzenle"),f(),u(4,"button",3),U("click",function(){return n.navigateBack()}),k(5,"i",4),m(6," Geri D\xF6n "),f()(),ee(7,Ene,6,0,"div",5)(8,Pne,8,1,"div",6)(9,One,8,1,"div",7)(10,Bne,160,80,"div",8),f()),t&2&&(x(7),S("ngIf",n.isLoading),x(),S("ngIf",n.error),x(),S("ngIf",n.success),x(),S("ngIf",!n.isLoading&&n.student))},dependencies:[lt,$r,Kn,Yn,rn,hc,qn,fn,Gr,ba,Ca],styles:[`.edit-container[_ngcontent-%COMP%]{width:100%;margin:0 auto;padding:16px}@media (max-width: 768px){.edit-container[_ngcontent-%COMP%]{padding:8px}}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;padding:12px;background-color:#fff;border-radius:8px;box-shadow:0 2px 10px #0000000d}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:500;color:#343a40}.page-header[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;background-color:#f5f7fa;color:#495057;border:none;padding:8px 16px;border-radius:999px;cursor:pointer;transition:all .3s ease}.page-header[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]:hover{background-color:#e4e9f2}.page-header[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}@media (max-width: 576px){.page-header[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{padding:8px}.page-header[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}}.loading-spinner[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:200px}.loading-spinner[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;border:4px solid #c8e1fb;border-top-color:#4a90e2;animation:_ngcontent-%COMP%_spinner 1s linear infinite}.loading-spinner[_ngcontent-%COMP%]   .loading-text[_ngcontent-%COMP%]{margin-top:16px;color:#6c757d}@keyframes _ngcontent-%COMP%_spinner{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.alert[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px;margin-bottom:24px;padding:16px;border-left:4px solid;border-radius:8px;animation:_ngcontent-%COMP%_slide-up .3s ease}.alert.alert-error[_ngcontent-%COMP%]{background-color:#e539351a;border-left-color:#e53935}.alert.alert-error[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%], .alert.alert-error[_ngcontent-%COMP%]   .alert-title[_ngcontent-%COMP%]{color:#e53935}.alert.alert-success[_ngcontent-%COMP%]{background-color:#43a0471a;border-left-color:#43a047}.alert.alert-success[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%], .alert.alert-success[_ngcontent-%COMP%]   .alert-title[_ngcontent-%COMP%]{color:#43a047}.alert[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{font-size:20px;margin-top:4px}.alert[_ngcontent-%COMP%]   .alert-content[_ngcontent-%COMP%]{flex:1}.alert[_ngcontent-%COMP%]   .alert-title[_ngcontent-%COMP%]{margin:0 0 4px;font-size:16px;font-weight:500}.alert[_ngcontent-%COMP%]   .alert-message[_ngcontent-%COMP%]{margin:0;color:#495057}@keyframes _ngcontent-%COMP%_slide-up{0%{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}.edit-form[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in .3s ease}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}.profile-header[_ngcontent-%COMP%]{background-color:#fff;border-radius:12px;box-shadow:0 2px 10px #0000000d;padding:24px;margin-bottom:24px;transition:all .3s ease}.profile-header[_ngcontent-%COMP%]:hover{box-shadow:0 8px 16px #0000001a}.profile-header[_ngcontent-%COMP%]   .avatar-upload[_ngcontent-%COMP%]{display:flex;align-items:center;gap:24px}@media (max-width: 768px){.profile-header[_ngcontent-%COMP%]   .avatar-upload[_ngcontent-%COMP%]{flex-direction:column;text-align:center}}.profile-header[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]{flex-shrink:0;width:100px;height:100px;margin:0}.profile-header[_ngcontent-%COMP%]   .avatar-info[_ngcontent-%COMP%]{flex:1}.profile-header[_ngcontent-%COMP%]   .student-name[_ngcontent-%COMP%]{margin:0 0 4px;font-size:20px;font-weight:500;color:#343a40}.profile-header[_ngcontent-%COMP%]   .student-email[_ngcontent-%COMP%]{margin:0 0 12px;color:#6c757d;font-size:16px}.profile-header[_ngcontent-%COMP%]   .selected-file-info[_ngcontent-%COMP%]{display:inline-block;max-width:400px}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:0}.form-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}.avatar-container[_ngcontent-%COMP%]{position:relative;width:150px;height:150px;border-radius:50%;overflow:hidden;margin-bottom:16px;border:4px solid #c8e1fb;box-shadow:0 4px 8px #0000001a;cursor:pointer;transition:all .3s ease}.avatar-container[_ngcontent-%COMP%]:hover{transform:scale(1.02);box-shadow:0 6px 12px #00000026}.avatar-container[_ngcontent-%COMP%]:hover   .avatar-overlay[_ngcontent-%COMP%]{opacity:1}.avatar-container[_ngcontent-%COMP%]:hover   .avatar-image[_ngcontent-%COMP%]{filter:brightness(.75)}.avatar-container[_ngcontent-%COMP%]   .avatar-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:all .3s ease}.avatar-container[_ngcontent-%COMP%]   .avatar-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;flex-direction:column;align-items:center;justify-content:center;opacity:0;transition:all .3s ease;color:#fff}.avatar-container[_ngcontent-%COMP%]   .avatar-overlay[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:32px;margin-bottom:8px}.avatar-container[_ngcontent-%COMP%]   .avatar-overlay[_ngcontent-%COMP%]   .avatar-text[_ngcontent-%COMP%]{font-size:14px;font-weight:500;background-color:#00000080;padding:4px 12px;border-radius:99px}.avatar-help-text[_ngcontent-%COMP%]{color:#6c757d;font-size:14px;text-align:center;margin-bottom:16px}.selected-file-info[_ngcontent-%COMP%]{background-color:#c8e1fb;color:#2c6cb0;padding:8px 12px;border-radius:8px;width:100%;text-align:center;animation:_ngcontent-%COMP%_fade-in .3s ease}.selected-file-info[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]{font-weight:500;font-size:14px;display:block}.selected-file-info[_ngcontent-%COMP%]   .file-size[_ngcontent-%COMP%]{font-size:12px}.selected-file-info[_ngcontent-%COMP%]   .file-notice[_ngcontent-%COMP%]{display:block;margin-top:4px;color:#6c757d;font-size:12px}.info-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:12px;overflow:hidden;box-shadow:0 2px 10px #0000000d;transition:all .3s ease}.info-card[_ngcontent-%COMP%]:hover{box-shadow:0 8px 16px #0000001a}.info-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:16px;border-bottom:1px solid #e9ecef}.info-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{font-size:20px;color:#4a90e2}.info-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:500;color:#343a40}.info-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:20px 16px}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:16px}.form-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}@media (max-width: 576px){.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}.form-field[_ngcontent-%COMP%]{position:relative}.material-input-container[_ngcontent-%COMP%]{position:relative;height:56px;border-radius:8px;overflow:hidden;transition:all .3s ease;box-shadow:0 0 0 1px #dee2e6}.material-input-container.focused[_ngcontent-%COMP%]{box-shadow:0 0 0 2px #4a90e24d}.material-input-container.error[_ngcontent-%COMP%]{box-shadow:0 0 0 2px #e539354d}.material-input-container.rutbe-select[_ngcontent-%COMP%]   .material-input[_ngcontent-%COMP%]{background-color:#4a90e20d}.material-input-container.rutbe-select.focused[_ngcontent-%COMP%]{box-shadow:0 0 0 2px #4a90e266}.material-input[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;padding:24px 16px 8px;border:none;background-color:#fff;font-size:16px;color:#343a40;outline:none}.material-input.material-select[_ngcontent-%COMP%]{appearance:none;padding-right:40px;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' stroke='%23666666' stroke-width='2' fill='none'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 16px center}.material-input-label[_ngcontent-%COMP%]{position:absolute;left:16px;top:50%;transform:translateY(-50%);font-size:16px;color:#adb5bd;transition:all .2s ease;pointer-events:none}.material-input-label.raised[_ngcontent-%COMP%]{top:8px;left:16px;font-size:12px;color:#4a90e2;font-weight:500}.error-message[_ngcontent-%COMP%]{margin-top:4px;color:#e53935;font-size:12px}.error-message[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{margin-left:4px}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;margin-top:8px}@media (max-width: 576px){.form-actions[_ngcontent-%COMP%]{flex-direction:column}}.button[_ngcontent-%COMP%]{padding:12px 24px;border:none;border-radius:8px;font-size:16px;font-weight:500;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center;gap:8px}.button[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.button.button-primary[_ngcontent-%COMP%]{background-color:#4a90e2;color:#fff;box-shadow:0 3px 5px -1px #0000001a,0 6px 10px #0000000a,0 1px 18px #00000005}.button.button-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#3483de}.button.button-primary[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(1px)}.button.button-secondary[_ngcontent-%COMP%]{background-color:#f5f7fa;color:#495057}.button.button-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#e4e9f2}.button.button-secondary[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(1px)}.spinner-small[_ngcontent-%COMP%]{display:inline-block;width:20px;height:20px;border-radius:50%;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;animation:_ngcontent-%COMP%_spinner 1s linear infinite}.visually-hidden[_ngcontent-%COMP%]{position:absolute;height:1px;width:1px;overflow:hidden;clip:rect(1px 1px 1px 1px);clip:rect(1px,1px,1px,1px);white-space:nowrap}`]})};function ge(i,e,t){return(e=function(n){var r=function(o,s){if(typeof o!="object"||!o)return o;var a=o[Symbol.toPrimitive];if(a!==void 0){var l=a.call(o,s||"default");if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(o)}(n,"string");return typeof r=="symbol"?r:r+""}(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function SB(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function ve(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?SB(Object(t),!0).forEach(function(n){ge(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):SB(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function vi(i,e){if(i==null)return{};var t,n,r=function(s,a){if(s==null)return{};var l={};for(var c in s)if({}.hasOwnProperty.call(s,c)){if(a.indexOf(c)>=0)continue;l[c]=s[c]}return l}(i,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(i);for(n=0;n<o.length;n++)t=o[n],e.indexOf(t)>=0||{}.propertyIsEnumerable.call(i,t)&&(r[t]=i[t])}return r}function Ad(i,e){return e||(e=i.slice(0)),Object.freeze(Object.defineProperties(i,{raw:{value:Object.freeze(e)}}))}var CC=class{constructor(){ge(this,"browserShadowBlurConstant",1),ge(this,"DPI",96),ge(this,"devicePixelRatio",typeof window<"u"?window.devicePixelRatio:1),ge(this,"perfLimitSizeTotal",2097152),ge(this,"maxCacheSideLimit",4096),ge(this,"minCacheSideLimit",256),ge(this,"disableStyleCopyPaste",!1),ge(this,"enableGLFiltering",!0),ge(this,"textureSize",4096),ge(this,"forceGLPutImageData",!1),ge(this,"cachesBoundsOfCurve",!1),ge(this,"fontPaths",{}),ge(this,"NUM_FRACTION_DIGITS",4)}},Fn=new class extends CC{constructor(i){super(),this.configure(i)}configure(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this,i)}addFonts(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fontPaths=ve(ve({},this.fontPaths),i)}removeFonts(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(i=>{delete this.fontPaths[i]})}clearFonts(){this.fontPaths={}}restoreDefaults(i){let e=new CC,t=i?.reduce((n,r)=>(n[r]=e[r],n),{})||e;this.configure(t)}},Pd=function(i){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return console[i]("fabric",...t)},Rs=class extends Error{constructor(e,t){super("fabric: ".concat(e),t)}},yC=class extends Rs{constructor(e){super("".concat(e," 'options.signal' is in 'aborted' state"))}},AS=class{},DS=class extends AS{testPrecision(e,t){let n="precision ".concat(t,` float;
void main(){}`),r=e.createShader(e.FRAGMENT_SHADER);return!!r&&(e.shaderSource(r,n),e.compileShader(r),!!e.getShaderParameter(r,e.COMPILE_STATUS))}queryWebGL(e){let t=e.getContext("webgl");t&&(this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find(n=>this.testPrecision(t,n)),t.getExtension("WEBGL_lose_context").loseContext(),Pd("log","WebGL: max texture size ".concat(this.maxTextureSize)))}isSupported(e){return!!this.maxTextureSize&&this.maxTextureSize>=e}},Nne={},kB;var vl=()=>kB||(kB={document,window,isTouchSupported:"ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,WebGLProbe:new DS,dispose(){},copyPasteData:Nne}),Uf=()=>vl().document,Jm=()=>vl().window,aN=()=>{var i;return Math.max((i=Fn.devicePixelRatio)!==null&&i!==void 0?i:Jm().devicePixelRatio,1)},jm=new class{constructor(){ge(this,"charWidthsCache",{}),ge(this,"boundsOfCurveCache",{})}getFontCache(i){let{fontFamily:e,fontStyle:t,fontWeight:n}=i;e=e.toLowerCase(),this.charWidthsCache[e]||(this.charWidthsCache[e]={});let r=this.charWidthsCache[e],o="".concat(t.toLowerCase(),"_").concat((n+"").toLowerCase());return r[o]||(r[o]={}),r[o]}clearFontCache(i){(i=(i||"").toLowerCase())?this.charWidthsCache[i]&&delete this.charWidthsCache[i]:this.charWidthsCache={}}limitDimsByArea(i){let{perfLimitSizeTotal:e}=Fn,t=Math.sqrt(e*i);return[Math.floor(t),Math.floor(e/t)]}},FS="6.6.5";function h0(){}var Od=Math.PI/2,xc=2*Math.PI,l3=Math.PI/180,ho=Object.freeze([1,0,0,1,0,0]),c3=16,bd=.4477152502,Qt="center",Nn="left",Lo="top",IS="bottom",$i="right",Ro="none",d3=/\r?\n/,lN="moving",YC="scaling",cN="rotating",u3="rotate",dN="skewing",Wm="resizing",uN="modifyPoly",Lne="modifyPath",wC="changed",XC="scale",fo="scaleX",ps="scaleY",Hf="skewX",Gf="skewY",_r="fill",zo="stroke",MC="modified",Sf="json",vS="svg",ft=new class{constructor(){this[Sf]=new Map,this[vS]=new Map}has(i){return this[Sf].has(i)}getClass(i){let e=this[Sf].get(i);if(!e)throw new Rs("No class registered for ".concat(i));return e}setClass(i,e){e?this[Sf].set(e,i):(this[Sf].set(i.type,i),this[Sf].set(i.type.toLowerCase(),i))}getSVGClass(i){return this[vS].get(i)}setSVGClass(i,e){this[vS].set(e??i.type.toLowerCase(),i)}},EC=new class extends Array{remove(i){let e=this.indexOf(i);e>-1&&this.splice(e,1)}cancelAll(){let i=this.splice(0);return i.forEach(e=>e.abort()),i}cancelByCanvas(i){if(!i)return[];let e=this.filter(t=>{var n;return t.target===i||typeof t.target=="object"&&((n=t.target)===null||n===void 0?void 0:n.canvas)===i});return e.forEach(t=>t.abort()),e}cancelByTarget(i){if(!i)return[];let e=this.filter(t=>t.target===i);return e.forEach(t=>t.abort()),e}},TS=class{constructor(){ge(this,"__eventListeners",{})}on(e,t){if(this.__eventListeners||(this.__eventListeners={}),typeof e=="object")return Object.entries(e).forEach(n=>{let[r,o]=n;this.on(r,o)}),()=>this.off(e);if(t){let n=e;return this.__eventListeners[n]||(this.__eventListeners[n]=[]),this.__eventListeners[n].push(t),()=>this.off(n,t)}return()=>!1}once(e,t){if(typeof e=="object"){let n=[];return Object.entries(e).forEach(r=>{let[o,s]=r;n.push(this.once(o,s))}),()=>n.forEach(r=>r())}if(t){let n=this.on(e,function(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];t.call(this,...o),n()});return n}return()=>!1}_removeEventListener(e,t){if(this.__eventListeners[e])if(t){let n=this.__eventListeners[e],r=n.indexOf(t);r>-1&&n.splice(r,1)}else this.__eventListeners[e]=[]}off(e,t){if(this.__eventListeners)if(e===void 0)for(let n in this.__eventListeners)this._removeEventListener(n);else typeof e=="object"?Object.entries(e).forEach(n=>{let[r,o]=n;this._removeEventListener(r,o)}):this._removeEventListener(e,t)}fire(e,t){var n;if(!this.__eventListeners)return;let r=(n=this.__eventListeners[e])===null||n===void 0?void 0:n.concat();if(r)for(let o=0;o<r.length;o++)r[o].call(this,t||{})}},Ku=(i,e)=>{let t=i.indexOf(e);return t!==-1&&i.splice(t,1),i},Pa=i=>{if(i===0)return 1;switch(Math.abs(i)/Od){case 1:case 3:return 0;case 2:return-1}return Math.cos(i)},Oa=i=>{if(i===0)return 0;let e=i/Od,t=Math.sign(i);switch(e){case 1:return t;case 2:return 0;case 3:return-t}return Math.sin(i)},De=class i{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;typeof e=="object"?(this.x=e.x,this.y=e.y):(this.x=e,this.y=t)}add(e){return new i(this.x+e.x,this.y+e.y)}addEquals(e){return this.x+=e.x,this.y+=e.y,this}scalarAdd(e){return new i(this.x+e,this.y+e)}scalarAddEquals(e){return this.x+=e,this.y+=e,this}subtract(e){return new i(this.x-e.x,this.y-e.y)}subtractEquals(e){return this.x-=e.x,this.y-=e.y,this}scalarSubtract(e){return new i(this.x-e,this.y-e)}scalarSubtractEquals(e){return this.x-=e,this.y-=e,this}multiply(e){return new i(this.x*e.x,this.y*e.y)}scalarMultiply(e){return new i(this.x*e,this.y*e)}scalarMultiplyEquals(e){return this.x*=e,this.y*=e,this}divide(e){return new i(this.x/e.x,this.y/e.y)}scalarDivide(e){return new i(this.x/e,this.y/e)}scalarDivideEquals(e){return this.x/=e,this.y/=e,this}eq(e){return this.x===e.x&&this.y===e.y}lt(e){return this.x<e.x&&this.y<e.y}lte(e){return this.x<=e.x&&this.y<=e.y}gt(e){return this.x>e.x&&this.y>e.y}gte(e){return this.x>=e.x&&this.y>=e.y}lerp(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;return t=Math.max(Math.min(1,t),0),new i(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t)}distanceFrom(e){let t=this.x-e.x,n=this.y-e.y;return Math.sqrt(t*t+n*n)}midPointFrom(e){return this.lerp(e)}min(e){return new i(Math.min(this.x,e.x),Math.min(this.y,e.y))}max(e){return new i(Math.max(this.x,e.x),Math.max(this.y,e.y))}toString(){return"".concat(this.x,",").concat(this.y)}setXY(e,t){return this.x=e,this.y=t,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setFromPoint(e){return this.x=e.x,this.y=e.y,this}swap(e){let t=this.x,n=this.y;this.x=e.x,this.y=e.y,e.x=t,e.y=n}clone(){return new i(this.x,this.y)}rotate(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:h3,n=Oa(e),r=Pa(e),o=this.subtract(t);return new i(o.x*r-o.y*n,o.x*n+o.y*r).add(t)}transform(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new i(e[0]*this.x+e[2]*this.y+(t?0:e[4]),e[1]*this.x+e[3]*this.y+(t?0:e[5]))}},h3=new De(0,0),vC=i=>!!i&&Array.isArray(i._objects);function hN(i){class e extends i{constructor(){super(...arguments),ge(this,"_objects",[])}_onObjectAdded(n){}_onObjectRemoved(n){}_onStackOrderChanged(n){}add(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];let s=this._objects.push(...r);return r.forEach(a=>this._onObjectAdded(a)),s}insertAt(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];return this._objects.splice(n,0,...o),o.forEach(a=>this._onObjectAdded(a)),this._objects.length}remove(){let n=this._objects,r=[];for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return s.forEach(l=>{let c=n.indexOf(l);c!==-1&&(n.splice(c,1),r.push(l),this._onObjectRemoved(l))}),r}forEachObject(n){this.getObjects().forEach((r,o,s)=>n(r,o,s))}getObjects(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return r.length===0?[...this._objects]:this._objects.filter(s=>s.isType(...r))}item(n){return this._objects[n]}isEmpty(){return this._objects.length===0}size(){return this._objects.length}contains(n,r){return!!this._objects.includes(n)||!!r&&this._objects.some(o=>o instanceof e&&o.contains(n,!0))}complexity(){return this._objects.reduce((n,r)=>n+=r.complexity?r.complexity():0,0)}sendObjectToBack(n){return!(!n||n===this._objects[0])&&(Ku(this._objects,n),this._objects.unshift(n),this._onStackOrderChanged(n),!0)}bringObjectToFront(n){return!(!n||n===this._objects[this._objects.length-1])&&(Ku(this._objects,n),this._objects.push(n),this._onStackOrderChanged(n),!0)}sendObjectBackwards(n,r){if(!n)return!1;let o=this._objects.indexOf(n);if(o!==0){let s=this.findNewLowerIndex(n,o,r);return Ku(this._objects,n),this._objects.splice(s,0,n),this._onStackOrderChanged(n),!0}return!1}bringObjectForward(n,r){if(!n)return!1;let o=this._objects.indexOf(n);if(o!==this._objects.length-1){let s=this.findNewUpperIndex(n,o,r);return Ku(this._objects,n),this._objects.splice(s,0,n),this._onStackOrderChanged(n),!0}return!1}moveObjectTo(n,r){return n!==this._objects[r]&&(Ku(this._objects,n),this._objects.splice(r,0,n),this._onStackOrderChanged(n),!0)}findNewLowerIndex(n,r,o){let s;if(o){s=r;for(let a=r-1;a>=0;--a)if(n.isOverlapping(this._objects[a])){s=a;break}}else s=r-1;return s}findNewUpperIndex(n,r,o){let s;if(o){s=r;for(let a=r+1;a<this._objects.length;++a)if(n.isOverlapping(this._objects[a])){s=a;break}}else s=r+1;return s}collectObjects(n){let{left:r,top:o,width:s,height:a}=n,{includeIntersecting:l=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=[],d=new De(r,o),h=d.add(new De(s,a));for(let p=this._objects.length-1;p>=0;p--){let g=this._objects[p];g.selectable&&g.visible&&(l&&g.intersectsWithRect(d,h)||g.isContainedWithinRect(d,h)||l&&g.containsPoint(d)||l&&g.containsPoint(h))&&c.push(g)}return c}}return e}var PC=class extends TS{_setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(let t in e)this.set(t,e[t])}_setObject(e){for(let t in e)this._set(t,e[t])}set(e,t){return typeof e=="object"?this._setObject(e):this._set(e,t),this}_set(e,t){this[e]=t}toggle(e){let t=this.get(e);return typeof t=="boolean"&&this.set(e,!t),this}get(e){return this[e]}};function Vm(i){return Jm().requestAnimationFrame(i)}function fN(i){return Jm().cancelAnimationFrame(i)}var Rne=0,Sd=()=>Rne++,js=()=>{let i=Uf().createElement("canvas");if(!i||i.getContext===void 0)throw new Rs("Failed to create `canvas` element");return i},gN=()=>Uf().createElement("img"),ms=i=>{let e=js();return e.width=i.width,e.height=i.height,e},f3=(i,e,t)=>i.toDataURL("image/".concat(e),t),g3=(i,e,t)=>new Promise((n,r)=>{i.toBlob(n,"image/".concat(e),t)}),Ii=i=>i*l3,bl=i=>i/l3,pN=i=>i.every((e,t)=>e===ho[t]),Wr=(i,e,t)=>new De(i).transform(e,t),gs=i=>{let e=1/(i[0]*i[3]-i[1]*i[2]),t=[e*i[3],-e*i[1],-e*i[2],e*i[0],0,0],{x:n,y:r}=new De(i[4],i[5]).transform(t,!0);return t[4]=-n,t[5]=-r,t},Ti=(i,e,t)=>[i[0]*e[0]+i[2]*e[1],i[1]*e[0]+i[3]*e[1],i[0]*e[2]+i[2]*e[3],i[1]*e[2]+i[3]*e[3],t?0:i[0]*e[4]+i[2]*e[5]+i[4],t?0:i[1]*e[4]+i[3]*e[5]+i[5]],QC=(i,e)=>i.reduceRight((t,n)=>n&&t?Ti(n,t,e):n||t,void 0)||ho.concat(),mN=i=>{let[e,t]=i;return Math.atan2(t,e)},Lf=i=>{let e=mN(i),t=Math.pow(i[0],2)+Math.pow(i[1],2),n=Math.sqrt(t),r=(i[0]*i[3]-i[2]*i[1])/n,o=Math.atan2(i[0]*i[2]+i[1]*i[3],t);return{angle:bl(e),scaleX:n,scaleY:r,skewX:bl(o),skewY:0,translateX:i[4]||0,translateY:i[5]||0}},$f=function(i){return[1,0,0,1,i,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0]};function x0(){let{angle:i=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{x:e=0,y:t=0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=Ii(i),r=Pa(n),o=Oa(n);return[r,o,-o,r,e?e-(r*e-o*t):0,t?t-(o*e+r*t):0]}var JC=function(i){return[i,0,0,arguments.length>1&&arguments[1]!==void 0?arguments[1]:i,0,0]},xN=i=>Math.tan(Ii(i)),p3=i=>[1,0,xN(i),1,0,0],m3=i=>[1,xN(i),0,1,0,0],Zm=i=>{let{scaleX:e=1,scaleY:t=1,flipX:n=!1,flipY:r=!1,skewX:o=0,skewY:s=0}=i,a=JC(n?-e:e,r?-t:t);return o&&(a=Ti(a,p3(o),!0)),s&&(a=Ti(a,m3(s),!0)),a},_N=i=>{let{translateX:e=0,translateY:t=0,angle:n=0}=i,r=$f(e,t);n&&(r=Ti(r,x0({angle:n})));let o=Zm(i);return pN(o)||(r=Ti(r,o)),r},Um=function(i){let{signal:e,crossOrigin:t=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(n,r){if(e&&e.aborted)return r(new yC("loadImage"));let o=gN(),s;e&&(s=function(l){o.src="",r(l)},e.addEventListener("abort",s,{once:!0}));let a=function(){o.onload=o.onerror=null,s&&e?.removeEventListener("abort",s),n(o)};i?(o.onload=a,o.onerror=function(){s&&e?.removeEventListener("abort",s),r(new Rs("Error loading ".concat(o.src)))},t&&(o.crossOrigin=t),o.src=i):a()})},Rf=function(i){let{signal:e,reviver:t=h0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((n,r)=>{let o=[];e&&e.addEventListener("abort",r,{once:!0}),Promise.all(i.map(s=>ft.getClass(s.type).fromObject(s,{signal:e}).then(a=>(t(s,a),o.push(a),a)))).then(n).catch(s=>{o.forEach(a=>{a.dispose&&a.dispose()}),r(s)}).finally(()=>{e&&e.removeEventListener("abort",r)})})},ex=function(i){let{signal:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((t,n)=>{let r=[];e&&e.addEventListener("abort",n,{once:!0});let o=Object.values(i).map(a=>a&&a.type&&ft.has(a.type)?Rf([a],{signal:e}).then(l=>{let[c]=l;return r.push(c),c}):a),s=Object.keys(i);Promise.all(o).then(a=>a.reduce((l,c,d)=>(l[s[d]]=c,l),{})).then(t).catch(a=>{r.forEach(l=>{l.dispose&&l.dispose()}),n(a)}).finally(()=>{e&&e.removeEventListener("abort",n)})})},_0=function(i){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:[]).reduce((e,t)=>(t in i&&(e[t]=i[t]),e),{})},x3=(i,e)=>Object.keys(i).reduce((t,n)=>(e(i[n],n,i)&&(t[n]=i[n]),t),{}),gi=(i,e)=>parseFloat(Number(i).toFixed(e)),zf=i=>"matrix("+i.map(e=>gi(e,Fn.NUM_FRACTION_DIGITS)).join(" ")+")",Ls=i=>!!i&&i.toLive!==void 0,AB=i=>!!i&&typeof i.toObject=="function",DB=i=>!!i&&i.offsetX!==void 0&&"source"in i,Yu=i=>!!i&&"multiSelectionStacking"in i;function vN(i){let e=i&&wa(i),t=0,n=0;if(!i||!e)return{left:t,top:n};let r=i,o=e.documentElement,s=e.body||{scrollLeft:0,scrollTop:0};for(;r&&(r.parentNode||r.host)&&(r=r.parentNode||r.host,r===e?(t=s.scrollLeft||o.scrollLeft||0,n=s.scrollTop||o.scrollTop||0):(t+=r.scrollLeft||0,n+=r.scrollTop||0),r.nodeType!==1||r.style.position!=="fixed"););return{left:t,top:n}}var wa=i=>i.ownerDocument||null,bN=i=>{var e;return((e=i.ownerDocument)===null||e===void 0?void 0:e.defaultView)||null},CN=function(i,e,t){let{width:n,height:r}=t,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;i.width=n,i.height=r,o>1&&(i.setAttribute("width",(n*o).toString()),i.setAttribute("height",(r*o).toString()),e.scale(o,o))},BS=(i,e)=>{let{width:t,height:n}=e;t&&(i.style.width=typeof t=="number"?"".concat(t,"px"):t),n&&(i.style.height=typeof n=="number"?"".concat(n,"px"):n)};function FB(i){return i.onselectstart!==void 0&&(i.onselectstart=()=>!1),i.style.userSelect=Ro,i}var OC=class{constructor(e){ge(this,"_originalCanvasStyle",void 0),ge(this,"lower",void 0);let t=this.createLowerCanvas(e);this.lower={el:t,ctx:t.getContext("2d")}}createLowerCanvas(e){let t=(n=e)&&n.getContext!==void 0?e:e&&Uf().getElementById(e)||js();var n;if(t.hasAttribute("data-fabric"))throw new Rs("Trying to initialize a canvas that has already been initialized. Did you forget to dispose the canvas?");return this._originalCanvasStyle=t.style.cssText,t.setAttribute("data-fabric","main"),t.classList.add("lower-canvas"),t}cleanupDOM(e){let{width:t,height:n}=e,{el:r}=this.lower;r.classList.remove("lower-canvas"),r.removeAttribute("data-fabric"),r.setAttribute("width","".concat(t)),r.setAttribute("height","".concat(n)),r.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(e,t){let{el:n,ctx:r}=this.lower;CN(n,r,e,t)}setCSSDimensions(e){BS(this.lower.el,e)}calcOffset(){return function(e){var t;let n=e&&wa(e),r={left:0,top:0};if(!n)return r;let o=((t=bN(e))===null||t===void 0?void 0:t.getComputedStyle(e,null))||{};r.left+=parseInt(o.borderLeftWidth,10)||0,r.top+=parseInt(o.borderTopWidth,10)||0,r.left+=parseInt(o.paddingLeft,10)||0,r.top+=parseInt(o.paddingTop,10)||0;let s={left:0,top:0},a=n.documentElement;e.getBoundingClientRect!==void 0&&(s=e.getBoundingClientRect());let l=vN(e);return{left:s.left+l.left-(a.clientLeft||0)+r.left,top:s.top+l.top-(a.clientTop||0)+r.top}}(this.lower.el)}dispose(){vl().dispose(this.lower.el),delete this.lower}},zne={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[...ho]},qm=class i extends hN(PC){get lowerCanvasEl(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.el}get contextContainer(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.ctx}static getDefaults(){return i.ownDefaults}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(t),this.initElements(e),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.skipControlsDrawing=!1,this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(e){this.elements=new OC(e)}add(){let e=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}insertAt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];let o=super.insertAt(e,...n);return n.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),o}remove(){let e=super.remove(...arguments);return e.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}_onObjectAdded(e){e.canvas&&e.canvas!==this&&(Pd("warn",`Canvas is trying to add an object that belongs to a different canvas.
Resulting to default behavior: removing object from previous canvas and adding to new canvas`),e.canvas.remove(e)),e._set("canvas",this),e.setCoords(),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e){e._set("canvas",void 0),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}getRetinaScaling(){return this.enableRetinaScaling?aN():1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}setWidth(e,t){return this.setDimensions({width:e},t)}setHeight(e,t){return this.setDimensions({height:e},t)}_setDimensionsImpl(e){let{cssOnly:t=!1,backstoreOnly:n=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t){let r=ve({width:this.width,height:this.height},e);this.elements.setDimensions(r,this.getRetinaScaling()),this.hasLostContext=!0,this.width=r.width,this.height=r.height}n||this.elements.setCSSDimensions(e),this.calcOffset()}setDimensions(e,t){this._setDimensionsImpl(e,t),t&&t.cssOnly||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(e){this.viewportTransform=e,this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(e,t){let n=e,r=[...this.viewportTransform],o=Wr(e,gs(r));r[0]=t,r[3]=t;let s=Wr(o,r);r[4]+=n.x-s.x,r[5]+=n.y-s.y,this.setViewportTransform(r)}setZoom(e){this.zoomToPoint(new De(0,0),e)}absolutePan(e){let t=[...this.viewportTransform];return t[4]=-e.x,t[5]=-e.y,this.setViewportTransform(t)}relativePan(e){return this.absolutePan(new De(-e.x-this.viewportTransform[4],-e.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(e){e.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),this.destroyed||this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){this.nextRenderHandle||this.disposed||this.destroyed||(this.nextRenderHandle=Vm(()=>this.renderAndReset()))}calcViewportBoundaries(){let e=this.width,t=this.height,n=gs(this.viewportTransform),r=Wr({x:0,y:0},n),o=Wr({x:e,y:t},n),s=r.min(o),a=r.max(o);return this.vptCoords={tl:s,tr:new De(a.x,s.y),bl:new De(s.x,a.y),br:a}}cancelRequestedRender(){this.nextRenderHandle&&(fN(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(e){}renderCanvas(e,t){if(this.destroyed)return;let n=this.viewportTransform,r=this.clipPath;this.calcViewportBoundaries(),this.clearContext(e),e.imageSmoothingEnabled=this.imageSmoothingEnabled,e.patternQuality="best",this.fire("before:render",{ctx:e}),this._renderBackground(e),e.save(),e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this._renderObjects(e,t),e.restore(),this.controlsAboveOverlay||this.skipControlsDrawing||this.drawControls(e),r&&(r._set("canvas",this),r.shouldCache(),r._transformDone=!0,r.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(e,r)),this._renderOverlay(e),this.controlsAboveOverlay&&!this.skipControlsDrawing&&this.drawControls(e),this.fire("after:render",{ctx:e}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(e,t){let n=this.viewportTransform;e.save(),e.transform(...n),e.globalCompositeOperation="destination-in",t.transform(e),e.scale(1/t.zoomX,1/t.zoomY),e.drawImage(t._cacheCanvas,-t.cacheTranslationX,-t.cacheTranslationY),e.restore()}_renderObjects(e,t){for(let n=0,r=t.length;n<r;++n)t[n]&&t[n].render(e)}_renderBackgroundOrOverlay(e,t){let n=this["".concat(t,"Color")],r=this["".concat(t,"Image")],o=this.viewportTransform,s=this["".concat(t,"Vpt")];if(!n&&!r)return;let a=Ls(n);if(n){if(e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(this.width,0),e.lineTo(this.width,this.height),e.lineTo(0,this.height),e.closePath(),e.fillStyle=a?n.toLive(e):n,s&&e.transform(...o),a){e.transform(1,0,0,1,n.offsetX||0,n.offsetY||0);let l=n.gradientTransform||n.patternTransform;l&&e.transform(...l)}e.fill(),e.restore()}if(r){e.save();let{skipOffscreen:l}=this;this.skipOffscreen=s,s&&e.transform(...o),r.render(e),this.skipOffscreen=l,e.restore()}}_renderBackground(e){this._renderBackgroundOrOverlay(e,"background")}_renderOverlay(e){this._renderBackgroundOrOverlay(e,"overlay")}getCenter(){return{top:this.height/2,left:this.width/2}}getCenterPoint(){return new De(this.width/2,this.height/2)}centerObjectH(e){return this._centerObject(e,new De(this.getCenterPoint().x,e.getCenterPoint().y))}centerObjectV(e){return this._centerObject(e,new De(e.getCenterPoint().x,this.getCenterPoint().y))}centerObject(e){return this._centerObject(e,this.getCenterPoint())}viewportCenterObject(e){return this._centerObject(e,this.getVpCenter())}viewportCenterObjectH(e){return this._centerObject(e,new De(this.getVpCenter().x,e.getCenterPoint().y))}viewportCenterObjectV(e){return this._centerObject(e,new De(e.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return Wr(this.getCenterPoint(),gs(this.viewportTransform))}_centerObject(e,t){e.setXY(t,Qt,Qt),e.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(e){return this.toDatalessObject(e)}toObject(e){return this._toObjectMethod("toObject",e)}toJSON(){return this.toObject()}toDatalessObject(e){return this._toObjectMethod("toDatalessObject",e)}_toObjectMethod(e,t){let n=this.clipPath,r=n&&!n.excludeFromExport?this._toObject(n,e,t):null;return ve(ve(ve({version:FS},_0(this,t)),{},{objects:this._objects.filter(o=>!o.excludeFromExport).map(o=>this._toObject(o,e,t))},this.__serializeBgOverlay(e,t)),r?{clipPath:r}:null)}_toObject(e,t,n){let r;this.includeDefaultValues||(r=e.includeDefaultValues,e.includeDefaultValues=!1);let o=e[t](n);return this.includeDefaultValues||(e.includeDefaultValues=!!r),o}__serializeBgOverlay(e,t){let n={},r=this.backgroundImage,o=this.overlayImage,s=this.backgroundColor,a=this.overlayColor;return Ls(s)?s.excludeFromExport||(n.background=s.toObject(t)):s&&(n.background=s),Ls(a)?a.excludeFromExport||(n.overlay=a.toObject(t)):a&&(n.overlay=a),r&&!r.excludeFromExport&&(n.backgroundImage=this._toObject(r,e,t)),o&&!o.excludeFromExport&&(n.overlayImage=this._toObject(o,e,t)),n}toSVG(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;e.reviver=t;let n=[];return this._setSVGPreamble(n,e),this._setSVGHeader(n,e),this.clipPath&&n.push('<g clip-path="url(#'.concat(this.clipPath.clipPathId,`)" >
`)),this._setSVGBgOverlayColor(n,"background"),this._setSVGBgOverlayImage(n,"backgroundImage",t),this._setSVGObjects(n,t),this.clipPath&&n.push(`</g>
`),this._setSVGBgOverlayColor(n,"overlay"),this._setSVGBgOverlayImage(n,"overlayImage",t),n.push("</svg>"),n.join("")}_setSVGPreamble(e,t){t.suppressPreamble||e.push('<?xml version="1.0" encoding="',t.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)}_setSVGHeader(e,t){let n=t.width||"".concat(this.width),r=t.height||"".concat(this.height),o=Fn.NUM_FRACTION_DIGITS,s=t.viewBox,a;if(s)a='viewBox="'.concat(s.x," ").concat(s.y," ").concat(s.width," ").concat(s.height,'" ');else if(this.svgViewportTransformation){let l=this.viewportTransform;a='viewBox="'.concat(gi(-l[4]/l[0],o)," ").concat(gi(-l[5]/l[3],o)," ").concat(gi(this.width/l[0],o)," ").concat(gi(this.height/l[3],o),'" ')}else a='viewBox="0 0 '.concat(this.width," ").concat(this.height,'" ');e.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',n,'" ','height="',r,'" ',a,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",FS,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(t),`</defs>
`)}createSVGClipPathMarkup(e){let t=this.clipPath;return t?(t.clipPathId="CLIPPATH_".concat(Sd()),'<clipPath id="'.concat(t.clipPathId,`" >
`).concat(t.toClipPathSVG(e.reviver),`</clipPath>
`)):""}createSVGRefElementsMarkup(){return["background","overlay"].map(e=>{let t=this["".concat(e,"Color")];if(Ls(t)){let n=this["".concat(e,"Vpt")],r=this.viewportTransform,o={isType:()=>!1,width:this.width/(n?r[0]:1),height:this.height/(n?r[3]:1)};return t.toSVG(o,{additionalTransform:n?zf(r):""})}}).join("")}createSVGFontFacesMarkup(){let e=[],t={},n=Fn.fontPaths;this._objects.forEach(function o(s){e.push(s),vC(s)&&s._objects.forEach(o)}),e.forEach(o=>{if(!(s=o)||typeof s._renderText!="function")return;var s;let{styles:a,fontFamily:l}=o;!t[l]&&n[l]&&(t[l]=!0,a&&Object.values(a).forEach(c=>{Object.values(c).forEach(d=>{let{fontFamily:h=""}=d;!t[h]&&n[h]&&(t[h]=!0)})}))});let r=Object.keys(t).map(o=>`		@font-face {
			font-family: '`.concat(o,`';
			src: url('`).concat(n[o],`');
		}
`)).join("");return r?`	<style type="text/css"><![CDATA[
`.concat(r,`]]></style>
`):""}_setSVGObjects(e,t){this.forEachObject(n=>{n.excludeFromExport||this._setSVGObject(e,n,t)})}_setSVGObject(e,t,n){e.push(t.toSVG(n))}_setSVGBgOverlayImage(e,t,n){let r=this[t];r&&!r.excludeFromExport&&r.toSVG&&e.push(r.toSVG(n))}_setSVGBgOverlayColor(e,t){let n=this["".concat(t,"Color")];if(n)if(Ls(n)){let r=n.repeat||"",o=this.width,s=this.height,a=this["".concat(t,"Vpt")]?zf(gs(this.viewportTransform)):"";e.push('<rect transform="'.concat(a," translate(").concat(o/2,",").concat(s/2,')" x="').concat(n.offsetX-o/2,'" y="').concat(n.offsetY-s/2,'" width="').concat(r!=="repeat-y"&&r!=="no-repeat"||!DB(n)?o:n.source.width,'" height="').concat(r!=="repeat-x"&&r!=="no-repeat"||!DB(n)?s:n.source.height,'" fill="url(#SVGID_').concat(n.id,`)"></rect>
`))}else e.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',n,'"',`></rect>
`)}loadFromJSON(e,t){let{signal:n}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e)return Promise.reject(new Rs("`json` is undefined"));let r=typeof e=="string"?JSON.parse(e):e,{objects:o=[],backgroundImage:s,background:a,overlayImage:l,overlay:c,clipPath:d}=r,h=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([Rf(o,{reviver:t,signal:n}),ex({backgroundImage:s,backgroundColor:a,overlayImage:l,overlayColor:c,clipPath:d},{signal:n})]).then(p=>{let[g,_]=p;return this.clear(),this.add(...g),this.set(r),this.set(_),this.renderOnAddRemove=h,this})}clone(e){let t=this.toObject(e);return this.cloneWithoutData().loadFromJSON(t)}cloneWithoutData(){let e=ms(this);return new this.constructor(e)}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{format:t="png",quality:n=1,multiplier:r=1,enableRetinaScaling:o=!1}=e,s=r*(o?this.getRetinaScaling():1);return f3(this.toCanvasElement(s,e),t,n)}toBlob(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{format:t="png",quality:n=1,multiplier:r=1,enableRetinaScaling:o=!1}=e,s=r*(o?this.getRetinaScaling():1);return g3(this.toCanvasElement(s,e),t,n)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,{width:t,height:n,left:r,top:o,filter:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=(t||this.width)*e,l=(n||this.height)*e,c=this.getZoom(),d=this.width,h=this.height,p=this.skipControlsDrawing,g=c*e,_=this.viewportTransform,b=[g,0,0,g,(_[4]-(r||0))*e,(_[5]-(o||0))*e],C=this.enableRetinaScaling,y=ms({width:a,height:l}),M=s?this._objects.filter(O=>s(O)):this._objects;return this.enableRetinaScaling=!1,this.viewportTransform=b,this.width=a,this.height=l,this.skipControlsDrawing=!0,this.calcViewportBoundaries(),this.renderCanvas(y.getContext("2d"),M),this.viewportTransform=_,this.width=d,this.height=h,this.calcViewportBoundaries(),this.enableRetinaScaling=C,this.skipControlsDrawing=p,y}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),EC.cancelByCanvas(this),this.disposed=!0,new Promise((e,t)=>{let n=()=>{this.destroy(),e(!0)};n.kill=t,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?e(!1):this.nextRenderHandle?this.__cleanupTask=n:n()})}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject(e=>e.dispose()),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return"#<Canvas (".concat(this.complexity(),"): { objects: ").concat(this._objects.length," }>")}};ge(qm,"ownDefaults",zne);var jne=["touchstart","touchmove","touchend"],yN=i=>{let e=vN(i.target),t=function(n){let r=n.changedTouches;return r&&r[0]?r[0]:n}(i);return new De(t.clientX+e.left,t.clientY+e.top)},SC=i=>jne.includes(i.type)||i.pointerType==="touch",IB=i=>{i.preventDefault(),i.stopPropagation()},_l=i=>{let e=0,t=0,n=0,r=0;for(let o=0,s=i.length;o<s;o++){let{x:a,y:l}=i[o];(a>n||!o)&&(n=a),(a<e||!o)&&(e=a),(l>r||!o)&&(r=l),(l<t||!o)&&(t=l)}return{left:e,top:t,width:n-e,height:r-t}},Vne=["translateX","translateY","scaleX","scaleY"],wN=(i,e)=>jf(i,Ti(e,i.calcOwnMatrix())),jf=(i,e)=>{let t=Lf(e),{translateX:n,translateY:r,scaleX:o,scaleY:s}=t,a=vi(t,Vne),l=new De(n,r);i.flipX=!1,i.flipY=!1,Object.assign(i,a),i.set({scaleX:o,scaleY:s}),i.setPositionByOrigin(l,Qt,Qt)},MN=i=>{i.scaleX=1,i.scaleY=1,i.skewX=0,i.skewY=0,i.flipX=!1,i.flipY=!1,i.rotate(0)},_3=i=>({scaleX:i.scaleX,scaleY:i.scaleY,skewX:i.skewX,skewY:i.skewY,angle:i.angle,left:i.left,flipX:i.flipX,flipY:i.flipY,top:i.top}),ZC=(i,e,t)=>{let n=i/2,r=e/2,o=[new De(-n,-r),new De(n,-r),new De(-n,r),new De(n,r)].map(a=>a.transform(t)),s=_l(o);return new De(s.width,s.height)},tx=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ho;return Ti(gs(arguments.length>1&&arguments[1]!==void 0?arguments[1]:ho),i)},mc=function(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ho,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ho;return i.transform(tx(e,t))},EN=function(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ho,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ho;return i.transform(tx(e,t),!0)},NS=(i,e,t)=>{let n=tx(e,t);return jf(i,Ti(n,i.calcOwnMatrix())),n},v3=(i,e)=>{var t;let{transform:{target:n}}=e;(t=n.canvas)===null||t===void 0||t.fire("object:".concat(i),ve(ve({},e),{},{target:n})),n.fire(i,e)},Une={left:-.5,top:-.5,center:0,bottom:.5,right:.5},ir=i=>typeof i=="string"?Une[i]:i-.5,kC="not-allowed";function PN(i){return ir(i.originX)===ir(Qt)&&ir(i.originY)===ir(Qt)}function TB(i){return .5-ir(i)}var Ea=(i,e)=>i[e],b3=(i,e,t,n)=>({e:i,transform:e,pointer:new De(t,n)});function ON(i,e){let t=i.getTotalAngle()+bl(Math.atan2(e.y,e.x))+360;return Math.round(t%360/45)}function ey(i,e,t,n,r){var o;let{target:s,corner:a}=i,l=s.controls[a],c=((o=s.canvas)===null||o===void 0?void 0:o.getZoom())||1,d=s.padding/c,h=function(p,g,_,b){let C=p.getRelativeCenterPoint(),y=_!==void 0&&b!==void 0?p.translateToGivenOrigin(C,Qt,Qt,_,b):new De(p.left,p.top);return(p.angle?g.rotate(-Ii(p.angle),C):g).subtract(y)}(s,new De(n,r),e,t);return h.x>=d&&(h.x-=d),h.x<=-d&&(h.x+=d),h.y>=d&&(h.y-=d),h.y<=d&&(h.y+=d),h.x-=l.offsetX,h.y-=l.offsetY,h}var SN=(i,e,t,n)=>{let{target:r,offsetX:o,offsetY:s}=e,a=t-o,l=n-s,c=!Ea(r,"lockMovementX")&&r.left!==a,d=!Ea(r,"lockMovementY")&&r.top!==l;return c&&r.set(Nn,a),d&&r.set(Lo,l),(c||d)&&v3(lN,b3(i,e,t,n)),c||d},BB={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},bS=(i,e,t)=>(t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+6*(e-i)*t:t<.5?e:t<2/3?i+(e-i)*(2/3-t)*6:i),NB=(i,e,t,n)=>{i/=255,e/=255,t/=255;let r=Math.max(i,e,t),o=Math.min(i,e,t),s,a,l=(r+o)/2;if(r===o)s=a=0;else{let c=r-o;switch(a=l>.5?c/(2-r-o):c/(r+o),r){case i:s=(e-t)/c+(e<t?6:0);break;case e:s=(t-i)/c+2;break;case t:s=(i-e)/c+4}s/=6}return[Math.round(360*s),Math.round(100*a),Math.round(100*l),n]},LB=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"1";return parseFloat(i)/(i.endsWith("%")?100:1)},hC=i=>Math.min(Math.round(i),255).toString(16).toUpperCase().padStart(2,"0"),RB=i=>{let[e,t,n,r=1]=i,o=Math.round(.3*e+.59*t+.11*n);return[o,o,o,r]},qr=class i{constructor(e){if(ge(this,"isUnrecognised",!1),e)if(e instanceof i)this.setSource([...e._source]);else if(Array.isArray(e)){let[t,n,r,o=1]=e;this.setSource([t,n,r,o])}else this.setSource(this._tryParsingColor(e));else this.setSource([0,0,0,1])}_tryParsingColor(e){return(e=e.toLowerCase())in BB&&(e=BB[e]),e==="transparent"?[255,255,255,0]:i.sourceFromHex(e)||i.sourceFromRgb(e)||i.sourceFromHsl(e)||(this.isUnrecognised=!0)&&[0,0,0,1]}getSource(){return this._source}setSource(e){this._source=e}toRgb(){let[e,t,n]=this.getSource();return"rgb(".concat(e,",").concat(t,",").concat(n,")")}toRgba(){return"rgba(".concat(this.getSource().join(","),")")}toHsl(){let[e,t,n]=NB(...this.getSource());return"hsl(".concat(e,",").concat(t,"%,").concat(n,"%)")}toHsla(){let[e,t,n,r]=NB(...this.getSource());return"hsla(".concat(e,",").concat(t,"%,").concat(n,"%,").concat(r,")")}toHex(){return this.toHexa().slice(0,6)}toHexa(){let[e,t,n,r]=this.getSource();return"".concat(hC(e)).concat(hC(t)).concat(hC(n)).concat(hC(Math.round(255*r)))}getAlpha(){return this.getSource()[3]}setAlpha(e){return this._source[3]=e,this}toGrayscale(){return this.setSource(RB(this.getSource())),this}toBlackWhite(e){let[t,,,n]=RB(this.getSource()),r=t<(e||127)?0:255;return this.setSource([r,r,r,n]),this}overlayWith(e){e instanceof i||(e=new i(e));let t=this.getSource(),n=e.getSource(),[r,o,s]=t.map((a,l)=>Math.round(.5*a+.5*n[l]));return this.setSource([r,o,s,t[3]]),this}static fromRgb(e){return i.fromRgba(e)}static fromRgba(e){return new i(i.sourceFromRgb(e))}static sourceFromRgb(e){let t=e.match(/^rgba?\(\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d{0,3}(?:\.\d+)?%?)\s*)?\)$/i);if(t){let[n,r,o]=t.slice(1,4).map(s=>{let a=parseFloat(s);return s.endsWith("%")?Math.round(2.55*a):a});return[n,r,o,LB(t[4])]}}static fromHsl(e){return i.fromHsla(e)}static fromHsla(e){return new i(i.sourceFromHsl(e))}static sourceFromHsl(e){let t=e.match(/^hsla?\(\s*([+-]?\d{0,3}(?:\.\d+)?(?:deg|turn|rad)?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d*(?:\.\d+)?%?)\s*)?\)$/i);if(!t)return;let n=(i.parseAngletoDegrees(t[1])%360+360)%360/360,r=parseFloat(t[2])/100,o=parseFloat(t[3])/100,s,a,l;if(r===0)s=a=l=o;else{let c=o<=.5?o*(r+1):o+r-o*r,d=2*o-c;s=bS(d,c,n+1/3),a=bS(d,c,n),l=bS(d,c,n-1/3)}return[Math.round(255*s),Math.round(255*a),Math.round(255*l),LB(t[4])]}static fromHex(e){return new i(i.sourceFromHex(e))}static sourceFromHex(e){if(e.match(/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i)){let t=e.slice(e.indexOf("#")+1),n;n=t.length<=4?t.split("").map(l=>l+l):t.match(/.{2}/g);let[r,o,s,a=255]=n.map(l=>parseInt(l,16));return[r,o,s,a/255]}}static parseAngletoDegrees(e){let t=e.toLowerCase(),n=parseFloat(t);return t.includes("rad")?bl(n):t.includes("turn")?360*n:n}},f0=function(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:c3,t=/\D{0,2}$/.exec(i),n=parseFloat(i),r=Fn.DPI;switch(t?.[0]){case"mm":return n*r/25.4;case"cm":return n*r/2.54;case"in":return n*r;case"pt":return n*r/72;case"pc":return n*r/72*12;case"em":return n*e;default:return n}},kN=i=>{let[e,t]=i.trim().split(" "),[n,r]=(o=e)&&o!==Ro?[o.slice(1,4),o.slice(5,8)]:o===Ro?[o,o]:["Mid","Mid"];var o;return{meetOrSlice:t||"meet",alignX:n,alignY:r}},Km=function(i,e){let t,n,r=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(e)if(e.toLive)t="url(#SVGID_".concat(e.id,")");else{let o=new qr(e),s=o.getAlpha();t=o.toRgb(),s!==1&&(n=s.toString())}else t="none";return r?"".concat(i,": ").concat(t,"; ").concat(n?"".concat(i,"-opacity: ").concat(n,"; "):""):"".concat(i,'="').concat(t,'" ').concat(n?"".concat(i,'-opacity="').concat(n,'" '):"")},AC=class{getSvgStyles(e){let t=this.fillRule?this.fillRule:"nonzero",n=this.strokeWidth?this.strokeWidth:"0",r=this.strokeDashArray?this.strokeDashArray.join(" "):Ro,o=this.strokeDashOffset?this.strokeDashOffset:"0",s=this.strokeLineCap?this.strokeLineCap:"butt",a=this.strokeLineJoin?this.strokeLineJoin:"miter",l=this.strokeMiterLimit?this.strokeMiterLimit:"4",c=this.opacity!==void 0?this.opacity:"1",d=this.visible?"":" visibility: hidden;",h=e?"":this.getSvgFilter(),p=Km(_r,this.fill);return[Km(zo,this.stroke),"stroke-width: ",n,"; ","stroke-dasharray: ",r,"; ","stroke-linecap: ",s,"; ","stroke-dashoffset: ",o,"; ","stroke-linejoin: ",a,"; ","stroke-miterlimit: ",l,"; ",p,"fill-rule: ",t,"; ","opacity: ",c,";",h,d].join("")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",n=e?this.calcTransformMatrix():this.calcOwnMatrix(),r='transform="'.concat(zf(n));return"".concat(r).concat(t,'" ')}_toSVG(e){return[""]}toSVG(e){return this._createBaseSVGMarkup(this._toSVG(e),{reviver:e})}toClipPathSVG(e){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(e),{reviver:e})}_createBaseClipPathSVGMarkup(e){let{reviver:t,additionalTransform:n=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=[this.getSvgTransform(!0,n),this.getSvgCommons()].join(""),o=e.indexOf("COMMON_PARTS");return e[o]=r,t?t(e.join("")):e.join("")}_createBaseSVGMarkup(e){let{noStyle:t,reviver:n,withShadow:r,additionalTransform:o}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=t?"":'style="'.concat(this.getSvgStyles(),'" '),a=r?'style="'.concat(this.getSvgFilter(),'" '):"",l=this.clipPath,c=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",d=l&&l.absolutePositioned,h=this.stroke,p=this.fill,g=this.shadow,_=[],b=e.indexOf("COMMON_PARTS"),C;l&&(l.clipPathId="CLIPPATH_".concat(Sd()),C='<clipPath id="'.concat(l.clipPathId,`" >
`).concat(l.toClipPathSVG(n),`</clipPath>
`)),d&&_.push("<g ",a,this.getSvgCommons(),` >
`),_.push("<g ",this.getSvgTransform(!1),d?"":a+this.getSvgCommons(),` >
`);let y=[s,c,t?"":this.addPaintOrder()," ",o?'transform="'.concat(o,'" '):""].join("");return e[b]=y,Ls(p)&&_.push(p.toSVG(this)),Ls(h)&&_.push(h.toSVG(this)),g&&_.push(g.toSVG(this)),l&&_.push(C),_.push(e.join("")),_.push(`</g>
`),d&&_.push(`</g>
`),n?n(_.join("")):_.join("")}addPaintOrder(){return this.paintFirst!==_r?' paint-order="'.concat(this.paintFirst,'" '):""}};function ty(i){return new RegExp("^("+i.join("|")+")\\b","i")}var zB,Ma=String.raw(zB||(zB=Ad(["(?:[-+]?(?:d*.d+|d+.?)(?:[eE][-+]?d+)?)"],["(?:[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?)"])));var Hne=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+Ma+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+Ma+"))?\\s+(.*)"),Gne={cx:Nn,x:Nn,r:"radius",cy:Lo,y:Lo,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},CS="font-size",yS="clip-path",aSe=ty(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]),lSe=ty(["symbol","image","marker","pattern","view","svg"]),jB=ty(["symbol","g","a","svg","clipPath","defs"]),cSe=new RegExp("^\\s*("+Ma+"+)\\s*,?\\s*("+Ma+"+)\\s*,?\\s*("+Ma+"+)\\s*,?\\s*("+Ma+"+)\\s*$"),$ne=new De(1,0),AN=new De,C3=(i,e)=>i.rotate(e),DC=(i,e)=>new De(e).subtract(i),FC=i=>i.distanceFrom(AN),IC=(i,e)=>Math.atan2(Bf(i,e),FN(i,e)),DN=i=>IC($ne,i),ny=i=>i.eq(AN)?i:i.scalarDivide(FC(i)),y3=function(i){let e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return ny(new De(-i.y,i.x).scalarMultiply(e?1:-1))},Bf=(i,e)=>i.x*e.y-i.y*e.x,FN=(i,e)=>i.x*e.x+i.y*e.y,LS=(i,e,t)=>{if(i.eq(e)||i.eq(t))return!0;let n=Bf(e,t),r=Bf(e,i),o=Bf(t,i);return n>=0?r>=0&&o<=0:!(r<=0&&o>=0)},VB="(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?",UB=new RegExp("(?:\\s|^)"+VB+VB+"("+Ma+"?(?:px)?)?(?:\\s?|$)(?:$|\\s)"),Ed=class i{constructor(e){let t=typeof e=="string"?i.parseShadow(e):e;Object.assign(this,i.ownDefaults,t),this.id=Sd()}static parseShadow(e){let t=e.trim(),[,n=0,r=0,o=0]=(UB.exec(t)||[]).map(s=>parseFloat(s)||0);return{color:(t.replace(UB,"")||"rgb(0,0,0)").trim(),offsetX:n,offsetY:r,blur:o}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(e){let t=C3(new De(this.offsetX,this.offsetY),Ii(-e.angle)),n=new qr(this.color),r=40,o=40;return e.width&&e.height&&(r=100*gi((Math.abs(t.x)+this.blur)/e.width,Fn.NUM_FRACTION_DIGITS)+20,o=100*gi((Math.abs(t.y)+this.blur)/e.height,Fn.NUM_FRACTION_DIGITS)+20),e.flipX&&(t.x*=-1),e.flipY&&(t.y*=-1),'<filter id="SVGID_'.concat(this.id,'" y="-').concat(o,'%" height="').concat(100+2*o,'%" x="-').concat(r,'%" width="').concat(100+2*r,`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`).concat(gi(this.blur?this.blur/2:0,Fn.NUM_FRACTION_DIGITS),`"></feGaussianBlur>
	<feOffset dx="`).concat(gi(t.x,Fn.NUM_FRACTION_DIGITS),'" dy="').concat(gi(t.y,Fn.NUM_FRACTION_DIGITS),`" result="oBlur" ></feOffset>
	<feFlood flood-color="`).concat(n.toRgb(),'" flood-opacity="').concat(n.getAlpha(),`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`)}toObject(){let e={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling,type:this.constructor.type},t=i.ownDefaults;return this.includeDefaultValues?e:x3(e,(n,r)=>n!==t[r])}static fromObject(e){return Ge(this,null,function*(){return new this(e)})}};ge(Ed,"ownDefaults",{color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1}),ge(Ed,"type","shadow"),ft.setClass(Ed,"shadow");var p0=(i,e,t)=>Math.max(i,Math.min(e,t)),Wne=[Lo,Nn,fo,ps,"flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible",Hf,Gf],vc=[_r,zo,"strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],qne={top:0,left:0,width:0,height:0,angle:0,flipX:!1,flipY:!1,scaleX:1,scaleY:1,minScaleLimit:0,skewX:0,skewY:0,originX:Nn,originY:Lo,strokeWidth:1,strokeUniform:!1,padding:0,opacity:1,paintFirst:_r,fill:"rgb(0,0,0)",fillRule:"nonzero",stroke:null,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,globalCompositeOperation:"source-over",backgroundColor:"",shadow:null,visible:!0,includeDefaultValues:!0,excludeFromExport:!1,objectCaching:!0,clipPath:void 0,inverted:!1,absolutePositioned:!1,centeredRotation:!0,centeredScaling:!1,dirty:!0},wS=(i,e,t,n)=>(i<Math.abs(e)?(i=e,n=t/4):n=e===0&&i===0?t/xc*Math.asin(1):t/xc*Math.asin(e/i),{a:i,c:e,p:t,s:n}),HB=(i,e,t,n,r)=>i*Math.pow(2,10*(n-=1))*Math.sin((n*r-e)*xc/t),IN=(i,e,t,n)=>-t*Math.cos(i/n*Od)+t+e,RS=(i,e,t,n)=>(i/=n)<1/2.75?t*(7.5625*i*i)+e:i<2/2.75?t*(7.5625*(i-=1.5/2.75)*i+.75)+e:i<2.5/2.75?t*(7.5625*(i-=2.25/2.75)*i+.9375)+e:t*(7.5625*(i-=2.625/2.75)*i+.984375)+e,GB=(i,e,t,n)=>t-RS(n-i,0,t,n)+e,Kne=Object.freeze({__proto__:null,defaultEasing:IN,easeInBack:function(i,e,t,n){let r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1.70158;return t*(i/=n)*i*((r+1)*i-r)+e},easeInBounce:GB,easeInCirc:(i,e,t,n)=>-t*(Math.sqrt(1-(i/=n)*i)-1)+e,easeInCubic:(i,e,t,n)=>t*(i/n)**3+e,easeInElastic:(i,e,t,n)=>{let r=t,o=0;if(i===0)return e;if((i/=n)===1)return e+t;o||(o=.3*n);let{a:s,s:a,p:l}=wS(r,t,o,1.70158);return-HB(s,a,l,i,n)+e},easeInExpo:(i,e,t,n)=>i===0?e:t*2**(10*(i/n-1))+e,easeInOutBack:function(i,e,t,n){let r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1.70158;return(i/=n/2)<1?t/2*(i*i*((1+(r*=1.525))*i-r))+e:t/2*((i-=2)*i*((1+(r*=1.525))*i+r)+2)+e},easeInOutBounce:(i,e,t,n)=>i<n/2?.5*GB(2*i,0,t,n)+e:.5*RS(2*i-n,0,t,n)+.5*t+e,easeInOutCirc:(i,e,t,n)=>(i/=n/2)<1?-t/2*(Math.sqrt(1-i**2)-1)+e:t/2*(Math.sqrt(1-(i-=2)*i)+1)+e,easeInOutCubic:(i,e,t,n)=>(i/=n/2)<1?t/2*i**3+e:t/2*((i-2)**3+2)+e,easeInOutElastic:(i,e,t,n)=>{let r=t,o=0;if(i===0)return e;if((i/=n/2)===2)return e+t;o||(o=n*(.3*1.5));let{a:s,s:a,p:l,c}=wS(r,t,o,1.70158);return i<1?-.5*HB(s,a,l,i,n)+e:s*Math.pow(2,-10*(i-=1))*Math.sin((i*n-a)*xc/l)*.5+c+e},easeInOutExpo:(i,e,t,n)=>i===0?e:i===n?e+t:(i/=n/2)<1?t/2*2**(10*(i-1))+e:t/2*-(2**(-10*--i)+2)+e,easeInOutQuad:(i,e,t,n)=>(i/=n/2)<1?t/2*i**2+e:-t/2*(--i*(i-2)-1)+e,easeInOutQuart:(i,e,t,n)=>(i/=n/2)<1?t/2*i**4+e:-t/2*((i-=2)*i**3-2)+e,easeInOutQuint:(i,e,t,n)=>(i/=n/2)<1?t/2*i**5+e:t/2*((i-2)**5+2)+e,easeInOutSine:(i,e,t,n)=>-t/2*(Math.cos(Math.PI*i/n)-1)+e,easeInQuad:(i,e,t,n)=>t*(i/=n)*i+e,easeInQuart:(i,e,t,n)=>t*(i/=n)*i**3+e,easeInQuint:(i,e,t,n)=>t*(i/n)**5+e,easeInSine:(i,e,t,n)=>-t*Math.cos(i/n*Od)+t+e,easeOutBack:function(i,e,t,n){let r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1.70158;return t*((i=i/n-1)*i*((r+1)*i+r)+1)+e},easeOutBounce:RS,easeOutCirc:(i,e,t,n)=>t*Math.sqrt(1-(i=i/n-1)*i)+e,easeOutCubic:(i,e,t,n)=>t*((i/n-1)**3+1)+e,easeOutElastic:(i,e,t,n)=>{let r=t,o=0;if(i===0)return e;if((i/=n)===1)return e+t;o||(o=.3*n);let{a:s,s:a,p:l,c}=wS(r,t,o,1.70158);return s*2**(-10*i)*Math.sin((i*n-a)*xc/l)+c+e},easeOutExpo:(i,e,t,n)=>i===n?e+t:t*-(2**(-10*i/n)+1)+e,easeOutQuad:(i,e,t,n)=>-t*(i/=n)*(i-2)+e,easeOutQuart:(i,e,t,n)=>-t*((i=i/n-1)*i**3-1)+e,easeOutQuint:(i,e,t,n)=>t*((i/n-1)**5+1)+e,easeOutSine:(i,e,t,n)=>t*Math.sin(i/n*Od)+e}),Yne=()=>!1,Ym=class{constructor(e){let{startValue:t,byValue:n,duration:r=500,delay:o=0,easing:s=IN,onStart:a=h0,onChange:l=h0,onComplete:c=h0,abort:d=Yne,target:h}=e;ge(this,"_state","pending"),ge(this,"durationProgress",0),ge(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=r,this.delay=o,this.easing=s,this._onStart=a,this._onChange=l,this._onComplete=c,this._abort=d,this.target=h,this.startValue=t,this.byValue=n,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return this._state==="aborted"||this._state==="completed"}start(){let e=t=>{this._state==="pending"&&(this.startTime=t||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout(()=>Vm(e),this.delay):Vm(e)}tick(e){let t=(e||+new Date)-this.startTime,n=Math.min(t,this.duration);this.durationProgress=n/this.duration;let{value:r,valueProgress:o}=this.calculate(n);this.value=Object.freeze(r),this.valueProgress=o,this._state!=="aborted"&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):t>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),Vm(this.tick)))}register(){EC.push(this)}unregister(){EC.remove(this)}abort(){this._state="aborted",this.unregister()}},Xne=["startValue","endValue"],zS=class extends Ym{constructor(e){let{startValue:t=0,endValue:n=100}=e;super(ve(ve({},vi(e,Xne)),{},{startValue:t,byValue:n-t}))}calculate(e){let t=this.easing(e,this.startValue,this.byValue,this.duration);return{value:t,valueProgress:Math.abs((t-this.startValue)/this.byValue)}}},Qne=["startValue","endValue"],jS=class extends Ym{constructor(e){let{startValue:t=[0],endValue:n=[100]}=e;super(ve(ve({},vi(e,Qne)),{},{startValue:t,byValue:n.map((r,o)=>r-t[o])}))}calculate(e){let t=this.startValue.map((n,r)=>this.easing(e,n,this.byValue[r],this.duration,r));return{value:t,valueProgress:Math.abs((t[0]-this.startValue[0])/this.byValue[0])}}},Jne=["startValue","endValue","easing","onChange","onComplete","abort"],Zne=(i,e,t,n)=>e+t*(1-Math.cos(i/n*Od)),MS=i=>i&&((e,t,n)=>i(new qr(e).toRgba(),t,n)),VS=class extends Ym{constructor(e){let{startValue:t,endValue:n,easing:r=Zne,onChange:o,onComplete:s,abort:a}=e,l=vi(e,Jne),c=new qr(t).getSource(),d=new qr(n).getSource();super(ve(ve({},l),{},{startValue:c,byValue:d.map((h,p)=>h-c[p]),easing:r,onChange:MS(o),onComplete:MS(s),abort:MS(a)}))}calculate(e){let[t,n,r,o]=this.startValue.map((a,l)=>this.easing(e,a,this.byValue[l],this.duration,l)),s=[...[t,n,r].map(Math.round),p0(0,o,1)];return{value:s,valueProgress:s.map((a,l)=>this.byValue[l]!==0?Math.abs((a-this.startValue[l])/this.byValue[l]):0).find(a=>a!==0)||0}}};function w3(i){let e=(t=>Array.isArray(t.startValue)||Array.isArray(t.endValue))(i)?new jS(i):new zS(i);return e.start(),e}function TN(i){let e=new VS(i);return e.start(),e}var g0=class i{constructor(e){this.status=e,this.points=[]}includes(e){return this.points.some(t=>t.eq(e))}append(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.points=this.points.concat(t.filter(r=>!this.includes(r))),this}static isPointContained(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(t.eq(n))return e.eq(t);if(t.x===n.x)return e.x===t.x&&(r||e.y>=Math.min(t.y,n.y)&&e.y<=Math.max(t.y,n.y));if(t.y===n.y)return e.y===t.y&&(r||e.x>=Math.min(t.x,n.x)&&e.x<=Math.max(t.x,n.x));{let o=DC(t,n),s=DC(t,e).divide(o);return r?Math.abs(s.x)===Math.abs(s.y):s.x===s.y&&s.x>=0&&s.x<=1}}static isPointInPolygon(e,t){let n=new De(e).setX(Math.min(e.x-1,...t.map(o=>o.x))),r=0;for(let o=0;o<t.length;o++){let s=this.intersectSegmentSegment(t[o],t[(o+1)%t.length],e,n);if(s.includes(e))return!0;r+=+(s.status==="Intersection")}return r%2==1}static intersectLineLine(e,t,n,r){let o=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],s=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5],a=t.x-e.x,l=t.y-e.y,c=r.x-n.x,d=r.y-n.y,h=e.x-n.x,p=e.y-n.y,g=c*p-d*h,_=a*p-l*h,b=d*a-c*l;if(b!==0){let C=g/b,y=_/b;return(o||0<=C&&C<=1)&&(s||0<=y&&y<=1)?new i("Intersection").append(new De(e.x+C*a,e.y+C*l)):new i}if(g===0||_===0){let C=o||s||i.isPointContained(e,n,r)||i.isPointContained(t,n,r)||i.isPointContained(n,e,t)||i.isPointContained(r,e,t);return new i(C?"Coincident":void 0)}return new i("Parallel")}static intersectSegmentLine(e,t,n,r){return i.intersectLineLine(e,t,n,r,!1,!0)}static intersectSegmentSegment(e,t,n,r){return i.intersectLineLine(e,t,n,r,!1,!1)}static intersectLinePolygon(e,t,n){let r=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],o=new i,s=n.length;for(let a,l,c,d=0;d<s;d++){if(a=n[d],l=n[(d+1)%s],c=i.intersectLineLine(e,t,a,l,r,!1),c.status==="Coincident")return c;o.append(...c.points)}return o.points.length>0&&(o.status="Intersection"),o}static intersectSegmentPolygon(e,t,n){return i.intersectLinePolygon(e,t,n,!1)}static intersectPolygonPolygon(e,t){let n=new i,r=e.length,o=[];for(let s=0;s<r;s++){let a=e[s],l=e[(s+1)%r],c=i.intersectSegmentPolygon(a,l,t);c.status==="Coincident"?(o.push(c),n.append(a,l)):n.append(...c.points)}return o.length>0&&o.length===e.length?new i("Coincident"):(n.points.length>0&&(n.status="Intersection"),n)}static intersectPolygonRectangle(e,t,n){let r=t.min(n),o=t.max(n),s=new De(o.x,r.y),a=new De(r.x,o.y);return i.intersectPolygonPolygon(e,[r,s,o,a])}},US=class extends PC{getX(){return this.getXY().x}setX(e){this.setXY(this.getXY().setX(e))}getY(){return this.getXY().y}setY(e){this.setXY(this.getXY().setY(e))}getRelativeX(){return this.left}setRelativeX(e){this.left=e}getRelativeY(){return this.top}setRelativeY(e){this.top=e}getXY(){let e=this.getRelativeXY();return this.group?Wr(e,this.group.calcTransformMatrix()):e}setXY(e,t,n){this.group&&(e=Wr(e,gs(this.group.calcTransformMatrix()))),this.setRelativeXY(e,t,n)}getRelativeXY(){return new De(this.left,this.top)}setRelativeXY(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.originX,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.originY;this.setPositionByOrigin(e,t,n)}isStrokeAccountedForInDimensions(){return!1}getCoords(){let{tl:e,tr:t,br:n,bl:r}=this.aCoords||(this.aCoords=this.calcACoords()),o=[e,t,n,r];if(this.group){let s=this.group.calcTransformMatrix();return o.map(a=>Wr(a,s))}return o}intersectsWithRect(e,t){return g0.intersectPolygonRectangle(this.getCoords(),e,t).status==="Intersection"}intersectsWithObject(e){let t=g0.intersectPolygonPolygon(this.getCoords(),e.getCoords());return t.status==="Intersection"||t.status==="Coincident"||e.isContainedWithinObject(this)||this.isContainedWithinObject(e)}isContainedWithinObject(e){return this.getCoords().every(t=>e.containsPoint(t))}isContainedWithinRect(e,t){let{left:n,top:r,width:o,height:s}=this.getBoundingRect();return n>=e.x&&n+o<=t.x&&r>=e.y&&r+s<=t.y}isOverlapping(e){return this.intersectsWithObject(e)||this.isContainedWithinObject(e)||e.isContainedWithinObject(this)}containsPoint(e){return g0.isPointInPolygon(e,this.getCoords())}isOnScreen(){if(!this.canvas)return!1;let{tl:e,br:t}=this.canvas.vptCoords;return!!this.getCoords().some(n=>n.x<=t.x&&n.x>=e.x&&n.y<=t.y&&n.y>=e.y)||!!this.intersectsWithRect(e,t)||this.containsPoint(e.midPointFrom(t))}isPartiallyOnScreen(){if(!this.canvas)return!1;let{tl:e,br:t}=this.canvas.vptCoords;return this.intersectsWithRect(e,t)?!0:this.getCoords().every(n=>(n.x>=t.x||n.x<=e.x)&&(n.y>=t.y||n.y<=e.y))&&this.containsPoint(e.midPointFrom(t))}getBoundingRect(){return _l(this.getCoords())}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(e){this._set(fo,e),this._set(ps,e),this.setCoords()}scaleToWidth(e){let t=this.getBoundingRect().width/this.getScaledWidth();return this.scale(e/this.width/t)}scaleToHeight(e){let t=this.getBoundingRect().height/this.getScaledHeight();return this.scale(e/this.height/t)}getCanvasRetinaScaling(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.getRetinaScaling())||1}getTotalAngle(){return this.group?bl(mN(this.calcTransformMatrix())):this.angle}getViewportTransform(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.viewportTransform)||ho.concat()}calcACoords(){let e=x0({angle:this.angle}),{x:t,y:n}=this.getRelativeCenterPoint(),r=$f(t,n),o=Ti(r,e),s=this._getTransformedDimensions(),a=s.x/2,l=s.y/2;return{tl:Wr({x:-a,y:-l},o),tr:Wr({x:a,y:-l},o),bl:Wr({x:-a,y:l},o),br:Wr({x:a,y:l},o)}}setCoords(){this.aCoords=this.calcACoords()}transformMatrixKey(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=[];return!e&&this.group&&(t=this.group.transformMatrixKey(e)),t.push(this.top,this.left,this.width,this.height,this.scaleX,this.scaleY,this.angle,this.strokeWidth,this.skewX,this.skewY,+this.flipX,+this.flipY,ir(this.originX),ir(this.originY)),t}calcTransformMatrix(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=this.calcOwnMatrix();if(e||!this.group)return t;let n=this.transformMatrixKey(e),r=this.matrixCache;return r&&r.key.every((o,s)=>o===n[s])?r.value:(this.group&&(t=Ti(this.group.calcTransformMatrix(!1),t)),this.matrixCache={key:n,value:t},t)}calcOwnMatrix(){let e=this.transformMatrixKey(!0),t=this.ownMatrixCache;if(t&&t.key===e)return t.value;let n=this.getRelativeCenterPoint(),r={angle:this.angle,translateX:n.x,translateY:n.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},o=_N(r);return this.ownMatrixCache={key:e,value:o},o}_getNonTransformedDimensions(){return new De(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(e){return this._getTransformedDimensions(e).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=ve({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth},e),n=t.strokeWidth,r=n,o=0;this.strokeUniform&&(r=0,o=n);let s=t.width+r,a=t.height+r,l;return l=t.skewX===0&&t.skewY===0?new De(s*t.scaleX,a*t.scaleY):ZC(s,a,Zm(t)),l.scalarAdd(o)}translateToGivenOrigin(e,t,n,r,o){let s=e.x,a=e.y,l=ir(r)-ir(t),c=ir(o)-ir(n);if(l||c){let d=this._getTransformedDimensions();s+=l*d.x,a+=c*d.y}return new De(s,a)}translateToCenterPoint(e,t,n){if(t===Qt&&n===Qt)return e;let r=this.translateToGivenOrigin(e,t,n,Qt,Qt);return this.angle?r.rotate(Ii(this.angle),e):r}translateToOriginPoint(e,t,n){let r=this.translateToGivenOrigin(e,Qt,Qt,t,n);return this.angle?r.rotate(Ii(this.angle),e):r}getCenterPoint(){let e=this.getRelativeCenterPoint();return this.group?Wr(e,this.group.calcTransformMatrix()):e}getRelativeCenterPoint(){return this.translateToCenterPoint(new De(this.left,this.top),this.originX,this.originY)}getPointByOrigin(e,t){return this.translateToOriginPoint(this.getRelativeCenterPoint(),e,t)}setPositionByOrigin(e,t,n){let r=this.translateToCenterPoint(e,t,n),o=this.translateToOriginPoint(r,this.originX,this.originY);this.set({left:o.x,top:o.y})}_getLeftTopCoords(){return this.translateToOriginPoint(this.getRelativeCenterPoint(),Nn,Lo)}},eie=["type"],tie=["extraParam"],fc=class bC extends US{static getDefaults(){return bC.ownDefaults}get type(){let e=this.constructor.type;return e==="FabricObject"?"object":e.toLowerCase()}set type(e){Pd("warn","Setting type has no effect",e)}constructor(e){super(),ge(this,"_cacheContext",null),Object.assign(this,bC.ownDefaults),this.setOptions(e)}_createCacheCanvas(){this._cacheCanvas=js(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(e){let t=e.width,n=e.height,r=Fn.maxCacheSideLimit,o=Fn.minCacheSideLimit;if(t<=r&&n<=r&&t*n<=Fn.perfLimitSizeTotal)return t<o&&(e.width=o),n<o&&(e.height=o),e;let s=t/n,[a,l]=jm.limitDimsByArea(s),c=p0(o,a,r),d=p0(o,l,r);return t>c&&(e.zoomX/=t/c,e.width=c,e.capped=!0),n>d&&(e.zoomY/=n/d,e.height=d,e.capped=!0),e}_getCacheCanvasDimensions(){let e=this.getTotalObjectScaling(),t=this._getTransformedDimensions({skewX:0,skewY:0}),n=t.x*e.x/this.scaleX,r=t.y*e.y/this.scaleY;return{width:Math.ceil(n+2),height:Math.ceil(r+2),zoomX:e.x,zoomY:e.y,x:n,y:r}}_updateCacheCanvas(){let e=this._cacheCanvas,t=this._cacheContext,{width:n,height:r,zoomX:o,zoomY:s,x:a,y:l}=this._limitCacheSize(this._getCacheCanvasDimensions()),c=n!==e.width||r!==e.height,d=this.zoomX!==o||this.zoomY!==s;if(!e||!t)return!1;if(c||d){n!==e.width||r!==e.height?(e.width=n,e.height=r):(t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height));let h=a/2,p=l/2;return this.cacheTranslationX=Math.round(e.width/2-h)+h,this.cacheTranslationY=Math.round(e.height/2-p)+p,t.translate(this.cacheTranslationX,this.cacheTranslationY),t.scale(o,s),this.zoomX=o,this.zoomY=s,!0}return!1}setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setOptions(e)}transform(e){let t=this.group&&!this.group._transformDone||this.group&&this.canvas&&e===this.canvas.contextTop,n=this.calcTransformMatrix(!t);e.transform(n[0],n[1],n[2],n[3],n[4],n[5])}getObjectScaling(){if(!this.group)return new De(Math.abs(this.scaleX),Math.abs(this.scaleY));let e=Lf(this.calcTransformMatrix());return new De(Math.abs(e.scaleX),Math.abs(e.scaleY))}getTotalObjectScaling(){let e=this.getObjectScaling();if(this.canvas){let t=this.canvas.getZoom(),n=this.getCanvasRetinaScaling();return e.scalarMultiply(t*n)}return e}getObjectOpacity(){let e=this.opacity;return this.group&&(e*=this.group.getObjectOpacity()),e}_constrainScale(e){return Math.abs(e)<this.minScaleLimit?e<0?-this.minScaleLimit:this.minScaleLimit:e===0?1e-4:e}_set(e,t){e!==fo&&e!==ps||(t=this._constrainScale(t)),e===fo&&t<0?(this.flipX=!this.flipX,t*=-1):e==="scaleY"&&t<0?(this.flipY=!this.flipY,t*=-1):e!=="shadow"||!t||t instanceof Ed||(t=new Ed(t));let n=this[e]!==t;return this[e]=t,n&&this.constructor.cacheProperties.includes(e)&&(this.dirty=!0),this.parent&&(this.dirty||n&&this.constructor.stateProperties.includes(e))&&this.parent._set("dirty",!0),this}isNotVisible(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible}render(e){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(e.save(),this._setupCompositeOperation(e),this.drawSelectionBackground(e),this.transform(e),this._setOpacity(e),this._setShadow(e),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(e)):(this._removeCacheCanvas(),this.drawObject(e,!1,{}),this.dirty=!1),e.restore())}drawSelectionBackground(e){}renderCache(e){if(e=e||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext){let{zoomX:t,zoomY:n,cacheTranslationX:r,cacheTranslationY:o}=this,{width:s,height:a}=this._cacheCanvas;this.drawObject(this._cacheContext,e.forClipping,{zoomX:t,zoomY:n,cacheTranslationX:r,cacheTranslationY:o,width:s,height:a,parentClipPaths:[]}),this.dirty=!1}}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null}hasStroke(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0}hasFill(){return this.fill&&this.fill!=="transparent"}needsItsOwnCache(){return!!(this.paintFirst===zo&&this.hasFill()&&this.hasStroke()&&this.shadow)||!!this.clipPath}shouldCache(){return this.ownCaching=this.objectCaching&&(!this.parent||!this.parent.isOnACache())||this.needsItsOwnCache(),this.ownCaching}willDrawShadow(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)}drawClipPathOnCache(e,t,n){e.save(),t.inverted?e.globalCompositeOperation="destination-out":e.globalCompositeOperation="destination-in",e.setTransform(1,0,0,1,0,0),e.drawImage(n,0,0),e.restore()}drawObject(e,t,n){let r=this.fill,o=this.stroke;t?(this.fill="black",this.stroke="",this._setClippingProperties(e)):this._renderBackground(e),this._render(e),this._drawClipPath(e,this.clipPath,n),this.fill=r,this.stroke=o}createClipPathLayer(e,t){let n=ms(t),r=n.getContext("2d");if(r.translate(t.cacheTranslationX,t.cacheTranslationY),r.scale(t.zoomX,t.zoomY),e._cacheCanvas=n,t.parentClipPaths.forEach(o=>{o.transform(r)}),t.parentClipPaths.push(e),e.absolutePositioned){let o=gs(this.calcTransformMatrix());r.transform(o[0],o[1],o[2],o[3],o[4],o[5])}return e.transform(r),e.drawObject(r,!0,t),n}_drawClipPath(e,t,n){if(!t)return;t._transformDone=!0;let r=this.createClipPathLayer(t,n);this.drawClipPathOnCache(e,t,r)}drawCacheOnCanvas(e){e.scale(1/this.zoomX,1/this.zoomY),e.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.isNotVisible())return!1;let t=this._cacheCanvas,n=this._cacheContext;return!(!t||!n||e||!this._updateCacheCanvas())||!!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned)&&(t&&n&&!e&&(n.save(),n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,t.width,t.height),n.restore()),!0)}_renderBackground(e){if(!this.backgroundColor)return;let t=this._getNonTransformedDimensions();e.fillStyle=this.backgroundColor,e.fillRect(-t.x/2,-t.y/2,t.x,t.y),this._removeShadow(e)}_setOpacity(e){this.group&&!this.group._transformDone?e.globalAlpha=this.getObjectOpacity():e.globalAlpha*=this.opacity}_setStrokeStyles(e,t){let n=t.stroke;n&&(e.lineWidth=t.strokeWidth,e.lineCap=t.strokeLineCap,e.lineDashOffset=t.strokeDashOffset,e.lineJoin=t.strokeLineJoin,e.miterLimit=t.strokeMiterLimit,Ls(n)?n.gradientUnits==="percentage"||n.gradientTransform||n.patternTransform?this._applyPatternForTransformedGradient(e,n):(e.strokeStyle=n.toLive(e),this._applyPatternGradientTransform(e,n)):e.strokeStyle=t.stroke)}_setFillStyles(e,t){let{fill:n}=t;n&&(Ls(n)?(e.fillStyle=n.toLive(e),this._applyPatternGradientTransform(e,n)):e.fillStyle=n)}_setClippingProperties(e){e.globalAlpha=1,e.strokeStyle="transparent",e.fillStyle="#000000"}_setLineDash(e,t){t&&t.length!==0&&e.setLineDash(t)}_setShadow(e){if(!this.shadow)return;let t=this.shadow,n=this.canvas,r=this.getCanvasRetinaScaling(),[o,,,s]=n?.viewportTransform||ho,a=o*r,l=s*r,c=t.nonScaling?new De(1,1):this.getObjectScaling();e.shadowColor=t.color,e.shadowBlur=t.blur*Fn.browserShadowBlurConstant*(a+l)*(c.x+c.y)/4,e.shadowOffsetX=t.offsetX*a*c.x,e.shadowOffsetY=t.offsetY*l*c.y}_removeShadow(e){this.shadow&&(e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0)}_applyPatternGradientTransform(e,t){if(!Ls(t))return{offsetX:0,offsetY:0};let n=t.gradientTransform||t.patternTransform,r=-this.width/2+t.offsetX||0,o=-this.height/2+t.offsetY||0;return t.gradientUnits==="percentage"?e.transform(this.width,0,0,this.height,r,o):e.transform(1,0,0,1,r,o),n&&e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),{offsetX:r,offsetY:o}}_renderPaintInOrder(e){this.paintFirst===zo?(this._renderStroke(e),this._renderFill(e)):(this._renderFill(e),this._renderStroke(e))}_render(e){}_renderFill(e){this.fill&&(e.save(),this._setFillStyles(e,this),this.fillRule==="evenodd"?e.fill("evenodd"):e.fill(),e.restore())}_renderStroke(e){if(this.stroke&&this.strokeWidth!==0){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this.strokeUniform){let t=this.getObjectScaling();e.scale(1/t.x,1/t.y)}this._setLineDash(e,this.strokeDashArray),this._setStrokeStyles(e,this),e.stroke(),e.restore()}}_applyPatternForTransformedGradient(e,t){var n;let r=this._limitCacheSize(this._getCacheCanvasDimensions()),o=this.getCanvasRetinaScaling(),s=r.x/this.scaleX/o,a=r.y/this.scaleY/o,l=ms({width:Math.ceil(s),height:Math.ceil(a)}),c=l.getContext("2d");c&&(c.beginPath(),c.moveTo(0,0),c.lineTo(s,0),c.lineTo(s,a),c.lineTo(0,a),c.closePath(),c.translate(s/2,a/2),c.scale(r.zoomX/this.scaleX/o,r.zoomY/this.scaleY/o),this._applyPatternGradientTransform(c,t),c.fillStyle=t.toLive(e),c.fill(),e.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),e.scale(o*this.scaleX/r.zoomX,o*this.scaleY/r.zoomY),e.strokeStyle=(n=c.createPattern(l,"no-repeat"))!==null&&n!==void 0?n:"")}_findCenterFromElement(){return new De(this.left+this.width/2,this.top+this.height/2)}clone(e){let t=this.toObject(e);return this.constructor.fromObject(t)}cloneAsImage(e){let t=this.toCanvasElement(e);return new(ft.getClass("image"))(t)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=_3(this),n=this.group,r=this.shadow,o=Math.abs,s=e.enableRetinaScaling?aN():1,a=(e.multiplier||1)*s,l=e.canvasProvider||(M=>new qm(M,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1}));delete this.group,e.withoutTransform&&MN(this),e.withoutShadow&&(this.shadow=null),e.viewportTransform&&NS(this,this.getViewportTransform()),this.setCoords();let c=js(),d=this.getBoundingRect(),h=this.shadow,p=new De;if(h){let M=h.blur,O=h.nonScaling?new De(1,1):this.getObjectScaling();p.x=2*Math.round(o(h.offsetX)+M)*o(O.x),p.y=2*Math.round(o(h.offsetY)+M)*o(O.y)}let g=d.width+p.x,_=d.height+p.y;c.width=Math.ceil(g),c.height=Math.ceil(_);let b=l(c);e.format==="jpeg"&&(b.backgroundColor="#fff"),this.setPositionByOrigin(new De(b.width/2,b.height/2),Qt,Qt);let C=this.canvas;b._objects=[this],this.set("canvas",b),this.setCoords();let y=b.toCanvasElement(a||1,e);return this.set("canvas",C),this.shadow=r,n&&(this.group=n),this.set(t),this.setCoords(),b._objects=[],b.destroy(),y}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return f3(this.toCanvasElement(e),e.format||"png",e.quality||1)}toBlob(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return g3(this.toCanvasElement(e),e.format||"png",e.quality||1)}isType(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.includes(this.constructor.type)||t.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(e){let{centeredRotation:t,originX:n,originY:r}=this;if(t){let{x:o,y:s}=this.getRelativeCenterPoint();this.originX=Qt,this.originY=Qt,this.left=o,this.top=s}if(this.set("angle",e),t){let{x:o,y:s}=this.translateToOriginPoint(this.getRelativeCenterPoint(),n,r);this.left=o,this.top=s,this.originX=n,this.originY=r}}setOnGroup(){}_setupCompositeOperation(e){this.globalCompositeOperation&&(e.globalCompositeOperation=this.globalCompositeOperation)}dispose(){EC.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&vl().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}animate(e,t){return Object.entries(e).reduce((n,r)=>{let[o,s]=r;return n[o]=this._animate(o,s,t),n},{})}_animate(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=e.split("."),o=this.constructor.colorProperties.includes(r[r.length-1]),{abort:s,startValue:a,onChange:l,onComplete:c}=n,d=ve(ve({},n),{},{target:this,startValue:a??r.reduce((h,p)=>h[p],this),endValue:t,abort:s?.bind(this),onChange:(h,p,g)=>{r.reduce((_,b,C)=>(C===r.length-1&&(_[b]=h),_[b]),this),l&&l(h,p,g)},onComplete:(h,p,g)=>{this.setCoords(),c&&c(h,p,g)}});return o?TN(d):w3(d)}isDescendantOf(e){let{parent:t,group:n}=this;return t===e||n===e||!!t&&t.isDescendantOf(e)||!!n&&n!==t&&n.isDescendantOf(e)}getAncestors(){let e=[],t=this;do t=t.parent,t&&e.push(t);while(t);return e}findCommonAncestors(e){if(this===e)return{fork:[],otherFork:[],common:[this,...this.getAncestors()]};let t=this.getAncestors(),n=e.getAncestors();if(t.length===0&&n.length>0&&this===n[n.length-1])return{fork:[],otherFork:[e,...n.slice(0,n.length-1)],common:[this]};for(let r,o=0;o<t.length;o++){if(r=t[o],r===e)return{fork:[this,...t.slice(0,o)],otherFork:[],common:t.slice(o)};for(let s=0;s<n.length;s++){if(this===n[s])return{fork:[],otherFork:[e,...n.slice(0,s)],common:[this,...t]};if(r===n[s])return{fork:[this,...t.slice(0,o)],otherFork:[e,...n.slice(0,s)],common:t.slice(o)}}}return{fork:[this,...t],otherFork:[e,...n],common:[]}}hasCommonAncestors(e){let t=this.findCommonAncestors(e);return t&&!!t.common.length}isInFrontOf(e){if(this===e)return;let t=this.findCommonAncestors(e);if(t.fork.includes(e))return!0;if(t.otherFork.includes(this))return!1;let n=t.common[0]||this.canvas;if(!n)return;let r=t.fork.pop(),o=t.otherFork.pop(),s=n._objects.indexOf(r),a=n._objects.indexOf(o);return s>-1&&s>a}toObject(){let e=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).concat(bC.customProperties,this.constructor.customProperties||[]),t,n=Fn.NUM_FRACTION_DIGITS,{clipPath:r,fill:o,stroke:s,shadow:a,strokeDashArray:l,left:c,top:d,originX:h,originY:p,width:g,height:_,strokeWidth:b,strokeLineCap:C,strokeDashOffset:y,strokeLineJoin:M,strokeUniform:O,strokeMiterLimit:A,scaleX:D,scaleY:N,angle:B,flipX:T,flipY:H,opacity:te,visible:L,backgroundColor:z,fillRule:J,paintFirst:Q,globalCompositeOperation:ce,skewX:X,skewY:ie}=this;r&&!r.excludeFromExport&&(t=r.toObject(e.concat("inverted","absolutePositioned")));let oe=Ce=>gi(Ce,n),le=ve(ve({},_0(this,e)),{},{type:this.constructor.type,version:FS,originX:h,originY:p,left:oe(c),top:oe(d),width:oe(g),height:oe(_),fill:AB(o)?o.toObject():o,stroke:AB(s)?s.toObject():s,strokeWidth:oe(b),strokeDashArray:l&&l.concat(),strokeLineCap:C,strokeDashOffset:y,strokeLineJoin:M,strokeUniform:O,strokeMiterLimit:oe(A),scaleX:oe(D),scaleY:oe(N),angle:oe(B),flipX:T,flipY:H,opacity:oe(te),shadow:a&&a.toObject(),visible:L,backgroundColor:z,fillRule:J,paintFirst:Q,globalCompositeOperation:ce,skewX:oe(X),skewY:oe(ie)},t?{clipPath:t}:null);return this.includeDefaultValues?le:this._removeDefaultValues(le)}toDatalessObject(e){return this.toObject(e)}_removeDefaultValues(e){let t=this.constructor.getDefaults(),n=Object.keys(t).length>0?t:Object.getPrototypeOf(this);return x3(e,(r,o)=>{if(o===Nn||o===Lo||o==="type")return!0;let s=n[o];return r!==s&&!(Array.isArray(r)&&Array.isArray(s)&&r.length===0&&s.length===0)})}toString(){return"#<".concat(this.constructor.type,">")}static _fromObject(e){let t=vi(e,eie),n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{extraParam:r}=n,o=vi(n,tie);return ex(t,o).then(s=>r?(delete s[r],new this(t[r],s)):new this(s))}static fromObject(e,t){return this._fromObject(e,t)}};ge(fc,"stateProperties",Wne),ge(fc,"cacheProperties",vc),ge(fc,"ownDefaults",qne),ge(fc,"type","FabricObject"),ge(fc,"colorProperties",[_r,zo,"backgroundColor"]),ge(fc,"customProperties",[]),ft.setClass(fc),ft.setClass(fc,"object");var Dd=(i,e,t)=>(n,r,o,s)=>{let a=e(n,r,o,s);return a&&v3(i,ve(ve({},b3(n,r,o,s)),t)),a};function v0(i){return(e,t,n,r)=>{let{target:o,originX:s,originY:a}=t,l=o.getRelativeCenterPoint(),c=o.translateToOriginPoint(l,s,a),d=i(e,t,n,r);return o.setPositionByOrigin(c,t.originX,t.originY),d}}var HS=Dd(Wm,v0((i,e,t,n)=>{let r=ey(e,e.originX,e.originY,t,n);if(ir(e.originX)===ir(Qt)||ir(e.originX)===ir($i)&&r.x<0||ir(e.originX)===ir(Nn)&&r.x>0){let{target:o}=e,s=o.strokeWidth/(o.strokeUniform?o.scaleX:1),a=PN(e)?2:1,l=o.width,c=Math.abs(r.x*a/o.scaleX)-s;return o.set("width",Math.max(c,1)),l!==o.width}return!1}));function BN(i,e,t,n,r){n=n||{};let o=this.sizeX||n.cornerSize||r.cornerSize,s=this.sizeY||n.cornerSize||r.cornerSize,a=n.transparentCorners!==void 0?n.transparentCorners:r.transparentCorners,l=a?zo:_r,c=!a&&(n.cornerStrokeColor||r.cornerStrokeColor),d,h=e,p=t;i.save(),i.fillStyle=n.cornerColor||r.cornerColor||"",i.strokeStyle=n.cornerStrokeColor||r.cornerStrokeColor||"",o>s?(d=o,i.scale(1,s/o),p=t*o/s):s>o?(d=s,i.scale(o/s,1),h=e*s/o):d=o,i.beginPath(),i.arc(h,p,d/2,0,xc,!1),i[l](),c&&i.stroke(),i.restore()}function NN(i,e,t,n,r){n=n||{};let o=this.sizeX||n.cornerSize||r.cornerSize,s=this.sizeY||n.cornerSize||r.cornerSize,a=n.transparentCorners!==void 0?n.transparentCorners:r.transparentCorners,l=a?zo:_r,c=!a&&(n.cornerStrokeColor||r.cornerStrokeColor),d=o/2,h=s/2;i.save(),i.fillStyle=n.cornerColor||r.cornerColor||"",i.strokeStyle=n.cornerStrokeColor||r.cornerStrokeColor||"",i.translate(e,t);let p=r.getTotalAngle();i.rotate(Ii(p)),i["".concat(l,"Rect")](-d,-h,o,s),c&&i.strokeRect(-d,-h,o,s),i.restore()}var so=class{constructor(e){ge(this,"visible",!0),ge(this,"actionName",XC),ge(this,"angle",0),ge(this,"x",0),ge(this,"y",0),ge(this,"offsetX",0),ge(this,"offsetY",0),ge(this,"sizeX",0),ge(this,"sizeY",0),ge(this,"touchSizeX",0),ge(this,"touchSizeY",0),ge(this,"cursorStyle","crosshair"),ge(this,"withConnection",!1),Object.assign(this,e)}shouldActivate(e,t,n,r){var o;let{tl:s,tr:a,br:l,bl:c}=r;return((o=t.canvas)===null||o===void 0?void 0:o.getActiveObject())===t&&t.isControlVisible(e)&&g0.isPointInPolygon(n,[s,a,l,c])}getActionHandler(e,t,n){return this.actionHandler}getMouseDownHandler(e,t,n){return this.mouseDownHandler}getMouseUpHandler(e,t,n){return this.mouseUpHandler}cursorStyleHandler(e,t,n){return t.cursorStyle}getActionName(e,t,n){return t.actionName}getVisibility(e,t){var n,r;return(n=(r=e._controlsVisibility)===null||r===void 0?void 0:r[t])!==null&&n!==void 0?n:this.visible}setVisibility(e,t,n){this.visible=e}positionHandler(e,t,n,r){return new De(this.x*e.x+this.offsetX,this.y*e.y+this.offsetY).transform(t)}calcCornerCoords(e,t,n,r,o,s){let a=QC([$f(n,r),x0({angle:e}),JC((o?this.touchSizeX:this.sizeX)||t,(o?this.touchSizeY:this.sizeY)||t)]);return{tl:new De(-.5,-.5).transform(a),tr:new De(.5,-.5).transform(a),br:new De(.5,.5).transform(a),bl:new De(-.5,.5).transform(a)}}render(e,t,n,r,o){((r=r||{}).cornerStyle||o.cornerStyle)==="circle"?BN.call(this,e,t,n,r,o):NN.call(this,e,t,n,r,o)}},LN=(i,e,t)=>t.lockRotation?kC:e.cursorStyle,RN=Dd(cN,v0((i,e,t,n)=>{let{target:r,ex:o,ey:s,theta:a,originX:l,originY:c}=e,d=r.translateToOriginPoint(r.getRelativeCenterPoint(),l,c);if(Ea(r,"lockRotation"))return!1;let h=Math.atan2(s-d.y,o-d.x),p=Math.atan2(n-d.y,t-d.x),g=bl(p-h+a);if(r.snapAngle&&r.snapAngle>0){let b=r.snapAngle,C=r.snapThreshold||b,y=Math.ceil(g/b)*b,M=Math.floor(g/b)*b;Math.abs(g-M)<C?g=M:Math.abs(g-y)<C&&(g=y)}g<0&&(g=360+g),g%=360;let _=r.angle!==g;return r.angle=g,_}));function zN(i,e){let t=e.canvas,n=i[t.uniScaleKey];return t.uniformScaling&&!n||!t.uniformScaling&&n}function jN(i,e,t){let n=Ea(i,"lockScalingX"),r=Ea(i,"lockScalingY");if(n&&r||!e&&(n||r)&&t||n&&e==="x"||r&&e==="y")return!0;let{width:o,height:s,strokeWidth:a}=i;return o===0&&a===0&&e!=="y"||s===0&&a===0&&e!=="x"}var nie=["e","se","s","sw","w","nw","n","ne","e"],Af=(i,e,t)=>{let n=zN(i,t);if(jN(t,e.x!==0&&e.y===0?"x":e.x===0&&e.y!==0?"y":"",n))return kC;let r=ON(t,e);return"".concat(nie[r],"-resize")};function M3(i,e,t,n){let r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},o=e.target,s=r.by,a=zN(i,o),l,c,d,h,p,g;if(jN(o,s,a))return!1;if(e.gestureScale)c=e.scaleX*e.gestureScale,d=e.scaleY*e.gestureScale;else{if(l=ey(e,e.originX,e.originY,t,n),p=s!=="y"?Math.sign(l.x||e.signX||1):1,g=s!=="x"?Math.sign(l.y||e.signY||1):1,e.signX||(e.signX=p),e.signY||(e.signY=g),Ea(o,"lockScalingFlip")&&(e.signX!==p||e.signY!==g))return!1;if(h=o._getTransformedDimensions(),a&&!s){let C=Math.abs(l.x)+Math.abs(l.y),{original:y}=e,M=C/(Math.abs(h.x*y.scaleX/o.scaleX)+Math.abs(h.y*y.scaleY/o.scaleY));c=y.scaleX*M,d=y.scaleY*M}else c=Math.abs(l.x*o.scaleX/h.x),d=Math.abs(l.y*o.scaleY/h.y);PN(e)&&(c*=2,d*=2),e.signX!==p&&s!=="y"&&(e.originX=TB(e.originX),c*=-1,e.signX=p),e.signY!==g&&s!=="x"&&(e.originY=TB(e.originY),d*=-1,e.signY=g)}let _=o.scaleX,b=o.scaleY;return s?(s==="x"&&o.set(fo,c),s==="y"&&o.set(ps,d)):(!Ea(o,"lockScalingX")&&o.set(fo,c),!Ea(o,"lockScalingY")&&o.set(ps,d)),_!==o.scaleX||b!==o.scaleY}var Rm=Dd(YC,v0((i,e,t,n)=>M3(i,e,t,n))),VN=Dd(YC,v0((i,e,t,n)=>M3(i,e,t,n,{by:"x"}))),UN=Dd(YC,v0((i,e,t,n)=>M3(i,e,t,n,{by:"y"}))),iie=["target","ex","ey","skewingSide"],ES={x:{counterAxis:"y",scale:fo,skew:Hf,lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:ps,skew:Gf,lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},rie=["ns","nesw","ew","nwse"],HN=(i,e,t)=>{if(e.x!==0&&Ea(t,"lockSkewingY")||e.y!==0&&Ea(t,"lockSkewingX"))return kC;let n=ON(t,e)%4;return"".concat(rie[n],"-resize")};function GN(i,e,t,n,r){let{target:o}=t,{counterAxis:s,origin:a,lockSkewing:l,skew:c,flip:d}=ES[i];if(Ea(o,l))return!1;let{origin:h,flip:p}=ES[s],g=ir(t[h])*(o[p]?-1:1),_=-Math.sign(g)*(o[d]?-1:1),b=.5*-((o[c]===0&&ey(t,Qt,Qt,n,r)[i]>0||o[c]>0?1:-1)*_)+.5;return Dd(dN,v0((y,M,O,A)=>function(D,N,B){let{target:T,ex:H,ey:te,skewingSide:L}=N,z=vi(N,iie),{skew:J}=ES[D],Q=B.subtract(new De(H,te)).divide(new De(T.scaleX,T.scaleY))[D],ce=T[J],X=z[J],ie=Math.tan(Ii(X)),oe=D==="y"?T._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:T._getTransformedDimensions({scaleX:1,scaleY:1}).y,le=2*Q*L/Math.max(oe,1)+ie,Ce=bl(Math.atan(le));T.set(J,Ce);let Ne=ce!==T[J];if(Ne&&D==="y"){let{skewX:R,scaleX:ne}=T,re=T._getTransformedDimensions({skewY:ce}),de=T._getTransformedDimensions(),fe=R!==0?re.x/de.x:1;fe!==1&&T.set(fo,fe*ne)}return Ne}(i,M,new De(O,A))))(e,ve(ve({},t),{},{[a]:b,skewingSide:_}),n,r)}var $N=(i,e,t,n)=>GN("x",i,e,t,n),WN=(i,e,t,n)=>GN("y",i,e,t,n);function iy(i,e){return i[e.canvas.altActionKey]}var zm=(i,e,t)=>{let n=iy(i,t);return e.x===0?n?Hf:ps:e.y===0?n?Gf:fo:""},Xu=(i,e,t)=>iy(i,t)?HN(0,e,t):Af(i,e,t),GS=(i,e,t,n)=>iy(i,e.target)?WN(i,e,t,n):VN(i,e,t,n),$S=(i,e,t,n)=>iy(i,e.target)?$N(i,e,t,n):UN(i,e,t,n),E3=()=>({ml:new so({x:-.5,y:0,cursorStyleHandler:Xu,actionHandler:GS,getActionName:zm}),mr:new so({x:.5,y:0,cursorStyleHandler:Xu,actionHandler:GS,getActionName:zm}),mb:new so({x:0,y:.5,cursorStyleHandler:Xu,actionHandler:$S,getActionName:zm}),mt:new so({x:0,y:-.5,cursorStyleHandler:Xu,actionHandler:$S,getActionName:zm}),tl:new so({x:-.5,y:-.5,cursorStyleHandler:Af,actionHandler:Rm}),tr:new so({x:.5,y:-.5,cursorStyleHandler:Af,actionHandler:Rm}),bl:new so({x:-.5,y:.5,cursorStyleHandler:Af,actionHandler:Rm}),br:new so({x:.5,y:.5,cursorStyleHandler:Af,actionHandler:Rm}),mtr:new so({x:0,y:-.5,actionHandler:RN,cursorStyleHandler:LN,offsetY:-40,withConnection:!0,actionName:u3})}),qN=()=>({mr:new so({x:.5,y:0,actionHandler:HS,cursorStyleHandler:Xu,actionName:Wm}),ml:new so({x:-.5,y:0,actionHandler:HS,cursorStyleHandler:Xu,actionName:Wm})}),KN=()=>ve(ve({},E3()),qN()),TC=class i extends fc{static getDefaults(){return ve(ve({},super.getDefaults()),i.ownDefaults)}constructor(e){super(),Object.assign(this,this.constructor.createControls(),i.ownDefaults),this.setOptions(e)}static createControls(){return{controls:E3()}}_updateCacheCanvas(){let e=this.canvas;if(this.noScaleCache&&e&&e._currentTransform){let t=e._currentTransform,n=t.target,r=t.action;if(this===n&&r&&r.startsWith(XC))return!1}return super._updateCacheCanvas()}getActiveControl(){let e=this.__corner;return e?{key:e,control:this.controls[e],coord:this.oCoords[e]}:void 0}findControl(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.hasControls||!this.canvas)return;this.__corner=void 0;let n=Object.entries(this.oCoords);for(let r=n.length-1;r>=0;r--){let[o,s]=n[r],a=this.controls[o];if(a.shouldActivate(o,this,e,t?s.touchCorner:s.corner))return this.__corner=o,{key:o,control:a,coord:this.oCoords[o]}}}calcOCoords(){let e=this.getViewportTransform(),t=this.getCenterPoint(),n=$f(t.x,t.y),r=x0({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),o=Ti(n,r),s=Ti(e,o),a=Ti(s,[1/e[0],0,0,1/e[3],0,0]),l=this.group?Lf(this.calcTransformMatrix()):void 0;l&&(l.scaleX=Math.abs(l.scaleX),l.scaleY=Math.abs(l.scaleY));let c=this._calculateCurrentDimensions(l),d={};return this.forEachControl((h,p)=>{let g=h.positionHandler(c,a,this,h);d[p]=Object.assign(g,this._calcCornerCoords(h,g))}),d}_calcCornerCoords(e,t){let n=this.getTotalAngle();return{corner:e.calcCornerCoords(n,this.cornerSize,t.x,t.y,!1,this),touchCorner:e.calcCornerCoords(n,this.touchCornerSize,t.x,t.y,!0,this)}}setCoords(){super.setCoords(),this.canvas&&(this.oCoords=this.calcOCoords())}forEachControl(e){for(let t in this.controls)e(this.controls[t],t,this)}drawSelectionBackground(e){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;e.save();let t=this.getRelativeCenterPoint(),n=this._calculateCurrentDimensions(),r=this.getViewportTransform();e.translate(t.x,t.y),e.scale(1/r[0],1/r[3]),e.rotate(Ii(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-n.x/2,-n.y/2,n.x,n.y),e.restore()}strokeBorders(e,t){e.strokeRect(-t.x/2,-t.y/2,t.x,t.y)}_drawBorders(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=ve({hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray},n);e.save(),e.strokeStyle=r.borderColor,this._setLineDash(e,r.borderDashArray),this.strokeBorders(e,t),r.hasControls&&this.drawControlsConnectingLines(e,t),e.restore()}_renderControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{hasBorders:n,hasControls:r}=this,o=ve({hasBorders:n,hasControls:r},t),s=this.getViewportTransform(),a=o.hasBorders,l=o.hasControls,c=Ti(s,this.calcTransformMatrix()),d=Lf(c);e.save(),e.translate(d.translateX,d.translateY),e.lineWidth=this.borderScaleFactor,this.group===this.parent&&(e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(d.angle-=180),e.rotate(Ii(this.group?d.angle:this.angle)),a&&this.drawBorders(e,d,t),l&&this.drawControls(e,t),e.restore()}drawBorders(e,t,n){let r;if(n&&n.forActiveSelection||this.group){let o=ZC(this.width,this.height,Zm(t)),s=this.isStrokeAccountedForInDimensions()?h3:(this.strokeUniform?new De().scalarAdd(this.canvas?this.canvas.getZoom():1):new De(t.scaleX,t.scaleY)).scalarMultiply(this.strokeWidth);r=o.add(s).scalarAdd(this.borderScaleFactor).scalarAdd(2*this.padding)}else r=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(e,r,n)}drawControlsConnectingLines(e,t){let n=!1;e.beginPath(),this.forEachControl((r,o)=>{r.withConnection&&r.getVisibility(this,o)&&(n=!0,e.moveTo(r.x*t.x,r.y*t.y),e.lineTo(r.x*t.x+r.offsetX,r.y*t.y+r.offsetY))}),n&&e.stroke()}drawControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e.save();let n=this.getCanvasRetinaScaling(),{cornerStrokeColor:r,cornerDashArray:o,cornerColor:s}=this,a=ve({cornerStrokeColor:r,cornerDashArray:o,cornerColor:s},t);e.setTransform(n,0,0,n,0,0),e.strokeStyle=e.fillStyle=a.cornerColor,this.transparentCorners||(e.strokeStyle=a.cornerStrokeColor),this._setLineDash(e,a.cornerDashArray),this.forEachControl((l,c)=>{if(l.getVisibility(this,c)){let d=this.oCoords[c];l.render(e,d.x,d.y,a,this)}}),e.restore()}isControlVisible(e){return this.controls[e]&&this.controls[e].getVisibility(this,e)}setControlVisible(e,t){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[e]=t}setControlsVisibility(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.entries(e).forEach(t=>{let[n,r]=t;return this.setControlVisible(n,r)})}clearContextTop(e){if(!this.canvas)return;let t=this.canvas.contextTop;if(!t)return;let n=this.canvas.viewportTransform;t.save(),t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this.transform(t);let r=this.width+4,o=this.height+4;return t.clearRect(-r/2,-o/2,r,o),e||t.restore(),t}onDeselect(e){return!1}onSelect(e){return!1}shouldStartDragging(e){return!1}onDragStart(e){return!1}canDrop(e){return!1}renderDragSourceEffect(e){}renderDropTargetEffect(e){}};function YN(i,e){return e.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(n=>{n!=="constructor"&&Object.defineProperty(i.prototype,n,Object.getOwnPropertyDescriptor(t.prototype,n)||Object.create(null))})}),i}ge(TC,"ownDefaults",{noScaleCache:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,cornerSize:13,touchCornerSize:24,transparentCorners:!0,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,hasControls:!0,borderColor:"rgb(178,204,255)",borderDashArray:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,hasBorders:!0,selectionBackgroundColor:"",selectable:!0,evented:!0,perPixelTargetFind:!1,activeOn:"down",hoverCursor:null,moveCursor:null});var Pr=class extends TC{};YN(Pr,[AC]),ft.setClass(Pr),ft.setClass(Pr,"object");var XN=(i,e,t,n)=>{let r=2*(n=Math.round(n))+1,{data:o}=i.getImageData(e-n,t-n,r,r);for(let s=3;s<o.length;s+=4)if(o[s]>0)return!1;return!0},BC=class{constructor(e){this.options=e,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new De(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new De(1/this.options.scaleX,1/this.options.scaleY):new De(1,1)}createSideVector(e,t){let n=DC(e,t);return this.options.strokeUniform?n.multiply(this.scale):n}projectOrthogonally(e,t,n){return this.applySkew(e.add(this.calcOrthogonalProjection(e,t,n)))}isSkewed(){return this.options.skewX!==0||this.options.skewY!==0}applySkew(e){let t=new De(e);return t.y+=t.x*Math.tan(Ii(this.options.skewY)),t.x+=t.y*Math.tan(Ii(this.options.skewX)),t}scaleUnitVector(e,t){return e.multiply(this.strokeUniformScalar).scalarMultiply(t)}},oie=new De,NC=class i extends BC{static getOrthogonalRotationFactor(e,t){let n=t?IC(e,t):DN(e);return Math.abs(n)<Od?-1:1}constructor(e,t,n,r){super(r),ge(this,"AB",void 0),ge(this,"AC",void 0),ge(this,"alpha",void 0),ge(this,"bisector",void 0),this.A=new De(e),this.B=new De(t),this.C=new De(n),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=IC(this.AB,this.AC),this.bisector=ny(C3(this.AB.eq(oie)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude,r=this.createSideVector(e,t),o=y3(r),s=i.getOrthogonalRotationFactor(o,this.bisector);return this.scaleUnitVector(o,n*s)}projectBevel(){let e=[];return(this.alpha%xc==0?[this.B]:[this.B,this.C]).forEach(t=>{e.push(this.projectOrthogonally(this.A,t)),e.push(this.projectOrthogonally(this.A,t,-this.strokeProjectionMagnitude))}),e}projectMiter(){let e=[],t=Math.abs(this.alpha),n=1/Math.sin(t/2),r=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*n),o=this.options.strokeUniform?FC(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return FC(r)/this.strokeProjectionMagnitude<=o&&e.push(this.applySkew(this.A.add(r))),e.push(...this.projectBevel()),e}projectRoundNoSkew(e,t){let n=[],r=new De(i.getOrthogonalRotationFactor(this.bisector),i.getOrthogonalRotationFactor(new De(this.bisector.y,this.bisector.x)));return[new De(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(r),new De(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(r)].forEach(o=>{LS(o,e,t)&&n.push(this.A.add(o))}),n}projectRoundWithSkew(e,t){let n=[],{skewX:r,skewY:o,scaleX:s,scaleY:a,strokeUniform:l}=this.options,c=new De(Math.tan(Ii(r)),Math.tan(Ii(o))),d=this.strokeProjectionMagnitude,h=l?d/a/Math.sqrt(1/a**2+1/s**2*c.y**2):d/Math.sqrt(1+c.y**2),p=new De(Math.sqrt(Math.max(d**2-h**2,0)),h),g=l?d/Math.sqrt(1+c.x**2*(1/a)**2/(1/s+1/s*c.x*c.y)**2):d/Math.sqrt(1+c.x**2/(1+c.x*c.y)**2),_=new De(g,Math.sqrt(Math.max(d**2-g**2,0)));return[_,_.scalarMultiply(-1),p,p.scalarMultiply(-1)].map(b=>this.applySkew(l?b.multiply(this.strokeUniformScalar):b)).forEach(b=>{LS(b,e,t)&&n.push(this.applySkew(this.A).add(b))}),n}projectRound(){let e=[];e.push(...this.projectBevel());let t=this.alpha%xc==0,n=this.applySkew(this.A),r=e[t?0:2].subtract(n),o=e[t?1:0].subtract(n),s=t?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),a=Bf(r,s)>0,l=a?r:o,c=a?o:r;return this.isSkewed()?e.push(...this.projectRoundWithSkew(l,c)):e.push(...this.projectRoundNoSkew(l,c)),e}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e,angle:this.alpha,bisector:this.bisector}))}},LC=class extends BC{constructor(e,t,n){super(n),this.A=new De(e),this.T=new De(t)}calcOrthogonalProjection(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude,r=this.createSideVector(e,t);return this.scaleUnitVector(y3(r),n)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){let e=[];if(!this.isSkewed()&&this.A.eq(this.T)){let t=new De(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.applySkew(this.A.add(t)),this.applySkew(this.A.subtract(t)))}else e.push(...new NC(this.A,this.T,this.T,this.options).projectRound());return e}projectSquare(){let e=[];if(this.A.eq(this.T)){let t=new De(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.A.add(t),this.A.subtract(t))}else{let t=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),n=this.scaleUnitVector(ny(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),r=this.A.add(n);e.push(r.add(t),r.subtract(t))}return e.map(t=>this.applySkew(t))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e}))}},QN=function(i,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2],n=[];if(i.length===0)return n;let r=i.reduce((o,s)=>(o[o.length-1].eq(s)||o.push(new De(s)),o),[new De(i[0])]);if(r.length===1)t=!0;else if(!t){let o=r[0],s=((a,l)=>{for(let c=a.length-1;c>=0;c--)if(l(a[c],c,a))return c;return-1})(r,a=>!a.eq(o));r.splice(s+1)}return r.forEach((o,s,a)=>{let l,c;s===0?(c=a[1],l=t?o:a[a.length-1]):s===a.length-1?(l=a[s-1],c=t?o:a[0]):(l=a[s-1],c=a[s+1]),t&&a.length===1?n.push(...new LC(o,o,e).project()):!t||s!==0&&s!==a.length-1?n.push(...new NC(o,l,c,e).project()):n.push(...new LC(o,s===0?c:l,e).project())}),n},P3=i=>{let e={};return Object.keys(i).forEach(t=>{e[t]={},Object.keys(i[t]).forEach(n=>{e[t][n]=ve({},i[t][n])})}),e},JN=i=>i.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Nm,ry=i=>{if(Nm||Nm||(Nm="Intl"in Jm()&&"Segmenter"in Intl&&new Intl.Segmenter(void 0,{granularity:"grapheme"})),Nm){let e=Nm.segment(i);return Array.from(e).map(t=>{let{segment:n}=t;return n})}return sie(i)},sie=i=>{let e=[];for(let t,n=0;n<i.length;n++)(t=aie(i,n))!==!1&&e.push(t);return e},aie=(i,e)=>{let t=i.charCodeAt(e);if(isNaN(t))return"";if(t<55296||t>57343)return i.charAt(e);if(55296<=t&&t<=56319){if(i.length<=e+1)throw"High surrogate without following low surrogate";let r=i.charCodeAt(e+1);if(56320>r||r>57343)throw"High surrogate without following low surrogate";return i.charAt(e)+i.charAt(e+1)}if(e===0)throw"Low surrogate without preceding high surrogate";let n=i.charCodeAt(e-1);if(55296>n||n>56319)throw"Low surrogate without preceding high surrogate";return!1},lie=Object.freeze({__proto__:null,capitalize:function(i){let e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return"".concat(i.charAt(0).toUpperCase()).concat(e?i.slice(1):i.slice(1).toLowerCase())},escapeXml:JN,graphemeSplit:ry}),oy=function(i,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return i.fill!==e.fill||i.stroke!==e.stroke||i.strokeWidth!==e.strokeWidth||i.fontSize!==e.fontSize||i.fontFamily!==e.fontFamily||i.fontWeight!==e.fontWeight||i.fontStyle!==e.fontStyle||i.textBackgroundColor!==e.textBackgroundColor||i.deltaY!==e.deltaY||t&&(i.overline!==e.overline||i.underline!==e.underline||i.linethrough!==e.linethrough)},ZN=(i,e)=>{let t=e.split(`
`),n=[],r=-1,o={};i=P3(i);for(let s=0;s<t.length;s++){let a=ry(t[s]);if(i[s])for(let l=0;l<a.length;l++){r++;let c=i[s][l];c&&Object.keys(c).length>0&&(oy(o,c,!0)?n.push({start:r,end:r+1,style:c}):n[n.length-1].end++),o=c||{}}else r+=a.length,o={}}return n},eL=(i,e)=>{if(!Array.isArray(i))return P3(i);let t=e.split(d3),n={},r=-1,o=0;for(let s=0;s<t.length;s++){let a=ry(t[s]);for(let l=0;l<a.length;l++)r++,i[o]&&i[o].start<=r&&r<i[o].end&&(n[s]=n[s]||{},n[s][l]=ve({},i[o].style),r===i[o].end-1&&o++)}return n},Fd=["display","transform",_r,"fill-opacity","fill-rule","opacity",zo,"stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function $B(i,e){let t=i.nodeName,n=i.getAttribute("class"),r=i.getAttribute("id"),o="(?![a-zA-Z\\-]+)",s;if(s=new RegExp("^"+t,"i"),e=e.replace(s,""),r&&e.length&&(s=new RegExp("#"+r+o,"i"),e=e.replace(s,"")),n&&e.length){let a=n.split(" ");for(let l=a.length;l--;)s=new RegExp("\\."+a[l]+o,"i"),e=e.replace(s,"")}return e.length===0}function cie(i,e){let t=!0,n=$B(i,e.pop());return n&&e.length&&(t=function(r,o){let s,a=!0;for(;r.parentElement&&r.parentElement.nodeType===1&&o.length;)a&&(s=o.pop()),a=$B(r=r.parentElement,s);return o.length===0}(i,e)),n&&t&&e.length===0}var die=i=>{var e;return(e=Gne[i])!==null&&e!==void 0?e:i},uie=new RegExp("(".concat(Ma,")"),"gi"),hie=i=>i.replace(uie," $1 ").replace(/,/gi," ").replace(/\s+/gi," "),WB,qB,KB,YB,XB,QB,JB,lo="(".concat(Ma,")"),fie=String.raw(WB||(WB=Ad(["(skewX)(",")"],["(skewX)\\(","\\)"])),lo),gie=String.raw(qB||(qB=Ad(["(skewY)(",")"],["(skewY)\\(","\\)"])),lo),pie=String.raw(KB||(KB=Ad(["(rotate)(","(?: "," ",")?)"],["(rotate)\\(","(?: "," ",")?\\)"])),lo,lo,lo),mie=String.raw(YB||(YB=Ad(["(scale)(","(?: ",")?)"],["(scale)\\(","(?: ",")?\\)"])),lo,lo),xie=String.raw(XB||(XB=Ad(["(translate)(","(?: ",")?)"],["(translate)\\(","(?: ",")?\\)"])),lo,lo),_ie=String.raw(QB||(QB=Ad(["(matrix)("," "," "," "," "," ",")"],["(matrix)\\("," "," "," "," "," ","\\)"])),lo,lo,lo,lo,lo,lo),O3="(?:".concat(_ie,"|").concat(xie,"|").concat(pie,"|").concat(mie,"|").concat(fie,"|").concat(gie,")"),vie="(?:".concat(O3,"*)"),bie=String.raw(JB||(JB=Ad(["^s*(?:","?)s*$"],["^\\s*(?:","?)\\s*$"])),vie),Cie=new RegExp(bie),yie=new RegExp(O3),wie=new RegExp(O3,"g");function WS(i){let e=[];if(!(i=hie(i).replace(/\s*([()])\s*/gi,"$1"))||i&&!Cie.test(i))return[...ho];for(let t of i.matchAll(wie)){let n=yie.exec(t[0]);if(!n)continue;let r=ho,o=n.filter(_=>!!_),[,s,...a]=o,[l,c,d,h,p,g]=a.map(_=>parseFloat(_));switch(s){case"translate":r=$f(l,c);break;case u3:r=x0({angle:l},{x:c,y:d});break;case XC:r=JC(l,c);break;case Hf:r=p3(l);break;case Gf:r=m3(l);break;case"matrix":r=[l,c,d,h,p,g]}e.push(r)}return QC(e)}function Mie(i,e,t,n){let r=Array.isArray(e),o,s=e;if(i!==_r&&i!==zo||e!==Ro){if(i==="strokeUniform")return e==="non-scaling-stroke";if(i==="strokeDashArray")s=e===Ro?null:e.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(i==="transformMatrix")s=t&&t.transformMatrix?Ti(t.transformMatrix,WS(e)):WS(e);else if(i==="visible")s=e!==Ro&&e!=="hidden",t&&t.visible===!1&&(s=!1);else if(i==="opacity")s=parseFloat(e),t&&t.opacity!==void 0&&(s*=t.opacity);else if(i==="textAnchor")s=e==="start"?Nn:e==="end"?$i:Qt;else if(i==="charSpacing")o=f0(e,n)/n*1e3;else if(i==="paintFirst"){let a=e.indexOf(_r),l=e.indexOf(zo);s=_r,(a>-1&&l>-1&&l<a||a===-1&&l>-1)&&(s=zo)}else{if(i==="href"||i==="xlink:href"||i==="font"||i==="id")return e;if(i==="imageSmoothing")return e==="optimizeQuality";o=r?e.map(f0):f0(e,n)}}else s="";return!r&&isNaN(o)?s:o}function Eie(i,e){let t=i.match(Hne);if(!t)return;let n=t[1],r=t[3],o=t[4],s=t[5],a=t[6];n&&(e.fontStyle=n),r&&(e.fontWeight=isNaN(parseFloat(r))?r:parseFloat(r)),o&&(e.fontSize=f0(o)),a&&(e.fontFamily=a),s&&(e.lineHeight=s==="normal"?1:s)}function Pie(i,e){i.replace(/;\s*$/,"").split(";").forEach(t=>{if(!t)return;let[n,r]=t.split(":");e[n.trim().toLowerCase()]=r.trim()})}function Oie(i){let e={},t=i.getAttribute("style");return t&&(typeof t=="string"?Pie(t,e):function(n,r){Object.entries(n).forEach(o=>{let[s,a]=o;a!==void 0&&(r[s.toLowerCase()]=a)})}(t,e)),e}var Sie={stroke:"strokeOpacity",fill:"fillOpacity"};function bc(i,e,t){if(!i)return{};let n,r={},o=c3;i.parentNode&&jB.test(i.parentNode.nodeName)&&(r=bc(i.parentElement,e,t),r.fontSize&&(n=o=f0(r.fontSize)));let s=ve(ve(ve({},e.reduce((c,d)=>{let h=i.getAttribute(d);return h&&(c[d]=h),c},{})),function(c){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h={};for(let p in d)cie(c,p.split(" "))&&(h=ve(ve({},h),d[p]));return h}(i,t)),Oie(i));s[yS]&&i.setAttribute(yS,s[yS]),s[CS]&&(n=f0(s[CS],o),s[CS]="".concat(n));let a={};for(let c in s){let d=die(c),h=Mie(d,s[c],r,n);a[d]=h}a&&a.font&&Eie(a.font,a);let l=ve(ve({},r),a);return jB.test(i.nodeName)?l:function(c){let d=Pr.getDefaults();return Object.entries(Sie).forEach(h=>{let[p,g]=h;if(c[g]===void 0||c[p]==="")return;if(c[p]===void 0){if(!d[p])return;c[p]=d[p]}if(c[p].indexOf("url(")===0)return;let _=new qr(c[p]);c[p]=_.setAlpha(gi(_.getAlpha()*c[g],2)).toRgba()}),c}(l)}var kie=["left","top","width","height","visible"],tL=["rx","ry"],co=class i extends Pr{static getDefaults(){return ve(ve({},super.getDefaults()),i.ownDefaults)}constructor(e){super(),Object.assign(this,i.ownDefaults),this.setOptions(e),this._initRxRy()}_initRxRy(){let{rx:e,ry:t}=this;e&&!t?this.ry=e:t&&!e&&(this.rx=t)}_render(e){let{width:t,height:n}=this,r=-t/2,o=-n/2,s=this.rx?Math.min(this.rx,t/2):0,a=this.ry?Math.min(this.ry,n/2):0,l=s!==0||a!==0;e.beginPath(),e.moveTo(r+s,o),e.lineTo(r+t-s,o),l&&e.bezierCurveTo(r+t-bd*s,o,r+t,o+bd*a,r+t,o+a),e.lineTo(r+t,o+n-a),l&&e.bezierCurveTo(r+t,o+n-bd*a,r+t-bd*s,o+n,r+t-s,o+n),e.lineTo(r+s,o+n),l&&e.bezierCurveTo(r+bd*s,o+n,r,o+n-bd*a,r,o+n-a),e.lineTo(r,o+a),l&&e.bezierCurveTo(r,o+bd*a,r+bd*s,o,r+s,o),e.closePath(),this._renderPaintInOrder(e)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...tL,...e])}_toSVG(){let{width:e,height:t,rx:n,ry:r}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-e/2,'" y="').concat(-t/2,'" rx="').concat(n,'" ry="').concat(r,'" width="').concat(e,'" height="').concat(t,`" />
`)]}static fromElement(e,t,n){return Ge(this,null,function*(){let r=bc(e,this.ATTRIBUTE_NAMES,n),{left:o=0,top:s=0,width:a=0,height:l=0,visible:c=!0}=r,d=vi(r,kie);return new this(ve(ve(ve({},t),d),{},{left:o,top:s,width:a,height:l,visible:!!(c&&a&&l)}))})}};ge(co,"type","Rect"),ge(co,"cacheProperties",[...vc,...tL]),ge(co,"ownDefaults",{rx:0,ry:0}),ge(co,"ATTRIBUTE_NAMES",[...Fd,"x","y","rx","ry","width","height"]),ft.setClass(co),ft.setSVGClass(co);var gc="initialization",RC="added",S3="removed",zC="imperative",nL=(i,e)=>{let{strokeUniform:t,strokeWidth:n,width:r,height:o,group:s}=e,a=s&&s!==i?tx(s.calcTransformMatrix(),i.calcTransformMatrix()):null,l=a?e.getRelativeCenterPoint().transform(a):e.getRelativeCenterPoint(),c=!e.isStrokeAccountedForInDimensions(),d=t&&c?EN(new De(n,n),void 0,i.calcTransformMatrix()):h3,h=!t&&c?n:0,p=ZC(r+h,o+h,QC([a,e.calcOwnMatrix()],!0)).add(d).scalarDivide(2);return[l.subtract(p),l.add(p)]},Vf=class{calcLayoutResult(e,t){if(this.shouldPerformLayout(e))return this.calcBoundingBox(t,e)}shouldPerformLayout(e){let{type:t,prevStrategy:n,strategy:r}=e;return t===gc||t===zC||!!n&&r!==n}shouldLayoutClipPath(e){let{type:t,target:{clipPath:n}}=e;return t!==gc&&n&&!n.absolutePositioned}getInitialSize(e,t){return t.size}calcBoundingBox(e,t){let{type:n,target:r}=t;if(n===zC&&t.overrides)return t.overrides;if(e.length===0)return;let{left:o,top:s,width:a,height:l}=_l(e.map(h=>nL(r,h)).reduce((h,p)=>h.concat(p),[])),c=new De(a,l),d=new De(o,s).add(c.scalarDivide(2));if(n===gc){let h=this.getInitialSize(t,{size:c,center:d});return{center:d,relativeCorrection:new De(0,0),size:h}}return{center:d.transform(r.calcOwnMatrix()),size:c}}};ge(Vf,"type","strategy");var Xm=class extends Vf{shouldPerformLayout(e){return!0}};ge(Xm,"type","fit-content"),ft.setClass(Xm);var Aie=["strategy"],Die=["target","strategy","bubbles","prevStrategy"],iL="layoutManager",m0=class{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Xm;ge(this,"strategy",void 0),this.strategy=e,this._subscriptions=new Map}performLayout(e){let t=ve(ve({bubbles:!0,strategy:this.strategy},e),{},{prevStrategy:this._prevLayoutStrategy,stopPropagation(){this.bubbles=!1}});this.onBeforeLayout(t);let n=this.getLayoutResult(t);n&&this.commitLayout(t,n),this.onAfterLayout(t,n),this._prevLayoutStrategy=t.strategy}attachHandlers(e,t){let{target:n}=t;return[MC,lN,Wm,cN,YC,dN,wC,uN,Lne].map(r=>e.on(r,o=>this.performLayout(r===MC?{type:"object_modified",trigger:r,e:o,target:n}:{type:"object_modifying",trigger:r,e:o,target:n})))}subscribe(e,t){this.unsubscribe(e,t);let n=this.attachHandlers(e,t);this._subscriptions.set(e,n)}unsubscribe(e,t){(this._subscriptions.get(e)||[]).forEach(n=>n()),this._subscriptions.delete(e)}unsubscribeTargets(e){e.targets.forEach(t=>this.unsubscribe(t,e))}subscribeTargets(e){e.targets.forEach(t=>this.subscribe(t,e))}onBeforeLayout(e){let{target:t,type:n}=e,{canvas:r}=t;if(n===gc||n===RC?this.subscribeTargets(e):n===S3&&this.unsubscribeTargets(e),t.fire("layout:before",{context:e}),r&&r.fire("object:layout:before",{target:t,context:e}),n===zC&&e.deep){let o=vi(e,Aie);t.forEachObject(s=>s.layoutManager&&s.layoutManager.performLayout(ve(ve({},o),{},{bubbles:!1,target:s})))}}getLayoutResult(e){let{target:t,strategy:n,type:r}=e,o=n.calcLayoutResult(e,t.getObjects());if(!o)return;let s=r===gc?new De:t.getRelativeCenterPoint(),{center:a,correction:l=new De,relativeCorrection:c=new De}=o,d=s.subtract(a).add(l).transform(r===gc?ho:gs(t.calcOwnMatrix()),!0).add(c);return{result:o,prevCenter:s,nextCenter:a,offset:d}}commitLayout(e,t){let{target:n}=e,{result:{size:r},nextCenter:o}=t;var s,a;n.set({width:r.x,height:r.y}),this.layoutObjects(e,t),e.type===gc?n.set({left:(s=e.x)!==null&&s!==void 0?s:o.x+r.x*ir(n.originX),top:(a=e.y)!==null&&a!==void 0?a:o.y+r.y*ir(n.originY)}):(n.setPositionByOrigin(o,Qt,Qt),n.setCoords(),n.set("dirty",!0))}layoutObjects(e,t){let{target:n}=e;n.forEachObject(r=>{r.group===n&&this.layoutObject(e,t,r)}),e.strategy.shouldLayoutClipPath(e)&&this.layoutObject(e,t,n.clipPath)}layoutObject(e,t,n){let{offset:r}=t;n.set({left:n.left+r.x,top:n.top+r.y})}onAfterLayout(e,t){let{target:n,strategy:r,bubbles:o,prevStrategy:s}=e,a=vi(e,Die),{canvas:l}=n;n.fire("layout:after",{context:e,result:t}),l&&l.fire("object:layout:after",{context:e,result:t,target:n});let c=n.parent;o&&c!=null&&c.layoutManager&&((a.path||(a.path=[])).push(n),c.layoutManager.performLayout(ve(ve({},a),{},{target:c}))),n.set("dirty",!0)}dispose(){let{_subscriptions:e}=this;e.forEach(t=>t.forEach(n=>n())),e.clear()}toObject(){return{type:iL,strategy:this.strategy.constructor.type}}toJSON(){return this.toObject()}};ft.setClass(m0,iL);var Fie=["type","objects","layoutManager"],qS=class extends m0{performLayout(){}},jo=class i extends hN(Pr){static getDefaults(){return ve(ve({},super.getDefaults()),i.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),ge(this,"_activeObjects",[]),ge(this,"__objectSelectionTracker",void 0),ge(this,"__objectSelectionDisposer",void 0),Object.assign(this,i.ownDefaults),this.setOptions(t),this.groupInit(e,t)}groupInit(e,t){var n;this._objects=[...e],this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.forEachObject(r=>{this.enterGroup(r,!1)}),this.layoutManager=(n=t.layoutManager)!==null&&n!==void 0?n:new m0,this.layoutManager.performLayout({type:gc,target:this,targets:[...e],x:t.left,y:t.top})}canEnterGroup(e){return e===this||this.isDescendantOf(e)?(Pd("error","Group: circular object trees are not supported, this call has no effect"),!1):this._objects.indexOf(e)===-1||(Pd("error","Group: duplicate objects are not supported inside group, this call has no effect"),!1)}_filterObjectsBeforeEnteringGroup(e){return e.filter((t,n,r)=>this.canEnterGroup(t)&&r.indexOf(t)===n)}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let r=this._filterObjectsBeforeEnteringGroup(t),o=super.add(...r);return this._onAfterObjectsChange(RC,r),o}insertAt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];let o=this._filterObjectsBeforeEnteringGroup(n),s=super.insertAt(e,...o);return this._onAfterObjectsChange(RC,o),s}remove(){let e=super.remove(...arguments);return this._onAfterObjectsChange(S3,e),e}_onObjectAdded(e){this.enterGroup(e,!0),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e,t){this.exitGroup(e,t),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onAfterObjectsChange(e,t){this.layoutManager.performLayout({type:e,targets:t,target:this})}_onStackOrderChanged(){this._set("dirty",!0)}_set(e,t){let n=this[e];return super._set(e,t),e==="canvas"&&n!==t&&(this._objects||[]).forEach(r=>{r._set(e,t)}),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectSelectionMonitor(e,t){let{target:n}=t,r=this._activeObjects;if(e)r.push(n),this._set("dirty",!0);else if(r.length>0){let o=r.indexOf(n);o>-1&&(r.splice(o,1),this._set("dirty",!0))}}_watchObject(e,t){e&&this._watchObject(!1,t),e?(t.on("selected",this.__objectSelectionTracker),t.on("deselected",this.__objectSelectionDisposer)):(t.off("selected",this.__objectSelectionTracker),t.off("deselected",this.__objectSelectionDisposer))}enterGroup(e,t){e.group&&e.group.remove(e),e._set("parent",this),this._enterGroup(e,t)}_enterGroup(e,t){t&&jf(e,Ti(gs(this.calcTransformMatrix()),e.calcTransformMatrix())),this._shouldSetNestedCoords()&&e.setCoords(),e._set("group",this),e._set("canvas",this.canvas),this._watchObject(!0,e);let n=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();n&&(n===e||e.isDescendantOf(n))&&this._activeObjects.push(e)}exitGroup(e,t){this._exitGroup(e,t),e._set("parent",void 0),e._set("canvas",void 0)}_exitGroup(e,t){e._set("group",void 0),t||(jf(e,Ti(this.calcTransformMatrix(),e.calcTransformMatrix())),e.setCoords()),this._watchObject(!1,e);let n=this._activeObjects.length>0?this._activeObjects.indexOf(e):-1;n>-1&&this._activeObjects.splice(n,1)}shouldCache(){let e=Pr.prototype.shouldCache.call(this);if(e){for(let t=0;t<this._objects.length;t++)if(this._objects[t].willDrawShadow())return this.ownCaching=!1,!1}return e}willDrawShadow(){if(super.willDrawShadow())return!0;for(let e=0;e<this._objects.length;e++)if(this._objects[e].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.parent&&this.parent.isOnACache()}drawObject(e,t,n){this._renderBackground(e);for(let o=0;o<this._objects.length;o++){var r;let s=this._objects[o];(r=this.canvas)!==null&&r!==void 0&&r.preserveObjectStacking&&s.group!==this?(e.save(),e.transform(...gs(this.calcTransformMatrix())),s.render(e),e.restore()):s.group===this&&s.render(e)}this._drawClipPath(e,this.clipPath,n)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject(e=>e.setCoords())}triggerLayout(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.layoutManager.performLayout(ve({target:this,type:zC},e))}render(e){this._transformDone=!0,super.render(e),this._transformDone=!1}__serializeObjects(e,t){let n=this.includeDefaultValues;return this._objects.filter(function(r){return!r.excludeFromExport}).map(function(r){let o=r.includeDefaultValues;r.includeDefaultValues=n;let s=r[e||"toObject"](t);return r.includeDefaultValues=o,s})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=this.layoutManager.toObject();return ve(ve(ve({},super.toObject(["subTargetCheck","interactive",...e])),t.strategy!=="fit-content"||this.includeDefaultValues?{layoutManager:t}:{}),{},{objects:this.__serializeObjects("toObject",e)})}toString(){return"#<Group: (".concat(this.complexity(),")>")}dispose(){this.layoutManager.unsubscribeTargets({targets:this.getObjects(),target:this}),this._activeObjects=[],this.forEachObject(e=>{this._watchObject(!1,e),e.dispose()}),super.dispose()}_createSVGBgRect(e){if(!this.backgroundColor)return"";let t=co.prototype._toSVG.call(this),n=t.indexOf("COMMON_PARTS");t[n]='for="group" ';let r=t.join("");return e?e(r):r}_toSVG(e){let t=["<g ","COMMON_PARTS",` >
`],n=this._createSVGBgRect(e);n&&t.push("		",n);for(let r=0;r<this._objects.length;r++)t.push("		",this._objects[r].toSVG(e));return t.push(`</g>
`),t}getSvgStyles(){let e=this.opacity!==void 0&&this.opacity!==1?"opacity: ".concat(this.opacity,";"):"",t=this.visible?"":" visibility: hidden;";return[e,this.getSvgFilter(),t].join("")}toClipPathSVG(e){let t=[],n=this._createSVGBgRect(e);n&&t.push("	",n);for(let r=0;r<this._objects.length;r++)t.push("	",this._objects[r].toClipPathSVG(e));return this._createBaseClipPathSVGMarkup(t,{reviver:e})}static fromObject(e,t){let{type:n,objects:r=[],layoutManager:o}=e,s=vi(e,Fie);return Promise.all([Rf(r,t),ex(s,t)]).then(a=>{let[l,c]=a,d=new this(l,ve(ve(ve({},s),c),{},{layoutManager:new qS}));if(o){let h=ft.getClass(o.type),p=ft.getClass(o.strategy);d.layoutManager=new h(new p)}else d.layoutManager=new m0;return d.layoutManager.subscribeTargets({type:gc,target:d,targets:d.getObjects()}),d.setCoords(),d})}};ge(jo,"type","Group"),ge(jo,"ownDefaults",{strokeWidth:0,subTargetCheck:!1,interactive:!1}),ft.setClass(jo);var rL=(i,e)=>Math.min(e.width/i.width,e.height/i.height),oL=(i,e)=>Math.max(e.width/i.width,e.height/i.height),KS="\\s*,?\\s*",Lm="".concat(KS,"(").concat(Ma,")"),Iie="".concat(Lm).concat(Lm).concat(Lm).concat(KS,"([01])").concat(KS,"([01])").concat(Lm).concat(Lm),Tie={m:"l",M:"L"},Bie=(i,e,t,n,r,o,s,a,l,c,d)=>{let h=Pa(i),p=Oa(i),g=Pa(e),_=Oa(e),b=t*r*g-n*o*_+s,C=n*r*g+t*o*_+a;return["C",c+l*(-t*r*p-n*o*h),d+l*(-n*r*p+t*o*h),b+l*(t*r*_+n*o*g),C+l*(n*r*_-t*o*g),b,C]},ZB=(i,e,t,n)=>{let r=Math.atan2(e,i),o=Math.atan2(n,t);return o>=r?o-r:2*Math.PI-(r-o)};function YS(i,e,t,n,r,o,s,a){let l;if(Fn.cachesBoundsOfCurve&&(l=[...arguments].join(),jm.boundsOfCurveCache[l]))return jm.boundsOfCurveCache[l];let c=Math.sqrt,d=Math.abs,h=[],p=[[0,0],[0,0]],g=6*i-12*t+6*r,_=-3*i+9*t-9*r+3*s,b=3*t-3*i;for(let A=0;A<2;++A){if(A>0&&(g=6*e-12*n+6*o,_=-3*e+9*n-9*o+3*a,b=3*n-3*e),d(_)<1e-12){if(d(g)<1e-12)continue;let H=-b/g;0<H&&H<1&&h.push(H);continue}let D=g*g-4*b*_;if(D<0)continue;let N=c(D),B=(-g+N)/(2*_);0<B&&B<1&&h.push(B);let T=(-g-N)/(2*_);0<T&&T<1&&h.push(T)}let C=h.length,y=C,M=aL(i,e,t,n,r,o,s,a);for(;C--;){let{x:A,y:D}=M(h[C]);p[0][C]=A,p[1][C]=D}p[0][y]=i,p[1][y]=e,p[0][y+1]=s,p[1][y+1]=a;let O=[new De(Math.min(...p[0]),Math.min(...p[1])),new De(Math.max(...p[0]),Math.max(...p[1]))];return Fn.cachesBoundsOfCurve&&(jm.boundsOfCurveCache[l]=O),O}var Nie=(i,e,t)=>{let[n,r,o,s,a,l,c,d]=t,h=((p,g,_,b,C,y,M)=>{if(_===0||b===0)return[];let O=0,A=0,D=0,N=Math.PI,B=M*l3,T=Oa(B),H=Pa(B),te=.5*(-H*p-T*g),L=.5*(-H*g+T*p),z=_**2,J=b**2,Q=L**2,ce=te**2,X=z*J-z*Q-J*ce,ie=Math.abs(_),oe=Math.abs(b);if(X<0){let Ue=Math.sqrt(1-X/(z*J));ie*=Ue,oe*=Ue}else D=(C===y?-1:1)*Math.sqrt(X/(z*Q+J*ce));let le=D*ie*L/oe,Ce=-D*oe*te/ie,Ne=H*le-T*Ce+.5*p,R=T*le+H*Ce+.5*g,ne=ZB(1,0,(te-le)/ie,(L-Ce)/oe),re=ZB((te-le)/ie,(L-Ce)/oe,(-te-le)/ie,(-L-Ce)/oe);y===0&&re>0?re-=2*N:y===1&&re<0&&(re+=2*N);let de=Math.ceil(Math.abs(re/N*2)),fe=[],me=re/de,Pe=8/3*Math.sin(me/4)*Math.sin(me/4)/Math.sin(me/2),Me=ne+me;for(let Ue=0;Ue<de;Ue++)fe[Ue]=Bie(ne,Me,H,T,ie,oe,Ne,R,Pe,O,A),O=fe[Ue][5],A=fe[Ue][6],ne=Me,Me+=me;return fe})(c-i,d-e,r,o,a,l,s);for(let p=0,g=h.length;p<g;p++)h[p][1]+=i,h[p][2]+=e,h[p][3]+=i,h[p][4]+=e,h[p][5]+=i,h[p][6]+=e;return h},sL=i=>{let e=0,t=0,n=0,r=0,o=[],s,a=0,l=0;for(let c of i){let d=[...c],h;switch(d[0]){case"l":d[1]+=e,d[2]+=t;case"L":e=d[1],t=d[2],h=["L",e,t];break;case"h":d[1]+=e;case"H":e=d[1],h=["L",e,t];break;case"v":d[1]+=t;case"V":t=d[1],h=["L",e,t];break;case"m":d[1]+=e,d[2]+=t;case"M":e=d[1],t=d[2],n=d[1],r=d[2],h=["M",e,t];break;case"c":d[1]+=e,d[2]+=t,d[3]+=e,d[4]+=t,d[5]+=e,d[6]+=t;case"C":a=d[3],l=d[4],e=d[5],t=d[6],h=["C",d[1],d[2],a,l,e,t];break;case"s":d[1]+=e,d[2]+=t,d[3]+=e,d[4]+=t;case"S":s==="C"?(a=2*e-a,l=2*t-l):(a=e,l=t),e=d[3],t=d[4],h=["C",a,l,d[1],d[2],e,t],a=h[3],l=h[4];break;case"q":d[1]+=e,d[2]+=t,d[3]+=e,d[4]+=t;case"Q":a=d[1],l=d[2],e=d[3],t=d[4],h=["Q",a,l,e,t];break;case"t":d[1]+=e,d[2]+=t;case"T":s==="Q"?(a=2*e-a,l=2*t-l):(a=e,l=t),e=d[1],t=d[2],h=["Q",a,l,e,t];break;case"a":d[6]+=e,d[7]+=t;case"A":Nie(e,t,d).forEach(p=>o.push(p)),e=d[6],t=d[7];break;case"z":case"Z":e=n,t=r,h=["Z"]}h?(o.push(h),s=h[0]):s=""}return o},jC=(i,e,t,n)=>Math.sqrt((t-i)**2+(n-e)**2),aL=(i,e,t,n,r,o,s,a)=>l=>{let c=l**3,d=(g=>3*g**2*(1-g))(l),h=(g=>3*g*(1-g)**2)(l),p=(g=>(1-g)**3)(l);return new De(s*c+r*d+t*h+i*p,a*c+o*d+n*h+e*p)},lL=i=>i**2,cL=i=>2*i*(1-i),dL=i=>(1-i)**2,Lie=(i,e,t,n,r,o,s,a)=>l=>{let c=lL(l),d=cL(l),h=dL(l),p=3*(h*(t-i)+d*(r-t)+c*(s-r)),g=3*(h*(n-e)+d*(o-n)+c*(a-o));return Math.atan2(g,p)},Rie=(i,e,t,n,r,o)=>s=>{let a=lL(s),l=cL(s),c=dL(s);return new De(r*a+t*l+i*c,o*a+n*l+e*c)},zie=(i,e,t,n,r,o)=>s=>{let a=1-s,l=2*(a*(t-i)+s*(r-t)),c=2*(a*(n-e)+s*(o-n));return Math.atan2(c,l)},eN=(i,e,t)=>{let n=new De(e,t),r=0;for(let o=1;o<=100;o+=1){let s=i(o/100);r+=jC(n.x,n.y,s.x,s.y),n=s}return r},jie=(i,e)=>{let t,n=0,r=0,o={x:i.x,y:i.y},s=ve({},o),a=.01,l=0,c=i.iterator,d=i.angleFinder;for(;r<e&&a>1e-4;)s=c(n),l=n,t=jC(o.x,o.y,s.x,s.y),t+r>e?(n-=a,a/=2):(o=s,n+=a,r+=t);return ve(ve({},s),{},{angle:d(l)})},k3=i=>{let e,t,n=0,r=0,o=0,s=0,a=0,l=[];for(let c of i){let d={x:r,y:o,command:c[0],length:0};switch(c[0]){case"M":t=d,t.x=s=r=c[1],t.y=a=o=c[2];break;case"L":t=d,t.length=jC(r,o,c[1],c[2]),r=c[1],o=c[2];break;case"C":e=aL(r,o,c[1],c[2],c[3],c[4],c[5],c[6]),t=d,t.iterator=e,t.angleFinder=Lie(r,o,c[1],c[2],c[3],c[4],c[5],c[6]),t.length=eN(e,r,o),r=c[5],o=c[6];break;case"Q":e=Rie(r,o,c[1],c[2],c[3],c[4]),t=d,t.iterator=e,t.angleFinder=zie(r,o,c[1],c[2],c[3],c[4]),t.length=eN(e,r,o),r=c[3],o=c[4];break;case"Z":t=d,t.destX=s,t.destY=a,t.length=jC(r,o,s,a),r=s,o=a}n+=t.length,l.push(t)}return l.push({length:n,x:r,y:o}),l},uL=function(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:k3(i),n=0;for(;e-t[n].length>0&&n<t.length-2;)e-=t[n].length,n++;let r=t[n],o=e/r.length,s=i[n];switch(r.command){case"M":return{x:r.x,y:r.y,angle:0};case"Z":return ve(ve({},new De(r.x,r.y).lerp(new De(r.destX,r.destY),o)),{},{angle:Math.atan2(r.destY-r.y,r.destX-r.x)});case"L":return ve(ve({},new De(r.x,r.y).lerp(new De(s[1],s[2]),o)),{},{angle:Math.atan2(s[2]-r.y,s[1]-r.x)});case"C":case"Q":return jie(r,e)}},Vie=new RegExp("[mzlhvcsqta][^mzlhvcsqta]*","gi"),tN=new RegExp(Iie,"g"),Uie=new RegExp(Ma,"gi"),Hie={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},hL=i=>{var e;let t=[],n=(e=i.match(Vie))!==null&&e!==void 0?e:[];for(let r of n){let o=r[0];if(o==="z"||o==="Z"){t.push([o]);continue}let s=Hie[o.toLowerCase()],a=[];if(o==="a"||o==="A"){tN.lastIndex=0;for(let l=null;l=tN.exec(r);)a.push(...l.slice(1))}else a=r.match(Uie)||[];for(let l=0;l<a.length;l+=s){let c=new Array(s),d=Tie[o];c[0]=l>0&&d?d:o;for(let h=0;h<s;h++)c[h+1]=parseFloat(a[l+h]);t.push(c)}}return t},fL=function(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=new De(i[0]),n=new De(i[1]),r=1,o=0,s=[],a=i.length,l=a>2,c;for(l&&(r=i[2].x<n.x?-1:i[2].x===n.x?0:1,o=i[2].y<n.y?-1:i[2].y===n.y?0:1),s.push(["M",t.x-r*e,t.y-o*e]),c=1;c<a;c++){if(!t.eq(n)){let d=t.midPointFrom(n);s.push(["Q",t.x,t.y,d.x,d.y])}t=i[c],c+1<i.length&&(n=i[c+1])}return l&&(r=t.x>i[c-2].x?1:t.x===i[c-2].x?0:-1,o=t.y>i[c-2].y?1:t.y===i[c-2].y?0:-1),s.push(["L",t.x+r*e,t.y+o*e]),s},A3=(i,e)=>i.map(t=>t.map((n,r)=>r===0||e===void 0?n:gi(n,e)).join(" ")).join(" ");function VC(i,e){let t=i.style;t&&e&&(typeof e=="string"?t.cssText+=";"+e:Object.entries(e).forEach(n=>{let[r,o]=n;return t.setProperty(r,o)}))}var Gie=(i,e)=>Math.floor(Math.random()*(e-i+1))+i;function $ie(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.onComplete||h0,n=new(Jm()).XMLHttpRequest,r=e.signal,o=function(){n.abort()},s=function(){r&&r.removeEventListener("abort",o),n.onerror=n.ontimeout=h0};if(r&&r.aborted)throw new yC("request");return r&&r.addEventListener("abort",o,{once:!0}),n.onreadystatechange=function(){n.readyState===4&&(s(),t(n),n.onreadystatechange=h0)},n.onerror=n.ontimeout=s,n.open("get",i,!0),n.send(),n}var Wie=(i,e)=>{let t=i._findCenterFromElement();i.transformMatrix&&((n=>{if(n.transformMatrix){let{scaleX:r,scaleY:o,angle:s,skewX:a}=Lf(n.transformMatrix);n.flipX=!1,n.flipY=!1,n.set(fo,r),n.set(ps,o),n.angle=s,n.skewX=a,n.skewY=0}})(i),t=t.transform(i.transformMatrix)),delete i.transformMatrix,e&&(i.scaleX*=e.scaleX,i.scaleY*=e.scaleY,i.cropX=e.cropX,i.cropY=e.cropY,t.x+=e.offsetLeft,t.y+=e.offsetTop,i.width=e.width,i.height=e.height),i.setPositionByOrigin(t,Qt,Qt)},dSe=Object.freeze({__proto__:null,addTransformToObject:wN,animate:w3,animateColor:TN,applyTransformToObject:jf,calcAngleBetweenVectors:IC,calcDimensionsMatrix:Zm,calcPlaneChangeMatrix:tx,calcVectorRotation:DN,cancelAnimFrame:fN,capValue:p0,composeMatrix:_N,copyCanvasElement:i=>{var e;let t=ms(i);return(e=t.getContext("2d"))===null||e===void 0||e.drawImage(i,0,0),t},cos:Pa,createCanvasElement:js,createImage:gN,createRotateMatrix:x0,createScaleMatrix:JC,createSkewXMatrix:p3,createSkewYMatrix:m3,createTranslateMatrix:$f,createVector:DC,crossProduct:Bf,degreesToRadians:Ii,dotProduct:FN,ease:Kne,enlivenObjectEnlivables:ex,enlivenObjects:Rf,findScaleToCover:oL,findScaleToFit:rL,getBoundsOfCurve:YS,getOrthonormalVector:y3,getPathSegmentsInfo:k3,getPointOnPath:uL,getPointer:yN,getRandomInt:Gie,getRegularPolygonPath:(i,e)=>{let t=2*Math.PI/i,n=-Od;i%2==0&&(n+=t/2);let r=new Array(i+1);for(let o=0;o<i;o++){let s=o*t+n,{x:a,y:l}=new De(Pa(s),Oa(s)).scalarMultiply(e);r[o]=[o===0?"M":"L",a,l]}return r[i]=["Z"],r},getSmoothPathFromPoints:fL,getSvgAttributes:i=>{let e=["instantiated_by_use","style","id","class"];switch(i){case"linearGradient":return e.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);case"radialGradient":return e.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);case"stop":return e.concat(["offset","stop-color","stop-opacity"])}return e},getUnitVector:ny,groupSVGElements:(i,e)=>i&&i.length===1?i[0]:new jo(i,e),hasStyleChanged:oy,invertTransform:gs,isBetweenVectors:LS,isIdentityMatrix:pN,isTouchEvent:SC,isTransparent:XN,joinPath:A3,loadImage:Um,magnitude:FC,makeBoundingBoxFromPoints:_l,makePathSimpler:sL,matrixToSVG:zf,mergeClipPaths:(i,e)=>{var t;let n=i,r=e;n.inverted&&!r.inverted&&(n=e,r=i),NS(r,(t=r.group)===null||t===void 0?void 0:t.calcTransformMatrix(),n.calcTransformMatrix());let o=n.inverted&&r.inverted;return o&&(n.inverted=r.inverted=!1),new jo([n],{clipPath:r,inverted:o})},multiplyTransformMatrices:Ti,multiplyTransformMatrixArray:QC,parsePath:hL,parsePreserveAspectRatioAttribute:kN,parseUnit:f0,pick:_0,projectStrokeOnPoints:QN,qrDecompose:Lf,radiansToDegrees:bl,removeFromArray:Ku,removeTransformFromObject:(i,e)=>{let t=gs(e),n=Ti(t,i.calcOwnMatrix());jf(i,n)},removeTransformMatrixForSvgParsing:Wie,request:$ie,requestAnimFrame:Vm,resetObjectTransform:MN,rotatePoint:(i,e,t)=>i.rotate(t,e),rotateVector:C3,saveObjectTransform:_3,sendObjectToPlane:NS,sendPointToPlane:mc,sendVectorToPlane:EN,setStyle:VC,sin:Oa,sizeAfterTransform:ZC,string:lie,stylesFromArray:eL,stylesToArray:ZN,toBlob:g3,toDataURL:f3,toFixed:gi,transformPath:(i,e,t)=>(t&&(e=Ti(e,[1,0,0,1,-t.x,-t.y])),i.map(n=>{let r=[...n];for(let o=1;o<n.length-1;o+=2){let{x:s,y:a}=Wr({x:n[o],y:n[o+1]},e);r[o]=s,r[o+1]=a}return r})),transformPoint:Wr}),XS=class extends OC{constructor(e){let{allowTouchScrolling:t=!1,containerClass:n=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e),ge(this,"upper",void 0),ge(this,"container",void 0);let{el:r}=this.lower,o=this.createUpperCanvas();this.upper={el:o,ctx:o.getContext("2d")},this.applyCanvasStyle(r,{allowTouchScrolling:t}),this.applyCanvasStyle(o,{allowTouchScrolling:t,styles:{position:"absolute",left:"0",top:"0"}});let s=this.createContainerElement();s.classList.add(n),r.parentNode&&r.parentNode.replaceChild(s,r),s.append(r,o),this.container=s}createUpperCanvas(){let{el:e}=this.lower,t=js();return t.className=e.className,t.classList.remove("lower-canvas"),t.classList.add("upper-canvas"),t.setAttribute("data-fabric","top"),t.style.cssText=e.style.cssText,t.setAttribute("draggable","true"),t}createContainerElement(){let e=Uf().createElement("div");return e.setAttribute("data-fabric","wrapper"),VC(e,{position:"relative"}),FB(e),e}applyCanvasStyle(e,t){let{styles:n,allowTouchScrolling:r}=t;VC(e,ve(ve({},n),{},{"touch-action":r?"manipulation":Ro})),FB(e)}setDimensions(e,t){super.setDimensions(e,t);let{el:n,ctx:r}=this.upper;CN(n,r,e,t)}setCSSDimensions(e){super.setCSSDimensions(e),BS(this.upper.el,e),BS(this.container,e)}cleanupDOM(e){let t=this.container,{el:n}=this.lower,{el:r}=this.upper;super.cleanupDOM(e),t.removeChild(r),t.removeChild(n),t.parentNode&&t.parentNode.replaceChild(n,t)}dispose(){super.dispose(),vl().dispose(this.upper.el),delete this.upper,delete this.container}},UC=class i extends qm{constructor(){super(...arguments),ge(this,"targets",[]),ge(this,"_hoveredTargets",[]),ge(this,"_objectsToRender",void 0),ge(this,"_currentTransform",null),ge(this,"_groupSelector",null),ge(this,"contextTopDirty",!1)}static getDefaults(){return ve(ve({},super.getDefaults()),i.ownDefaults)}get upperCanvasEl(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.el}get contextTop(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.ctx}get wrapperEl(){return this.elements.container}initElements(e){this.elements=new XS(e,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(e){this._objectsToRender=void 0,super._onObjectAdded(e)}_onObjectRemoved(e){this._objectsToRender=void 0,e===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[e]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[e]}),e.fire("deselected",{target:e})),e===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(e)}_onStackOrderChanged(){this._objectsToRender=void 0,super._onStackOrderChanged()}_chooseObjectsToRender(){let e=this._activeObject;return!this.preserveObjectStacking&&e?this._objects.filter(t=>!t.group&&t!==e).concat(e):this._objects}renderAll(){this.cancelRequestedRender(),this.destroyed||(!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(e){e.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(e),this.contextTopDirty=!0),e.restore()}renderTop(){let e=this.contextTop;this.clearContext(e),this.renderTopLayer(e),this.fire("after:render",{ctx:e})}setTargetFindTolerance(e){e=Math.round(e),this.targetFindTolerance=e;let t=this.getRetinaScaling(),n=Math.ceil((2*e+1)*t);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=n,this.pixelFindContext.scale(t,t)}isTargetTransparent(e,t,n){let r=this.targetFindTolerance,o=this.pixelFindContext;this.clearContext(o),o.save(),o.translate(-t+r,-n+r),o.transform(...this.viewportTransform);let s=e.selectionBackgroundColor;e.selectionBackgroundColor="",e.render(o),e.selectionBackgroundColor=s,o.restore();let a=Math.round(r*this.getRetinaScaling());return XN(o,a,a,a)}_isSelectionKeyPressed(e){let t=this.selectionKey;return!!t&&(Array.isArray(t)?!!t.find(n=>!!n&&e[n]===!0):e[t])}_shouldClearSelection(e,t){let n=this.getActiveObjects(),r=this._activeObject;return!!(!t||t&&r&&n.length>1&&n.indexOf(t)===-1&&r!==t&&!this._isSelectionKeyPressed(e)||t&&!t.evented||t&&!t.selectable&&r&&r!==t)}_shouldCenterTransform(e,t,n){if(!e)return;let r;return t===XC||t===fo||t===ps||t===Wm?r=this.centeredScaling||e.centeredScaling:t===u3&&(r=this.centeredRotation||e.centeredRotation),r?!n:n}_getOriginFromCorner(e,t){let n={x:e.originX,y:e.originY};return t&&(["ml","tl","bl"].includes(t)?n.x=$i:["mr","tr","br"].includes(t)&&(n.x=Nn),["tl","mt","tr"].includes(t)?n.y=IS:["bl","mb","br"].includes(t)&&(n.y=Lo)),n}_setupCurrentTransform(e,t,n){var r;let o=t.group?mc(this.getScenePoint(e),void 0,t.group.calcTransformMatrix()):this.getScenePoint(e),{key:s="",control:a}=t.getActiveControl()||{},l=n&&a?(r=a.getActionHandler(e,t,a))===null||r===void 0?void 0:r.bind(a):SN,c=((g,_,b,C)=>{if(!_||!g)return"drag";let y=C.controls[_];return y.getActionName(b,y,C)})(n,s,e,t),d=e[this.centeredKey],h=this._shouldCenterTransform(t,c,d)?{x:Qt,y:Qt}:this._getOriginFromCorner(t,s),p={target:t,action:c,actionHandler:l,actionPerformed:!1,corner:s,scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,offsetX:o.x-t.left,offsetY:o.y-t.top,originX:h.x,originY:h.y,ex:o.x,ey:o.y,lastX:o.x,lastY:o.y,theta:Ii(t.angle),width:t.width,height:t.height,shiftKey:e.shiftKey,altKey:d,original:ve(ve({},_3(t)),{},{originX:h.x,originY:h.y})};this._currentTransform=p,this.fire("before:transform",{e,transform:p})}setCursor(e){this.upperCanvasEl.style.cursor=e}_drawSelection(e){let{x:t,y:n,deltaX:r,deltaY:o}=this._groupSelector,s=new De(t,n).transform(this.viewportTransform),a=new De(t+r,n+o).transform(this.viewportTransform),l=this.selectionLineWidth/2,c=Math.min(s.x,a.x),d=Math.min(s.y,a.y),h=Math.max(s.x,a.x),p=Math.max(s.y,a.y);this.selectionColor&&(e.fillStyle=this.selectionColor,e.fillRect(c,d,h-c,p-d)),this.selectionLineWidth&&this.selectionBorderColor&&(e.lineWidth=this.selectionLineWidth,e.strokeStyle=this.selectionBorderColor,c+=l,d+=l,h-=l,p-=l,Pr.prototype._setLineDash.call(this,e,this.selectionDashArray),e.strokeRect(c,d,h-c,p-d))}findTarget(e){if(this.skipTargetFind)return;let t=this.getViewportPoint(e),n=this._activeObject,r=this.getActiveObjects();if(this.targets=[],n&&r.length>=1){if(n.findControl(t,SC(e))||r.length>1&&this.searchPossibleTargets([n],t))return n;if(n===this.searchPossibleTargets([n],t)){if(this.preserveObjectStacking){let o=this.targets;this.targets=[];let s=this.searchPossibleTargets(this._objects,t);return e[this.altSelectionKey]&&s&&s!==n?(this.targets=o,n):s}return n}}return this.searchPossibleTargets(this._objects,t)}_pointIsInObjectSelectionArea(e,t){let n=e.getCoords(),r=this.getZoom(),o=e.padding/r;if(o){let[s,a,l,c]=n,d=Math.atan2(a.y-s.y,a.x-s.x),h=Pa(d)*o,p=Oa(d)*o,g=h+p,_=h-p;n=[new De(s.x-_,s.y-g),new De(a.x+g,a.y-_),new De(l.x+_,l.y+g),new De(c.x-g,c.y+_)]}return g0.isPointInPolygon(t,n)}_checkTarget(e,t){return!!(e&&e.visible&&e.evented&&this._pointIsInObjectSelectionArea(e,mc(t,void 0,this.viewportTransform))&&(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing||!this.isTargetTransparent(e,t.x,t.y)))}_searchPossibleTargets(e,t){let n=e.length;for(;n--;){let r=e[n];if(this._checkTarget(r,t)){if(vC(r)&&r.subTargetCheck){let o=this._searchPossibleTargets(r._objects,t);o&&this.targets.push(o)}return r}}}searchPossibleTargets(e,t){let n=this._searchPossibleTargets(e,t);if(n&&vC(n)&&n.interactive&&this.targets[0]){let r=this.targets;for(let o=r.length-1;o>0;o--){let s=r[o];if(!vC(s)||!s.interactive)return s}return r[0]}return n}getViewportPoint(e){return this._pointer?this._pointer:this.getPointer(e,!0)}getScenePoint(e){return this._absolutePointer?this._absolutePointer:this.getPointer(e)}getPointer(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1],n=this.upperCanvasEl,r=n.getBoundingClientRect(),o=yN(e),s=r.width||0,a=r.height||0;s&&a||(Lo in r&&IS in r&&(a=Math.abs(r.top-r.bottom)),$i in r&&Nn in r&&(s=Math.abs(r.right-r.left))),this.calcOffset(),o.x=o.x-this._offset.left,o.y=o.y-this._offset.top,t||(o=mc(o,void 0,this.viewportTransform));let l=this.getRetinaScaling();l!==1&&(o.x/=l,o.y/=l);let c=s===0||a===0?new De(1,1):new De(n.width/s,n.height/a);return o.multiply(c)}_setDimensionsImpl(e,t){this._resetTransformEventData(),super._setDimensionsImpl(e,t),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=js(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveObjects(){let e=this._activeObject;return Yu(e)?e.getObjects():e?[e]:[]}_fireSelectionEvents(e,t){let n=!1,r=!1,o=this.getActiveObjects(),s=[],a=[];e.forEach(l=>{o.includes(l)||(n=!0,l.fire("deselected",{e:t,target:l}),a.push(l))}),o.forEach(l=>{e.includes(l)||(n=!0,l.fire("selected",{e:t,target:l}),s.push(l))}),e.length>0&&o.length>0?(r=!0,n&&this.fire("selection:updated",{e:t,selected:s,deselected:a})):o.length>0?(r=!0,this.fire("selection:created",{e:t,selected:s})):e.length>0&&(r=!0,this.fire("selection:cleared",{e:t,deselected:a})),r&&(this._objectsToRender=void 0)}setActiveObject(e,t){let n=this.getActiveObjects(),r=this._setActiveObject(e,t);return this._fireSelectionEvents(n,t),r}_setActiveObject(e,t){let n=this._activeObject;return n!==e&&!(!this._discardActiveObject(t,e)&&this._activeObject)&&!e.onSelect({e:t})&&(this._activeObject=e,Yu(e)&&n!==e&&e.set("canvas",this),e.setCoords(),!0)}_discardActiveObject(e,t){let n=this._activeObject;return!!n&&!n.onDeselect({e,object:t})&&(this._currentTransform&&this._currentTransform.target===n&&this.endCurrentTransform(e),Yu(n)&&n===this._hoveredTarget&&(this._hoveredTarget=void 0),this._activeObject=void 0,!0)}discardActiveObject(e){let t=this.getActiveObjects(),n=this.getActiveObject();t.length&&this.fire("before:selection:cleared",{e,deselected:[n]});let r=this._discardActiveObject(e);return this._fireSelectionEvents(t,e),r}endCurrentTransform(e){let t=this._currentTransform;this._finalizeCurrentTransform(e),t&&t.target&&(t.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(e){let t=this._currentTransform,n=t.target,r={e,target:n,transform:t,action:t.action};n._scaling&&(n._scaling=!1),n.setCoords(),t.actionPerformed&&(this.fire("object:modified",r),n.fire(MC,r))}setViewportTransform(e){super.setViewportTransform(e);let t=this._activeObject;t&&t.setCoords()}destroy(){let e=this._activeObject;Yu(e)&&(e.removeAll(),e.dispose()),delete this._activeObject,super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(e){let t=this._activeObject;t&&t._renderControls(e)}_toObject(e,t,n){let r=this._realizeGroupTransformOnObject(e),o=super._toObject(e,t,n);return e.set(r),o}_realizeGroupTransformOnObject(e){let{group:t}=e;if(t&&Yu(t)&&this._activeObject===t){let n=_0(e,["angle","flipX","flipY",Nn,fo,ps,Hf,Gf,Lo]);return wN(e,t.calcOwnMatrix()),n}return{}}_setSVGObject(e,t,n){let r=this._realizeGroupTransformOnObject(t);super._setSVGObject(e,t,n),t.set(r)}};ge(UC,"ownDefaults",{uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!1});var QS=class{constructor(e){ge(this,"targets",[]),ge(this,"__disposer",void 0);let t=()=>{let{hiddenTextarea:r}=e.getActiveObject()||{};r&&r.focus()},n=e.upperCanvasEl;n.addEventListener("click",t),this.__disposer=()=>n.removeEventListener("click",t)}exitTextEditing(){this.target=void 0,this.targets.forEach(e=>{e.isEditing&&e.exitEditing()})}add(e){this.targets.push(e)}remove(e){this.unregister(e),Ku(this.targets,e)}register(e){this.target=e}unregister(e){e===this.target&&(this.target=void 0)}onMouseMove(e){var t;!((t=this.target)===null||t===void 0)&&t.isEditing&&this.target.updateSelectionOnMouseMove(e)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}},qie=["target","oldTarget","fireCanvas","e"],fs={passive:!1},kf=(i,e)=>{let t=i.getViewportPoint(e),n=i.getScenePoint(e);return{viewportPoint:t,scenePoint:n,pointer:t,absolutePointer:n}},Cd=function(i){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return i.addEventListener(...t)},Ns=function(i){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return i.removeEventListener(...t)},Kie={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}},kd=class extends UC{constructor(e){super(e,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}),ge(this,"_isClick",void 0),ge(this,"textEditingManager",new QS(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach(t=>{this[t]=this[t].bind(this)}),this.addOrRemove(Cd,"add")}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(e,t){let n=this.upperCanvasEl,r=this._getEventPrefix();e(bN(n),"resize",this._onResize),e(n,r+"down",this._onMouseDown),e(n,"".concat(r,"move"),this._onMouseMove,fs),e(n,"".concat(r,"out"),this._onMouseOut),e(n,"".concat(r,"enter"),this._onMouseEnter),e(n,"wheel",this._onMouseWheel),e(n,"contextmenu",this._onContextMenu),e(n,"click",this._onClick),e(n,"dblclick",this._onClick),e(n,"dragstart",this._onDragStart),e(n,"dragend",this._onDragEnd),e(n,"dragover",this._onDragOver),e(n,"dragenter",this._onDragEnter),e(n,"dragleave",this._onDragLeave),e(n,"drop",this._onDrop),this.enablePointerEvents||e(n,"touchstart",this._onTouchStart,fs)}removeListeners(){this.addOrRemove(Ns,"remove");let e=this._getEventPrefix(),t=wa(this.upperCanvasEl);Ns(t,"".concat(e,"up"),this._onMouseUp),Ns(t,"touchend",this._onTouchEnd,fs),Ns(t,"".concat(e,"move"),this._onMouseMove,fs),Ns(t,"touchmove",this._onMouseMove,fs),clearTimeout(this._willAddMouseDown)}_onMouseWheel(e){this.__onMouseWheel(e)}_onMouseOut(e){let t=this._hoveredTarget,n=ve({e},kf(this,e));this.fire("mouse:out",ve(ve({},n),{},{target:t})),this._hoveredTarget=void 0,t&&t.fire("mouseout",ve({},n)),this._hoveredTargets.forEach(r=>{this.fire("mouse:out",ve(ve({},n),{},{target:r})),r&&r.fire("mouseout",ve({},n))}),this._hoveredTargets=[]}_onMouseEnter(e){this._currentTransform||this.findTarget(e)||(this.fire("mouse:over",ve({e},kf(this,e))),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(e){this._isClick=!1;let t=this.getActiveObject();if(t&&t.onDragStart(e)){this._dragSource=t;let n={e,target:t};return this.fire("dragstart",n),t.fire("dragstart",n),void Cd(this.upperCanvasEl,"drag",this._onDragProgress)}IB(e)}_renderDragEffects(e,t,n){let r=!1,o=this._dropTarget;o&&o!==t&&o!==n&&(o.clearContextTop(),r=!0),t?.clearContextTop(),n!==t&&n?.clearContextTop();let s=this.contextTop;s.save(),s.transform(...this.viewportTransform),t&&(s.save(),t.transform(s),t.renderDragSourceEffect(e),s.restore(),r=!0),n&&(s.save(),n.transform(s),n.renderDropTargetEffect(e),s.restore(),r=!0),s.restore(),r&&(this.contextTopDirty=!0)}_onDragEnd(e){let t=!!e.dataTransfer&&e.dataTransfer.dropEffect!==Ro,n=t?this._activeObject:void 0,r={e,target:this._dragSource,subTargets:this.targets,dragSource:this._dragSource,didDrop:t,dropTarget:n};Ns(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",r),this._dragSource&&this._dragSource.fire("dragend",r),delete this._dragSource,this._onMouseUp(e)}_onDragProgress(e){let t={e,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",t),this._dragSource&&this._dragSource.fire("drag",t)}findDragTargets(e){return this.targets=[],{target:this._searchPossibleTargets(this._objects,this.getViewportPoint(e)),targets:[...this.targets]}}_onDragOver(e){let t="dragover",{target:n,targets:r}=this.findDragTargets(e),o=this._dragSource,s={e,target:n,subTargets:r,dragSource:o,canDrop:!1,dropTarget:void 0},a;this.fire(t,s),this._fireEnterLeaveEvents(n,s),n&&(n.canDrop(e)&&(a=n),n.fire(t,s));for(let l=0;l<r.length;l++){let c=r[l];c.canDrop(e)&&(a=c),c.fire(t,s)}this._renderDragEffects(e,o,a),this._dropTarget=a}_onDragEnter(e){let{target:t,targets:n}=this.findDragTargets(e),r={e,target:t,subTargets:n,dragSource:this._dragSource};this.fire("dragenter",r),this._fireEnterLeaveEvents(t,r)}_onDragLeave(e){let t={e,target:this._draggedoverTarget,subTargets:this.targets,dragSource:this._dragSource};this.fire("dragleave",t),this._fireEnterLeaveEvents(void 0,t),this._renderDragEffects(e,this._dragSource),this._dropTarget=void 0,this.targets=[],this._hoveredTargets=[]}_onDrop(e){let{target:t,targets:n}=this.findDragTargets(e),r=this._basicEventHandler("drop:before",ve({e,target:t,subTargets:n,dragSource:this._dragSource},kf(this,e)));r.didDrop=!1,r.dropTarget=void 0,this._basicEventHandler("drop",r),this.fire("drop:after",r)}_onContextMenu(e){let t=this.findTarget(e),n=this.targets||[],r=this._basicEventHandler("contextmenu:before",{e,target:t,subTargets:n});return this.stopContextMenu&&IB(e),this._basicEventHandler("contextmenu",r),!1}_onClick(e){let t=e.detail;t>3||t<2||(this._cacheTransformEventData(e),t==2&&e.type==="dblclick"&&this._handleEvent(e,"dblclick"),t==3&&this._handleEvent(e,"tripleclick"),this._resetTransformEventData())}getPointerId(e){let t=e.changedTouches;return t?t[0]&&t[0].identifier:this.enablePointerEvents?e.pointerId:-1}_isMainEvent(e){return e.isPrimary===!0||e.isPrimary!==!1&&(e.type==="touchend"&&e.touches.length===0||!e.changedTouches||e.changedTouches[0].identifier===this.mainTouchId)}_onTouchStart(e){let t=!this.allowTouchScrolling,n=this._activeObject;this.mainTouchId===void 0&&(this.mainTouchId=this.getPointerId(e)),this.__onMouseDown(e),(this.isDrawingMode||n&&this._target===n)&&(t=!0),t&&e.preventDefault(),this._resetTransformEventData();let r=this.upperCanvasEl,o=this._getEventPrefix(),s=wa(r);Cd(s,"touchend",this._onTouchEnd,fs),t&&Cd(s,"touchmove",this._onMouseMove,fs),Ns(r,"".concat(o,"down"),this._onMouseDown)}_onMouseDown(e){this.__onMouseDown(e),this._resetTransformEventData();let t=this.upperCanvasEl,n=this._getEventPrefix();Ns(t,"".concat(n,"move"),this._onMouseMove,fs);let r=wa(t);Cd(r,"".concat(n,"up"),this._onMouseUp),Cd(r,"".concat(n,"move"),this._onMouseMove,fs)}_onTouchEnd(e){if(e.touches.length>0)return;this.__onMouseUp(e),this._resetTransformEventData(),delete this.mainTouchId;let t=this._getEventPrefix(),n=wa(this.upperCanvasEl);Ns(n,"touchend",this._onTouchEnd,fs),Ns(n,"touchmove",this._onMouseMove,fs),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(()=>{Cd(this.upperCanvasEl,"".concat(t,"down"),this._onMouseDown),this._willAddMouseDown=0},400)}_onMouseUp(e){this.__onMouseUp(e),this._resetTransformEventData();let t=this.upperCanvasEl,n=this._getEventPrefix();if(this._isMainEvent(e)){let r=wa(this.upperCanvasEl);Ns(r,"".concat(n,"up"),this._onMouseUp),Ns(r,"".concat(n,"move"),this._onMouseMove,fs),Cd(t,"".concat(n,"move"),this._onMouseMove,fs)}}_onMouseMove(e){let t=this.getActiveObject();!this.allowTouchScrolling&&(!t||!t.shouldStartDragging(e))&&e.preventDefault&&e.preventDefault(),this.__onMouseMove(e)}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(e){let t=this.getActiveObject();return!!t!=!!e||t&&e&&t!==e}__onMouseUp(e){var t;this._cacheTransformEventData(e),this._handleEvent(e,"up:before");let n=this._currentTransform,r=this._isClick,o=this._target,{button:s}=e;if(s)return(this.fireMiddleClick&&s===1||this.fireRightClick&&s===2)&&this._handleEvent(e,"up"),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(e);if(!this._isMainEvent(e))return;let a,l,c=!1;if(n&&(this._finalizeCurrentTransform(e),c=n.actionPerformed),!r){let d=o===this._activeObject;this.handleSelection(e),c||(c=this._shouldRender(o)||!d&&o===this._activeObject)}if(o){let d=o.findControl(this.getViewportPoint(e),SC(e)),{key:h,control:p}=d||{};if(l=h,o.selectable&&o!==this._activeObject&&o.activeOn==="up")this.setActiveObject(o,e),c=!0;else if(p){let g=p.getMouseUpHandler(e,o,p);g&&(a=this.getScenePoint(e),g.call(p,e,n,a.x,a.y))}o.isMoving=!1}if(n&&(n.target!==o||n.corner!==l)){let d=n.target&&n.target.controls[n.corner],h=d&&d.getMouseUpHandler(e,n.target,d);a=a||this.getScenePoint(e),h&&h.call(d,e,n,a.x,a.y)}this._setCursorFromEvent(e,o),this._handleEvent(e,"up"),this._groupSelector=null,this._currentTransform=null,o&&(o.__corner=void 0),c?this.requestRenderAll():r||(t=this._activeObject)!==null&&t!==void 0&&t.isEditing||this.renderTop()}_basicEventHandler(e,t){let{target:n,subTargets:r=[]}=t;this.fire(e,t),n&&n.fire(e,t);for(let o=0;o<r.length;o++)r[o]!==n&&r[o].fire(e,t);return t}_handleEvent(e,t,n){let r=this._target,o=this.targets||[],s=ve(ve(ve({e,target:r,subTargets:o},kf(this,e)),{},{transform:this._currentTransform},t==="up:before"||t==="up"?{isClick:this._isClick,currentTarget:this.findTarget(e),currentSubTargets:this.targets}:{}),t==="down:before"||t==="down"?n:{});this.fire("mouse:".concat(t),s),r&&r.fire("mouse".concat(t),s);for(let a=0;a<o.length;a++)o[a]!==r&&o[a].fire("mouse".concat(t),s)}_onMouseDownInDrawingMode(e){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(e),this.requestRenderAll());let t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(t,{e,pointer:t}),this._handleEvent(e,"down",{alreadySelected:!1})}_onMouseMoveInDrawingMode(e){if(this._isCurrentlyDrawing){let t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(t,{e,pointer:t})}this.setCursor(this.freeDrawingCursor),this._handleEvent(e,"move")}_onMouseUpInDrawingMode(e){let t=this.getScenePoint(e);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e,pointer:t}):this._isCurrentlyDrawing=!1,this._handleEvent(e,"up")}__onMouseDown(e){this._isClick=!0,this._cacheTransformEventData(e),this._handleEvent(e,"down:before");let t=this._target,n=!!t&&t===this._activeObject,{button:r}=e;if(r)return(this.fireMiddleClick&&r===1||this.fireRightClick&&r===2)&&this._handleEvent(e,"down",{alreadySelected:n}),void this._resetTransformEventData();if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(e);if(!this._isMainEvent(e)||this._currentTransform)return;let o=this._shouldRender(t),s=!1;if(this.handleMultiSelection(e,t)?(t=this._activeObject,s=!0,o=!0):this._shouldClearSelection(e,t)&&this.discardActiveObject(e),this.selection&&(!t||!t.selectable&&!t.isEditing&&t!==this._activeObject)){let a=this.getScenePoint(e);this._groupSelector={x:a.x,y:a.y,deltaY:0,deltaX:0}}if(n=!!t&&t===this._activeObject,t){t.selectable&&t.activeOn==="down"&&this.setActiveObject(t,e);let a=t.findControl(this.getViewportPoint(e),SC(e));if(t===this._activeObject&&(a||!s)){this._setupCurrentTransform(e,t,n);let l=a?a.control:void 0,c=this.getScenePoint(e),d=l&&l.getMouseDownHandler(e,t,l);d&&d.call(l,e,this._currentTransform,c.x,c.y)}}o&&(this._objectsToRender=void 0),this._handleEvent(e,"down",{alreadySelected:n}),o&&this.requestRenderAll()}_resetTransformEventData(){this._target=this._pointer=this._absolutePointer=void 0}_cacheTransformEventData(e){this._resetTransformEventData(),this._pointer=this.getViewportPoint(e),this._absolutePointer=mc(this._pointer,void 0,this.viewportTransform),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(e)}__onMouseMove(e){if(this._isClick=!1,this._cacheTransformEventData(e),this._handleEvent(e,"move:before"),this.isDrawingMode)return void this._onMouseMoveInDrawingMode(e);if(!this._isMainEvent(e))return;let t=this._groupSelector;if(t){let n=this.getScenePoint(e);t.deltaX=n.x-t.x,t.deltaY=n.y-t.y,this.renderTop()}else if(this._currentTransform)this._transformObject(e);else{let n=this.findTarget(e);this._setCursorFromEvent(e,n),this._fireOverOutEvents(e,n)}this.textEditingManager.onMouseMove(e),this._handleEvent(e,"move"),this._resetTransformEventData()}_fireOverOutEvents(e,t){let n=this._hoveredTarget,r=this._hoveredTargets,o=this.targets,s=Math.max(r.length,o.length);this.fireSyntheticInOutEvents("mouse",{e,target:t,oldTarget:n,fireCanvas:!0});for(let a=0;a<s;a++)this.fireSyntheticInOutEvents("mouse",{e,target:o[a],oldTarget:r[a]});this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()}_fireEnterLeaveEvents(e,t){let n=this._draggedoverTarget,r=this._hoveredTargets,o=this.targets,s=Math.max(r.length,o.length);this.fireSyntheticInOutEvents("drag",ve(ve({},t),{},{target:e,oldTarget:n,fireCanvas:!0}));for(let a=0;a<s;a++)this.fireSyntheticInOutEvents("drag",ve(ve({},t),{},{target:o[a],oldTarget:r[a]}));this._draggedoverTarget=e}fireSyntheticInOutEvents(e,t){let{target:n,oldTarget:r,fireCanvas:o,e:s}=t,a=vi(t,qie),{targetIn:l,targetOut:c,canvasIn:d,canvasOut:h}=Kie[e],p=r!==n;if(r&&p){let g=ve(ve({},a),{},{e:s,target:r,nextTarget:n},kf(this,s));o&&this.fire(h,g),r.fire(c,g)}if(n&&p){let g=ve(ve({},a),{},{e:s,target:n,previousTarget:r},kf(this,s));o&&this.fire(d,g),n.fire(l,g)}}__onMouseWheel(e){this._cacheTransformEventData(e),this._handleEvent(e,"wheel"),this._resetTransformEventData()}_transformObject(e){let t=this.getScenePoint(e),n=this._currentTransform,r=n.target,o=r.group?mc(t,void 0,r.group.calcTransformMatrix()):t;n.shiftKey=e.shiftKey,n.altKey=!!this.centeredKey&&e[this.centeredKey],this._performTransformAction(e,n,o),n.actionPerformed&&this.requestRenderAll()}_performTransformAction(e,t,n){let{action:r,actionHandler:o,target:s}=t,a=!!o&&o(e,t,n.x,n.y);a&&s.setCoords(),r==="drag"&&a&&(t.target.isMoving=!0,this.setCursor(t.target.moveCursor||this.moveCursor)),t.actionPerformed=t.actionPerformed||a}_setCursorFromEvent(e,t){if(!t)return void this.setCursor(this.defaultCursor);let n=t.hoverCursor||this.hoverCursor,r=Yu(this._activeObject)?this._activeObject:null,o=(!r||t.group!==r)&&t.findControl(this.getViewportPoint(e));if(o){let s=o.control;this.setCursor(s.cursorStyleHandler(e,s,t))}else t.subTargetCheck&&this.targets.concat().reverse().map(s=>{n=s.hoverCursor||n}),this.setCursor(n)}handleMultiSelection(e,t){let n=this._activeObject,r=Yu(n);if(n&&this._isSelectionKeyPressed(e)&&this.selection&&t&&t.selectable&&(n!==t||r)&&(r||!t.isDescendantOf(n)&&!n.isDescendantOf(t))&&!t.onSelect({e})&&!n.getActiveControl()){if(r){let o=n.getObjects();if(t===n){let s=this.getViewportPoint(e);if(!(t=this.searchPossibleTargets(o,s)||this.searchPossibleTargets(this._objects,s))||!t.selectable)return!1}t.group===n?(n.remove(t),this._hoveredTarget=t,this._hoveredTargets=[...this.targets],n.size()===1&&this._setActiveObject(n.item(0),e)):(n.multiSelectAdd(t),this._hoveredTarget=n,this._hoveredTargets=[...this.targets]),this._fireSelectionEvents(o,e)}else{n.isEditing&&n.exitEditing();let o=new(ft.getClass("ActiveSelection"))([],{canvas:this});o.multiSelectAdd(n,t),this._hoveredTarget=o,this._setActiveObject(o,e),this._fireSelectionEvents([n],e)}return!0}return!1}handleSelection(e){if(!this.selection||!this._groupSelector)return!1;let{x:t,y:n,deltaX:r,deltaY:o}=this._groupSelector,s=new De(t,n),a=s.add(new De(r,o)),l=s.min(a),c=s.max(a).subtract(l),d=this.collectObjects({left:l.x,top:l.y,width:c.x,height:c.y},{includeIntersecting:!this.selectionFullyContained}),h=s.eq(a)?d[0]?[d[0]]:[]:d.length>1?d.filter(p=>!p.onSelect({e})).reverse():d;if(h.length===1)this.setActiveObject(h[0],e);else if(h.length>1){let p=ft.getClass("ActiveSelection");this.setActiveObject(new p(h,{canvas:this}),e)}return this._groupSelector=null,!0}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}},gL={x1:0,y1:0,x2:0,y2:0},Yie=ve(ve({},gL),{},{r1:0,r2:0}),Df=(i,e)=>isNaN(i)&&typeof e=="number"?e:i,Xie=/^(\d+\.\d+)%|(\d+)%$/;function pL(i){return i&&Xie.test(i)}function mL(i,e){let t=typeof i=="number"?i:typeof i=="string"?parseFloat(i)/(pL(i)?100:1):NaN;return p0(0,Df(t,e),1)}var Qie=/\s*;\s*/,Jie=/\s*:\s*/;function Zie(i,e){let t,n,r=i.getAttribute("style");if(r){let s=r.split(Qie);s[s.length-1]===""&&s.pop();for(let a=s.length;a--;){let[l,c]=s[a].split(Jie).map(d=>d.trim());l==="stop-color"?t=c:l==="stop-opacity"&&(n=c)}}let o=new qr(t||i.getAttribute("stop-color")||"rgb(0,0,0)");return{offset:mL(i.getAttribute("offset"),0),color:o.toRgb(),opacity:Df(parseFloat(n||i.getAttribute("stop-opacity")||""),1)*o.getAlpha()*e}}function ere(i,e){let t=[],n=i.getElementsByTagName("stop"),r=mL(e,1);for(let o=n.length;o--;)t.push(Zie(n[o],r));return t}function xL(i){return i.nodeName==="linearGradient"||i.nodeName==="LINEARGRADIENT"?"linear":"radial"}function _L(i){return i.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage"}function ya(i,e){return i.getAttribute(e)}function tre(i,e){return function(t,n){let r,{width:o,height:s,gradientUnits:a}=n;return Object.keys(t).reduce((l,c)=>{let d=t[c];return d==="Infinity"?r=1:d==="-Infinity"?r=0:(r=typeof d=="string"?parseFloat(d):d,typeof d=="string"&&pL(d)&&(r*=.01,a==="pixels"&&(c!=="x1"&&c!=="x2"&&c!=="r2"||(r*=o),c!=="y1"&&c!=="y2"||(r*=s)))),l[c]=r,l},{})}(xL(i)==="linear"?function(t){return{x1:ya(t,"x1")||0,y1:ya(t,"y1")||0,x2:ya(t,"x2")||"100%",y2:ya(t,"y2")||0}}(i):function(t){return{x1:ya(t,"fx")||ya(t,"cx")||"50%",y1:ya(t,"fy")||ya(t,"cy")||"50%",r1:0,x2:ya(t,"cx")||"50%",y2:ya(t,"cy")||"50%",r2:ya(t,"r")||"50%"}}(i),ve(ve({},e),{},{gradientUnits:_L(i)}))}var Ff=class{constructor(e){let{type:t="linear",gradientUnits:n="pixels",coords:r={},colorStops:o=[],offsetX:s=0,offsetY:a=0,gradientTransform:l,id:c}=e||{};Object.assign(this,{type:t,gradientUnits:n,coords:ve(ve({},t==="radial"?Yie:gL),r),colorStops:o,offsetX:s,offsetY:a,gradientTransform:l,id:c?"".concat(c,"_").concat(Sd()):Sd()})}addColorStop(e){for(let t in e){let n=new qr(e[t]);this.colorStops.push({offset:parseFloat(t),color:n.toRgb(),opacity:n.getAlpha()})}return this}toObject(e){return ve(ve({},_0(this,e)),{},{type:this.type,coords:ve({},this.coords),colorStops:this.colorStops.map(t=>ve({},t)),offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0})}toSVG(e){let{additionalTransform:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=[],r=this.gradientTransform?this.gradientTransform.concat():ho.concat(),o=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox",s=this.colorStops.map(h=>ve({},h)).sort((h,p)=>h.offset-p.offset),a=-this.offsetX,l=-this.offsetY;var c;o==="objectBoundingBox"?(a/=e.width,l/=e.height):(a+=e.width/2,l+=e.height/2),(c=e)&&typeof c._renderPathCommands=="function"&&this.gradientUnits!=="percentage"&&(a-=e.pathOffset.x,l-=e.pathOffset.y),r[4]-=a,r[5]-=l;let d=['id="SVGID_'.concat(this.id,'"'),'gradientUnits="'.concat(o,'"'),'gradientTransform="'.concat(t?t+" ":"").concat(zf(r),'"'),""].join(" ");if(this.type==="linear"){let{x1:h,y1:p,x2:g,y2:_}=this.coords;n.push("<linearGradient ",d,' x1="',h,'" y1="',p,'" x2="',g,'" y2="',_,`">
`)}else if(this.type==="radial"){let{x1:h,y1:p,x2:g,y2:_,r1:b,r2:C}=this.coords,y=b>C;n.push("<radialGradient ",d,' cx="',y?h:g,'" cy="',y?p:_,'" r="',y?b:C,'" fx="',y?g:h,'" fy="',y?_:p,`">
`),y&&(s.reverse(),s.forEach(O=>{O.offset=1-O.offset}));let M=Math.min(b,C);if(M>0){let O=M/Math.max(b,C);s.forEach(A=>{A.offset+=O*(1-A.offset)})}}return s.forEach(h=>{let{color:p,offset:g,opacity:_}=h;n.push("<stop ",'offset="',100*g+"%",'" style="stop-color:',p,_!==void 0?";stop-opacity: "+_:";",`"/>
`)}),n.push(this.type==="linear"?"</linearGradient>":"</radialGradient>",`
`),n.join("")}toLive(e){let{x1:t,y1:n,x2:r,y2:o,r1:s,r2:a}=this.coords,l=this.type==="linear"?e.createLinearGradient(t,n,r,o):e.createRadialGradient(t,n,s,r,o,a);return this.colorStops.forEach(c=>{let{color:d,opacity:h,offset:p}=c;l.addColorStop(p,h!==void 0?new qr(d).setAlpha(h).toRgba():d)}),l}static fromObject(e){return Ge(this,null,function*(){let{colorStops:t,gradientTransform:n}=e;return new this(ve(ve({},e),{},{colorStops:t?t.map(r=>ve({},r)):void 0,gradientTransform:n?[...n]:void 0}))})}static fromElement(e,t,n){let r=_L(e),o=t._findCenterFromElement();return new this(ve({id:e.getAttribute("id")||void 0,type:xL(e),coords:tre(e,{width:n.viewBoxWidth||n.width,height:n.viewBoxHeight||n.height}),colorStops:ere(e,n.opacity),gradientUnits:r,gradientTransform:WS(e.getAttribute("gradientTransform")||"")},r==="pixels"?{offsetX:t.width/2-o.x,offsetY:t.height/2-o.y}:{offsetX:0,offsetY:0}))}};ge(Ff,"type","Gradient"),ft.setClass(Ff,"gradient"),ft.setClass(Ff,"linear"),ft.setClass(Ff,"radial");var nre=["type","source","patternTransform"],Hm=class{get type(){return"pattern"}set type(e){Pd("warn","Setting type has no effect",e)}constructor(e){ge(this,"repeat","repeat"),ge(this,"offsetX",0),ge(this,"offsetY",0),ge(this,"crossOrigin",""),this.id=Sd(),Object.assign(this,e)}isImageSource(){return!!this.source&&typeof this.source.src=="string"}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(e){return this.source&&(!this.isImageSource()||this.source.complete&&this.source.naturalWidth!==0&&this.source.naturalHeight!==0)?e.createPattern(this.source,this.repeat):null}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],{repeat:t,crossOrigin:n}=this;return ve(ve({},_0(this,e)),{},{type:"pattern",source:this.sourceToString(),repeat:t,crossOrigin:n,offsetX:gi(this.offsetX,Fn.NUM_FRACTION_DIGITS),offsetY:gi(this.offsetY,Fn.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null})}toSVG(e){let{width:t,height:n}=e,{source:r,repeat:o,id:s}=this,a=Df(this.offsetX/t,0),l=Df(this.offsetY/n,0),c=o==="repeat-y"||o==="no-repeat"?1+Math.abs(a||0):Df(r.width/t,0),d=o==="repeat-x"||o==="no-repeat"?1+Math.abs(l||0):Df(r.height/n,0);return['<pattern id="SVGID_'.concat(s,'" x="').concat(a,'" y="').concat(l,'" width="').concat(c,'" height="').concat(d,'">'),'<image x="0" y="0" width="'.concat(r.width,'" height="').concat(r.height,'" xlink:href="').concat(this.sourceToString(),'"></image>'),"</pattern>",""].join(`
`)}static fromObject(e,t){return Ge(this,null,function*(){let{type:n,source:r,patternTransform:o}=e,s=vi(e,nre),a=yield Um(r,ve(ve({},t),{},{crossOrigin:s.crossOrigin}));return new this(ve(ve({},s),{},{patternTransform:o&&o.slice(0),source:a}))})}};ge(Hm,"type","Pattern"),ft.setClass(Hm),ft.setClass(Hm,"pattern");var JS=class{constructor(e){ge(this,"color","rgb(0, 0, 0)"),ge(this,"width",1),ge(this,"shadow",null),ge(this,"strokeLineCap","round"),ge(this,"strokeLineJoin","round"),ge(this,"strokeMiterLimit",10),ge(this,"strokeDashArray",null),ge(this,"limitedToCanvasSize",!1),this.canvas=e}_setBrushStyles(e){e.strokeStyle=this.color,e.lineWidth=this.width,e.lineCap=this.strokeLineCap,e.miterLimit=this.strokeMiterLimit,e.lineJoin=this.strokeLineJoin,e.setLineDash(this.strokeDashArray||[])}_saveAndTransform(e){let t=this.canvas.viewportTransform;e.save(),e.transform(t[0],t[1],t[2],t[3],t[4],t[5])}needsFullRender(){return new qr(this.color).getAlpha()<1||!!this.shadow}_setShadow(){if(!this.shadow||!this.canvas)return;let e=this.canvas,t=this.shadow,n=e.contextTop,r=e.getZoom()*e.getRetinaScaling();n.shadowColor=t.color,n.shadowBlur=t.blur*r,n.shadowOffsetX=t.offsetX*r,n.shadowOffsetY=t.offsetY*r}_resetShadow(){let e=this.canvas.contextTop;e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0}_isOutSideCanvas(e){return e.x<0||e.x>this.canvas.getWidth()||e.y<0||e.y>this.canvas.getHeight()}},ire=["path","left","top"],rre=["d"],wd=class i extends Pr{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{path:n,left:r,top:o}=t,s=vi(t,ire);super(),Object.assign(this,i.ownDefaults),this.setOptions(s),this._setPath(e||[],!0),typeof r=="number"&&this.set(Nn,r),typeof o=="number"&&this.set(Lo,o)}_setPath(e,t){this.path=sL(Array.isArray(e)?e:hL(e)),this.setBoundingBox(t)}_findCenterFromElement(){let e=this._calcBoundsFromPath();return new De(e.left+e.width/2,e.top+e.height/2)}_renderPathCommands(e){let t=-this.pathOffset.x,n=-this.pathOffset.y;e.beginPath();for(let r of this.path)switch(r[0]){case"L":e.lineTo(r[1]+t,r[2]+n);break;case"M":e.moveTo(r[1]+t,r[2]+n);break;case"C":e.bezierCurveTo(r[1]+t,r[2]+n,r[3]+t,r[4]+n,r[5]+t,r[6]+n);break;case"Q":e.quadraticCurveTo(r[1]+t,r[2]+n,r[3]+t,r[4]+n);break;case"Z":e.closePath()}}_render(e){this._renderPathCommands(e),this._renderPaintInOrder(e)}toString(){return"#<Path (".concat(this.complexity(),'): { "top": ').concat(this.top,', "left": ').concat(this.left," }>")}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return ve(ve({},super.toObject(e)),{},{path:this.path.map(t=>t.slice())})}toDatalessObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=this.toObject(e);return this.sourcePath&&(delete t.path,t.sourcePath=this.sourcePath),t}_toSVG(){let e=A3(this.path,Fn.NUM_FRACTION_DIGITS);return["<path ","COMMON_PARTS",'d="'.concat(e,`" stroke-linecap="round" />
`)]}_getOffsetTransform(){let e=Fn.NUM_FRACTION_DIGITS;return" translate(".concat(gi(-this.pathOffset.x,e),", ").concat(gi(-this.pathOffset.y,e),")")}toClipPathSVG(e){let t=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}toSVG(e){let t=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(e){let{width:t,height:n,pathOffset:r}=this._calcDimensions();this.set({width:t,height:n,pathOffset:r}),e&&this.setPositionByOrigin(r,Qt,Qt)}_calcBoundsFromPath(){let e=[],t=0,n=0,r=0,o=0;for(let s of this.path)switch(s[0]){case"L":r=s[1],o=s[2],e.push({x:t,y:n},{x:r,y:o});break;case"M":r=s[1],o=s[2],t=r,n=o;break;case"C":e.push(...YS(r,o,s[1],s[2],s[3],s[4],s[5],s[6])),r=s[5],o=s[6];break;case"Q":e.push(...YS(r,o,s[1],s[2],s[1],s[2],s[3],s[4])),r=s[3],o=s[4];break;case"Z":r=t,o=n}return _l(e)}_calcDimensions(){let e=this._calcBoundsFromPath();return ve(ve({},e),{},{pathOffset:new De(e.left+e.width/2,e.top+e.height/2)})}static fromObject(e){return this._fromObject(e,{extraParam:"path"})}static fromElement(e,t,n){return Ge(this,null,function*(){let r=bc(e,this.ATTRIBUTE_NAMES,n),{d:o}=r;return new this(o,ve(ve(ve({},vi(r,rre)),t),{},{left:void 0,top:void 0}))})}};ge(wd,"type","Path"),ge(wd,"cacheProperties",[...vc,"path","fillRule"]),ge(wd,"ATTRIBUTE_NAMES",[...Fd,"d"]),ft.setClass(wd),ft.setSVGClass(wd);var _c=class i extends JS{constructor(e){super(e),ge(this,"decimate",.4),ge(this,"drawStraightLine",!1),ge(this,"straightLineKey","shiftKey"),this._points=[],this._hasStraightLine=!1}needsFullRender(){return super.needsFullRender()||this._hasStraightLine}static drawSegment(e,t,n){let r=t.midPointFrom(n);return e.quadraticCurveTo(t.x,t.y,r.x,r.y),r}onMouseDown(e,t){let{e:n}=t;this.canvas._isMainEvent(n)&&(this.drawStraightLine=!!this.straightLineKey&&n[this.straightLineKey],this._prepareForDrawing(e),this._addPoint(e),this._render())}onMouseMove(e,t){let{e:n}=t;if(this.canvas._isMainEvent(n)&&(this.drawStraightLine=!!this.straightLineKey&&n[this.straightLineKey],(this.limitedToCanvasSize!==!0||!this._isOutSideCanvas(e))&&this._addPoint(e)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{let r=this._points,o=r.length,s=this.canvas.contextTop;this._saveAndTransform(s),this.oldEnd&&(s.beginPath(),s.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=i.drawSegment(s,r[o-2],r[o-1]),s.stroke(),s.restore()}}onMouseUp(e){let{e:t}=e;return!this.canvas._isMainEvent(t)||(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1)}_prepareForDrawing(e){this._reset(),this._addPoint(e),this.canvas.contextTop.moveTo(e.x,e.y)}_addPoint(e){return!(this._points.length>1&&e.eq(this._points[this._points.length-1]))&&(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(e),!0)}_reset(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1}_render(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.canvas.contextTop,t=this._points[0],n=this._points[1];if(this._saveAndTransform(e),e.beginPath(),this._points.length===2&&t.x===n.x&&t.y===n.y){let r=this.width/1e3;t.x-=r,n.x+=r}e.moveTo(t.x,t.y);for(let r=1;r<this._points.length;r++)i.drawSegment(e,t,n),t=this._points[r],n=this._points[r+1];e.lineTo(t.x,t.y),e.stroke(),e.restore()}convertPointsToSVGPath(e){let t=this.width/1e3;return fL(e,t)}createPath(e){let t=new wd(e,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,t.shadow=new Ed(this.shadow)),t}decimatePoints(e,t){if(e.length<=2)return e;let n,r=e[0],o=this.canvas.getZoom(),s=Math.pow(t/o,2),a=e.length-1,l=[r];for(let c=1;c<a-1;c++)n=Math.pow(r.x-e[c].x,2)+Math.pow(r.y-e[c].y,2),n>=s&&(r=e[c],l.push(r));return l.push(e[a]),l}_finalizeAndAddPath(){this.canvas.contextTop.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));let e=this.convertPointsToSVGPath(this._points);if(function(n){return A3(n)==="M 0 0 Q 0 0 0 0 L 0 0"}(e))return void this.canvas.requestRenderAll();let t=this.createPath(e);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:t}),this.canvas.add(t),this.canvas.requestRenderAll(),t.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:t})}},ore=["left","top","radius"],vL=["radius","startAngle","endAngle","counterClockwise"],No=class i extends Pr{static getDefaults(){return ve(ve({},super.getDefaults()),i.ownDefaults)}constructor(e){super(),Object.assign(this,i.ownDefaults),this.setOptions(e)}_set(e,t){return super._set(e,t),e==="radius"&&this.setRadius(t),this}_render(e){e.beginPath(),e.arc(0,0,this.radius,Ii(this.startAngle),Ii(this.endAngle),this.counterClockwise),this._renderPaintInOrder(e)}getRadiusX(){return this.get("radius")*this.get(fo)}getRadiusY(){return this.get("radius")*this.get(ps)}setRadius(e){this.radius=e,this.set({width:2*e,height:2*e})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...vL,...e])}_toSVG(){let e=(this.endAngle-this.startAngle)%360;if(e===0)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',"".concat(this.radius),`" />
`];{let{radius:t}=this,n=Ii(this.startAngle),r=Ii(this.endAngle),o=Pa(n)*t,s=Oa(n)*t,a=Pa(r)*t,l=Oa(r)*t,c=e>180?1:0,d=this.counterClockwise?0:1;return['<path d="M '.concat(o," ").concat(s," A ").concat(t," ").concat(t," 0 ").concat(c," ").concat(d," ").concat(a," ").concat(l,'" '),"COMMON_PARTS",` />
`]}}static fromElement(e,t,n){return Ge(this,null,function*(){let r=bc(e,this.ATTRIBUTE_NAMES,n),{left:o=0,top:s=0,radius:a=0}=r;return new this(ve(ve({},vi(r,ore)),{},{radius:a,left:o-a,top:s-a}))})}static fromObject(e){return super._fromObject(e)}};ge(No,"type","Circle"),ge(No,"cacheProperties",[...vc,...vL]),ge(No,"ownDefaults",{radius:0,startAngle:0,endAngle:360,counterClockwise:!1}),ge(No,"ATTRIBUTE_NAMES",["cx","cy","r",...Fd]),ft.setClass(No),ft.setSVGClass(No);var sre=["x1","y1","x2","y2"],are=["x1","y1","x2","y2"],ZS=["x1","x2","y1","y2"],uo=class i extends Pr{constructor(){let[e,t,n,r]=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0],o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,i.ownDefaults),this.setOptions(o),this.x1=e,this.x2=n,this.y1=t,this.y2=r,this._setWidthHeight();let{left:s,top:a}=o;typeof s=="number"&&this.set(Nn,s),typeof a=="number"&&this.set(Lo,a)}_setWidthHeight(){let{x1:e,y1:t,x2:n,y2:r}=this;this.width=Math.abs(n-e),this.height=Math.abs(r-t);let{left:o,top:s,width:a,height:l}=_l([{x:e,y:t},{x:n,y:r}]),c=new De(o+a/2,s+l/2);this.setPositionByOrigin(c,Qt,Qt)}_set(e,t){return super._set(e,t),ZS.includes(e)&&this._setWidthHeight(),this}_render(e){e.beginPath();let t=this.calcLinePoints();e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2),e.lineWidth=this.strokeWidth;let n=e.strokeStyle;var r;Ls(this.stroke)?e.strokeStyle=this.stroke.toLive(e):e.strokeStyle=(r=this.stroke)!==null&&r!==void 0?r:e.fillStyle,this.stroke&&this._renderStroke(e),e.strokeStyle=n}_findCenterFromElement(){return new De((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return ve(ve({},super.toObject(e)),this.calcLinePoints())}_getNonTransformedDimensions(){let e=super._getNonTransformedDimensions();return this.strokeLineCap==="butt"&&(this.width===0&&(e.y-=this.strokeWidth),this.height===0&&(e.x-=this.strokeWidth)),e}calcLinePoints(){let{x1:e,x2:t,y1:n,y2:r,width:o,height:s}=this,a=e<=t?-1:1,l=n<=r?-1:1;return{x1:a*o/2,x2:a*-o/2,y1:l*s/2,y2:l*-s/2}}_toSVG(){let{x1:e,x2:t,y1:n,y2:r}=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="'.concat(e,'" y1="').concat(n,'" x2="').concat(t,'" y2="').concat(r,`" />
`)]}static fromElement(e,t,n){return Ge(this,null,function*(){let r=bc(e,this.ATTRIBUTE_NAMES,n),{x1:o=0,y1:s=0,x2:a=0,y2:l=0}=r;return new this([o,s,a,l],vi(r,sre))})}static fromObject(e){let{x1:t,y1:n,x2:r,y2:o}=e,s=vi(e,are);return this._fromObject(ve(ve({},s),{},{points:[t,n,r,o]}),{extraParam:"points"})}};ge(uo,"type","Line"),ge(uo,"cacheProperties",[...vc,...ZS]),ge(uo,"ATTRIBUTE_NAMES",Fd.concat(ZS)),ft.setClass(uo),ft.setSVGClass(uo);var zs=class i extends Pr{static getDefaults(){return ve(ve({},super.getDefaults()),i.ownDefaults)}constructor(e){super(),Object.assign(this,i.ownDefaults),this.setOptions(e)}_render(e){let t=this.width/2,n=this.height/2;e.beginPath(),e.moveTo(-t,n),e.lineTo(0,-n),e.lineTo(t,n),e.closePath(),this._renderPaintInOrder(e)}_toSVG(){let e=this.width/2,t=this.height/2;return["<polygon ","COMMON_PARTS",'points="',"".concat(-e," ").concat(t,",0 ").concat(-t,",").concat(e," ").concat(t),'" />']}};ge(zs,"type","Triangle"),ge(zs,"ownDefaults",{width:100,height:100}),ft.setClass(zs),ft.setSVGClass(zs);var bL=["rx","ry"],yd=class i extends Pr{static getDefaults(){return ve(ve({},super.getDefaults()),i.ownDefaults)}constructor(e){super(),Object.assign(this,i.ownDefaults),this.setOptions(e)}_set(e,t){switch(super._set(e,t),e){case"rx":this.rx=t,this.set("width",2*t);break;case"ry":this.ry=t,this.set("height",2*t)}return this}getRx(){return this.get("rx")*this.get(fo)}getRy(){return this.get("ry")*this.get(ps)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...bL,...e])}_toSVG(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" rx="'.concat(this.rx,'" ry="').concat(this.ry,`" />
`)]}_render(e){e.beginPath(),e.save(),e.transform(1,0,0,this.ry/this.rx,0,0),e.arc(0,0,this.rx,0,xc,!1),e.restore(),this._renderPaintInOrder(e)}static fromElement(e,t,n){return Ge(this,null,function*(){let r=bc(e,this.ATTRIBUTE_NAMES,n);return r.left=(r.left||0)-r.rx,r.top=(r.top||0)-r.ry,new this(r)})}};function lre(i){if(!i)return[];let e=i.replace(/,/g," ").trim().split(/\s+/),t=[];for(let n=0;n<e.length;n+=2)t.push({x:parseFloat(e[n]),y:parseFloat(e[n+1])});return t}ge(yd,"type","Ellipse"),ge(yd,"cacheProperties",[...vc,...bL]),ge(yd,"ownDefaults",{rx:0,ry:0}),ge(yd,"ATTRIBUTE_NAMES",[...Fd,"cx","cy","rx","ry"]),ft.setClass(yd),ft.setSVGClass(yd);var cre=["left","top"],CL={exactBoundingBox:!1},pl=class i extends Pr{static getDefaults(){return ve(ve({},super.getDefaults()),i.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),ge(this,"strokeDiff",void 0),Object.assign(this,i.ownDefaults),this.setOptions(t),this.points=e;let{left:n,top:r}=t;this.initialized=!0,this.setBoundingBox(!0),typeof n=="number"&&this.set(Nn,n),typeof r=="number"&&this.set(Lo,r)}isOpen(){return!0}_projectStrokeOnPoints(e){return QN(this.points,e,this.isOpen())}_calcDimensions(e){e=ve({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth},e||{});let t=this.exactBoundingBox?this._projectStrokeOnPoints(e).map(c=>c.projectedPoint):this.points;if(t.length===0)return{left:0,top:0,width:0,height:0,pathOffset:new De,strokeOffset:new De,strokeDiff:new De};let n=_l(t),r=Zm(ve(ve({},e),{},{scaleX:1,scaleY:1})),o=_l(this.points.map(c=>Wr(c,r,!0))),s=new De(this.scaleX,this.scaleY),a=n.left+n.width/2,l=n.top+n.height/2;return this.exactBoundingBox&&(a-=l*Math.tan(Ii(this.skewX)),l-=a*Math.tan(Ii(this.skewY))),ve(ve({},n),{},{pathOffset:new De(a,l),strokeOffset:new De(o.left,o.top).subtract(new De(n.left,n.top)).multiply(s),strokeDiff:new De(n.width,n.height).subtract(new De(o.width,o.height)).multiply(s)})}_findCenterFromElement(){let e=_l(this.points);return new De(e.left+e.width/2,e.top+e.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(e){let{left:t,top:n,width:r,height:o,pathOffset:s,strokeOffset:a,strokeDiff:l}=this._calcDimensions();this.set({width:r,height:o,pathOffset:s,strokeOffset:a,strokeDiff:l}),e&&this.setPositionByOrigin(new De(t+r/2,n+o/2),Qt,Qt)}isStrokeAccountedForInDimensions(){return this.exactBoundingBox}_getNonTransformedDimensions(){return this.exactBoundingBox?new De(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.exactBoundingBox){let s;if(Object.keys(e).some(a=>this.strokeUniform||this.constructor.layoutProperties.includes(a))){var t,n;let{width:a,height:l}=this._calcDimensions(e);s=new De((t=e.width)!==null&&t!==void 0?t:a,(n=e.height)!==null&&n!==void 0?n:l)}else{var r,o;s=new De((r=e.width)!==null&&r!==void 0?r:this.width,(o=e.height)!==null&&o!==void 0?o:this.height)}return s.multiply(new De(e.scaleX||this.scaleX,e.scaleY||this.scaleY))}return super._getTransformedDimensions(e)}_set(e,t){let n=this.initialized&&this[e]!==t,r=super._set(e,t);return this.exactBoundingBox&&n&&((e===fo||e===ps)&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(e))&&this.setDimensions(),r}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return ve(ve({},super.toObject(e)),{},{points:this.points.map(t=>{let{x:n,y:r}=t;return{x:n,y:r}})})}_toSVG(){let e=[],t=this.pathOffset.x,n=this.pathOffset.y,r=Fn.NUM_FRACTION_DIGITS;for(let o=0,s=this.points.length;o<s;o++)e.push(gi(this.points[o].x-t,r),",",gi(this.points[o].y-n,r)," ");return["<".concat(this.constructor.type.toLowerCase()," "),"COMMON_PARTS",'points="'.concat(e.join(""),`" />
`)]}_render(e){let t=this.points.length,n=this.pathOffset.x,r=this.pathOffset.y;if(t&&!isNaN(this.points[t-1].y)){e.beginPath(),e.moveTo(this.points[0].x-n,this.points[0].y-r);for(let o=0;o<t;o++){let s=this.points[o];e.lineTo(s.x-n,s.y-r)}!this.isOpen()&&e.closePath(),this._renderPaintInOrder(e)}}complexity(){return this.points.length}static fromElement(e,t,n){return Ge(this,null,function*(){return new this(lre(e.getAttribute("points")),ve(ve({},vi(bc(e,this.ATTRIBUTE_NAMES,n),cre)),t))})}static fromObject(e){return this._fromObject(e,{extraParam:"points"})}};ge(pl,"ownDefaults",CL),ge(pl,"type","Polyline"),ge(pl,"layoutProperties",[Hf,Gf,"strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]),ge(pl,"cacheProperties",[...vc,"points"]),ge(pl,"ATTRIBUTE_NAMES",[...Fd]),ft.setClass(pl),ft.setSVGClass(pl);var xl=class extends pl{isOpen(){return!1}};ge(xl,"ownDefaults",CL),ge(xl,"type","Polygon"),ft.setClass(xl),ft.setSVGClass(xl);var yL=["fontSize","fontWeight","fontFamily","fontStyle"],wL=["underline","overline","linethrough"],ML=[...yL,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],EL=[...ML,...wL,"textBackgroundColor","direction"],dre=[...yL,...wL,zo,"strokeWidth",_r,"deltaY","textBackgroundColor"],ure={_reNewline:d3,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:Nn,fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:Nn,pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,deltaY:0,direction:"ltr",CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2},ml="justify",HC="justify-left",Gm="justify-right",$m="justify-center",GC=class extends Pr{isEmptyStyles(e){if(!this.styles||e!==void 0&&!this.styles[e])return!0;let t=e===void 0?this.styles:{line:this.styles[e]};for(let n in t)for(let r in t[n])for(let o in t[n][r])return!1;return!0}styleHas(e,t){if(!this.styles||t!==void 0&&!this.styles[t])return!1;let n=t===void 0?this.styles:{0:this.styles[t]};for(let r in n)for(let o in n[r])if(n[r][o][e]!==void 0)return!0;return!1}cleanStyle(e){if(!this.styles)return!1;let t=this.styles,n,r,o=0,s=!0,a=0;for(let l in t){n=0;for(let c in t[l]){let d=t[l][c]||{};o++,d[e]!==void 0?(r?d[e]!==r&&(s=!1):r=d[e],d[e]===this[e]&&delete d[e]):s=!1,Object.keys(d).length!==0?n++:delete t[l][c]}n===0&&delete t[l]}for(let l=0;l<this._textLines.length;l++)a+=this._textLines[l].length;s&&o===a&&(this[e]=r,this.removeStyle(e))}removeStyle(e){if(!this.styles)return;let t=this.styles,n,r,o;for(r in t){for(o in n=t[r],n)delete n[o][e],Object.keys(n[o]).length===0&&delete n[o];Object.keys(n).length===0&&delete t[r]}}_extendStyles(e,t){let{lineIndex:n,charIndex:r}=this.get2DCursorLocation(e);this._getLineStyle(n)||this._setLineStyle(n);let o=x3(ve(ve({},this._getStyleDeclaration(n,r)),t),s=>s!==void 0);this._setStyleDeclaration(n,r,o)}getSelectionStyles(e,t,n){let r=[];for(let o=e;o<(t||e);o++)r.push(this.getStyleAtPosition(o,n));return r}getStyleAtPosition(e,t){let{lineIndex:n,charIndex:r}=this.get2DCursorLocation(e);return t?this.getCompleteStyleDeclaration(n,r):this._getStyleDeclaration(n,r)}setSelectionStyles(e,t,n){for(let r=t;r<(n||t);r++)this._extendStyles(r,e);this._forceClearCache=!0}_getStyleDeclaration(e,t){var n;let r=this.styles&&this.styles[e];return r&&(n=r[t])!==null&&n!==void 0?n:{}}getCompleteStyleDeclaration(e,t){return ve(ve({},_0(this,this.constructor._styleProperties)),this._getStyleDeclaration(e,t))}_setStyleDeclaration(e,t,n){this.styles[e][t]=n}_deleteStyleDeclaration(e,t){delete this.styles[e][t]}_getLineStyle(e){return!!this.styles[e]}_setLineStyle(e){this.styles[e]={}}_deleteLineStyle(e){delete this.styles[e]}};ge(GC,"_styleProperties",dre);var hre=/  +/g,fre=/"/g;function PS(i,e,t,n,r){return"		".concat(function(o,s){let{left:a,top:l,width:c,height:d}=s,h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Fn.NUM_FRACTION_DIGITS,p=Km(_r,o,!1),[g,_,b,C]=[a,l,c,d].map(y=>gi(y,h));return"<rect ".concat(p,' x="').concat(g,'" y="').concat(_,'" width="').concat(b,'" height="').concat(C,'"></rect>')}(i,{left:e,top:t,width:n,height:r}),`
`)}var gre=["textAnchor","textDecoration","dx","dy","top","left","fontSize","strokeWidth"],OS,Bo=class i extends GC{static getDefaults(){return ve(ve({},super.getDefaults()),i.ownDefaults)}constructor(e,t){super(),ge(this,"__charBounds",[]),Object.assign(this,i.ownDefaults),this.setOptions(t),this.styles||(this.styles={}),this.text=e,this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){let e=this.path;e&&(e.segmentsInfo=k3(e.path))}_splitText(){let e=this._splitTextIntoLines(this.text);return this.textLines=e.lines,this._textLines=e.graphemeLines,this._unwrappedTextLines=e._unwrappedLines,this._text=e.graphemeText,e}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(ml)&&this.enlargeSpaces()}enlargeSpaces(){let e,t,n,r,o,s,a;for(let l=0,c=this._textLines.length;l<c;l++)if((this.textAlign===ml||l!==c-1&&!this.isEndOfWrapping(l))&&(r=0,o=this._textLines[l],t=this.getLineWidth(l),t<this.width&&(a=this.textLines[l].match(this._reSpacesAndTabs)))){n=a.length,e=(this.width-t)/n;for(let d=0;d<=o.length;d++)s=this.__charBounds[l][d],this._reSpaceAndTab.test(o[d])?(s.width+=e,s.kernedWidth+=e,s.left+=r,r+=e):s.left+=r}}isEndOfWrapping(e){return e===this._textLines.length-1}missingNewlineOffset(e){return 1}get2DCursorLocation(e,t){let n=t?this._unwrappedTextLines:this._textLines,r;for(r=0;r<n.length;r++){if(e<=n[r].length)return{lineIndex:r,charIndex:e};e-=n[r].length+this.missingNewlineOffset(r,t)}return{lineIndex:r-1,charIndex:n[r-1].length<e?n[r-1].length:e}}toString(){return"#<Text (".concat(this.complexity(),'): { "text": "').concat(this.text,'", "fontFamily": "').concat(this.fontFamily,'" }>')}_getCacheCanvasDimensions(){let e=super._getCacheCanvasDimensions(),t=this.fontSize;return e.width+=t*e.zoomX,e.height+=t*e.zoomY,e}_render(e){let t=this.path;t&&!t.isNotVisible()&&t._render(e),this._setTextStyles(e),this._renderTextLinesBackground(e),this._renderTextDecoration(e,"underline"),this._renderText(e),this._renderTextDecoration(e,"overline"),this._renderTextDecoration(e,"linethrough")}_renderText(e){this.paintFirst===zo?(this._renderTextStroke(e),this._renderTextFill(e)):(this._renderTextFill(e),this._renderTextStroke(e))}_setTextStyles(e,t,n){if(e.textBaseline="alphabetic",this.path)switch(this.pathAlign){case Qt:e.textBaseline="middle";break;case"ascender":e.textBaseline=Lo;break;case"descender":e.textBaseline=IS}e.font=this._getFontDeclaration(t,n)}calcTextWidth(){let e=this.getLineWidth(0);for(let t=1,n=this._textLines.length;t<n;t++){let r=this.getLineWidth(t);r>e&&(e=r)}return e}_renderTextLine(e,t,n,r,o,s){this._renderChars(e,t,n,r,o,s)}_renderTextLinesBackground(e){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;let t=e.fillStyle,n=this._getLeftOffset(),r=this._getTopOffset();for(let o=0,s=this._textLines.length;o<s;o++){let a=this.getHeightOfLine(o);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",o)){r+=a;continue}let l=this._textLines[o].length,c=this._getLineLeftOffset(o),d,h,p=0,g=0,_=this.getValueOfPropertyAt(o,0,"textBackgroundColor");for(let b=0;b<l;b++){let C=this.__charBounds[o][b];h=this.getValueOfPropertyAt(o,b,"textBackgroundColor"),this.path?(e.save(),e.translate(C.renderLeft,C.renderTop),e.rotate(C.angle),e.fillStyle=h,h&&e.fillRect(-C.width/2,-a/this.lineHeight*(1-this._fontSizeFraction),C.width,a/this.lineHeight),e.restore()):h!==_?(d=n+c+g,this.direction==="rtl"&&(d=this.width-d-p),e.fillStyle=_,_&&e.fillRect(d,r,p,a/this.lineHeight),g=C.left,p=C.width,_=h):p+=C.kernedWidth}h&&!this.path&&(d=n+c+g,this.direction==="rtl"&&(d=this.width-d-p),e.fillStyle=h,e.fillRect(d,r,p,a/this.lineHeight)),r+=a}e.fillStyle=t,this._removeShadow(e)}_measureChar(e,t,n,r){let o=jm.getFontCache(t),s=this._getFontDeclaration(t),a=n+e,l=n&&s===this._getFontDeclaration(r),c=t.fontSize/this.CACHE_FONT_SIZE,d,h,p,g;if(n&&o[n]!==void 0&&(p=o[n]),o[e]!==void 0&&(g=d=o[e]),l&&o[a]!==void 0&&(h=o[a],g=h-p),d===void 0||p===void 0||h===void 0){let _=function(){return OS||(OS=ms({width:0,height:0}).getContext("2d")),OS}();this._setTextStyles(_,t,!0),d===void 0&&(g=d=_.measureText(e).width,o[e]=d),p===void 0&&l&&n&&(p=_.measureText(n).width,o[n]=p),l&&h===void 0&&(h=_.measureText(a).width,o[a]=h,g=h-p)}return{width:d*c,kernedWidth:g*c}}getHeightOfChar(e,t){return this.getValueOfPropertyAt(e,t,"fontSize")}measureLine(e){let t=this._measureLine(e);return this.charSpacing!==0&&(t.width-=this._getWidthOfCharSpacing()),t.width<0&&(t.width=0),t}_measureLine(e){let t,n,r=0,o=this.pathSide===$i,s=this.path,a=this._textLines[e],l=a.length,c=new Array(l);this.__charBounds[e]=c;for(let d=0;d<l;d++){let h=a[d];n=this._getGraphemeBox(h,e,d,t),c[d]=n,r+=n.kernedWidth,t=h}if(c[l]={left:n?n.left+n.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},s&&s.segmentsInfo){let d=0,h=s.segmentsInfo[s.segmentsInfo.length-1].length;switch(this.textAlign){case Nn:d=o?h-r:0;break;case Qt:d=(h-r)/2;break;case $i:d=o?0:h-r}d+=this.pathStartOffset*(o?-1:1);for(let p=o?l-1:0;o?p>=0:p<l;o?p--:p++)n=c[p],d>h?d%=h:d<0&&(d+=h),this._setGraphemeOnPath(d,n),d+=n.kernedWidth}return{width:r,numOfSpaces:0}}_setGraphemeOnPath(e,t){let n=e+t.kernedWidth/2,r=this.path,o=uL(r.path,n,r.segmentsInfo);t.renderLeft=o.x-r.pathOffset.x,t.renderTop=o.y-r.pathOffset.y,t.angle=o.angle+(this.pathSide===$i?Math.PI:0)}_getGraphemeBox(e,t,n,r,o){let s=this.getCompleteStyleDeclaration(t,n),a=r?this.getCompleteStyleDeclaration(t,n-1):{},l=this._measureChar(e,s,r,a),c,d=l.kernedWidth,h=l.width;this.charSpacing!==0&&(c=this._getWidthOfCharSpacing(),h+=c,d+=c);let p={width:h,left:0,height:s.fontSize,kernedWidth:d,deltaY:s.deltaY};if(n>0&&!o){let g=this.__charBounds[t][n-1];p.left=g.left+g.width+l.kernedWidth-l.width}return p}getHeightOfLine(e){if(this.__lineHeights[e])return this.__lineHeights[e];let t=this.getHeightOfChar(e,0);for(let n=1,r=this._textLines[e].length;n<r;n++)t=Math.max(this.getHeightOfChar(e,n),t);return this.__lineHeights[e]=t*this.lineHeight*this._fontSizeMult}calcTextHeight(){let e,t=0;for(let n=0,r=this._textLines.length;n<r;n++)e=this.getHeightOfLine(n),t+=n===r-1?e/this.lineHeight:e;return t}_getLeftOffset(){return this.direction==="ltr"?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(e,t){e.save();let n=0,r=this._getLeftOffset(),o=this._getTopOffset();for(let s=0,a=this._textLines.length;s<a;s++){let l=this.getHeightOfLine(s),c=l/this.lineHeight,d=this._getLineLeftOffset(s);this._renderTextLine(t,e,this._textLines[s],r+d,o+n+c,s),n+=l}e.restore()}_renderTextFill(e){(this.fill||this.styleHas(_r))&&this._renderTextCommon(e,"fillText")}_renderTextStroke(e){(this.stroke&&this.strokeWidth!==0||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this._setLineDash(e,this.strokeDashArray),e.beginPath(),this._renderTextCommon(e,"strokeText"),e.closePath(),e.restore())}_renderChars(e,t,n,r,o,s){let a=this.getHeightOfLine(s),l=this.textAlign.includes(ml),c=this.path,d=!l&&this.charSpacing===0&&this.isEmptyStyles(s)&&!c,h=this.direction==="ltr",p=this.direction==="ltr"?1:-1,g=t.direction,_,b,C,y,M,O="",A=0;if(t.save(),g!==this.direction&&(t.canvas.setAttribute("dir",h?"ltr":"rtl"),t.direction=h?"ltr":"rtl",t.textAlign=h?Nn:$i),o-=a*this._fontSizeFraction/this.lineHeight,d)return this._renderChar(e,t,s,0,n.join(""),r,o),void t.restore();for(let D=0,N=n.length-1;D<=N;D++)y=D===N||this.charSpacing||c,O+=n[D],C=this.__charBounds[s][D],A===0?(r+=p*(C.kernedWidth-C.width),A+=C.width):A+=C.kernedWidth,l&&!y&&this._reSpaceAndTab.test(n[D])&&(y=!0),y||(_=_||this.getCompleteStyleDeclaration(s,D),b=this.getCompleteStyleDeclaration(s,D+1),y=oy(_,b,!1)),y&&(c?(t.save(),t.translate(C.renderLeft,C.renderTop),t.rotate(C.angle),this._renderChar(e,t,s,D,O,-A/2,0),t.restore()):(M=r,this._renderChar(e,t,s,D,O,M,o)),O="",_=b,r+=p*A,A=0);t.restore()}_applyPatternGradientTransformText(e){let t=this.width+this.strokeWidth,n=this.height+this.strokeWidth,r=ms({width:t,height:n}),o=r.getContext("2d");return r.width=t,r.height=n,o.beginPath(),o.moveTo(0,0),o.lineTo(t,0),o.lineTo(t,n),o.lineTo(0,n),o.closePath(),o.translate(t/2,n/2),o.fillStyle=e.toLive(o),this._applyPatternGradientTransform(o,e),o.fill(),o.createPattern(r,"no-repeat")}handleFiller(e,t,n){let r,o;return Ls(n)?n.gradientUnits==="percentage"||n.gradientTransform||n.patternTransform?(r=-this.width/2,o=-this.height/2,e.translate(r,o),e[t]=this._applyPatternGradientTransformText(n),{offsetX:r,offsetY:o}):(e[t]=n.toLive(e),this._applyPatternGradientTransform(e,n)):(e[t]=n,{offsetX:0,offsetY:0})}_setStrokeStyles(e,t){let{stroke:n,strokeWidth:r}=t;return e.lineWidth=r,e.lineCap=this.strokeLineCap,e.lineDashOffset=this.strokeDashOffset,e.lineJoin=this.strokeLineJoin,e.miterLimit=this.strokeMiterLimit,this.handleFiller(e,"strokeStyle",n)}_setFillStyles(e,t){let{fill:n}=t;return this.handleFiller(e,"fillStyle",n)}_renderChar(e,t,n,r,o,s,a){let l=this._getStyleDeclaration(n,r),c=this.getCompleteStyleDeclaration(n,r),d=e==="fillText"&&c.fill,h=e==="strokeText"&&c.stroke&&c.strokeWidth;if(h||d){if(t.save(),t.font=this._getFontDeclaration(c),l.textBackgroundColor&&this._removeShadow(t),l.deltaY&&(a+=l.deltaY),d){let p=this._setFillStyles(t,c);t.fillText(o,s-p.offsetX,a-p.offsetY)}if(h){let p=this._setStrokeStyles(t,c);t.strokeText(o,s-p.offsetX,a-p.offsetY)}t.restore()}}setSuperscript(e,t){this._setScript(e,t,this.superscript)}setSubscript(e,t){this._setScript(e,t,this.subscript)}_setScript(e,t,n){let r=this.get2DCursorLocation(e,!0),o=this.getValueOfPropertyAt(r.lineIndex,r.charIndex,"fontSize"),s=this.getValueOfPropertyAt(r.lineIndex,r.charIndex,"deltaY"),a={fontSize:o*n.size,deltaY:s+o*n.baseline};this.setSelectionStyles(a,e,t)}_getLineLeftOffset(e){let t=this.getLineWidth(e),n=this.width-t,r=this.textAlign,o=this.direction,s=this.isEndOfWrapping(e),a=0;return r===ml||r===$m&&!s||r===Gm&&!s||r===HC&&!s?0:(r===Qt&&(a=n/2),r===$i&&(a=n),r===$m&&(a=n/2),r===Gm&&(a=n),o==="rtl"&&(r===$i||r===ml||r===Gm?a=0:r===Nn||r===HC?a=-n:r!==Qt&&r!==$m||(a=-n/2)),a)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(e){if(this.__lineWidths[e]!==void 0)return this.__lineWidths[e];let{width:t}=this.measureLine(e);return this.__lineWidths[e]=t,t}_getWidthOfCharSpacing(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(e,t,n){var r;return(r=this._getStyleDeclaration(e,t)[n])!==null&&r!==void 0?r:this[n]}_renderTextDecoration(e,t){if(!this[t]&&!this.styleHas(t))return;let n=this._getTopOffset(),r=this._getLeftOffset(),o=this.path,s=this._getWidthOfCharSpacing(),a=this.offsets[t];for(let l=0,c=this._textLines.length;l<c;l++){let d=this.getHeightOfLine(l);if(!this[t]&&!this.styleHas(t,l)){n+=d;continue}let h=this._textLines[l],p=d/this.lineHeight,g=this._getLineLeftOffset(l),_,b,C=0,y=0,M=this.getValueOfPropertyAt(l,0,t),O=this.getValueOfPropertyAt(l,0,_r),A=n+p*(1-this._fontSizeFraction),D=this.getHeightOfChar(l,0),N=this.getValueOfPropertyAt(l,0,"deltaY");for(let T=0,H=h.length;T<H;T++){let te=this.__charBounds[l][T];_=this.getValueOfPropertyAt(l,T,t),b=this.getValueOfPropertyAt(l,T,_r);let L=this.getHeightOfChar(l,T),z=this.getValueOfPropertyAt(l,T,"deltaY");if(o&&_&&b)e.save(),e.fillStyle=O,e.translate(te.renderLeft,te.renderTop),e.rotate(te.angle),e.fillRect(-te.kernedWidth/2,a*L+z,te.kernedWidth,this.fontSize/15),e.restore();else if((_!==M||b!==O||L!==D||z!==N)&&y>0){let J=r+g+C;this.direction==="rtl"&&(J=this.width-J-y),M&&O&&(e.fillStyle=O,e.fillRect(J,A+a*D+N,y,this.fontSize/15)),C=te.left,y=te.width,M=_,O=b,D=L,N=z}else y+=te.kernedWidth}let B=r+g+C;this.direction==="rtl"&&(B=this.width-B-y),e.fillStyle=b,_&&b&&e.fillRect(B,A+a*D+N,y-s,this.fontSize/15),n+=d}this._removeShadow(e)}_getFontDeclaration(){let{fontFamily:e=this.fontFamily,fontStyle:t=this.fontStyle,fontWeight:n=this.fontWeight,fontSize:r=this.fontSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0,s=e.includes("'")||e.includes('"')||e.includes(",")||i.genericFonts.includes(e.toLowerCase())?e:'"'.concat(e,'"');return[t,n,"".concat(o?this.CACHE_FONT_SIZE:r,"px"),s].join(" ")}render(e){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(e)))}graphemeSplit(e){return ry(e)}_splitTextIntoLines(e){let t=e.split(this._reNewline),n=new Array(t.length),r=[`
`],o=[];for(let s=0;s<t.length;s++)n[s]=this.graphemeSplit(t[s]),o=o.concat(n[s],r);return o.pop(),{_unwrappedLines:n,lines:t,graphemeText:o,graphemeLines:n}}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return ve(ve({},super.toObject([...EL,...e])),{},{styles:ZN(this.styles,this.text)},this.path?{path:this.path.toObject()}:{})}set(e,t){let{textLayoutProperties:n}=this.constructor;super.set(e,t);let r=!1,o=!1;if(typeof e=="object")for(let s in e)s==="path"&&this.setPathInfo(),r=r||n.includes(s),o=o||s==="path";else r=n.includes(e),o=e==="path";return o&&this.setPathInfo(),r&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static fromElement(e,t,n){return Ge(this,null,function*(){let r=bc(e,i.ATTRIBUTE_NAMES,n),o=ve(ve({},t),r),{textAnchor:s=Nn,textDecoration:a="",dx:l=0,dy:c=0,top:d=0,left:h=0,fontSize:p=c3,strokeWidth:g=1}=o,_=vi(o,gre),b=new this((e.textContent||"").replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," "),ve({left:h+l,top:d+c,underline:a.includes("underline"),overline:a.includes("overline"),linethrough:a.includes("line-through"),strokeWidth:0,fontSize:p},_)),C=b.getScaledHeight()/b.height,y=((b.height+b.strokeWidth)*b.lineHeight-b.height)*C,M=b.getScaledHeight()+y,O=0;return s===Qt&&(O=b.getScaledWidth()/2),s===$i&&(O=b.getScaledWidth()),b.set({left:b.left-O,top:b.top-(M-b.fontSize*(.07+b._fontSizeFraction))/b.lineHeight,strokeWidth:g}),b})}static fromObject(e){return this._fromObject(ve(ve({},e),{},{styles:eL(e.styles||{},e.text)}),{extraParam:"text"})}};ge(Bo,"textLayoutProperties",ML),ge(Bo,"cacheProperties",[...vc,...EL]),ge(Bo,"ownDefaults",ure),ge(Bo,"type","Text"),ge(Bo,"genericFonts",["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),ge(Bo,"ATTRIBUTE_NAMES",Fd.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor")),YN(Bo,[class extends AC{_toSVG(){let i=this._getSVGLeftTopOffsets(),e=this._getSVGTextAndBg(i.textTop,i.textLeft);return this._wrapSVGTextAndBg(e)}toSVG(i){let e=this._createBaseSVGMarkup(this._toSVG(),{reviver:i,noStyle:!0,withShadow:!0}),t=this.path;return t?e+t._createBaseSVGMarkup(t._toSVG(),{reviver:i,withShadow:!0,additionalTransform:zf(this.calcOwnMatrix())}):e}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(i){let{textBgRects:e,textSpans:t}=i,n=this.getSvgTextDecoration(this);return[e.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'.concat(this.fontFamily.replace(fre,"'"),'" '):"",this.fontSize?'font-size="'.concat(this.fontSize,'" '):"",this.fontStyle?'font-style="'.concat(this.fontStyle,'" '):"",this.fontWeight?'font-weight="'.concat(this.fontWeight,'" '):"",n?'text-decoration="'.concat(n,'" '):"",this.direction==="rtl"?'direction="'.concat(this.direction,'" '):"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",t.join(""),`</text>
`]}_getSVGTextAndBg(i,e){let t=[],n=[],r,o=i;this.backgroundColor&&n.push(...PS(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let s=0,a=this._textLines.length;s<a;s++)r=this._getLineLeftOffset(s),this.direction==="rtl"&&(r+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",s))&&this._setSVGTextLineBg(n,s,e+r,o),this._setSVGTextLineText(t,s,e+r,o),o+=this.getHeightOfLine(s);return{textSpans:t,textBgRects:n}}_createTextCharSpan(i,e,t,n,r){let o=Fn.NUM_FRACTION_DIGITS,s=this.getSvgSpanStyles(e,i!==i.trim()||!!i.match(hre)),a=s?'style="'.concat(s,'"'):"",l=e.deltaY,c=l?' dy="'.concat(gi(l,o),'" '):"",{angle:d,renderLeft:h,renderTop:p,width:g}=r,_="";if(h!==void 0){let b=g/2;d&&(_=' rotate="'.concat(gi(bl(d),o),'"'));let C=x0({angle:bl(d)});C[4]=h,C[5]=p;let y=new De(-b,0).transform(C);t=y.x,n=y.y}return'<tspan x="'.concat(gi(t,o),'" y="').concat(gi(n,o),'" ').concat(c).concat(_).concat(a,">").concat(JN(i),"</tspan>")}_setSVGTextLineText(i,e,t,n){let r=this.getHeightOfLine(e),o=this.textAlign.includes(ml),s=this._textLines[e],a,l,c,d,h,p="",g=0;n+=r*(1-this._fontSizeFraction)/this.lineHeight;for(let _=0,b=s.length-1;_<=b;_++)h=_===b||this.charSpacing||this.path,p+=s[_],c=this.__charBounds[e][_],g===0?(t+=c.kernedWidth-c.width,g+=c.width):g+=c.kernedWidth,o&&!h&&this._reSpaceAndTab.test(s[_])&&(h=!0),h||(a=a||this.getCompleteStyleDeclaration(e,_),l=this.getCompleteStyleDeclaration(e,_+1),h=oy(a,l,!0)),h&&(d=this._getStyleDeclaration(e,_),i.push(this._createTextCharSpan(p,d,t,n,c)),p="",a=l,this.direction==="rtl"?t-=g:t+=g,g=0)}_setSVGTextLineBg(i,e,t,n){let r=this._textLines[e],o=this.getHeightOfLine(e)/this.lineHeight,s,a=0,l=0,c=this.getValueOfPropertyAt(e,0,"textBackgroundColor");for(let d=0;d<r.length;d++){let{left:h,width:p,kernedWidth:g}=this.__charBounds[e][d];s=this.getValueOfPropertyAt(e,d,"textBackgroundColor"),s!==c?(c&&i.push(...PS(c,t+l,n,a,o)),l=h,a=p,c=s):a+=g}s&&i.push(...PS(c,t+l,n,a,o))}_getSVGLineTopOffset(i){let e,t=0;for(e=0;e<i;e++)t+=this.getHeightOfLine(e);let n=this.getHeightOfLine(e);return{lineTop:t,offset:(this._fontSizeMult-this._fontSizeFraction)*n/(this.lineHeight*this._fontSizeMult)}}getSvgStyles(i){return"".concat(super.getSvgStyles(i)," white-space: pre;")}getSvgSpanStyles(i,e){let{fontFamily:t,strokeWidth:n,stroke:r,fill:o,fontSize:s,fontStyle:a,fontWeight:l,deltaY:c}=i,d=this.getSvgTextDecoration(i);return[r?Km(zo,r):"",n?"stroke-width: ".concat(n,"; "):"",t?"font-family: ".concat(t.includes("'")||t.includes('"')?t:"'".concat(t,"'"),"; "):"",s?"font-size: ".concat(s,"px; "):"",a?"font-style: ".concat(a,"; "):"",l?"font-weight: ".concat(l,"; "):"",d&&"text-decoration: ".concat(d,"; "),o?Km(_r,o):"",c?"baseline-shift: ".concat(-c,"; "):"",e?"white-space: pre; ":""].join("")}getSvgTextDecoration(i){return["overline","underline","line-through"].filter(e=>i[e.replace("-","")]).join(" ")}}]),ft.setClass(Bo),ft.setSVGClass(Bo);var e3=class{constructor(e){ge(this,"target",void 0),ge(this,"__mouseDownInPlace",!1),ge(this,"__dragStartFired",!1),ge(this,"__isDraggingOver",!1),ge(this,"__dragStartSelection",void 0),ge(this,"__dragImageDisposer",void 0),ge(this,"_dispose",void 0),this.target=e;let t=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{t.forEach(n=>n()),this._dispose=void 0}}isPointerOverSelection(e){let t=this.target,n=t.getSelectionStartFromPointer(e);return t.isEditing&&n>=t.selectionStart&&n<=t.selectionEnd&&t.selectionStart<t.selectionEnd}start(e){return this.__mouseDownInPlace=this.isPointerOverSelection(e)}isActive(){return this.__mouseDownInPlace}end(e){let t=this.isActive();return t&&!this.__dragStartFired&&(this.target.setCursorByClick(e),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,t}getDragStartSelection(){return this.__dragStartSelection}setDragImage(e,t){var n;let{selectionStart:r,selectionEnd:o}=t,s=this.target,a=s.canvas,l=new De(s.flipX?-1:1,s.flipY?-1:1),c=s._getCursorBoundaries(r),d=new De(c.left+c.leftOffset,c.top+c.topOffset).multiply(l).transform(s.calcTransformMatrix()),h=a.getScenePoint(e).subtract(d),p=s.getCanvasRetinaScaling(),g=s.getBoundingRect(),_=d.subtract(new De(g.left,g.top)),b=a.viewportTransform,C=_.add(h).transform(b,!0),y=s.backgroundColor,M=P3(s.styles);s.backgroundColor="";let O={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};s.setSelectionStyles(O,0,r),s.setSelectionStyles(O,o,s.text.length),s.dirty=!0;let A=s.toCanvasElement({enableRetinaScaling:a.enableRetinaScaling,viewportTransform:!0});s.backgroundColor=y,s.styles=M,s.dirty=!0,VC(A,{position:"fixed",left:"".concat(-A.width,"px"),border:Ro,width:"".concat(A.width/p,"px"),height:"".concat(A.height/p,"px")}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{A.remove()},wa(e.target||this.target.hiddenTextarea).body.appendChild(A),(n=e.dataTransfer)===null||n===void 0||n.setDragImage(A,C.x,C.y)}onDragStart(e){this.__dragStartFired=!0;let t=this.target,n=this.isActive();if(n&&e.dataTransfer){let r=this.__dragStartSelection={selectionStart:t.selectionStart,selectionEnd:t.selectionEnd},o=t._text.slice(r.selectionStart,r.selectionEnd).join(""),s=ve({text:t.text,value:o},r);e.dataTransfer.setData("text/plain",o),e.dataTransfer.setData("application/fabric",JSON.stringify({value:o,styles:t.getSelectionStyles(r.selectionStart,r.selectionEnd,!0)})),e.dataTransfer.effectAllowed="copyMove",this.setDragImage(e,s)}return t.abortCursorAnimation(),n}canDrop(e){if(this.target.editable&&!this.target.getActiveControl()&&!e.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){let t=this.target.getSelectionStartFromPointer(e),n=this.__dragStartSelection;return t<n.selectionStart||t>n.selectionEnd}return!0}return!1}targetCanDrop(e){return this.target.canDrop(e)}dragEnterHandler(e){let{e:t}=e,n=this.targetCanDrop(t);!this.__isDraggingOver&&n&&(this.__isDraggingOver=!0)}dragOverHandler(e){let{e:t}=e,n=this.targetCanDrop(t);!this.__isDraggingOver&&n?this.__isDraggingOver=!0:this.__isDraggingOver&&!n&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(t.preventDefault(),e.canDrop=!0,e.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(e){var t;let{e:n}=e,r=n.defaultPrevented;this.__isDraggingOver=!1,n.preventDefault();let o=(t=n.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain");if(o&&!r){let s=this.target,a=s.canvas,l=s.getSelectionStartFromPointer(n),{styles:c}=n.dataTransfer.types.includes("application/fabric")?JSON.parse(n.dataTransfer.getData("application/fabric")):{},d=o[Math.max(0,o.length-1)],h=0;if(this.__dragStartSelection){let p=this.__dragStartSelection.selectionStart,g=this.__dragStartSelection.selectionEnd;l>p&&l<=g?l=p:l>g&&(l-=g-p),s.removeChars(p,g),delete this.__dragStartSelection}s._reNewline.test(d)&&(s._reNewline.test(s._text[l])||l===s._text.length)&&(o=o.trimEnd()),e.didDrop=!0,e.dropTarget=s,s.insertChars(o,c,l),a.setActiveObject(s),s.enterEditing(n),s.selectionStart=Math.min(l+h,s._text.length),s.selectionEnd=Math.min(s.selectionStart+o.length,s._text.length),s.hiddenTextarea.value=s.text,s._updateTextarea(),s.hiddenTextarea.focus(),s.fire(wC,{index:l+h,action:"drop"}),a.fire("text:changed",{target:s}),a.contextTopDirty=!0,a.requestRenderAll()}}dragEndHandler(e){let{e:t}=e;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var n;let r=this.target,o=this.target.canvas,{selectionStart:s,selectionEnd:a}=this.__dragStartSelection,l=((n=t.dataTransfer)===null||n===void 0?void 0:n.dropEffect)||Ro;l===Ro?(r.selectionStart=s,r.selectionEnd=a,r._updateTextarea(),r.hiddenTextarea.focus()):(r.clearContextTop(),l==="move"&&(r.removeChars(s,a),r.selectionStart=r.selectionEnd=s,r.hiddenTextarea&&(r.hiddenTextarea.value=r.text),r._updateTextarea(),r.fire(wC,{index:s,action:"dragend"}),o.fire("text:changed",{target:r}),o.requestRenderAll()),r.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}},nN=/[ \n\.,;!\?\-]/,t3=class extends Bo{constructor(){super(...arguments),ge(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(e){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(e)}_animateCursor(e){let{toValue:t,duration:n,delay:r,onComplete:o}=e;return w3({startValue:this._currentCursorOpacity,endValue:t,duration:n,delay:r,onComplete:o,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:s=>{this._currentCursorOpacity=s,this.renderCursorOrSelection()}})}_tick(e){this._currentTickState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:Math.max(e||0,100),onComplete:this._onTickComplete})}_onTickComplete(){var e;(e=this._currentTickCompleteState)===null||e===void 0||e.abort(),this._currentTickCompleteState=this._animateCursor({toValue:1,duration:this.cursorDuration,onComplete:this._tick})}initDelayedCursor(e){this.abortCursorAnimation(),this._tick(e?0:this.cursorDelay)}abortCursorAnimation(){let e=!1;[this._currentTickState,this._currentTickCompleteState].forEach(t=>{t&&!t.isDone()&&(e=!0,t.abort())}),this._currentCursorOpacity=1,e&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some(e=>!e||e.isDone())&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}cmdAll(){this.selectAll(),this.renderCursorOrSelection()}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(e){let t=0,n=e-1;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)t++,n--;for(;/\S/.test(this._text[n])&&n>-1;)t++,n--;return e-t}findWordBoundaryRight(e){let t=0,n=e;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)t++,n++;for(;/\S/.test(this._text[n])&&n<this._text.length;)t++,n++;return e+t}findLineBoundaryLeft(e){let t=0,n=e-1;for(;!/\n/.test(this._text[n])&&n>-1;)t++,n--;return e-t}findLineBoundaryRight(e){let t=0,n=e;for(;!/\n/.test(this._text[n])&&n<this._text.length;)t++,n++;return e+t}searchWordBoundary(e,t){let n=this._text,r=e>0&&this._reSpace.test(n[e])&&(t===-1||!d3.test(n[e-1]))?e-1:e,o=n[r];for(;r>0&&r<n.length&&!nN.test(o);)r+=t,o=n[r];return t===-1&&nN.test(o)&&r++,r}selectWord(e){var t;e=(t=e)!==null&&t!==void 0?t:this.selectionStart;let n=this.searchWordBoundary(e,-1),r=Math.max(n,this.searchWordBoundary(e,1));this.selectionStart=n,this.selectionEnd=r,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(e){var t;e=(t=e)!==null&&t!==void 0?t:this.selectionStart;let n=this.findLineBoundaryLeft(e),r=this.findLineBoundaryRight(e);this.selectionStart=n,this.selectionEnd=r,this._fireSelectionChanged(),this._updateTextarea()}enterEditing(e){!this.isEditing&&this.editable&&(this.enterEditingImpl(),this.fire("editing:entered",e?{e}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e}),this.canvas.requestRenderAll()))}enterEditingImpl(){this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick()}updateSelectionOnMouseMove(e){if(this.getActiveControl())return;let t=this.hiddenTextarea;wa(t).activeElement!==t&&t.focus();let n=this.getSelectionStartFromPointer(e),r=this.selectionStart,o=this.selectionEnd;(n===this.__selectionStartOnMouseDown&&r!==o||r!==n&&o!==n)&&(n>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=n):(this.selectionStart=n,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===r&&this.selectionEnd===o||(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(e,t,n){let r=n.slice(0,e),o=this.graphemeSplit(r).length;if(e===t)return{selectionStart:o,selectionEnd:o};let s=n.slice(e,t);return{selectionStart:o,selectionEnd:o+this.graphemeSplit(s).length}}fromGraphemeToStringSelection(e,t,n){let r=n.slice(0,e).join("").length;return e===t?{selectionStart:r,selectionEnd:r}:{selectionStart:r,selectionEnd:r+n.slice(e,t).join("").length}}_updateTextarea(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){let e=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=e.selectionStart,this.hiddenTextarea.selectionEnd=e.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){if(!this.hiddenTextarea)return;this.cursorOffsetCache={};let e=this.hiddenTextarea;this.text=e.value,this.set("dirty",!0),this.initDimensions(),this.setCoords();let t=this.fromStringToGraphemeSelection(e.selectionStart,e.selectionEnd,e.value);this.selectionEnd=this.selectionStart=t.selectionEnd,this.inCompositionMode||(this.selectionStart=t.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){let e=this._calcTextareaPosition();this.hiddenTextarea.style.left=e.left,this.hiddenTextarea.style.top=e.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};let e=this.inCompositionMode?this.compositionStart:this.selectionStart,t=this._getCursorBoundaries(e),n=this.get2DCursorLocation(e),r=n.lineIndex,o=n.charIndex,s=this.getValueOfPropertyAt(r,o,"fontSize")*this.lineHeight,a=t.leftOffset,l=this.getCanvasRetinaScaling(),c=this.canvas.upperCanvasEl,d=c.width/l,h=c.height/l,p=d-s,g=h-s,_=new De(t.left+a,t.top+t.topOffset+s).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new De(c.clientWidth/d,c.clientHeight/h));return _.x<0&&(_.x=0),_.x>p&&(_.x=p),_.y<0&&(_.y=0),_.y>g&&(_.y=g),_.x+=this.canvas._offset.left,_.y+=this.canvas._offset.top,{left:"".concat(_.x,"px"),top:"".concat(_.y,"px"),fontSize:"".concat(s,"px"),charHeight:s}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}_exitEditing(){let e=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,e&&(e.blur&&e.blur(),e.parentNode&&e.parentNode.removeChild(e)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop()}exitEditingImpl(){this._exitEditing(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords())}exitEditing(){let e=this._textBeforeEdit!==this.text;return this.exitEditingImpl(),this.fire("editing:exited"),e&&this.fire(MC),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),e&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(let e in this.styles)this._textLines[e]||delete this.styles[e]}removeStyleFromTo(e,t){let{lineIndex:n,charIndex:r}=this.get2DCursorLocation(e,!0),{lineIndex:o,charIndex:s}=this.get2DCursorLocation(t,!0);if(n!==o){if(this.styles[n])for(let a=r;a<this._unwrappedTextLines[n].length;a++)delete this.styles[n][a];if(this.styles[o])for(let a=s;a<this._unwrappedTextLines[o].length;a++){let l=this.styles[o][a];l&&(this.styles[n]||(this.styles[n]={}),this.styles[n][r+a-s]=l)}for(let a=n+1;a<=o;a++)delete this.styles[a];this.shiftLineStyles(o,n-o)}else if(this.styles[n]){let a=this.styles[n],l=s-r;for(let c=r;c<s;c++)delete a[c];for(let c in this.styles[n]){let d=parseInt(c,10);d>=s&&(a[d-l]=a[c],delete a[c])}}}shiftLineStyles(e,t){let n=Object.assign({},this.styles);for(let r in this.styles){let o=parseInt(r,10);o>e&&(this.styles[o+t]=n[o],n[o-t]||delete this.styles[o])}}insertNewlineStyleObject(e,t,n,r){let o={},s=this._unwrappedTextLines[e].length,a=s===t,l=!1;n||(n=1),this.shiftLineStyles(e,n);let c=this.styles[e]?this.styles[e][t===0?t:t-1]:void 0;for(let h in this.styles[e]){let p=parseInt(h,10);p>=t&&(l=!0,o[p-t]=this.styles[e][h],a&&t===0||delete this.styles[e][h])}let d=!1;for(l&&!a&&(this.styles[e+n]=o,d=!0),(d||s>t)&&n--;n>0;)r&&r[n-1]?this.styles[e+n]={0:ve({},r[n-1])}:c?this.styles[e+n]={0:ve({},c)}:delete this.styles[e+n],n--;this._forceClearCache=!0}insertCharStyleObject(e,t,n,r){this.styles||(this.styles={});let o=this.styles[e],s=o?ve({},o):{};n||(n=1);for(let l in s){let c=parseInt(l,10);c>=t&&(o[c+n]=s[c],s[c-n]||delete o[c])}if(this._forceClearCache=!0,r){for(;n--;)Object.keys(r[n]).length&&(this.styles[e]||(this.styles[e]={}),this.styles[e][t+n]=ve({},r[n]));return}if(!o)return;let a=o[t?t-1:1];for(;a&&n--;)this.styles[e][t+n]=ve({},a)}insertNewStyleBlock(e,t,n){let r=this.get2DCursorLocation(t,!0),o=[0],s,a=0;for(let l=0;l<e.length;l++)e[l]===`
`?(a++,o[a]=0):o[a]++;for(o[0]>0&&(this.insertCharStyleObject(r.lineIndex,r.charIndex,o[0],n),n=n&&n.slice(o[0]+1)),a&&this.insertNewlineStyleObject(r.lineIndex,r.charIndex+o[0],a),s=1;s<a;s++)o[s]>0?this.insertCharStyleObject(r.lineIndex+s,0,o[s],n):n&&this.styles[r.lineIndex+s]&&n[0]&&(this.styles[r.lineIndex+s][0]=n[0]),n=n&&n.slice(o[s]+1);o[s]>0&&this.insertCharStyleObject(r.lineIndex+s,0,o[s],n)}removeChars(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e+1;this.removeStyleFromTo(e,t),this._text.splice(e,t-e),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:n;r>n&&this.removeStyleFromTo(n,r);let o=this.graphemeSplit(e);this.insertNewStyleBlock(o,n,t),this._text=[...this._text.slice(0,n),...o,...this._text.slice(r)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(e,t,n){n<=e?(t===e?this._selectionDirection=Nn:this._selectionDirection===$i&&(this._selectionDirection=Nn,this.selectionEnd=e),this.selectionStart=n):n>e&&n<t?this._selectionDirection===$i?this.selectionEnd=n:this.selectionStart=n:(t===e?this._selectionDirection=$i:this._selectionDirection===Nn&&(this._selectionDirection=$i,this.selectionStart=t),this.selectionEnd=n)}},n3=class extends t3{initHiddenTextarea(){let e=this.canvas&&wa(this.canvas.getElement())||Uf(),t=e.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off"}).map(s=>{let[a,l]=s;return t.setAttribute(a,l)});let{top:n,left:r,fontSize:o}=this._calcTextareaPosition();t.style.cssText="position: absolute; top: ".concat(n,"; left: ").concat(r,"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ").concat(o,";"),(this.hiddenTextareaContainer||e.body).appendChild(t),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd"}).map(s=>{let[a,l]=s;return t.addEventListener(a,this[l].bind(this))}),this.hiddenTextarea=t}blur(){this.abortCursorAnimation()}onKeyDown(e){if(!this.isEditing)return;let t=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(e.keyCode in t)this[t[e.keyCode]](e);else{if(!(e.keyCode in this.ctrlKeysMapDown)||!e.ctrlKey&&!e.metaKey)return;this[this.ctrlKeysMapDown[e.keyCode]](e)}e.stopImmediatePropagation(),e.preventDefault(),e.keyCode>=33&&e.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(e){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:e.keyCode in this.ctrlKeysMapUp&&(e.ctrlKey||e.metaKey)&&(this[this.ctrlKeysMapUp[e.keyCode]](e),e.stopImmediatePropagation(),e.preventDefault(),this.canvas&&this.canvas.requestRenderAll())}onInput(e){let t=this.fromPaste,{value:n,selectionStart:r,selectionEnd:o}=this.hiddenTextarea;if(this.fromPaste=!1,e&&e.stopPropagation(),!this.isEditing)return;let s=()=>{this.updateFromTextArea(),this.fire(wC),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(this.hiddenTextarea.value==="")return this.styles={},void s();let a=this._splitTextIntoLines(n).graphemeText,l=this._text.length,c=a.length,d=this.selectionStart,h=this.selectionEnd,p=d!==h,g,_,b,C,y=c-l,M=this.fromStringToGraphemeSelection(r,o,n),O=d>M.selectionStart;p?(_=this._text.slice(d,h),y+=h-d):c<l&&(_=O?this._text.slice(h+y,h):this._text.slice(d,d-y));let A=a.slice(M.selectionEnd-y,M.selectionEnd);if(_&&_.length&&(A.length&&(g=this.getSelectionStyles(d,d+1,!1),g=A.map(()=>g[0])),p?(b=d,C=h):O?(b=h-_.length,C=h):(b=h,C=h+_.length),this.removeStyleFromTo(b,C)),A.length){let{copyPasteData:D}=vl();t&&A.join("")===D.copiedText&&!Fn.disableStyleCopyPaste&&(g=D.copiedTextStyle),this.insertNewStyleBlock(A,d,g)}s()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(e){let{target:t}=e,{selectionStart:n,selectionEnd:r}=t;this.compositionStart=n,this.compositionEnd=r,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;let{copyPasteData:e}=vl();e.copiedText=this.getSelectedText(),Fn.disableStyleCopyPaste?e.copiedTextStyle=void 0:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(e,t){let n,r=this._getLineLeftOffset(e);return t>0&&(n=this.__charBounds[e][t-1],r+=n.left+n.width),r}getDownCursorOffset(e,t){let n=this._getSelectionForOffset(e,t),r=this.get2DCursorLocation(n),o=r.lineIndex;if(o===this._textLines.length-1||e.metaKey||e.keyCode===34)return this._text.length-n;let s=r.charIndex,a=this._getWidthBeforeCursor(o,s),l=this._getIndexOnLine(o+1,a);return this._textLines[o].slice(s).length+l+1+this.missingNewlineOffset(o)}_getSelectionForOffset(e,t){return e.shiftKey&&this.selectionStart!==this.selectionEnd&&t?this.selectionEnd:this.selectionStart}getUpCursorOffset(e,t){let n=this._getSelectionForOffset(e,t),r=this.get2DCursorLocation(n),o=r.lineIndex;if(o===0||e.metaKey||e.keyCode===33)return-n;let s=r.charIndex,a=this._getWidthBeforeCursor(o,s),l=this._getIndexOnLine(o-1,a),c=this._textLines[o].slice(0,s),d=this.missingNewlineOffset(o-1);return-this._textLines[o-1].length+l-c.length+(1-d)}_getIndexOnLine(e,t){let n=this._textLines[e],r,o,s=this._getLineLeftOffset(e),a=0;for(let l=0,c=n.length;l<c;l++)if(r=this.__charBounds[e][l].width,s+=r,s>t){o=!0;let d=s-r,h=s,p=Math.abs(d-t);a=Math.abs(h-t)<p?l:l-1;break}return o||(a=n.length-1),a}moveCursorDown(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",e)}moveCursorUp(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",e)}_moveCursorUpOrDown(e,t){let n=this["get".concat(e,"CursorOffset")](t,this._selectionDirection===$i);if(t.shiftKey?this.moveCursorWithShift(n):this.moveCursorWithoutShift(n),n!==0){let r=this.text.length;this.selectionStart=p0(0,this.selectionStart,r),this.selectionEnd=p0(0,this.selectionEnd,r),this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(e){let t=this._selectionDirection===Nn?this.selectionStart+e:this.selectionEnd+e;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,t),e!==0}moveCursorWithoutShift(e){return e<0?(this.selectionStart+=e,this.selectionEnd=this.selectionStart):(this.selectionEnd+=e,this.selectionStart=this.selectionEnd),e!==0}moveCursorLeft(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",e)}_move(e,t,n){let r;if(e.altKey)r=this["findWordBoundary".concat(n)](this[t]);else{if(!e.metaKey&&e.keyCode!==35&&e.keyCode!==36)return this[t]+=n==="Left"?-1:1,!0;r=this["findLineBoundary".concat(n)](this[t])}return r!==void 0&&this[t]!==r&&(this[t]=r,!0)}_moveLeft(e,t){return this._move(e,t,"Left")}_moveRight(e,t){return this._move(e,t,"Right")}moveCursorLeftWithoutShift(e){let t=!0;return this._selectionDirection=Nn,this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(t=this._moveLeft(e,"selectionStart")),this.selectionEnd=this.selectionStart,t}moveCursorLeftWithShift(e){return this._selectionDirection===$i&&this.selectionStart!==this.selectionEnd?this._moveLeft(e,"selectionEnd"):this.selectionStart!==0?(this._selectionDirection=Nn,this._moveLeft(e,"selectionStart")):void 0}moveCursorRight(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",e)}_moveCursorLeftOrRight(e,t){let n="moveCursor".concat(e).concat(t.shiftKey?"WithShift":"WithoutShift");this._currentCursorOpacity=1,this[n](t)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(e){return this._selectionDirection===Nn&&this.selectionStart!==this.selectionEnd?this._moveRight(e,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection=$i,this._moveRight(e,"selectionEnd")):void 0}moveCursorRightWithoutShift(e){let t=!0;return this._selectionDirection=$i,this.selectionStart===this.selectionEnd?(t=this._moveRight(e,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,t}},iN=i=>!!i.button,i3=class extends n3{constructor(){super(...arguments),ge(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("mousetripleclick",this.tripleClickHandler),this.draggableTextDelegate=new e3(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(e){return this.draggableTextDelegate.onDragStart(e)}canDrop(e){return this.draggableTextDelegate.canDrop(e)}doubleClickHandler(e){this.isEditing&&(this.selectWord(this.getSelectionStartFromPointer(e.e)),this.renderCursorOrSelection())}tripleClickHandler(e){this.isEditing&&(this.selectLine(this.getSelectionStartFromPointer(e.e)),this.renderCursorOrSelection())}_mouseDownHandler(e){let{e:t,alreadySelected:n}=e;this.canvas&&this.editable&&!iN(t)&&!this.getActiveControl()&&(this.draggableTextDelegate.start(t)||(this.canvas.textEditingManager.register(this),n&&(this.inCompositionMode=!1,this.setCursorByClick(t)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()),this.selected||(this.selected=n||this.isEditing)))}mouseUpHandler(e){let{e:t,transform:n}=e,r=this.draggableTextDelegate.end(t);if(this.canvas){this.canvas.textEditingManager.unregister(this);let o=this.canvas._activeObject;if(o&&o!==this)return}!this.editable||this.group&&!this.group.interactive||n&&n.actionPerformed||iN(t)||r||this.selected&&!this.getActiveControl()&&(this.enterEditing(t),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection())}setCursorByClick(e){let t=this.getSelectionStartFromPointer(e),n=this.selectionStart,r=this.selectionEnd;e.shiftKey?this.setSelectionStartEndWithShift(n,r,t):(this.selectionStart=t,this.selectionEnd=t),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(e){let t=this.canvas.getScenePoint(e).transform(gs(this.calcTransformMatrix())).add(new De(-this._getLeftOffset(),-this._getTopOffset())),n=0,r=0,o=0;for(let c=0;c<this._textLines.length&&n<=t.y;c++)n+=this.getHeightOfLine(c),o=c,c>0&&(r+=this._textLines[c-1].length+this.missingNewlineOffset(c-1));let s=Math.abs(this._getLineLeftOffset(o)),a=this._textLines[o].length,l=this.__charBounds[o];for(let c=0;c<a;c++){let d=s+l[c].kernedWidth;if(t.x<=d){Math.abs(t.x-d)<=Math.abs(t.x-s)&&r++;break}s=d,r++}return Math.min(this.flipX?a-r:r,this._text.length)}},fC="moveCursorUp",gC="moveCursorDown",pC="moveCursorLeft",mC="moveCursorRight",xC="exitEditing",rN=(i,e)=>{let t=e.getRetinaScaling();i.setTransform(t,0,0,t,0,0);let n=e.viewportTransform;i.transform(n[0],n[1],n[2],n[3],n[4],n[5])},pre=ve({selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,keysMap:{9:xC,27:xC,33:fC,34:gC,35:mC,36:pC,37:pC,38:fC,39:mC,40:gC},keysMapRtl:{9:xC,27:xC,33:fC,34:gC,35:pC,36:mC,37:mC,38:fC,39:pC,40:gC},ctrlKeysMapDown:{65:"cmdAll"},ctrlKeysMapUp:{67:"copy",88:"cut"}},{_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1}),Md=class i extends i3{static getDefaults(){return ve(ve({},super.getDefaults()),i.ownDefaults)}get type(){let e=super.type;return e==="itext"?"i-text":e}constructor(e,t){super(e,ve(ve({},i.ownDefaults),t)),this.initBehavior()}_set(e,t){return this.isEditing&&this._savedProps&&e in this._savedProps?(this._savedProps[e]=t,this):(e==="canvas"&&(this.canvas instanceof kd&&this.canvas.textEditingManager.remove(this),t instanceof kd&&t.textEditingManager.add(this)),super._set(e,t))}setSelectionStart(e){e=Math.max(e,0),this._updateAndFire("selectionStart",e)}setSelectionEnd(e){e=Math.min(e,this.text.length),this._updateAndFire("selectionEnd",e)}_updateAndFire(e,t){this[e]!==t&&(this._fireSelectionChanged(),this[e]=t),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart||0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionEnd,n=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(e,t,n)}setSelectionStyles(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionStart||0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectionEnd;return super.setSelectionStyles(e,t,n)}get2DCursorLocation(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(e,t)}render(e){super.render(e),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(e){let t=this.isEditing;this.isEditing=!1;let n=super.toCanvasElement(e);return this.isEditing=t,n}renderCursorOrSelection(){if(!this.isEditing||!this.canvas)return;let e=this.clearContextTop(!0);if(!e)return;let t=this._getCursorBoundaries(),n=this.findAncestorsWithClipPath(),r=n.length>0,o,s=e;if(r){o=ms(e.canvas),s=o.getContext("2d"),rN(s,this.canvas);let a=this.calcTransformMatrix();s.transform(a[0],a[1],a[2],a[3],a[4],a[5])}if(this.selectionStart!==this.selectionEnd||this.inCompositionMode?this.renderSelection(s,t):this.renderCursor(s,t),r)for(let a of n){let l=a.clipPath,c=ms(e.canvas),d=c.getContext("2d");if(rN(d,this.canvas),!l.absolutePositioned){let h=a.calcTransformMatrix();d.transform(h[0],h[1],h[2],h[3],h[4],h[5])}l.transform(d),l.drawObject(d,!0,{}),this.drawClipPathOnCache(s,l,c)}r&&(e.setTransform(1,0,0,1,0,0),e.drawImage(o,0,0)),this.canvas.contextTopDirty=!0,e.restore()}findAncestorsWithClipPath(){let e=[],t=this;for(;t;)t.clipPath&&e.push(t),t=t.parent;return e}_getCursorBoundaries(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0,n=this._getLeftOffset(),r=this._getTopOffset(),o=this._getCursorBoundariesOffsets(e,t);return{left:n,top:r,leftOffset:o.left,topOffset:o.top}}_getCursorBoundariesOffsets(e,t){return t?this.__getCursorBoundariesOffsets(e):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(e)}__getCursorBoundariesOffsets(e){let t=0,n=0,{charIndex:r,lineIndex:o}=this.get2DCursorLocation(e);for(let c=0;c<o;c++)t+=this.getHeightOfLine(c);let s=this._getLineLeftOffset(o),a=this.__charBounds[o][r];a&&(n=a.left),this.charSpacing!==0&&r===this._textLines[o].length&&(n-=this._getWidthOfCharSpacing());let l={top:t,left:s+(n>0?n:0)};return this.direction==="rtl"&&(this.textAlign===$i||this.textAlign===ml||this.textAlign===Gm?l.left*=-1:this.textAlign===Nn||this.textAlign===HC?l.left=s-(n>0?n:0):this.textAlign!==Qt&&this.textAlign!==$m||(l.left=s-(n>0?n:0))),l}renderCursorAt(e){this._renderCursor(this.canvas.contextTop,this._getCursorBoundaries(e,!0),e)}renderCursor(e,t){this._renderCursor(e,t,this.selectionStart)}getCursorRenderingData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getCursorBoundaries(e),n=this.get2DCursorLocation(e),r=n.lineIndex,o=n.charIndex>0?n.charIndex-1:0,s=this.getValueOfPropertyAt(r,o,"fontSize"),a=this.getObjectScaling().x*this.canvas.getZoom(),l=this.cursorWidth/a,c=this.getValueOfPropertyAt(r,o,"deltaY"),d=t.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(r)/this.lineHeight-s*(1-this._fontSizeFraction);return{color:this.cursorColor||this.getValueOfPropertyAt(r,o,"fill"),opacity:this._currentCursorOpacity,left:t.left+t.leftOffset-l/2,top:d+t.top+c,width:l,height:s}}_renderCursor(e,t,n){let{color:r,opacity:o,left:s,top:a,width:l,height:c}=this.getCursorRenderingData(n,t);e.fillStyle=r,e.globalAlpha=o,e.fillRect(s,a,l,c)}renderSelection(e,t){let n={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(e,n,t)}renderDragSourceEffect(){let e=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,e,this._getCursorBoundaries(e.selectionStart,!0))}renderDropTargetEffect(e){let t=this.getSelectionStartFromPointer(e);this.renderCursorAt(t)}_renderSelection(e,t,n){let r=t.selectionStart,o=t.selectionEnd,s=this.textAlign.includes(ml),a=this.get2DCursorLocation(r),l=this.get2DCursorLocation(o),c=a.lineIndex,d=l.lineIndex,h=a.charIndex<0?0:a.charIndex,p=l.charIndex<0?0:l.charIndex;for(let g=c;g<=d;g++){let _=this._getLineLeftOffset(g)||0,b=this.getHeightOfLine(g),C=0,y=0,M=0;if(g===c&&(y=this.__charBounds[c][h].left),g>=c&&g<d)M=s&&!this.isEndOfWrapping(g)?this.width:this.getLineWidth(g)||5;else if(g===d)if(p===0)M=this.__charBounds[d][p].left;else{let B=this._getWidthOfCharSpacing();M=this.__charBounds[d][p-1].left+this.__charBounds[d][p-1].width-B}C=b,(this.lineHeight<1||g===d&&this.lineHeight>1)&&(b/=this.lineHeight);let O=n.left+_+y,A=b,D=0,N=M-y;this.inCompositionMode?(e.fillStyle=this.compositionColor||"black",A=1,D=b):e.fillStyle=this.selectionColor,this.direction==="rtl"&&(this.textAlign===$i||this.textAlign===ml||this.textAlign===Gm?O=this.width-O-N:this.textAlign===Nn||this.textAlign===HC?O=n.left+_-M:this.textAlign!==Qt&&this.textAlign!==$m||(O=n.left+_-M)),e.fillRect(O,n.top+n.topOffset+D,N,A),n.topOffset+=C}}getCurrentCharFontSize(){let e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fontSize")}getCurrentCharColor(){let e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,_r)}_getCurrentCharIndex(){let e=this.get2DCursorLocation(this.selectionStart,!0),t=e.charIndex>0?e.charIndex-1:0;return{l:e.lineIndex,c:t}}dispose(){this.exitEditingImpl(),this.draggableTextDelegate.dispose(),super.dispose()}};ge(Md,"ownDefaults",pre),ge(Md,"type","IText"),ft.setClass(Md),ft.setClass(Md,"i-text");var If=class i extends Md{static getDefaults(){return ve(ve({},super.getDefaults()),i.ownDefaults)}constructor(e,t){super(e,ve(ve({},i.ownDefaults),t))}static createControls(){return{controls:KN()}}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(ml)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(e){let t=0,n=0,r=0,o={};for(let s=0;s<e.graphemeLines.length;s++)e.graphemeText[r]===`
`&&s>0?(n=0,r++,t++):!this.splitByGrapheme&&this._reSpaceAndTab.test(e.graphemeText[r])&&s>0&&(n++,r++),o[s]={line:t,offset:n},r+=e.graphemeLines[s].length,n+=e.graphemeLines[s].length;return o}styleHas(e,t){if(this._styleMap&&!this.isWrapping){let n=this._styleMap[t];n&&(t=n.line)}return super.styleHas(e,t)}isEmptyStyles(e){if(!this.styles)return!0;let t,n=0,r=e+1,o=!1,s=this._styleMap[e],a=this._styleMap[e+1];s&&(e=s.line,n=s.offset),a&&(r=a.line,o=r===e,t=a.offset);let l=e===void 0?this.styles:{line:this.styles[e]};for(let c in l)for(let d in l[c]){let h=parseInt(d,10);if(h>=n&&(!o||h<t))for(let p in l[c][d])return!1}return!0}_getStyleDeclaration(e,t){if(this._styleMap&&!this.isWrapping){let n=this._styleMap[e];if(!n)return{};e=n.line,t=n.offset+t}return super._getStyleDeclaration(e,t)}_setStyleDeclaration(e,t,n){let r=this._styleMap[e];super._setStyleDeclaration(r.line,r.offset+t,n)}_deleteStyleDeclaration(e,t){let n=this._styleMap[e];super._deleteStyleDeclaration(n.line,n.offset+t)}_getLineStyle(e){let t=this._styleMap[e];return!!this.styles[t.line]}_setLineStyle(e){let t=this._styleMap[e];super._setLineStyle(t.line)}_wrapText(e,t){this.isWrapping=!0;let n=this.getGraphemeDataForRender(e),r=[];for(let o=0;o<n.wordsData.length;o++)r.push(...this._wrapLine(o,t,n));return this.isWrapping=!1,r}getGraphemeDataForRender(e){let t=this.splitByGrapheme,n=t?"":" ",r=0;return{wordsData:e.map((o,s)=>{let a=0,l=t?this.graphemeSplit(o):this.wordSplit(o);return l.length===0?[{word:[],width:0}]:l.map(c=>{let d=t?[c]:this.graphemeSplit(c),h=this._measureWord(d,s,a);return r=Math.max(h,r),a+=d.length+n.length,{word:d,width:h}})}),largestWordWidth:r}}_measureWord(e,t){let n,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=0;for(let s=0,a=e.length;s<a;s++)o+=this._getGraphemeBox(e[s],t,s+r,n,!0).kernedWidth,n=e[s];return o}wordSplit(e){return e.split(this._wordJoiners)}_wrapLine(e,t,n){let{largestWordWidth:r,wordsData:o}=n,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,a=this._getWidthOfCharSpacing(),l=this.splitByGrapheme,c=[],d=l?"":" ",h=0,p=[],g=0,_=0,b=!0;t-=s;let C=Math.max(t,r,this.dynamicMinWidth),y=o[e],M;for(g=0,M=0;M<y.length;M++){let{word:O,width:A}=y[M];g+=O.length,h+=_+A-a,h>C&&!b?(c.push(p),p=[],h=A,b=!0):h+=a,b||l||p.push(d),p=p.concat(O),_=l?0:this._measureWord([d],e,g),g++,b=!1}return M&&c.push(p),r+s>this.dynamicMinWidth&&(this.dynamicMinWidth=r-a+s),c}isEndOfWrapping(e){return!this._styleMap[e+1]||this._styleMap[e+1].line!==this._styleMap[e].line}missingNewlineOffset(e,t){return this.splitByGrapheme&&!t?this.isEndOfWrapping(e)?1:0:1}_splitTextIntoLines(e){let t=super._splitTextIntoLines(e),n=this._wrapText(t.lines,this.width),r=new Array(n.length);for(let o=0;o<n.length;o++)r[o]=n[o].join("");return t.lines=r,t.graphemeLines=n,t}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){let e=new Map;for(let t in this._styleMap){let n=parseInt(t,10);if(this._textLines[n]){let r=this._styleMap[t].line;e.set("".concat(r),!0)}}for(let t in this.styles)e.has(t)||delete this.styles[t]}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",...e])}};ge(If,"type","Textbox"),ge(If,"textLayoutProperties",[...Md.textLayoutProperties,"width"]),ge(If,"ownDefaults",{minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1}),ft.setClass(If);var $C=class extends Vf{shouldPerformLayout(e){return!!e.target.clipPath&&super.shouldPerformLayout(e)}shouldLayoutClipPath(){return!1}calcLayoutResult(e,t){let{target:n}=e,{clipPath:r,group:o}=n;if(!r||!this.shouldPerformLayout(e))return;let{width:s,height:a}=_l(nL(n,r)),l=new De(s,a);if(r.absolutePositioned)return{center:mc(r.getRelativeCenterPoint(),void 0,o?o.calcTransformMatrix():void 0),size:l};{let c=r.getRelativeCenterPoint().transform(n.calcOwnMatrix(),!0);if(this.shouldPerformLayout(e)){let{center:d=new De,correction:h=new De}=this.calcBoundingBox(t,e)||{};return{center:d.add(c),correction:h.subtract(c),size:l}}return{center:n.getRelativeCenterPoint().add(c),size:l}}}};ge($C,"type","clip-path"),ft.setClass($C);var WC=class extends Vf{getInitialSize(e,t){let{target:n}=e,{size:r}=t;return new De(n.width||r.x,n.height||r.y)}};ge(WC,"type","fixed"),ft.setClass(WC);var r3=class extends m0{subscribeTargets(e){let t=e.target;e.targets.reduce((n,r)=>(r.parent&&n.add(r.parent),n),new Set).forEach(n=>{n.layoutManager.subscribeTargets({target:n,targets:[t]})})}unsubscribeTargets(e){let t=e.target,n=t.getObjects();e.targets.reduce((r,o)=>(o.parent&&r.add(o.parent),r),new Set).forEach(r=>{!n.some(o=>o.parent===r)&&r.layoutManager.unsubscribeTargets({target:r,targets:[t]})})}},Tf=class i extends jo{static getDefaults(){return ve(ve({},super.getDefaults()),i.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,i.ownDefaults),this.setOptions(t);let{left:n,top:r,layoutManager:o}=t;this.groupInit(e,{left:n,top:r,layoutManager:o??new r3})}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.multiSelectionStacking==="selection-order"?this.add(...t):t.forEach(r=>{let o=this._objects.findIndex(a=>a.isInFrontOf(r)),s=o===-1?this.size():o;this.insertAt(s,r)})}canEnterGroup(e){return this.getObjects().some(t=>t.isDescendantOf(e)||e.isDescendantOf(t))?(Pd("error","ActiveSelection: circular object trees are not supported, this call has no effect"),!1):super.canEnterGroup(e)}enterGroup(e,t){e.parent&&e.parent===e.group?e.parent._exitGroup(e):e.group&&e.parent!==e.group&&e.group.remove(e),this._enterGroup(e,t)}exitGroup(e,t){this._exitGroup(e,t),e.parent&&e.parent._enterGroup(e,!0)}_onAfterObjectsChange(e,t){super._onAfterObjectsChange(e,t);let n=new Set;t.forEach(r=>{let{parent:o}=r;o&&n.add(o)}),e===S3?n.forEach(r=>{r._onAfterObjectsChange(RC,t)}):n.forEach(r=>{r._set("dirty",!0)})}onDeselect(){return this.removeAll(),!1}toString(){return"#<ActiveSelection: (".concat(this.complexity(),")>")}shouldCache(){return!1}isOnACache(){return!1}_renderControls(e,t,n){e.save(),e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;let r=ve(ve({hasControls:!1},n),{},{forActiveSelection:!0});for(let o=0;o<this._objects.length;o++)this._objects[o]._renderControls(e,r);super._renderControls(e,t),e.restore()}};ge(Tf,"type","ActiveSelection"),ge(Tf,"ownDefaults",{multiSelectionStacking:"canvas-stacking"}),ft.setClass(Tf),ft.setClass(Tf,"activeSelection");var o3=class{constructor(){ge(this,"resources",{})}applyFilters(e,t,n,r,o){let s=o.getContext("2d");if(!s)return;s.drawImage(t,0,0,n,r);let a={sourceWidth:n,sourceHeight:r,imageData:s.getImageData(0,0,n,r),originalEl:t,originalImageData:s.getImageData(0,0,n,r),canvasEl:o,ctx:s,filterBackend:this};e.forEach(c=>{c.applyTo(a)});let{imageData:l}=a;return l.width===n&&l.height===r||(o.width=l.width,o.height=l.height),s.putImageData(l,0,0),a}},qC=class{constructor(){let{tileSize:e=Fn.textureSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ge(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),ge(this,"resources",{}),this.tileSize=e,this.setupGLContext(e,e),this.captureGPUInfo()}setupGLContext(e,t){this.dispose(),this.createWebGLCanvas(e,t)}createWebGLCanvas(e,t){let n=ms({width:e,height:t}),r=n.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1});r&&(r.clearColor(0,0,0,0),this.canvas=n,this.gl=r)}applyFilters(e,t,n,r,o,s){let a=this.gl,l=o.getContext("2d");if(!a||!l)return;let c;s&&(c=this.getCachedTexture(s,t));let d={originalWidth:t.width||t.naturalWidth||0,originalHeight:t.height||t.naturalHeight||0,sourceWidth:n,sourceHeight:r,destinationWidth:n,destinationHeight:r,context:a,sourceTexture:this.createTexture(a,n,r,c?void 0:t),targetTexture:this.createTexture(a,n,r),originalTexture:c||this.createTexture(a,n,r,c?void 0:t),passes:e.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:o},h=a.createFramebuffer();return a.bindFramebuffer(a.FRAMEBUFFER,h),e.forEach(p=>{p&&p.applyTo(d)}),function(p){let g=p.targetCanvas,_=g.width,b=g.height,C=p.destinationWidth,y=p.destinationHeight;_===C&&b===y||(g.width=C,g.height=y)}(d),this.copyGLTo2D(a,d),a.bindTexture(a.TEXTURE_2D,null),a.deleteTexture(d.sourceTexture),a.deleteTexture(d.targetTexture),a.deleteFramebuffer(h),l.setTransform(1,0,0,1,0,0),d}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(e,t,n,r,o){let{NEAREST:s,TEXTURE_2D:a,RGBA:l,UNSIGNED_BYTE:c,CLAMP_TO_EDGE:d,TEXTURE_MAG_FILTER:h,TEXTURE_MIN_FILTER:p,TEXTURE_WRAP_S:g,TEXTURE_WRAP_T:_}=e,b=e.createTexture();return e.bindTexture(a,b),e.texParameteri(a,h,o||s),e.texParameteri(a,p,o||s),e.texParameteri(a,g,d),e.texParameteri(a,_,d),r?e.texImage2D(a,0,l,l,c,r):e.texImage2D(a,0,l,t,n,0,l,c,null),b}getCachedTexture(e,t,n){let{textureCache:r}=this;if(r[e])return r[e];{let o=this.createTexture(this.gl,t.width,t.height,t,n);return o&&(r[e]=o),o}}evictCachesForKey(e){this.textureCache[e]&&(this.gl.deleteTexture(this.textureCache[e]),delete this.textureCache[e])}copyGLTo2D(e,t){let n=e.canvas,r=t.targetCanvas,o=r.getContext("2d");if(!o)return;o.translate(0,r.height),o.scale(1,-1);let s=n.height-r.height;o.drawImage(n,0,s,r.width,r.height,0,0,r.width,r.height)}copyGLTo2DPutImageData(e,t){let n=t.targetCanvas.getContext("2d"),r=t.destinationWidth,o=t.destinationHeight,s=r*o*4;if(!n)return;let a=new Uint8Array(this.imageBuffer,0,s),l=new Uint8ClampedArray(this.imageBuffer,0,s);e.readPixels(0,0,r,o,e.RGBA,e.UNSIGNED_BYTE,a);let c=new ImageData(l,r,o);n.putImageData(c,0,0)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;let e=this.gl,t={renderer:"",vendor:""};if(!e)return t;let n=e.getExtension("WEBGL_debug_renderer_info");if(n){let r=e.getParameter(n.UNMASKED_RENDERER_WEBGL),o=e.getParameter(n.UNMASKED_VENDOR_WEBGL);r&&(t.renderer=r.toLowerCase()),o&&(t.vendor=o.toLowerCase())}return this.gpuInfo=t,t}},SS;function mre(){let{WebGLProbe:i}=vl();return i.queryWebGL(js()),Fn.enableGLFiltering&&i.isSupported(Fn.textureSize)?new qC({tileSize:Fn.textureSize}):new o3}function kS(){return!SS&&(!(arguments.length>0&&arguments[0]!==void 0)||arguments[0])&&(SS=mre()),SS}var xre=["filters","resizeFilter","src","crossOrigin","type"],PL=["cropX","cropY"],ao=class i extends Pr{static getDefaults(){return ve(ve({},super.getDefaults()),i.ownDefaults)}constructor(e,t){super(),ge(this,"_lastScaleX",1),ge(this,"_lastScaleY",1),ge(this,"_filterScalingX",1),ge(this,"_filterScalingY",1),this.filters=[],Object.assign(this,i.ownDefaults),this.setOptions(t),this.cacheKey="texture".concat(Sd()),this.setElement(typeof e=="string"?(this.canvas&&wa(this.canvas.getElement())||Uf()).getElementById(e):e,t)}getElement(){return this._element}setElement(e){var t;let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._element=e,this._originalElement=e,this._setWidthHeight(n),(t=e.classList)===null||t===void 0||t.add(i.CSS_CANVAS),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(e){let t=kS(!1);t instanceof qC&&t.evictCachesForKey(e)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(e=>{let t=this[e];t&&vl().dispose(t),this[e]=void 0})}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){let e=this.getElement();return e?{width:e.naturalWidth||e.width,height:e.naturalHeight||e.height}:{width:0,height:0}}_stroke(e){if(!this.stroke||this.strokeWidth===0)return;let t=this.width/2,n=this.height/2;e.beginPath(),e.moveTo(-t,-n),e.lineTo(t,-n),e.lineTo(t,n),e.lineTo(-t,n),e.lineTo(-t,-n),e.closePath()}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=[];return this.filters.forEach(n=>{n&&t.push(n.toObject())}),ve(ve({},super.toObject([...PL,...e])),{},{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:t},this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{})}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){let e=[],t=this._element,n=-this.width/2,r=-this.height/2,o=[],s=[],a="",l="";if(!t)return[];if(this.hasCrop()){let c=Sd();o.push('<clipPath id="imageCrop_'+c+`">
`,'	<rect x="'+n+'" y="'+r+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),a=' clip-path="url(#imageCrop_'+c+')" '}if(this.imageSmoothing||(l=' image-rendering="optimizeSpeed"'),e.push("	<image ","COMMON_PARTS",'xlink:href="'.concat(this.getSvgSrc(!0),'" x="').concat(n-this.cropX,'" y="').concat(r-this.cropY,'" width="').concat(t.width||t.naturalWidth,'" height="').concat(t.height||t.naturalHeight,'"').concat(l).concat(a,`></image>
`)),this.stroke||this.strokeDashArray){let c=this.fill;this.fill=null,s=['	<rect x="'.concat(n,'" y="').concat(r,'" width="').concat(this.width,'" height="').concat(this.height,'" style="').concat(this.getSvgStyles(),`" />
`)],this.fill=c}return o=this.paintFirst!==_r?o.concat(s,e):o.concat(e,s),o}getSrc(e){let t=e?this._element:this._originalElement;return t?t.toDataURL?t.toDataURL():this.srcFromAttribute?t.getAttribute("src")||"":t.src:this.src||""}getSvgSrc(e){return this.getSrc(e)}setSrc(e){let{crossOrigin:t,signal:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Um(e,{crossOrigin:t,signal:n}).then(r=>{t!==void 0&&this.set({crossOrigin:t}),this.setElement(r)})}toString(){return'#<Image: { src: "'.concat(this.getSrc(),'" }>')}applyResizeFilters(){let e=this.resizeFilter,t=this.minimumScaleTrigger,n=this.getTotalObjectScaling(),r=n.x,o=n.y,s=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!e||r>t&&o>t)return this._element=s,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=r,void(this._lastScaleY=o);let a=ms(s),{width:l,height:c}=s;this._element=a,this._lastScaleX=e.scaleX=r,this._lastScaleY=e.scaleY=o,kS().applyFilters([e],s,l,c,this._element),this._filterScalingX=a.width/this._originalElement.width,this._filterScalingY=a.height/this._originalElement.height}applyFilters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.filters||[];if(e=e.filter(o=>o&&!o.isNeutralState()),this.set("dirty",!0),this.removeTexture("".concat(this.cacheKey,"_filtered")),e.length===0)return this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,void(this._filterScalingY=1);let t=this._originalElement,n=t.naturalWidth||t.width,r=t.naturalHeight||t.height;if(this._element===this._originalElement){let o=ms({width:n,height:r});this._element=o,this._filteredEl=o}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,n,r),this._lastScaleX=1,this._lastScaleY=1);kS().applyFilters(e,this._originalElement,n,r,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(e){e.imageSmoothingEnabled=this.imageSmoothing,this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(e),this._renderPaintInOrder(e)}drawCacheOnCanvas(e){e.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(e)}shouldCache(){return this.needsItsOwnCache()}_renderFill(e){let t=this._element;if(!t)return;let n=this._filterScalingX,r=this._filterScalingY,o=this.width,s=this.height,a=Math.max(this.cropX,0),l=Math.max(this.cropY,0),c=t.naturalWidth||t.width,d=t.naturalHeight||t.height,h=a*n,p=l*r,g=Math.min(o*n,c-h),_=Math.min(s*r,d-p),b=-o/2,C=-s/2,y=Math.min(o,c/n-a),M=Math.min(s,d/r-l);t&&e.drawImage(t,h,p,g,_,b,C,y,M)}_needsResize(){let e=this.getTotalObjectScaling();return e.x!==this._lastScaleX||e.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:e,height:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=this.getOriginalSize();this.width=e||n.width,this.height=t||n.height}parsePreserveAspectRatioAttribute(){let e=kN(this.preserveAspectRatio||""),t=this.width,n=this.height,r={width:t,height:n},o,s=this._element.width,a=this._element.height,l=1,c=1,d=0,h=0,p=0,g=0;return!e||e.alignX===Ro&&e.alignY===Ro?(l=t/s,c=n/a):(e.meetOrSlice==="meet"&&(l=c=rL(this._element,r),o=(t-s*l)/2,e.alignX==="Min"&&(d=-o),e.alignX==="Max"&&(d=o),o=(n-a*c)/2,e.alignY==="Min"&&(h=-o),e.alignY==="Max"&&(h=o)),e.meetOrSlice==="slice"&&(l=c=oL(this._element,r),o=s-t/l,e.alignX==="Mid"&&(p=o/2),e.alignX==="Max"&&(p=o),o=a-n/c,e.alignY==="Mid"&&(g=o/2),e.alignY==="Max"&&(g=o),s=t/l,a=n/c)),{width:s,height:a,scaleX:l,scaleY:c,offsetLeft:d,offsetTop:h,cropX:p,cropY:g}}static fromObject(e,t){let{filters:n,resizeFilter:r,src:o,crossOrigin:s,type:a}=e,l=vi(e,xre);return Promise.all([Um(o,ve(ve({},t),{},{crossOrigin:s})),n&&Rf(n,t),r&&Rf([r],t),ex(l,t)]).then(c=>{let[d,h=[],[p]=[],g={}]=c;return new this(d,ve(ve({},l),{},{src:o,filters:h,resizeFilter:p},g))})}static fromURL(e){let{crossOrigin:t=null,signal:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return Um(e,{crossOrigin:t,signal:n}).then(o=>new this(o,r))}static fromElement(t){return Ge(this,arguments,function*(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,o=bc(e,this.ATTRIBUTE_NAMES,r);return this.fromURL(o["xlink:href"]||o.href,n,o).catch(s=>(Pd("log","Unable to parse Image",s),null))})}};ge(ao,"type","Image"),ge(ao,"cacheProperties",[...vc,...PL]),ge(ao,"ownDefaults",{strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0}),ge(ao,"CSS_CANVAS","canvas-img"),ge(ao,"ATTRIBUTE_NAMES",[...Fd,"x","y","width","height","preserveAspectRatio","xlink:href","href","crossOrigin","image-rendering"]),ft.setClass(ao),ft.setSVGClass(ao);var uSe=ty(["pattern","defs","symbol","metadata","clipPath","mask","desc"]);var OL=uN,oN=i=>function(e,t,n){let{points:r,pathOffset:o}=n;return new De(r[i]).subtract(o).transform(Ti(n.getViewportTransform(),n.calcTransformMatrix()))},SL=(i,e,t,n)=>{let{target:r,pointIndex:o}=e,s=r,a=mc(new De(t,n),void 0,s.calcOwnMatrix());return s.points[o]=a.add(s.pathOffset),s.setDimensions(),!0},kL=(i,e)=>function(t,n,r,o){let s=n.target,a=new De(s.points[(i>0?i:s.points.length)-1]),l=a.subtract(s.pathOffset).transform(s.calcOwnMatrix()),c=e(t,ve(ve({},n),{},{pointIndex:i}),r,o),d=a.subtract(s.pathOffset).transform(s.calcOwnMatrix()).subtract(l);return s.left-=d.x,s.top-=d.y,c},sN=i=>Dd(OL,kL(i,SL)),s3=(i,e,t)=>{let{path:n,pathOffset:r}=i,o=n[e];return new De(o[t]-r.x,o[t+1]-r.y).transform(Ti(i.getViewportTransform(),i.calcTransformMatrix()))};function _re(i,e,t){let{commandIndex:n,pointIndex:r}=this;return s3(t,n,r)}function vre(i,e,t,n){let{target:r}=e,{commandIndex:o,pointIndex:s}=this,a=((l,c,d,h,p)=>{let{path:g,pathOffset:_}=l,b=g[(h>0?h:g.length)-1],C=new De(b[p],b[p+1]),y=C.subtract(_).transform(l.calcOwnMatrix()),M=mc(new De(c,d),void 0,l.calcOwnMatrix());g[h][p]=M.x+_.x,g[h][p+1]=M.y+_.y,l.setDimensions();let O=C.subtract(l.pathOffset).transform(l.calcOwnMatrix()).subtract(y);return l.left-=O.x,l.top-=O.y,l.set("dirty",!0),!0})(r,t,n,o,s);return v3(this.actionName,ve(ve({},b3(i,e,t,n)),{},{commandIndex:o,pointIndex:s})),a}var KC=class extends so{constructor(e){super(e)}render(e,t,n,r,o){let s=ve(ve({},r),{},{cornerColor:this.controlFill,cornerStrokeColor:this.controlStroke,transparentCorners:!this.controlFill});super.render(e,t,n,s,o)}},a3=class extends KC{constructor(e){super(e)}render(e,t,n,r,o){let{path:s}=o,{commandIndex:a,pointIndex:l,connectToCommandIndex:c,connectToPointIndex:d}=this;e.save(),e.strokeStyle=this.controlStroke,this.connectionDashArray&&e.setLineDash(this.connectionDashArray);let[h]=s[a],p=s3(o,c,d);if(h==="Q"){let g=s3(o,a,l+2);e.moveTo(g.x,g.y),e.lineTo(t,n)}else e.moveTo(t,n);e.lineTo(p.x,p.y),e.stroke(),e.restore(),super.render(e,t,n,r,o)}},_C=(i,e,t,n,r,o)=>new(t?a3:KC)(ve(ve({commandIndex:i,pointIndex:e,actionName:"modifyPath",positionHandler:_re,actionHandler:vre,connectToCommandIndex:r,connectToPointIndex:o},n),t?n.controlPointStyle:n.pointStyle)),hSe=Object.freeze({__proto__:null,changeWidth:HS,createObjectDefaultControls:E3,createPathControls:function(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t={},n="M";return i.path.forEach((r,o)=>{let s=r[0];switch(s!=="Z"&&(t["c_".concat(o,"_").concat(s)]=_C(o,r.length-2,!1,e)),s){case"C":t["c_".concat(o,"_C_CP_1")]=_C(o,1,!0,e,o-1,(a=>a==="C"?5:a==="Q"?3:1)(n)),t["c_".concat(o,"_C_CP_2")]=_C(o,3,!0,e,o,5);break;case"Q":t["c_".concat(o,"_Q_CP_1")]=_C(o,1,!0,e,o,3)}n=s}),t},createPolyActionHandler:sN,createPolyControls:function(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t={};for(let n=0;n<(typeof i=="number"?i:i.points.length);n++)t["p".concat(n)]=new so(ve({actionName:OL,positionHandler:oN(n),actionHandler:sN(n)},e));return t},createPolyPositionHandler:oN,createResizeControls:qN,createTextboxDefaultControls:KN,dragHandler:SN,factoryPolyActionHandler:kL,getLocalPoint:ey,polyActionHandler:SL,renderCircleControl:BN,renderSquareControl:NN,rotationStyleHandler:LN,rotationWithSnapping:RN,scaleCursorStyleHandler:Af,scaleOrSkewActionName:zm,scaleSkewCursorStyleHandler:Xu,scalingEqually:Rm,scalingX:VN,scalingXOrSkewingY:GS,scalingY:UN,scalingYOrSkewingX:$S,skewCursorStyleHandler:HN,skewHandlerX:$N,skewHandlerY:WN,wrapWithFireEvent:Dd,wrapWithFixedAnchor:v0}),sy=i=>i.webgl!==void 0;var D3="precision highp float",bre=`
    `.concat(D3,`;
    varying vec2 vTexCoord;
    uniform sampler2D uTexture;
    void main() {
      gl_FragColor = texture2D(uTexture, vTexCoord);
    }`),Cre=["type"],yre=["type"],wre=new RegExp(D3,"g"),Bi=class{get type(){return this.constructor.type}constructor(){let e=vi(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Cre);Object.assign(this,this.constructor.defaults,e)}getFragmentSource(){return bre}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    void main() {
      vTexCoord = aPosition;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }`}createProgram(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getFragmentSource(),n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.getVertexSource(),{WebGLProbe:{GLPrecision:r="highp"}}=vl();r!=="highp"&&(t=t.replace(wre,D3.replace("highp",r)));let o=e.createShader(e.VERTEX_SHADER),s=e.createShader(e.FRAGMENT_SHADER),a=e.createProgram();if(!o||!s||!a)throw new Rs("Vertex, fragment shader or program creation error");if(e.shaderSource(o,n),e.compileShader(o),!e.getShaderParameter(o,e.COMPILE_STATUS))throw new Rs("Vertex shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(o)));if(e.shaderSource(s,t),e.compileShader(s),!e.getShaderParameter(s,e.COMPILE_STATUS))throw new Rs("Fragment shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(s)));if(e.attachShader(a,o),e.attachShader(a,s),e.linkProgram(a),!e.getProgramParameter(a,e.LINK_STATUS))throw new Rs('Shader link error for "'.concat(this.type,'" ').concat(e.getProgramInfoLog(a)));let l=this.getUniformLocations(e,a)||{};return l.uStepW=e.getUniformLocation(a,"uStepW"),l.uStepH=e.getUniformLocation(a,"uStepH"),{program:a,attributeLocations:this.getAttributeLocations(e,a),uniformLocations:l}}getAttributeLocations(e,t){return{aPosition:e.getAttribLocation(t,"aPosition")}}getUniformLocations(e,t){let n=this.constructor.uniformLocations,r={};for(let o=0;o<n.length;o++)r[n[o]]=e.getUniformLocation(t,n[o]);return r}sendAttributeData(e,t,n){let r=t.aPosition,o=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,o),e.enableVertexAttribArray(r),e.vertexAttribPointer(r,2,e.FLOAT,!1,0,0),e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW)}_setupFrameBuffer(e){let t=e.context;if(e.passes>1){let n=e.destinationWidth,r=e.destinationHeight;e.sourceWidth===n&&e.sourceHeight===r||(t.deleteTexture(e.targetTexture),e.targetTexture=e.filterBackend.createTexture(t,n,r)),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e.targetTexture,0)}else t.bindFramebuffer(t.FRAMEBUFFER,null),t.finish()}_swapTextures(e){e.passes--,e.pass++;let t=e.targetTexture;e.targetTexture=e.sourceTexture,e.sourceTexture=t}isNeutralState(e){return!1}applyTo(e){sy(e)?(this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){}getCacheKey(){return this.type}retrieveShader(e){let t=this.getCacheKey();return e.programCache[t]||(e.programCache[t]=this.createProgram(e.context)),e.programCache[t]}applyToWebGL(e){let t=e.context,n=this.retrieveShader(e);e.pass===0&&e.originalTexture?t.bindTexture(t.TEXTURE_2D,e.originalTexture):t.bindTexture(t.TEXTURE_2D,e.sourceTexture),t.useProgram(n.program),this.sendAttributeData(t,n.attributeLocations,e.aPosition),t.uniform1f(n.uniformLocations.uStepW,1/e.sourceWidth),t.uniform1f(n.uniformLocations.uStepH,1/e.sourceHeight),this.sendUniformData(t,n.uniformLocations),t.viewport(0,0,e.destinationWidth,e.destinationHeight),t.drawArrays(t.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(e,t,n){e.activeTexture(n),e.bindTexture(e.TEXTURE_2D,t),e.activeTexture(e.TEXTURE0)}unbindAdditionalTexture(e,t){e.activeTexture(t),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0)}sendUniformData(e,t){}createHelpLayer(e){if(!e.helpLayer){let{sourceWidth:t,sourceHeight:n}=e,r=ms({width:t,height:n});e.helpLayer=r}}toObject(){let e=Object.keys(this.constructor.defaults||{});return ve({type:this.type},e.reduce((t,n)=>(t[n]=this[n],t),{}))}toJSON(){return this.toObject()}static fromObject(e,t){return Ge(this,null,function*(){return new this(vi(e,yre))})}};ge(Bi,"type","BaseFilter"),ge(Bi,"uniformLocations",[]);var Mre={multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,difference:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`
    if (uColor.r < 0.5) {
      gl_FragColor.r *= 2.0 * uColor.r;
    } else {
      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
    }
    if (uColor.g < 0.5) {
      gl_FragColor.g *= 2.0 * uColor.g;
    } else {
      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
    }
    if (uColor.b < 0.5) {
      gl_FragColor.b *= 2.0 * uColor.b;
    } else {
      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
    }
    `,tint:`
    gl_FragColor.rgb *= (1.0 - uColor.a);
    gl_FragColor.rgb += uColor.rgb;
    `},Qu=class extends Bi{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec4 uColor;
      varying vec2 vTexCoord;
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        gl_FragColor = color;
        if (color.a > 0.0) {
          `.concat(Mre[this.mode],`
        }
      }
      `)}applyTo2d(e){let{imageData:{data:t}}=e,n=new qr(this.color).getSource(),r=this.alpha,o=n[0]*r,s=n[1]*r,a=n[2]*r,l=1-r;for(let c=0;c<t.length;c+=4){let d=t[c],h=t[c+1],p=t[c+2],g,_,b;switch(this.mode){case"multiply":g=d*o/255,_=h*s/255,b=p*a/255;break;case"screen":g=255-(255-d)*(255-o)/255,_=255-(255-h)*(255-s)/255,b=255-(255-p)*(255-a)/255;break;case"add":g=d+o,_=h+s,b=p+a;break;case"difference":g=Math.abs(d-o),_=Math.abs(h-s),b=Math.abs(p-a);break;case"subtract":g=d-o,_=h-s,b=p-a;break;case"darken":g=Math.min(d,o),_=Math.min(h,s),b=Math.min(p,a);break;case"lighten":g=Math.max(d,o),_=Math.max(h,s),b=Math.max(p,a);break;case"overlay":g=o<128?2*d*o/255:255-2*(255-d)*(255-o)/255,_=s<128?2*h*s/255:255-2*(255-h)*(255-s)/255,b=a<128?2*p*a/255:255-2*(255-p)*(255-a)/255;break;case"exclusion":g=o+d-2*o*d/255,_=s+h-2*s*h/255,b=a+p-2*a*p/255;break;case"tint":g=o+d*l,_=s+h*l,b=a+p*l}t[c]=g,t[c+1]=_,t[c+2]=b}}sendUniformData(e,t){let n=new qr(this.color).getSource();n[0]=this.alpha*n[0]/255,n[1]=this.alpha*n[1]/255,n[2]=this.alpha*n[2]/255,n[3]=this.alpha,e.uniform4fv(t.uColor,n)}};ge(Qu,"defaults",{color:"#F95C63",mode:"multiply",alpha:1}),ge(Qu,"type","BlendColor"),ge(Qu,"uniformLocations",["uColor"]),ft.setClass(Qu);var Ere={multiply:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.rgba *= color2.rgba;
      gl_FragColor = color;
    }
    `,mask:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.a = color2.a;
      gl_FragColor = color;
    }
    `},Pre=["type","image"],Ju=class extends Bi{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return Ere[this.mode]}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    uniform mat3 uTransformMatrix;
    void main() {
      vTexCoord = aPosition;
      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }
    `}applyToWebGL(e){let t=e.context,n=this.createTexture(e.filterBackend,this.image);this.bindAdditionalTexture(t,n,t.TEXTURE1),super.applyToWebGL(e),this.unbindAdditionalTexture(t,t.TEXTURE1)}createTexture(e,t){return e.getCachedTexture(t.cacheKey,t.getElement())}calculateMatrix(){let e=this.image,{width:t,height:n}=e.getElement();return[1/e.scaleX,0,0,0,1/e.scaleY,0,-e.left/t,-e.top/n,1]}applyTo2d(e){let{imageData:{data:t,width:n,height:r},filterBackend:{resources:o}}=e,s=this.image;o.blendImage||(o.blendImage=js());let a=o.blendImage,l=a.getContext("2d");a.width!==n||a.height!==r?(a.width=n,a.height=r):l.clearRect(0,0,n,r),l.setTransform(s.scaleX,0,0,s.scaleY,s.left,s.top),l.drawImage(s.getElement(),0,0,n,r);let c=l.getImageData(0,0,n,r).data;for(let d=0;d<t.length;d+=4){let h=t[d],p=t[d+1],g=t[d+2],_=t[d+3],b=c[d],C=c[d+1],y=c[d+2],M=c[d+3];switch(this.mode){case"multiply":t[d]=h*b/255,t[d+1]=p*C/255,t[d+2]=g*y/255,t[d+3]=_*M/255;break;case"mask":t[d+3]=M}}}sendUniformData(e,t){let n=this.calculateMatrix();e.uniform1i(t.uImage,1),e.uniformMatrix3fv(t.uTransformMatrix,!1,n)}toObject(){return ve(ve({},super.toObject()),{},{image:this.image&&this.image.toObject()})}static fromObject(e,t){return Ge(this,null,function*(){let{type:n,image:r}=e,o=vi(e,Pre);return ao.fromObject(r,t).then(s=>new this(ve(ve({},o),{},{image:s})))})}};ge(Ju,"type","BlendImage"),ge(Ju,"defaults",{mode:"multiply",alpha:1}),ge(Ju,"uniformLocations",["uTransformMatrix","uImage"]),ft.setClass(Ju);var Zu=class extends Bi{getFragmentSource(){return`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
    const float nSamples = 15.0;
    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
    float random(vec3 scale) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
    }
    void main() {
      vec4 color = vec4(0.0);
      float total = 0.0;
      float offset = random(v3offset);
      for (float t = -nSamples; t <= nSamples; t++) {
        float percent = (t + offset - 0.5) / nSamples;
        float weight = 1.0 - abs(percent);
        color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
        total += weight;
      }
      gl_FragColor = color / total;
    }
  `}applyTo(e){sy(e)?(this.aspectRatio=e.sourceWidth/e.sourceHeight,e.passes++,this._setupFrameBuffer(e),this.horizontal=!0,this.applyToWebGL(e),this._swapTextures(e),this._setupFrameBuffer(e),this.horizontal=!1,this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){e.imageData=this.simpleBlur(e)}simpleBlur(e){let{ctx:t,imageData:n,filterBackend:{resources:r}}=e,{width:o,height:s}=n;r.blurLayer1||(r.blurLayer1=js(),r.blurLayer2=js());let a=r.blurLayer1,l=r.blurLayer2;a.width===o&&a.height===s||(l.width=a.width=o,l.height=a.height=s);let c=a.getContext("2d"),d=l.getContext("2d"),h=15,p=.06*this.blur*.5,g,_,b,C;for(c.putImageData(n,0,0),d.clearRect(0,0,o,s),C=-15;C<=h;C++)g=(Math.random()-.5)/4,_=C/h,b=p*_*o+g,d.globalAlpha=1-Math.abs(_),d.drawImage(a,b,g),c.drawImage(l,0,0),d.globalAlpha=1,d.clearRect(0,0,l.width,l.height);for(C=-15;C<=h;C++)g=(Math.random()-.5)/4,_=C/h,b=p*_*s+g,d.globalAlpha=1-Math.abs(_),d.drawImage(a,g,b),c.drawImage(l,0,0),d.globalAlpha=1,d.clearRect(0,0,l.width,l.height);t.drawImage(a,0,0);let y=t.getImageData(0,0,a.width,a.height);return c.globalAlpha=1,c.clearRect(0,0,a.width,a.height),y}sendUniformData(e,t){let n=this.chooseRightDelta();e.uniform2fv(t.uDelta,n)}isNeutralState(){return this.blur===0}chooseRightDelta(){let e=1,t=[0,0];this.horizontal?this.aspectRatio>1&&(e=1/this.aspectRatio):this.aspectRatio<1&&(e=this.aspectRatio);let n=e*this.blur*.12;return this.horizontal?t[0]=n:t[1]=n,t}};ge(Zu,"type","Blur"),ge(Zu,"defaults",{blur:0}),ge(Zu,"uniformLocations",["uDelta"]),ft.setClass(Zu);var e0=class extends Bi{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBrightness;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += uBrightness;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e,n=Math.round(255*this.brightness);for(let r=0;r<t.length;r+=4)t[r]+=n,t[r+1]+=n,t[r+2]+=n}isNeutralState(){return this.brightness===0}sendUniformData(e,t){e.uniform1f(t.uBrightness,this.brightness)}};ge(e0,"type","Brightness"),ge(e0,"defaults",{brightness:0}),ge(e0,"uniformLocations",["uBrightness"]),ft.setClass(e0);var AL={matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],colorsOnly:!0},pc=class extends Bi{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  varying vec2 vTexCoord;
  uniform mat4 uColorMatrix;
  uniform vec4 uConstants;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color *= uColorMatrix;
    color += uConstants;
    gl_FragColor = color;
  }`}applyTo2d(e){let t=e.imageData.data,n=this.matrix,r=this.colorsOnly;for(let o=0;o<t.length;o+=4){let s=t[o],a=t[o+1],l=t[o+2];if(t[o]=s*n[0]+a*n[1]+l*n[2]+255*n[4],t[o+1]=s*n[5]+a*n[6]+l*n[7]+255*n[9],t[o+2]=s*n[10]+a*n[11]+l*n[12]+255*n[14],!r){let c=t[o+3];t[o]+=c*n[3],t[o+1]+=c*n[8],t[o+2]+=c*n[13],t[o+3]=s*n[15]+a*n[16]+l*n[17]+c*n[18]+255*n[19]}}}sendUniformData(e,t){let n=this.matrix,r=[n[0],n[1],n[2],n[3],n[5],n[6],n[7],n[8],n[10],n[11],n[12],n[13],n[15],n[16],n[17],n[18]],o=[n[4],n[9],n[14],n[19]];e.uniformMatrix4fv(t.uColorMatrix,!1,r),e.uniform4fv(t.uConstants,o)}toObject(){return ve(ve({},super.toObject()),{},{matrix:[...this.matrix]})}};function b0(i,e){var t;let n=(ge(t=class extends pc{toObject(){return{type:this.type,colorsOnly:this.colorsOnly}}},"type",i),ge(t,"defaults",{colorsOnly:!1,matrix:e}),t);return ft.setClass(n,i),n}ge(pc,"type","ColorMatrix"),ge(pc,"defaults",AL),ge(pc,"uniformLocations",["uColorMatrix","uConstants"]),ft.setClass(pc);var Ore=b0("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]),Sre=b0("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]),kre=b0("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]),Are=b0("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]),Dre=b0("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]),Fre=b0("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]),Ire=b0("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]),Qm=class extends Bi{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.subFilters=e.subFilters||[]}applyTo(e){sy(e)&&(e.passes+=this.subFilters.length-1),this.subFilters.forEach(t=>{t.applyTo(e)})}toObject(){return{type:this.type,subFilters:this.subFilters.map(e=>e.toObject())}}isNeutralState(){return!this.subFilters.some(e=>!e.isNeutralState())}static fromObject(e,t){return Promise.all((e.subFilters||[]).map(n=>ft.getClass(n.type).fromObject(n,t))).then(n=>new this({subFilters:n}))}};ge(Qm,"type","Composed"),ft.setClass(Qm);var t0=class extends Bi{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uContrast;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
    gl_FragColor = color;
  }`}isNeutralState(){return this.contrast===0}applyTo2d(e){let{imageData:{data:t}}=e,n=Math.floor(255*this.contrast),r=259*(n+255)/(255*(259-n));for(let o=0;o<t.length;o+=4)t[o]=r*(t[o]-128)+128,t[o+1]=r*(t[o+1]-128)+128,t[o+2]=r*(t[o+2]-128)+128}sendUniformData(e,t){e.uniform1f(t.uContrast,this.contrast)}};ge(t0,"type","Contrast"),ge(t0,"defaults",{contrast:0}),ge(t0,"uniformLocations",["uContrast"]),ft.setClass(t0);var Tre={Convolute_3_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_3_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_5_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_5_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_7_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_7_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_9_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_9_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `},n0=class extends Bi{getCacheKey(){return"".concat(this.type,"_").concat(Math.sqrt(this.matrix.length),"_").concat(this.opaque?1:0)}getFragmentSource(){return Tre[this.getCacheKey()]}applyTo2d(e){let t=e.imageData,n=t.data,r=this.matrix,o=Math.round(Math.sqrt(r.length)),s=Math.floor(o/2),a=t.width,l=t.height,c=e.ctx.createImageData(a,l),d=c.data,h=this.opaque?1:0,p,g,_,b,C,y,M,O,A,D,N,B,T;for(N=0;N<l;N++)for(D=0;D<a;D++){for(C=4*(N*a+D),p=0,g=0,_=0,b=0,T=0;T<o;T++)for(B=0;B<o;B++)M=N+T-s,y=D+B-s,M<0||M>=l||y<0||y>=a||(O=4*(M*a+y),A=r[T*o+B],p+=n[O]*A,g+=n[O+1]*A,_+=n[O+2]*A,h||(b+=n[O+3]*A));d[C]=p,d[C+1]=g,d[C+2]=_,d[C+3]=h?n[C+3]:b}e.imageData=c}sendUniformData(e,t){e.uniform1fv(t.uMatrix,this.matrix)}toObject(){return ve(ve({},super.toObject()),{},{opaque:this.opaque,matrix:[...this.matrix]})}};ge(n0,"type","Convolute"),ge(n0,"defaults",{opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]}),ge(n0,"uniformLocations",["uMatrix","uOpaque","uHalfSize","uSize"]),ft.setClass(n0);var DL="Gamma",i0=class extends Bi{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform vec3 uGamma;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    vec3 correction = (1.0 / uGamma);
    color.r = pow(color.r, correction.r);
    color.g = pow(color.g, correction.g);
    color.b = pow(color.b, correction.b);
    gl_FragColor = color;
    gl_FragColor.rgb *= color.a;
  }
`}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.gamma=e.gamma||this.constructor.defaults.gamma.concat()}applyTo2d(e){let{imageData:{data:t}}=e,n=this.gamma,r=1/n[0],o=1/n[1],s=1/n[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});let a=this.rgbValues;for(let l=0;l<256;l++)a.r[l]=255*Math.pow(l/255,r),a.g[l]=255*Math.pow(l/255,o),a.b[l]=255*Math.pow(l/255,s);for(let l=0;l<t.length;l+=4)t[l]=a.r[t[l]],t[l+1]=a.g[t[l+1]],t[l+2]=a.b[t[l+2]]}sendUniformData(e,t){e.uniform3fv(t.uGamma,this.gamma)}isNeutralState(){let{gamma:e}=this;return e[0]===1&&e[1]===1&&e[2]===1}toObject(){return{type:DL,gamma:this.gamma.concat()}}};ge(i0,"type",DL),ge(i0,"defaults",{gamma:[1,1,1]}),ge(i0,"uniformLocations",["uGamma"]),ft.setClass(i0);var Bre={average:`
    precision highp float;
    uniform sampler2D uTexture;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      float average = (color.r + color.b + color.g) / 3.0;
      gl_FragColor = vec4(average, average, average, color.a);
    }
    `,lightness:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `,luminosity:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `},r0=class extends Bi{applyTo2d(e){let{imageData:{data:t}}=e;for(let n,r=0;r<t.length;r+=4){let o=t[r],s=t[r+1],a=t[r+2];switch(this.mode){case"average":n=(o+s+a)/3;break;case"lightness":n=(Math.min(o,s,a)+Math.max(o,s,a))/2;break;case"luminosity":n=.21*o+.72*s+.07*a}t[r+2]=t[r+1]=t[r]=n}}getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return Bre[this.mode]}sendUniformData(e,t){e.uniform1i(t.uMode,1)}isNeutralState(){return!1}};ge(r0,"type","Grayscale"),ge(r0,"defaults",{mode:"average"}),ge(r0,"uniformLocations",["uMode"]),ft.setClass(r0);var Nre=ve(ve({},AL),{},{rotation:0}),Nf=class extends pc{calculateMatrix(){let e=this.rotation*Math.PI,t=Pa(e),n=Oa(e),r=1/3,o=Math.sqrt(r)*n,s=1-t;this.matrix=[t+s/3,r*s-o,r*s+o,0,0,r*s+o,t+r*s,r*s-o,0,0,r*s-o,r*s+o,t+r*s,0,0,0,0,0,1,0]}isNeutralState(){return this.rotation===0}applyTo(e){this.calculateMatrix(),super.applyTo(e)}toObject(){return{type:this.type,rotation:this.rotation}}};ge(Nf,"type","HueRotation"),ge(Nf,"defaults",Nre),ft.setClass(Nf);var o0=class extends Bi{applyTo2d(e){let{imageData:{data:t}}=e;for(let n=0;n<t.length;n+=4)t[n]=255-t[n],t[n+1]=255-t[n+1],t[n+2]=255-t[n+2],this.alpha&&(t[n+3]=255-t[n+3])}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform int uInvert;
  uniform int uAlpha;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    if (uInvert == 1) {
      if (uAlpha == 1) {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);
      } else {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
      }
    } else {
      gl_FragColor = color;
    }
  }
`}isNeutralState(){return!this.invert}sendUniformData(e,t){e.uniform1i(t.uInvert,Number(this.invert)),e.uniform1i(t.uAlpha,Number(this.alpha))}};ge(o0,"type","Invert"),ge(o0,"defaults",{alpha:!1,invert:!0}),ge(o0,"uniformLocations",["uInvert","uAlpha"]),ft.setClass(o0);var s0=class extends Bi{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uStepH;
  uniform float uNoise;
  uniform float uSeed;
  varying vec2 vTexCoord;
  float rand(vec2 co, float seed, float vScale) {
    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
  }
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e,n=this.noise;for(let r=0;r<t.length;r+=4){let o=(.5-Math.random())*n;t[r]+=o,t[r+1]+=o,t[r+2]+=o}}sendUniformData(e,t){e.uniform1f(t.uNoise,this.noise/255),e.uniform1f(t.uSeed,Math.random())}isNeutralState(){return this.noise===0}};ge(s0,"type","Noise"),ge(s0,"defaults",{noise:0}),ge(s0,"uniformLocations",["uNoise","uSeed"]),ft.setClass(s0);var a0=class extends Bi{applyTo2d(e){let{imageData:{data:t,width:n,height:r}}=e;for(let o=0;o<r;o+=this.blocksize)for(let s=0;s<n;s+=this.blocksize){let a=4*o*n+4*s,l=t[a],c=t[a+1],d=t[a+2],h=t[a+3];for(let p=o;p<Math.min(o+this.blocksize,r);p++)for(let g=s;g<Math.min(s+this.blocksize,n);g++){let _=4*p*n+4*g;t[_]=l,t[_+1]=c,t[_+2]=d,t[_+3]=h}}}isNeutralState(){return this.blocksize===1}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBlocksize;
  uniform float uStepW;
  uniform float uStepH;
  varying vec2 vTexCoord;
  void main() {
    float blockW = uBlocksize * uStepW;
    float blockH = uBlocksize * uStepH;
    int posX = int(vTexCoord.x / blockW);
    int posY = int(vTexCoord.y / blockH);
    float fposX = float(posX);
    float fposY = float(posY);
    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
    vec4 color = texture2D(uTexture, squareCoords);
    gl_FragColor = color;
  }
`}sendUniformData(e,t){e.uniform1f(t.uBlocksize,this.blocksize)}};ge(a0,"type","Pixelate"),ge(a0,"defaults",{blocksize:4}),ge(a0,"uniformLocations",["uBlocksize"]),ft.setClass(a0);var l0=class extends Bi{getFragmentSource(){return`
precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
  gl_FragColor = texture2D(uTexture, vTexCoord);
  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
    gl_FragColor.a = 0.0;
  }
}
`}applyTo2d(e){let{imageData:{data:t}}=e,n=255*this.distance,r=new qr(this.color).getSource(),o=[r[0]-n,r[1]-n,r[2]-n],s=[r[0]+n,r[1]+n,r[2]+n];for(let a=0;a<t.length;a+=4){let l=t[a],c=t[a+1],d=t[a+2];l>o[0]&&c>o[1]&&d>o[2]&&l<s[0]&&c<s[1]&&d<s[2]&&(t[a+3]=0)}}sendUniformData(e,t){let n=new qr(this.color).getSource(),r=this.distance,o=[0+n[0]/255-r,0+n[1]/255-r,0+n[2]/255-r,1],s=[n[0]/255+r,n[1]/255+r,n[2]/255+r,1];e.uniform4fv(t.uLow,o),e.uniform4fv(t.uHigh,s)}};ge(l0,"type","RemoveColor"),ge(l0,"defaults",{color:"#FFFFFF",distance:.02,useAlpha:!1}),ge(l0,"uniformLocations",["uLow","uHigh"]),ft.setClass(l0);var c0=class extends Bi{sendUniformData(e,t){e.uniform2fv(t.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),e.uniform1fv(t.uTaps,this.taps)}getFilterWindow(){let e=this.tempScale;return Math.ceil(this.lanczosLobes/e)}getCacheKey(){let e=this.getFilterWindow();return"".concat(this.type,"_").concat(e)}getFragmentSource(){let e=this.getFilterWindow();return this.generateShader(e)}getTaps(){let e=this.lanczosCreate(this.lanczosLobes),t=this.tempScale,n=this.getFilterWindow(),r=new Array(n);for(let o=1;o<=n;o++)r[o-1]=e(o*t);return r}generateShader(e){let t=new Array(e);for(let n=1;n<=e;n++)t[n-1]="".concat(n,".0 * uDelta");return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec2 uDelta;
      varying vec2 vTexCoord;
      uniform float uTaps[`.concat(e,`];
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        float sum = 1.0;
        `).concat(t.map((n,r)=>`
              color += texture2D(uTexture, vTexCoord + `.concat(n,") * uTaps[").concat(r,"] + texture2D(uTexture, vTexCoord - ").concat(n,") * uTaps[").concat(r,`];
              sum += 2.0 * uTaps[`).concat(r,`];
            `)).join(`
`),`
        gl_FragColor = color / sum;
      }
    `)}applyToForWebgl(e){e.passes++,this.width=e.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=e.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),e.destinationWidth=this.dW,super.applyTo(e),e.sourceWidth=e.destinationWidth,this.height=e.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),e.destinationHeight=this.dH,super.applyTo(e),e.sourceHeight=e.destinationHeight}applyTo(e){sy(e)?this.applyToForWebgl(e):this.applyTo2d(e)}isNeutralState(){return this.scaleX===1&&this.scaleY===1}lanczosCreate(e){return t=>{if(t>=e||t<=-e)return 0;if(t<11920929e-14&&t>-11920929e-14)return 1;let n=(t*=Math.PI)/e;return Math.sin(t)/t*Math.sin(n)/n}}applyTo2d(e){let t=e.imageData,n=this.scaleX,r=this.scaleY;this.rcpScaleX=1/n,this.rcpScaleY=1/r;let o=t.width,s=t.height,a=Math.round(o*n),l=Math.round(s*r),c;c=this.resizeType==="sliceHack"?this.sliceByTwo(e,o,s,a,l):this.resizeType==="hermite"?this.hermiteFastResize(e,o,s,a,l):this.resizeType==="bilinear"?this.bilinearFiltering(e,o,s,a,l):this.resizeType==="lanczos"?this.lanczosResize(e,o,s,a,l):new ImageData(a,l),e.imageData=c}sliceByTwo(e,t,n,r,o){let s=e.imageData,a=.5,l=!1,c=!1,d=t*a,h=n*a,p=e.filterBackend.resources,g=0,_=0,b=t,C=0;p.sliceByTwo||(p.sliceByTwo=js());let y=p.sliceByTwo;(y.width<1.5*t||y.height<n)&&(y.width=1.5*t,y.height=n);let M=y.getContext("2d");for(M.clearRect(0,0,1.5*t,n),M.putImageData(s,0,0),r=Math.floor(r),o=Math.floor(o);!l||!c;)t=d,n=h,r<Math.floor(d*a)?d=Math.floor(d*a):(d=r,l=!0),o<Math.floor(h*a)?h=Math.floor(h*a):(h=o,c=!0),M.drawImage(y,g,_,t,n,b,C,d,h),g=b,_=C,C+=h;return M.getImageData(g,_,r,o)}lanczosResize(e,t,n,r,o){let s=e.imageData.data,a=e.ctx.createImageData(r,o),l=a.data,c=this.lanczosCreate(this.lanczosLobes),d=this.rcpScaleX,h=this.rcpScaleY,p=2/this.rcpScaleX,g=2/this.rcpScaleY,_=Math.ceil(d*this.lanczosLobes/2),b=Math.ceil(h*this.lanczosLobes/2),C={},y={x:0,y:0},M={x:0,y:0};return function O(A){let D,N,B,T,H,te,L,z,J,Q,ce;for(y.x=(A+.5)*d,M.x=Math.floor(y.x),D=0;D<o;D++){for(y.y=(D+.5)*h,M.y=Math.floor(y.y),H=0,te=0,L=0,z=0,J=0,N=M.x-_;N<=M.x+_;N++)if(!(N<0||N>=t)){Q=Math.floor(1e3*Math.abs(N-y.x)),C[Q]||(C[Q]={});for(let X=M.y-b;X<=M.y+b;X++)X<0||X>=n||(ce=Math.floor(1e3*Math.abs(X-y.y)),C[Q][ce]||(C[Q][ce]=c(Math.sqrt(Math.pow(Q*p,2)+Math.pow(ce*g,2))/1e3)),B=C[Q][ce],B>0&&(T=4*(X*t+N),H+=B,te+=B*s[T],L+=B*s[T+1],z+=B*s[T+2],J+=B*s[T+3]))}T=4*(D*r+A),l[T]=te/H,l[T+1]=L/H,l[T+2]=z/H,l[T+3]=J/H}return++A<r?O(A):a}(0)}bilinearFiltering(e,t,n,r,o){let s,a,l,c,d,h,p,g,_,b,C,y,M,O=0,A=this.rcpScaleX,D=this.rcpScaleY,N=4*(t-1),B=e.imageData.data,T=e.ctx.createImageData(r,o),H=T.data;for(p=0;p<o;p++)for(g=0;g<r;g++)for(d=Math.floor(A*g),h=Math.floor(D*p),_=A*g-d,b=D*p-h,M=4*(h*t+d),C=0;C<4;C++)s=B[M+C],a=B[M+4+C],l=B[M+N+C],c=B[M+N+4+C],y=s*(1-_)*(1-b)+a*_*(1-b)+l*b*(1-_)+c*_*b,H[O++]=y;return T}hermiteFastResize(e,t,n,r,o){let s=this.rcpScaleX,a=this.rcpScaleY,l=Math.ceil(s/2),c=Math.ceil(a/2),d=e.imageData.data,h=e.ctx.createImageData(r,o),p=h.data;for(let g=0;g<o;g++)for(let _=0;_<r;_++){let b=4*(_+g*r),C=0,y=0,M=0,O=0,A=0,D=0,N=0,B=(g+.5)*a;for(let T=Math.floor(g*a);T<(g+1)*a;T++){let H=Math.abs(B-(T+.5))/c,te=(_+.5)*s,L=H*H;for(let z=Math.floor(_*s);z<(_+1)*s;z++){let J=Math.abs(te-(z+.5))/l,Q=Math.sqrt(L+J*J);Q>1&&Q<-1||(C=2*Q*Q*Q-3*Q*Q+1,C>0&&(J=4*(z+T*t),N+=C*d[J+3],M+=C,d[J+3]<255&&(C=C*d[J+3]/250),O+=C*d[J],A+=C*d[J+1],D+=C*d[J+2],y+=C))}}p[b]=O/y,p[b+1]=A/y,p[b+2]=D/y,p[b+3]=N/M}return h}};ge(c0,"type","Resize"),ge(c0,"defaults",{resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3}),ge(c0,"uniformLocations",["uDelta","uTaps"]),ft.setClass(c0);var d0=class extends Bi{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uSaturation;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float rgMax = max(color.r, color.g);
    float rgbMax = max(rgMax, color.b);
    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e,n=-this.saturation;for(let r=0;r<t.length;r+=4){let o=t[r],s=t[r+1],a=t[r+2],l=Math.max(o,s,a);t[r]+=l!==o?(l-o)*n:0,t[r+1]+=l!==s?(l-s)*n:0,t[r+2]+=l!==a?(l-a)*n:0}}sendUniformData(e,t){e.uniform1f(t.uSaturation,-this.saturation)}isNeutralState(){return this.saturation===0}};ge(d0,"type","Saturation"),ge(d0,"defaults",{saturation:0}),ge(d0,"uniformLocations",["uSaturation"]),ft.setClass(d0);var u0=class extends Bi{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uVibrance;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float max = max(color.r, max(color.g, color.b));
    float avg = (color.r + color.g + color.b) / 3.0;
    float amt = (abs(max - avg) * 2.0) * uVibrance;
    color.r += max != color.r ? (max - color.r) * amt : 0.00;
    color.g += max != color.g ? (max - color.g) * amt : 0.00;
    color.b += max != color.b ? (max - color.b) * amt : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e,n=-this.vibrance;for(let r=0;r<t.length;r+=4){let o=t[r],s=t[r+1],a=t[r+2],l=Math.max(o,s,a),c=(o+s+a)/3,d=2*Math.abs(l-c)/255*n;t[r]+=l!==o?(l-o)*d:0,t[r+1]+=l!==s?(l-s)*d:0,t[r+2]+=l!==a?(l-a)*d:0}}sendUniformData(e,t){e.uniform1f(t.uVibrance,-this.vibrance)}isNeutralState(){return this.vibrance===0}};ge(u0,"type","Vibrance"),ge(u0,"defaults",{vibrance:0}),ge(u0,"uniformLocations",["uVibrance"]),ft.setClass(u0);var fSe=Object.freeze({__proto__:null,BaseFilter:Bi,BlackWhite:Ire,BlendColor:Qu,BlendImage:Ju,Blur:Zu,Brightness:e0,Brownie:Ore,ColorMatrix:pc,Composed:Qm,Contrast:t0,Convolute:n0,Gamma:i0,Grayscale:r0,HueRotation:Nf,Invert:o0,Kodachrome:kre,Noise:s0,Pixelate:a0,Polaroid:Dre,RemoveColor:l0,Resize:c0,Saturation:d0,Sepia:Fre,Technicolor:Are,Vibrance:u0,Vintage:Sre});var Kr=Uint8Array,xs=Uint16Array,z3=Int32Array,ay=new Kr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ly=new Kr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),B3=new Kr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),NL=function(i,e){for(var t=new xs(31),n=0;n<31;++n)t[n]=e+=1<<i[n-1];for(var r=new z3(t[30]),n=1;n<30;++n)for(var o=t[n];o<t[n+1];++o)r[o]=o-t[n]<<5|n;return{b:t,r}},LL=NL(ay,2),RL=LL.b,N3=LL.r;RL[28]=258,N3[258]=28;var zL=NL(ly,0),Lre=zL.b,IL=zL.r,L3=new xs(32768);for(In=0;In<32768;++In)Cc=(In&43690)>>1|(In&21845)<<1,Cc=(Cc&52428)>>2|(Cc&13107)<<2,Cc=(Cc&61680)>>4|(Cc&3855)<<4,L3[In]=((Cc&65280)>>8|(Cc&255)<<8)>>1;var Cc,In,Cl=function(i,e,t){for(var n=i.length,r=0,o=new xs(e);r<n;++r)i[r]&&++o[i[r]-1];var s=new xs(e);for(r=1;r<e;++r)s[r]=s[r-1]+o[r-1]<<1;var a;if(t){a=new xs(1<<e);var l=15-e;for(r=0;r<n;++r)if(i[r])for(var c=r<<4|i[r],d=e-i[r],h=s[i[r]-1]++<<d,p=h|(1<<d)-1;h<=p;++h)a[L3[h]>>l]=c}else for(a=new xs(n),r=0;r<n;++r)i[r]&&(a[r]=L3[s[i[r]-1]++]>>15-i[r]);return a},Id=new Kr(288);for(In=0;In<144;++In)Id[In]=8;var In;for(In=144;In<256;++In)Id[In]=9;var In;for(In=256;In<280;++In)Id[In]=7;var In;for(In=280;In<288;++In)Id[In]=8;var In,rx=new Kr(32);for(In=0;In<32;++In)rx[In]=5;var In,Rre=Cl(Id,9,0),zre=Cl(Id,9,1),jre=Cl(rx,5,0),Vre=Cl(rx,5,1),F3=function(i){for(var e=i[0],t=1;t<i.length;++t)i[t]>e&&(e=i[t]);return e},Sa=function(i,e,t){var n=e/8|0;return(i[n]|i[n+1]<<8)>>(e&7)&t},I3=function(i,e){var t=e/8|0;return(i[t]|i[t+1]<<8|i[t+2]<<16)>>(e&7)},j3=function(i){return(i+7)/8|0},jL=function(i,e,t){return(e==null||e<0)&&(e=0),(t==null||t>i.length)&&(t=i.length),new Kr(i.subarray(e,t))};var Ure=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ka=function(i,e,t){var n=new Error(e||Ure[i]);if(n.code=i,Error.captureStackTrace&&Error.captureStackTrace(n,ka),!t)throw n;return n},Hre=function(i,e,t,n){var r=i.length,o=n?n.length:0;if(!r||e.f&&!e.l)return t||new Kr(0);var s=!t,a=s||e.i!=2,l=e.i;s&&(t=new Kr(r*3));var c=function(He){var Xe=t.length;if(He>Xe){var Ye=new Kr(Math.max(Xe*2,He));Ye.set(t),t=Ye}},d=e.f||0,h=e.p||0,p=e.b||0,g=e.l,_=e.d,b=e.m,C=e.n,y=r*8;do{if(!g){d=Sa(i,h,1);var M=Sa(i,h+1,3);if(h+=3,M)if(M==1)g=zre,_=Vre,b=9,C=5;else if(M==2){var N=Sa(i,h,31)+257,B=Sa(i,h+10,15)+4,T=N+Sa(i,h+5,31)+1;h+=14;for(var H=new Kr(T),te=new Kr(19),L=0;L<B;++L)te[B3[L]]=Sa(i,h+L*3,7);h+=B*3;for(var z=F3(te),J=(1<<z)-1,Q=Cl(te,z,1),L=0;L<T;){var ce=Q[Sa(i,h,J)];h+=ce&15;var O=ce>>4;if(O<16)H[L++]=O;else{var X=0,ie=0;for(O==16?(ie=3+Sa(i,h,3),h+=2,X=H[L-1]):O==17?(ie=3+Sa(i,h,7),h+=3):O==18&&(ie=11+Sa(i,h,127),h+=7);ie--;)H[L++]=X}}var oe=H.subarray(0,N),le=H.subarray(N);b=F3(oe),C=F3(le),g=Cl(oe,b,1),_=Cl(le,C,1)}else ka(1);else{var O=j3(h)+4,A=i[O-4]|i[O-3]<<8,D=O+A;if(D>r){l&&ka(0);break}a&&c(p+A),t.set(i.subarray(O,D),p),e.b=p+=A,e.p=h=D*8,e.f=d;continue}if(h>y){l&&ka(0);break}}a&&c(p+131072);for(var Ce=(1<<b)-1,Ne=(1<<C)-1,R=h;;R=h){var X=g[I3(i,h)&Ce],ne=X>>4;if(h+=X&15,h>y){l&&ka(0);break}if(X||ka(2),ne<256)t[p++]=ne;else if(ne==256){R=h,g=null;break}else{var re=ne-254;if(ne>264){var L=ne-257,de=ay[L];re=Sa(i,h,(1<<de)-1)+RL[L],h+=de}var fe=_[I3(i,h)&Ne],me=fe>>4;fe||ka(3),h+=fe&15;var le=Lre[me];if(me>3){var de=ly[me];le+=I3(i,h)&(1<<de)-1,h+=de}if(h>y){l&&ka(0);break}a&&c(p+131072);var Pe=p+re;if(p<le){var Me=o-le,Ue=Math.min(le,Pe);for(Me+p<0&&ka(3);p<Ue;++p)t[p]=n[Me+p]}for(;p<Pe;++p)t[p]=t[p-le]}}e.l=g,e.p=R,e.b=p,e.f=d,g&&(d=1,e.m=b,e.d=_,e.n=C)}while(!d);return p!=t.length&&s?jL(t,0,p):t.subarray(0,p)},yc=function(i,e,t){t<<=e&7;var n=e/8|0;i[n]|=t,i[n+1]|=t>>8},nx=function(i,e,t){t<<=e&7;var n=e/8|0;i[n]|=t,i[n+1]|=t>>8,i[n+2]|=t>>16},T3=function(i,e){for(var t=[],n=0;n<i.length;++n)i[n]&&t.push({s:n,f:i[n]});var r=t.length,o=t.slice();if(!r)return{t:UL,l:0};if(r==1){var s=new Kr(t[0].s+1);return s[t[0].s]=1,{t:s,l:1}}t.sort(function(D,N){return D.f-N.f}),t.push({s:-1,f:25001});var a=t[0],l=t[1],c=0,d=1,h=2;for(t[0]={s:-1,f:a.f+l.f,l:a,r:l};d!=r-1;)a=t[t[c].f<t[h].f?c++:h++],l=t[c!=d&&t[c].f<t[h].f?c++:h++],t[d++]={s:-1,f:a.f+l.f,l:a,r:l};for(var p=o[0].s,n=1;n<r;++n)o[n].s>p&&(p=o[n].s);var g=new xs(p+1),_=R3(t[d-1],g,0);if(_>e){var n=0,b=0,C=_-e,y=1<<C;for(o.sort(function(N,B){return g[B.s]-g[N.s]||N.f-B.f});n<r;++n){var M=o[n].s;if(g[M]>e)b+=y-(1<<_-g[M]),g[M]=e;else break}for(b>>=C;b>0;){var O=o[n].s;g[O]<e?b-=1<<e-g[O]++-1:++n}for(;n>=0&&b;--n){var A=o[n].s;g[A]==e&&(--g[A],++b)}_=e}return{t:new Kr(g),l:_}},R3=function(i,e,t){return i.s==-1?Math.max(R3(i.l,e,t+1),R3(i.r,e,t+1)):e[i.s]=t},TL=function(i){for(var e=i.length;e&&!i[--e];);for(var t=new xs(++e),n=0,r=i[0],o=1,s=function(l){t[n++]=l},a=1;a<=e;++a)if(i[a]==r&&a!=e)++o;else{if(!r&&o>2){for(;o>138;o-=138)s(32754);o>2&&(s(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(s(r),--o;o>6;o-=6)s(8304);o>2&&(s(o-3<<5|8208),o=0)}for(;o--;)s(r);o=1,r=i[a]}return{c:t.subarray(0,n),n:e}},ix=function(i,e){for(var t=0,n=0;n<e.length;++n)t+=i[n]*e[n];return t},VL=function(i,e,t){var n=t.length,r=j3(e+2);i[r]=n&255,i[r+1]=n>>8,i[r+2]=i[r]^255,i[r+3]=i[r+1]^255;for(var o=0;o<n;++o)i[r+o+4]=t[o];return(r+4+n)*8},BL=function(i,e,t,n,r,o,s,a,l,c,d){yc(e,d++,t),++r[256];for(var h=T3(r,15),p=h.t,g=h.l,_=T3(o,15),b=_.t,C=_.l,y=TL(p),M=y.c,O=y.n,A=TL(b),D=A.c,N=A.n,B=new xs(19),T=0;T<M.length;++T)++B[M[T]&31];for(var T=0;T<D.length;++T)++B[D[T]&31];for(var H=T3(B,7),te=H.t,L=H.l,z=19;z>4&&!te[B3[z-1]];--z);var J=c+5<<3,Q=ix(r,Id)+ix(o,rx)+s,ce=ix(r,p)+ix(o,b)+s+14+3*z+ix(B,te)+2*B[16]+3*B[17]+7*B[18];if(l>=0&&J<=Q&&J<=ce)return VL(e,d,i.subarray(l,l+c));var X,ie,oe,le;if(yc(e,d,1+(ce<Q)),d+=2,ce<Q){X=Cl(p,g,0),ie=p,oe=Cl(b,C,0),le=b;var Ce=Cl(te,L,0);yc(e,d,O-257),yc(e,d+5,N-1),yc(e,d+10,z-4),d+=14;for(var T=0;T<z;++T)yc(e,d+3*T,te[B3[T]]);d+=3*z;for(var Ne=[M,D],R=0;R<2;++R)for(var ne=Ne[R],T=0;T<ne.length;++T){var re=ne[T]&31;yc(e,d,Ce[re]),d+=te[re],re>15&&(yc(e,d,ne[T]>>5&127),d+=ne[T]>>12)}}else X=Rre,ie=Id,oe=jre,le=rx;for(var T=0;T<a;++T){var de=n[T];if(de>255){var re=de>>18&31;nx(e,d,X[re+257]),d+=ie[re+257],re>7&&(yc(e,d,de>>23&31),d+=ay[re]);var fe=de&31;nx(e,d,oe[fe]),d+=le[fe],fe>3&&(nx(e,d,de>>5&8191),d+=ly[fe])}else nx(e,d,X[de]),d+=ie[de]}return nx(e,d,X[256]),d+ie[256]},Gre=new z3([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),UL=new Kr(0),$re=function(i,e,t,n,r,o){var s=o.z||i.length,a=new Kr(n+s+5*(1+Math.ceil(s/7e3))+r),l=a.subarray(n,a.length-r),c=o.l,d=(o.r||0)&7;if(e){d&&(l[0]=o.r>>3);for(var h=Gre[e-1],p=h>>13,g=h&8191,_=(1<<t)-1,b=o.p||new xs(32768),C=o.h||new xs(_+1),y=Math.ceil(t/3),M=2*y,O=function(wt){return(i[wt]^i[wt+1]<<y^i[wt+2]<<M)&_},A=new z3(25e3),D=new xs(288),N=new xs(32),B=0,T=0,H=o.i||0,te=0,L=o.w||0,z=0;H+2<s;++H){var J=O(H),Q=H&32767,ce=C[J];if(b[Q]=ce,C[J]=Q,L<=H){var X=s-H;if((B>7e3||te>24576)&&(X>423||!c)){d=BL(i,l,0,A,D,N,T,te,z,H-z,d),te=B=T=0,z=H;for(var ie=0;ie<286;++ie)D[ie]=0;for(var ie=0;ie<30;++ie)N[ie]=0}var oe=2,le=0,Ce=g,Ne=Q-ce&32767;if(X>2&&J==O(H-Ne))for(var R=Math.min(p,X)-1,ne=Math.min(32767,H),re=Math.min(258,X);Ne<=ne&&--Ce&&Q!=ce;){if(i[H+oe]==i[H+oe-Ne]){for(var de=0;de<re&&i[H+de]==i[H+de-Ne];++de);if(de>oe){if(oe=de,le=Ne,de>R)break;for(var fe=Math.min(Ne,de-2),me=0,ie=0;ie<fe;++ie){var Pe=H-Ne+ie&32767,Me=b[Pe],Ue=Pe-Me&32767;Ue>me&&(me=Ue,ce=Pe)}}}Q=ce,ce=b[Q],Ne+=Q-ce&32767}if(le){A[te++]=268435456|N3[oe]<<18|IL[le];var He=N3[oe]&31,Xe=IL[le]&31;T+=ay[He]+ly[Xe],++D[257+He],++N[Xe],L=H+oe,++B}else A[te++]=i[H],++D[i[H]]}}for(H=Math.max(H,L);H<s;++H)A[te++]=i[H],++D[i[H]];d=BL(i,l,c,A,D,N,T,te,z,H-z,d),c||(o.r=d&7|l[d/8|0]<<3,d-=7,o.h=C,o.p=b,o.i=H,o.w=L)}else{for(var H=o.w||0;H<s+c;H+=65535){var Ye=H+65535;Ye>=s&&(l[d/8|0]=c,Ye=s),d=VL(l,d+1,i.subarray(H,Ye))}o.i=s}return jL(a,0,n+j3(d)+r)};var HL=function(){var i=1,e=0;return{p:function(t){for(var n=i,r=e,o=t.length|0,s=0;s!=o;){for(var a=Math.min(s+2655,o);s<a;++s)r+=n+=t[s];n=(n&65535)+15*(n>>16),r=(r&65535)+15*(r>>16)}i=n,e=r},d:function(){return i%=65521,e%=65521,(i&255)<<24|(i&65280)<<8|(e&255)<<8|e>>8}}},Wre=function(i,e,t,n,r){if(!r&&(r={l:1},e.dictionary)){var o=e.dictionary.subarray(-32768),s=new Kr(o.length+i.length);s.set(o),s.set(i,o.length),i=s,r.w=o.length}return $re(i,e.level==null?6:e.level,e.mem==null?r.l?Math.ceil(Math.max(8,Math.min(13,Math.log(i.length)))*1.5):20:12+e.mem,t,n,r)};var GL=function(i,e,t){for(;t;++e)i[e]=t,t>>>=8};var qre=function(i,e){var t=e.level,n=t==0?0:t<6?1:t==9?3:2;if(i[0]=120,i[1]=n<<6|(e.dictionary&&32),i[1]|=31-(i[0]<<8|i[1])%31,e.dictionary){var r=HL();r.p(e.dictionary),GL(i,2,r.d())}},Kre=function(i,e){return((i[0]&15)!=8||i[0]>>4>7||(i[0]<<8|i[1])%31)&&ka(6,"invalid zlib data"),(i[1]>>5&1)==+!e&&ka(6,"invalid zlib data: "+(i[1]&32?"need":"unexpected")+" dictionary"),(i[1]>>3&4)+2};function cy(i,e){e||(e={});var t=HL();t.p(i);var n=Wre(i,e,e.dictionary?6:2,4);return qre(n,e),GL(n,n.length-4,t.d()),n}function $L(i,e){return Hre(i.subarray(Kre(i,e&&e.dictionary),-4),{i:2},e&&e.out,e&&e.dictionary)}var Yre=typeof TextDecoder<"u"&&new TextDecoder,Xre=0;try{Yre.decode(UL,{stream:!0}),Xre=1}catch{}var Dt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function V3(){Dt.console&&typeof Dt.console.log=="function"&&Dt.console.log.apply(Dt.console,arguments)}var ti={log:V3,warn:function(i){Dt.console&&(typeof Dt.console.warn=="function"?Dt.console.warn.apply(Dt.console,arguments):V3.call(null,arguments))},error:function(i){Dt.console&&(typeof Dt.console.error=="function"?Dt.console.error.apply(Dt.console,arguments):V3(i))}};function U3(i,e,t){var n=new XMLHttpRequest;n.open("GET",i),n.responseType="blob",n.onload=function(){C0(n.response,e,t)},n.onerror=function(){ti.error("could not download file")},n.send()}function WL(i){var e=new XMLHttpRequest;e.open("HEAD",i,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function dy(i){try{i.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),i.dispatchEvent(e)}}var ox,q3,C0=Dt.saveAs||((typeof window>"u"?"undefined":$n(window))!=="object"||window!==Dt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(i,e,t){var n=Dt.URL||Dt.webkitURL,r=document.createElement("a");e=e||i.name||"download",r.download=e,r.rel="noopener",typeof i=="string"?(r.href=i,r.origin!==location.origin?WL(r.href)?U3(i,e,t):dy(r,r.target="_blank"):dy(r)):(r.href=n.createObjectURL(i),setTimeout(function(){n.revokeObjectURL(r.href)},4e4),setTimeout(function(){dy(r)},0))}:"msSaveOrOpenBlob"in navigator?function(i,e,t){if(e=e||i.name||"download",typeof i=="string")if(WL(i))U3(i,e,t);else{var n=document.createElement("a");n.href=i,n.target="_blank",setTimeout(function(){dy(n)})}else navigator.msSaveOrOpenBlob(function(r,o){return o===void 0?o={autoBom:!1}:$n(o)!=="object"&&(ti.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(r.type)?new Blob(["\uFEFF",r],{type:r.type}):r}(i,t),e)}:function(i,e,t,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof i=="string")return U3(i,e,t);var r=i.type==="application/octet-stream",o=/constructor/i.test(Dt.HTMLElement)||Dt.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||r&&o)&&(typeof FileReader>"u"?"undefined":$n(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var d=a.result;d=s?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},a.readAsDataURL(i)}else{var l=Dt.URL||Dt.webkitURL,c=l.createObjectURL(i);n?n.location=c:location.href=c,n=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});function cR(i){var e;i=i||"",this.ok=!1,i.charAt(0)=="#"&&(i=i.substr(1,6)),i={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[i=(i=i.replace(/ /g,"")).toLowerCase()]||i;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],n=0;n<t.length;n++){var r=t[n].re,o=t[n].process,s=r.exec(i);s&&(e=o(s),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+a+l+c}}function H3(i,e){var t=i[0],n=i[1],r=i[2],o=i[3];t=Yr(t,n,r,o,e[0],7,-680876936),o=Yr(o,t,n,r,e[1],12,-389564586),r=Yr(r,o,t,n,e[2],17,606105819),n=Yr(n,r,o,t,e[3],22,-1044525330),t=Yr(t,n,r,o,e[4],7,-176418897),o=Yr(o,t,n,r,e[5],12,1200080426),r=Yr(r,o,t,n,e[6],17,-1473231341),n=Yr(n,r,o,t,e[7],22,-45705983),t=Yr(t,n,r,o,e[8],7,1770035416),o=Yr(o,t,n,r,e[9],12,-1958414417),r=Yr(r,o,t,n,e[10],17,-42063),n=Yr(n,r,o,t,e[11],22,-1990404162),t=Yr(t,n,r,o,e[12],7,1804603682),o=Yr(o,t,n,r,e[13],12,-40341101),r=Yr(r,o,t,n,e[14],17,-1502002290),t=Xr(t,n=Yr(n,r,o,t,e[15],22,1236535329),r,o,e[1],5,-165796510),o=Xr(o,t,n,r,e[6],9,-1069501632),r=Xr(r,o,t,n,e[11],14,643717713),n=Xr(n,r,o,t,e[0],20,-373897302),t=Xr(t,n,r,o,e[5],5,-701558691),o=Xr(o,t,n,r,e[10],9,38016083),r=Xr(r,o,t,n,e[15],14,-660478335),n=Xr(n,r,o,t,e[4],20,-405537848),t=Xr(t,n,r,o,e[9],5,568446438),o=Xr(o,t,n,r,e[14],9,-1019803690),r=Xr(r,o,t,n,e[3],14,-187363961),n=Xr(n,r,o,t,e[8],20,1163531501),t=Xr(t,n,r,o,e[13],5,-1444681467),o=Xr(o,t,n,r,e[2],9,-51403784),r=Xr(r,o,t,n,e[7],14,1735328473),t=Qr(t,n=Xr(n,r,o,t,e[12],20,-1926607734),r,o,e[5],4,-378558),o=Qr(o,t,n,r,e[8],11,-2022574463),r=Qr(r,o,t,n,e[11],16,1839030562),n=Qr(n,r,o,t,e[14],23,-35309556),t=Qr(t,n,r,o,e[1],4,-1530992060),o=Qr(o,t,n,r,e[4],11,1272893353),r=Qr(r,o,t,n,e[7],16,-155497632),n=Qr(n,r,o,t,e[10],23,-1094730640),t=Qr(t,n,r,o,e[13],4,681279174),o=Qr(o,t,n,r,e[0],11,-358537222),r=Qr(r,o,t,n,e[3],16,-722521979),n=Qr(n,r,o,t,e[6],23,76029189),t=Qr(t,n,r,o,e[9],4,-640364487),o=Qr(o,t,n,r,e[12],11,-421815835),r=Qr(r,o,t,n,e[15],16,530742520),t=Jr(t,n=Qr(n,r,o,t,e[2],23,-995338651),r,o,e[0],6,-198630844),o=Jr(o,t,n,r,e[7],10,1126891415),r=Jr(r,o,t,n,e[14],15,-1416354905),n=Jr(n,r,o,t,e[5],21,-57434055),t=Jr(t,n,r,o,e[12],6,1700485571),o=Jr(o,t,n,r,e[3],10,-1894986606),r=Jr(r,o,t,n,e[10],15,-1051523),n=Jr(n,r,o,t,e[1],21,-2054922799),t=Jr(t,n,r,o,e[8],6,1873313359),o=Jr(o,t,n,r,e[15],10,-30611744),r=Jr(r,o,t,n,e[6],15,-1560198380),n=Jr(n,r,o,t,e[13],21,1309151649),t=Jr(t,n,r,o,e[4],6,-145523070),o=Jr(o,t,n,r,e[11],10,-1120210379),r=Jr(r,o,t,n,e[2],15,718787259),n=Jr(n,r,o,t,e[9],21,-343485551),i[0]=Bd(t,i[0]),i[1]=Bd(n,i[1]),i[2]=Bd(r,i[2]),i[3]=Bd(o,i[3])}function by(i,e,t,n,r,o){return e=Bd(Bd(e,i),Bd(n,o)),Bd(e<<r|e>>>32-r,t)}function Yr(i,e,t,n,r,o,s){return by(e&t|~e&n,i,e,r,o,s)}function Xr(i,e,t,n,r,o,s){return by(e&n|t&~n,i,e,r,o,s)}function Qr(i,e,t,n,r,o,s){return by(e^t^n,i,e,r,o,s)}function Jr(i,e,t,n,r,o,s){return by(t^(e|~n),i,e,r,o,s)}function dR(i){var e,t=i.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=i.length;e+=64)H3(n,Qre(i.substring(e-64,e)));i=i.substring(e-64);var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<i.length;e++)r[e>>2]|=i.charCodeAt(e)<<(e%4<<3);if(r[e>>2]|=128<<(e%4<<3),e>55)for(H3(n,r),e=0;e<16;e++)r[e]=0;return r[14]=8*t,H3(n,r),n}function Qre(i){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=i.charCodeAt(e)+(i.charCodeAt(e+1)<<8)+(i.charCodeAt(e+2)<<16)+(i.charCodeAt(e+3)<<24);return t}ox=Dt.atob.bind(Dt),q3=Dt.btoa.bind(Dt);var qL="0123456789abcdef".split("");function Jre(i){for(var e="",t=0;t<4;t++)e+=qL[i>>8*t+4&15]+qL[i>>8*t&15];return e}function Zre(i){return String.fromCharCode((255&i)>>0,(65280&i)>>8,(16711680&i)>>16,(4278190080&i)>>24)}function K3(i){return dR(i).map(Zre).join("")}var eoe=function(i){for(var e=0;e<i.length;e++)i[e]=Jre(i[e]);return i.join("")}(dR("hello"))!="5d41402abc4b2a76b9719d911017c592";function Bd(i,e){if(eoe){var t=(65535&i)+(65535&e);return(i>>16)+(e>>16)+(t>>16)<<16|65535&t}return i+e&4294967295}function Y3(i,e){var t,n,r,o;if(i!==t){for(var s=(r=i,o=1+(256/i.length>>0),new Array(o+1).join(r)),a=[],l=0;l<256;l++)a[l]=l;var c=0;for(l=0;l<256;l++){var d=a[l];c=(c+d+s.charCodeAt(l))%256,a[l]=a[c],a[c]=d}t=i,n=a}else a=n;var h=e.length,p=0,g=0,_="";for(l=0;l<h;l++)g=(g+(d=a[p=(p+1)%256]))%256,a[p]=a[g],a[g]=d,s=a[(a[p]+a[g])%256],_+=String.fromCharCode(e.charCodeAt(l)^s);return _}var KL={print:4,modify:8,copy:16,"annot-forms":32};function Kf(i,e,t,n){this.v=1,this.r=2;var r=192;i.forEach(function(a){if(KL.perm!==void 0)throw new Error("Invalid permission: "+a);r+=KL[a]}),this.padding="(\xBFN^Nu\x8AAd\0NV\xFF\xFA\b..\0\xB6\xD0h>\x80/\f\xA9\xFEdSiz";var o=(e+this.padding).substr(0,32),s=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,s),this.P=-(1+(255^r)),this.encryptionKey=K3(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=Y3(this.encryptionKey,this.padding)}function Yf(i){if(/[^\u0000-\u00ff]/.test(i))throw new Error("Invalid PDF Name Object: "+i+", Only accept ASCII characters.");for(var e="",t=i.length,n=0;n<t;n++){var r=i.charCodeAt(n);r<33||r===35||r===37||r===40||r===41||r===47||r===60||r===62||r===91||r===93||r===123||r===125||r>126?e+="#"+("0"+r.toString(16)).slice(-2):e+=i[n]}return e}function YL(i){if($n(i)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,n,r){if(r=r||!1,typeof t!="string"||typeof n!="function"||typeof r!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var o=Math.random().toString(35);return e[t][o]=[n,!!r],o},this.unsubscribe=function(t){for(var n in e)if(e[n][t])return delete e[n][t],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var n=Array.prototype.slice.call(arguments,1),r=[];for(var o in e[t]){var s=e[t][o];try{s[0].apply(i,n)}catch(a){Dt.console&&ti.error("jsPDF PubSub Error",a.message,a)}s[1]&&r.push(o)}r.length&&r.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function _y(i){if(!(this instanceof _y))return new _y(i);var e="opacity,stroke-opacity".split(",");for(var t in i)i.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=i[t]);this.id="",this.objectNumber=-1}function uR(i,e){this.gState=i,this.matrix=e,this.id="",this.objectNumber=-1}function y0(i,e,t,n,r){if(!(this instanceof y0))return new y0(i,e,t,n,r);this.type=i==="axial"?2:3,this.coords=e,this.colors=t,uR.call(this,n,r)}function Xf(i,e,t,n,r){if(!(this instanceof Xf))return new Xf(i,e,t,n,r);this.boundingBox=i,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,uR.call(this,n,r)}function _t(i){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],r=arguments[2],o=arguments[3],s=[],a=1,l=16,c="S",d=null;$n(i=i||{})==="object"&&(t=i.orientation,n=i.unit||n,r=i.format||r,o=i.compress||i.compressPdf||o,(d=i.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),a=typeof i.userUnit=="number"?Math.abs(i.userUnit):1,i.precision!==void 0&&(e=i.precision),i.floatPrecision!==void 0&&(l=i.floatPrecision),c=i.defaultPathOperation||"S"),s=i.filters||(o===!0?["FlateEncode"]:s),n=n||"mm",t=(""+(t||"P")).toLowerCase();var h=i.putOnlyUsedFonts||!1,p={},g={internal:{},__private__:{}};g.__private__.PubSub=YL;var _="1.3",b=g.__private__.getPdfVersion=function(){return _};g.__private__.setPdfVersion=function(E){_=E};var C={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return C};var y=g.__private__.getPageFormat=function(E){return C[E]};r=r||"a4";var M={COMPAT:"compat",ADVANCED:"advanced"},O=M.COMPAT;function A(){this.saveGraphicsState(),ue(new kt(rt,0,0,-rt,0,Vc()*rt).toString()+" cm"),this.setFontSize(this.getFontSize()/rt),c="n",O=M.ADVANCED}function D(){this.restoreGraphicsState(),c="S",O=M.COMPAT}var N=g.__private__.combineFontStyleAndFontWeight=function(E,V){if(E=="bold"&&V=="normal"||E=="bold"&&V==400||E=="normal"&&V=="italic"||E=="bold"&&V=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return V&&(E=V==400||V==="normal"?E==="italic"?"italic":"normal":V!=700&&V!=="bold"||E!=="normal"?(V==700?"bold":V)+""+E:"bold"),E};g.advancedAPI=function(E){var V=O===M.COMPAT;return V&&A.call(this),typeof E!="function"||(E(this),V&&D.call(this)),this},g.compatAPI=function(E){var V=O===M.ADVANCED;return V&&D.call(this),typeof E!="function"||(E(this),V&&A.call(this)),this},g.isAdvancedAPI=function(){return O===M.ADVANCED};var B,T=function(E){if(O!==M.ADVANCED)throw new Error(E+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},H=g.roundToPrecision=g.__private__.roundToPrecision=function(E,V){var ae=e||V;if(isNaN(E)||isNaN(ae))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return E.toFixed(ae).replace(/0+$/,"")};B=g.hpf=g.__private__.hpf=typeof l=="number"?function(E){if(isNaN(E))throw new Error("Invalid argument passed to jsPDF.hpf");return H(E,l)}:l==="smart"?function(E){if(isNaN(E))throw new Error("Invalid argument passed to jsPDF.hpf");return H(E,E>-1&&E<1?16:5)}:function(E){if(isNaN(E))throw new Error("Invalid argument passed to jsPDF.hpf");return H(E,16)};var te=g.f2=g.__private__.f2=function(E){if(isNaN(E))throw new Error("Invalid argument passed to jsPDF.f2");return H(E,2)},L=g.__private__.f3=function(E){if(isNaN(E))throw new Error("Invalid argument passed to jsPDF.f3");return H(E,3)},z=g.scale=g.__private__.scale=function(E){if(isNaN(E))throw new Error("Invalid argument passed to jsPDF.scale");return O===M.COMPAT?E*rt:O===M.ADVANCED?E:void 0},J=function(E){return O===M.COMPAT?Vc()-E:O===M.ADVANCED?E:void 0},Q=function(E){return z(J(E))};g.__private__.setPrecision=g.setPrecision=function(E){typeof parseInt(E,10)=="number"&&(e=parseInt(E,10))};var ce,X="00000000000000000000000000000000",ie=g.__private__.getFileId=function(){return X},oe=g.__private__.setFileId=function(E){return X=E!==void 0&&/^[a-fA-F0-9]{32}$/.test(E)?E.toUpperCase():X.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(Lr=new Kf(d.userPermissions,d.userPassword,d.ownerPassword,X)),X};g.setFileId=function(E){return oe(E),this},g.getFileId=function(){return ie()};var le=g.__private__.convertDateToPDFDate=function(E){var V=E.getTimezoneOffset(),ae=V<0?"+":"-",pe=Math.floor(Math.abs(V/60)),Ee=Math.abs(V%60),Be=[ae,re(pe),"'",re(Ee),"'"].join("");return["D:",E.getFullYear(),re(E.getMonth()+1),re(E.getDate()),re(E.getHours()),re(E.getMinutes()),re(E.getSeconds()),Be].join("")},Ce=g.__private__.convertPDFDateToDate=function(E){var V=parseInt(E.substr(2,4),10),ae=parseInt(E.substr(6,2),10)-1,pe=parseInt(E.substr(8,2),10),Ee=parseInt(E.substr(10,2),10),Be=parseInt(E.substr(12,2),10),qe=parseInt(E.substr(14,2),10);return new Date(V,ae,pe,Ee,Be,qe,0)},Ne=g.__private__.setCreationDate=function(E){var V;if(E===void 0&&(E=new Date),E instanceof Date)V=le(E);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(E))throw new Error("Invalid argument passed to jsPDF.setCreationDate");V=E}return ce=V},R=g.__private__.getCreationDate=function(E){var V=ce;return E==="jsDate"&&(V=Ce(ce)),V};g.setCreationDate=function(E){return Ne(E),this},g.getCreationDate=function(E){return R(E)};var ne,re=g.__private__.padd2=function(E){return("0"+parseInt(E)).slice(-2)},de=g.__private__.padd2Hex=function(E){return("00"+(E=E.toString())).substr(E.length)},fe=0,me=[],Pe=[],Me=0,Ue=[],He=[],Xe=!1,Ye=Pe,wt=function(){fe=0,Me=0,Pe=[],me=[],Ue=[],Nl=Xi(),Ys=Xi()};g.__private__.setCustomOutputDestination=function(E){Xe=!0,Ye=E};var Te=function(E){Xe||(Ye=E)};g.__private__.resetCustomOutputDestination=function(){Xe=!1,Ye=Pe};var ue=g.__private__.out=function(E){return E=E.toString(),Me+=E.length+1,Ye.push(E),Ye},Ot=g.__private__.write=function(E){return ue(arguments.length===1?E.toString():Array.prototype.join.call(arguments," "))},Ct=g.__private__.getArrayBuffer=function(E){for(var V=E.length,ae=new ArrayBuffer(V),pe=new Uint8Array(ae);V--;)pe[V]=E.charCodeAt(V);return ae},We=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return We};var Qe=i.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(E){return Qe=O===M.ADVANCED?E/rt:E,this};var it,nt=g.__private__.getFontSize=g.getFontSize=function(){return O===M.COMPAT?Qe:Qe*rt},Et=i.R2L||!1;g.__private__.setR2L=g.setR2L=function(E){return Et=E,this},g.__private__.getR2L=g.getR2L=function(){return Et};var Nt,Kt=g.__private__.setZoomMode=function(E){var V=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(E))it=E;else if(isNaN(E)){if(V.indexOf(E)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+E+'" is not recognized.');it=E}else it=parseInt(E,10)};g.__private__.getZoomMode=function(){return it};var nn,Cn=g.__private__.setPageMode=function(E){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(E)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+E+'" is not recognized.');Nt=E};g.__private__.getPageMode=function(){return Nt};var Hn=g.__private__.setLayoutMode=function(E){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(E)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+E+'" is not recognized.');nn=E};g.__private__.getLayoutMode=function(){return nn},g.__private__.setDisplayMode=g.setDisplayMode=function(E,V,ae){return Kt(E),Hn(V),Cn(ae),this};var Ft={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(E){if(Object.keys(Ft).indexOf(E)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ft[E]},g.__private__.getDocumentProperties=function(){return Ft},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(E){for(var V in Ft)Ft.hasOwnProperty(V)&&E[V]&&(Ft[V]=E[V]);return this},g.__private__.setDocumentProperty=function(E,V){if(Object.keys(Ft).indexOf(E)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ft[E]=V};var sn,rt,Nr,En,Ws,Qn={},mi={},Ra=[],Tn={},nu={},Oi={},qs={},Bl=null,Si=0,Lt=[],Bn=new YL(g),iu=i.hotfixes||[],Sr={},za={},ja=[],kt=function E(V,ae,pe,Ee,Be,qe){if(!(this instanceof E))return new E(V,ae,pe,Ee,Be,qe);isNaN(V)&&(V=1),isNaN(ae)&&(ae=0),isNaN(pe)&&(pe=0),isNaN(Ee)&&(Ee=1),isNaN(Be)&&(Be=0),isNaN(qe)&&(qe=0),this._matrix=[V,ae,pe,Ee,Be,qe]};Object.defineProperty(kt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(E){this._matrix[0]=E}}),Object.defineProperty(kt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(E){this._matrix[1]=E}}),Object.defineProperty(kt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(E){this._matrix[2]=E}}),Object.defineProperty(kt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(E){this._matrix[3]=E}}),Object.defineProperty(kt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(E){this._matrix[4]=E}}),Object.defineProperty(kt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(E){this._matrix[5]=E}}),Object.defineProperty(kt.prototype,"a",{get:function(){return this._matrix[0]},set:function(E){this._matrix[0]=E}}),Object.defineProperty(kt.prototype,"b",{get:function(){return this._matrix[1]},set:function(E){this._matrix[1]=E}}),Object.defineProperty(kt.prototype,"c",{get:function(){return this._matrix[2]},set:function(E){this._matrix[2]=E}}),Object.defineProperty(kt.prototype,"d",{get:function(){return this._matrix[3]},set:function(E){this._matrix[3]=E}}),Object.defineProperty(kt.prototype,"e",{get:function(){return this._matrix[4]},set:function(E){this._matrix[4]=E}}),Object.defineProperty(kt.prototype,"f",{get:function(){return this._matrix[5]},set:function(E){this._matrix[5]=E}}),Object.defineProperty(kt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(kt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(kt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(kt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),kt.prototype.join=function(E){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(B).join(E)},kt.prototype.multiply=function(E){var V=E.sx*this.sx+E.shy*this.shx,ae=E.sx*this.shy+E.shy*this.sy,pe=E.shx*this.sx+E.sy*this.shx,Ee=E.shx*this.shy+E.sy*this.sy,Be=E.tx*this.sx+E.ty*this.shx+this.tx,qe=E.tx*this.shy+E.ty*this.sy+this.ty;return new kt(V,ae,pe,Ee,Be,qe)},kt.prototype.decompose=function(){var E=this.sx,V=this.shy,ae=this.shx,pe=this.sy,Ee=this.tx,Be=this.ty,qe=Math.sqrt(E*E+V*V),ct=(E/=qe)*ae+(V/=qe)*pe;ae-=E*ct,pe-=V*ct;var Pt=Math.sqrt(ae*ae+pe*pe);return ct/=Pt,E*(pe/=Pt)<V*(ae/=Pt)&&(E=-E,V=-V,ct=-ct,qe=-qe),{scale:new kt(qe,0,0,Pt,0,0),translate:new kt(1,0,0,1,Ee,Be),rotate:new kt(E,V,-V,E,0,0),skew:new kt(1,0,ct,1,0,0)}},kt.prototype.toString=function(E){return this.join(" ")},kt.prototype.inversed=function(){var E=this.sx,V=this.shy,ae=this.shx,pe=this.sy,Ee=this.tx,Be=this.ty,qe=1/(E*pe-V*ae),ct=pe*qe,Pt=-V*qe,Gt=-ae*qe,Rt=E*qe;return new kt(ct,Pt,Gt,Rt,-ct*Ee-Gt*Be,-Pt*Ee-Rt*Be)},kt.prototype.applyToPoint=function(E){var V=E.x*this.sx+E.y*this.shx+this.tx,ae=E.x*this.shy+E.y*this.sy+this.ty;return new sh(V,ae)},kt.prototype.applyToRectangle=function(E){var V=this.applyToPoint(E),ae=this.applyToPoint(new sh(E.x+E.w,E.y+E.h));return new Hg(V.x,V.y,ae.x-V.x,ae.y-V.y)},kt.prototype.clone=function(){var E=this.sx,V=this.shy,ae=this.shx,pe=this.sy,Ee=this.tx,Be=this.ty;return new kt(E,V,ae,pe,Ee,Be)},g.Matrix=kt;var Ks=g.matrixMult=function(E,V){return V.multiply(E)},Va=new kt(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=Va;var mo=function(E,V){if(!nu[E]){var ae=(V instanceof y0?"Sh":"P")+(Object.keys(Tn).length+1).toString(10);V.id=ae,nu[E]=ae,Tn[ae]=V,Bn.publish("addPattern",V)}};g.ShadingPattern=y0,g.TilingPattern=Xf,g.addShadingPattern=function(E,V){return T("addShadingPattern()"),mo(E,V),this},g.beginTilingPattern=function(E){T("beginTilingPattern()"),I1(E.boundingBox[0],E.boundingBox[1],E.boundingBox[2]-E.boundingBox[0],E.boundingBox[3]-E.boundingBox[1],E.matrix)},g.endTilingPattern=function(E,V){T("endTilingPattern()"),V.stream=He[ne].join(`
`),mo(E,V),Bn.publish("endTilingPattern",V),ja.pop().restore()};var dr=g.__private__.newObject=function(){var E=Xi();return Yo(E,!0),E},Xi=g.__private__.newObjectDeferred=function(){return fe++,me[fe]=function(){return Me},fe},Yo=function(E,V){return V=typeof V=="boolean"&&V,me[E]=Me,V&&ue(E+" 0 obj"),E},q0=g.__private__.newAdditionalObject=function(){var E={objId:Xi(),content:""};return Ue.push(E),E},Nl=Xi(),Ys=Xi(),Xs=g.__private__.decodeColorString=function(E){var V=E.split(" ");if(V.length!==2||V[1]!=="g"&&V[1]!=="G")V.length===5&&(V[4]==="k"||V[4]==="K")&&(V=[(1-V[0])*(1-V[3]),(1-V[1])*(1-V[3]),(1-V[2])*(1-V[3]),"r"]);else{var ae=parseFloat(V[0]);V=[ae,ae,ae,"r"]}for(var pe="#",Ee=0;Ee<3;Ee++)pe+=("0"+Math.floor(255*parseFloat(V[Ee])).toString(16)).slice(-2);return pe},Qs=g.__private__.encodeColorString=function(E){var V;typeof E=="string"&&(E={ch1:E});var ae=E.ch1,pe=E.ch2,Ee=E.ch3,Be=E.ch4,qe=E.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ae=="string"&&ae.charAt(0)!=="#"){var ct=new cR(ae);if(ct.ok)ae=ct.toHex();else if(!/^\d*\.?\d*$/.test(ae))throw new Error('Invalid color "'+ae+'" passed to jsPDF.encodeColorString.')}if(typeof ae=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ae)&&(ae="#"+ae[1]+ae[1]+ae[2]+ae[2]+ae[3]+ae[3]),typeof ae=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ae)){var Pt=parseInt(ae.substr(1),16);ae=Pt>>16&255,pe=Pt>>8&255,Ee=255&Pt}if(pe===void 0||Be===void 0&&ae===pe&&pe===Ee)if(typeof ae=="string")V=ae+" "+qe[0];else switch(E.precision){case 2:V=te(ae/255)+" "+qe[0];break;case 3:default:V=L(ae/255)+" "+qe[0]}else if(Be===void 0||$n(Be)==="object"){if(Be&&!isNaN(Be.a)&&Be.a===0)return V=["1.","1.","1.",qe[1]].join(" ");if(typeof ae=="string")V=[ae,pe,Ee,qe[1]].join(" ");else switch(E.precision){case 2:V=[te(ae/255),te(pe/255),te(Ee/255),qe[1]].join(" ");break;default:case 3:V=[L(ae/255),L(pe/255),L(Ee/255),qe[1]].join(" ")}}else if(typeof ae=="string")V=[ae,pe,Ee,Be,qe[2]].join(" ");else switch(E.precision){case 2:V=[te(ae),te(pe),te(Ee),te(Be),qe[2]].join(" ");break;case 3:default:V=[L(ae),L(pe),L(Ee),L(Be),qe[2]].join(" ")}return V},Ua=g.__private__.getFilters=function(){return s},bs=g.__private__.putStream=function(E){var V=(E=E||{}).data||"",ae=E.filters||Ua(),pe=E.alreadyAppliedFilters||[],Ee=E.addLength1||!1,Be=V.length,qe=E.objectId,ct=function(Rr){return Rr};if(d!==null&&qe===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(ct=Lr.encryptor(qe,0));var Pt={};ae===!0&&(ae=["FlateEncode"]);var Gt=E.additionalKeyValues||[],Rt=(Pt=_t.API.processDataByFilters!==void 0?_t.API.processDataByFilters(V,ae):{data:V,reverseChain:[]}).reverseChain+(Array.isArray(pe)?pe.join(" "):pe.toString());if(Pt.data.length!==0&&(Gt.push({key:"Length",value:Pt.data.length}),Ee===!0&&Gt.push({key:"Length1",value:Be})),Rt.length!=0)if(Rt.split("/").length-1==1)Gt.push({key:"Filter",value:Rt});else{Gt.push({key:"Filter",value:"["+Rt+"]"});for(var xn=0;xn<Gt.length;xn+=1)if(Gt[xn].key==="DecodeParms"){for(var bi=[],ki=0;ki<Pt.reverseChain.split("/").length-1;ki+=1)bi.push("null");bi.push(Gt[xn].value),Gt[xn].value="["+bi.join(" ")+"]"}}ue("<<");for(var Qi=0;Qi<Gt.length;Qi++)ue("/"+Gt[Qi].key+" "+Gt[Qi].value);ue(">>"),Pt.data.length!==0&&(ue("stream"),ue(ct(Pt.data)),ue("endstream"))},Ha=g.__private__.putPage=function(E){var V=E.number,ae=E.data,pe=E.objId,Ee=E.contentsObjId;Yo(pe,!0),ue("<</Type /Page"),ue("/Parent "+E.rootDictionaryObjId+" 0 R"),ue("/Resources "+E.resourceDictionaryObjId+" 0 R"),ue("/MediaBox ["+parseFloat(B(E.mediaBox.bottomLeftX))+" "+parseFloat(B(E.mediaBox.bottomLeftY))+" "+B(E.mediaBox.topRightX)+" "+B(E.mediaBox.topRightY)+"]"),E.cropBox!==null&&ue("/CropBox ["+B(E.cropBox.bottomLeftX)+" "+B(E.cropBox.bottomLeftY)+" "+B(E.cropBox.topRightX)+" "+B(E.cropBox.topRightY)+"]"),E.bleedBox!==null&&ue("/BleedBox ["+B(E.bleedBox.bottomLeftX)+" "+B(E.bleedBox.bottomLeftY)+" "+B(E.bleedBox.topRightX)+" "+B(E.bleedBox.topRightY)+"]"),E.trimBox!==null&&ue("/TrimBox ["+B(E.trimBox.bottomLeftX)+" "+B(E.trimBox.bottomLeftY)+" "+B(E.trimBox.topRightX)+" "+B(E.trimBox.topRightY)+"]"),E.artBox!==null&&ue("/ArtBox ["+B(E.artBox.bottomLeftX)+" "+B(E.artBox.bottomLeftY)+" "+B(E.artBox.topRightX)+" "+B(E.artBox.topRightY)+"]"),typeof E.userUnit=="number"&&E.userUnit!==1&&ue("/UserUnit "+E.userUnit),Bn.publish("putPage",{objId:pe,pageContext:Lt[V],pageNumber:V,page:ae}),ue("/Contents "+Ee+" 0 R"),ue(">>"),ue("endobj");var Be=ae.join(`
`);return O===M.ADVANCED&&(Be+=`
Q`),Yo(Ee,!0),bs({data:Be,filters:Ua(),objectId:Ee}),ue("endobj"),pe},ru=g.__private__.putPages=function(){var E,V,ae=[];for(E=1;E<=Si;E++)Lt[E].objId=Xi(),Lt[E].contentsObjId=Xi();for(E=1;E<=Si;E++)ae.push(Ha({number:E,data:He[E],objId:Lt[E].objId,contentsObjId:Lt[E].contentsObjId,mediaBox:Lt[E].mediaBox,cropBox:Lt[E].cropBox,bleedBox:Lt[E].bleedBox,trimBox:Lt[E].trimBox,artBox:Lt[E].artBox,userUnit:Lt[E].userUnit,rootDictionaryObjId:Nl,resourceDictionaryObjId:Ys}));Yo(Nl,!0),ue("<</Type /Pages");var pe="/Kids [";for(V=0;V<Si;V++)pe+=ae[V]+" 0 R ";ue(pe+"]"),ue("/Count "+Si),ue(">>"),ue("endobj"),Bn.publish("postPutPages")},K0=function(E){Bn.publish("putFont",{font:E,out:ue,newObject:dr,putStream:bs}),E.isAlreadyPutted!==!0&&(E.objectNumber=dr(),ue("<<"),ue("/Type /Font"),ue("/BaseFont /"+Yf(E.postScriptName)),ue("/Subtype /Type1"),typeof E.encoding=="string"&&ue("/Encoding /"+E.encoding),ue("/FirstChar 32"),ue("/LastChar 255"),ue(">>"),ue("endobj"))},Y0=function(){for(var E in Qn)Qn.hasOwnProperty(E)&&(h===!1||h===!0&&p.hasOwnProperty(E))&&K0(Qn[E])},X0=function(E){E.objectNumber=dr();var V=[];V.push({key:"Type",value:"/XObject"}),V.push({key:"Subtype",value:"/Form"}),V.push({key:"BBox",value:"["+[B(E.x),B(E.y),B(E.x+E.width),B(E.y+E.height)].join(" ")+"]"}),V.push({key:"Matrix",value:"["+E.matrix.toString()+"]"});var ae=E.pages[1].join(`
`);bs({data:ae,additionalKeyValues:V,objectId:E.objectNumber}),ue("endobj")},Q0=function(){for(var E in Sr)Sr.hasOwnProperty(E)&&X0(Sr[E])},p1=function(E,V){var ae,pe=[],Ee=1/(V-1);for(ae=0;ae<1;ae+=Ee)pe.push(ae);if(pe.push(1),E[0].offset!=0){var Be={offset:0,color:E[0].color};E.unshift(Be)}if(E[E.length-1].offset!=1){var qe={offset:1,color:E[E.length-1].color};E.push(qe)}for(var ct="",Pt=0,Gt=0;Gt<pe.length;Gt++){for(ae=pe[Gt];ae>E[Pt+1].offset;)Pt++;var Rt=E[Pt].offset,xn=(ae-Rt)/(E[Pt+1].offset-Rt),bi=E[Pt].color,ki=E[Pt+1].color;ct+=de(Math.round((1-xn)*bi[0]+xn*ki[0]).toString(16))+de(Math.round((1-xn)*bi[1]+xn*ki[1]).toString(16))+de(Math.round((1-xn)*bi[2]+xn*ki[2]).toString(16))}return ct.trim()},_w=function(E,V){V||(V=21);var ae=dr(),pe=p1(E.colors,V),Ee=[];Ee.push({key:"FunctionType",value:"0"}),Ee.push({key:"Domain",value:"[0.0 1.0]"}),Ee.push({key:"Size",value:"["+V+"]"}),Ee.push({key:"BitsPerSample",value:"8"}),Ee.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ee.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),bs({data:pe,additionalKeyValues:Ee,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ae}),ue("endobj"),E.objectNumber=dr(),ue("<< /ShadingType "+E.type),ue("/ColorSpace /DeviceRGB");var Be="/Coords ["+B(parseFloat(E.coords[0]))+" "+B(parseFloat(E.coords[1]))+" ";E.type===2?Be+=B(parseFloat(E.coords[2]))+" "+B(parseFloat(E.coords[3])):Be+=B(parseFloat(E.coords[2]))+" "+B(parseFloat(E.coords[3]))+" "+B(parseFloat(E.coords[4]))+" "+B(parseFloat(E.coords[5])),ue(Be+="]"),E.matrix&&ue("/Matrix ["+E.matrix.toString()+"]"),ue("/Function "+ae+" 0 R"),ue("/Extend [true true]"),ue(">>"),ue("endobj")},vw=function(E,V){var ae=Xi(),pe=dr();V.push({resourcesOid:ae,objectOid:pe}),E.objectNumber=pe;var Ee=[];Ee.push({key:"Type",value:"/Pattern"}),Ee.push({key:"PatternType",value:"1"}),Ee.push({key:"PaintType",value:"1"}),Ee.push({key:"TilingType",value:"1"}),Ee.push({key:"BBox",value:"["+E.boundingBox.map(B).join(" ")+"]"}),Ee.push({key:"XStep",value:B(E.xStep)}),Ee.push({key:"YStep",value:B(E.yStep)}),Ee.push({key:"Resources",value:ae+" 0 R"}),E.matrix&&Ee.push({key:"Matrix",value:"["+E.matrix.toString()+"]"}),bs({data:E.stream,additionalKeyValues:Ee,objectId:E.objectNumber}),ue("endobj")},J0=function(E){var V;for(V in Tn)Tn.hasOwnProperty(V)&&(Tn[V]instanceof y0?_w(Tn[V]):Tn[V]instanceof Xf&&vw(Tn[V],E))},m1=function(E){for(var V in E.objectNumber=dr(),ue("<<"),E)switch(V){case"opacity":ue("/ca "+te(E[V]));break;case"stroke-opacity":ue("/CA "+te(E[V]))}ue(">>"),ue("endobj")},bw=function(){var E;for(E in Oi)Oi.hasOwnProperty(E)&&m1(Oi[E])},Ig=function(){for(var E in ue("/XObject <<"),Sr)Sr.hasOwnProperty(E)&&Sr[E].objectNumber>=0&&ue("/"+E+" "+Sr[E].objectNumber+" 0 R");Bn.publish("putXobjectDict"),ue(">>")},Cw=function(){Lr.oid=dr(),ue("<<"),ue("/Filter /Standard"),ue("/V "+Lr.v),ue("/R "+Lr.r),ue("/U <"+Lr.toHexString(Lr.U)+">"),ue("/O <"+Lr.toHexString(Lr.O)+">"),ue("/P "+Lr.P),ue(">>"),ue("endobj")},x1=function(){for(var E in ue("/Font <<"),Qn)Qn.hasOwnProperty(E)&&(h===!1||h===!0&&p.hasOwnProperty(E))&&ue("/"+E+" "+Qn[E].objectNumber+" 0 R");ue(">>")},yw=function(){if(Object.keys(Tn).length>0){for(var E in ue("/Shading <<"),Tn)Tn.hasOwnProperty(E)&&Tn[E]instanceof y0&&Tn[E].objectNumber>=0&&ue("/"+E+" "+Tn[E].objectNumber+" 0 R");Bn.publish("putShadingPatternDict"),ue(">>")}},Z0=function(E){if(Object.keys(Tn).length>0){for(var V in ue("/Pattern <<"),Tn)Tn.hasOwnProperty(V)&&Tn[V]instanceof g.TilingPattern&&Tn[V].objectNumber>=0&&Tn[V].objectNumber<E&&ue("/"+V+" "+Tn[V].objectNumber+" 0 R");Bn.publish("putTilingPatternDict"),ue(">>")}},ww=function(){if(Object.keys(Oi).length>0){var E;for(E in ue("/ExtGState <<"),Oi)Oi.hasOwnProperty(E)&&Oi[E].objectNumber>=0&&ue("/"+E+" "+Oi[E].objectNumber+" 0 R");Bn.publish("putGStateDict"),ue(">>")}},Ri=function(E){Yo(E.resourcesOid,!0),ue("<<"),ue("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),x1(),yw(),Z0(E.objectOid),ww(),Ig(),ue(">>"),ue("endobj")},_1=function(){var E=[];Y0(),bw(),Q0(),J0(E),Bn.publish("putResources"),E.forEach(Ri),Ri({resourcesOid:Ys,objectOid:Number.MAX_SAFE_INTEGER}),Bn.publish("postPutResources")},v1=function(){Bn.publish("putAdditionalObjects");for(var E=0;E<Ue.length;E++){var V=Ue[E];Yo(V.objId,!0),ue(V.content),ue("endobj")}Bn.publish("postPutAdditionalObjects")},b1=function(E){mi[E.fontName]=mi[E.fontName]||{},mi[E.fontName][E.fontStyle]=E.id},Tg=function(E,V,ae,pe,Ee){var Be={id:"F"+(Object.keys(Qn).length+1).toString(10),postScriptName:E,fontName:V,fontStyle:ae,encoding:pe,isStandardFont:Ee||!1,metadata:{}};return Bn.publish("addFont",{font:Be,instance:this}),Qn[Be.id]=Be,b1(Be),Be.id},Mw=function(E){for(var V=0,ae=We.length;V<ae;V++){var pe=Tg.call(this,E[V][0],E[V][1],E[V][2],We[V][3],!0);h===!1&&(p[pe]=!0);var Ee=E[V][0].split("-");b1({id:pe,fontName:Ee[0],fontStyle:Ee[1]||""})}Bn.publish("addFonts",{fonts:Qn,dictionary:mi})},Js=function(E){return E.foo=function(){try{return E.apply(this,arguments)}catch(pe){var V=pe.stack||"";~V.indexOf(" at ")&&(V=V.split(" at ")[1]);var ae="Error in function "+V.split(`
`)[0].split("<")[0]+": "+pe.message;if(!Dt.console)throw new Error(ae);Dt.console.error(ae,pe),Dt.alert&&alert(ae)}},E.foo.bar=E,E.foo},eh=function(E,V){var ae,pe,Ee,Be,qe,ct,Pt,Gt,Rt;if(Ee=(V=V||{}).sourceEncoding||"Unicode",qe=V.outputEncoding,(V.autoencode||qe)&&Qn[sn].metadata&&Qn[sn].metadata[Ee]&&Qn[sn].metadata[Ee].encoding&&(Be=Qn[sn].metadata[Ee].encoding,!qe&&Qn[sn].encoding&&(qe=Qn[sn].encoding),!qe&&Be.codePages&&(qe=Be.codePages[0]),typeof qe=="string"&&(qe=Be[qe]),qe)){for(Pt=!1,ct=[],ae=0,pe=E.length;ae<pe;ae++)(Gt=qe[E.charCodeAt(ae)])?ct.push(String.fromCharCode(Gt)):ct.push(E[ae]),ct[ae].charCodeAt(0)>>8&&(Pt=!0);E=ct.join("")}for(ae=E.length;Pt===void 0&&ae!==0;)E.charCodeAt(ae-1)>>8&&(Pt=!0),ae--;if(!Pt)return E;for(ct=V.noBOM?[]:[254,255],ae=0,pe=E.length;ae<pe;ae++){if((Rt=(Gt=E.charCodeAt(ae))>>8)>>8)throw new Error("Character at position "+ae+" of string '"+E+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");ct.push(Rt),ct.push(Gt-(Rt<<8))}return String.fromCharCode.apply(void 0,ct)},xo=g.__private__.pdfEscape=g.pdfEscape=function(E,V){return eh(E,V).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Bg=g.__private__.beginPage=function(E){He[++Si]=[],Lt[Si]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(E[0]),topRightY:Number(E[1])}},y1(Si),Te(He[ne])},C1=function(E,V){var ae,pe,Ee;switch(t=V||t,typeof E=="string"&&(ae=y(E.toLowerCase()),Array.isArray(ae)&&(pe=ae[0],Ee=ae[1])),Array.isArray(E)&&(pe=E[0]*rt,Ee=E[1]*rt),isNaN(pe)&&(pe=r[0],Ee=r[1]),(pe>14400||Ee>14400)&&(ti.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),pe=Math.min(14400,pe),Ee=Math.min(14400,Ee)),r=[pe,Ee],t.substr(0,1)){case"l":Ee>pe&&(r=[Ee,pe]);break;case"p":pe>Ee&&(r=[Ee,pe])}Bg(r),S1(zg),ue(Zs),Vg!==0&&ue(Vg+" J"),Ug!==0&&ue(Ug+" j"),Bn.publish("addPage",{pageNumber:Si})},Ew=function(E){E>0&&E<=Si&&(He.splice(E,1),Lt.splice(E,1),Si--,ne>Si&&(ne=Si),this.setPage(ne))},y1=function(E){E>0&&E<=Si&&(ne=E)},Pw=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return He.length-1},w1=function(E,V,ae){var pe,Ee=void 0;return ae=ae||{},E=E!==void 0?E:Qn[sn].fontName,V=V!==void 0?V:Qn[sn].fontStyle,pe=E.toLowerCase(),mi[pe]!==void 0&&mi[pe][V]!==void 0?Ee=mi[pe][V]:mi[E]!==void 0&&mi[E][V]!==void 0?Ee=mi[E][V]:ae.disableWarning===!1&&ti.warn("Unable to look up font label for font '"+E+"', '"+V+"'. Refer to getFontList() for available fonts."),Ee||ae.noFallback||(Ee=mi.times[V])==null&&(Ee=mi.times.normal),Ee},Ow=g.__private__.putInfo=function(){var E=dr(),V=function(pe){return pe};for(var ae in d!==null&&(V=Lr.encryptor(E,0)),ue("<<"),ue("/Producer ("+xo(V("jsPDF "+_t.version))+")"),Ft)Ft.hasOwnProperty(ae)&&Ft[ae]&&ue("/"+ae.substr(0,1).toUpperCase()+ae.substr(1)+" ("+xo(V(Ft[ae]))+")");ue("/CreationDate ("+xo(V(ce))+")"),ue(">>"),ue("endobj")},Ng=g.__private__.putCatalog=function(E){var V=(E=E||{}).rootDictionaryObjId||Nl;switch(dr(),ue("<<"),ue("/Type /Catalog"),ue("/Pages "+V+" 0 R"),it||(it="fullwidth"),it){case"fullwidth":ue("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ue("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ue("/OpenAction [3 0 R /Fit]");break;case"original":ue("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ae=""+it;ae.substr(ae.length-1)==="%"&&(it=parseInt(it)/100),typeof it=="number"&&ue("/OpenAction [3 0 R /XYZ null null "+te(it)+"]")}switch(nn||(nn="continuous"),nn){case"continuous":ue("/PageLayout /OneColumn");break;case"single":ue("/PageLayout /SinglePage");break;case"two":case"twoleft":ue("/PageLayout /TwoColumnLeft");break;case"tworight":ue("/PageLayout /TwoColumnRight")}Nt&&ue("/PageMode /"+Nt),Bn.publish("putCatalog"),ue(">>"),ue("endobj")},Sw=g.__private__.putTrailer=function(){ue("trailer"),ue("<<"),ue("/Size "+(fe+1)),ue("/Root "+fe+" 0 R"),ue("/Info "+(fe-1)+" 0 R"),d!==null&&ue("/Encrypt "+Lr.oid+" 0 R"),ue("/ID [ <"+X+"> <"+X+"> ]"),ue(">>")},kw=g.__private__.putHeader=function(){ue("%PDF-"+_),ue("%\xBA\xDF\xAC\xE0")},Aw=g.__private__.putXRef=function(){var E="0000000000";ue("xref"),ue("0 "+(fe+1)),ue("0000000000 65535 f ");for(var V=1;V<=fe;V++)typeof me[V]=="function"?ue((E+me[V]()).slice(-10)+" 00000 n "):me[V]!==void 0?ue((E+me[V]).slice(-10)+" 00000 n "):ue("0000000000 00000 n ")},Ll=g.__private__.buildDocument=function(){wt(),Te(Pe),Bn.publish("buildDocument"),kw(),ru(),v1(),_1(),d!==null&&Cw(),Ow(),Ng();var E=Me;return Aw(),Sw(),ue("startxref"),ue(""+E),ue("%%EOF"),Te(He[ne]),Pe.join(`
`)},th=g.__private__.getBlob=function(E){return new Blob([Ct(E)],{type:"application/pdf"})},nh=g.output=g.__private__.output=Js(function(E,V){switch(typeof(V=V||{})=="string"?V={filename:V}:V.filename=V.filename||"generated.pdf",E){case void 0:return Ll();case"save":g.save(V.filename);break;case"arraybuffer":return Ct(Ll());case"blob":return th(Ll());case"bloburi":case"bloburl":if(Dt.URL!==void 0&&typeof Dt.URL.createObjectURL=="function")return Dt.URL&&Dt.URL.createObjectURL(th(Ll()))||void 0;ti.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ae="",pe=Ll();try{ae=q3(pe)}catch{ae=q3(unescape(encodeURIComponent(pe)))}return"data:application/pdf;filename="+V.filename+";base64,"+ae;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Dt)==="[object Window]"){var Ee="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Be=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';V.pdfObjectUrl&&(Ee=V.pdfObjectUrl,Be="");var qe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ee+'"'+Be+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(V)+");<\/script></body></html>",ct=Dt.open();return ct!==null&&ct.document.write(qe),ct}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Dt)==="[object Window]"){var Pt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(V.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+V.filename+'" width="500px" height="400px" /></body></html>',Gt=Dt.open();if(Gt!==null){Gt.document.write(Pt);var Rt=this;Gt.document.documentElement.querySelector("#pdfViewer").onload=function(){Gt.document.title=V.filename,Gt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Rt.output("bloburl"))}}return Gt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Dt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var xn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",V)+'"></iframe></body></html>',bi=Dt.open();if(bi!==null&&(bi.document.write(xn),bi.document.title=V.filename),bi||typeof safari>"u")return bi;break;case"datauri":case"dataurl":return Dt.document.location.href=this.output("datauristring",V);default:return null}}),M1=function(E){return Array.isArray(iu)===!0&&iu.indexOf(E)>-1};switch(n){case"pt":rt=1;break;case"mm":rt=72/25.4;break;case"cm":rt=72/2.54;break;case"in":rt=72;break;case"px":rt=M1("px_scaling")==1?.75:96/72;break;case"pc":case"em":rt=12;break;case"ex":rt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);rt=n}var Lr=null;Ne(),oe();var Dw=function(E){return d!==null?Lr.encryptor(E,0):function(V){return V}},E1=g.__private__.getPageInfo=g.getPageInfo=function(E){if(isNaN(E)||E%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Lt[E].objId,pageNumber:E,pageContext:Lt[E]}},Tt=g.__private__.getPageInfoByObjId=function(E){if(isNaN(E)||E%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var V in Lt)if(Lt[V].objId===E)break;return E1(V)},Fw=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:Lt[ne].objId,pageNumber:ne,pageContext:Lt[ne]}};g.addPage=function(){return C1.apply(this,arguments),this},g.setPage=function(){return y1.apply(this,arguments),Te.call(this,He[ne]),this},g.insertPage=function(E){return this.addPage(),this.movePage(ne,E),this},g.movePage=function(E,V){var ae,pe;if(E>V){ae=He[E],pe=Lt[E];for(var Ee=E;Ee>V;Ee--)He[Ee]=He[Ee-1],Lt[Ee]=Lt[Ee-1];He[V]=ae,Lt[V]=pe,this.setPage(V)}else if(E<V){ae=He[E],pe=Lt[E];for(var Be=E;Be<V;Be++)He[Be]=He[Be+1],Lt[Be]=Lt[Be+1];He[V]=ae,Lt[V]=pe,this.setPage(V)}return this},g.deletePage=function(){return Ew.apply(this,arguments),this},g.__private__.text=g.text=function(E,V,ae,pe,Ee){var Be,qe,ct,Pt,Gt,Rt,xn,bi,ki,Qi=(pe=pe||{}).scope||this;if(typeof E=="number"&&typeof V=="number"&&(typeof ae=="string"||Array.isArray(ae))){var Rr=ae;ae=V,V=E,E=Rr}if(arguments[3]instanceof kt?(T("The transform parameter of text() with a Matrix value"),ki=Ee):(ct=arguments[4],Pt=arguments[5],$n(xn=arguments[3])==="object"&&xn!==null||(typeof ct=="string"&&(Pt=ct,ct=null),typeof xn=="string"&&(Pt=xn,xn=null),typeof xn=="number"&&(ct=xn,xn=null),pe={flags:xn,angle:ct,align:Pt})),isNaN(V)||isNaN(ae)||E==null)throw new Error("Invalid arguments passed to jsPDF.text");if(E.length===0)return Qi;var Cr="",ea=!1,Xo=typeof pe.lineHeightFactor=="number"?pe.lineHeightFactor:su,Wa=Qi.internal.scaleFactor;function T1(ii){return ii=ii.split("	").join(Array(pe.TabLen||9).join(" ")),xo(ii,xn)}function qg(ii){for(var ri,ji=ii.concat(),ur=[],Ul=ji.length;Ul--;)typeof(ri=ji.shift())=="string"?ur.push(ri):Array.isArray(ii)&&(ri.length===1||ri[1]===void 0&&ri[2]===void 0)?ur.push(ri[0]):ur.push([ri[0],ri[1],ri[2]]);return ur}function Kg(ii,ri){var ji;if(typeof ii=="string")ji=ri(ii)[0];else if(Array.isArray(ii)){for(var ur,Ul,np=ii.concat(),xh=[],z1=np.length;z1--;)typeof(ur=np.shift())=="string"?xh.push(ri(ur)[0]):Array.isArray(ur)&&typeof ur[0]=="string"&&(Ul=ri(ur[0],ur[1],ur[2]),xh.push([Ul[0],Ul[1],Ul[2]]));ji=xh}return ji}var lh=!1,Yg=!0;if(typeof E=="string")lh=!0;else if(Array.isArray(E)){var Xg=E.concat();qe=[];for(var ch,kr=Xg.length;kr--;)(typeof(ch=Xg.shift())!="string"||Array.isArray(ch)&&typeof ch[0]!="string")&&(Yg=!1);lh=Yg}if(lh===!1)throw new Error('Type of text must be string or Array. "'+E+'" is not recognized.');typeof E=="string"&&(E=E.match(/[\r?\n]/)?E.split(/\r\n|\r|\n/g):[E]);var dh=Qe/Qi.internal.scaleFactor,uh=dh*(Xo-1);switch(pe.baseline){case"bottom":ae-=uh;break;case"top":ae+=dh-uh;break;case"hanging":ae+=dh-2*uh;break;case"middle":ae+=dh/2-uh}if((Rt=pe.maxWidth||0)>0&&(typeof E=="string"?E=Qi.splitTextToSize(E,Rt):Object.prototype.toString.call(E)==="[object Array]"&&(E=E.reduce(function(ii,ri){return ii.concat(Qi.splitTextToSize(ri,Rt))},[]))),Be={text:E,x:V,y:ae,options:pe,mutex:{pdfEscape:xo,activeFontKey:sn,fonts:Qn,activeFontSize:Qe}},Bn.publish("preProcessText",Be),E=Be.text,ct=(pe=Be.options).angle,!(ki instanceof kt)&&ct&&typeof ct=="number"){ct*=Math.PI/180,pe.rotationDirection===0&&(ct=-ct),O===M.ADVANCED&&(ct=-ct);var hh=Math.cos(ct),Qg=Math.sin(ct);ki=new kt(hh,Qg,-Qg,hh,0,0)}else ct&&ct instanceof kt&&(ki=ct);O!==M.ADVANCED||ki||(ki=Va),(Gt=pe.charSpace||oh)!==void 0&&(Cr+=B(z(Gt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(bi=pe.horizontalScale)!==void 0&&(Cr+=B(100*bi)+` Tz
`),pe.lang;var _o=-1,Uw=pe.renderingMode!==void 0?pe.renderingMode:pe.stroke,Jg=Qi.internal.getCurrentPageInfo().pageContext;switch(Uw){case 0:case!1:case"fill":_o=0;break;case 1:case!0:case"stroke":_o=1;break;case 2:case"fillThenStroke":_o=2;break;case 3:case"invisible":_o=3;break;case 4:case"fillAndAddForClipping":_o=4;break;case 5:case"strokeAndAddPathForClipping":_o=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":_o=6;break;case 7:case"addToPathForClipping":_o=7}var B1=Jg.usedRenderingMode!==void 0?Jg.usedRenderingMode:-1;_o!==-1?Cr+=_o+` Tr
`:B1!==-1&&(Cr+=`0 Tr
`),_o!==-1&&(Jg.usedRenderingMode=_o),Pt=pe.align||"left";var Cs,fh=Qe*Xo,N1=Qi.internal.pageSize.getWidth(),L1=Qn[sn];Gt=pe.charSpace||oh,Rt=pe.maxWidth||0,xn=Object.assign({autoencode:!0,noBOM:!0},pe.flags);var Uc=[],cu=function(ii){return Qi.getStringUnitWidth(ii,{font:L1,charSpace:Gt,fontSize:Qe,doKerning:!1})*Qe/Wa};if(Object.prototype.toString.call(E)==="[object Array]"){var vo;qe=qg(E),Pt!=="left"&&(Cs=qe.map(cu));var to,Hc=0;if(Pt==="right"){V-=Cs[0],E=[],kr=qe.length;for(var zl=0;zl<kr;zl++)zl===0?(to=$a(V),vo=Rl(ae)):(to=z(Hc-Cs[zl]),vo=-fh),E.push([qe[zl],to,vo]),Hc=Cs[zl]}else if(Pt==="center"){V-=Cs[0]/2,E=[],kr=qe.length;for(var jl=0;jl<kr;jl++)jl===0?(to=$a(V),vo=Rl(ae)):(to=z((Hc-Cs[jl])/2),vo=-fh),E.push([qe[jl],to,vo]),Hc=Cs[jl]}else if(Pt==="left"){E=[],kr=qe.length;for(var gh=0;gh<kr;gh++)E.push(qe[gh])}else if(Pt==="justify"&&L1.encoding==="Identity-H"){E=[],kr=qe.length,Rt=Rt!==0?Rt:N1;for(var Vl=0,zi=0;zi<kr;zi++)if(vo=zi===0?Rl(ae):-fh,to=zi===0?$a(V):Vl,zi<kr-1){var Zg=z((Rt-Cs[zi])/(qe[zi].split(" ").length-1)),no=qe[zi].split(" ");E.push([no[0]+" ",to,vo]),Vl=0;for(var ys=1;ys<no.length;ys++){var ph=(cu(no[ys-1]+" "+no[ys])-cu(no[ys]))*Wa+Zg;ys==no.length-1?E.push([no[ys],ph,0]):E.push([no[ys]+" ",ph,0]),Vl-=ph}}else E.push([qe[zi],to,vo]);E.push(["",Vl,0])}else{if(Pt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(E=[],kr=qe.length,Rt=Rt!==0?Rt:N1,zi=0;zi<kr;zi++)vo=zi===0?Rl(ae):-fh,to=zi===0?$a(V):0,zi<kr-1?Uc.push(B(z((Rt-Cs[zi])/(qe[zi].split(" ").length-1)))):Uc.push(0),E.push([qe[zi],to,vo])}}var R1=typeof pe.R2L=="boolean"?pe.R2L:Et;R1===!0&&(E=Kg(E,function(ii,ri,ji){return[ii.split("").reverse().join(""),ri,ji]})),Be={text:E,x:V,y:ae,options:pe,mutex:{pdfEscape:xo,activeFontKey:sn,fonts:Qn,activeFontSize:Qe}},Bn.publish("postProcessText",Be),E=Be.text,ea=Be.mutex.isHex||!1;var ep=Qn[sn].encoding;ep!=="WinAnsiEncoding"&&ep!=="StandardEncoding"||(E=Kg(E,function(ii,ri,ji){return[T1(ii),ri,ji]})),qe=qg(E),E=[];for(var du,uu,Gc,hu=0,mh=1,fu=Array.isArray(qe[0])?mh:hu,$c="",tp=function(ii,ri,ji){var ur="";return ji instanceof kt?(ji=typeof pe.angle=="number"?Ks(ji,new kt(1,0,0,1,ii,ri)):Ks(new kt(1,0,0,1,ii,ri),ji),O===M.ADVANCED&&(ji=Ks(new kt(1,0,0,-1,0,0),ji)),ur=ji.join(" ")+` Tm
`):ur=B(ii)+" "+B(ri)+` Td
`,ur},ws=0;ws<qe.length;ws++){switch($c="",fu){case mh:Gc=(ea?"<":"(")+qe[ws][0]+(ea?">":")"),du=parseFloat(qe[ws][1]),uu=parseFloat(qe[ws][2]);break;case hu:Gc=(ea?"<":"(")+qe[ws]+(ea?">":")"),du=$a(V),uu=Rl(ae)}Uc!==void 0&&Uc[ws]!==void 0&&($c=Uc[ws]+` Tw
`),ws===0?E.push($c+tp(du,uu,ki)+Gc):fu===hu?E.push($c+Gc):fu===mh&&E.push($c+tp(du,uu,ki)+Gc)}E=fu===hu?E.join(` Tj
T* `):E.join(` Tj
`),E+=` Tj
`;var Ms=`BT
/`;return Ms+=sn+" "+Qe+` Tf
`,Ms+=B(Qe*Xo)+` TL
`,Ms+=au+`
`,Ms+=Cr,Ms+=E,ue(Ms+="ET"),p[sn]=!0,Qi};var Iw=g.__private__.clip=g.clip=function(E){return ue(E==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return Iw("evenodd")},g.__private__.discardPath=g.discardPath=function(){return ue("n"),this};var Ga=g.__private__.isValidStyle=function(E){var V=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(E)!==-1&&(V=!0),V};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(E){return Ga(E)&&(c=E),this};var P1=g.__private__.getStyle=g.getStyle=function(E){var V=c;switch(E){case"D":case"S":V="S";break;case"F":V="f";break;case"FD":case"DF":V="B";break;case"f":case"f*":case"B":case"B*":V=E}return V},O1=g.close=function(){return ue("h"),this};g.stroke=function(){return ue("S"),this},g.fill=function(E){return ih("f",E),this},g.fillEvenOdd=function(E){return ih("f*",E),this},g.fillStroke=function(E){return ih("B",E),this},g.fillStrokeEvenOdd=function(E){return ih("B*",E),this};var ih=function(E,V){$n(V)==="object"?Bw(V,E):ue(E)},Lg=function(E){E===null||O===M.ADVANCED&&E===void 0||(E=P1(E),ue(E))};function Tw(E,V,ae,pe,Ee){var Be=new Xf(V||this.boundingBox,ae||this.xStep,pe||this.yStep,this.gState,Ee||this.matrix);Be.stream=this.stream;var qe=E+"$$"+this.cloneIndex+++"$$";return mo(qe,Be),Be}var Bw=function(E,V){var ae=nu[E.key],pe=Tn[ae];if(pe instanceof y0)ue("q"),ue(Nw(V)),pe.gState&&g.setGState(pe.gState),ue(E.matrix.toString()+" cm"),ue("/"+ae+" sh"),ue("Q");else if(pe instanceof Xf){var Ee=new kt(1,0,0,-1,0,Vc());E.matrix&&(Ee=Ee.multiply(E.matrix||Va),ae=Tw.call(pe,E.key,E.boundingBox,E.xStep,E.yStep,Ee).id),ue("q"),ue("/Pattern cs"),ue("/"+ae+" scn"),pe.gState&&g.setGState(pe.gState),ue(V),ue("Q")}},Nw=function(E){switch(E){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Rg=g.moveTo=function(E,V){return ue(B(z(E))+" "+B(Q(V))+" m"),this},ou=g.lineTo=function(E,V){return ue(B(z(E))+" "+B(Q(V))+" l"),this},zc=g.curveTo=function(E,V,ae,pe,Ee,Be){return ue([B(z(E)),B(Q(V)),B(z(ae)),B(Q(pe)),B(z(Ee)),B(Q(Be)),"c"].join(" ")),this};g.__private__.line=g.line=function(E,V,ae,pe,Ee){if(isNaN(E)||isNaN(V)||isNaN(ae)||isNaN(pe)||!Ga(Ee))throw new Error("Invalid arguments passed to jsPDF.line");return O===M.COMPAT?this.lines([[ae-E,pe-V]],E,V,[1,1],Ee||"S"):this.lines([[ae-E,pe-V]],E,V,[1,1]).stroke()},g.__private__.lines=g.lines=function(E,V,ae,pe,Ee,Be){var qe,ct,Pt,Gt,Rt,xn,bi,ki,Qi,Rr,Cr,ea;if(typeof E=="number"&&(ea=ae,ae=V,V=E,E=ea),pe=pe||[1,1],Be=Be||!1,isNaN(V)||isNaN(ae)||!Array.isArray(E)||!Array.isArray(pe)||!Ga(Ee)||typeof Be!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Rg(V,ae),qe=pe[0],ct=pe[1],Gt=E.length,Rr=V,Cr=ae,Pt=0;Pt<Gt;Pt++)(Rt=E[Pt]).length===2?(Rr=Rt[0]*qe+Rr,Cr=Rt[1]*ct+Cr,ou(Rr,Cr)):(xn=Rt[0]*qe+Rr,bi=Rt[1]*ct+Cr,ki=Rt[2]*qe+Rr,Qi=Rt[3]*ct+Cr,Rr=Rt[4]*qe+Rr,Cr=Rt[5]*ct+Cr,zc(xn,bi,ki,Qi,Rr,Cr));return Be&&O1(),Lg(Ee),this},g.path=function(E){for(var V=0;V<E.length;V++){var ae=E[V],pe=ae.c;switch(ae.op){case"m":Rg(pe[0],pe[1]);break;case"l":ou(pe[0],pe[1]);break;case"c":zc.apply(this,pe);break;case"h":O1()}}return this},g.__private__.rect=g.rect=function(E,V,ae,pe,Ee){if(isNaN(E)||isNaN(V)||isNaN(ae)||isNaN(pe)||!Ga(Ee))throw new Error("Invalid arguments passed to jsPDF.rect");return O===M.COMPAT&&(pe=-pe),ue([B(z(E)),B(Q(V)),B(z(ae)),B(z(pe)),"re"].join(" ")),Lg(Ee),this},g.__private__.triangle=g.triangle=function(E,V,ae,pe,Ee,Be,qe){if(isNaN(E)||isNaN(V)||isNaN(ae)||isNaN(pe)||isNaN(Ee)||isNaN(Be)||!Ga(qe))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ae-E,pe-V],[Ee-ae,Be-pe],[E-Ee,V-Be]],E,V,[1,1],qe,!0),this},g.__private__.roundedRect=g.roundedRect=function(E,V,ae,pe,Ee,Be,qe){if(isNaN(E)||isNaN(V)||isNaN(ae)||isNaN(pe)||isNaN(Ee)||isNaN(Be)||!Ga(qe))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ct=4/3*(Math.SQRT2-1);return Ee=Math.min(Ee,.5*ae),Be=Math.min(Be,.5*pe),this.lines([[ae-2*Ee,0],[Ee*ct,0,Ee,Be-Be*ct,Ee,Be],[0,pe-2*Be],[0,Be*ct,-Ee*ct,Be,-Ee,Be],[2*Ee-ae,0],[-Ee*ct,0,-Ee,-Be*ct,-Ee,-Be],[0,2*Be-pe],[0,-Be*ct,Ee*ct,-Be,Ee,-Be]],E+Ee,V,[1,1],qe,!0),this},g.__private__.ellipse=g.ellipse=function(E,V,ae,pe,Ee){if(isNaN(E)||isNaN(V)||isNaN(ae)||isNaN(pe)||!Ga(Ee))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Be=4/3*(Math.SQRT2-1)*ae,qe=4/3*(Math.SQRT2-1)*pe;return Rg(E+ae,V),zc(E+ae,V-qe,E+Be,V-pe,E,V-pe),zc(E-Be,V-pe,E-ae,V-qe,E-ae,V),zc(E-ae,V+qe,E-Be,V+pe,E,V+pe),zc(E+Be,V+pe,E+ae,V+qe,E+ae,V),Lg(Ee),this},g.__private__.circle=g.circle=function(E,V,ae,pe){if(isNaN(E)||isNaN(V)||isNaN(ae)||!Ga(pe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(E,V,ae,ae,pe)},g.setFont=function(E,V,ae){return ae&&(V=N(V,ae)),sn=w1(E,V,{disableWarning:!1}),this};var Lw=g.__private__.getFont=g.getFont=function(){return Qn[w1.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var E,V,ae={};for(E in mi)if(mi.hasOwnProperty(E))for(V in ae[E]=[],mi[E])mi[E].hasOwnProperty(V)&&ae[E].push(V);return ae},g.addFont=function(E,V,ae,pe,Ee){var Be=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Be.indexOf(arguments[3])!==-1?Ee=arguments[3]:arguments[3]&&Be.indexOf(arguments[3])==-1&&(ae=N(ae,pe)),Ee=Ee||"Identity-H",Tg.call(this,E,V,ae,Ee)};var su,zg=i.lineWidth||.200025,rh=g.__private__.getLineWidth=g.getLineWidth=function(){return zg},S1=g.__private__.setLineWidth=g.setLineWidth=function(E){return zg=E,ue(B(z(E))+" w"),this};g.__private__.setLineDash=_t.API.setLineDash=_t.API.setLineDashPattern=function(E,V){if(E=E||[],V=V||0,isNaN(V)||!Array.isArray(E))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return E=E.map(function(ae){return B(z(ae))}).join(" "),V=B(z(V)),ue("["+E+"] "+V+" d"),this};var k1=g.__private__.getLineHeight=g.getLineHeight=function(){return Qe*su};g.__private__.getLineHeight=g.getLineHeight=function(){return Qe*su};var A1=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(E){return typeof(E=E||1.15)=="number"&&(su=E),this},D1=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return su};A1(i.lineHeight);var $a=g.__private__.getHorizontalCoordinate=function(E){return z(E)},Rl=g.__private__.getVerticalCoordinate=function(E){return O===M.ADVANCED?E:Lt[ne].mediaBox.topRightY-Lt[ne].mediaBox.bottomLeftY-z(E)},Rw=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(E){return B($a(E))},jc=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(E){return B(Rl(E))},Zs=i.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return Xs(Zs)},g.__private__.setStrokeColor=g.setDrawColor=function(E,V,ae,pe){return Zs=Qs({ch1:E,ch2:V,ch3:ae,ch4:pe,pdfColorType:"draw",precision:2}),ue(Zs),this};var jg=i.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return Xs(jg)},g.__private__.setFillColor=g.setFillColor=function(E,V,ae,pe){return jg=Qs({ch1:E,ch2:V,ch3:ae,ch4:pe,pdfColorType:"fill",precision:2}),ue(jg),this};var au=i.textColor||"0 g",zw=g.__private__.getTextColor=g.getTextColor=function(){return Xs(au)};g.__private__.setTextColor=g.setTextColor=function(E,V,ae,pe){return au=Qs({ch1:E,ch2:V,ch3:ae,ch4:pe,pdfColorType:"text",precision:3}),this};var oh=i.charSpace,jw=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(oh||0)};g.__private__.setCharSpace=g.setCharSpace=function(E){if(isNaN(E))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return oh=E,this};var Vg=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(E){var V=g.CapJoinStyles[E];if(V===void 0)throw new Error("Line cap style of '"+E+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Vg=V,ue(V+" J"),this};var Ug=0;g.__private__.setLineJoin=g.setLineJoin=function(E){var V=g.CapJoinStyles[E];if(V===void 0)throw new Error("Line join style of '"+E+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ug=V,ue(V+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(E){if(E=E||0,isNaN(E))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ue(B(z(E))+" M"),this},g.GState=_y,g.setGState=function(E){(E=typeof E=="string"?Oi[qs[E]]:F1(null,E)).equals(Bl)||(ue("/"+E.id+" gs"),Bl=E)};var F1=function(E,V){if(!E||!qs[E]){var ae=!1;for(var pe in Oi)if(Oi.hasOwnProperty(pe)&&Oi[pe].equals(V)){ae=!0;break}if(ae)V=Oi[pe];else{var Ee="GS"+(Object.keys(Oi).length+1).toString(10);Oi[Ee]=V,V.id=Ee}return E&&(qs[E]=V.id),Bn.publish("addGState",V),V}};g.addGState=function(E,V){return F1(E,V),this},g.saveGraphicsState=function(){return ue("q"),Ra.push({key:sn,size:Qe,color:au}),this},g.restoreGraphicsState=function(){ue("Q");var E=Ra.pop();return sn=E.key,Qe=E.size,au=E.color,Bl=null,this},g.setCurrentTransformationMatrix=function(E){return ue(E.toString()+" cm"),this},g.comment=function(E){return ue("#"+E),this};var sh=function(E,V){var ae=E||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ae},set:function(Be){isNaN(Be)||(ae=parseFloat(Be))}});var pe=V||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return pe},set:function(Be){isNaN(Be)||(pe=parseFloat(Be))}});var Ee="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ee},set:function(Be){Ee=Be.toString()}}),this},Hg=function(E,V,ae,pe){sh.call(this,E,V),this.type="rect";var Ee=ae||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ee},set:function(qe){isNaN(qe)||(Ee=parseFloat(qe))}});var Be=pe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Be},set:function(qe){isNaN(qe)||(Be=parseFloat(qe))}}),this},Gg=function(){this.page=Si,this.currentPage=ne,this.pages=He.slice(0),this.pagesContext=Lt.slice(0),this.x=Nr,this.y=En,this.matrix=Ws,this.width=lu(ne),this.height=Vc(ne),this.outputDestination=Ye,this.id="",this.objectNumber=-1};Gg.prototype.restore=function(){Si=this.page,ne=this.currentPage,Lt=this.pagesContext,He=this.pages,Nr=this.x,En=this.y,Ws=this.matrix,$g(ne,this.width),Wg(ne,this.height),Ye=this.outputDestination};var I1=function(E,V,ae,pe,Ee){ja.push(new Gg),Si=ne=0,He=[],Nr=E,En=V,Ws=Ee,Bg([ae,pe])},Vw=function(E){if(za[E])ja.pop().restore();else{var V=new Gg,ae="Xo"+(Object.keys(Sr).length+1).toString(10);V.id=ae,za[E]=ae,Sr[ae]=V,Bn.publish("addFormObject",V),ja.pop().restore()}};for(var ah in g.beginFormObject=function(E,V,ae,pe,Ee){return I1(E,V,ae,pe,Ee),this},g.endFormObject=function(E){return Vw(E),this},g.doFormObject=function(E,V){var ae=Sr[za[E]];return ue("q"),ue(V.toString()+" cm"),ue("/"+ae.id+" Do"),ue("Q"),this},g.getFormObject=function(E){var V=Sr[za[E]];return{x:V.x,y:V.y,width:V.width,height:V.height,matrix:V.matrix}},g.save=function(E,V){return E=E||"generated.pdf",(V=V||{}).returnPromise=V.returnPromise||!1,V.returnPromise===!1?(C0(th(Ll()),E),typeof C0.unload=="function"&&Dt.setTimeout&&setTimeout(C0.unload,911),this):new Promise(function(ae,pe){try{var Ee=C0(th(Ll()),E);typeof C0.unload=="function"&&Dt.setTimeout&&setTimeout(C0.unload,911),ae(Ee)}catch(Be){pe(Be.message)}})},_t.API)_t.API.hasOwnProperty(ah)&&(ah==="events"&&_t.API.events.length?function(E,V){var ae,pe,Ee;for(Ee=V.length-1;Ee!==-1;Ee--)ae=V[Ee][0],pe=V[Ee][1],E.subscribe.apply(E,[ae].concat(typeof pe=="function"?[pe]:pe))}(Bn,_t.API.events):g[ah]=_t.API[ah]);var lu=g.getPageWidth=function(E){return(Lt[E=E||ne].mediaBox.topRightX-Lt[E].mediaBox.bottomLeftX)/rt},$g=g.setPageWidth=function(E,V){Lt[E].mediaBox.topRightX=V*rt+Lt[E].mediaBox.bottomLeftX},Vc=g.getPageHeight=function(E){return(Lt[E=E||ne].mediaBox.topRightY-Lt[E].mediaBox.bottomLeftY)/rt},Wg=g.setPageHeight=function(E,V){Lt[E].mediaBox.topRightY=V*rt+Lt[E].mediaBox.bottomLeftY};return g.internal={pdfEscape:xo,getStyle:P1,getFont:Lw,getFontSize:nt,getCharSpace:jw,getTextColor:zw,getLineHeight:k1,getLineHeightFactor:D1,getLineWidth:rh,write:Ot,getHorizontalCoordinate:$a,getVerticalCoordinate:Rl,getCoordinateString:Rw,getVerticalCoordinateString:jc,collections:{},newObject:dr,newAdditionalObject:q0,newObjectDeferred:Xi,newObjectDeferredBegin:Yo,getFilters:Ua,putStream:bs,events:Bn,scaleFactor:rt,pageSize:{getWidth:function(){return lu(ne)},setWidth:function(E){$g(ne,E)},getHeight:function(){return Vc(ne)},setHeight:function(E){Wg(ne,E)}},encryptionOptions:d,encryption:Lr,getEncryptor:Dw,output:nh,getNumberOfPages:Pw,pages:He,out:ue,f2:te,f3:L,getPageInfo:E1,getPageInfoByObjId:Tt,getCurrentPageInfo:Fw,getPDFVersion:b,Point:sh,Rectangle:Hg,Matrix:kt,hasHotfix:M1},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return lu(ne)},set:function(E){$g(ne,E)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return Vc(ne)},set:function(E){Wg(ne,E)},enumerable:!0,configurable:!0}),Mw.call(g,We),sn="F1",C1(r,t),Bn.publish("initialized"),g}Kf.prototype.lsbFirstWord=function(i){return String.fromCharCode(i>>0&255,i>>8&255,i>>16&255,i>>24&255)},Kf.prototype.toHexString=function(i){return i.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Kf.prototype.hexToBytes=function(i){for(var e=[],t=0;t<i.length;t+=2)e.push(String.fromCharCode(parseInt(i.substr(t,2),16)));return e.join("")},Kf.prototype.processOwnerPassword=function(i,e){return Y3(K3(e).substr(0,5),i)},Kf.prototype.encryptor=function(i,e){var t=K3(this.encryptionKey+String.fromCharCode(255&i,i>>8&255,i>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return Y3(t,n)}},_y.prototype.equals=function(i){var e,t="id,objectNumber,equals";if(!i||$n(i)!==$n(this))return!1;var n=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!i.hasOwnProperty(e)||this[e]!==i[e])return!1;n++}for(e in i)i.hasOwnProperty(e)&&t.indexOf(e)<0&&n--;return n===0},_t.API={events:[]},_t.version="3.0.1";var Ni=_t.API,Z3=1,M0=function(i){return i.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Wf=function(i){return i.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Vt=function(i){return i.toFixed(2)},Td=function(i){return i.toFixed(5)};Ni.__acroform__={};var Vo=function(i,e){i.prototype=Object.create(e.prototype),i.prototype.constructor=i},XL=function(i){return i*Z3},yl=function(i){var e=new fR,t=mt.internal.getHeight(i)||0,n=mt.internal.getWidth(i)||0;return e.BBox=[0,0,Number(Vt(n)),Number(Vt(t))],e},toe=Ni.__acroform__.setBit=function(i,e){if(i=i||0,e=e||0,isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return i|=1<<e},noe=Ni.__acroform__.clearBit=function(i,e){if(i=i||0,e=e||0,isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return i&=~(1<<e)},ioe=Ni.__acroform__.getBit=function(i,e){if(isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(i&1<<e)==0?0:1},Wi=Ni.__acroform__.getBitForPdf=function(i,e){if(isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return ioe(i,e-1)},qi=Ni.__acroform__.setBitForPdf=function(i,e){if(isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return toe(i,e-1)},Ki=Ni.__acroform__.clearBitForPdf=function(i,e){if(isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return noe(i,e-1)},roe=Ni.__acroform__.calculateCoordinates=function(i,e){var t=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,r=i[0],o=i[1],s=i[2],a=i[3],l={};return l.lowerLeft_X=t(r)||0,l.lowerLeft_Y=n(o+a)||0,l.upperRight_X=t(r+s)||0,l.upperRight_Y=n(o)||0,[Number(Vt(l.lowerLeft_X)),Number(Vt(l.lowerLeft_Y)),Number(Vt(l.upperRight_X)),Number(Vt(l.upperRight_Y))]},ooe=function(i){if(i.appearanceStreamContent)return i.appearanceStreamContent;if(i.V||i.DV){var e=[],t=i._V||i.DV,n=X3(i,t),r=i.scope.internal.getFont(i.fontName,i.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(i.scope.__private__.encodeColorString(i.color)),e.push("/"+r+" "+Vt(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=yl(i);return o.scope=i.scope,o.stream=e.join(`
`),o}},X3=function(i,e){var t=i.fontSize===0?i.maxFontSize:i.fontSize,n={text:"",fontSize:""},r=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");r=i.multiline?r.map(function(L){return L.split(`
`)}):r.map(function(L){return[L]});var o=t,s=mt.internal.getHeight(i)||0;s=s<0?-s:s;var a=mt.internal.getWidth(i)||0;a=a<0?-a:a;var l=function(L,z,J){if(L+1<r.length){var Q=z+" "+r[L+1][0];return uy(Q,i,J).width<=a-4}return!1};o++;e:for(;o>0;){e="",o--;var c,d,h=uy("3",i,o).height,p=i.multiline?s-o:(s-h)/2,g=p+=2,_=0,b=0,C=0;if(o<=0){e=`(...) Tj
`,e+="% Width of Text: "+uy(e,i,o=12).width+", FieldWidth:"+a+`
`;break}for(var y="",M=0,O=0;O<r.length;O++)if(r.hasOwnProperty(O)){var A=!1;if(r[O].length!==1&&C!==r[O].length-1){if((h+2)*(M+2)+2>s)continue e;y+=r[O][C],A=!0,b=O,O--}else{y=(y+=r[O][C]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var D=parseInt(O),N=l(D,y,o),B=O>=r.length-1;if(N&&!B){y+=" ",C=0;continue}if(N||B){if(B)b=D;else if(i.multiline&&(h+2)*(M+2)+2>s)continue e}else{if(!i.multiline||(h+2)*(M+2)+2>s)continue e;b=D}}for(var T="",H=_;H<=b;H++){var te=r[H];if(i.multiline){if(H===b){T+=te[C]+" ",C=(C+1)%te.length;continue}if(H===_){T+=te[te.length-1]+" ";continue}}T+=te[0]+" "}switch(T=T.substr(T.length-1)==" "?T.substr(0,T.length-1):T,d=uy(T,i,o).width,i.textAlign){case"right":c=a-d-2;break;case"center":c=(a-d)/2;break;case"left":default:c=2}e+=Vt(c)+" "+Vt(g)+` Td
`,e+="("+M0(T)+`) Tj
`,e+=-Vt(c)+` 0 Td
`,g=-(o+2),d=0,_=A?b:b+1,M++,y=""}break}return n.text=e,n.fontSize=o,n},uy=function(i,e,t){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),r=e.scope.getStringUnitWidth(i,{font:n,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:r}},soe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},aoe=function(i,e){var t={type:"reference",object:i};e.internal.getPageInfo(i.page).pageContext.annotations.find(function(n){return n.type===t.type&&n.object===t.object})===void 0&&e.internal.getPageInfo(i.page).pageContext.annotations.push(t)},loe=function(i,e){for(var t in i)if(i.hasOwnProperty(t)){var n=t,r=i[t];e.internal.newObjectDeferredBegin(r.objId,!0),$n(r)==="object"&&typeof r.putStream=="function"&&r.putStream(),delete i[n]}},coe=function(i,e){if(e.scope=i,i.internal!==void 0&&(i.internal.acroformPlugin===void 0||i.internal.acroformPlugin.isInitialized===!1)){if(Da.FieldNum=0,i.internal.acroformPlugin=JSON.parse(JSON.stringify(soe)),i.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Z3=i.internal.scaleFactor,i.internal.acroformPlugin.acroFormDictionaryRoot=new gR,i.internal.acroformPlugin.acroFormDictionaryRoot.scope=i,i.internal.acroformPlugin.acroFormDictionaryRoot._eventID=i.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(i)}),i.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var r in n)if(n.hasOwnProperty(r)){var o=n[r];o.objId=void 0,o.hasAnnotation&&aoe(o,t)}})(i)}),i.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(i)}),i.internal.events.subscribe("postPutPages",function(t){(function(n,r){var o=!n;for(var s in n||(r.internal.newObjectDeferredBegin(r.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),r.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||r.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(s)){var a=n[s],l=[],c=a.Rect;if(a.Rect&&(a.Rect=roe(a.Rect,r)),r.internal.newObjectDeferredBegin(a.objId,!0),a.DA=mt.createDefaultAppearanceStream(a),$n(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=c,a.hasAppearanceStream&&!a.appearanceStreamContent){var d=ooe(a);l.push({key:"AP",value:"<</N "+d+">>"}),r.internal.acroformPlugin.xForms.push(d)}if(a.appearanceStreamContent){var h="";for(var p in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(p)){var g=a.appearanceStreamContent[p];if(h+="/"+p+" ",h+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var s in g)if(g.hasOwnProperty(s)){var _=g[s];typeof _=="function"&&(_=_.call(r,a)),h+="/"+s+" "+_+" ",r.internal.acroformPlugin.xForms.indexOf(_)>=0||r.internal.acroformPlugin.xForms.push(_)}}else typeof(_=g)=="function"&&(_=_.call(r,a)),h+="/"+s+" "+_,r.internal.acroformPlugin.xForms.indexOf(_)>=0||r.internal.acroformPlugin.xForms.push(_);h+=">>"}l.push({key:"AP",value:`<<
`+h+">>"})}r.internal.putStream({additionalKeyValues:l,objectId:a.objId}),r.internal.out("endobj")}o&&loe(r.internal.acroformPlugin.xForms,r)})(t,i)}),i.internal.acroformPlugin.isInitialized=!0}},hR=Ni.__acroform__.arrayToPdfArray=function(i,e,t){var n=function(s){return s};if(Array.isArray(i)){for(var r="[",o=0;o<i.length;o++)switch(o!==0&&(r+=" "),$n(i[o])){case"boolean":case"number":case"object":r+=i[o].toString();break;case"string":i[o].substr(0,1)!=="/"?(e!==void 0&&t&&(n=t.internal.getEncryptor(e)),r+="("+M0(n(i[o].toString()))+")"):r+=i[o].toString()}return r+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},G3=function(i,e,t){var n=function(r){return r};return e!==void 0&&t&&(n=t.internal.getEncryptor(e)),(i=i||"").toString(),i="("+M0(n(i))+")"},wl=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(i){this._objId=i}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};wl.prototype.toString=function(){return this.objId+" 0 R"},wl.prototype.putStream=function(){var i=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:i,objectId:this.objId}),this.scope.internal.out("endobj")},wl.prototype.getKeyValueListForStream=function(){var i=[],e=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var n=e[t],r=this[n];r&&(Array.isArray(r)?i.push({key:n,value:hR(r,this.objId,this.scope)}):r instanceof wl?(r.scope=this.scope,i.push({key:n,value:r.objId+" 0 R"})):typeof r!="function"&&i.push({key:n,value:r}))}return i};var fR=function(){wl.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var i,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){i=t.trim()},get:function(){return i||null}})};Vo(fR,wl);var gR=function(){wl.call(this);var i,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(i){var t=function(n){return n};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+M0(t(i))+")"}},set:function(t){i=t}})};Vo(gR,wl);var Da=function i(){wl.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');e=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Wi(e,3)},set:function(y){y?this.F=qi(e,3):this.F=Ki(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');t=y}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(y){n=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(y){n[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(y){n[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(y){n[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(y){n[3]=y}});var r="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return r},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":r=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof vy)return;o="FieldObject"+i.FieldNum++}var y=function(M){return M};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+M0(y(o))+")"},set:function(y){o=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(y){o=y}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return s},set:function(y){s=y}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(y){a=y}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(y){l=y}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/Z3:c},set:function(y){c=y}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(y){d=y}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof vy||this instanceof w0))return G3(h,this.objId,this.scope)},set:function(y){y=y.toString(),h=y}});var p=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Or?p:G3(p,this.objId,this.scope)},set:function(y){y=y.toString(),p=this instanceof Or?y:y.substr(0,1)==="("?Wf(y.substr(1,y.length-2)):Wf(y)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Or?Wf(p.substr(1,p.length-1)):p},set:function(y){y=y.toString(),p=this instanceof Or?"/"+y:y}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof Or?g:G3(g,this.objId,this.scope)},set:function(y){y=y.toString(),g=this instanceof Or?y:y.substr(0,1)==="("?Wf(y.substr(1,y.length-2)):Wf(y)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Or?Wf(g.substr(1,g.length-1)):g},set:function(y){y=y.toString(),g=this instanceof Or?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var _,b=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return b},set:function(y){y=!!y,b=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(_)return _},set:function(y){_=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Wi(this.Ff,1)},set:function(y){y?this.Ff=qi(this.Ff,1):this.Ff=Ki(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Wi(this.Ff,2)},set:function(y){y?this.Ff=qi(this.Ff,2):this.Ff=Ki(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Wi(this.Ff,3)},set:function(y){y?this.Ff=qi(this.Ff,3):this.Ff=Ki(this.Ff,3)}});var C=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(C!==null)return C},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');C=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(C){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:C=2;break;case"center":case 1:C=1;break;case"left":case 0:default:C=0}}})};Vo(Da,wl);var Qf=function(){Da.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var i=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return i},set:function(t){i=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return i},set:function(t){i=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return hR(e,this.objId,this.scope)},set:function(t){var n,r;r=[],typeof(n=t)=="string"&&(r=function(o,s,a){a||(a=1);for(var l,c=[];l=s.exec(o);)c.push(l[a]);return c}(n,/\((.*?)\)/g)),e=r}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,n){for(n=n||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Wi(this.Ff,18)},set:function(t){t?this.Ff=qi(this.Ff,18):this.Ff=Ki(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Wi(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=qi(this.Ff,19):this.Ff=Ki(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Wi(this.Ff,20)},set:function(t){t?(this.Ff=qi(this.Ff,20),e.sort()):this.Ff=Ki(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Wi(this.Ff,22)},set:function(t){t?this.Ff=qi(this.Ff,22):this.Ff=Ki(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Wi(this.Ff,23)},set:function(t){t?this.Ff=qi(this.Ff,23):this.Ff=Ki(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Wi(this.Ff,27)},set:function(t){t?this.Ff=qi(this.Ff,27):this.Ff=Ki(this.Ff,27)}}),this.hasAppearanceStream=!1};Vo(Qf,Da);var Jf=function(){Qf.call(this),this.fontName="helvetica",this.combo=!1};Vo(Jf,Qf);var Zf=function(){Jf.call(this),this.combo=!0};Vo(Zf,Jf);var gy=function(){Zf.call(this),this.edit=!0};Vo(gy,Zf);var Or=function(){Da.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Wi(this.Ff,15)},set:function(t){t?this.Ff=qi(this.Ff,15):this.Ff=Ki(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Wi(this.Ff,16)},set:function(t){t?this.Ff=qi(this.Ff,16):this.Ff=Ki(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Wi(this.Ff,17)},set:function(t){t?this.Ff=qi(this.Ff,17):this.Ff=Ki(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Wi(this.Ff,26)},set:function(t){t?this.Ff=qi(this.Ff,26):this.Ff=Ki(this.Ff,26)}});var i,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(o){return o};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,r=[];for(n in r.push("<<"),e)r.push("/"+n+" ("+M0(t(e[n]))+")");return r.push(">>"),r.join(`
`)}},set:function(t){$n(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return i},set:function(t){i=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return i.substr(1,i.length-1)},set:function(t){i="/"+t}})};Vo(Or,Da);var py=function(){Or.call(this),this.pushButton=!0};Vo(py,Or);var eg=function(){Or.call(this),this.radio=!0,this.pushButton=!1;var i=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return i},set:function(e){i=e!==void 0?e:[]}})};Vo(eg,Or);var vy=function(){var i,e;Da.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return i},set:function(r){i=r}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(r){e=r}});var t,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(a){return a};this.scope&&(r=this.scope.internal.getEncryptor(this.objId));var o,s=[];for(o in s.push("<<"),n)s.push("/"+o+" ("+M0(r(n[o]))+")");return s.push(">>"),s.join(`
`)},set:function(r){$n(r)==="object"&&(n=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(r){typeof r=="string"&&(n.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=mt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Vo(vy,Da),eg.prototype.setAppearance=function(i){if(!("createAppearanceStream"in i)||!("getCA"in i))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=i.createAppearanceStream(t.optionName),t.caption=i.getCA()}},eg.prototype.createOption=function(i){var e=new vy;return e.Parent=this,e.optionName=i,this.Kids.push(e),doe.call(this.scope,e),e};var my=function(){Or.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=mt.CheckBox.createAppearanceStream()};Vo(my,Or);var w0=function(){Da.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Wi(this.Ff,13)},set:function(e){e?this.Ff=qi(this.Ff,13):this.Ff=Ki(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Wi(this.Ff,21)},set:function(e){e?this.Ff=qi(this.Ff,21):this.Ff=Ki(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Wi(this.Ff,23)},set:function(e){e?this.Ff=qi(this.Ff,23):this.Ff=Ki(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Wi(this.Ff,24)},set:function(e){e?this.Ff=qi(this.Ff,24):this.Ff=Ki(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Wi(this.Ff,25)},set:function(e){e?this.Ff=qi(this.Ff,25):this.Ff=Ki(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Wi(this.Ff,26)},set:function(e){e?this.Ff=qi(this.Ff,26):this.Ff=Ki(this.Ff,26)}});var i=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return i},set:function(e){i=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return i},set:function(e){Number.isInteger(e)&&(i=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Vo(w0,Da);var xy=function(){w0.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Wi(this.Ff,14)},set:function(i){i?this.Ff=qi(this.Ff,14):this.Ff=Ki(this.Ff,14)}}),this.password=!0};Vo(xy,w0);var mt={CheckBox:{createAppearanceStream:function(){return{N:{On:mt.CheckBox.YesNormal},D:{On:mt.CheckBox.YesPushDown,Off:mt.CheckBox.OffPushDown}}},YesPushDown:function(i){var e=yl(i);e.scope=i.scope;var t=[],n=i.scope.internal.getFont(i.fontName,i.fontStyle).id,r=i.scope.__private__.encodeColorString(i.color),o=X3(i,i.caption);return t.push("0.749023 g"),t.push("0 0 "+Vt(mt.internal.getWidth(i))+" "+Vt(mt.internal.getHeight(i))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+n+" "+Vt(o.fontSize)+" Tf "+r),t.push("BT"),t.push(o.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(i){var e=yl(i);e.scope=i.scope;var t=i.scope.internal.getFont(i.fontName,i.fontStyle).id,n=i.scope.__private__.encodeColorString(i.color),r=[],o=mt.internal.getHeight(i),s=mt.internal.getWidth(i),a=X3(i,i.caption);return r.push("1 g"),r.push("0 0 "+Vt(s)+" "+Vt(o)+" re"),r.push("f"),r.push("q"),r.push("0 0 1 rg"),r.push("0 0 "+Vt(s-1)+" "+Vt(o-1)+" re"),r.push("W"),r.push("n"),r.push("0 g"),r.push("BT"),r.push("/"+t+" "+Vt(a.fontSize)+" Tf "+n),r.push(a.text),r.push("ET"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(i){var e=yl(i);e.scope=i.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Vt(mt.internal.getWidth(i))+" "+Vt(mt.internal.getHeight(i))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(i){var e={D:{Off:mt.RadioButton.Circle.OffPushDown},N:{}};return e.N[i]=mt.RadioButton.Circle.YesNormal,e.D[i]=mt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(i){var e=yl(i);e.scope=i.scope;var t=[],n=mt.internal.getWidth(i)<=mt.internal.getHeight(i)?mt.internal.getWidth(i)/4:mt.internal.getHeight(i)/4;n=Number((.9*n).toFixed(5));var r=mt.internal.Bezier_C,o=Number((n*r).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Td(mt.internal.getWidth(i)/2)+" "+Td(mt.internal.getHeight(i)/2)+" cm"),t.push(n+" 0 m"),t.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),t.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),t.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),t.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(i){var e=yl(i);e.scope=i.scope;var t=[],n=mt.internal.getWidth(i)<=mt.internal.getHeight(i)?mt.internal.getWidth(i)/4:mt.internal.getHeight(i)/4;n=Number((.9*n).toFixed(5));var r=Number((2*n).toFixed(5)),o=Number((r*mt.internal.Bezier_C).toFixed(5)),s=Number((n*mt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Td(mt.internal.getWidth(i)/2)+" "+Td(mt.internal.getHeight(i)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),t.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),t.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),t.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Td(mt.internal.getWidth(i)/2)+" "+Td(mt.internal.getHeight(i)/2)+" cm"),t.push(n+" 0 m"),t.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),t.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),t.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),t.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(i){var e=yl(i);e.scope=i.scope;var t=[],n=mt.internal.getWidth(i)<=mt.internal.getHeight(i)?mt.internal.getWidth(i)/4:mt.internal.getHeight(i)/4;n=Number((.9*n).toFixed(5));var r=Number((2*n).toFixed(5)),o=Number((r*mt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Td(mt.internal.getWidth(i)/2)+" "+Td(mt.internal.getHeight(i)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),t.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),t.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),t.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(i){var e={D:{Off:mt.RadioButton.Cross.OffPushDown},N:{}};return e.N[i]=mt.RadioButton.Cross.YesNormal,e.D[i]=mt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(i){var e=yl(i);e.scope=i.scope;var t=[],n=mt.internal.calculateCross(i);return t.push("q"),t.push("1 1 "+Vt(mt.internal.getWidth(i)-2)+" "+Vt(mt.internal.getHeight(i)-2)+" re"),t.push("W"),t.push("n"),t.push(Vt(n.x1.x)+" "+Vt(n.x1.y)+" m"),t.push(Vt(n.x2.x)+" "+Vt(n.x2.y)+" l"),t.push(Vt(n.x4.x)+" "+Vt(n.x4.y)+" m"),t.push(Vt(n.x3.x)+" "+Vt(n.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(i){var e=yl(i);e.scope=i.scope;var t=mt.internal.calculateCross(i),n=[];return n.push("0.749023 g"),n.push("0 0 "+Vt(mt.internal.getWidth(i))+" "+Vt(mt.internal.getHeight(i))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Vt(mt.internal.getWidth(i)-2)+" "+Vt(mt.internal.getHeight(i)-2)+" re"),n.push("W"),n.push("n"),n.push(Vt(t.x1.x)+" "+Vt(t.x1.y)+" m"),n.push(Vt(t.x2.x)+" "+Vt(t.x2.y)+" l"),n.push(Vt(t.x4.x)+" "+Vt(t.x4.y)+" m"),n.push(Vt(t.x3.x)+" "+Vt(t.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(i){var e=yl(i);e.scope=i.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Vt(mt.internal.getWidth(i))+" "+Vt(mt.internal.getHeight(i))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(i){var e=i.scope.internal.getFont(i.fontName,i.fontStyle).id,t=i.scope.__private__.encodeColorString(i.color);return"/"+e+" "+i.fontSize+" Tf "+t}};mt.internal={Bezier_C:.551915024494,calculateCross:function(i){var e=mt.internal.getWidth(i),t=mt.internal.getHeight(i),n=Math.min(e,t);return{x1:{x:(e-n)/2,y:(t-n)/2+n},x2:{x:(e-n)/2+n,y:(t-n)/2},x3:{x:(e-n)/2,y:(t-n)/2},x4:{x:(e-n)/2+n,y:(t-n)/2+n}}}},mt.internal.getWidth=function(i){var e=0;return $n(i)==="object"&&(e=XL(i.Rect[2])),e},mt.internal.getHeight=function(i){var e=0;return $n(i)==="object"&&(e=XL(i.Rect[3])),e};var doe=Ni.addField=function(i){if(coe(this,i),!(i instanceof Da))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=i).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),i.page=i.scope.internal.getCurrentPageInfo().pageNumber,this};Ni.AcroFormChoiceField=Qf,Ni.AcroFormListBox=Jf,Ni.AcroFormComboBox=Zf,Ni.AcroFormEditBox=gy,Ni.AcroFormButton=Or,Ni.AcroFormPushButton=py,Ni.AcroFormRadioButton=eg,Ni.AcroFormCheckBox=my,Ni.AcroFormTextField=w0,Ni.AcroFormPasswordField=xy,Ni.AcroFormAppearance=mt,Ni.AcroForm={ChoiceField:Qf,ListBox:Jf,ComboBox:Zf,EditBox:gy,Button:Or,PushButton:py,RadioButton:eg,CheckBox:my,TextField:w0,PasswordField:xy,Appearance:mt},_t.AcroForm={ChoiceField:Qf,ListBox:Jf,ComboBox:Zf,EditBox:gy,Button:Or,PushButton:py,RadioButton:eg,CheckBox:my,TextField:w0,PasswordField:xy,Appearance:mt};var MSe=_t.AcroForm;function pR(i){return i.reduce(function(e,t,n){return e[t]=n,e},{})}(function(i){i.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=i.__addimage__.getImageFileTypeByImageData=function(L,z){var J,Q,ce,X,ie,oe=e;if((z=z||e)==="RGBA"||L.data!==void 0&&L.data instanceof Uint8ClampedArray&&"height"in L&&"width"in L)return"RGBA";if(N(L))for(ie in t)for(ce=t[ie],J=0;J<ce.length;J+=1){for(X=!0,Q=0;Q<ce[J].length;Q+=1)if(ce[J][Q]!==void 0&&ce[J][Q]!==L[Q]){X=!1;break}if(X===!0){oe=ie;break}}else for(ie in t)for(ce=t[ie],J=0;J<ce.length;J+=1){for(X=!0,Q=0;Q<ce[J].length;Q+=1)if(ce[J][Q]!==void 0&&ce[J][Q]!==L.charCodeAt(Q)){X=!1;break}if(X===!0){oe=ie;break}}return oe===e&&z!==e&&(oe=z),oe},r=function L(z){for(var J=this.internal.write,Q=this.internal.putStream,ce=(0,this.internal.getFilters)();ce.indexOf("FlateEncode")!==-1;)ce.splice(ce.indexOf("FlateEncode"),1);z.objectId=this.internal.newObject();var X=[];if(X.push({key:"Type",value:"/XObject"}),X.push({key:"Subtype",value:"/Image"}),X.push({key:"Width",value:z.width}),X.push({key:"Height",value:z.height}),z.colorSpace===C.INDEXED?X.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(z.palette.length/3-1)+" "+("sMask"in z&&z.sMask!==void 0?z.objectId+2:z.objectId+1)+" 0 R]"}):(X.push({key:"ColorSpace",value:"/"+z.colorSpace}),z.colorSpace===C.DEVICE_CMYK&&X.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),X.push({key:"BitsPerComponent",value:z.bitsPerComponent}),"decodeParameters"in z&&z.decodeParameters!==void 0&&X.push({key:"DecodeParms",value:"<<"+z.decodeParameters+">>"}),"transparency"in z&&Array.isArray(z.transparency)){for(var ie="",oe=0,le=z.transparency.length;oe<le;oe++)ie+=z.transparency[oe]+" "+z.transparency[oe]+" ";X.push({key:"Mask",value:"["+ie+"]"})}z.sMask!==void 0&&X.push({key:"SMask",value:z.objectId+1+" 0 R"});var Ce=z.filter!==void 0?["/"+z.filter]:void 0;if(Q({data:z.data,additionalKeyValues:X,alreadyAppliedFilters:Ce,objectId:z.objectId}),J("endobj"),"sMask"in z&&z.sMask!==void 0){var Ne="/Predictor "+z.predictor+" /Colors 1 /BitsPerComponent "+z.bitsPerComponent+" /Columns "+z.width,R={width:z.width,height:z.height,colorSpace:"DeviceGray",bitsPerComponent:z.bitsPerComponent,decodeParameters:Ne,data:z.sMask};"filter"in z&&(R.filter=z.filter),L.call(this,R)}if(z.colorSpace===C.INDEXED){var ne=this.internal.newObject();Q({data:T(new Uint8Array(z.palette)),objectId:ne}),J("endobj")}},o=function(){var L=this.internal.collections.addImage_images;for(var z in L)r.call(this,L[z])},s=function(){var L,z=this.internal.collections.addImage_images,J=this.internal.write;for(var Q in z)J("/I"+(L=z[Q]).index,L.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",s))},l=function(){var L=this.internal.collections.addImage_images;return a.call(this),L},c=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(L){return typeof i["process"+L.toUpperCase()]=="function"},h=function(L){return $n(L)==="object"&&L.nodeType===1},p=function(L,z){if(L.nodeName==="IMG"&&L.hasAttribute("src")){var J=""+L.getAttribute("src");if(J.indexOf("data:image/")===0)return ox(unescape(J).split("base64,").pop());var Q=i.loadFile(J,!0);if(Q!==void 0)return Q}if(L.nodeName==="CANVAS"){if(L.width===0||L.height===0)throw new Error("Given canvas must have data. Canvas width: "+L.width+", height: "+L.height);var ce;switch(z){case"PNG":ce="image/png";break;case"WEBP":ce="image/webp";break;case"JPEG":case"JPG":default:ce="image/jpeg"}return ox(L.toDataURL(ce,1).split("base64,").pop())}},g=function(L){var z=this.internal.collections.addImage_images;if(z){for(var J in z)if(L===z[J].alias)return z[J]}},_=function(L,z,J){return L||z||(L=-96,z=-96),L<0&&(L=-1*J.width*72/L/this.internal.scaleFactor),z<0&&(z=-1*J.height*72/z/this.internal.scaleFactor),L===0&&(L=z*J.width/J.height),z===0&&(z=L*J.height/J.width),[L,z]},b=function(L,z,J,Q,ce,X){var ie=_.call(this,J,Q,ce),oe=this.internal.getCoordinateString,le=this.internal.getVerticalCoordinateString,Ce=l.call(this);if(J=ie[0],Q=ie[1],Ce[ce.index]=ce,X){X*=Math.PI/180;var Ne=Math.cos(X),R=Math.sin(X),ne=function(de){return de.toFixed(4)},re=[ne(Ne),ne(R),ne(-1*R),ne(Ne),0,0,"cm"]}this.internal.write("q"),X?(this.internal.write([1,"0","0",1,oe(L),le(z+Q),"cm"].join(" ")),this.internal.write(re.join(" ")),this.internal.write([oe(J),"0","0",oe(Q),"0","0","cm"].join(" "))):this.internal.write([oe(J),"0","0",oe(Q),oe(L),le(z+Q),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ce.index+" Do"),this.internal.write("Q")},C=i.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};i.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=i.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},M=i.__addimage__.sHashCode=function(L){var z,J,Q=0;if(typeof L=="string")for(J=L.length,z=0;z<J;z++)Q=(Q<<5)-Q+L.charCodeAt(z),Q|=0;else if(N(L))for(J=L.byteLength/2,z=0;z<J;z++)Q=(Q<<5)-Q+L[z],Q|=0;return Q},O=i.__addimage__.validateStringAsBase64=function(L){(L=L||"").toString().trim();var z=!0;return L.length===0&&(z=!1),L.length%4!=0&&(z=!1),/^[A-Za-z0-9+/]+$/.test(L.substr(0,L.length-2))===!1&&(z=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(L.substr(-2))===!1&&(z=!1),z},A=i.__addimage__.extractImageFromDataUrl=function(L){if(L==null||!(L=L.trim()).startsWith("data:"))return null;var z=L.indexOf(",");return z<0?null:L.substring(0,z).trim().endsWith("base64")?L.substring(z+1):null},D=i.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};i.__addimage__.isArrayBuffer=function(L){return D()&&L instanceof ArrayBuffer};var N=i.__addimage__.isArrayBufferView=function(L){return D()&&typeof Uint32Array<"u"&&(L instanceof Int8Array||L instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&L instanceof Uint8ClampedArray||L instanceof Int16Array||L instanceof Uint16Array||L instanceof Int32Array||L instanceof Uint32Array||L instanceof Float32Array||L instanceof Float64Array)},B=i.__addimage__.binaryStringToUint8Array=function(L){for(var z=L.length,J=new Uint8Array(z),Q=0;Q<z;Q++)J[Q]=L.charCodeAt(Q);return J},T=i.__addimage__.arrayBufferToBinaryString=function(L){for(var z="",J=N(L)?L:new Uint8Array(L),Q=0;Q<J.length;Q+=8192)z+=String.fromCharCode.apply(null,J.subarray(Q,Q+8192));return z};i.addImage=function(){var L,z,J,Q,ce,X,ie,oe,le;if(typeof arguments[1]=="number"?(z=e,J=arguments[1],Q=arguments[2],ce=arguments[3],X=arguments[4],ie=arguments[5],oe=arguments[6],le=arguments[7]):(z=arguments[1],J=arguments[2],Q=arguments[3],ce=arguments[4],X=arguments[5],ie=arguments[6],oe=arguments[7],le=arguments[8]),$n(L=arguments[0])==="object"&&!h(L)&&"imageData"in L){var Ce=L;L=Ce.imageData,z=Ce.format||z||e,J=Ce.x||J||0,Q=Ce.y||Q||0,ce=Ce.w||Ce.width||ce,X=Ce.h||Ce.height||X,ie=Ce.alias||ie,oe=Ce.compression||oe,le=Ce.rotation||Ce.angle||le}var Ne=this.internal.getFilters();if(oe===void 0&&Ne.indexOf("FlateEncode")!==-1&&(oe="SLOW"),isNaN(J)||isNaN(Q))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var R=H.call(this,L,z,ie,oe);return b.call(this,J,Q,ce,X,R,le),this};var H=function(L,z,J,Q){var ce,X,ie;if(typeof L=="string"&&n(L)===e){L=unescape(L);var oe=te(L,!1);(oe!==""||(oe=i.loadFile(L,!0))!==void 0)&&(L=oe)}if(h(L)&&(L=p(L,z)),z=n(L,z),!d(z))throw new Error("addImage does not support files of type '"+z+"', please ensure that a plugin for '"+z+"' support is added.");if(((ie=J)==null||ie.length===0)&&(J=function(le){return typeof le=="string"||N(le)?M(le):N(le.data)?M(le.data):null}(L)),(ce=g.call(this,J))||(D()&&(L instanceof Uint8Array||z==="RGBA"||(X=L,L=B(L))),ce=this["process"+z.toUpperCase()](L,c.call(this),J,function(le){return le&&typeof le=="string"&&(le=le.toUpperCase()),le in i.image_compression?le:y.NONE}(Q),X)),!ce)throw new Error("An unknown error occurred whilst processing the image.");return ce},te=i.__addimage__.convertBase64ToBinaryString=function(L,z){z=typeof z!="boolean"||z;var J,Q="";if(typeof L=="string"){var ce;J=(ce=A(L))!==null&&ce!==void 0?ce:L;try{Q=ox(J)}catch(X){if(z)throw O(J)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+X.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Q};i.getImageProperties=function(L){var z,J,Q="";if(h(L)&&(L=p(L)),typeof L=="string"&&n(L)===e&&((Q=te(L,!1))===""&&(Q=i.loadFile(L)||""),L=Q),J=n(L),!d(J))throw new Error("addImage does not support files of type '"+J+"', please ensure that a plugin for '"+J+"' support is added.");if(!D()||L instanceof Uint8Array||(L=B(L)),!(z=this["process"+J.toUpperCase()](L)))throw new Error("An unknown error occurred whilst processing the image");return z.fileType=J,z}})(_t.API),function(i){var e=function(t){if(t!==void 0&&t!="")return!0};_t.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),i.events.push(["putPage",function(t){for(var n,r,o,s=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(t.objId),c=t.pageContext.annotations,d=!1,h=0;h<c.length&&!d;h++)switch((n=c[h]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var p=0;p<c.length;p++){n=c[p];var g=this.internal.pdfEscape,_=this.internal.getEncryptor(t.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var b=this.internal.newAdditionalObject(),C=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(b.objId),M=n.title||"Note";o="<</Type /Annot /Subtype /Text "+(r="/Rect ["+s(n.bounds.x)+" "+a(n.bounds.y+n.bounds.h)+" "+s(n.bounds.x+n.bounds.w)+" "+a(n.bounds.y)+"] ")+"/Contents ("+g(y(n.contents))+")",o+=" /Popup "+C.objId+" 0 R",o+=" /P "+l.objId+" 0 R",o+=" /T ("+g(y(M))+") >>",b.content=o;var O=b.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(r="/Rect ["+s(n.bounds.x+30)+" "+a(n.bounds.y+n.bounds.h)+" "+s(n.bounds.x+n.bounds.w+30)+" "+a(n.bounds.y)+"] ")+" /Parent "+O,n.open&&(o+=" /Open true"),o+=" >>",C.content=o,this.internal.write(b.objId,"0 R",C.objId,"0 R");break;case"freetext":r="/Rect ["+s(n.bounds.x)+" "+a(n.bounds.y)+" "+s(n.bounds.x+n.bounds.w)+" "+a(n.bounds.y+n.bounds.h)+"] ";var A=n.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+r+"/Contents ("+g(_(n.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+A+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(n.options.name){var D=this.annotations._nameMap[n.options.name];n.options.pageNumber=D.page,n.options.top=D.y}else n.options.top||(n.options.top=0);if(r="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",o="",n.options.url)o="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /A <</S /URI /URI ("+g(_(n.options.url))+") >>";else if(n.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,o+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var N=a(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),o+=" /XYZ "+n.options.left+" "+N+" "+n.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),i.createAnnotation=function(t){var n=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":n.pageContext.annotations.push(t)}},i.link=function(t,n,r,o,s){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(t),y:c(n),w:l(t+r),h:c(n+o)},options:s,type:"link"})},i.textWithLink=function(t,n,r,o){var s,a,l=this.getTextWidth(t),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){a=o.maxWidth;var d=this.splitTextToSize(t,a).length;s=Math.ceil(c*d)}else a=l,s=c;return this.text(t,n,r,o),r+=.2*c,o.align==="center"&&(n-=l/2),o.align==="right"&&(n-=l),this.link(n,r-c,a,s,o),l},i.getTextWidth=function(t){var n=this.internal.getFontSize();return this.getStringUnitWidth(t)*n/this.internal.scaleFactor}}(_t.API),function(i){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},r=[1570,1571,1573,1575];i.__arabicParser__={};var o=i.__arabicParser__.isInArabicSubstitutionA=function(b){return e[b.charCodeAt(0)]!==void 0},s=i.__arabicParser__.isArabicLetter=function(b){return typeof b=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(b)},a=i.__arabicParser__.isArabicEndLetter=function(b){return s(b)&&o(b)&&e[b.charCodeAt(0)].length<=2},l=i.__arabicParser__.isArabicAlfLetter=function(b){return s(b)&&r.indexOf(b.charCodeAt(0))>=0};i.__arabicParser__.arabicLetterHasIsolatedForm=function(b){return s(b)&&o(b)&&e[b.charCodeAt(0)].length>=1};var c=i.__arabicParser__.arabicLetterHasFinalForm=function(b){return s(b)&&o(b)&&e[b.charCodeAt(0)].length>=2};i.__arabicParser__.arabicLetterHasInitialForm=function(b){return s(b)&&o(b)&&e[b.charCodeAt(0)].length>=3};var d=i.__arabicParser__.arabicLetterHasMedialForm=function(b){return s(b)&&o(b)&&e[b.charCodeAt(0)].length==4},h=i.__arabicParser__.resolveLigatures=function(b){var C=0,y=t,M="",O=0;for(C=0;C<b.length;C+=1)y[b.charCodeAt(C)]!==void 0?(O++,typeof(y=y[b.charCodeAt(C)])=="number"&&(M+=String.fromCharCode(y),y=t,O=0),C===b.length-1&&(y=t,M+=b.charAt(C-(O-1)),C-=O-1,O=0)):(y=t,M+=b.charAt(C-O),C-=O,O=0);return M};i.__arabicParser__.isArabicDiacritic=function(b){return b!==void 0&&n[b.charCodeAt(0)]!==void 0};var p=i.__arabicParser__.getCorrectForm=function(b,C,y){return s(b)?o(b)===!1?-1:!c(b)||!s(C)&&!s(y)||!s(y)&&a(C)||a(b)&&!s(C)||a(b)&&l(C)||a(b)&&a(C)?0:d(b)&&s(C)&&!a(C)&&s(y)&&c(y)?3:a(b)||!s(y)?1:2:-1},g=function(b){var C=0,y=0,M=0,O="",A="",D="",N=(b=b||"").split("\\s+"),B=[];for(C=0;C<N.length;C+=1){for(B.push(""),y=0;y<N[C].length;y+=1)O=N[C][y],A=N[C][y-1],D=N[C][y+1],s(O)?(M=p(O,A,D),B[C]+=M!==-1?String.fromCharCode(e[O.charCodeAt(0)][M]):O):B[C]+=O;B[C]=h(B[C])}return B.join(" ")},_=i.__arabicParser__.processArabic=i.processArabic=function(){var b,C=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(C)){var M=0;for(y=[],M=0;M<C.length;M+=1)Array.isArray(C[M])?y.push([g(C[M][0]),C[M][1],C[M][2]]):y.push([g(C[M])]);b=y}else b=g(C);return typeof arguments[0]=="string"?b:(arguments[0].text=b,arguments[0])};i.events.push(["preProcessText",_])}(_t.API),_t.API.autoPrint=function(i){var e;switch((i=i||{}).variant=i.variant||"non-conform",i.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(i){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(a){t=a}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(a){n=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var r=300;Object.defineProperty(this,"height",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=r+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(a){o=a}});var s={};Object.defineProperty(this,"style",{get:function(){return s},set:function(a){s=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,n){var r;if((t=t||"2d")!=="2d")return null;for(r in n)this.pdf.context2d.hasOwnProperty(r)&&(this.pdf.context2d[r]=n[r]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},i.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(_t.API),function(i){var e={left:0,top:0,bottom:0,right:0},t=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),r.call(this))},r=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(b){l=b}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(b){c=b}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(b){d=b}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(b){h=b}});var p=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return p},set:function(b){p=b}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(b){g=b}});var _=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return _},set:function(b){_=b}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},i.setHeaderFunction=function(l){return n.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},i.getTextDimensions=function(l,c){n.call(this);var d=(c=c||{}).fontSize||this.getFontSize(),h=c.font||this.getFont(),p=c.scaleFactor||this.internal.scaleFactor,g=0,_=0,b=0,C=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var y=c.maxWidth;y>0?typeof l=="string"?l=this.splitTextToSize(l,y):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(O,A){return O.concat(C.splitTextToSize(A,y))},[])):l=Array.isArray(l)?l:[l];for(var M=0;M<l.length;M++)g<(b=this.getStringUnitWidth(l[M],{font:h})*d)&&(g=b);return g!==0&&(_=l.length),{w:g/=p,h:Math.max((_*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/p,0)}},i.cellAddPage=function(){n.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=i.cell=function(){var l;l=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var c=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,h=this.internal.__cell__.margins||e,p=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=h.top,g&&p&&(this.printHeaderRow(l.lineNumber,!0),l.y+=p[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,t===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-d,l.y+d,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+d,{align:"center",baseline:"top",maxWidth:l.width-d-d}):this.text(l.text,l.x+d,l.y+d,{align:"left",baseline:"top",maxWidth:l.width-d-d})),this.internal.__cell__.lastCell=l,this};i.table=function(l,c,d,h,p){if(n.call(this),!d)throw new Error("No data for PDF table.");var g,_,b,C,y=[],M=[],O=[],A={},D={},N=[],B=[],T=(p=p||{}).autoSize||!1,H=p.printHeaders!==!1,te=p.css&&p.css["font-size"]!==void 0?16*p.css["font-size"]:p.fontSize||12,L=p.margins||Object.assign({width:this.getPageWidth()},e),z=typeof p.padding=="number"?p.padding:3,J=p.headerBackgroundColor||"#c8c8c8",Q=p.headerTextColor||"#000";if(r.call(this),this.internal.__cell__.printHeaders=H,this.internal.__cell__.margins=L,this.internal.__cell__.table_font_size=te,this.internal.__cell__.padding=z,this.internal.__cell__.headerBackgroundColor=J,this.internal.__cell__.headerTextColor=Q,this.setFontSize(te),h==null)M=y=Object.keys(d[0]),O=y.map(function(){return"left"});else if(Array.isArray(h)&&$n(h[0])==="object")for(y=h.map(function(Ce){return Ce.name}),M=h.map(function(Ce){return Ce.prompt||Ce.name||""}),O=h.map(function(Ce){return Ce.align||"left"}),g=0;g<h.length;g+=1)D[h[g].name]=h[g].width*(19.049976/25.4);else Array.isArray(h)&&typeof h[0]=="string"&&(M=y=h,O=y.map(function(){return"left"}));if(T||Array.isArray(h)&&typeof h[0]=="string")for(g=0;g<y.length;g+=1){for(A[C=y[g]]=d.map(function(Ce){return Ce[C]}),this.setFont(void 0,"bold"),N.push(this.getTextDimensions(M[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),_=A[C],this.setFont(void 0,"normal"),b=0;b<_.length;b+=1)N.push(this.getTextDimensions(_[b],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);D[C]=Math.max.apply(null,N)+z+z,N=[]}if(H){var ce={};for(g=0;g<y.length;g+=1)ce[y[g]]={},ce[y[g]].text=M[g],ce[y[g]].align=O[g];var X=a.call(this,ce,D);B=y.map(function(Ce){return new o(l,c,D[Ce],X,ce[Ce].text,void 0,ce[Ce].align)}),this.setTableHeaderRow(B),this.printHeaderRow(1,!1)}var ie=h.reduce(function(Ce,Ne){return Ce[Ne.name]=Ne.align,Ce},{});for(g=0;g<d.length;g+=1){"rowStart"in p&&p.rowStart instanceof Function&&p.rowStart({row:g,data:d[g]},this);var oe=a.call(this,d[g],D);for(b=0;b<y.length;b+=1){var le=d[g][y[b]];"cellStart"in p&&p.cellStart instanceof Function&&p.cellStart({row:g,col:b,data:le},this),s.call(this,new o(l,c,D[y[b]],oe,le,g+2,ie[y[b]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var a=function(l,c){var d=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,p=this.internal.scaleFactor;return Object.keys(l).map(function(g){var _=l[g];return this.splitTextToSize(_.hasOwnProperty("text")?_.text:_,c[g]-d-d)},this).map(function(g){return this.getLineHeightFactor()*g.length*h/p+d+d},this).reduce(function(g,_){return Math.max(g,_)},0)};i.setTableHeaderRow=function(l){n.call(this),this.internal.__cell__.tableHeaderRow=l},i.printHeaderRow=function(l,c){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var p=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){d=this.internal.__cell__.tableHeaderRow[g].clone(),c&&(d.y=this.internal.__cell__.margins.top||0,p.push(d)),d.lineNumber=l;var _=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,d),this.setTextColor(_)}p.length>0&&this.setTableHeaderRow(p),this.setFont(void 0,"normal"),t=!1}}(_t.API);var mR={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},xR=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Q3=pR(xR),_R=[100,200,300,400,500,600,700,800,900],uoe=pR(_R);function J3(i){var e=i.family.replace(/"|'/g,"").toLowerCase(),t=function(o){return mR[o=o||"normal"]?o:"normal"}(i.style),n=function(o){if(!o)return 400;if(typeof o=="number")return o>=100&&o<=900&&o%100==0?o:400;if(/^\d00$/.test(o))return parseInt(o);switch(o){case"bold":return 700;case"normal":default:return 400}}(i.weight),r=function(o){return typeof Q3[o=o||"normal"]=="number"?o:"normal"}(i.stretch);return{family:e,style:t,weight:n,stretch:r,src:i.src||[],ref:i.ref||{name:e,style:[r,t,n].join(" ")}}}function QL(i,e,t,n){var r;for(r=t;r>=0&&r<e.length;r+=n)if(i[e[r]])return i[e[r]];for(r=t;r>=0&&r<e.length;r-=n)if(i[e[r]])return i[e[r]]}var hoe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},JL={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function ZL(i){return[i.stretch,i.style,i.weight,i.family].join(" ")}function foe(i,e,t){for(var n=(t=t||{}).defaultFontFamily||"times",r=Object.assign({},hoe,t.genericFontFamilies||{}),o=null,s=null,a=0;a<e.length;++a)if(r[(o=J3(e[a])).family]&&(o.family=r[o.family]),i.hasOwnProperty(o.family)){s=i[o.family];break}if(!(s=s||i[n]))throw new Error("Could not find a font-family for the rule '"+ZL(o)+"' and default family '"+n+"'.");if(s=function(l,c){if(c[l])return c[l];var d=Q3[l],h=d<=Q3.normal?-1:1,p=QL(c,xR,d,h);if(!p)throw new Error("Could not find a matching font-stretch value for "+l);return p}(o.stretch,s),s=function(l,c){if(c[l])return c[l];for(var d=mR[l],h=0;h<d.length;++h)if(c[d[h]])return c[d[h]];throw new Error("Could not find a matching font-style for "+l)}(o.style,s),!(s=function(l,c){if(c[l])return c[l];if(l===400&&c[500])return c[500];if(l===500&&c[400])return c[400];var d=uoe[l],h=QL(c,_R,d,l<400?-1:1);if(!h)throw new Error("Could not find a matching font-weight for value "+l);return h}(o.weight,s)))throw new Error("Failed to resolve a font for the rule '"+ZL(o)+"'.");return s}function eR(i){return i.trimLeft()}function goe(i,e){for(var t=0;t<i.length;){if(i.charAt(t)===e)return[i.substring(0,t),i.substring(t+1)];t+=1}return null}function poe(i){var e=i.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],i.substring(e[0].length)]}var hy,tR,nR,$3=["times"];(function(i){var e,t,n,r,o,s,a,l,c,d=function(R){return R=R||{},this.isStrokeTransparent=R.isStrokeTransparent||!1,this.strokeOpacity=R.strokeOpacity||1,this.strokeStyle=R.strokeStyle||"#000000",this.fillStyle=R.fillStyle||"#000000",this.isFillTransparent=R.isFillTransparent||!1,this.fillOpacity=R.fillOpacity||1,this.font=R.font||"10px sans-serif",this.textBaseline=R.textBaseline||"alphabetic",this.textAlign=R.textAlign||"left",this.lineWidth=R.lineWidth||1,this.lineJoin=R.lineJoin||"miter",this.lineCap=R.lineCap||"butt",this.path=R.path||[],this.transform=R.transform!==void 0?R.transform.clone():new l,this.globalCompositeOperation=R.globalCompositeOperation||"normal",this.globalAlpha=R.globalAlpha||1,this.clip_path=R.clip_path||[],this.currentPoint=R.currentPoint||new s,this.miterLimit=R.miterLimit||10,this.lastPoint=R.lastPoint||new s,this.lineDashOffset=R.lineDashOffset||0,this.lineDash=R.lineDash||[],this.margin=R.margin||[0,0,0,0],this.prevPageLastElemOffset=R.prevPageLastElemOffset||0,this.ignoreClearRect=typeof R.ignoreClearRect!="boolean"||R.ignoreClearRect,this};i.events.push(["initialized",function(){this.context2d=new h(this),e=this.internal.f2,t=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,r=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,s=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,c=new d}]);var h=function(R){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var ne=R;Object.defineProperty(this,"pdf",{get:function(){return ne}});var re=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return re},set:function(Te){re=!!Te}});var de=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return de},set:function(Te){de=!!Te}});var fe=0;Object.defineProperty(this,"posX",{get:function(){return fe},set:function(Te){isNaN(Te)||(fe=Te)}});var me=0;Object.defineProperty(this,"posY",{get:function(){return me},set:function(Te){isNaN(Te)||(me=Te)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(Te){var ue;typeof Te=="number"?ue=[Te,Te,Te,Te]:((ue=new Array(4))[0]=Te[0],ue[1]=Te.length>=2?Te[1]:ue[0],ue[2]=Te.length>=3?Te[2]:ue[0],ue[3]=Te.length>=4?Te[3]:ue[1]),c.margin=ue}});var Pe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Pe},set:function(Te){Pe=Te}});var Me=0;Object.defineProperty(this,"lastBreak",{get:function(){return Me},set:function(Te){Me=Te}});var Ue=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ue},set:function(Te){Ue=Te}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(Te){Te instanceof d&&(c=Te)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(Te){c.path=Te}});var He=[];Object.defineProperty(this,"ctxStack",{get:function(){return He},set:function(Te){He=Te}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Te){var ue;ue=p(Te),this.ctx.fillStyle=ue.style,this.ctx.isFillTransparent=ue.a===0,this.ctx.fillOpacity=ue.a,this.pdf.setFillColor(ue.r,ue.g,ue.b,{a:ue.a}),this.pdf.setTextColor(ue.r,ue.g,ue.b,{a:ue.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Te){var ue=p(Te);this.ctx.strokeStyle=ue.style,this.ctx.isStrokeTransparent=ue.a===0,this.ctx.strokeOpacity=ue.a,ue.a===0?this.pdf.setDrawColor(255,255,255):(ue.a,this.pdf.setDrawColor(ue.r,ue.g,ue.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Te){["butt","round","square"].indexOf(Te)!==-1&&(this.ctx.lineCap=Te,this.pdf.setLineCap(Te))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Te){isNaN(Te)||(this.ctx.lineWidth=Te,this.pdf.setLineWidth(Te))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Te){["bevel","round","miter"].indexOf(Te)!==-1&&(this.ctx.lineJoin=Te,this.pdf.setLineJoin(Te))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Te){isNaN(Te)||(this.ctx.miterLimit=Te,this.pdf.setMiterLimit(Te))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Te){this.ctx.textBaseline=Te}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Te){["right","end","center","left","start"].indexOf(Te)!==-1&&(this.ctx.textAlign=Te)}});var Xe=null;function Ye(Te,ue){if(Xe===null){var Ot=function(Ct){var We=[];return Object.keys(Ct).forEach(function(Qe){Ct[Qe].forEach(function(it){var nt=null;switch(it){case"bold":nt={family:Qe,weight:"bold"};break;case"italic":nt={family:Qe,style:"italic"};break;case"bolditalic":nt={family:Qe,weight:"bold",style:"italic"};break;case"":case"normal":nt={family:Qe}}nt!==null&&(nt.ref={name:Qe,style:it},We.push(nt))})}),We}(Te.getFontList());Xe=function(Ct){for(var We={},Qe=0;Qe<Ct.length;++Qe){var it=J3(Ct[Qe]),nt=it.family,Et=it.stretch,Nt=it.style,Kt=it.weight;We[nt]=We[nt]||{},We[nt][Et]=We[nt][Et]||{},We[nt][Et][Nt]=We[nt][Et][Nt]||{},We[nt][Et][Nt][Kt]=it}return We}(Ot.concat(ue))}return Xe}var wt=null;Object.defineProperty(this,"fontFaces",{get:function(){return wt},set:function(Te){Xe=null,wt=Te}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Te){var ue;if(this.ctx.font=Te,(ue=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Te))!==null){var Ot=ue[1];ue[2];var Ct=ue[3],We=ue[4];ue[5];var Qe=ue[6],it=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(We)[2];We=Math.floor(it==="px"?parseFloat(We)*this.pdf.internal.scaleFactor:it==="em"?parseFloat(We)*this.pdf.getFontSize():parseFloat(We)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(We);var nt=function(Ft){var sn,rt,Nr=[],En=Ft.trim();if(En==="")return $3;if(En in JL)return[JL[En]];for(;En!=="";){switch(rt=null,sn=(En=eR(En)).charAt(0)){case'"':case"'":rt=goe(En.substring(1),sn);break;default:rt=poe(En)}if(rt===null||(Nr.push(rt[0]),(En=eR(rt[1]))!==""&&En.charAt(0)!==","))return $3;En=En.replace(/^,/,"")}return Nr}(Qe);if(this.fontFaces){var Et=foe(Ye(this.pdf,this.fontFaces),nt.map(function(Ft){return{family:Ft,stretch:"normal",weight:Ct,style:Ot}}));this.pdf.setFont(Et.ref.name,Et.ref.style)}else{var Nt="";(Ct==="bold"||parseInt(Ct,10)>=700||Ot==="bold")&&(Nt="bold"),Ot==="italic"&&(Nt+="italic"),Nt.length===0&&(Nt="normal");for(var Kt="",nn={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Cn=0;Cn<nt.length;Cn++){if(this.pdf.internal.getFont(nt[Cn],Nt,{noFallback:!0,disableWarning:!0})!==void 0){Kt=nt[Cn];break}if(Nt==="bolditalic"&&this.pdf.internal.getFont(nt[Cn],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Kt=nt[Cn],Nt="bold";else if(this.pdf.internal.getFont(nt[Cn],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Kt=nt[Cn],Nt="normal";break}}if(Kt===""){for(var Hn=0;Hn<nt.length;Hn++)if(nn[nt[Hn]]){Kt=nn[nt[Hn]];break}}Kt=Kt===""?"Times":Kt,this.pdf.setFont(Kt,Nt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Te){this.ctx.globalCompositeOperation=Te}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Te){this.ctx.globalAlpha=Te}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Te){this.ctx.lineDashOffset=Te,Ne.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Te){this.ctx.lineDash=Te,Ne.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Te){this.ctx.ignoreClearRect=!!Te}})};h.prototype.setLineDash=function(R){this.lineDash=R},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){A.call(this,"fill",!1)},h.prototype.stroke=function(){A.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(R,ne){if(isNaN(R)||isNaN(ne))throw ti.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var re=this.ctx.transform.applyToPoint(new s(R,ne));this.path.push({type:"mt",x:re.x,y:re.y}),this.ctx.lastPoint=new s(R,ne)},h.prototype.closePath=function(){var R=new s(0,0),ne=0;for(ne=this.path.length-1;ne!==-1;ne--)if(this.path[ne].type==="begin"&&$n(this.path[ne+1])==="object"&&typeof this.path[ne+1].x=="number"){R=new s(this.path[ne+1].x,this.path[ne+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s(R.x,R.y)},h.prototype.lineTo=function(R,ne){if(isNaN(R)||isNaN(ne))throw ti.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var re=this.ctx.transform.applyToPoint(new s(R,ne));this.path.push({type:"lt",x:re.x,y:re.y}),this.ctx.lastPoint=new s(re.x,re.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),A.call(this,null,!0)},h.prototype.quadraticCurveTo=function(R,ne,re,de){if(isNaN(re)||isNaN(de)||isNaN(R)||isNaN(ne))throw ti.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var fe=this.ctx.transform.applyToPoint(new s(re,de)),me=this.ctx.transform.applyToPoint(new s(R,ne));this.path.push({type:"qct",x1:me.x,y1:me.y,x:fe.x,y:fe.y}),this.ctx.lastPoint=new s(fe.x,fe.y)},h.prototype.bezierCurveTo=function(R,ne,re,de,fe,me){if(isNaN(fe)||isNaN(me)||isNaN(R)||isNaN(ne)||isNaN(re)||isNaN(de))throw ti.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Pe=this.ctx.transform.applyToPoint(new s(fe,me)),Me=this.ctx.transform.applyToPoint(new s(R,ne)),Ue=this.ctx.transform.applyToPoint(new s(re,de));this.path.push({type:"bct",x1:Me.x,y1:Me.y,x2:Ue.x,y2:Ue.y,x:Pe.x,y:Pe.y}),this.ctx.lastPoint=new s(Pe.x,Pe.y)},h.prototype.arc=function(R,ne,re,de,fe,me){if(isNaN(R)||isNaN(ne)||isNaN(re)||isNaN(de)||isNaN(fe))throw ti.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(me=!!me,!this.ctx.transform.isIdentity){var Pe=this.ctx.transform.applyToPoint(new s(R,ne));R=Pe.x,ne=Pe.y;var Me=this.ctx.transform.applyToPoint(new s(0,re)),Ue=this.ctx.transform.applyToPoint(new s(0,0));re=Math.sqrt(Math.pow(Me.x-Ue.x,2)+Math.pow(Me.y-Ue.y,2))}Math.abs(fe-de)>=2*Math.PI&&(de=0,fe=2*Math.PI),this.path.push({type:"arc",x:R,y:ne,radius:re,startAngle:de,endAngle:fe,counterclockwise:me})},h.prototype.arcTo=function(R,ne,re,de,fe){throw new Error("arcTo not implemented.")},h.prototype.rect=function(R,ne,re,de){if(isNaN(R)||isNaN(ne)||isNaN(re)||isNaN(de))throw ti.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(R,ne),this.lineTo(R+re,ne),this.lineTo(R+re,ne+de),this.lineTo(R,ne+de),this.lineTo(R,ne),this.lineTo(R+re,ne),this.lineTo(R,ne)},h.prototype.fillRect=function(R,ne,re,de){if(isNaN(R)||isNaN(ne)||isNaN(re)||isNaN(de))throw ti.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var fe={};this.lineCap!=="butt"&&(fe.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(fe.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(R,ne,re,de),this.fill(),fe.hasOwnProperty("lineCap")&&(this.lineCap=fe.lineCap),fe.hasOwnProperty("lineJoin")&&(this.lineJoin=fe.lineJoin)}},h.prototype.strokeRect=function(R,ne,re,de){if(isNaN(R)||isNaN(ne)||isNaN(re)||isNaN(de))throw ti.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");_.call(this)||(this.beginPath(),this.rect(R,ne,re,de),this.stroke())},h.prototype.clearRect=function(R,ne,re,de){if(isNaN(R)||isNaN(ne)||isNaN(re)||isNaN(de))throw ti.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(R,ne,re,de))},h.prototype.save=function(R){R=typeof R!="boolean"||R;for(var ne=this.pdf.internal.getCurrentPageInfo().pageNumber,re=0;re<this.pdf.internal.getNumberOfPages();re++)this.pdf.setPage(re+1),this.pdf.internal.out("q");if(this.pdf.setPage(ne),R){this.ctx.fontSize=this.pdf.internal.getFontSize();var de=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=de}},h.prototype.restore=function(R){R=typeof R!="boolean"||R;for(var ne=this.pdf.internal.getCurrentPageInfo().pageNumber,re=0;re<this.pdf.internal.getNumberOfPages();re++)this.pdf.setPage(re+1),this.pdf.internal.out("Q");this.pdf.setPage(ne),R&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var p=function(R){var ne,re,de,fe;if(R.isCanvasGradient===!0&&(R=R.getColor()),!R)return{r:0,g:0,b:0,a:0,style:R};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(R))ne=0,re=0,de=0,fe=0;else{var me=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(R);if(me!==null)ne=parseInt(me[1]),re=parseInt(me[2]),de=parseInt(me[3]),fe=1;else if((me=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(R))!==null)ne=parseInt(me[1]),re=parseInt(me[2]),de=parseInt(me[3]),fe=parseFloat(me[4]);else{if(fe=1,typeof R=="string"&&R.charAt(0)!=="#"){var Pe=new cR(R);R=Pe.ok?Pe.toHex():"#000000"}R.length===4?(ne=R.substring(1,2),ne+=ne,re=R.substring(2,3),re+=re,de=R.substring(3,4),de+=de):(ne=R.substring(1,3),re=R.substring(3,5),de=R.substring(5,7)),ne=parseInt(ne,16),re=parseInt(re,16),de=parseInt(de,16)}}return{r:ne,g:re,b:de,a:fe,style:R}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},_=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(R,ne,re,de){if(isNaN(ne)||isNaN(re)||typeof R!="string")throw ti.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(de=isNaN(de)?void 0:de,!g.call(this)){var fe=oe(this.ctx.transform.rotation),me=this.ctx.transform.scaleX;z.call(this,{text:R,x:ne,y:re,scale:me,angle:fe,align:this.textAlign,maxWidth:de})}},h.prototype.strokeText=function(R,ne,re,de){if(isNaN(ne)||isNaN(re)||typeof R!="string")throw ti.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!_.call(this)){de=isNaN(de)?void 0:de;var fe=oe(this.ctx.transform.rotation),me=this.ctx.transform.scaleX;z.call(this,{text:R,x:ne,y:re,scale:me,renderingMode:"stroke",angle:fe,align:this.textAlign,maxWidth:de})}},h.prototype.measureText=function(R){if(typeof R!="string")throw ti.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var ne=this.pdf,re=this.pdf.internal.scaleFactor,de=ne.internal.getFontSize(),fe=ne.getStringUnitWidth(R)*de/ne.internal.scaleFactor,me=function(Pe){var Me=(Pe=Pe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Me}}),this};return new me({width:fe*=Math.round(96*re/72*1e4)/1e4})},h.prototype.scale=function(R,ne){if(isNaN(R)||isNaN(ne))throw ti.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var re=new l(R,0,0,ne,0,0);this.ctx.transform=this.ctx.transform.multiply(re)},h.prototype.rotate=function(R){if(isNaN(R))throw ti.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var ne=new l(Math.cos(R),Math.sin(R),-Math.sin(R),Math.cos(R),0,0);this.ctx.transform=this.ctx.transform.multiply(ne)},h.prototype.translate=function(R,ne){if(isNaN(R)||isNaN(ne))throw ti.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var re=new l(1,0,0,1,R,ne);this.ctx.transform=this.ctx.transform.multiply(re)},h.prototype.transform=function(R,ne,re,de,fe,me){if(isNaN(R)||isNaN(ne)||isNaN(re)||isNaN(de)||isNaN(fe)||isNaN(me))throw ti.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Pe=new l(R,ne,re,de,fe,me);this.ctx.transform=this.ctx.transform.multiply(Pe)},h.prototype.setTransform=function(R,ne,re,de,fe,me){R=isNaN(R)?1:R,ne=isNaN(ne)?0:ne,re=isNaN(re)?0:re,de=isNaN(de)?1:de,fe=isNaN(fe)?0:fe,me=isNaN(me)?0:me,this.ctx.transform=new l(R,ne,re,de,fe,me)};var b=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(R,ne,re,de,fe,me,Pe,Me,Ue){var He=this.pdf.getImageProperties(R),Xe=1,Ye=1,wt=1,Te=1;de!==void 0&&Me!==void 0&&(wt=Me/de,Te=Ue/fe,Xe=He.width/de*Me/de,Ye=He.height/fe*Ue/fe),me===void 0&&(me=ne,Pe=re,ne=0,re=0),de!==void 0&&Me===void 0&&(Me=de,Ue=fe),de===void 0&&Me===void 0&&(Me=He.width,Ue=He.height);for(var ue,Ot=this.ctx.transform.decompose(),Ct=oe(Ot.rotate.shx),We=new l,Qe=(We=(We=(We=We.multiply(Ot.translate)).multiply(Ot.skew)).multiply(Ot.scale)).applyToRectangle(new a(me-ne*wt,Pe-re*Te,de*Xe,fe*Ye)),it=C.call(this,Qe),nt=[],Et=0;Et<it.length;Et+=1)nt.indexOf(it[Et])===-1&&nt.push(it[Et]);if(O(nt),this.autoPaging)for(var Nt=nt[0],Kt=nt[nt.length-1],nn=Nt;nn<Kt+1;nn++){this.pdf.setPage(nn);var Cn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Hn=nn===1?this.posY+this.margin[0]:this.margin[0],Ft=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],sn=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],rt=nn===1?0:Ft+(nn-2)*sn;if(this.ctx.clip_path.length!==0){var Nr=this.path;ue=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=M(ue,this.posX+this.margin[3],-rt+Hn+this.ctx.prevPageLastElemOffset),D.call(this,"fill",!0),this.path=Nr}var En=JSON.parse(JSON.stringify(Qe));En=M([En],this.posX+this.margin[3],-rt+Hn+this.ctx.prevPageLastElemOffset)[0];var Ws=(nn>Nt||nn<Kt)&&b.call(this);Ws&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Cn,sn,null).clip().discardPath()),this.pdf.addImage(R,"JPEG",En.x,En.y,En.w,En.h,null,null,Ct),Ws&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(R,"JPEG",Qe.x,Qe.y,Qe.w,Qe.h,null,null,Ct)};var C=function(R,ne,re){var de=[];ne=ne||this.pdf.internal.pageSize.width,re=re||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var fe=this.posY+this.ctx.prevPageLastElemOffset;switch(R.type){default:case"mt":case"lt":de.push(Math.floor((R.y+fe)/re)+1);break;case"arc":de.push(Math.floor((R.y+fe-R.radius)/re)+1),de.push(Math.floor((R.y+fe+R.radius)/re)+1);break;case"qct":var me=le(this.ctx.lastPoint.x,this.ctx.lastPoint.y,R.x1,R.y1,R.x,R.y);de.push(Math.floor((me.y+fe)/re)+1),de.push(Math.floor((me.y+me.h+fe)/re)+1);break;case"bct":var Pe=Ce(this.ctx.lastPoint.x,this.ctx.lastPoint.y,R.x1,R.y1,R.x2,R.y2,R.x,R.y);de.push(Math.floor((Pe.y+fe)/re)+1),de.push(Math.floor((Pe.y+Pe.h+fe)/re)+1);break;case"rect":de.push(Math.floor((R.y+fe)/re)+1),de.push(Math.floor((R.y+R.h+fe)/re)+1)}for(var Me=0;Me<de.length;Me+=1)for(;this.pdf.internal.getNumberOfPages()<de[Me];)y.call(this);return de},y=function(){var R=this.fillStyle,ne=this.strokeStyle,re=this.font,de=this.lineCap,fe=this.lineWidth,me=this.lineJoin;this.pdf.addPage(),this.fillStyle=R,this.strokeStyle=ne,this.font=re,this.lineCap=de,this.lineWidth=fe,this.lineJoin=me},M=function(R,ne,re){for(var de=0;de<R.length;de++)switch(R[de].type){case"bct":R[de].x2+=ne,R[de].y2+=re;case"qct":R[de].x1+=ne,R[de].y1+=re;case"mt":case"lt":case"arc":default:R[de].x+=ne,R[de].y+=re}return R},O=function(R){return R.sort(function(ne,re){return ne-re})},A=function(R,ne){for(var re,de,fe=this.fillStyle,me=this.strokeStyle,Pe=this.lineCap,Me=this.lineWidth,Ue=Math.abs(Me*this.ctx.transform.scaleX),He=this.lineJoin,Xe=JSON.parse(JSON.stringify(this.path)),Ye=JSON.parse(JSON.stringify(this.path)),wt=[],Te=0;Te<Ye.length;Te++)if(Ye[Te].x!==void 0)for(var ue=C.call(this,Ye[Te]),Ot=0;Ot<ue.length;Ot+=1)wt.indexOf(ue[Ot])===-1&&wt.push(ue[Ot]);for(var Ct=0;Ct<wt.length;Ct++)for(;this.pdf.internal.getNumberOfPages()<wt[Ct];)y.call(this);if(O(wt),this.autoPaging)for(var We=wt[0],Qe=wt[wt.length-1],it=We;it<Qe+1;it++){this.pdf.setPage(it),this.fillStyle=fe,this.strokeStyle=me,this.lineCap=Pe,this.lineWidth=Ue,this.lineJoin=He;var nt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Et=it===1?this.posY+this.margin[0]:this.margin[0],Nt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Kt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],nn=it===1?0:Nt+(it-2)*Kt;if(this.ctx.clip_path.length!==0){var Cn=this.path;re=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=M(re,this.posX+this.margin[3],-nn+Et+this.ctx.prevPageLastElemOffset),D.call(this,R,!0),this.path=Cn}if(de=JSON.parse(JSON.stringify(Xe)),this.path=M(de,this.posX+this.margin[3],-nn+Et+this.ctx.prevPageLastElemOffset),ne===!1||it===0){var Hn=(it>We||it<Qe)&&b.call(this);Hn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],nt,Kt,null).clip().discardPath()),D.call(this,R,ne),Hn&&this.pdf.restoreGraphicsState()}this.lineWidth=Me}else this.lineWidth=Ue,D.call(this,R,ne),this.lineWidth=Me;this.path=Xe},D=function(R,ne){if((R!=="stroke"||ne||!_.call(this))&&(R==="stroke"||ne||!g.call(this))){for(var re,de,fe=[],me=this.path,Pe=0;Pe<me.length;Pe++){var Me=me[Pe];switch(Me.type){case"begin":fe.push({begin:!0});break;case"close":fe.push({close:!0});break;case"mt":fe.push({start:Me,deltas:[],abs:[]});break;case"lt":var Ue=fe.length;if(me[Pe-1]&&!isNaN(me[Pe-1].x)&&(re=[Me.x-me[Pe-1].x,Me.y-me[Pe-1].y],Ue>0)){for(;Ue>=0;Ue--)if(fe[Ue-1].close!==!0&&fe[Ue-1].begin!==!0){fe[Ue-1].deltas.push(re),fe[Ue-1].abs.push(Me);break}}break;case"bct":re=[Me.x1-me[Pe-1].x,Me.y1-me[Pe-1].y,Me.x2-me[Pe-1].x,Me.y2-me[Pe-1].y,Me.x-me[Pe-1].x,Me.y-me[Pe-1].y],fe[fe.length-1].deltas.push(re);break;case"qct":var He=me[Pe-1].x+2/3*(Me.x1-me[Pe-1].x),Xe=me[Pe-1].y+2/3*(Me.y1-me[Pe-1].y),Ye=Me.x+2/3*(Me.x1-Me.x),wt=Me.y+2/3*(Me.y1-Me.y),Te=Me.x,ue=Me.y;re=[He-me[Pe-1].x,Xe-me[Pe-1].y,Ye-me[Pe-1].x,wt-me[Pe-1].y,Te-me[Pe-1].x,ue-me[Pe-1].y],fe[fe.length-1].deltas.push(re);break;case"arc":fe.push({deltas:[],abs:[],arc:!0}),Array.isArray(fe[fe.length-1].abs)&&fe[fe.length-1].abs.push(Me)}}de=ne?null:R==="stroke"?"stroke":"fill";for(var Ot=!1,Ct=0;Ct<fe.length;Ct++)if(fe[Ct].arc)for(var We=fe[Ct].abs,Qe=0;Qe<We.length;Qe++){var it=We[Qe];it.type==="arc"?T.call(this,it.x,it.y,it.radius,it.startAngle,it.endAngle,it.counterclockwise,void 0,ne,!Ot):J.call(this,it.x,it.y),Ot=!0}else if(fe[Ct].close===!0)this.pdf.internal.out("h"),Ot=!1;else if(fe[Ct].begin!==!0){var nt=fe[Ct].start.x,Et=fe[Ct].start.y;Q.call(this,fe[Ct].deltas,nt,Et),Ot=!0}de&&H.call(this,de),ne&&te.call(this)}},N=function(R){var ne=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,re=ne*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return R-re;case"top":return R+ne-re;case"hanging":return R+ne-2*re;case"middle":return R+ne/2-re;case"ideographic":return R;case"alphabetic":default:return R}},B=function(R){return R+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var R=function(){};return R.colorStops=[],R.addColorStop=function(ne,re){this.colorStops.push([ne,re])},R.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},R.isCanvasGradient=!0,R},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var T=function(R,ne,re,de,fe,me,Pe,Me,Ue){for(var He=X.call(this,re,de,fe,me),Xe=0;Xe<He.length;Xe++){var Ye=He[Xe];Xe===0&&(Ue?L.call(this,Ye.x1+R,Ye.y1+ne):J.call(this,Ye.x1+R,Ye.y1+ne)),ce.call(this,R,ne,Ye.x2,Ye.y2,Ye.x3,Ye.y3,Ye.x4,Ye.y4)}Me?te.call(this):H.call(this,Pe)},H=function(R){switch(R){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},te=function(){this.pdf.clip(),this.pdf.discardPath()},L=function(R,ne){this.pdf.internal.out(t(R)+" "+n(ne)+" m")},z=function(R){var ne;switch(R.align){case"right":case"end":ne="right";break;case"center":ne="center";break;case"left":case"start":default:ne="left"}var re=this.pdf.getTextDimensions(R.text),de=N.call(this,R.y),fe=B.call(this,de)-re.h,me=this.ctx.transform.applyToPoint(new s(R.x,de)),Pe=this.ctx.transform.decompose(),Me=new l;Me=(Me=(Me=Me.multiply(Pe.translate)).multiply(Pe.skew)).multiply(Pe.scale);for(var Ue,He,Xe,Ye=this.ctx.transform.applyToRectangle(new a(R.x,de,re.w,re.h)),wt=Me.applyToRectangle(new a(R.x,fe,re.w,re.h)),Te=C.call(this,wt),ue=[],Ot=0;Ot<Te.length;Ot+=1)ue.indexOf(Te[Ot])===-1&&ue.push(Te[Ot]);if(O(ue),this.autoPaging)for(var Ct=ue[0],We=ue[ue.length-1],Qe=Ct;Qe<We+1;Qe++){this.pdf.setPage(Qe);var it=Qe===1?this.posY+this.margin[0]:this.margin[0],nt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Et=this.pdf.internal.pageSize.height-this.margin[2],Nt=Et-this.margin[0],Kt=this.pdf.internal.pageSize.width-this.margin[1],nn=Kt-this.margin[3],Cn=Qe===1?0:nt+(Qe-2)*Nt;if(this.ctx.clip_path.length!==0){var Hn=this.path;Ue=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=M(Ue,this.posX+this.margin[3],-1*Cn+it),D.call(this,"fill",!0),this.path=Hn}var Ft=M([JSON.parse(JSON.stringify(wt))],this.posX+this.margin[3],-Cn+it+this.ctx.prevPageLastElemOffset)[0];R.scale>=.01&&(He=this.pdf.internal.getFontSize(),this.pdf.setFontSize(He*R.scale),Xe=this.lineWidth,this.lineWidth=Xe*R.scale);var sn=this.autoPaging!=="text";if(sn||Ft.y+Ft.h<=Et){if(sn||Ft.y>=it&&Ft.x<=Kt){var rt=sn?R.text:this.pdf.splitTextToSize(R.text,R.maxWidth||Kt-Ft.x)[0],Nr=M([JSON.parse(JSON.stringify(Ye))],this.posX+this.margin[3],-Cn+it+this.ctx.prevPageLastElemOffset)[0],En=sn&&(Qe>Ct||Qe<We)&&b.call(this);En&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],nn,Nt,null).clip().discardPath()),this.pdf.text(rt,Nr.x,Nr.y,{angle:R.angle,align:ne,renderingMode:R.renderingMode}),En&&this.pdf.restoreGraphicsState()}}else Ft.y<Et&&(this.ctx.prevPageLastElemOffset+=Et-Ft.y);R.scale>=.01&&(this.pdf.setFontSize(He),this.lineWidth=Xe)}else R.scale>=.01&&(He=this.pdf.internal.getFontSize(),this.pdf.setFontSize(He*R.scale),Xe=this.lineWidth,this.lineWidth=Xe*R.scale),this.pdf.text(R.text,me.x+this.posX,me.y+this.posY,{angle:R.angle,align:ne,renderingMode:R.renderingMode,maxWidth:R.maxWidth}),R.scale>=.01&&(this.pdf.setFontSize(He),this.lineWidth=Xe)},J=function(R,ne,re,de){re=re||0,de=de||0,this.pdf.internal.out(t(R+re)+" "+n(ne+de)+" l")},Q=function(R,ne,re){return this.pdf.lines(R,ne,re,null,null)},ce=function(R,ne,re,de,fe,me,Pe,Me){this.pdf.internal.out([e(r(re+R)),e(o(de+ne)),e(r(fe+R)),e(o(me+ne)),e(r(Pe+R)),e(o(Me+ne)),"c"].join(" "))},X=function(R,ne,re,de){for(var fe=2*Math.PI,me=Math.PI/2;ne>re;)ne-=fe;var Pe=Math.abs(re-ne);Pe<fe&&de&&(Pe=fe-Pe);for(var Me=[],Ue=de?-1:1,He=ne;Pe>1e-5;){var Xe=He+Ue*Math.min(Pe,me);Me.push(ie.call(this,R,He,Xe)),Pe-=Math.abs(Xe-He),He=Xe}return Me},ie=function(R,ne,re){var de=(re-ne)/2,fe=R*Math.cos(de),me=R*Math.sin(de),Pe=fe,Me=-me,Ue=Pe*Pe+Me*Me,He=Ue+Pe*fe+Me*me,Xe=4/3*(Math.sqrt(2*Ue*He)-He)/(Pe*me-Me*fe),Ye=Pe-Xe*Me,wt=Me+Xe*Pe,Te=Ye,ue=-wt,Ot=de+ne,Ct=Math.cos(Ot),We=Math.sin(Ot);return{x1:R*Math.cos(ne),y1:R*Math.sin(ne),x2:Ye*Ct-wt*We,y2:Ye*We+wt*Ct,x3:Te*Ct-ue*We,y3:Te*We+ue*Ct,x4:R*Math.cos(re),y4:R*Math.sin(re)}},oe=function(R){return 180*R/Math.PI},le=function(R,ne,re,de,fe,me){var Pe=R+.5*(re-R),Me=ne+.5*(de-ne),Ue=fe+.5*(re-fe),He=me+.5*(de-me),Xe=Math.min(R,fe,Pe,Ue),Ye=Math.max(R,fe,Pe,Ue),wt=Math.min(ne,me,Me,He),Te=Math.max(ne,me,Me,He);return new a(Xe,wt,Ye-Xe,Te-wt)},Ce=function(R,ne,re,de,fe,me,Pe,Me){var Ue,He,Xe,Ye,wt,Te,ue,Ot,Ct,We,Qe,it,nt,Et,Nt=re-R,Kt=de-ne,nn=fe-re,Cn=me-de,Hn=Pe-fe,Ft=Me-me;for(He=0;He<41;He++)Ct=(ue=(Xe=R+(Ue=He/40)*Nt)+Ue*((wt=re+Ue*nn)-Xe))+Ue*(wt+Ue*(fe+Ue*Hn-wt)-ue),We=(Ot=(Ye=ne+Ue*Kt)+Ue*((Te=de+Ue*Cn)-Ye))+Ue*(Te+Ue*(me+Ue*Ft-Te)-Ot),He==0?(Qe=Ct,it=We,nt=Ct,Et=We):(Qe=Math.min(Qe,Ct),it=Math.min(it,We),nt=Math.max(nt,Ct),Et=Math.max(Et,We));return new a(Math.round(Qe),Math.round(it),Math.round(nt-Qe),Math.round(Et-it))},Ne=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var R,ne,re=(R=this.ctx.lineDash,ne=this.ctx.lineDashOffset,JSON.stringify({lineDash:R,lineDashOffset:ne}));this.prevLineDash!==re&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=re)}}})(_t.API),function(i){var e=function(o){var s,a,l,c,d,h,p,g,_,b;for(/[^\x00-\xFF]/.test(o),a=[],l=0,c=(o+=s="\0\0\0\0".slice(o.length%4||4)).length;c>l;l+=4)(d=(o.charCodeAt(l)<<24)+(o.charCodeAt(l+1)<<16)+(o.charCodeAt(l+2)<<8)+o.charCodeAt(l+3))!==0?(h=(d=((d=((d=((d=(d-(b=d%85))/85)-(_=d%85))/85)-(g=d%85))/85)-(p=d%85))/85)%85,a.push(h+33,p+33,g+33,_+33,b+33)):a.push(122);return function(C,y){for(var M=y;M>0;M--)C.pop()}(a,s.length),String.fromCharCode.apply(String,a)+"~>"},t=function(o){var s,a,l,c,d,h=String,p="length",g=255,_="charCodeAt",b="slice",C="replace";for(o[b](-2),o=o[b](0,-2)[C](/\s/g,"")[C]("z","!!!!!"),l=[],c=0,d=(o+=s="uuuuu"[b](o[p]%5||5))[p];d>c;c+=5)a=52200625*(o[_](c)-33)+614125*(o[_](c+1)-33)+7225*(o[_](c+2)-33)+85*(o[_](c+3)-33)+(o[_](c+4)-33),l.push(g&a>>24,g&a>>16,g&a>>8,g&a);return function(y,M){for(var O=M;O>0;O--)y.pop()}(l,s[p]),h.fromCharCode.apply(h,l)},n=function(o){var s=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),s.test(o)===!1)return"";for(var a="",l=0;l<o.length;l+=2)a+=String.fromCharCode("0x"+(o[l]+o[l+1]));return a},r=function(o){for(var s=new Uint8Array(o.length),a=o.length;a--;)s[a]=o.charCodeAt(a);return o=(s=cy(s)).reduce(function(l,c){return l+String.fromCharCode(c)},"")};i.processDataByFilters=function(o,s){var a=0,l=o||"",c=[];for(typeof(s=s||[])=="string"&&(s=[s]),a=0;a<s.length;a+=1)switch(s[a]){case"ASCII85Decode":case"/ASCII85Decode":l=t(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=n(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=r(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+s[a]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}}(_t.API),function(i){i.loadFile=function(e,t,n){return function(r,o,s){o=o!==!1,s=typeof s=="function"?s:function(){};var a=void 0;try{a=function(l,c,d){var h=new XMLHttpRequest,p=0,g=function(_){var b=_.length,C=[],y=String.fromCharCode;for(p=0;p<b;p+=1)C.push(y(255&_.charCodeAt(p)));return C.join("")};if(h.open("GET",l,!c),h.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(h.onload=function(){h.status===200?d(g(this.responseText)):d(void 0)}),h.send(null),c&&h.status===200)return g(h.responseText)}(r,o,s)}catch{}return a}(e,t,n)},i.loadImageFile=i.loadFile}(_t.API),function(i){function e(){return(Dt.html2canvas?Promise.resolve(Dt.html2canvas):import("./chunk-HDKNBWJM.js")).catch(function(s){return Promise.reject(new Error("Could not load html2canvas: "+s))}).then(function(s){return s.default?s.default:s})}function t(){return(Dt.DOMPurify?Promise.resolve(Dt.DOMPurify):import("./chunk-CAMUQMTF.js")).catch(function(s){return Promise.reject(new Error("Could not load dompurify: "+s))}).then(function(s){return s.default?s.default:s})}var n=function(s){var a=$n(s);return a==="undefined"?"undefined":a==="string"||s instanceof String?"string":a==="number"||s instanceof Number?"number":a==="function"||s instanceof Function?"function":s&&s.constructor===Array?"array":s&&s.nodeType===1?"element":a==="object"?"object":"unknown"},r=function(s,a){var l=document.createElement(s);for(var c in a.className&&(l.className=a.className),a.innerHTML&&a.dompurify&&(l.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)l.style[c]=a.style[c];return l},o=function s(a){var l=Object.assign(s.convert(Promise.resolve()),JSON.parse(JSON.stringify(s.template))),c=s.convert(Promise.resolve(),l);return c=(c=c.setProgress(1,s,1,[s])).set(a)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(s,a){return s.__proto__=a||o.prototype,s},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(s,a){return this.then(function(){switch(a=a||function(l){switch(n(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(s)){case"string":return this.then(t).then(function(l){return this.set({src:r("div",{innerHTML:s,dompurify:l})})});case"element":return this.set({src:s});case"canvas":return this.set({canvas:s});case"img":return this.set({img:s});default:return this.error("Unknown source type.")}})},o.prototype.to=function(s){switch(s){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var s={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function l(c,d){for(var h=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),p=c.firstChild;p;p=p.nextSibling)d!==!0&&p.nodeType===1&&p.nodeName==="SCRIPT"||h.appendChild(l(p,d));return c.nodeType===1&&(c.nodeName==="CANVAS"?(h.width=c.width,h.height=c.height,h.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(h.value=c.value),h.addEventListener("load",function(){h.scrollTop=c.scrollTop,h.scrollLeft=c.scrollLeft},!0)),h}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(s.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=r("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=r("div",{className:"html2pdf__container",style:s}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(r("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(e).then(function(a){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,a(this.prop.container,l)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(e).then(function(a){var l=this.opt.jsPDF,c=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=c,c)for(var p=0;p<c.length;++p){var g=c[p],_=g.src.find(function(b){return b.format==="truetype"});_&&l.addFont(_.url,g.ref.name,g.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,l.context2d.save(!0),a(this.prop.container,h)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var s=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=s})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(s,a,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(s,a):this.outputPdf(s,a)},o.prototype.outputPdf=function(s,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(s,a)})},o.prototype.outputImg=function(s){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(s){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+s+'" is not supported.'}})},o.prototype.save=function(s){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(s?{filename:s}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(s){if(n(s)!=="object")return this;var a=Object.keys(s||{}).map(function(l){if(l in o.template.prop)return function(){this.prop[l]=s[l]};switch(l){case"margin":return this.setMargin.bind(this,s.margin);case"jsPDF":return function(){return this.opt.jsPDF=s.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,s.pageSize);default:return function(){this.opt[l]=s[l]}}},this);return this.then(function(){return this.thenList(a)})},o.prototype.get=function(s,a){return this.then(function(){var l=s in o.template.prop?this.prop[s]:this.opt[s];return a?a(l):l})},o.prototype.setMargin=function(s){return this.then(function(){switch(n(s)){case"number":s=[s,s,s,s];case"array":if(s.length===2&&(s=[s[0],s[1],s[0],s[1]]),s.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=s}).then(this.setPageSize)},o.prototype.setPageSize=function(s){function a(l,c){return Math.floor(l*c/72*96)}return this.then(function(){(s=s||_t.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(s.inner={width:s.width-this.opt.margin[1]-this.opt.margin[3],height:s.height-this.opt.margin[0]-this.opt.margin[2]},s.inner.px={width:a(s.inner.width,s.k),height:a(s.inner.height,s.k)},s.inner.ratio=s.inner.height/s.inner.width),this.prop.pageSize=s})},o.prototype.setProgress=function(s,a,l,c){return s!=null&&(this.progress.val=s),a!=null&&(this.progress.state=a),l!=null&&(this.progress.n=l),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(s,a,l,c){return this.setProgress(s?this.progress.val+s:null,a||null,l?this.progress.n+l:null,c?this.progress.stack.concat(c):null)},o.prototype.then=function(s,a){var l=this;return this.thenCore(s,a,function(c,d){return l.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(h){return l.updateProgress(null,c),h}).then(c,d).then(function(h){return l.updateProgress(1),h})})},o.prototype.thenCore=function(s,a,l){l=l||Promise.prototype.then,s&&(s=s.bind(this)),a&&(a=a.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:o.convert(Object.assign({},this),Promise.prototype),d=l.call(c,s,a);return o.convert(d,this.__proto__)},o.prototype.thenExternal=function(s,a){return Promise.prototype.then.call(this,s,a)},o.prototype.thenList=function(s){var a=this;return s.forEach(function(l){a=a.thenCore(l)}),a},o.prototype.catch=function(s){s&&(s=s.bind(this));var a=Promise.prototype.catch.call(this,s);return o.convert(a,this)},o.prototype.catchExternal=function(s){return Promise.prototype.catch.call(this,s)},o.prototype.error=function(s){return this.then(function(){throw new Error(s)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,_t.getPageSize=function(s,a,l){if($n(s)==="object"){var c=s;s=c.orientation,a=c.unit||a,l=c.format||l}a=a||"mm",l=l||"a4",s=(""+(s||"P")).toLowerCase();var d,h=(""+l).toLowerCase(),p={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+a}var g,_=0,b=0;if(p.hasOwnProperty(h))_=p[h][1]/d,b=p[h][0]/d;else try{_=l[1],b=l[0]}catch{throw new Error("Invalid format: "+l)}if(s==="p"||s==="portrait")s="p",b>_&&(g=b,b=_,_=g);else{if(s!=="l"&&s!=="landscape")throw"Invalid orientation: "+s;s="l",_>b&&(g=b,b=_,_=g)}return{width:b,height:_,unit:a,k:d,orientation:s}},i.html=function(s,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(J3):null;var l=new o(a);return a.worker?l:l.from(s).doCallback()}}(_t.API),_t.API.addJS=function(i){return nR=i,this.internal.events.subscribe("postPutResources",function(){hy=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(hy+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),tR=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+nR+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){hy!==void 0&&tR!==void 0&&this.internal.out("/Names <</JavaScript "+hy+" 0 R>>")}),this},function(i){var e;i.events.push(["postPutResources",function(){var t=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var r=t.outline.render().split(/\r\n/),o=0;o<r.length;o++){var s=r[o],a=n.exec(s);if(a!=null){var l=a[1];t.internal.newObjectDeferredBegin(l,!1)}t.internal.write(s)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,d=[];for(o=0;o<c;o++){var h=t.internal.newObject();d.push(h);var p=t.internal.getPageInfo(o+1);t.internal.write("<< /D["+p.objId+" 0 R /XYZ null null null]>> endobj")}var g=t.internal.newObject();for(t.internal.write("<< /Names [ "),o=0;o<d.length;o++)t.internal.write("(page_"+(o+1)+")"+d[o]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+g+" 0 R"),t.internal.write(">>","endobj")}}]),i.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),i.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(n,r,o){var s={title:r,options:o,children:[]};return n==null&&(n=this.root),n.children.push(s),s},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(n){n.id=t.internal.newObjectDeferred();for(var r=0;r<n.children.length;r++)this.genIds_r(n.children[r])},t.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},t.outline.renderItems=function(n){for(var r=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<n.children.length;o++){var s=n.children[o];this.objStart(s),this.line("/Title "+this.makeString(s.title)),this.line("/Parent "+this.makeRef(n)),o>0&&this.line("/Prev "+this.makeRef(n.children[o-1])),o<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[o+1])),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1])));var a=this.count=this.count_r({count:0},s);if(a>0&&this.line("/Count "+a),s.options&&s.options.pageNumber){var l=t.internal.getPageInfo(s.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+r(0)+" 0]")}this.objEnd()}for(var c=0;c<n.children.length;c++)this.renderItems(n.children[c])},t.outline.line=function(n){this.ctx.val+=n+`\r
`},t.outline.makeRef=function(n){return n.id+" 0 R"},t.outline.makeString=function(n){return"("+t.internal.pdfEscape(n)+")"},t.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(n,r){for(var o=0;o<r.children.length;o++)n.count++,this.count_r(n,r.children[o]);return n.count}}])}(_t.API),function(i){var e=[192,193,194,195,196,197,198,199];i.processJPEG=function(t,n,r,o,s,a){var l,c=this.decode.DCT_DECODE,d=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=s||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(l=function(h){for(var p,g=256*h.charCodeAt(4)+h.charCodeAt(5),_=h.length,b={width:0,height:0,numcomponents:1},C=4;C<_;C+=2){if(C+=g,e.indexOf(h.charCodeAt(C+1))!==-1){p=256*h.charCodeAt(C+5)+h.charCodeAt(C+6),b={width:256*h.charCodeAt(C+7)+h.charCodeAt(C+8),height:p,numcomponents:h.charCodeAt(C+9)};break}g=256*h.charCodeAt(C+2)+h.charCodeAt(C+3)}return b}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}d={data:t,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:c,index:n,alias:r}}return d}}(_t.API);var qf,fy,iR,rR,oR,moe=function(){var i,e,t;function n(o){var s,a,l,c,d,h,p,g,_,b,C,y,M,O;for(this.data=o,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},h=null;;){switch(s=this.readUInt32(),_=function(){var A,D;for(D=[],A=0;A<4;++A)D.push(String.fromCharCode(this.data[this.pos++]));return D}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(s);break;case"fcTL":h&&this.animation.frames.push(h),this.pos+=4,h={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),c=this.readUInt16()||100,h.delay=1e3*d/c,h.disposeOp=this.data[this.pos++],h.blendOp=this.data[this.pos++],h.data=[];break;case"IDAT":case"fdAT":for(_==="fdAT"&&(this.pos+=4,s-=4),o=h?.data||this.imgData,y=0;0<=s?y<s:y>s;0<=s?++y:--y)o.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(s),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((b=l-this.transparency.indexed.length)>0)for(M=0;0<=b?M<b:M>b;0<=b?++M:--M)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(s)[0];break;case 2:this.transparency.rgb=this.read(s)}break;case"tEXt":p=(C=this.read(s)).indexOf(0),g=String.fromCharCode.apply(String,C.slice(0,p)),this.text[g]=String.fromCharCode.apply(String,C.slice(p+1));break;case"IEND":return h&&this.animation.frames.push(h),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=(O=this.colorType)===4||O===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=s}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(o){var s,a;for(a=[],s=0;0<=o?s<o:s>o;0<=o?++s:--s)a.push(this.data[this.pos++]);return a},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(o){var s=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*s),l=0,c=this;if(o==null&&(o=this.imgData),o.length===0)return new Uint8Array(0);function d(h,p,g,_){var b,C,y,M,O,A,D,N,B,T,H,te,L,z,J,Q,ce,X,ie,oe,le,Ce=Math.ceil((c.width-h)/g),Ne=Math.ceil((c.height-p)/_),R=c.width==Ce&&c.height==Ne;for(z=s*Ce,te=R?a:new Uint8Array(z*Ne),A=o.length,L=0,C=0;L<Ne&&l<A;){switch(o[l++]){case 0:for(M=ce=0;ce<z;M=ce+=1)te[C++]=o[l++];break;case 1:for(M=X=0;X<z;M=X+=1)b=o[l++],O=M<s?0:te[C-s],te[C++]=(b+O)%256;break;case 2:for(M=ie=0;ie<z;M=ie+=1)b=o[l++],y=(M-M%s)/s,J=L&&te[(L-1)*z+y*s+M%s],te[C++]=(J+b)%256;break;case 3:for(M=oe=0;oe<z;M=oe+=1)b=o[l++],y=(M-M%s)/s,O=M<s?0:te[C-s],J=L&&te[(L-1)*z+y*s+M%s],te[C++]=(b+Math.floor((O+J)/2))%256;break;case 4:for(M=le=0;le<z;M=le+=1)b=o[l++],y=(M-M%s)/s,O=M<s?0:te[C-s],L===0?J=Q=0:(J=te[(L-1)*z+y*s+M%s],Q=y&&te[(L-1)*z+(y-1)*s+M%s]),D=O+J-Q,N=Math.abs(D-O),T=Math.abs(D-J),H=Math.abs(D-Q),B=N<=T&&N<=H?O:T<=H?J:Q,te[C++]=(b+B)%256;break;default:throw new Error("Invalid filter algorithm: "+o[l-1])}if(!R){var ne=((p+L*_)*c.width+h)*s,re=L*z;for(M=0;M<Ce;M+=1){for(var de=0;de<s;de+=1)a[ne++]=te[re++];ne+=(g-1)*s}}L++}}return o=$L(o),c.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),a},n.prototype.decodePalette=function(){var o,s,a,l,c,d,h,p,g;for(a=this.palette,d=this.transparency.indexed||[],c=new Uint8Array((d.length||0)+a.length),l=0,o=0,s=h=0,p=a.length;h<p;s=h+=3)c[l++]=a[s],c[l++]=a[s+1],c[l++]=a[s+2],c[l++]=(g=d[o++])!=null?g:255;return c},n.prototype.copyToImageData=function(o,s){var a,l,c,d,h,p,g,_,b,C,y;if(l=this.colors,b=null,a=this.hasAlphaChannel,this.palette.length&&(b=(y=this._decodedPalette)!=null?y:this._decodedPalette=this.decodePalette(),l=4,a=!0),_=(c=o.data||o).length,h=b||s,d=p=0,l===1)for(;d<_;)g=b?4*s[d/4]:p,C=h[g++],c[d++]=C,c[d++]=C,c[d++]=C,c[d++]=a?h[g++]:255,p=g;else for(;d<_;)g=b?4*s[d/4]:p,c[d++]=h[g++],c[d++]=h[g++],c[d++]=h[g++],c[d++]=a?h[g++]:255,p=g},n.prototype.decode=function(){var o;return o=new Uint8Array(this.width*this.height*4),this.copyToImageData(o,this.decodePixels()),o};var r=function(){if(Object.prototype.toString.call(Dt)==="[object Window]"){try{e=Dt.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return r(),i=function(o){var s;if(r()===!0)return t.width=o.width,t.height=o.height,t.clearRect(0,0,o.width,o.height),t.putImageData(o,0,0),(s=new Image).src=e.toDataURL(),s;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(o){var s,a,l,c,d,h,p,g;if(this.animation){for(g=[],a=d=0,h=(p=this.animation.frames).length;d<h;a=++d)s=p[a],l=o.createImageData(s.width,s.height),c=this.decodePixels(new Uint8Array(s.data)),this.copyToImageData(l,c),s.imageData=l,g.push(s.image=i(l));return g}},n.prototype.renderFrame=function(o,s){var a,l,c;return a=(l=this.animation.frames)[s],c=l[s-1],s===0&&o.clearRect(0,0,this.width,this.height),c?.disposeOp===1?o.clearRect(c.xOffset,c.yOffset,c.width,c.height):c?.disposeOp===2&&o.putImageData(c.imageData,c.xOffset,c.yOffset),a.blendOp===0&&o.clearRect(a.xOffset,a.yOffset,a.width,a.height),o.drawImage(a.image,a.xOffset,a.yOffset)},n.prototype.animate=function(o){var s,a,l,c,d,h,p=this;return a=0,h=this.animation,c=h.numFrames,l=h.frames,d=h.numPlays,(s=function(){var g,_;if(g=a++%c,_=l[g],p.renderFrame(o,g),c>1&&a/c<d)return p.animation._timeout=setTimeout(s,_.delay)})()},n.prototype.stopAnimation=function(){var o;return clearTimeout((o=this.animation)!=null?o._timeout:void 0)},n.prototype.render=function(o){var s,a;return o._png&&o._png.stopAnimation(),o._png=this,o.width=this.width,o.height=this.height,s=o.getContext("2d"),this.animation?(this.decodeFrames(s),this.animate(s)):(a=s.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),s.putImageData(a,0,0))},n}();function xoe(i){var e=0;if(i[e++]!==71||i[e++]!==73||i[e++]!==70||i[e++]!==56||(i[e++]+1&253)!=56||i[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=i[e++]|i[e++]<<8,n=i[e++]|i[e++]<<8,r=i[e++],o=r>>7,s=1<<(7&r)+1;i[e++],i[e++];var a=null,l=null;o&&(a=e,l=s,e+=3*s);var c=!0,d=[],h=0,p=null,g=0,_=null;for(this.width=t,this.height=n;c&&e<i.length;)switch(i[e++]){case 33:switch(i[e++]){case 255:if(i[e]!==11||i[e+1]==78&&i[e+2]==69&&i[e+3]==84&&i[e+4]==83&&i[e+5]==67&&i[e+6]==65&&i[e+7]==80&&i[e+8]==69&&i[e+9]==50&&i[e+10]==46&&i[e+11]==48&&i[e+12]==3&&i[e+13]==1&&i[e+16]==0)e+=14,_=i[e++]|i[e++]<<8,e++;else for(e+=12;;){if(!((L=i[e++])>=0))throw Error("Invalid block size");if(L===0)break;e+=L}break;case 249:if(i[e++]!==4||i[e+4]!==0)throw new Error("Invalid graphics extension block.");var b=i[e++];h=i[e++]|i[e++]<<8,p=i[e++],(1&b)==0&&(p=null),g=b>>2&7,e++;break;case 254:for(;;){if(!((L=i[e++])>=0))throw Error("Invalid block size");if(L===0)break;e+=L}break;default:throw new Error("Unknown graphic control label: 0x"+i[e-1].toString(16))}break;case 44:var C=i[e++]|i[e++]<<8,y=i[e++]|i[e++]<<8,M=i[e++]|i[e++]<<8,O=i[e++]|i[e++]<<8,A=i[e++],D=A>>6&1,N=1<<(7&A)+1,B=a,T=l,H=!1;A>>7&&(H=!0,B=e,T=N,e+=3*N);var te=e;for(e++;;){var L;if(!((L=i[e++])>=0))throw Error("Invalid block size");if(L===0)break;e+=L}d.push({x:C,y,width:M,height:O,has_local_palette:H,palette_offset:B,palette_size:T,data_offset:te,data_length:e-te,transparent_index:p,interlaced:!!D,delay:h,disposal:g});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+i[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return _},this.frameInfo=function(z){if(z<0||z>=d.length)throw new Error("Frame index out of range.");return d[z]},this.decodeAndBlitFrameBGRA=function(z,J){var Q=this.frameInfo(z),ce=Q.width*Q.height,X=new Uint8Array(ce);sR(i,Q.data_offset,X,ce);var ie=Q.palette_offset,oe=Q.transparent_index;oe===null&&(oe=256);var le=Q.width,Ce=t-le,Ne=le,R=4*(Q.y*t+Q.x),ne=4*((Q.y+Q.height)*t+Q.x),re=R,de=4*Ce;Q.interlaced===!0&&(de+=4*t*7);for(var fe=8,me=0,Pe=X.length;me<Pe;++me){var Me=X[me];if(Ne===0&&(Ne=le,(re+=de)>=ne&&(de=4*Ce+4*t*(fe-1),re=R+(le+Ce)*(fe<<1),fe>>=1)),Me===oe)re+=4;else{var Ue=i[ie+3*Me],He=i[ie+3*Me+1],Xe=i[ie+3*Me+2];J[re++]=Xe,J[re++]=He,J[re++]=Ue,J[re++]=255}--Ne}},this.decodeAndBlitFrameRGBA=function(z,J){var Q=this.frameInfo(z),ce=Q.width*Q.height,X=new Uint8Array(ce);sR(i,Q.data_offset,X,ce);var ie=Q.palette_offset,oe=Q.transparent_index;oe===null&&(oe=256);var le=Q.width,Ce=t-le,Ne=le,R=4*(Q.y*t+Q.x),ne=4*((Q.y+Q.height)*t+Q.x),re=R,de=4*Ce;Q.interlaced===!0&&(de+=4*t*7);for(var fe=8,me=0,Pe=X.length;me<Pe;++me){var Me=X[me];if(Ne===0&&(Ne=le,(re+=de)>=ne&&(de=4*Ce+4*t*(fe-1),re=R+(le+Ce)*(fe<<1),fe>>=1)),Me===oe)re+=4;else{var Ue=i[ie+3*Me],He=i[ie+3*Me+1],Xe=i[ie+3*Me+2];J[re++]=Ue,J[re++]=He,J[re++]=Xe,J[re++]=255}--Ne}}}function sR(i,e,t,n){for(var r=i[e++],o=1<<r,s=o+1,a=s+1,l=r+1,c=(1<<l)-1,d=0,h=0,p=0,g=i[e++],_=new Int32Array(4096),b=null;;){for(;d<16&&g!==0;)h|=i[e++]<<d,d+=8,g===1?g=i[e++]:--g;if(d<l)break;var C=h&c;if(h>>=l,d-=l,C!==o){if(C===s)break;for(var y=C<a?C:b,M=0,O=y;O>o;)O=_[O]>>8,++M;var A=O;if(p+M+(y!==C?1:0)>n)return void ti.log("Warning, gif stream longer than expected.");t[p++]=A;var D=p+=M;for(y!==C&&(t[p++]=A),O=y;M--;)O=_[O],t[--D]=255&O,O>>=8;b!==null&&a<4096&&(_[a++]=b<<8|A,a>=c+1&&l<12&&(++l,c=c<<1|1)),b=C}else a=s+1,c=(1<<(l=r+1))-1,b=null}return p!==n&&ti.log("Warning, gif stream shorter than expected."),t}function W3(i){var e,t,n,r,o,s=Math.floor,a=new Array(64),l=new Array(64),c=new Array(64),d=new Array(64),h=new Array(65535),p=new Array(65535),g=new Array(64),_=new Array(64),b=[],C=0,y=7,M=new Array(64),O=new Array(64),A=new Array(64),D=new Array(256),N=new Array(2048),B=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],T=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],H=[0,1,2,3,4,5,6,7,8,9,10,11],te=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],L=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],z=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],J=[0,1,2,3,4,5,6,7,8,9,10,11],Q=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ce=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function X(R,ne){for(var re=0,de=0,fe=new Array,me=1;me<=16;me++){for(var Pe=1;Pe<=R[me];Pe++)fe[ne[de]]=[],fe[ne[de]][0]=re,fe[ne[de]][1]=me,de++,re++;re*=2}return fe}function ie(R){for(var ne=R[0],re=R[1]-1;re>=0;)ne&1<<re&&(C|=1<<y),re--,--y<0&&(C==255?(oe(255),oe(0)):oe(C),y=7,C=0)}function oe(R){b.push(R)}function le(R){oe(R>>8&255),oe(255&R)}function Ce(R,ne,re,de,fe){for(var me,Pe=fe[0],Me=fe[240],Ue=function(We,Qe){var it,nt,Et,Nt,Kt,nn,Cn,Hn,Ft,sn,rt=0;for(Ft=0;Ft<8;++Ft){it=We[rt],nt=We[rt+1],Et=We[rt+2],Nt=We[rt+3],Kt=We[rt+4],nn=We[rt+5],Cn=We[rt+6];var Nr=it+(Hn=We[rt+7]),En=it-Hn,Ws=nt+Cn,Qn=nt-Cn,mi=Et+nn,Ra=Et-nn,Tn=Nt+Kt,nu=Nt-Kt,Oi=Nr+Tn,qs=Nr-Tn,Bl=Ws+mi,Si=Ws-mi;We[rt]=Oi+Bl,We[rt+4]=Oi-Bl;var Lt=.707106781*(Si+qs);We[rt+2]=qs+Lt,We[rt+6]=qs-Lt;var Bn=.382683433*((Oi=nu+Ra)-(Si=Qn+En)),iu=.5411961*Oi+Bn,Sr=1.306562965*Si+Bn,za=.707106781*(Bl=Ra+Qn),ja=En+za,kt=En-za;We[rt+5]=kt+iu,We[rt+3]=kt-iu,We[rt+1]=ja+Sr,We[rt+7]=ja-Sr,rt+=8}for(rt=0,Ft=0;Ft<8;++Ft){it=We[rt],nt=We[rt+8],Et=We[rt+16],Nt=We[rt+24],Kt=We[rt+32],nn=We[rt+40],Cn=We[rt+48];var Ks=it+(Hn=We[rt+56]),Va=it-Hn,mo=nt+Cn,dr=nt-Cn,Xi=Et+nn,Yo=Et-nn,q0=Nt+Kt,Nl=Nt-Kt,Ys=Ks+q0,Xs=Ks-q0,Qs=mo+Xi,Ua=mo-Xi;We[rt]=Ys+Qs,We[rt+32]=Ys-Qs;var bs=.707106781*(Ua+Xs);We[rt+16]=Xs+bs,We[rt+48]=Xs-bs;var Ha=.382683433*((Ys=Nl+Yo)-(Ua=dr+Va)),ru=.5411961*Ys+Ha,K0=1.306562965*Ua+Ha,Y0=.707106781*(Qs=Yo+dr),X0=Va+Y0,Q0=Va-Y0;We[rt+40]=Q0+ru,We[rt+24]=Q0-ru,We[rt+8]=X0+K0,We[rt+56]=X0-K0,rt++}for(Ft=0;Ft<64;++Ft)sn=We[Ft]*Qe[Ft],g[Ft]=sn>0?sn+.5|0:sn-.5|0;return g}(R,ne),He=0;He<64;++He)_[B[He]]=Ue[He];var Xe=_[0]-re;re=_[0],Xe==0?ie(de[0]):(ie(de[p[me=32767+Xe]]),ie(h[me]));for(var Ye=63;Ye>0&&_[Ye]==0;)Ye--;if(Ye==0)return ie(Pe),re;for(var wt,Te=1;Te<=Ye;){for(var ue=Te;_[Te]==0&&Te<=Ye;)++Te;var Ot=Te-ue;if(Ot>=16){wt=Ot>>4;for(var Ct=1;Ct<=wt;++Ct)ie(Me);Ot&=15}me=32767+_[Te],ie(fe[(Ot<<4)+p[me]]),ie(h[me]),Te++}return Ye!=63&&ie(Pe),re}function Ne(R){R=Math.min(Math.max(R,1),100),o!=R&&(function(ne){for(var re=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],de=0;de<64;de++){var fe=s((re[de]*ne+50)/100);fe=Math.min(Math.max(fe,1),255),a[B[de]]=fe}for(var me=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Pe=0;Pe<64;Pe++){var Me=s((me[Pe]*ne+50)/100);Me=Math.min(Math.max(Me,1),255),l[B[Pe]]=Me}for(var Ue=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],He=0,Xe=0;Xe<8;Xe++)for(var Ye=0;Ye<8;Ye++)c[He]=1/(a[B[He]]*Ue[Xe]*Ue[Ye]*8),d[He]=1/(l[B[He]]*Ue[Xe]*Ue[Ye]*8),He++}(R<50?Math.floor(5e3/R):Math.floor(200-2*R)),o=R)}this.encode=function(R,ne){ne&&Ne(ne),b=new Array,C=0,y=7,le(65496),le(65504),le(16),oe(74),oe(70),oe(73),oe(70),oe(0),oe(1),oe(1),oe(0),le(1),le(1),oe(0),oe(0),function(){le(65499),le(132),oe(0);for(var nt=0;nt<64;nt++)oe(a[nt]);oe(1);for(var Et=0;Et<64;Et++)oe(l[Et])}(),function(nt,Et){le(65472),le(17),oe(8),le(Et),le(nt),oe(3),oe(1),oe(17),oe(0),oe(2),oe(17),oe(1),oe(3),oe(17),oe(1)}(R.width,R.height),function(){le(65476),le(418),oe(0);for(var nt=0;nt<16;nt++)oe(T[nt+1]);for(var Et=0;Et<=11;Et++)oe(H[Et]);oe(16);for(var Nt=0;Nt<16;Nt++)oe(te[Nt+1]);for(var Kt=0;Kt<=161;Kt++)oe(L[Kt]);oe(1);for(var nn=0;nn<16;nn++)oe(z[nn+1]);for(var Cn=0;Cn<=11;Cn++)oe(J[Cn]);oe(17);for(var Hn=0;Hn<16;Hn++)oe(Q[Hn+1]);for(var Ft=0;Ft<=161;Ft++)oe(ce[Ft])}(),le(65498),le(12),oe(3),oe(1),oe(0),oe(2),oe(17),oe(3),oe(17),oe(0),oe(63),oe(0);var re=0,de=0,fe=0;C=0,y=7,this.encode.displayName="_encode_";for(var me,Pe,Me,Ue,He,Xe,Ye,wt,Te,ue=R.data,Ot=R.width,Ct=R.height,We=4*Ot,Qe=0;Qe<Ct;){for(me=0;me<We;){for(He=We*Qe+me,Ye=-1,wt=0,Te=0;Te<64;Te++)Xe=He+(wt=Te>>3)*We+(Ye=4*(7&Te)),Qe+wt>=Ct&&(Xe-=We*(Qe+1+wt-Ct)),me+Ye>=We&&(Xe-=me+Ye-We+4),Pe=ue[Xe++],Me=ue[Xe++],Ue=ue[Xe++],M[Te]=(N[Pe]+N[Me+256>>0]+N[Ue+512>>0]>>16)-128,O[Te]=(N[Pe+768>>0]+N[Me+1024>>0]+N[Ue+1280>>0]>>16)-128,A[Te]=(N[Pe+1280>>0]+N[Me+1536>>0]+N[Ue+1792>>0]>>16)-128;re=Ce(M,c,re,e,n),de=Ce(O,d,de,t,r),fe=Ce(A,d,fe,t,r),me+=32}Qe+=8}if(y>=0){var it=[];it[1]=y+1,it[0]=(1<<y+1)-1,ie(it)}return le(65497),new Uint8Array(b)},i=i||50,function(){for(var R=String.fromCharCode,ne=0;ne<256;ne++)D[ne]=R(ne)}(),e=X(T,H),t=X(z,J),n=X(te,L),r=X(Q,ce),function(){for(var R=1,ne=2,re=1;re<=15;re++){for(var de=R;de<ne;de++)p[32767+de]=re,h[32767+de]=[],h[32767+de][1]=re,h[32767+de][0]=de;for(var fe=-(ne-1);fe<=-R;fe++)p[32767+fe]=re,h[32767+fe]=[],h[32767+fe][1]=re,h[32767+fe][0]=ne-1+fe;R<<=1,ne<<=1}}(),function(){for(var R=0;R<256;R++)N[R]=19595*R,N[R+256>>0]=38470*R,N[R+512>>0]=7471*R+32768,N[R+768>>0]=-11059*R,N[R+1024>>0]=-21709*R,N[R+1280>>0]=32768*R+8421375,N[R+1536>>0]=-27439*R,N[R+1792>>0]=-5329*R}(),Ne(i)}function Aa(i,e){if(this.pos=0,this.buffer=i,this.datav=new DataView(i.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function aR(i){function e(T){if(!T)throw Error("assert :P")}function t(T,H,te){for(var L=0;4>L;L++)if(T[H+L]!=te.charCodeAt(L))return!0;return!1}function n(T,H,te,L,z){for(var J=0;J<z;J++)T[H+J]=te[L+J]}function r(T,H,te,L){for(var z=0;z<L;z++)T[H+z]=te}function o(T){return new Int32Array(T)}function s(T,H){for(var te=[],L=0;L<T;L++)te.push(new H);return te}function a(T,H){var te=[];return function L(z,J,Q){for(var ce=Q[J],X=0;X<ce&&(z.push(Q.length>J+1?[]:new H),!(Q.length<J+1));X++)L(z[X],J+1,Q)}(te,0,T),te}var l=function(){var T=this;function H(v,w){for(var P=1<<w-1>>>0;v&P;)P>>>=1;return P?(v&P-1)+P:v}function te(v,w,P,I,j){e(!(I%P));do v[w+(I-=P)]=j;while(0<I)}function L(v,w,P,I,j){if(e(2328>=j),512>=j)var G=o(512);else if((G=o(j))==null)return 0;return function($,q,Z,se,_e,Oe){var Se,we,ze=q,Fe=1<<Z,be=o(16),ye=o(16);for(e(_e!=0),e(se!=null),e($!=null),e(0<Z),we=0;we<_e;++we){if(15<se[we])return 0;++be[se[we]]}if(be[0]==_e)return 0;for(ye[1]=0,Se=1;15>Se;++Se){if(be[Se]>1<<Se)return 0;ye[Se+1]=ye[Se]+be[Se]}for(we=0;we<_e;++we)Se=se[we],0<se[we]&&(Oe[ye[Se]++]=we);if(ye[15]==1)return(se=new z).g=0,se.value=Oe[0],te($,ze,1,Fe,se),Fe;var Le,Ve=-1,Re=Fe-1,ut=0,Je=1,St=1,et=1<<Z;for(we=0,Se=1,_e=2;Se<=Z;++Se,_e<<=1){if(Je+=St<<=1,0>(St-=be[Se]))return 0;for(;0<be[Se];--be[Se])(se=new z).g=Se,se.value=Oe[we++],te($,ze+ut,_e,et,se),ut=H(ut,Se)}for(Se=Z+1,_e=2;15>=Se;++Se,_e<<=1){if(Je+=St<<=1,0>(St-=be[Se]))return 0;for(;0<be[Se];--be[Se]){if(se=new z,(ut&Re)!=Ve){for(ze+=et,Le=1<<(Ve=Se)-Z;15>Ve&&!(0>=(Le-=be[Ve]));)++Ve,Le<<=1;Fe+=et=1<<(Le=Ve-Z),$[q+(Ve=ut&Re)].g=Le+Z,$[q+Ve].value=ze-q-Ve}se.g=Se-Z,se.value=Oe[we++],te($,ze+(ut>>Z),_e,et,se),ut=H(ut,Se)}}return Je!=2*ye[15]-1?0:Fe}(v,w,P,I,j,G)}function z(){this.value=this.g=0}function J(){this.value=this.g=0}function Q(){this.G=s(5,z),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s(kr,J)}function ce(v,w,P,I){e(v!=null),e(w!=null),e(2147483648>I),v.Ca=254,v.I=0,v.b=-8,v.Ka=0,v.oa=w,v.pa=P,v.Jd=w,v.Yc=P+I,v.Zc=4<=I?P+I-4+1:P,me(v)}function X(v,w){for(var P=0;0<w--;)P|=Me(v,128)<<w;return P}function ie(v,w){var P=X(v,w);return Pe(v)?-P:P}function oe(v,w,P,I){var j,G=0;for(e(v!=null),e(w!=null),e(4294967288>I),v.Sb=I,v.Ra=0,v.u=0,v.h=0,4<I&&(I=4),j=0;j<I;++j)G+=w[P+j]<<8*j;v.Ra=G,v.bb=I,v.oa=w,v.pa=P}function le(v){for(;8<=v.u&&v.bb<v.Sb;)v.Ra>>>=8,v.Ra+=v.oa[v.pa+v.bb]<<hh-8>>>0,++v.bb,v.u-=8;re(v)&&(v.h=1,v.u=0)}function Ce(v,w){if(e(0<=w),!v.h&&w<=uh){var P=ne(v)&dh[w];return v.u+=w,le(v),P}return v.h=1,v.u=0}function Ne(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function R(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function ne(v){return v.Ra>>>(v.u&hh-1)>>>0}function re(v){return e(v.bb<=v.Sb),v.h||v.bb==v.Sb&&v.u>hh}function de(v,w){v.u=w,v.h=re(v)}function fe(v){v.u>=Qg&&(e(v.u>=Qg),le(v))}function me(v){e(v!=null&&v.oa!=null),v.pa<v.Zc?(v.I=(v.oa[v.pa++]|v.I<<8)>>>0,v.b+=8):(e(v!=null&&v.oa!=null),v.pa<v.Yc?(v.b+=8,v.I=v.oa[v.pa++]|v.I<<8):v.Ka?v.b=0:(v.I<<=8,v.b+=8,v.Ka=1))}function Pe(v){return X(v,1)}function Me(v,w){var P=v.Ca;0>v.b&&me(v);var I=v.b,j=P*w>>>8,G=(v.I>>>I>j)+0;for(G?(P-=j,v.I-=j+1<<I>>>0):P=j+1,I=P,j=0;256<=I;)j+=8,I>>=8;return I=7^j+_o[I],v.b-=I,v.Ca=(P<<I)-1,G}function Ue(v,w,P){v[w+0]=P>>24&255,v[w+1]=P>>16&255,v[w+2]=P>>8&255,v[w+3]=P>>0&255}function He(v,w){return v[w+0]<<0|v[w+1]<<8}function Xe(v,w){return He(v,w)|v[w+2]<<16}function Ye(v,w){return He(v,w)|He(v,w+2)<<16}function wt(v,w){var P=1<<w;return e(v!=null),e(0<w),v.X=o(P),v.X==null?0:(v.Mb=32-w,v.Xa=w,1)}function Te(v,w){e(v!=null),e(w!=null),e(v.Xa==w.Xa),n(w.X,0,v.X,0,1<<w.Xa)}function ue(){this.X=[],this.Xa=this.Mb=0}function Ot(v,w,P,I){e(P!=null),e(I!=null);var j=P[0],G=I[0];return j==0&&(j=(v*G+w/2)/w),G==0&&(G=(w*j+v/2)/v),0>=j||0>=G?0:(P[0]=j,I[0]=G,1)}function Ct(v,w){return v+(1<<w)-1>>>w}function We(v,w){return((4278255360&v)+(4278255360&w)>>>0&4278255360)+((16711935&v)+(16711935&w)>>>0&16711935)>>>0}function Qe(v,w){T[w]=function(P,I,j,G,$,q,Z){var se;for(se=0;se<$;++se){var _e=T[v](q[Z+se-1],j,G+se);q[Z+se]=We(P[I+se],_e)}}}function it(){this.ud=this.hd=this.jd=0}function nt(v,w){return((4278124286&(v^w))>>>1)+(v&w)>>>0}function Et(v){return 0<=v&&256>v?v:0>v?0:255<v?255:void 0}function Nt(v,w){return Et(v+(v-w+.5>>1))}function Kt(v,w,P){return Math.abs(w-P)-Math.abs(v-P)}function nn(v,w,P,I,j,G,$){for(I=G[$-1],P=0;P<j;++P)G[$+P]=I=We(v[w+P],I)}function Cn(v,w,P,I,j){var G;for(G=0;G<P;++G){var $=v[w+G],q=$>>8&255,Z=16711935&(Z=(Z=16711935&$)+((q<<16)+q));I[j+G]=(4278255360&$)+Z>>>0}}function Hn(v,w){w.jd=v>>0&255,w.hd=v>>8&255,w.ud=v>>16&255}function Ft(v,w,P,I,j,G){var $;for($=0;$<I;++$){var q=w[P+$],Z=q>>>8,se=q,_e=255&(_e=(_e=q>>>16)+((v.jd<<24>>24)*(Z<<24>>24)>>>5));se=255&(se=(se=se+((v.hd<<24>>24)*(Z<<24>>24)>>>5))+((v.ud<<24>>24)*(_e<<24>>24)>>>5)),j[G+$]=(4278255360&q)+(_e<<16)+se}}function sn(v,w,P,I,j){T[w]=function(G,$,q,Z,se,_e,Oe,Se,we){for(Z=Oe;Z<Se;++Z)for(Oe=0;Oe<we;++Oe)se[_e++]=j(q[I(G[$++])])},T[v]=function(G,$,q,Z,se,_e,Oe){var Se=8>>G.b,we=G.Ea,ze=G.K[0],Fe=G.w;if(8>Se)for(G=(1<<G.b)-1,Fe=(1<<Se)-1;$<q;++$){var be,ye=0;for(be=0;be<we;++be)be&G||(ye=I(Z[se++])),_e[Oe++]=j(ze[ye&Fe]),ye>>=Se}else T["VP8LMapColor"+P](Z,se,ze,Fe,_e,Oe,$,q,we)}}function rt(v,w,P,I,j){for(P=w+P;w<P;){var G=v[w++];I[j++]=G>>16&255,I[j++]=G>>8&255,I[j++]=G>>0&255}}function Nr(v,w,P,I,j){for(P=w+P;w<P;){var G=v[w++];I[j++]=G>>16&255,I[j++]=G>>8&255,I[j++]=G>>0&255,I[j++]=G>>24&255}}function En(v,w,P,I,j){for(P=w+P;w<P;){var G=($=v[w++])>>16&240|$>>12&15,$=$>>0&240|$>>28&15;I[j++]=G,I[j++]=$}}function Ws(v,w,P,I,j){for(P=w+P;w<P;){var G=($=v[w++])>>16&248|$>>13&7,$=$>>5&224|$>>3&31;I[j++]=G,I[j++]=$}}function Qn(v,w,P,I,j){for(P=w+P;w<P;){var G=v[w++];I[j++]=G>>0&255,I[j++]=G>>8&255,I[j++]=G>>16&255}}function mi(v,w,P,I,j,G){if(G==0)for(P=w+P;w<P;)Ue(I,((G=v[w++])[0]>>24|G[1]>>8&65280|G[2]<<8&16711680|G[3]<<24)>>>0),j+=32;else n(I,j,v,w,P)}function Ra(v,w){T[w][0]=T[v+"0"],T[w][1]=T[v+"1"],T[w][2]=T[v+"2"],T[w][3]=T[v+"3"],T[w][4]=T[v+"4"],T[w][5]=T[v+"5"],T[w][6]=T[v+"6"],T[w][7]=T[v+"7"],T[w][8]=T[v+"8"],T[w][9]=T[v+"9"],T[w][10]=T[v+"10"],T[w][11]=T[v+"11"],T[w][12]=T[v+"12"],T[w][13]=T[v+"13"],T[w][14]=T[v+"0"],T[w][15]=T[v+"0"]}function Tn(v){return v==$w||v==Ww||v==$1||v==qw}function nu(){this.eb=[],this.size=this.A=this.fb=0}function Oi(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function qs(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new nu,this.f.kb=new Oi,this.sd=null}function Bl(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Si(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Lt(v){return alert("todo:WebPSamplerProcessPlane"),v.T}function Bn(v,w){var P=v.T,I=w.ba.f.RGBA,j=I.eb,G=I.fb+v.ka*I.A,$=Ps[w.ba.S],q=v.y,Z=v.O,se=v.f,_e=v.N,Oe=v.ea,Se=v.W,we=w.cc,ze=w.dc,Fe=w.Mc,be=w.Nc,ye=v.ka,Le=v.ka+v.T,Ve=v.U,Re=Ve+1>>1;for(ye==0?$(q,Z,null,null,se,_e,Oe,Se,se,_e,Oe,Se,j,G,null,null,Ve):($(w.ec,w.fc,q,Z,we,ze,Fe,be,se,_e,Oe,Se,j,G-I.A,j,G,Ve),++P);ye+2<Le;ye+=2)we=se,ze=_e,Fe=Oe,be=Se,_e+=v.Rc,Se+=v.Rc,G+=2*I.A,$(q,(Z+=2*v.fa)-v.fa,q,Z,we,ze,Fe,be,se,_e,Oe,Se,j,G-I.A,j,G,Ve);return Z+=v.fa,v.j+Le<v.o?(n(w.ec,w.fc,q,Z,Ve),n(w.cc,w.dc,se,_e,Re),n(w.Mc,w.Nc,Oe,Se,Re),P--):1&Le||$(q,Z,null,null,se,_e,Oe,Se,se,_e,Oe,Se,j,G+I.A,null,null,Ve),P}function iu(v,w,P){var I=v.F,j=[v.J];if(I!=null){var G=v.U,$=w.ba.S,q=$==G1||$==$1;w=w.ba.f.RGBA;var Z=[0],se=v.ka;Z[0]=v.T,v.Kb&&(se==0?--Z[0]:(--se,j[0]-=v.width),v.j+v.ka+v.T==v.o&&(Z[0]=v.o-v.j-se));var _e=w.eb;se=w.fb+se*w.A,v=ri(I,j[0],v.width,G,Z,_e,se+(q?0:3),w.A),e(P==Z),v&&Tn($)&&Ms(_e,se,q,G,Z,w.A)}return 0}function Sr(v){var w=v.ma,P=w.ba.S,I=11>P,j=P==U1||P==H1||P==G1||P==Gw||P==12||Tn(P);if(w.memory=null,w.Ib=null,w.Jb=null,w.Nd=null,!Yg(w.Oa,v,j?11:12))return 0;if(j&&Tn(P)&&qe(),v.da)alert("todo:use_scaling");else{if(I){if(w.Ib=Lt,v.Kb){if(P=v.U+1>>1,w.memory=o(v.U+2*P),w.memory==null)return 0;w.ec=w.memory,w.fc=0,w.cc=w.ec,w.dc=w.fc+v.U,w.Mc=w.cc,w.Nc=w.dc+P,w.Ib=Bn,qe()}}else alert("todo:EmitYUV");j&&(w.Jb=iu,I&&Ee())}if(I&&!x4){for(v=0;256>v;++v)qH[v]=89858*(v-128)+q1>>W1,XH[v]=-22014*(v-128)+q1,YH[v]=-45773*(v-128),KH[v]=113618*(v-128)+q1>>W1;for(v=rp;v<Xw;++v)w=76283*(v-16)+q1>>W1,QH[v-rp]=Xo(w,255),JH[v-rp]=Xo(w+8>>4,15);x4=1}return 1}function za(v){var w=v.ma,P=v.U,I=v.T;return e(!(1&v.ka)),0>=P||0>=I?0:(P=w.Ib(v,w),w.Jb!=null&&w.Jb(v,w,P),w.Dc+=P,1)}function ja(v){v.ma.memory=null}function kt(v,w,P,I){return Ce(v,8)!=47?0:(w[0]=Ce(v,14)+1,P[0]=Ce(v,14)+1,I[0]=Ce(v,1),Ce(v,3)!=0?0:!v.h)}function Ks(v,w){if(4>v)return v+1;var P=v-2>>1;return(2+(1&v)<<P)+Ce(w,P)+1}function Va(v,w){return 120<w?w-120:1<=(P=((P=IH[w-1])>>4)*v+(8-(15&P)))?P:1;var P}function mo(v,w,P){var I=ne(P),j=v[w+=255&I].g-8;return 0<j&&(de(P,P.u+8),I=ne(P),w+=v[w].value,w+=I&(1<<j)-1),de(P,P.u+v[w].g),v[w].value}function dr(v,w,P){return P.g+=v.g,P.value+=v.value<<w>>>0,e(8>=P.g),v.g}function Xi(v,w,P){var I=v.xc;return e((w=I==0?0:v.vc[v.md*(P>>I)+(w>>I)])<v.Wb),v.Ya[w]}function Yo(v,w,P,I){var j=v.ab,G=v.c*w,$=v.C;w=$+w;var q=P,Z=I;for(I=v.Ta,P=v.Ua;0<j--;){var se=v.gc[j],_e=$,Oe=w,Se=q,we=Z,ze=(Z=I,q=P,se.Ea);switch(e(_e<Oe),e(Oe<=se.nc),se.hc){case 2:B1(Se,we,(Oe-_e)*ze,Z,q);break;case 0:var Fe=_e,be=Oe,ye=Z,Le=q,Ve=(et=se).Ea;Fe==0&&(Uw(Se,we,null,null,1,ye,Le),nn(Se,we+1,0,0,Ve-1,ye,Le+1),we+=Ve,Le+=Ve,++Fe);for(var Re=1<<et.b,ut=Re-1,Je=Ct(Ve,et.b),St=et.K,et=et.w+(Fe>>et.b)*Je;Fe<be;){var An=St,zn=et,yn=1;for(Jg(Se,we,ye,Le-Ve,1,ye,Le);yn<Ve;){var cn=(yn&~ut)+Re;cn>Ve&&(cn=Ve),(0,Uc[An[zn++]>>8&15])(Se,we+ +yn,ye,Le+yn-Ve,cn-yn,ye,Le+yn),yn=cn}we+=Ve,Le+=Ve,++Fe&ut||(et+=Je)}Oe!=se.nc&&n(Z,q-ze,Z,q+(Oe-_e-1)*ze,ze);break;case 1:for(ze=Se,be=we,Ve=(Se=se.Ea)-(Le=Se&~(ye=(we=1<<se.b)-1)),Fe=Ct(Se,se.b),Re=se.K,se=se.w+(_e>>se.b)*Fe;_e<Oe;){for(ut=Re,Je=se,St=new it,et=be+Le,An=be+Se;be<et;)Hn(ut[Je++],St),cu(St,ze,be,we,Z,q),be+=we,q+=we;be<An&&(Hn(ut[Je++],St),cu(St,ze,be,Ve,Z,q),be+=Ve,q+=Ve),++_e&ye||(se+=Fe)}break;case 3:if(Se==Z&&we==q&&0<se.b){for(be=Z,Se=ze=q+(Oe-_e)*ze-(Le=(Oe-_e)*Ct(se.Ea,se.b)),we=Z,ye=q,Fe=[],Le=(Ve=Le)-1;0<=Le;--Le)Fe[Le]=we[ye+Le];for(Le=Ve-1;0<=Le;--Le)be[Se+Le]=Fe[Le];Cs(se,_e,Oe,Z,ze,Z,q)}else Cs(se,_e,Oe,Se,we,Z,q)}q=I,Z=P}Z!=P&&n(I,P,q,Z,G)}function q0(v,w){var P=v.V,I=v.Ba+v.c*v.C,j=w-v.C;if(e(w<=v.l.o),e(16>=j),0<j){var G=v.l,$=v.Ta,q=v.Ua,Z=G.width;if(Yo(v,j,P,I),j=q=[q],e((P=v.C)<(I=w)),e(G.v<G.va),I>G.o&&(I=G.o),P<G.j){var se=G.j-P;P=G.j,j[0]+=se*Z}if(P>=I?P=0:(j[0]+=4*G.v,G.ka=P-G.j,G.U=G.va-G.v,G.T=I-P,P=1),P){if(q=q[0],11>(P=v.ca).S){var _e=P.f.RGBA,Oe=(I=P.S,j=G.U,G=G.T,se=_e.eb,_e.A),Se=G;for(_e=_e.fb+v.Ma*_e.A;0<Se--;){var we=$,ze=q,Fe=j,be=se,ye=_e;switch(I){case V1:vo(we,ze,Fe,be,ye);break;case U1:to(we,ze,Fe,be,ye);break;case $w:to(we,ze,Fe,be,ye),Ms(be,ye,0,Fe,1,0);break;case a4:jl(we,ze,Fe,be,ye);break;case H1:mi(we,ze,Fe,be,ye,1);break;case Ww:mi(we,ze,Fe,be,ye,1),Ms(be,ye,0,Fe,1,0);break;case G1:mi(we,ze,Fe,be,ye,0);break;case $1:mi(we,ze,Fe,be,ye,0),Ms(be,ye,1,Fe,1,0);break;case Gw:Hc(we,ze,Fe,be,ye);break;case qw:Hc(we,ze,Fe,be,ye),ii(be,ye,Fe,1,0);break;case l4:zl(we,ze,Fe,be,ye);break;default:e(0)}q+=Z,_e+=Oe}v.Ma+=G}else alert("todo:EmitRescaledRowsYUVA");e(v.Ma<=P.height)}}v.C=w,e(v.C<=v.i)}function Nl(v){var w;if(0<v.ua)return 0;for(w=0;w<v.Wb;++w){var P=v.Ya[w].G,I=v.Ya[w].H;if(0<P[1][I[1]+0].g||0<P[2][I[2]+0].g||0<P[3][I[3]+0].g)return 0}return 1}function Ys(v,w,P,I,j,G){if(v.Z!=0){var $=v.qd,q=v.rd;for(e(qc[v.Z]!=null);w<P;++w)qc[v.Z]($,q,I,j,I,j,G),$=I,q=j,j+=G;v.qd=$,v.rd=q}}function Xs(v,w){var P=v.l.ma,I=P.Z==0||P.Z==1?v.l.j:v.C;if(I=v.C<I?I:v.C,e(w<=v.l.o),w>I){var j=v.l.width,G=P.ca,$=P.tb+j*I,q=v.V,Z=v.Ba+v.c*I,se=v.gc;e(v.ab==1),e(se[0].hc==3),N1(se[0],I,w,q,Z,G,$),Ys(P,I,w,G,$,j)}v.C=v.Ma=w}function Qs(v,w,P,I,j,G,$){var q=v.$/I,Z=v.$%I,se=v.m,_e=v.s,Oe=P+v.$,Se=Oe;j=P+I*j;var we=P+I*G,ze=280+_e.ua,Fe=v.Pb?q:16777216,be=0<_e.ua?_e.Wa:null,ye=_e.wc,Le=Oe<we?Xi(_e,Z,q):null;e(v.C<G),e(we<=j);var Ve=!1;e:for(;;){for(;Ve||Oe<we;){var Re=0;if(q>=Fe){var ut=Oe-P;e((Fe=v).Pb),Fe.wd=Fe.m,Fe.xd=ut,0<Fe.s.ua&&Te(Fe.s.Wa,Fe.s.vb),Fe=q+BH}if(Z&ye||(Le=Xi(_e,Z,q)),e(Le!=null),Le.Qb&&(w[Oe]=Le.qb,Ve=!0),!Ve)if(fe(se),Le.jc){Re=se,ut=w;var Je=Oe,St=Le.pd[ne(Re)&kr-1];e(Le.jc),256>St.g?(de(Re,Re.u+St.g),ut[Je]=St.value,Re=0):(de(Re,Re.u+St.g-256),e(256<=St.value),Re=St.value),Re==0&&(Ve=!0)}else Re=mo(Le.G[0],Le.H[0],se);if(se.h)break;if(Ve||256>Re){if(!Ve)if(Le.nd)w[Oe]=(Le.qb|Re<<8)>>>0;else{if(fe(se),Ve=mo(Le.G[1],Le.H[1],se),fe(se),ut=mo(Le.G[2],Le.H[2],se),Je=mo(Le.G[3],Le.H[3],se),se.h)break;w[Oe]=(Je<<24|Ve<<16|Re<<8|ut)>>>0}if(Ve=!1,++Oe,++Z>=I&&(Z=0,++q,$!=null&&q<=G&&!(q%16)&&$(v,q),be!=null))for(;Se<Oe;)Re=w[Se++],be.X[(506832829*Re&4294967295)>>>be.Mb]=Re}else if(280>Re){if(Re=Ks(Re-256,se),ut=mo(Le.G[4],Le.H[4],se),fe(se),ut=Va(I,ut=Ks(ut,se)),se.h)break;if(Oe-P<ut||j-Oe<Re)break e;for(Je=0;Je<Re;++Je)w[Oe+Je]=w[Oe+Je-ut];for(Oe+=Re,Z+=Re;Z>=I;)Z-=I,++q,$!=null&&q<=G&&!(q%16)&&$(v,q);if(e(Oe<=j),Z&ye&&(Le=Xi(_e,Z,q)),be!=null)for(;Se<Oe;)Re=w[Se++],be.X[(506832829*Re&4294967295)>>>be.Mb]=Re}else{if(!(Re<ze))break e;for(Ve=Re-280,e(be!=null);Se<Oe;)Re=w[Se++],be.X[(506832829*Re&4294967295)>>>be.Mb]=Re;Re=Oe,e(!(Ve>>>(ut=be).Xa)),w[Re]=ut.X[Ve],Ve=!0}Ve||e(se.h==re(se))}if(v.Pb&&se.h&&Oe<j)e(v.m.h),v.a=5,v.m=v.wd,v.$=v.xd,0<v.s.ua&&Te(v.s.vb,v.s.Wa);else{if(se.h)break e;$?.(v,q>G?G:q),v.a=0,v.$=Oe-P}return 1}return v.a=3,0}function Ua(v){e(v!=null),v.vc=null,v.yc=null,v.Ya=null;var w=v.Wa;w!=null&&(w.X=null),v.vb=null,e(v!=null)}function bs(){var v=new Vw;return v==null?null:(v.a=0,v.xb=u4,Ra("Predictor","VP8LPredictors"),Ra("Predictor","VP8LPredictors_C"),Ra("PredictorAdd","VP8LPredictorsAdd"),Ra("PredictorAdd","VP8LPredictorsAdd_C"),B1=Cn,cu=Ft,vo=rt,to=Nr,Hc=En,zl=Ws,jl=Qn,T.VP8LMapColor32b=fh,T.VP8LMapColor8b=L1,v)}function Ha(v,w,P,I,j){var G=1,$=[v],q=[w],Z=I.m,se=I.s,_e=null,Oe=0;e:for(;;){if(P)for(;G&&Ce(Z,1);){var Se=$,we=q,ze=I,Fe=1,be=ze.m,ye=ze.gc[ze.ab],Le=Ce(be,2);if(ze.Oc&1<<Le)G=0;else{switch(ze.Oc|=1<<Le,ye.hc=Le,ye.Ea=Se[0],ye.nc=we[0],ye.K=[null],++ze.ab,e(4>=ze.ab),Le){case 0:case 1:ye.b=Ce(be,3)+2,Fe=Ha(Ct(ye.Ea,ye.b),Ct(ye.nc,ye.b),0,ze,ye.K),ye.K=ye.K[0];break;case 3:var Ve,Re=Ce(be,8)+1,ut=16<Re?0:4<Re?1:2<Re?2:3;if(Se[0]=Ct(ye.Ea,ut),ye.b=ut,Ve=Fe=Ha(Re,1,0,ze,ye.K)){var Je,St=Re,et=ye,An=1<<(8>>et.b),zn=o(An);if(zn==null)Ve=0;else{var yn=et.K[0],cn=et.w;for(zn[0]=et.K[0][0],Je=1;Je<1*St;++Je)zn[Je]=We(yn[cn+Je],zn[Je-1]);for(;Je<4*An;++Je)zn[Je]=0;et.K[0]=null,et.K[0]=zn,Ve=1}}Fe=Ve;break;case 2:break;default:e(0)}G=Fe}}if($=$[0],q=q[0],G&&Ce(Z,1)&&!(G=1<=(Oe=Ce(Z,4))&&11>=Oe)){I.a=3;break e}var Jn;if(Jn=G)t:{var Gn,Wt,Ji,bo=I,Zi=$,Co=q,jn=Oe,Jo=P,Zo=bo.m,yr=bo.s,Ar=[null],io=1,Os=0,qa=TH[jn];n:for(;;){if(Jo&&Ce(Zo,1)){var wr=Ce(Zo,3)+2,Gl=Ct(Zi,wr),gu=Ct(Co,wr),_h=Gl*gu;if(!Ha(Gl,gu,0,bo,Ar))break n;for(Ar=Ar[0],yr.xc=wr,Gn=0;Gn<_h;++Gn){var Kc=Ar[Gn]>>8&65535;Ar[Gn]=Kc,Kc>=io&&(io=Kc+1)}}if(Zo.h)break n;for(Wt=0;5>Wt;++Wt){var Ai=c4[Wt];!Wt&&0<jn&&(Ai+=1<<jn),Os<Ai&&(Os=Ai)}var Qw=s(io*qa,z),b4=io,C4=s(b4,Q);if(C4==null)var Y1=null;else e(65536>=b4),Y1=C4;var op=o(Os);if(Y1==null||op==null||Qw==null){bo.a=1;break n}var X1=Qw;for(Gn=Ji=0;Gn<io;++Gn){var na=Y1[Gn],vh=na.G,bh=na.H,y4=0,Q1=1,w4=0;for(Wt=0;5>Wt;++Wt){Ai=c4[Wt],vh[Wt]=X1,bh[Wt]=Ji,!Wt&&0<jn&&(Ai+=1<<jn);r:{var J1,Jw=Ai,Z1=bo,sp=op,tG=X1,nG=Ji,Zw=0,Yc=Z1.m,iG=Ce(Yc,1);if(r(sp,0,0,Jw),iG){var rG=Ce(Yc,1)+1,oG=Ce(Yc,1),M4=Ce(Yc,oG==0?1:8);sp[M4]=1,rG==2&&(sp[M4=Ce(Yc,8)]=1);var e_=1}else{var E4=o(19),P4=Ce(Yc,4)+4;if(19<P4){Z1.a=3;var t_=0;break r}for(J1=0;J1<P4;++J1)E4[FH[J1]]=Ce(Yc,3);var eM=void 0,ap=void 0,O4=Z1,sG=E4,n_=Jw,S4=sp,tM=0,Xc=O4.m,k4=8,A4=s(128,z);i:for(;L(A4,0,7,sG,19);){if(Ce(Xc,1)){var aG=2+2*Ce(Xc,3);if((eM=2+Ce(Xc,aG))>n_)break i}else eM=n_;for(ap=0;ap<n_&&eM--;){fe(Xc);var D4=A4[0+(127&ne(Xc))];de(Xc,Xc.u+D4.g);var Ch=D4.value;if(16>Ch)S4[ap++]=Ch,Ch!=0&&(k4=Ch);else{var lG=Ch==16,F4=Ch-16,cG=AH[F4],I4=Ce(Xc,kH[F4])+cG;if(ap+I4>n_)break i;for(var dG=lG?k4:0;0<I4--;)S4[ap++]=dG}}tM=1;break i}tM||(O4.a=3),e_=tM}(e_=e_&&!Yc.h)&&(Zw=L(tG,nG,8,sp,Jw)),e_&&Zw!=0?t_=Zw:(Z1.a=3,t_=0)}if(t_==0)break n;if(Q1&&DH[Wt]==1&&(Q1=X1[Ji].g==0),y4+=X1[Ji].g,Ji+=t_,3>=Wt){var lp,nM=op[0];for(lp=1;lp<Ai;++lp)op[lp]>nM&&(nM=op[lp]);w4+=nM}}if(na.nd=Q1,na.Qb=0,Q1&&(na.qb=(vh[3][bh[3]+0].value<<24|vh[1][bh[1]+0].value<<16|vh[2][bh[2]+0].value)>>>0,y4==0&&256>vh[0][bh[0]+0].value&&(na.Qb=1,na.qb+=vh[0][bh[0]+0].value<<8)),na.jc=!na.Qb&&6>w4,na.jc){var i_,$l=na;for(i_=0;i_<kr;++i_){var Qc=i_,Jc=$l.pd[Qc],r_=$l.G[0][$l.H[0]+Qc];256<=r_.value?(Jc.g=r_.g+256,Jc.value=r_.value):(Jc.g=0,Jc.value=0,Qc>>=dr(r_,8,Jc),Qc>>=dr($l.G[1][$l.H[1]+Qc],16,Jc),Qc>>=dr($l.G[2][$l.H[2]+Qc],0,Jc),dr($l.G[3][$l.H[3]+Qc],24,Jc))}}}yr.vc=Ar,yr.Wb=io,yr.Ya=Y1,yr.yc=Qw,Jn=1;break t}Jn=0}if(!(G=Jn)){I.a=3;break e}if(0<Oe){if(se.ua=1<<Oe,!wt(se.Wa,Oe)){I.a=1,G=0;break e}}else se.ua=0;var iM=I,T4=$,uG=q,rM=iM.s,oM=rM.xc;if(iM.c=T4,iM.i=uG,rM.md=Ct(T4,oM),rM.wc=oM==0?-1:(1<<oM)-1,P){I.xb=UH;break e}if((_e=o($*q))==null){I.a=1,G=0;break e}G=(G=Qs(I,_e,0,$,q,q,null))&&!Z.h;break e}return G?(j!=null?j[0]=_e:(e(_e==null),e(P)),I.$=0,P||Ua(se)):Ua(se),G}function ru(v,w){var P=v.c*v.i,I=P+w+16*w;return e(v.c<=w),v.V=o(I),v.V==null?(v.Ta=null,v.Ua=0,v.a=1,0):(v.Ta=v.V,v.Ua=v.Ba+P+w,1)}function K0(v,w){var P=v.C,I=w-P,j=v.V,G=v.Ba+v.c*P;for(e(w<=v.l.o);0<I;){var $=16<I?16:I,q=v.l.ma,Z=v.l.width,se=Z*$,_e=q.ca,Oe=q.tb+Z*P,Se=v.Ta,we=v.Ua;Yo(v,$,j,G),ji(Se,we,_e,Oe,se),Ys(q,P,P+$,_e,Oe,Z),I-=$,j+=$*v.c,P+=$}e(P==w),v.C=v.Ma=w}function Y0(){this.ub=this.yd=this.td=this.Rb=0}function X0(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Q0(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function p1(){this.Yb=function(){var v=[];return function w(P,I,j){for(var G=j[I],$=0;$<G&&(P.push(j.length>I+1?[]:0),!(j.length<I+1));$++)w(P[$],I+1,j)}(v,0,[3,11]),v}()}function _w(){this.jb=o(3),this.Wc=a([4,8],p1),this.Xc=a([4,17],p1)}function vw(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function J0(){this.ld=this.La=this.dd=this.tc=0}function m1(){this.Na=this.la=0}function bw(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ig(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Cw(){this.uc=this.M=this.Nb=0,this.wa=Array(new J0),this.Y=0,this.ya=Array(new Ig),this.aa=0,this.l=new Z0}function x1(){this.y=o(16),this.f=o(8),this.ea=o(8)}function yw(){this.cb=this.a=0,this.sc="",this.m=new Ne,this.Od=new Y0,this.Kc=new X0,this.ed=new vw,this.Qa=new Q0,this.Ic=this.$c=this.Aa=0,this.D=new Cw,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,Ne),this.ia=0,this.pb=s(4,bw),this.Pa=new _w,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new x1),this.Hd=0,this.rb=Array(new m1),this.sb=0,this.wa=Array(new J0),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ig),this.L=this.aa=0,this.gd=a([4,2],J0),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Z0(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function ww(){var v=new yw;return v!=null&&(v.a=0,v.sc="OK",v.cb=0,v.Xb=0,ip||(ip=b1)),v}function Ri(v,w,P){return v.a==0&&(v.a=w,v.sc=P,v.cb=0),0}function _1(v,w,P){return 3<=P&&v[w+0]==157&&v[w+1]==1&&v[w+2]==42}function v1(v,w){if(v==null)return 0;if(v.a=0,v.sc="OK",w==null)return Ri(v,2,"null VP8Io passed to VP8GetHeaders()");var P=w.data,I=w.w,j=w.ha;if(4>j)return Ri(v,7,"Truncated header.");var G=P[I+0]|P[I+1]<<8|P[I+2]<<16,$=v.Od;if($.Rb=!(1&G),$.td=G>>1&7,$.yd=G>>4&1,$.ub=G>>5,3<$.td)return Ri(v,3,"Incorrect keyframe parameters.");if(!$.yd)return Ri(v,4,"Frame not displayable.");I+=3,j-=3;var q=v.Kc;if($.Rb){if(7>j)return Ri(v,7,"cannot parse picture header");if(!_1(P,I,j))return Ri(v,3,"Bad code word");q.c=16383&(P[I+4]<<8|P[I+3]),q.Td=P[I+4]>>6,q.i=16383&(P[I+6]<<8|P[I+5]),q.Ud=P[I+6]>>6,I+=7,j-=7,v.za=q.c+15>>4,v.Ub=q.i+15>>4,w.width=q.c,w.height=q.i,w.Da=0,w.j=0,w.v=0,w.va=w.width,w.o=w.height,w.da=0,w.ib=w.width,w.hb=w.height,w.U=w.width,w.T=w.height,r((G=v.Pa).jb,0,255,G.jb.length),e((G=v.Qa)!=null),G.Cb=0,G.Bb=0,G.Fb=1,r(G.Zb,0,0,G.Zb.length),r(G.Lb,0,0,G.Lb)}if($.ub>j)return Ri(v,7,"bad partition length");ce(G=v.m,P,I,$.ub),I+=$.ub,j-=$.ub,$.Rb&&(q.Ld=Pe(G),q.Kd=Pe(G)),q=v.Qa;var Z,se=v.Pa;if(e(G!=null),e(q!=null),q.Cb=Pe(G),q.Cb){if(q.Bb=Pe(G),Pe(G)){for(q.Fb=Pe(G),Z=0;4>Z;++Z)q.Zb[Z]=Pe(G)?ie(G,7):0;for(Z=0;4>Z;++Z)q.Lb[Z]=Pe(G)?ie(G,6):0}if(q.Bb)for(Z=0;3>Z;++Z)se.jb[Z]=Pe(G)?X(G,8):255}else q.Bb=0;if(G.Ka)return Ri(v,3,"cannot parse segment header");if((q=v.ed).zd=Pe(G),q.Tb=X(G,6),q.wb=X(G,3),q.Pc=Pe(G),q.Pc&&Pe(G)){for(se=0;4>se;++se)Pe(G)&&(q.vd[se]=ie(G,6));for(se=0;4>se;++se)Pe(G)&&(q.od[se]=ie(G,6))}if(v.L=q.Tb==0?0:q.zd?1:2,G.Ka)return Ri(v,3,"cannot parse filter header");var _e=j;if(j=Z=I,I=Z+_e,q=_e,v.Xb=(1<<X(v.m,2))-1,_e<3*(se=v.Xb))P=7;else{for(Z+=3*se,q-=3*se,_e=0;_e<se;++_e){var Oe=P[j+0]|P[j+1]<<8|P[j+2]<<16;Oe>q&&(Oe=q),ce(v.Jc[+_e],P,Z,Oe),Z+=Oe,q-=Oe,j+=3}ce(v.Jc[+se],P,Z,q),P=Z<I?0:5}if(P!=0)return Ri(v,P,"cannot parse partitions");for(P=X(Z=v.m,7),j=Pe(Z)?ie(Z,4):0,I=Pe(Z)?ie(Z,4):0,q=Pe(Z)?ie(Z,4):0,se=Pe(Z)?ie(Z,4):0,Z=Pe(Z)?ie(Z,4):0,_e=v.Qa,Oe=0;4>Oe;++Oe){if(_e.Cb){var Se=_e.Zb[Oe];_e.Fb||(Se+=P)}else{if(0<Oe){v.pb[Oe]=v.pb[0];continue}Se=P}var we=v.pb[Oe];we.Sc[0]=Kw[Xo(Se+j,127)],we.Sc[1]=Yw[Xo(Se+0,127)],we.Eb[0]=2*Kw[Xo(Se+I,127)],we.Eb[1]=101581*Yw[Xo(Se+q,127)]>>16,8>we.Eb[1]&&(we.Eb[1]=8),we.Qc[0]=Kw[Xo(Se+se,117)],we.Qc[1]=Yw[Xo(Se+Z,127)],we.lc=Se+Z}if(!$.Rb)return Ri(v,4,"Not a key frame.");for(Pe(G),$=v.Pa,P=0;4>P;++P){for(j=0;8>j;++j)for(I=0;3>I;++I)for(q=0;11>q;++q)se=Me(G,jH[P][j][I][q])?X(G,8):RH[P][j][I][q],$.Wc[P][j].Yb[I][q]=se;for(j=0;17>j;++j)$.Xc[P][j]=$.Wc[P][VH[j]]}return v.kc=Pe(G),v.kc&&(v.Bd=X(G,8)),v.cb=1}function b1(v,w,P,I,j,G,$){var q=w[j].Yb[P];for(P=0;16>j;++j){if(!Me(v,q[P+0]))return j;for(;!Me(v,q[P+1]);)if(q=w[++j].Yb[0],P=0,j==16)return 16;var Z=w[j+1].Yb;if(Me(v,q[P+2])){var se=v,_e=0;if(Me(se,(Se=q)[(Oe=P)+3]))if(Me(se,Se[Oe+6])){for(q=0,Oe=2*(_e=Me(se,Se[Oe+8]))+(Se=Me(se,Se[Oe+9+_e])),_e=0,Se=NH[Oe];Se[q];++q)_e+=_e+Me(se,Se[q]);_e+=3+(8<<Oe)}else Me(se,Se[Oe+7])?(_e=7+2*Me(se,165),_e+=Me(se,145)):_e=5+Me(se,159);else _e=Me(se,Se[Oe+4])?3+Me(se,Se[Oe+5]):2;q=Z[2]}else _e=1,q=Z[1];Z=$+LH[j],0>(se=v).b&&me(se);var Oe,Se=se.b,we=(Oe=se.Ca>>1)-(se.I>>Se)>>31;--se.b,se.Ca+=we,se.Ca|=1,se.I-=(Oe+1&we)<<Se,G[Z]=((_e^we)-we)*I[(0<j)+0]}return 16}function Tg(v){var w=v.rb[v.sb-1];w.la=0,w.Na=0,r(v.zc,0,0,v.zc.length),v.ja=0}function Mw(v,w){if(v==null)return 0;if(w==null)return Ri(v,2,"NULL VP8Io parameter in VP8Decode().");if(!v.cb&&!v1(v,w))return 0;if(e(v.cb),w.ac==null||w.ac(w)){w.ob&&(v.L=0);var P=K1[v.L];if(v.L==2?(v.yb=0,v.zb=0):(v.yb=w.v-P>>4,v.zb=w.j-P>>4,0>v.yb&&(v.yb=0),0>v.zb&&(v.zb=0)),v.Va=w.o+15+P>>4,v.Hb=w.va+15+P>>4,v.Hb>v.za&&(v.Hb=v.za),v.Va>v.Ub&&(v.Va=v.Ub),0<v.L){var I=v.ed;for(P=0;4>P;++P){var j;if(v.Qa.Cb){var G=v.Qa.Lb[P];v.Qa.Fb||(G+=I.Tb)}else G=I.Tb;for(j=0;1>=j;++j){var $=v.gd[P][j],q=G;if(I.Pc&&(q+=I.vd[0],j&&(q+=I.od[0])),0<(q=0>q?0:63<q?63:q)){var Z=q;0<I.wb&&(Z=4<I.wb?Z>>2:Z>>1)>9-I.wb&&(Z=9-I.wb),1>Z&&(Z=1),$.dd=Z,$.tc=2*q+Z,$.ld=40<=q?2:15<=q?1:0}else $.tc=0;$.La=j}}}P=0}else Ri(v,6,"Frame setup failed"),P=v.a;if(P=P==0){if(P){v.$c=0,0<v.Aa||(v.Ic=eG);e:{P=v.Ic,I=4*(Z=v.za);var se=32*Z,_e=Z+1,Oe=0<v.L?Z*(0<v.Aa?2:1):0,Se=(v.Aa==2?2:1)*Z;if(($=I+832+(j=3*(16*P+K1[v.L])/2*se)+(G=v.Fa!=null&&0<v.Fa.length?v.Kc.c*v.Kc.i:0))!=$)P=0;else{if($>v.Vb){if(v.Vb=0,v.Ec=o($),v.Fc=0,v.Ec==null){P=Ri(v,1,"no memory during frame initialization.");break e}v.Vb=$}$=v.Ec,q=v.Fc,v.Ac=$,v.Bc=q,q+=I,v.Gd=s(se,x1),v.Hd=0,v.rb=s(_e+1,m1),v.sb=1,v.wa=Oe?s(Oe,J0):null,v.Y=0,v.D.Nb=0,v.D.wa=v.wa,v.D.Y=v.Y,0<v.Aa&&(v.D.Y+=Z),e(!0),v.oc=$,v.pc=q,q+=832,v.ya=s(Se,Ig),v.aa=0,v.D.ya=v.ya,v.D.aa=v.aa,v.Aa==2&&(v.D.aa+=Z),v.R=16*Z,v.B=8*Z,Z=(se=K1[v.L])*v.R,se=se/2*v.B,v.sa=$,v.ta=q+Z,v.qa=v.sa,v.ra=v.ta+16*P*v.R+se,v.Ha=v.qa,v.Ia=v.ra+8*P*v.B+se,v.$c=0,q+=j,v.mb=G?$:null,v.nb=G?q:null,e(q+G<=v.Fc+v.Vb),Tg(v),r(v.Ac,v.Bc,0,I),P=1}}if(P){if(w.ka=0,w.y=v.sa,w.O=v.ta,w.f=v.qa,w.N=v.ra,w.ea=v.Ha,w.Vd=v.Ia,w.fa=v.R,w.Rc=v.B,w.F=null,w.J=0,!z1){for(P=-255;255>=P;++P)ur[255+P]=0>P?-P:P;for(P=-1020;1020>=P;++P)Ul[1020+P]=-128>P?-128:127<P?127:P;for(P=-112;112>=P;++P)np[112+P]=-16>P?-16:15<P?15:P;for(P=-255;510>=P;++P)xh[255+P]=0>P?0:255<P?255:P;z1=1}gh=Ow,Vl=Ew,Zg=y1,no=Pw,ys=w1,zi=C1,ph=jg,R1=au,ep=jw,du=Vg,uu=zw,Gc=oh,hu=Ug,mh=F1,fu=D1,$c=$a,tp=Rl,ws=Rw,ta[0]=Ga,ta[1]=Sw,ta[2]=Fw,ta[3]=Iw,ta[4]=P1,ta[5]=ih,ta[6]=O1,ta[7]=Lg,ta[8]=Bw,ta[9]=Tw,Wc[0]=M1,Wc[1]=Aw,Wc[2]=Ll,Wc[3]=th,Wc[4]=Lr,Wc[5]=Dw,Wc[6]=E1,Hl[0]=zc,Hl[1]=kw,Hl[2]=Nw,Hl[3]=Rg,Hl[4]=su,Hl[5]=Lw,Hl[6]=zg,P=1}else P=0}P&&(P=function(we,ze){for(we.M=0;we.M<we.Va;++we.M){var Fe,be=we.Jc[we.M&we.Xb],ye=we.m,Le=we;for(Fe=0;Fe<Le.za;++Fe){var Ve=ye,Re=Le,ut=Re.Ac,Je=Re.Bc+4*Fe,St=Re.zc,et=Re.ya[Re.aa+Fe];if(Re.Qa.Bb?et.$b=Me(Ve,Re.Pa.jb[0])?2+Me(Ve,Re.Pa.jb[2]):Me(Ve,Re.Pa.jb[1]):et.$b=0,Re.kc&&(et.Ad=Me(Ve,Re.Bd)),et.Za=!Me(Ve,145)+0,et.Za){var An=et.Ob,zn=0;for(Re=0;4>Re;++Re){var yn,cn=St[0+Re];for(yn=0;4>yn;++yn){cn=zH[ut[Je+yn]][cn];for(var Jn=d4[Me(Ve,cn[0])];0<Jn;)Jn=d4[2*Jn+Me(Ve,cn[Jn])];cn=-Jn,ut[Je+yn]=cn}n(An,zn,ut,Je,4),zn+=4,St[0+Re]=cn}}else cn=Me(Ve,156)?Me(Ve,128)?1:3:Me(Ve,163)?2:0,et.Ob[0]=cn,r(ut,Je,cn,4),r(St,0,cn,4);et.Dd=Me(Ve,142)?Me(Ve,114)?Me(Ve,183)?1:3:2:0}if(Le.m.Ka)return Ri(we,7,"Premature end-of-partition0 encountered.");for(;we.ja<we.za;++we.ja){if(Le=be,Ve=(ye=we).rb[ye.sb-1],ut=ye.rb[ye.sb+ye.ja],Fe=ye.ya[ye.aa+ye.ja],Je=ye.kc?Fe.Ad:0)Ve.la=ut.la=0,Fe.Za||(Ve.Na=ut.Na=0),Fe.Hc=0,Fe.Gc=0,Fe.ia=0;else{var Gn,Wt;if(Ve=ut,ut=Le,Je=ye.Pa.Xc,St=ye.ya[ye.aa+ye.ja],et=ye.pb[St.$b],Re=St.ad,An=0,zn=ye.rb[ye.sb-1],cn=yn=0,r(Re,An,0,384),St.Za)var Ji=0,bo=Je[3];else{Jn=o(16);var Zi=Ve.Na+zn.Na;if(Zi=ip(ut,Je[1],Zi,et.Eb,0,Jn,0),Ve.Na=zn.Na=(0<Zi)+0,1<Zi)gh(Jn,0,Re,An);else{var Co=Jn[0]+3>>3;for(Jn=0;256>Jn;Jn+=16)Re[An+Jn]=Co}Ji=1,bo=Je[0]}var jn=15&Ve.la,Jo=15&zn.la;for(Jn=0;4>Jn;++Jn){var Zo=1&Jo;for(Co=Wt=0;4>Co;++Co)jn=jn>>1|(Zo=(Zi=ip(ut,bo,Zi=Zo+(1&jn),et.Sc,Ji,Re,An))>Ji)<<7,Wt=Wt<<2|(3<Zi?3:1<Zi?2:Re[An+0]!=0),An+=16;jn>>=4,Jo=Jo>>1|Zo<<7,yn=(yn<<8|Wt)>>>0}for(bo=jn,Ji=Jo>>4,Gn=0;4>Gn;Gn+=2){for(Wt=0,jn=Ve.la>>4+Gn,Jo=zn.la>>4+Gn,Jn=0;2>Jn;++Jn){for(Zo=1&Jo,Co=0;2>Co;++Co)Zi=Zo+(1&jn),jn=jn>>1|(Zo=0<(Zi=ip(ut,Je[2],Zi,et.Qc,0,Re,An)))<<3,Wt=Wt<<2|(3<Zi?3:1<Zi?2:Re[An+0]!=0),An+=16;jn>>=2,Jo=Jo>>1|Zo<<5}cn|=Wt<<4*Gn,bo|=jn<<4<<Gn,Ji|=(240&Jo)<<Gn}Ve.la=bo,zn.la=Ji,St.Hc=yn,St.Gc=cn,St.ia=43690&cn?0:et.ia,Je=!(yn|cn)}if(0<ye.L&&(ye.wa[ye.Y+ye.ja]=ye.gd[Fe.$b][Fe.Za],ye.wa[ye.Y+ye.ja].La|=!Je),Le.Ka)return Ri(we,7,"Premature end-of-file encountered.")}if(Tg(we),ye=ze,Le=1,Fe=(be=we).D,Ve=0<be.L&&be.M>=be.zb&&be.M<=be.Va,be.Aa==0)e:{if(Fe.M=be.M,Fe.uc=Ve,Kg(be,Fe),Le=1,Fe=(Wt=be.D).Nb,Ve=(cn=K1[be.L])*be.R,ut=cn/2*be.B,Jn=16*Fe*be.R,Co=8*Fe*be.B,Je=be.sa,St=be.ta-Ve+Jn,et=be.qa,Re=be.ra-ut+Co,An=be.Ha,zn=be.Ia-ut+Co,Jo=(jn=Wt.M)==0,yn=jn>=be.Va-1,be.Aa==2&&Kg(be,Wt),Wt.uc)for(Zo=(Zi=be).D.M,e(Zi.D.uc),Wt=Zi.yb;Wt<Zi.Hb;++Wt){Ji=Wt,bo=Zo;var yr=(Ar=(Ai=Zi).D).Nb;Gn=Ai.R;var Ar=Ar.wa[Ar.Y+Ji],io=Ai.sa,Os=Ai.ta+16*yr*Gn+16*Ji,qa=Ar.dd,wr=Ar.tc;if(wr!=0)if(e(3<=wr),Ai.L==1)0<Ji&&$c(io,Os,Gn,wr+4),Ar.La&&ws(io,Os,Gn,wr),0<bo&&fu(io,Os,Gn,wr+4),Ar.La&&tp(io,Os,Gn,wr);else{var Gl=Ai.B,gu=Ai.qa,_h=Ai.ra+8*yr*Gl+8*Ji,Kc=Ai.Ha,Ai=Ai.Ia+8*yr*Gl+8*Ji;yr=Ar.ld,0<Ji&&(R1(io,Os,Gn,wr+4,qa,yr),du(gu,_h,Kc,Ai,Gl,wr+4,qa,yr)),Ar.La&&(Gc(io,Os,Gn,wr,qa,yr),mh(gu,_h,Kc,Ai,Gl,wr,qa,yr)),0<bo&&(ph(io,Os,Gn,wr+4,qa,yr),ep(gu,_h,Kc,Ai,Gl,wr+4,qa,yr)),Ar.La&&(uu(io,Os,Gn,wr,qa,yr),hu(gu,_h,Kc,Ai,Gl,wr,qa,yr))}}if(be.ia&&alert("todo:DitherRow"),ye.put!=null){if(Wt=16*jn,jn=16*(jn+1),Jo?(ye.y=be.sa,ye.O=be.ta+Jn,ye.f=be.qa,ye.N=be.ra+Co,ye.ea=be.Ha,ye.W=be.Ia+Co):(Wt-=cn,ye.y=Je,ye.O=St,ye.f=et,ye.N=Re,ye.ea=An,ye.W=zn),yn||(jn-=cn),jn>ye.o&&(jn=ye.o),ye.F=null,ye.J=null,be.Fa!=null&&0<be.Fa.length&&Wt<jn&&(ye.J=Wg(be,ye,Wt,jn-Wt),ye.F=be.mb,ye.F==null&&ye.F.length==0)){Le=Ri(be,3,"Could not decode alpha data.");break e}Wt<ye.j&&(cn=ye.j-Wt,Wt=ye.j,e(!(1&cn)),ye.O+=be.R*cn,ye.N+=be.B*(cn>>1),ye.W+=be.B*(cn>>1),ye.F!=null&&(ye.J+=ye.width*cn)),Wt<jn&&(ye.O+=ye.v,ye.N+=ye.v>>1,ye.W+=ye.v>>1,ye.F!=null&&(ye.J+=ye.v),ye.ka=Wt-ye.j,ye.U=ye.va-ye.v,ye.T=jn-Wt,Le=ye.put(ye))}Fe+1!=be.Ic||yn||(n(be.sa,be.ta-Ve,Je,St+16*be.R,Ve),n(be.qa,be.ra-ut,et,Re+8*be.B,ut),n(be.Ha,be.Ia-ut,An,zn+8*be.B,ut))}if(!Le)return Ri(we,6,"Output aborted.")}return 1}(v,w)),w.bc!=null&&w.bc(w),P&=1}return P?(v.cb=0,P):0}function Js(v,w,P,I,j){j=v[w+P+32*I]+(j>>3),v[w+P+32*I]=-256&j?0>j?0:255:j}function eh(v,w,P,I,j,G){Js(v,w,0,P,I+j),Js(v,w,1,P,I+G),Js(v,w,2,P,I-G),Js(v,w,3,P,I-j)}function xo(v){return(20091*v>>16)+v}function Bg(v,w,P,I){var j,G=0,$=o(16);for(j=0;4>j;++j){var q=v[w+0]+v[w+8],Z=v[w+0]-v[w+8],se=(35468*v[w+4]>>16)-xo(v[w+12]),_e=xo(v[w+4])+(35468*v[w+12]>>16);$[G+0]=q+_e,$[G+1]=Z+se,$[G+2]=Z-se,$[G+3]=q-_e,G+=4,w++}for(j=G=0;4>j;++j)q=(v=$[G+0]+4)+$[G+8],Z=v-$[G+8],se=(35468*$[G+4]>>16)-xo($[G+12]),Js(P,I,0,0,q+(_e=xo($[G+4])+(35468*$[G+12]>>16))),Js(P,I,1,0,Z+se),Js(P,I,2,0,Z-se),Js(P,I,3,0,q-_e),G++,I+=32}function C1(v,w,P,I){var j=v[w+0]+4,G=35468*v[w+4]>>16,$=xo(v[w+4]),q=35468*v[w+1]>>16;eh(P,I,0,j+$,v=xo(v[w+1]),q),eh(P,I,1,j+G,v,q),eh(P,I,2,j-G,v,q),eh(P,I,3,j-$,v,q)}function Ew(v,w,P,I,j){Bg(v,w,P,I),j&&Bg(v,w+16,P,I+4)}function y1(v,w,P,I){Vl(v,w+0,P,I,1),Vl(v,w+32,P,I+128,1)}function Pw(v,w,P,I){var j;for(v=v[w+0]+4,j=0;4>j;++j)for(w=0;4>w;++w)Js(P,I,w,j,v)}function w1(v,w,P,I){v[w+0]&&no(v,w+0,P,I),v[w+16]&&no(v,w+16,P,I+4),v[w+32]&&no(v,w+32,P,I+128),v[w+48]&&no(v,w+48,P,I+128+4)}function Ow(v,w,P,I){var j,G=o(16);for(j=0;4>j;++j){var $=v[w+0+j]+v[w+12+j],q=v[w+4+j]+v[w+8+j],Z=v[w+4+j]-v[w+8+j],se=v[w+0+j]-v[w+12+j];G[0+j]=$+q,G[8+j]=$-q,G[4+j]=se+Z,G[12+j]=se-Z}for(j=0;4>j;++j)$=(v=G[0+4*j]+3)+G[3+4*j],q=G[1+4*j]+G[2+4*j],Z=G[1+4*j]-G[2+4*j],se=v-G[3+4*j],P[I+0]=$+q>>3,P[I+16]=se+Z>>3,P[I+32]=$-q>>3,P[I+48]=se-Z>>3,I+=64}function Ng(v,w,P){var I,j=w-32,G=Qo,$=255-v[j-1];for(I=0;I<P;++I){var q,Z=G,se=$+v[w-1];for(q=0;q<P;++q)v[w+q]=Z[se+v[j+q]];w+=32}}function Sw(v,w){Ng(v,w,4)}function kw(v,w){Ng(v,w,8)}function Aw(v,w){Ng(v,w,16)}function Ll(v,w){var P;for(P=0;16>P;++P)n(v,w+32*P,v,w-32,16)}function th(v,w){var P;for(P=16;0<P;--P)r(v,w,v[w-1],16),w+=32}function nh(v,w,P){var I;for(I=0;16>I;++I)r(w,P+32*I,v,16)}function M1(v,w){var P,I=16;for(P=0;16>P;++P)I+=v[w-1+32*P]+v[w+P-32];nh(I>>5,v,w)}function Lr(v,w){var P,I=8;for(P=0;16>P;++P)I+=v[w-1+32*P];nh(I>>4,v,w)}function Dw(v,w){var P,I=8;for(P=0;16>P;++P)I+=v[w+P-32];nh(I>>4,v,w)}function E1(v,w){nh(128,v,w)}function Tt(v,w,P){return v+2*w+P+2>>2}function Fw(v,w){var P,I=w-32;for(I=new Uint8Array([Tt(v[I-1],v[I+0],v[I+1]),Tt(v[I+0],v[I+1],v[I+2]),Tt(v[I+1],v[I+2],v[I+3]),Tt(v[I+2],v[I+3],v[I+4])]),P=0;4>P;++P)n(v,w+32*P,I,0,I.length)}function Iw(v,w){var P=v[w-1],I=v[w-1+32],j=v[w-1+64],G=v[w-1+96];Ue(v,w+0,16843009*Tt(v[w-1-32],P,I)),Ue(v,w+32,16843009*Tt(P,I,j)),Ue(v,w+64,16843009*Tt(I,j,G)),Ue(v,w+96,16843009*Tt(j,G,G))}function Ga(v,w){var P,I=4;for(P=0;4>P;++P)I+=v[w+P-32]+v[w-1+32*P];for(I>>=3,P=0;4>P;++P)r(v,w+32*P,I,4)}function P1(v,w){var P=v[w-1+0],I=v[w-1+32],j=v[w-1+64],G=v[w-1-32],$=v[w+0-32],q=v[w+1-32],Z=v[w+2-32],se=v[w+3-32];v[w+0+96]=Tt(I,j,v[w-1+96]),v[w+1+96]=v[w+0+64]=Tt(P,I,j),v[w+2+96]=v[w+1+64]=v[w+0+32]=Tt(G,P,I),v[w+3+96]=v[w+2+64]=v[w+1+32]=v[w+0+0]=Tt($,G,P),v[w+3+64]=v[w+2+32]=v[w+1+0]=Tt(q,$,G),v[w+3+32]=v[w+2+0]=Tt(Z,q,$),v[w+3+0]=Tt(se,Z,q)}function O1(v,w){var P=v[w+1-32],I=v[w+2-32],j=v[w+3-32],G=v[w+4-32],$=v[w+5-32],q=v[w+6-32],Z=v[w+7-32];v[w+0+0]=Tt(v[w+0-32],P,I),v[w+1+0]=v[w+0+32]=Tt(P,I,j),v[w+2+0]=v[w+1+32]=v[w+0+64]=Tt(I,j,G),v[w+3+0]=v[w+2+32]=v[w+1+64]=v[w+0+96]=Tt(j,G,$),v[w+3+32]=v[w+2+64]=v[w+1+96]=Tt(G,$,q),v[w+3+64]=v[w+2+96]=Tt($,q,Z),v[w+3+96]=Tt(q,Z,Z)}function ih(v,w){var P=v[w-1+0],I=v[w-1+32],j=v[w-1+64],G=v[w-1-32],$=v[w+0-32],q=v[w+1-32],Z=v[w+2-32],se=v[w+3-32];v[w+0+0]=v[w+1+64]=G+$+1>>1,v[w+1+0]=v[w+2+64]=$+q+1>>1,v[w+2+0]=v[w+3+64]=q+Z+1>>1,v[w+3+0]=Z+se+1>>1,v[w+0+96]=Tt(j,I,P),v[w+0+64]=Tt(I,P,G),v[w+0+32]=v[w+1+96]=Tt(P,G,$),v[w+1+32]=v[w+2+96]=Tt(G,$,q),v[w+2+32]=v[w+3+96]=Tt($,q,Z),v[w+3+32]=Tt(q,Z,se)}function Lg(v,w){var P=v[w+0-32],I=v[w+1-32],j=v[w+2-32],G=v[w+3-32],$=v[w+4-32],q=v[w+5-32],Z=v[w+6-32],se=v[w+7-32];v[w+0+0]=P+I+1>>1,v[w+1+0]=v[w+0+64]=I+j+1>>1,v[w+2+0]=v[w+1+64]=j+G+1>>1,v[w+3+0]=v[w+2+64]=G+$+1>>1,v[w+0+32]=Tt(P,I,j),v[w+1+32]=v[w+0+96]=Tt(I,j,G),v[w+2+32]=v[w+1+96]=Tt(j,G,$),v[w+3+32]=v[w+2+96]=Tt(G,$,q),v[w+3+64]=Tt($,q,Z),v[w+3+96]=Tt(q,Z,se)}function Tw(v,w){var P=v[w-1+0],I=v[w-1+32],j=v[w-1+64],G=v[w-1+96];v[w+0+0]=P+I+1>>1,v[w+2+0]=v[w+0+32]=I+j+1>>1,v[w+2+32]=v[w+0+64]=j+G+1>>1,v[w+1+0]=Tt(P,I,j),v[w+3+0]=v[w+1+32]=Tt(I,j,G),v[w+3+32]=v[w+1+64]=Tt(j,G,G),v[w+3+64]=v[w+2+64]=v[w+0+96]=v[w+1+96]=v[w+2+96]=v[w+3+96]=G}function Bw(v,w){var P=v[w-1+0],I=v[w-1+32],j=v[w-1+64],G=v[w-1+96],$=v[w-1-32],q=v[w+0-32],Z=v[w+1-32],se=v[w+2-32];v[w+0+0]=v[w+2+32]=P+$+1>>1,v[w+0+32]=v[w+2+64]=I+P+1>>1,v[w+0+64]=v[w+2+96]=j+I+1>>1,v[w+0+96]=G+j+1>>1,v[w+3+0]=Tt(q,Z,se),v[w+2+0]=Tt($,q,Z),v[w+1+0]=v[w+3+32]=Tt(P,$,q),v[w+1+32]=v[w+3+64]=Tt(I,P,$),v[w+1+64]=v[w+3+96]=Tt(j,I,P),v[w+1+96]=Tt(G,j,I)}function Nw(v,w){var P;for(P=0;8>P;++P)n(v,w+32*P,v,w-32,8)}function Rg(v,w){var P;for(P=0;8>P;++P)r(v,w,v[w-1],8),w+=32}function ou(v,w,P){var I;for(I=0;8>I;++I)r(w,P+32*I,v,8)}function zc(v,w){var P,I=8;for(P=0;8>P;++P)I+=v[w+P-32]+v[w-1+32*P];ou(I>>4,v,w)}function Lw(v,w){var P,I=4;for(P=0;8>P;++P)I+=v[w+P-32];ou(I>>3,v,w)}function su(v,w){var P,I=4;for(P=0;8>P;++P)I+=v[w-1+32*P];ou(I>>3,v,w)}function zg(v,w){ou(128,v,w)}function rh(v,w,P){var I=v[w-P],j=v[w+0],G=3*(j-I)+Hw[1020+v[w-2*P]-v[w+P]],$=j1[112+(G+4>>3)];v[w-P]=Qo[255+I+j1[112+(G+3>>3)]],v[w+0]=Qo[255+j-$]}function S1(v,w,P,I){var j=v[w+0],G=v[w+P];return Es[255+v[w-2*P]-v[w-P]]>I||Es[255+G-j]>I}function k1(v,w,P,I){return 4*Es[255+v[w-P]-v[w+0]]+Es[255+v[w-2*P]-v[w+P]]<=I}function A1(v,w,P,I,j){var G=v[w-3*P],$=v[w-2*P],q=v[w-P],Z=v[w+0],se=v[w+P],_e=v[w+2*P],Oe=v[w+3*P];return 4*Es[255+q-Z]+Es[255+$-se]>I?0:Es[255+v[w-4*P]-G]<=j&&Es[255+G-$]<=j&&Es[255+$-q]<=j&&Es[255+Oe-_e]<=j&&Es[255+_e-se]<=j&&Es[255+se-Z]<=j}function D1(v,w,P,I){var j=2*I+1;for(I=0;16>I;++I)k1(v,w+I,P,j)&&rh(v,w+I,P)}function $a(v,w,P,I){var j=2*I+1;for(I=0;16>I;++I)k1(v,w+I*P,1,j)&&rh(v,w+I*P,1)}function Rl(v,w,P,I){var j;for(j=3;0<j;--j)D1(v,w+=4*P,P,I)}function Rw(v,w,P,I){var j;for(j=3;0<j;--j)$a(v,w+=4,P,I)}function jc(v,w,P,I,j,G,$,q){for(G=2*G+1;0<j--;){if(A1(v,w,P,G,$))if(S1(v,w,P,q))rh(v,w,P);else{var Z=v,se=w,_e=P,Oe=Z[se-2*_e],Se=Z[se-_e],we=Z[se+0],ze=Z[se+_e],Fe=Z[se+2*_e],be=27*(Le=Hw[1020+3*(we-Se)+Hw[1020+Oe-ze]])+63>>7,ye=18*Le+63>>7,Le=9*Le+63>>7;Z[se-3*_e]=Qo[255+Z[se-3*_e]+Le],Z[se-2*_e]=Qo[255+Oe+ye],Z[se-_e]=Qo[255+Se+be],Z[se+0]=Qo[255+we-be],Z[se+_e]=Qo[255+ze-ye],Z[se+2*_e]=Qo[255+Fe-Le]}w+=I}}function Zs(v,w,P,I,j,G,$,q){for(G=2*G+1;0<j--;){if(A1(v,w,P,G,$))if(S1(v,w,P,q))rh(v,w,P);else{var Z=v,se=w,_e=P,Oe=Z[se-_e],Se=Z[se+0],we=Z[se+_e],ze=j1[112+((Fe=3*(Se-Oe))+4>>3)],Fe=j1[112+(Fe+3>>3)],be=ze+1>>1;Z[se-2*_e]=Qo[255+Z[se-2*_e]+be],Z[se-_e]=Qo[255+Oe+Fe],Z[se+0]=Qo[255+Se-ze],Z[se+_e]=Qo[255+we-be]}w+=I}}function jg(v,w,P,I,j,G){jc(v,w,P,1,16,I,j,G)}function au(v,w,P,I,j,G){jc(v,w,1,P,16,I,j,G)}function zw(v,w,P,I,j,G){var $;for($=3;0<$;--$)Zs(v,w+=4*P,P,1,16,I,j,G)}function oh(v,w,P,I,j,G){var $;for($=3;0<$;--$)Zs(v,w+=4,1,P,16,I,j,G)}function jw(v,w,P,I,j,G,$,q){jc(v,w,j,1,8,G,$,q),jc(P,I,j,1,8,G,$,q)}function Vg(v,w,P,I,j,G,$,q){jc(v,w,1,j,8,G,$,q),jc(P,I,1,j,8,G,$,q)}function Ug(v,w,P,I,j,G,$,q){Zs(v,w+4*j,j,1,8,G,$,q),Zs(P,I+4*j,j,1,8,G,$,q)}function F1(v,w,P,I,j,G,$,q){Zs(v,w+4,1,j,8,G,$,q),Zs(P,I+4,1,j,8,G,$,q)}function sh(){this.ba=new qs,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Si,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Hg(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Gg(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function I1(){this.ua=0,this.Wa=new ue,this.vb=new ue,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Q,this.yc=new z}function Vw(){this.xb=this.a=0,this.l=new Z0,this.ca=new qs,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new R,this.Pb=0,this.wd=new R,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new I1,this.ab=0,this.gc=s(4,Gg),this.Oc=0}function ah(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Z0,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function lu(v,w,P,I,j,G,$){for(v=v==null?0:v[w+0],w=0;w<$;++w)j[G+w]=v+P[I+w]&255,v=j[G+w]}function $g(v,w,P,I,j,G,$){var q;if(v==null)lu(null,null,P,I,j,G,$);else for(q=0;q<$;++q)j[G+q]=v[w+q]+P[I+q]&255}function Vc(v,w,P,I,j,G,$){if(v==null)lu(null,null,P,I,j,G,$);else{var q,Z=v[w+0],se=Z,_e=Z;for(q=0;q<$;++q)se=_e+(Z=v[w+q])-se,_e=P[I+q]+(-256&se?0>se?0:255:se)&255,se=Z,j[G+q]=_e}}function Wg(v,w,P,I){var j=w.width,G=w.o;if(e(v!=null&&w!=null),0>P||0>=I||P+I>G)return null;if(!v.Cc){if(v.ga==null){var $;if(v.ga=new ah,($=v.ga==null)||($=w.width*w.o,e(v.Gb.length==0),v.Gb=o($),v.Uc=0,v.Gb==null?$=0:(v.mb=v.Gb,v.nb=v.Uc,v.rc=null,$=1),$=!$),!$){$=v.ga;var q=v.Fa,Z=v.P,se=v.qc,_e=v.mb,Oe=v.nb,Se=Z+1,we=se-1,ze=$.l;if(e(q!=null&&_e!=null&&w!=null),qc[0]=null,qc[1]=lu,qc[2]=$g,qc[3]=Vc,$.ca=_e,$.tb=Oe,$.c=w.width,$.i=w.height,e(0<$.c&&0<$.i),1>=se)w=0;else if($.$a=q[Z+0]>>0&3,$.Z=q[Z+0]>>2&3,$.Lc=q[Z+0]>>4&3,Z=q[Z+0]>>6&3,0>$.$a||1<$.$a||4<=$.Z||1<$.Lc||Z)w=0;else if(ze.put=za,ze.ac=Sr,ze.bc=ja,ze.ma=$,ze.width=w.width,ze.height=w.height,ze.Da=w.Da,ze.v=w.v,ze.va=w.va,ze.j=w.j,ze.o=w.o,$.$a)e:{e($.$a==1),w=bs();t:for(;;){if(w==null){w=0;break e}if(e($!=null),$.mc=w,w.c=$.c,w.i=$.i,w.l=$.l,w.l.ma=$,w.l.width=$.c,w.l.height=$.i,w.a=0,oe(w.m,q,Se,we),!Ha($.c,$.i,1,w,null)||(w.ab==1&&w.gc[0].hc==3&&Nl(w.s)?($.ic=1,q=w.c*w.i,w.Ta=null,w.Ua=0,w.V=o(q),w.Ba=0,w.V==null?(w.a=1,w=0):w=1):($.ic=0,w=ru(w,$.c)),!w))break t;w=1;break e}$.mc=null,w=0}else w=we>=$.c*$.i;$=!w}if($)return null;v.ga.Lc!=1?v.Ga=0:I=G-P}e(v.ga!=null),e(P+I<=G);e:{if(w=(q=v.ga).c,G=q.l.o,q.$a==0){if(Se=v.rc,we=v.Vc,ze=v.Fa,Z=v.P+1+P*w,se=v.mb,_e=v.nb+P*w,e(Z<=v.P+v.qc),q.Z!=0)for(e(qc[q.Z]!=null),$=0;$<I;++$)qc[q.Z](Se,we,ze,Z,se,_e,w),Se=se,we=_e,_e+=w,Z+=w;else for($=0;$<I;++$)n(se,_e,ze,Z,w),Se=se,we=_e,_e+=w,Z+=w;v.rc=Se,v.Vc=we}else{if(e(q.mc!=null),w=P+I,e(($=q.mc)!=null),e(w<=$.i),$.C>=w)w=1;else if(q.ic||Ee(),q.ic){q=$.V,Se=$.Ba,we=$.c;var Fe=$.i,be=(ze=1,Z=$.$/we,se=$.$%we,_e=$.m,Oe=$.s,$.$),ye=we*Fe,Le=we*w,Ve=Oe.wc,Re=be<Le?Xi(Oe,se,Z):null;e(be<=ye),e(w<=Fe),e(Nl(Oe));t:for(;;){for(;!_e.h&&be<Le;){if(se&Ve||(Re=Xi(Oe,se,Z)),e(Re!=null),fe(_e),256>(Fe=mo(Re.G[0],Re.H[0],_e)))q[Se+be]=Fe,++be,++se>=we&&(se=0,++Z<=w&&!(Z%16)&&Xs($,Z));else{if(!(280>Fe)){ze=0;break t}Fe=Ks(Fe-256,_e);var ut,Je=mo(Re.G[4],Re.H[4],_e);if(fe(_e),!(be>=(Je=Va(we,Je=Ks(Je,_e)))&&ye-be>=Fe)){ze=0;break t}for(ut=0;ut<Fe;++ut)q[Se+be+ut]=q[Se+be+ut-Je];for(be+=Fe,se+=Fe;se>=we;)se-=we,++Z<=w&&!(Z%16)&&Xs($,Z);be<Le&&se&Ve&&(Re=Xi(Oe,se,Z))}e(_e.h==re(_e))}Xs($,Z>w?w:Z);break t}!ze||_e.h&&be<ye?(ze=0,$.a=_e.h?5:3):$.$=be,w=ze}else w=Qs($,$.V,$.Ba,$.c,$.i,w,K0);if(!w){I=0;break e}}P+I>=G&&(v.Cc=1),I=1}if(!I)return null;if(v.Cc&&((I=v.ga)!=null&&(I.mc=null),v.ga=null,0<v.Ga))return alert("todo:WebPDequantizeLevels"),null}return v.nb+P*j}function E(v,w,P,I,j,G){for(;0<j--;){var $,q=v,Z=w+(P?1:0),se=v,_e=w+(P?0:3);for($=0;$<I;++$){var Oe=se[_e+4*$];Oe!=255&&(Oe*=32897,q[Z+4*$+0]=q[Z+4*$+0]*Oe>>23,q[Z+4*$+1]=q[Z+4*$+1]*Oe>>23,q[Z+4*$+2]=q[Z+4*$+2]*Oe>>23)}w+=G}}function V(v,w,P,I,j){for(;0<I--;){var G;for(G=0;G<P;++G){var $=v[w+2*G+0],q=15&(se=v[w+2*G+1]),Z=4369*q,se=(240&se|se>>4)*Z>>16;v[w+2*G+0]=(240&$|$>>4)*Z>>16&240|(15&$|$<<4)*Z>>16>>4&15,v[w+2*G+1]=240&se|q}w+=j}}function ae(v,w,P,I,j,G,$,q){var Z,se,_e=255;for(se=0;se<j;++se){for(Z=0;Z<I;++Z){var Oe=v[w+Z];G[$+4*Z]=Oe,_e&=Oe}w+=P,$+=q}return _e!=255}function pe(v,w,P,I,j){var G;for(G=0;G<j;++G)P[I+G]=v[w+G]>>8}function Ee(){Ms=E,ii=V,ri=ae,ji=pe}function Be(v,w,P){T[v]=function(I,j,G,$,q,Z,se,_e,Oe,Se,we,ze,Fe,be,ye,Le,Ve){var Re,ut=Ve-1>>1,Je=q[Z+0]|se[_e+0]<<16,St=Oe[Se+0]|we[ze+0]<<16;e(I!=null);var et=3*Je+St+131074>>2;for(w(I[j+0],255&et,et>>16,Fe,be),G!=null&&(et=3*St+Je+131074>>2,w(G[$+0],255&et,et>>16,ye,Le)),Re=1;Re<=ut;++Re){var An=q[Z+Re]|se[_e+Re]<<16,zn=Oe[Se+Re]|we[ze+Re]<<16,yn=Je+An+St+zn+524296,cn=yn+2*(An+St)>>3;et=cn+Je>>1,Je=(yn=yn+2*(Je+zn)>>3)+An>>1,w(I[j+2*Re-1],255&et,et>>16,Fe,be+(2*Re-1)*P),w(I[j+2*Re-0],255&Je,Je>>16,Fe,be+(2*Re-0)*P),G!=null&&(et=yn+St>>1,Je=cn+zn>>1,w(G[$+2*Re-1],255&et,et>>16,ye,Le+(2*Re-1)*P),w(G[$+2*Re+0],255&Je,Je>>16,ye,Le+(2*Re+0)*P)),Je=An,St=zn}1&Ve||(et=3*Je+St+131074>>2,w(I[j+Ve-1],255&et,et>>16,Fe,be+(Ve-1)*P),G!=null&&(et=3*St+Je+131074>>2,w(G[$+Ve-1],255&et,et>>16,ye,Le+(Ve-1)*P)))}}function qe(){Ps[V1]=HH,Ps[U1]=h4,Ps[a4]=GH,Ps[H1]=f4,Ps[G1]=g4,Ps[Gw]=p4,Ps[l4]=$H,Ps[$w]=h4,Ps[Ww]=f4,Ps[$1]=g4,Ps[qw]=p4}function ct(v){return v&~WH?0>v?0:255:v>>m4}function Pt(v,w){return ct((19077*v>>8)+(26149*w>>8)-14234)}function Gt(v,w,P){return ct((19077*v>>8)-(6419*w>>8)-(13320*P>>8)+8708)}function Rt(v,w){return ct((19077*v>>8)+(33050*w>>8)-17685)}function xn(v,w,P,I,j){I[j+0]=Pt(v,P),I[j+1]=Gt(v,w,P),I[j+2]=Rt(v,w)}function bi(v,w,P,I,j){I[j+0]=Rt(v,w),I[j+1]=Gt(v,w,P),I[j+2]=Pt(v,P)}function ki(v,w,P,I,j){var G=Gt(v,w,P);w=G<<3&224|Rt(v,w)>>3,I[j+0]=248&Pt(v,P)|G>>5,I[j+1]=w}function Qi(v,w,P,I,j){var G=240&Rt(v,w)|15;I[j+0]=240&Pt(v,P)|Gt(v,w,P)>>4,I[j+1]=G}function Rr(v,w,P,I,j){I[j+0]=255,xn(v,w,P,I,j+1)}function Cr(v,w,P,I,j){bi(v,w,P,I,j),I[j+3]=255}function ea(v,w,P,I,j){xn(v,w,P,I,j),I[j+3]=255}function Xo(v,w){return 0>v?0:v>w?w:v}function Wa(v,w,P){T[v]=function(I,j,G,$,q,Z,se,_e,Oe){for(var Se=_e+(-2&Oe)*P;_e!=Se;)w(I[j+0],G[$+0],q[Z+0],se,_e),w(I[j+1],G[$+0],q[Z+0],se,_e+P),j+=2,++$,++Z,_e+=2*P;1&Oe&&w(I[j+0],G[$+0],q[Z+0],se,_e)}}function T1(v,w,P){return P==0?v==0?w==0?6:5:w==0?4:0:P}function qg(v,w,P,I,j){switch(v>>>30){case 3:Vl(w,P,I,j,0);break;case 2:zi(w,P,I,j);break;case 1:no(w,P,I,j)}}function Kg(v,w){var P,I,j=w.M,G=w.Nb,$=v.oc,q=v.pc+40,Z=v.oc,se=v.pc+584,_e=v.oc,Oe=v.pc+600;for(P=0;16>P;++P)$[q+32*P-1]=129;for(P=0;8>P;++P)Z[se+32*P-1]=129,_e[Oe+32*P-1]=129;for(0<j?$[q-1-32]=Z[se-1-32]=_e[Oe-1-32]=129:(r($,q-32-1,127,21),r(Z,se-32-1,127,9),r(_e,Oe-32-1,127,9)),I=0;I<v.za;++I){var Se=w.ya[w.aa+I];if(0<I){for(P=-1;16>P;++P)n($,q+32*P-4,$,q+32*P+12,4);for(P=-1;8>P;++P)n(Z,se+32*P-4,Z,se+32*P+4,4),n(_e,Oe+32*P-4,_e,Oe+32*P+4,4)}var we=v.Gd,ze=v.Hd+I,Fe=Se.ad,be=Se.Hc;if(0<j&&(n($,q-32,we[ze].y,0,16),n(Z,se-32,we[ze].f,0,8),n(_e,Oe-32,we[ze].ea,0,8)),Se.Za){var ye=$,Le=q-32+16;for(0<j&&(I>=v.za-1?r(ye,Le,we[ze].y[15],4):n(ye,Le,we[ze+1].y,0,4)),P=0;4>P;P++)ye[Le+128+P]=ye[Le+256+P]=ye[Le+384+P]=ye[Le+0+P];for(P=0;16>P;++P,be<<=2)ye=$,Le=q+_4[P],ta[Se.Ob[P]](ye,Le),qg(be,Fe,16*+P,ye,Le)}else if(ye=T1(I,j,Se.Ob[0]),Wc[ye]($,q),be!=0)for(P=0;16>P;++P,be<<=2)qg(be,Fe,16*+P,$,q+_4[P]);for(P=Se.Gc,ye=T1(I,j,Se.Dd),Hl[ye](Z,se),Hl[ye](_e,Oe),be=Fe,ye=Z,Le=se,255&(Se=P>>0)&&(170&Se?Zg(be,256,ye,Le):ys(be,256,ye,Le)),Se=_e,be=Oe,255&(P>>=8)&&(170&P?Zg(Fe,320,Se,be):ys(Fe,320,Se,be)),j<v.Ub-1&&(n(we[ze].y,0,$,q+480,16),n(we[ze].f,0,Z,se+224,8),n(we[ze].ea,0,_e,Oe+224,8)),P=8*G*v.B,we=v.sa,ze=v.ta+16*I+16*G*v.R,Fe=v.qa,Se=v.ra+8*I+P,be=v.Ha,ye=v.Ia+8*I+P,P=0;16>P;++P)n(we,ze+P*v.R,$,q+32*P,16);for(P=0;8>P;++P)n(Fe,Se+P*v.B,Z,se+32*P,8),n(be,ye+P*v.B,_e,Oe+32*P,8)}}function lh(v,w,P,I,j,G,$,q,Z){var se=[0],_e=[0],Oe=0,Se=Z!=null?Z.kd:0,we=Z??new Hg;if(v==null||12>P)return 7;we.data=v,we.w=w,we.ha=P,w=[w],P=[P],we.gb=[we.gb];e:{var ze=w,Fe=P,be=we.gb;if(e(v!=null),e(Fe!=null),e(be!=null),be[0]=0,12<=Fe[0]&&!t(v,ze[0],"RIFF")){if(t(v,ze[0]+8,"WEBP")){be=3;break e}var ye=Ye(v,ze[0]+4);if(12>ye||4294967286<ye){be=3;break e}if(Se&&ye>Fe[0]-8){be=7;break e}be[0]=ye,ze[0]+=12,Fe[0]-=12}be=0}if(be!=0)return be;for(ye=0<we.gb[0],P=P[0];;){e:{var Le=v;Fe=w,be=P;var Ve=se,Re=_e,ut=ze=[0];if((et=Oe=[Oe])[0]=0,8>be[0])be=7;else{if(!t(Le,Fe[0],"VP8X")){if(Ye(Le,Fe[0]+4)!=10){be=3;break e}if(18>be[0]){be=7;break e}var Je=Ye(Le,Fe[0]+8),St=1+Xe(Le,Fe[0]+12);if(2147483648<=St*(Le=1+Xe(Le,Fe[0]+15))){be=3;break e}ut!=null&&(ut[0]=Je),Ve!=null&&(Ve[0]=St),Re!=null&&(Re[0]=Le),Fe[0]+=18,be[0]-=18,et[0]=1}be=0}}if(Oe=Oe[0],ze=ze[0],be!=0)return be;if(Fe=!!(2&ze),!ye&&Oe)return 3;if(G!=null&&(G[0]=!!(16&ze)),$!=null&&($[0]=Fe),q!=null&&(q[0]=0),$=se[0],ze=_e[0],Oe&&Fe&&Z==null){be=0;break}if(4>P){be=7;break}if(ye&&Oe||!ye&&!Oe&&!t(v,w[0],"ALPH")){P=[P],we.na=[we.na],we.P=[we.P],we.Sa=[we.Sa];e:{Je=v,be=w,ye=P;var et=we.gb;Ve=we.na,Re=we.P,ut=we.Sa,St=22,e(Je!=null),e(ye!=null),Le=be[0];var An=ye[0];for(e(Ve!=null),e(ut!=null),Ve[0]=null,Re[0]=null,ut[0]=0;;){if(be[0]=Le,ye[0]=An,8>An){be=7;break e}var zn=Ye(Je,Le+4);if(4294967286<zn){be=3;break e}var yn=8+zn+1&-2;if(St+=yn,0<et&&St>et){be=3;break e}if(!t(Je,Le,"VP8 ")||!t(Je,Le,"VP8L")){be=0;break e}if(An[0]<yn){be=7;break e}t(Je,Le,"ALPH")||(Ve[0]=Je,Re[0]=Le+8,ut[0]=zn),Le+=yn,An-=yn}}if(P=P[0],we.na=we.na[0],we.P=we.P[0],we.Sa=we.Sa[0],be!=0)break}P=[P],we.Ja=[we.Ja],we.xa=[we.xa];e:if(et=v,be=w,ye=P,Ve=we.gb[0],Re=we.Ja,ut=we.xa,Je=be[0],Le=!t(et,Je,"VP8 "),St=!t(et,Je,"VP8L"),e(et!=null),e(ye!=null),e(Re!=null),e(ut!=null),8>ye[0])be=7;else{if(Le||St){if(et=Ye(et,Je+4),12<=Ve&&et>Ve-12){be=3;break e}if(Se&&et>ye[0]-8){be=7;break e}Re[0]=et,be[0]+=8,ye[0]-=8,ut[0]=St}else ut[0]=5<=ye[0]&&et[Je+0]==47&&!(et[Je+4]>>5),Re[0]=ye[0];be=0}if(P=P[0],we.Ja=we.Ja[0],we.xa=we.xa[0],w=w[0],be!=0)break;if(4294967286<we.Ja)return 3;if(q==null||Fe||(q[0]=we.xa?2:1),$=[$],ze=[ze],we.xa){if(5>P){be=7;break}q=$,Se=ze,Fe=G,v==null||5>P?v=0:5<=P&&v[w+0]==47&&!(v[w+4]>>5)?(ye=[0],et=[0],Ve=[0],oe(Re=new R,v,w,P),kt(Re,ye,et,Ve)?(q!=null&&(q[0]=ye[0]),Se!=null&&(Se[0]=et[0]),Fe!=null&&(Fe[0]=Ve[0]),v=1):v=0):v=0}else{if(10>P){be=7;break}q=ze,v==null||10>P||!_1(v,w+3,P-3)?v=0:(Se=v[w+0]|v[w+1]<<8|v[w+2]<<16,Fe=16383&(v[w+7]<<8|v[w+6]),v=16383&(v[w+9]<<8|v[w+8]),1&Se||3<(Se>>1&7)||!(Se>>4&1)||Se>>5>=we.Ja||!Fe||!v?v=0:($&&($[0]=Fe),q&&(q[0]=v),v=1))}if(!v||($=$[0],ze=ze[0],Oe&&(se[0]!=$||_e[0]!=ze)))return 3;Z!=null&&(Z[0]=we,Z.offset=w-Z.w,e(4294967286>w-Z.w),e(Z.offset==Z.ha-P));break}return be==0||be==7&&Oe&&Z==null?(G!=null&&(G[0]|=we.na!=null&&0<we.na.length),I!=null&&(I[0]=$),j!=null&&(j[0]=ze),0):be}function Yg(v,w,P){var I=w.width,j=w.height,G=0,$=0,q=I,Z=j;if(w.Da=v!=null&&0<v.Da,w.Da&&(q=v.cd,Z=v.bd,G=v.v,$=v.j,11>P||(G&=-2,$&=-2),0>G||0>$||0>=q||0>=Z||G+q>I||$+Z>j))return 0;if(w.v=G,w.j=$,w.va=G+q,w.o=$+Z,w.U=q,w.T=Z,w.da=v!=null&&0<v.da,w.da){if(!Ot(q,Z,P=[v.ib],G=[v.hb]))return 0;w.ib=P[0],w.hb=G[0]}return w.ob=v!=null&&v.ob,w.Kb=v==null||!v.Sd,w.da&&(w.ob=w.ib<3*I/4&&w.hb<3*j/4,w.Kb=0),1}function Xg(v){if(v==null)return 2;if(11>v.S){var w=v.f.RGBA;w.fb+=(v.height-1)*w.A,w.A=-w.A}else w=v.f.kb,v=v.height,w.O+=(v-1)*w.fa,w.fa=-w.fa,w.N+=(v-1>>1)*w.Ab,w.Ab=-w.Ab,w.W+=(v-1>>1)*w.Db,w.Db=-w.Db,w.F!=null&&(w.J+=(v-1)*w.lb,w.lb=-w.lb);return 0}function ch(v,w,P,I){if(I==null||0>=v||0>=w)return 2;if(P!=null){if(P.Da){var j=P.cd,G=P.bd,$=-2&P.v,q=-2&P.j;if(0>$||0>q||0>=j||0>=G||$+j>v||q+G>w)return 2;v=j,w=G}if(P.da){if(!Ot(v,w,j=[P.ib],G=[P.hb]))return 2;v=j[0],w=G[0]}}I.width=v,I.height=w;e:{var Z=I.width,se=I.height;if(v=I.S,0>=Z||0>=se||!(v>=V1&&13>v))v=2;else{if(0>=I.Rd&&I.sd==null){$=G=j=w=0;var _e=(q=Z*v4[v])*se;if(11>v||(G=(se+1)/2*(w=(Z+1)/2),v==12&&($=(j=Z)*se)),(se=o(_e+2*G+$))==null){v=1;break e}I.sd=se,11>v?((Z=I.f.RGBA).eb=se,Z.fb=0,Z.A=q,Z.size=_e):((Z=I.f.kb).y=se,Z.O=0,Z.fa=q,Z.Fd=_e,Z.f=se,Z.N=0+_e,Z.Ab=w,Z.Cd=G,Z.ea=se,Z.W=0+_e+G,Z.Db=w,Z.Ed=G,v==12&&(Z.F=se,Z.J=0+_e+2*G),Z.Tc=$,Z.lb=j)}if(w=1,j=I.S,G=I.width,$=I.height,j>=V1&&13>j)if(11>j)v=I.f.RGBA,w&=(q=Math.abs(v.A))*($-1)+G<=v.size,w&=q>=G*v4[j],w&=v.eb!=null;else{v=I.f.kb,q=(G+1)/2,_e=($+1)/2,Z=Math.abs(v.fa),se=Math.abs(v.Ab);var Oe=Math.abs(v.Db),Se=Math.abs(v.lb),we=Se*($-1)+G;w&=Z*($-1)+G<=v.Fd,w&=se*(_e-1)+q<=v.Cd,w=(w&=Oe*(_e-1)+q<=v.Ed)&Z>=G&se>=q&Oe>=q,w&=v.y!=null,w&=v.f!=null,w&=v.ea!=null,j==12&&(w&=Se>=G,w&=we<=v.Tc,w&=v.F!=null)}else w=0;v=w?0:2}}return v!=0||P!=null&&P.fd&&(v=Xg(I)),v}var kr=64,dh=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],uh=24,hh=32,Qg=8,_o=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Qe("Predictor0","PredictorAdd0"),T.Predictor0=function(){return 4278190080},T.Predictor1=function(v){return v},T.Predictor2=function(v,w,P){return w[P+0]},T.Predictor3=function(v,w,P){return w[P+1]},T.Predictor4=function(v,w,P){return w[P-1]},T.Predictor5=function(v,w,P){return nt(nt(v,w[P+1]),w[P+0])},T.Predictor6=function(v,w,P){return nt(v,w[P-1])},T.Predictor7=function(v,w,P){return nt(v,w[P+0])},T.Predictor8=function(v,w,P){return nt(w[P-1],w[P+0])},T.Predictor9=function(v,w,P){return nt(w[P+0],w[P+1])},T.Predictor10=function(v,w,P){return nt(nt(v,w[P-1]),nt(w[P+0],w[P+1]))},T.Predictor11=function(v,w,P){var I=w[P+0];return 0>=Kt(I>>24&255,v>>24&255,(w=w[P-1])>>24&255)+Kt(I>>16&255,v>>16&255,w>>16&255)+Kt(I>>8&255,v>>8&255,w>>8&255)+Kt(255&I,255&v,255&w)?I:v},T.Predictor12=function(v,w,P){var I=w[P+0];return(Et((v>>24&255)+(I>>24&255)-((w=w[P-1])>>24&255))<<24|Et((v>>16&255)+(I>>16&255)-(w>>16&255))<<16|Et((v>>8&255)+(I>>8&255)-(w>>8&255))<<8|Et((255&v)+(255&I)-(255&w)))>>>0},T.Predictor13=function(v,w,P){var I=w[P-1];return(Nt((v=nt(v,w[P+0]))>>24&255,I>>24&255)<<24|Nt(v>>16&255,I>>16&255)<<16|Nt(v>>8&255,I>>8&255)<<8|Nt(v>>0&255,I>>0&255))>>>0};var Uw=T.PredictorAdd0;T.PredictorAdd1=nn,Qe("Predictor2","PredictorAdd2"),Qe("Predictor3","PredictorAdd3"),Qe("Predictor4","PredictorAdd4"),Qe("Predictor5","PredictorAdd5"),Qe("Predictor6","PredictorAdd6"),Qe("Predictor7","PredictorAdd7"),Qe("Predictor8","PredictorAdd8"),Qe("Predictor9","PredictorAdd9"),Qe("Predictor10","PredictorAdd10"),Qe("Predictor11","PredictorAdd11"),Qe("Predictor12","PredictorAdd12"),Qe("Predictor13","PredictorAdd13");var Jg=T.PredictorAdd2;sn("ColorIndexInverseTransform","MapARGB","32b",function(v){return v>>8&255},function(v){return v}),sn("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(v){return v},function(v){return v>>8&255});var B1,Cs=T.ColorIndexInverseTransform,fh=T.MapARGB,N1=T.VP8LColorIndexInverseTransformAlpha,L1=T.MapAlpha,Uc=T.VP8LPredictorsAdd=[];Uc.length=16,(T.VP8LPredictors=[]).length=16,(T.VP8LPredictorsAdd_C=[]).length=16,(T.VP8LPredictors_C=[]).length=16;var cu,vo,to,Hc,zl,jl,gh,Vl,zi,Zg,no,ys,ph,R1,ep,du,uu,Gc,hu,mh,fu,$c,tp,ws,Ms,ii,ri,ji,ur=o(511),Ul=o(2041),np=o(225),xh=o(767),z1=0,Hw=Ul,j1=np,Qo=xh,Es=ur,V1=0,U1=1,a4=2,H1=3,G1=4,Gw=5,l4=6,$w=7,Ww=8,$1=9,qw=10,kH=[2,3,7],AH=[3,3,11],c4=[280,256,256,256,40],DH=[0,1,1,1,0],FH=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],IH=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],TH=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],BH=8,Kw=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Yw=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ip=null,NH=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],LH=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],d4=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],RH=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],zH=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],jH=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],VH=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Wc=[],ta=[],Hl=[],UH=1,u4=2,qc=[],Ps=[];Be("UpsampleRgbLinePair",xn,3),Be("UpsampleBgrLinePair",bi,3),Be("UpsampleRgbaLinePair",ea,4),Be("UpsampleBgraLinePair",Cr,4),Be("UpsampleArgbLinePair",Rr,4),Be("UpsampleRgba4444LinePair",Qi,2),Be("UpsampleRgb565LinePair",ki,2);var HH=T.UpsampleRgbLinePair,GH=T.UpsampleBgrLinePair,h4=T.UpsampleRgbaLinePair,f4=T.UpsampleBgraLinePair,g4=T.UpsampleArgbLinePair,p4=T.UpsampleRgba4444LinePair,$H=T.UpsampleRgb565LinePair,W1=16,q1=1<<W1-1,rp=-227,Xw=482,m4=6,WH=(256<<m4)-1,x4=0,qH=o(256),KH=o(256),YH=o(256),XH=o(256),QH=o(Xw-rp),JH=o(Xw-rp);Wa("YuvToRgbRow",xn,3),Wa("YuvToBgrRow",bi,3),Wa("YuvToRgbaRow",ea,4),Wa("YuvToBgraRow",Cr,4),Wa("YuvToArgbRow",Rr,4),Wa("YuvToRgba4444Row",Qi,2),Wa("YuvToRgb565Row",ki,2);var _4=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],K1=[0,2,8],ZH=[8,7,6,4,4,2,2,2,1,1,1,1],eG=1;this.WebPDecodeRGBA=function(v,w,P,I,j){var G=U1,$=new sh,q=new qs;$.ba=q,q.S=G,q.width=[q.width],q.height=[q.height];var Z=q.width,se=q.height,_e=new Bl;if(_e==null||v==null)var Oe=2;else e(_e!=null),Oe=lh(v,w,P,_e.width,_e.height,_e.Pd,_e.Qd,_e.format,null);if(Oe!=0?Z=0:(Z!=null&&(Z[0]=_e.width[0]),se!=null&&(se[0]=_e.height[0]),Z=1),Z){q.width=q.width[0],q.height=q.height[0],I!=null&&(I[0]=q.width),j!=null&&(j[0]=q.height);e:{if(I=new Z0,(j=new Hg).data=v,j.w=w,j.ha=P,j.kd=1,w=[0],e(j!=null),((v=lh(j.data,j.w,j.ha,null,null,null,w,null,j))==0||v==7)&&w[0]&&(v=4),(w=v)==0){if(e($!=null),I.data=j.data,I.w=j.w+j.offset,I.ha=j.ha-j.offset,I.put=za,I.ac=Sr,I.bc=ja,I.ma=$,j.xa){if((v=bs())==null){$=1;break e}if(function(Se,we){var ze=[0],Fe=[0],be=[0];t:for(;;){if(Se==null)return 0;if(we==null)return Se.a=2,0;if(Se.l=we,Se.a=0,oe(Se.m,we.data,we.w,we.ha),!kt(Se.m,ze,Fe,be)){Se.a=3;break t}if(Se.xb=u4,we.width=ze[0],we.height=Fe[0],!Ha(ze[0],Fe[0],1,Se,null))break t;return 1}return e(Se.a!=0),0}(v,I)){if(I=(w=ch(I.width,I.height,$.Oa,$.ba))==0){t:{I=v;n:for(;;){if(I==null){I=0;break t}if(e(I.s.yc!=null),e(I.s.Ya!=null),e(0<I.s.Wb),e((P=I.l)!=null),e((j=P.ma)!=null),I.xb!=0){if(I.ca=j.ba,I.tb=j.tb,e(I.ca!=null),!Yg(j.Oa,P,H1)){I.a=2;break n}if(!ru(I,P.width)||P.da)break n;if((P.da||Tn(I.ca.S))&&Ee(),11>I.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),I.ca.f.kb.F!=null&&Ee()),I.Pb&&0<I.s.ua&&I.s.vb.X==null&&!wt(I.s.vb,I.s.Wa.Xa)){I.a=1;break n}I.xb=0}if(!Qs(I,I.V,I.Ba,I.c,I.i,P.o,q0))break n;j.Dc=I.Ma,I=1;break t}e(I.a!=0),I=0}I=!I}I&&(w=v.a)}else w=v.a}else{if((v=new ww)==null){$=1;break e}if(v.Fa=j.na,v.P=j.P,v.qc=j.Sa,v1(v,I)){if((w=ch(I.width,I.height,$.Oa,$.ba))==0){if(v.Aa=0,P=$.Oa,e((j=v)!=null),P!=null){if(0<(Z=0>(Z=P.Md)?0:100<Z?255:255*Z/100)){for(se=_e=0;4>se;++se)12>(Oe=j.pb[se]).lc&&(Oe.ia=Z*ZH[0>Oe.lc?0:Oe.lc]>>3),_e|=Oe.ia;_e&&(alert("todo:VP8InitRandom"),j.ia=1)}j.Ga=P.Id,100<j.Ga?j.Ga=100:0>j.Ga&&(j.Ga=0)}Mw(v,I)||(w=v.a)}}else w=v.a}w==0&&$.Oa!=null&&$.Oa.fd&&(w=Xg($.ba))}$=w}G=$!=0?null:11>G?q.f.RGBA.eb:q.f.kb.y}else G=null;return G};var v4=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(T,H){for(var te="",L=0;L<4;L++)te+=String.fromCharCode(T[H++]);return te}function d(T,H){return(T[H+0]<<0|T[H+1]<<8|T[H+2]<<16)>>>0}function h(T,H){return(T[H+0]<<0|T[H+1]<<8|T[H+2]<<16|T[H+3]<<24)>>>0}new l;var p=[0],g=[0],_=[],b=new l,C=i,y=function(T,H){var te={},L=0,z=!1,J=0,Q=0;if(te.frames=[],!function(ne,re,de,fe){for(var me=0;me<fe;me++)if(ne[re+me]!=de.charCodeAt(me))return!0;return!1}(T,H,"RIFF",4)){for(h(T,H+=4),H+=8;H<T.length;){var ce=c(T,H),X=h(T,H+=4);H+=4;var ie=X+(1&X);switch(ce){case"VP8 ":case"VP8L":te.frames[L]===void 0&&(te.frames[L]={}),(Ce=te.frames[L]).src_off=z?Q:H-8,Ce.src_size=J+X+8,L++,z&&(z=!1,J=0,Q=0);break;case"VP8X":(Ce=te.header={}).feature_flags=T[H];var oe=H+4;Ce.canvas_width=1+d(T,oe),oe+=3,Ce.canvas_height=1+d(T,oe),oe+=3;break;case"ALPH":z=!0,J=ie+8,Q=H-8;break;case"ANIM":(Ce=te.header).bgcolor=h(T,H),oe=H+4,Ce.loop_count=(Ne=T)[(R=oe)+0]<<0|Ne[R+1]<<8,oe+=2;break;case"ANMF":var le,Ce;(Ce=te.frames[L]={}).offset_x=2*d(T,H),H+=3,Ce.offset_y=2*d(T,H),H+=3,Ce.width=1+d(T,H),H+=3,Ce.height=1+d(T,H),H+=3,Ce.duration=d(T,H),H+=3,le=T[H++],Ce.dispose=1&le,Ce.blend=le>>1&1}ce!="ANMF"&&(H+=ie)}var Ne,R;return te}}(C,0);y.response=C,y.rgbaoutput=!0,y.dataurl=!1;var M=y.header?y.header:null,O=y.frames?y.frames:null;if(M){M.loop_counter=M.loop_count,p=[M.canvas_height],g=[M.canvas_width];for(var A=0;A<O.length&&O[A].blend!=0;A++);}var D=O[0],N=b.WebPDecodeRGBA(C,D.src_off,D.src_size,g,p);D.rgba=N,D.imgwidth=g[0],D.imgheight=p[0];for(var B=0;B<g[0]*p[0]*4;B++)_[B]=N[B];return this.width=g,this.height=p,this.data=_,this}(function(i){var e=function(){return typeof cy=="function"},t=function(p,g,_,b){var C=4,y=s;switch(b){case i.image_compression.FAST:C=1,y=o;break;case i.image_compression.MEDIUM:C=6,y=a;break;case i.image_compression.SLOW:C=9,y=l}p=n(p,g,_,y);var M=cy(p,{level:C});return i.__addimage__.arrayBufferToBinaryString(M)},n=function(p,g,_,b){for(var C,y,M,O=p.length/g,A=new Uint8Array(p.length+O),D=d(),N=0;N<O;N+=1){if(M=N*g,C=p.subarray(M,M+g),b)A.set(b(C,_,y),M+N);else{for(var B,T=D.length,H=[];B<T;B+=1)H[B]=D[B](C,_,y);var te=h(H.concat());A.set(H[te],M+N)}y=C}return A},r=function(p){var g=Array.apply([],p);return g.unshift(0),g},o=function(p,g){var _,b=[],C=p.length;b[0]=1;for(var y=0;y<C;y+=1)_=p[y-g]||0,b[y+1]=p[y]-_+256&255;return b},s=function(p,g,_){var b,C=[],y=p.length;C[0]=2;for(var M=0;M<y;M+=1)b=_&&_[M]||0,C[M+1]=p[M]-b+256&255;return C},a=function(p,g,_){var b,C,y=[],M=p.length;y[0]=3;for(var O=0;O<M;O+=1)b=p[O-g]||0,C=_&&_[O]||0,y[O+1]=p[O]+256-(b+C>>>1)&255;return y},l=function(p,g,_){var b,C,y,M,O=[],A=p.length;O[0]=4;for(var D=0;D<A;D+=1)b=p[D-g]||0,C=_&&_[D]||0,y=_&&_[D-g]||0,M=c(b,C,y),O[D+1]=p[D]-M+256&255;return O},c=function(p,g,_){if(p===g&&g===_)return p;var b=Math.abs(g-_),C=Math.abs(p-_),y=Math.abs(p+g-_-_);return b<=C&&b<=y?p:C<=y?g:_},d=function(){return[r,o,s,a,l]},h=function(p){var g=p.map(function(_){return _.reduce(function(b,C){return b+Math.abs(C)},0)});return g.indexOf(Math.min.apply(null,g))};i.processPNG=function(p,g,_,b){var C,y,M,O,A,D,N,B,T,H,te,L,z,J,Q,ce=this.decode.FLATE_DECODE,X="";if(this.__addimage__.isArrayBuffer(p)&&(p=new Uint8Array(p)),this.__addimage__.isArrayBufferView(p)){if(p=(M=new moe(p)).imgData,y=M.bits,C=M.colorSpace,A=M.colors,[4,6].indexOf(M.colorType)!==-1){if(M.bits===8){T=(B=M.pixelBitlength==32?new Uint32Array(M.decodePixels().buffer):M.pixelBitlength==16?new Uint16Array(M.decodePixels().buffer):new Uint8Array(M.decodePixels().buffer)).length,te=new Uint8Array(T*M.colors),H=new Uint8Array(T);var ie,oe=M.pixelBitlength-M.bits;for(J=0,Q=0;J<T;J++){for(z=B[J],ie=0;ie<oe;)te[Q++]=z>>>ie&255,ie+=M.bits;H[J]=z>>>ie&255}}if(M.bits===16){T=(B=new Uint32Array(M.decodePixels().buffer)).length,te=new Uint8Array(T*(32/M.pixelBitlength)*M.colors),H=new Uint8Array(T*(32/M.pixelBitlength)),L=M.colors>1,J=0,Q=0;for(var le=0;J<T;)z=B[J++],te[Q++]=z>>>0&255,L&&(te[Q++]=z>>>16&255,z=B[J++],te[Q++]=z>>>0&255),H[le++]=z>>>16&255;y=8}b!==i.image_compression.NONE&&e()?(p=t(te,M.width*M.colors,M.colors,b),N=t(H,M.width,1,b)):(p=te,N=H,ce=void 0)}if(M.colorType===3&&(C=this.color_spaces.INDEXED,D=M.palette,M.transparency.indexed)){var Ce=M.transparency.indexed,Ne=0;for(J=0,T=Ce.length;J<T;++J)Ne+=Ce[J];if((Ne/=255)===T-1&&Ce.indexOf(0)!==-1)O=[Ce.indexOf(0)];else if(Ne!==T){for(B=M.decodePixels(),H=new Uint8Array(B.length),J=0,T=B.length;J<T;J++)H[J]=Ce[B[J]];N=t(H,M.width,1)}}var R=function(ne){var re;switch(ne){case i.image_compression.FAST:re=11;break;case i.image_compression.MEDIUM:re=13;break;case i.image_compression.SLOW:re=14;break;default:re=12}return re}(b);return ce===this.decode.FLATE_DECODE&&(X="/Predictor "+R+" "),X+="/Colors "+A+" /BitsPerComponent "+y+" /Columns "+M.width,(this.__addimage__.isArrayBuffer(p)||this.__addimage__.isArrayBufferView(p))&&(p=this.__addimage__.arrayBufferToBinaryString(p)),(N&&this.__addimage__.isArrayBuffer(N)||this.__addimage__.isArrayBufferView(N))&&(N=this.__addimage__.arrayBufferToBinaryString(N)),{alias:_,data:p,index:g,filter:ce,decodeParameters:X,transparency:O,palette:D,sMask:N,predictor:R,width:M.width,height:M.height,bitsPerComponent:y,colorSpace:C}}}})(_t.API),function(i){i.processGIF89A=function(e,t,n,r){var o=new xoe(e),s=o.width,a=o.height,l=[];o.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:s,height:a},d=new W3(100).encode(c,100);return i.processJPEG.call(this,d,t,n,r)},i.processGIF87A=i.processGIF89A}(_t.API),Aa.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var i=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(i);for(var e=0;e<i;e++){var t=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:r,green:n,blue:t,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Aa.prototype.parseBGR=function(){this.pos=this.offset;try{var i="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[i]()}catch(t){ti.log("bit decode error:"+t)}},Aa.prototype.bit1=function(){var i,e=Math.ceil(this.width/8),t=e%4;for(i=this.height-1;i>=0;i--){for(var n=this.bottom_up?i:this.height-1-i,r=0;r<e;r++)for(var o=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+8*r*4,a=0;a<8&&8*r+a<this.width;a++){var l=this.palette[o>>7-a&1];this.data[s+4*a]=l.blue,this.data[s+4*a+1]=l.green,this.data[s+4*a+2]=l.red,this.data[s+4*a+3]=255}t!==0&&(this.pos+=4-t)}},Aa.prototype.bit4=function(){for(var i=Math.ceil(this.width/2),e=i%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,r=0;r<i;r++){var o=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+2*r*4,a=o>>4,l=15&o,c=this.palette[a];if(this.data[s]=c.blue,this.data[s+1]=c.green,this.data[s+2]=c.red,this.data[s+3]=255,2*r+1>=this.width)break;c=this.palette[l],this.data[s+4]=c.blue,this.data[s+4+1]=c.green,this.data[s+4+2]=c.red,this.data[s+4+3]=255}e!==0&&(this.pos+=4-e)}},Aa.prototype.bit8=function(){for(var i=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*n;if(r<this.palette.length){var s=this.palette[r];this.data[o]=s.red,this.data[o+1]=s.green,this.data[o+2]=s.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}i!==0&&(this.pos+=4-i)}},Aa.prototype.bit15=function(){for(var i=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(o&e)/e*255|0,a=(o>>5&e)/e*255|0,l=(o>>10&e)/e*255|0,c=o>>15?255:0,d=n*this.width*4+4*r;this.data[d]=l,this.data[d+1]=a,this.data[d+2]=s,this.data[d+3]=c}this.pos+=i}},Aa.prototype.bit16=function(){for(var i=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,o=0;o<this.width;o++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&e)/e*255|0,l=(s>>5&t)/t*255|0,c=(s>>11)/e*255|0,d=r*this.width*4+4*o;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=a,this.data[d+3]=255}this.pos+=i}},Aa.prototype.bit24=function(){for(var i=this.height-1;i>=0;i--){for(var e=this.bottom_up?i:this.height-1-i,t=0;t<this.width;t++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*t;this.data[s]=o,this.data[s+1]=r,this.data[s+2]=n,this.data[s+3]=255}this.pos+=this.width%4}},Aa.prototype.bit32=function(){for(var i=this.height-1;i>=0;i--)for(var e=this.bottom_up?i:this.height-1-i,t=0;t<this.width;t++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*t;this.data[a]=o,this.data[a+1]=r,this.data[a+2]=n,this.data[a+3]=s}},Aa.prototype.getData=function(){return this.data},function(i){i.processBMP=function(e,t,n,r){var o=new Aa(e,!1),s=o.width,a=o.height,l={data:o.getData(),width:s,height:a},c=new W3(100).encode(l,100);return i.processJPEG.call(this,c,t,n,r)}}(_t.API),aR.prototype.getData=function(){return this.data},function(i){i.processWEBP=function(e,t,n,r){var o=new aR(e),s=o.width,a=o.height,l={data:o.getData(),width:s,height:a},c=new W3(100).encode(l,100);return i.processJPEG.call(this,c,t,n,r)}}(_t.API),_t.API.processRGBA=function(i,e,t){for(var n=i.data,r=n.length,o=new Uint8Array(r/4*3),s=new Uint8Array(r/4),a=0,l=0,c=0;c<r;c+=4){var d=n[c],h=n[c+1],p=n[c+2],g=n[c+3];o[a++]=d,o[a++]=h,o[a++]=p,s[l++]=g}var _=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(s),data:_,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:i.width,height:i.height}},_t.API.setLanguage=function(i){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[i]!==void 0&&(this.internal.languageSettings.languageCode=i,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},qf=_t.API,fy=qf.getCharWidthsArray=function(i,e){var t,n,r=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),s=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:r.metadata.Unicode.widths,l=a.fof?a.fof:1,c=e.kerning?e.kerning:r.metadata.Unicode.kerning,d=c.fof?c.fof:1,h=e.doKerning!==!1,p=0,g=i.length,_=0,b=a[0]||l,C=[];for(t=0;t<g;t++)n=i.charCodeAt(t),typeof r.metadata.widthOfString=="function"?C.push((r.metadata.widthOfGlyph(r.metadata.characterToGlyph(n))+s*(1e3/o)||0)/1e3):(p=h&&$n(c[n])==="object"&&!isNaN(parseInt(c[n][_],10))?c[n][_]/d:0,C.push((a[n]||b)/l+p)),_=n;return C},iR=qf.getStringUnitWidth=function(i,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),r=e.charSpace||this.internal.getCharSpace();return qf.processArabic&&(i=qf.processArabic(i)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(i,t,r)/t:fy.apply(this,arguments).reduce(function(o,s){return o+s},0)},rR=function(i,e,t,n){for(var r=[],o=0,s=i.length,a=0;o!==s&&a+e[o]<t;)a+=e[o],o++;r.push(i.slice(0,o));var l=o;for(a=0;o!==s;)a+e[o]>n&&(r.push(i.slice(l,o)),a=0,l=o),a+=e[o],o++;return l!==o&&r.push(i.slice(l,o)),r},oR=function(i,e,t){t||(t={});var n,r,o,s,a,l,c,d=[],h=[d],p=t.textIndent||0,g=0,_=0,b=i.split(" "),C=fy.apply(this,[" ",t])[0];if(l=t.lineIndent===-1?b[0].length+2:t.lineIndent||0){var y=Array(l).join(" "),M=[];b.map(function(A){(A=A.split(/\s*\n/)).length>1?M=M.concat(A.map(function(D,N){return(N&&D.length?`
`:"")+D})):M.push(A[0])}),b=M,l=iR.apply(this,[y,t])}for(o=0,s=b.length;o<s;o++){var O=0;if(n=b[o],l&&n[0]==`
`&&(n=n.substr(1),O=1),p+g+(_=(r=fy.apply(this,[n,t])).reduce(function(A,D){return A+D},0))>e||O){if(_>e){for(a=rR.apply(this,[n,r,e-(p+g),e]),d.push(a.shift()),d=[a.pop()];a.length;)h.push([a.shift()]);_=r.slice(n.length-(d[0]?d[0].length:0)).reduce(function(A,D){return A+D},0)}else d=[n];h.push(d),p=_+l,g=C}else d.push(n),p+=g+_,g=C}return c=l?function(A,D){return(D?y:"")+A.join(" ")}:function(A){return A.join(" ")},h.map(c)},qf.splitTextToSize=function(i,e,t){var n,r=(t=t||{}).fontSize||this.internal.getFontSize(),o=function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var h=this.internal.getFont(d.fontName,d.fontStyle);return h.metadata.Unicode?{widths:h.metadata.Unicode.widths||{0:1},kerning:h.metadata.Unicode.kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,t);n=Array.isArray(i)?i:String(i).split(/\r?\n/);var s=1*this.internal.scaleFactor*e/r;o.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/r:0,o.lineIndent=t.lineIndent;var a,l,c=[];for(a=0,l=n.length;a<l;a++)c=c.concat(oR.apply(this,[n[a],s,o]));return c},function(i){i.__fontmetrics__=i.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},n={},r=0;r<e.length;r++)t[e[r]]="0123456789abcdef"[r],n["0123456789abcdef"[r]]=e[r];var o=function(h){return"0x"+parseInt(h,10).toString(16)},s=i.__fontmetrics__.compress=function(h){var p,g,_,b,C=["{"];for(var y in h){if(p=h[y],isNaN(parseInt(y,10))?g="'"+y+"'":(y=parseInt(y,10),g=(g=o(y).slice(2)).slice(0,-1)+n[g.slice(-1)]),typeof p=="number")p<0?(_=o(p).slice(3),b="-"):(_=o(p).slice(2),b=""),_=b+_.slice(0,-1)+n[_.slice(-1)];else{if($n(p)!=="object")throw new Error("Don't know what to do with value type "+$n(p)+".");_=s(p)}C.push(g+_)}return C.push("}"),C.join("")},a=i.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var p,g,_,b,C={},y=1,M=C,O=[],A="",D="",N=h.length-1,B=1;B<N;B+=1)(b=h[B])=="'"?p?(_=p.join(""),p=void 0):p=[]:p?p.push(b):b=="{"?(O.push([M,_]),M={},_=void 0):b=="}"?((g=O.pop())[0][g[1]]=M,_=void 0,M=g[0]):b=="-"?y=-1:_===void 0?t.hasOwnProperty(b)?(A+=t[b],_=parseInt(A,16)*y,y=1,A=""):A+=b:t.hasOwnProperty(b)?(D+=t[b],M[_]=parseInt(D,16)*y,y=1,_=void 0,D=""):D+=b;return C},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},d={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};i.events.push(["addFont",function(h){var p=h.font,g=d.Unicode[p.postScriptName];g&&(p.metadata.Unicode={},p.metadata.Unicode.widths=g.widths,p.metadata.Unicode.kerning=g.kerning);var _=c.Unicode[p.postScriptName];_&&(p.metadata.Unicode.encoding=_,p.encoding=_.codePages[0])}])}(_t.API),function(i){var e=function(t){for(var n=t.length,r=new Uint8Array(n),o=0;o<n;o++)r[o]=t.charCodeAt(o);return r};i.API.events.push(["addFont",function(t){var n=void 0,r=t.font,o=t.instance;if(!r.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");if(typeof(n=o.existsFileInVFS(r.postScriptName)===!1?o.loadFile(r.postScriptName):o.getFileFromVFS(r.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");(function(s,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(ox(a)),s.metadata=i.API.TTFFont.open(a),s.metadata.Unicode=s.metadata.Unicode||{encoding:{},kerning:{},widths:[]},s.metadata.glyIdsUsed=[0]})(r,n)}}])}(_t),function(i){function e(){return(Dt.canvg?Promise.resolve(Dt.canvg):import("./chunk-MGAJ7EIC.js")).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}_t.API.addSvgAsImage=function(t,n,r,o,s,a,l,c){if(isNaN(n)||isNaN(r))throw ti.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(o)||isNaN(s))throw ti.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=o,d.height=s;var h=d.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,d.width,d.height);var p={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return e().then(function(_){return _.fromString(h,t,p)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(_){return _.render(p)}).then(function(){g.addImage(d.toDataURL("image/jpeg",1),n,r,o,s,l,c)})}}(),_t.API.putTotalPages=function(i){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(i,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(i,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var r=0;r<this.internal.pages[n].length;r++)this.internal.pages[n][r]=this.internal.pages[n][r].replace(e,t);return this},_t.API.viewerPreferences=function(i,e){var t;i=i||{},e=e||!1;var n,r,o,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(s),l=[],c=0,d=0,h=0;function p(_,b){var C,y=!1;for(C=0;C<_.length;C+=1)_[C]===b&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,i==="reset"||e===!0){var g=a.length;for(h=0;h<g;h+=1)t[a[h]].value=t[a[h]].defaultValue,t[a[h]].explicitSet=!1}if($n(i)==="object"){for(r in i)if(o=i[r],p(a,r)&&o!==void 0){if(t[r].type==="boolean"&&typeof o=="boolean")t[r].value=o;else if(t[r].type==="name"&&p(t[r].valueSet,o))t[r].value=o;else if(t[r].type==="integer"&&Number.isInteger(o))t[r].value=o;else if(t[r].type==="array"){for(c=0;c<o.length;c+=1)if(n=!0,o[c].length===1&&typeof o[c][0]=="number")l.push(String(o[c]-1));else if(o[c].length>1){for(d=0;d<o[c].length;d+=1)typeof o[c][d]!="number"&&(n=!1);n===!0&&l.push([o[c][0]-1,o[c][1]-1].join(" "))}t[r].value="["+l.join(" ")+"]"}else t[r].value=t[r].defaultValue;t[r].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var _,b=[];for(_ in t)t[_].explicitSet===!0&&(t[_].type==="name"?b.push("/"+_+" /"+t[_].value):b.push("/"+_+" "+t[_].value));b.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+b.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(i){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',r=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(n)),s=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=o.length+s.length+a.length+r.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(r+o+s+a+l),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};i.addMetadata=function(n,r){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:r||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(_t.API),function(i){var e=i.API,t=e.pdfEscape16=function(o,s){for(var a,l=s.metadata.Unicode.widths,c=["","0","00","000","0000"],d=[""],h=0,p=o.length;h<p;++h){if(a=s.metadata.characterToGlyph(o.charCodeAt(h)),s.metadata.glyIdsUsed.push(a),s.metadata.toUnicode[a]=o.charCodeAt(h),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(s.metadata.widthOfGlyph(a),10)])),a=="0")return d.join("");a=a.toString(16),d.push(c[4-a.length],a)}return d.join("")},n=function(o){var s,a,l,c,d,h,p;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],h=0,p=(a=Object.keys(o).sort(function(g,_){return g-_})).length;h<p;h++)s=a[h],l.length>=100&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),o[s]!==void 0&&o[s]!==null&&typeof o[s].toString=="function"&&(c=("0000"+o[s].toString(16)).slice(-4),s=("0000"+(+s).toString(16)).slice(-4),l.push("<"+s+"><"+c+">"));return l.length&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(o){(function(s){var a=s.font,l=s.out,c=s.newObject,d=s.putStream;if(a.metadata instanceof i.API.TTFFont&&a.encoding==="Identity-H"){for(var h=a.metadata.Unicode.widths,p=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),g="",_=0;_<p.length;_++)g+=String.fromCharCode(p[_]);var b=c();d({data:g,addLength1:!0,objectId:b}),l("endobj");var C=c();d({data:n(a.metadata.toUnicode),addLength1:!0,objectId:C}),l("endobj");var y=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Yf(a.fontName)),l("/FontFile2 "+b+" 0 R"),l("/FontBBox "+i.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var M=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+Yf(a.fontName)),l("/FontDescriptor "+y+" 0 R"),l("/W "+i.API.PDFObject.convert(h)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+C+" 0 R"),l("/BaseFont /"+Yf(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+M+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(o)}]),e.events.push(["putFont",function(o){(function(s){var a=s.font,l=s.out,c=s.newObject,d=s.putStream;if(a.metadata instanceof i.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var h=a.metadata.rawData,p="",g=0;g<h.length;g++)p+=String.fromCharCode(h[g]);var _=c();d({data:p,addLength1:!0,objectId:_}),l("endobj");var b=c();d({data:n(a.metadata.toUnicode),addLength1:!0,objectId:b}),l("endobj");var C=c();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+_+" 0 R"),l("/Flags 96"),l("/FontBBox "+i.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+Yf(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=c();for(var y=0;y<a.metadata.hmtx.widths.length;y++)a.metadata.hmtx.widths[y]=parseInt(a.metadata.hmtx.widths[y]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+b+" 0 R/BaseFont/"+Yf(a.fontName)+"/FontDescriptor "+C+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+i.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(o)}]);var r=function(o){var s,a=o.text||"",l=o.x,c=o.y,d=o.options||{},h=o.mutex||{},p=h.pdfEscape,g=h.activeFontKey,_=h.fonts,b=g,C="",y=0,M="",O=_[b].encoding;if(_[b].encoding!=="Identity-H")return{text:a,x:l,y:c,options:d,mutex:h};for(M=a,b=g,Array.isArray(a)&&(M=a[0]),y=0;y<M.length;y+=1)_[b].metadata.hasOwnProperty("cmap")&&(s=_[b].metadata.cmap.unicode.codeMap[M[y].charCodeAt(0)]),s||M[y].charCodeAt(0)<256&&_[b].metadata.hasOwnProperty("Unicode")?C+=M[y]:C+="";var A="";return parseInt(b.slice(1))<14||O==="WinAnsiEncoding"?A=p(C,b).split("").map(function(D){return D.charCodeAt(0).toString(16)}).join(""):O==="Identity-H"&&(A=t(C,_[b])),h.isHex=!0,{text:A,x:l,y:c,options:d,mutex:h}};e.events.push(["postProcessText",function(o){var s=o.text||"",a=[],l={text:s,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(s)){var c=0;for(c=0;c<s.length;c+=1)Array.isArray(s[c])&&s[c].length===3?a.push([r(Object.assign({},l,{text:s[c][0]})).text,s[c][1],s[c][2]]):a.push(r(Object.assign({},l,{text:s[c]})).text);o.text=a}else o.text=r(Object.assign({},l,{text:s})).text}])}(_t),function(i){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};i.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},i.addFileToVFS=function(t,n){return e.call(this),this.internal.vFS[t]=n,this},i.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(_t.API),function(i){i.__bidiEngine__=i.prototype.__bidiEngine__=function(n){var r,o,s,a,l,c,d,h=e,p=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],_={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},b={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},C=["(",")","(","<",">","<","[","]","[","{","}","{","\xAB","\xBB","\xAB","\u2039","\u203A","\u2039","\u2045","\u2046","\u2045","\u207D","\u207E","\u207D","\u208D","\u208E","\u208D","\u2264","\u2265","\u2264","\u2329","\u232A","\u2329","\uFE59","\uFE5A","\uFE59","\uFE5B","\uFE5C","\uFE5B","\uFE5D","\uFE5E","\uFE5D","\uFE64","\uFE65","\uFE64"],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),M=!1,O=0;this.__bidiEngine__={};var A=function(L){var z=L.charCodeAt(),J=z>>8,Q=b[J];return Q!==void 0?h[256*Q+(255&z)]:J===252||J===253?"AL":y.test(J)?"L":J===8?"R":"N"},D=function(L){for(var z,J=0;J<L.length;J++){if((z=A(L.charAt(J)))==="L")return!1;if(z==="R")return!0}return!1},N=function(L,z,J,Q){var ce,X,ie,oe,le=z[Q];switch(le){case"L":case"R":M=!1;break;case"N":case"AN":break;case"EN":M&&(le="AN");break;case"AL":M=!0,le="R";break;case"WS":le="N";break;case"CS":Q<1||Q+1>=z.length||(ce=J[Q-1])!=="EN"&&ce!=="AN"||(X=z[Q+1])!=="EN"&&X!=="AN"?le="N":M&&(X="AN"),le=X===ce?X:"N";break;case"ES":le=(ce=Q>0?J[Q-1]:"B")==="EN"&&Q+1<z.length&&z[Q+1]==="EN"?"EN":"N";break;case"ET":if(Q>0&&J[Q-1]==="EN"){le="EN";break}if(M){le="N";break}for(ie=Q+1,oe=z.length;ie<oe&&z[ie]==="ET";)ie++;le=ie<oe&&z[ie]==="EN"?"EN":"N";break;case"NSM":if(s&&!a){for(oe=z.length,ie=Q+1;ie<oe&&z[ie]==="NSM";)ie++;if(ie<oe){var Ce=L[Q],Ne=Ce>=1425&&Ce<=2303||Ce===64286;if(ce=z[ie],Ne&&(ce==="R"||ce==="AL")){le="R";break}}}le=Q<1||(ce=z[Q-1])==="B"?"N":J[Q-1];break;case"B":M=!1,r=!0,le=O;break;case"S":o=!0,le="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":M=!1;break;case"BN":le="N"}return le},B=function(L,z,J){var Q=L.split("");return J&&T(Q,J,{hiLevel:O}),Q.reverse(),z&&z.reverse(),Q.join("")},T=function(L,z,J){var Q,ce,X,ie,oe,le=-1,Ce=L.length,Ne=0,R=[],ne=O?g:p,re=[];for(M=!1,r=!1,o=!1,ce=0;ce<Ce;ce++)re[ce]=A(L[ce]);for(X=0;X<Ce;X++){if(oe=Ne,R[X]=N(L,re,R,X),Q=240&(Ne=ne[oe][_[R[X]]]),Ne&=15,z[X]=ie=ne[Ne][5],Q>0)if(Q===16){for(ce=le;ce<X;ce++)z[ce]=1;le=-1}else le=-1;if(ne[Ne][6])le===-1&&(le=X);else if(le>-1){for(ce=le;ce<X;ce++)z[ce]=ie;le=-1}re[X]==="B"&&(z[X]=0),J.hiLevel|=ie}o&&function(de,fe,me){for(var Pe=0;Pe<me;Pe++)if(de[Pe]==="S"){fe[Pe]=O;for(var Me=Pe-1;Me>=0&&de[Me]==="WS";Me--)fe[Me]=O}}(re,z,Ce)},H=function(L,z,J,Q,ce){if(!(ce.hiLevel<L)){if(L===1&&O===1&&!r)return z.reverse(),void(J&&J.reverse());for(var X,ie,oe,le,Ce=z.length,Ne=0;Ne<Ce;){if(Q[Ne]>=L){for(oe=Ne+1;oe<Ce&&Q[oe]>=L;)oe++;for(le=Ne,ie=oe-1;le<ie;le++,ie--)X=z[le],z[le]=z[ie],z[ie]=X,J&&(X=J[le],J[le]=J[ie],J[ie]=X);Ne=oe}Ne++}}},te=function(L,z,J){var Q=L.split(""),ce={hiLevel:O};return J||(J=[]),T(Q,J,ce),function(X,ie,oe){if(oe.hiLevel!==0&&d)for(var le,Ce=0;Ce<X.length;Ce++)ie[Ce]===1&&(le=C.indexOf(X[Ce]))>=0&&(X[Ce]=C[le+1])}(Q,J,ce),H(2,Q,z,J,ce),H(1,Q,z,J,ce),Q.join("")};return this.__bidiEngine__.doBidiReorder=function(L,z,J){if(function(ce,X){if(X)for(var ie=0;ie<ce.length;ie++)X[ie]=ie;a===void 0&&(a=D(ce)),c===void 0&&(c=D(ce))}(L,z),s||!l||c)if(s&&l&&a^c)O=a?1:0,L=B(L,z,J);else if(!s&&l&&c)O=a?1:0,L=te(L,z,J),L=B(L,z);else if(!s||a||l||c){if(s&&!l&&a^c)L=B(L,z),a?(O=0,L=te(L,z,J)):(O=1,L=te(L,z,J),L=B(L,z));else if(s&&a&&!l&&c)O=1,L=te(L,z,J),L=B(L,z);else if(!s&&!l&&a^c){var Q=d;a?(O=1,L=te(L,z,J),O=0,d=!1,L=te(L,z,J),d=Q):(O=0,L=te(L,z,J),L=B(L,z),O=1,d=!1,L=te(L,z,J),d=Q,L=B(L,z))}}else O=0,L=te(L,z,J);else O=a?1:0,L=te(L,z,J);return L},this.__bidiEngine__.setOptions=function(L){L&&(s=L.isInputVisual,l=L.isOutputVisual,a=L.isInputRtl,c=L.isOutputRtl,d=L.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new i.__bidiEngine__({isInputVisual:!0});i.API.events.push(["postProcessText",function(n){var r=n.text;n.x,n.y;var o=n.options||{};n.mutex,o.lang;var s=[];if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,t.setOptions(o),Object.prototype.toString.call(r)==="[object Array]"){var a=0;for(s=[],a=0;a<r.length;a+=1)Object.prototype.toString.call(r[a])==="[object Array]"?s.push([t.doBidiReorder(r[a][0]),r[a][1],r[a][2]]):s.push([t.doBidiReorder(r[a])]);n.text=s}else n.text=t.doBidiReorder(r);t.setOptions({isInputVisual:!0})}])}(_t),_t.API.TTFFont=function(){function i(e){var t;if(this.rawData=e,t=this.contents=new Nd(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new Foe(this),this.registerTTF()}return i.open=function(e){return new i(e)},i.prototype.parse=function(){return this.directory=new _oe(this.contents),this.head=new boe(this),this.name=new Eoe(this),this.cmap=new vR(this),this.toUnicode={},this.hhea=new Coe(this),this.maxp=new Poe(this),this.hmtx=new Ooe(this),this.post=new woe(this),this.os2=new yoe(this),this.loca=new Doe(this),this.glyf=new Soe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},i.prototype.registerTTF=function(){var e,t,n,r,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var s,a,l,c;for(c=[],s=0,a=(l=this.bbox).length;s<a;s++)e=l[s],c.push(Math.round(e*this.scaleFactor));return c}.call(this),this.stemV=0,this.post.exists?(n=255&(r=this.post.italic_angle),(32768&(t=r>>16))!=0&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},i.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},i.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},i.prototype.widthOfString=function(e,t,n){var r,o,s,a;for(s=0,o=0,a=(e=""+e).length;0<=a?o<a:o>a;o=0<=a?++o:--o)r=e.charCodeAt(o),s+=this.widthOfGlyph(this.characterToGlyph(r))+n*(1e3/t)||0;return s*(t/1e3)},i.prototype.lineHeight=function(e,t){var n;return t==null&&(t=!1),n=t?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},i}();var Fa,Nd=function(){function i(e){this.data=e??[],this.pos=0,this.length=this.data.length}return i.prototype.readByte=function(){return this.data[this.pos++]},i.prototype.writeByte=function(e){return this.data[this.pos++]=e},i.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},i.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},i.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},i.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},i.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},i.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},i.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},i.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},i.prototype.readString=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)n[t]=String.fromCharCode(this.readByte());return n.join("")},i.prototype.writeString=function(e){var t,n,r;for(r=[],t=0,n=e.length;0<=n?t<n:t>n;t=0<=n?++t:--t)r.push(this.writeByte(e.charCodeAt(t)));return r},i.prototype.readShort=function(){return this.readInt16()},i.prototype.writeShort=function(e){return this.writeInt16(e)},i.prototype.readLongLong=function(){var e,t,n,r,o,s,a,l;return e=this.readByte(),t=this.readByte(),n=this.readByte(),r=this.readByte(),o=this.readByte(),s=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^n)+4294967296*(255^r)+16777216*(255^o)+65536*(255^s)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*t+1099511627776*n+4294967296*r+16777216*o+65536*s+256*a+l},i.prototype.writeLongLong=function(e){var t,n;return t=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},i.prototype.readInt=function(){return this.readInt32()},i.prototype.writeInt=function(e){return this.writeInt32(e)},i.prototype.read=function(e){var t,n;for(t=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)t.push(this.readByte());return t},i.prototype.write=function(e){var t,n,r,o;for(o=[],n=0,r=e.length;n<r;n++)t=e[n],o.push(this.writeByte(t));return o},i}(),_oe=function(){var i;function e(t){var n,r,o;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},r=0,o=this.tableCount;0<=o?r<o:r>o;r=0<=o?++r:--r)n={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(t){var n,r,o,s,a,l,c,d,h,p,g,_,b;for(b in g=Object.keys(t).length,l=Math.log(2),h=16*Math.floor(Math.log(g)/l),s=Math.floor(h/l),d=16*g-h,(r=new Nd).writeInt(this.scalarType),r.writeShort(g),r.writeShort(h),r.writeShort(s),r.writeShort(d),o=16*g,c=r.pos+o,a=null,_=[],t)for(p=t[b],r.writeString(b),r.writeInt(i(p)),r.writeInt(c),r.writeInt(p.length),_=_.concat(p),b==="head"&&(a=c),c+=p.length;c%4;)_.push(0),c++;return r.write(_),n=2981146554-i(r.data),r.pos=a+8,r.writeUInt32(n),r.data},i=function(t){var n,r,o,s;for(t=bR.call(t);t.length%4;)t.push(0);for(o=new Nd(t),r=0,n=0,s=t.length;n<s;n=n+=4)r+=o.readUInt32();return 4294967295&r},e}(),voe={}.hasOwnProperty,Ml=function(i,e){for(var t in e)voe.call(e,t)&&(i[t]=e[t]);function n(){this.constructor=i}return n.prototype=e.prototype,i.prototype=new n,i.__super__=e.prototype,i};Fa=function(){function i(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return i.prototype.parse=function(){},i.prototype.encode=function(){},i.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},i}();var boe=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return Ml(e,Fa),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var n;return(n=new Nd).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(t),n.writeShort(this.glyphDataFormat),n.data},e}(),lR=function(){function i(e,t){var n,r,o,s,a,l,c,d,h,p,g,_,b,C,y,M,O;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),h=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(g=e.readUInt16(),p=g/2,e.pos+=6,o=function(){var A,D;for(D=[],l=A=0;0<=p?A<p:A>p;l=0<=p?++A:--A)D.push(e.readUInt16());return D}(),e.pos+=2,b=function(){var A,D;for(D=[],l=A=0;0<=p?A<p:A>p;l=0<=p?++A:--A)D.push(e.readUInt16());return D}(),c=function(){var A,D;for(D=[],l=A=0;0<=p?A<p:A>p;l=0<=p?++A:--A)D.push(e.readUInt16());return D}(),d=function(){var A,D;for(D=[],l=A=0;0<=p?A<p:A>p;l=0<=p?++A:--A)D.push(e.readUInt16());return D}(),r=(this.length-e.pos+this.offset)/2,a=function(){var A,D;for(D=[],l=A=0;0<=r?A<r:A>r;l=0<=r?++A:--A)D.push(e.readUInt16());return D}(),l=y=0,O=o.length;y<O;l=++y)for(C=o[l],n=M=_=b[l];_<=C?M<=C:M>=C;n=_<=C?++M:--M)d[l]===0?s=n+c[l]:(s=a[d[l]/2+(n-_)-(p-l)]||0)!==0&&(s+=c[l]),this.codeMap[n]=65535&s}e.pos=h}return i.encode=function(e,t){var n,r,o,s,a,l,c,d,h,p,g,_,b,C,y,M,O,A,D,N,B,T,H,te,L,z,J,Q,ce,X,ie,oe,le,Ce,Ne,R,ne,re,de,fe,me,Pe,Me,Ue,He,Xe;switch(Q=new Nd,s=Object.keys(e).sort(function(Ye,wt){return Ye-wt}),t){case"macroman":for(b=0,C=function(){var Ye=[];for(_=0;_<256;++_)Ye.push(0);return Ye}(),M={0:0},o={},ce=0,le=s.length;ce<le;ce++)M[Me=e[r=s[ce]]]==null&&(M[Me]=++b),o[r]={old:e[r],new:M[e[r]]},C[r]=M[e[r]];return Q.writeUInt16(1),Q.writeUInt16(0),Q.writeUInt32(12),Q.writeUInt16(0),Q.writeUInt16(262),Q.writeUInt16(0),Q.write(C),{charMap:o,subtable:Q.data,maxGlyphID:b+1};case"unicode":for(z=[],h=[],O=0,M={},n={},y=c=null,X=0,Ce=s.length;X<Ce;X++)M[D=e[r=s[X]]]==null&&(M[D]=++O),n[r]={old:D,new:M[D]},a=M[D]-r,y!=null&&a===c||(y&&h.push(y),z.push(r),c=a),y=r;for(y&&h.push(y),h.push(65535),z.push(65535),te=2*(H=z.length),T=2*Math.pow(Math.log(H)/Math.LN2,2),p=Math.log(T/2)/Math.LN2,B=2*H-T,l=[],N=[],g=[],_=ie=0,Ne=z.length;ie<Ne;_=++ie){if(L=z[_],d=h[_],L===65535){l.push(0),N.push(0);break}if(L-(J=n[L].new)>=32768)for(l.push(0),N.push(2*(g.length+H-_)),r=oe=L;L<=d?oe<=d:oe>=d;r=L<=d?++oe:--oe)g.push(n[r].new);else l.push(J-L),N.push(0)}for(Q.writeUInt16(3),Q.writeUInt16(1),Q.writeUInt32(12),Q.writeUInt16(4),Q.writeUInt16(16+8*H+2*g.length),Q.writeUInt16(0),Q.writeUInt16(te),Q.writeUInt16(T),Q.writeUInt16(p),Q.writeUInt16(B),me=0,R=h.length;me<R;me++)r=h[me],Q.writeUInt16(r);for(Q.writeUInt16(0),Pe=0,ne=z.length;Pe<ne;Pe++)r=z[Pe],Q.writeUInt16(r);for(Ue=0,re=l.length;Ue<re;Ue++)a=l[Ue],Q.writeUInt16(a);for(He=0,de=N.length;He<de;He++)A=N[He],Q.writeUInt16(A);for(Xe=0,fe=g.length;Xe<fe;Xe++)b=g[Xe],Q.writeUInt16(b);return{charMap:n,subtable:Q.data,maxGlyphID:O+1}}},i}(),vR=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return Ml(e,Fa),e.prototype.tag="cmap",e.prototype.parse=function(t){var n,r,o;for(t.pos=this.offset,this.version=t.readUInt16(),o=t.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=o?r<o:r>o;r=0<=o?++r:--r)n=new lR(t,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},e.encode=function(t,n){var r,o;return n==null&&(n="macroman"),r=lR.encode(t,n),(o=new Nd).writeUInt16(0),o.writeUInt16(1),r.table=o.data.concat(r.subtable),r},e}(),Coe=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return Ml(e,Fa),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),yoe=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return Ml(e,Fa),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var n,r;for(r=[],n=0;n<10;++n)r.push(t.readByte());return r}(),this.charRange=function(){var n,r;for(r=[],n=0;n<4;++n)r.push(t.readInt());return r}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var n,r;for(r=[],n=0;n<2;n=++n)r.push(t.readInt());return r}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),woe=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return Ml(e,Fa),e.prototype.tag="post",e.prototype.parse=function(t){var n,r,o;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var s;for(r=t.readUInt16(),this.glyphNameIndex=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],o=[];t.pos<this.offset+this.length;)n=t.readByte(),o.push(this.names.push(t.readString(n)));return o;case 151552:return r=t.readUInt16(),this.offsets=t.read(r);case 196608:break;case 262144:return this.map=function(){var a,l,c;for(c=[],s=a=0,l=this.file.maxp.numGlyphs;0<=l?a<l:a>l;s=0<=l?++a:--a)c.push(t.readUInt32());return c}.call(this)}},e}(),Moe=function(i,e){this.raw=i,this.length=i.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},Eoe=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return Ml(e,Fa),e.prototype.tag="name",e.prototype.parse=function(t){var n,r,o,s,a,l,c,d,h,p,g;for(t.pos=this.offset,t.readShort(),n=t.readShort(),l=t.readShort(),r=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)r.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+l+t.readShort()});for(c={},s=h=0,p=r.length;h<p;s=++h)o=r[s],t.pos=o.offset,d=t.readString(o.length),a=new Moe(d,o),c[g=o.nameID]==null&&(c[g]=[]),c[o.nameID].push(a);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),Poe=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return Ml(e,Fa),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),Ooe=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return Ml(e,Fa),e.prototype.tag="hmtx",e.prototype.parse=function(t){var n,r,o,s,a,l,c;for(t.pos=this.offset,this.metrics=[],n=0,l=this.file.hhea.numberOfMetrics;0<=l?n<l:n>l;n=0<=l?++n:--n)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(o=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,h;for(h=[],n=d=0;0<=o?d<o:d>o;n=0<=o?++d:--d)h.push(t.readInt16());return h}(),this.widths=function(){var d,h,p,g;for(g=[],d=0,h=(p=this.metrics).length;d<h;d++)s=p[d],g.push(s.advance);return g}.call(this),r=this.widths[this.widths.length-1],c=[],n=a=0;0<=o?a<o:a>o;n=0<=o?++a:--a)c.push(this.widths.push(r));return c},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),bR=[].slice,Soe=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return Ml(e,Fa),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var n,r,o,s,a,l,c,d,h,p;return t in this.cache?this.cache[t]:(s=this.file.loca,n=this.file.contents,r=s.indexOf(t),(o=s.lengthOf(t))===0?this.cache[t]=null:(n.pos=this.offset+r,a=(l=new Nd(n.read(o))).readShort(),d=l.readShort(),p=l.readShort(),c=l.readShort(),h=l.readShort(),this.cache[t]=a===-1?new Aoe(l,d,p,c,h):new koe(l,a,d,p,c,h),this.cache[t]))},e.prototype.encode=function(t,n,r){var o,s,a,l,c;for(a=[],s=[],l=0,c=n.length;l<c;l++)o=t[n[l]],s.push(a.length),o&&(a=a.concat(o.encode(r)));return s.push(a.length),{table:a,offsets:s}},e}(),koe=function(){function i(e,t,n,r,o,s){this.raw=e,this.numberOfContours=t,this.xMin=n,this.yMin=r,this.xMax=o,this.yMax=s,this.compound=!1}return i.prototype.encode=function(){return this.raw.data},i}(),Aoe=function(){function i(e,t,n,r,o){var s,a;for(this.raw=e,this.xMin=t,this.yMin=n,this.xMax=r,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;a=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&a;)s.pos+=1&a?4:2,128&a?s.pos+=8:64&a?s.pos+=4:8&a&&(s.pos+=2)}return i.prototype.encode=function(){var e,t,n;for(t=new Nd(bR.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)t.pos=this.glyphOffsets[e];return t.data},i}(),Doe=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return Ml(e,Fa),e.prototype.tag="loca",e.prototype.parse=function(t){var n,r;return t.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?function(){var o,s;for(s=[],r=0,o=this.length;r<o;r+=2)s.push(2*t.readUInt16());return s}.call(this):function(){var o,s;for(s=[],r=0,o=this.length;r<o;r+=4)s.push(t.readUInt32());return s}.call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,n){for(var r=new Uint32Array(this.offsets.length),o=0,s=0,a=0;a<r.length;++a)if(r[a]=o,s<n.length&&n[s]==a){++s,r[a]=o;var l=this.offsets[a],c=this.offsets[a+1]-l;c>0&&(o+=c)}for(var d=new Array(4*r.length),h=0;h<r.length;++h)d[4*h+3]=255&r[h],d[4*h+2]=(65280&r[h])>>8,d[4*h+1]=(16711680&r[h])>>16,d[4*h]=(4278190080&r[h])>>24;return d},e}(),Foe=function(){function i(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return i.prototype.generateCmap=function(){var e,t,n,r,o;for(t in r=this.font.cmap.tables[0].codeMap,e={},o=this.subset)n=o[t],e[t]=r[n];return e},i.prototype.glyphsFor=function(e){var t,n,r,o,s,a,l;for(r={},s=0,a=e.length;s<a;s++)r[o=e[s]]=this.font.glyf.glyphFor(o);for(o in t=[],r)(n=r[o])!=null&&n.compound&&t.push.apply(t,n.glyphIDs);if(t.length>0)for(o in l=this.glyphsFor(t))n=l[o],r[o]=n;return r},i.prototype.encode=function(e,t){var n,r,o,s,a,l,c,d,h,p,g,_,b,C,y;for(r in n=vR.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(e),g={0:0},y=n.charMap)g[(l=y[r]).old]=l.new;for(_ in p=n.maxGlyphID,s)_ in g||(g[_]=p++);return d=function(M){var O,A;for(O in A={},M)A[M[O]]=O;return A}(g),h=Object.keys(d).sort(function(M,O){return M-O}),b=function(){var M,O,A;for(A=[],M=0,O=h.length;M<O;M++)a=h[M],A.push(d[a]);return A}(),o=this.font.glyf.encode(s,b,g),c=this.font.loca.encode(o.offsets,b),C={cmap:this.font.cmap.raw(),glyf:o.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(C["OS/2"]=this.font.os2.raw()),this.font.directory.encode(C)},i}();_t.API.PDFObject=function(){var i;function e(){}return i=function(t,n){return(Array(n+1).join("0")+t).slice(-n)},e.convert=function(t){var n,r,o,s;if(Array.isArray(t))return"["+function(){var a,l,c;for(c=[],a=0,l=t.length;a<l;a++)n=t[a],c.push(e.convert(n));return c}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t?.isString)return"("+t+")";if(t instanceof Date)return"(D:"+i(t.getUTCFullYear(),4)+i(t.getUTCMonth(),2)+i(t.getUTCDate(),2)+i(t.getUTCHours(),2)+i(t.getUTCMinutes(),2)+i(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(r in o=["<<"],t)s=t[r],o.push("/"+r+" "+e.convert(s));return o.push(">>"),o.join(`
`)}return""+t},e}();function Ioe(i,e){if(i&1){let t=Ae();u(0,"div",39)(1,"span",4),m(2,"Fosforlu Renkler:"),f(),u(3,"button",40),U("click",function(){K(t);let r=F();return Y(r.fosforluKalemModunuAc("sari"))}),f(),u(4,"button",41),U("click",function(){K(t);let r=F();return Y(r.fosforluKalemModunuAc("yesil"))}),f(),u(5,"button",42),U("click",function(){K(t);let r=F();return Y(r.fosforluKalemModunuAc("pembe"))}),f(),u(6,"button",43),U("click",function(){K(t);let r=F();return Y(r.fosforluKalemModunuAc("mavi"))}),f(),u(7,"button",44),U("click",function(){K(t);let r=F();return Y(r.fosforluKalemModunuAc("turuncu"))}),f()()}if(i&2){let t=F();x(3),xe("aktif",t.secilenFosforluRenk===t.fosforluRenkler.sari),x(),xe("aktif",t.secilenFosforluRenk===t.fosforluRenkler.yesil),x(),xe("aktif",t.secilenFosforluRenk===t.fosforluRenkler.pembe),x(),xe("aktif",t.secilenFosforluRenk===t.fosforluRenkler.mavi),x(),xe("aktif",t.secilenFosforluRenk===t.fosforluRenkler.turuncu)}}function Toe(i,e){if(i&1&&(u(0,"option",16),m(1),f()),i&2){let t=e.$implicit;S("value",t),x(),W(t)}}function Boe(i,e){if(i&1&&(u(0,"div",45),k(1,"canvas",46),f()),i&2){let t=e.index,n=F();xe("aktif-sayfa",n.currentPage===t+1),x(),S("id","canvas-"+(t+1))}}var Cy=class i{constructor(e){this.http=e}canvasInstances=[];sayfalar=[{}];currentPage=1;totalPages=1;ogrenciGruplari=[];secilenGrup="";kaydetmeIsleminde=!1;kalemRengi="#000000";kalemKalinligi=4;isTamEkran=!1;kalemKalinlikSecenekleri=[2,4,8,12,16];cizilebilir=!0;silgiModu=!1;fosforluKalemModu=!1;oncekiKalemRengi="#000000";oncekiKalemKalinligi=2;fosforluRenkler={sari:"#ffff0080",yesil:"#00ff0080",pembe:"#ff00ff80",mavi:"#00ffff80",turuncu:"#ffa50080"};secilenFosforluRenk="#ffff0080";sekilModu=!1;secilenSekil="";geciciSekil=null;baslangicX=0;baslangicY=0;resimYukleniyor=!1;ngOnInit(){document.body.classList.add("kalem-aktif"),this.getOgrenciGruplari()}getOgrenciGruplari(){let e="./server/api/ogrenciler_listesi.php",t="",n=localStorage.getItem("user")||sessionStorage.getItem("user");n&&(t=JSON.parse(n).token||""),console.log("\xD6\u011Frenci gruplar\u0131 API iste\u011Fi g\xF6nderiliyor:",e),this.http.get(e,{headers:{Authorization:`Bearer ${t}`}}).subscribe({next:r=>{if(console.log("API yan\u0131t\u0131:",r),r&&r.success&&r.data){let o=new Set;r.data.forEach(l=>{l.grubu&&typeof l.grubu=="string"&&l.grubu.trim()!==""&&o.add(l.grubu)}),this.ogrenciGruplari=Array.from(o).sort();let a=new Date().getFullYear();this.ogrenciGruplari.sort((l,c)=>{let d=l.includes(a.toString()),h=c.includes(a.toString());return d&&!h?-1:!d&&h?1:l.localeCompare(c)}),this.ogrenciGruplari.length===0&&(this.ogrenciGruplari=["9A S\u0131n\u0131f\u0131","10B S\u0131n\u0131f\u0131","11A S\u0131n\u0131f\u0131","12A S\u0131n\u0131f\u0131"]),console.log("\xD6\u011Frenci gruplar\u0131 y\xFCklendi:",this.ogrenciGruplari)}},error:r=>{console.error("Gruplar\u0131 getirme hatas\u0131:",r),r.status===0&&console.warn("A\u011F hatas\u0131 veya CORS sorunu olabilir. Alternatif \xE7\xF6z\xFCm uygulan\u0131yor...");let s=new Date().getFullYear(),a=["9A S\u0131n\u0131f\u0131","9B S\u0131n\u0131f\u0131","10A S\u0131n\u0131f\u0131","10B S\u0131n\u0131f\u0131","11A S\u0131n\u0131f\u0131","11B S\u0131n\u0131f\u0131","12A S\u0131n\u0131f\u0131","12B S\u0131n\u0131f\u0131",`${s} Bahar D\xF6nemi`,`${s} Yaz D\xF6nemi`,`${s} G\xFCz D\xF6nemi`];this.ogrenciGruplari=a,console.log("Varsay\u0131lan gruplar y\xFCklendi:",this.ogrenciGruplari)}})}ngAfterViewInit(){setTimeout(()=>{this.canvasOlustur(1)},500)}resimYukle(e){let t=e.target;if(t.files&&t.files.length>0){this.resimYukleniyor=!0;let n=new FileReader;n.onload=r=>{let o=new Image;o.onload=()=>{let s=this.canvasInstances[this.currentPage-1];if(s){this.sekilModu=!1,this.secilenSekil="",s.isDrawingMode=!1;let a=Math.min(o.width,s.width*.8),l=o.height*(a/o.width);ao.fromURL(r.target?.result,{crossOrigin:"anonymous"},c=>{c.set({left:(s.width-a)/2,top:(s.height-l)/2,scaleX:a/(c.width||1),scaleY:l/(c.height||1),selectable:!0,hasControls:!0,hasBorders:!0}),s.add(c),s.setActiveObject(c),s.renderAll(),this.resimYukleniyor=!1})}else console.error("Canvas bulunamad\u0131"),this.resimYukleniyor=!1},o.src=r.target?.result},n.onerror=()=>{console.error("Resim y\xFCkleme hatas\u0131"),this.resimYukleniyor=!1},n.readAsDataURL(t.files[0]),t.value=""}}sekilSec(e){this.secilenSekil===e?(this.secilenSekil="",this.sekilModu=!1,this.kalemModunuAc()):(this.secilenSekil=e,this.sekilModu=!0,this.silgiModu=!1,this.fosforluKalemModu=!1,this.cizilebilir=!1,document.body.classList.remove("kalem-aktif","silgi-aktif","el-imleci-aktif","fosforlu-kalem-aktif"),document.body.classList.add("sekil-ciz-aktif"),this.ayarlaSekilOlaylari())}ayarlaSekilOlaylari(){let e=this.canvasInstances[this.currentPage-1];e&&(e.off("mouse:down"),e.off("mouse:move"),e.off("mouse:up"),e.isDrawingMode=!1,e.on("mouse:down",t=>{let n=e.getPointer(t.e);this.baslangicX=n.x,this.baslangicY=n.y,this.geciciSekil=this.sekilOlustur(this.secilenSekil,n.x,n.y,n.x,n.y),this.geciciSekil&&e.add(this.geciciSekil)}),e.on("mouse:move",t=>{if(!this.geciciSekil)return;let n=e.getPointer(t.e);this.sekilGuncelle(this.geciciSekil,this.secilenSekil,this.baslangicX,this.baslangicY,n.x,n.y),e.renderAll()}),e.on("mouse:up",()=>{this.geciciSekil=null}))}sekilOlustur(e,t,n,r,o){if(!this.canvasInstances[this.currentPage-1])return null;let a=null;switch(e){case"cizgi":a=new uo([t,n,r,o],{stroke:this.kalemRengi,strokeWidth:this.kalemKalinligi,selectable:!0});break;case"dikdortgen":a=new co({left:Math.min(t,r),top:Math.min(n,o),width:Math.abs(r-t),height:Math.abs(o-n),stroke:this.kalemRengi,strokeWidth:this.kalemKalinligi,fill:"transparent",selectable:!0});break;case"daire":let l=Math.sqrt(Math.pow(r-t,2)+Math.pow(o-n,2))/2,c=(t+r)/2,d=(n+o)/2;a=new No({left:c-l,top:d-l,radius:l,stroke:this.kalemRengi,strokeWidth:this.kalemKalinligi,fill:"transparent",selectable:!0});break;case"ok":let h=new uo([t,n,r,o],{stroke:this.kalemRengi,strokeWidth:this.kalemKalinligi,selectable:!0}),p=Math.atan2(o-n,r-t),g=15,_=Math.PI/6,b=r-g*Math.cos(p-_),C=o-g*Math.sin(p-_),y=r-g*Math.cos(p+_),M=o-g*Math.sin(p+_),O=[{x:r,y:o},{x:b,y:C},{x:y,y:M}],A=new xl(O,{fill:this.kalemRengi,stroke:this.kalemRengi,strokeWidth:1,selectable:!0});a=new jo([h,A],{selectable:!0});break;case"ucgen":a=new zs({left:Math.min(t,r),top:Math.min(n,o),width:Math.abs(r-t),height:Math.abs(o-n),stroke:this.kalemRengi,strokeWidth:this.kalemKalinligi,fill:"transparent",selectable:!0});break}return a}sekilGuncelle(e,t,n,r,o,s){if(e)switch(t){case"cizgi":e instanceof uo&&e.set({x2:o,y2:s});break;case"dikdortgen":e instanceof co&&e.set({left:Math.min(n,o),top:Math.min(r,s),width:Math.abs(o-n),height:Math.abs(s-r)});break;case"daire":if(e instanceof No){let a=Math.sqrt(Math.pow(o-n,2)+Math.pow(s-r,2))/2,l=(n+o)/2,c=(r+s)/2;e.set({left:l-a,top:c-a,radius:a})}break;case"ok":if(e instanceof jo){let a=e.getObjects()[0];a&&a.set({x2:o,y2:s});let l=Math.atan2(s-r,o-n),c=15,d=Math.PI/6,h=o-c*Math.cos(l-d),p=s-c*Math.sin(l-d),g=o-c*Math.cos(l+d),_=s-c*Math.sin(l+d),b=e.getObjects()[1];b&&b.set("points",[{x:o,y:s},{x:h,y:p},{x:g,y:_}]),e.setCoords()}break;case"ucgen":e instanceof zs&&e.set({left:Math.min(n,o),top:Math.min(r,s),width:Math.abs(o-n),height:Math.abs(s-r)});break}}onResize(){this.canvasInstances.forEach((e,t)=>{e&&this.canvasBoyutlandir(t+1)})}hizliRenkSec(e){this.kalemRengi=e,this.silgiModu=!1,this.ayarlaKalemOzellikleri(),document.body.classList.add("kalem-aktif"),document.body.classList.remove("silgi-aktif")}canvasOlustur(e){try{let t=`canvas-${e}`,n=document.getElementById(t);if(!n){console.error(`Canvas element ${t} bulunamad\u0131`);return}let r=n.parentElement;r&&(n.width=r.clientWidth,n.height=r.clientHeight);let o=new kd(t,{isDrawingMode:!0,width:n.width,height:n.height,selection:!1,renderOnAddRemove:!0,interactive:!0,backgroundColor:"#ffffff"});this.canvasInstances.length<e?this.canvasInstances.push(o):this.canvasInstances[e-1]=o,this.ayarlaKalemOzellikleri(e),console.log(`Canvas ${e} olu\u015Fturuldu`,o)}catch(t){console.error(`Canvas ${e} olu\u015Fturma hatas\u0131:`,t)}}canvasBoyutlandir(e){let t=this.canvasInstances[e-1];if(t)try{let r=document.getElementById(`canvas-${e}`).parentElement;r&&(t.setWidth(r.clientWidth),t.setHeight(r.clientHeight),t.renderAll())}catch(n){console.error(`Canvas ${e} boyutland\u0131rma hatas\u0131:`,n)}}sayfaEkle(){this.sayfalar.push({}),this.totalPages=this.sayfalar.length,this.currentPage=this.totalPages,this.sayfayaGit(this.currentPage),setTimeout(()=>{this.canvasOlustur(this.currentPage)},100)}sayfaBas(){this.currentPage!==1&&(this.currentPage=1,this.sayfayaGit(1))}oncekiSayfa(){this.currentPage>1&&(this.currentPage--,this.sayfayaGit(this.currentPage))}sonrakiSayfa(){this.currentPage<this.totalPages&&(this.currentPage++,this.sayfayaGit(this.currentPage))}sayfaSon(){this.currentPage!==this.totalPages&&(this.currentPage=this.totalPages,this.sayfayaGit(this.totalPages))}sayfayaGit(e){document.querySelectorAll(".beyaz-tahta").forEach((n,r)=>{r+1===e?n.classList.add("aktif-sayfa"):n.classList.remove("aktif-sayfa")}),this.currentPage=e,this.canvasInstances[e-1]?this.ayarlaKalemOzellikleri(e):setTimeout(()=>{this.canvasOlustur(e)},100)}temizleSayfa(){let e=this.canvasInstances[this.currentPage-1];e&&(e.clear(),e.backgroundColor="#ffffff",e.renderAll())}toggleCizim(){this.sekilModu=!1,this.secilenSekil="",this.cizilebilir=!this.cizilebilir;let e=this.canvasInstances[this.currentPage-1];e&&(e.isDrawingMode=this.cizilebilir,this.cizilebilir||(e.off("mouse:down"),e.off("mouse:move"),e.off("mouse:up"))),this.cizilebilir?this.silgiModu?(document.body.classList.add("silgi-aktif"),document.body.classList.remove("kalem-aktif","el-imleci-aktif","sekil-ciz-aktif","fosforlu-kalem-aktif")):this.fosforluKalemModu?(document.body.classList.add("fosforlu-kalem-aktif"),document.body.classList.remove("kalem-aktif","silgi-aktif","el-imleci-aktif","sekil-ciz-aktif")):(document.body.classList.add("kalem-aktif"),document.body.classList.remove("silgi-aktif","el-imleci-aktif","sekil-ciz-aktif","fosforlu-kalem-aktif")):(document.body.classList.remove("kalem-aktif","silgi-aktif","sekil-ciz-aktif","fosforlu-kalem-aktif"),document.body.classList.add("el-imleci-aktif")),console.log("\xC7izim modu de\u011Fi\u015Ftirildi:",this.cizilebilir?"Kalem/Silgi/Fosforlu Aktif":"El \u0130mleci Aktif")}ayarlaKalemOzellikleri(e){let t=e||this.currentPage,n=this.canvasInstances[t-1];if(!n){console.log(`Canvas ${t} hen\xFCz haz\u0131r de\u011Fil`);return}n.isDrawingMode=this.cizilebilir,n.freeDrawingBrush||(n.freeDrawingBrush=new _c(n)),n.freeDrawingBrush.color=this.kalemRengi,n.freeDrawingBrush.width=this.kalemKalinligi;try{n.freeDrawingBrush.hasOwnProperty("getInk")&&(n.freeDrawingBrush.getInk=!1)}catch{console.log("getInk \xF6zelli\u011Fi bu fabric.js versiyonunda desteklenmiyor")}}silgiModunuAc(){if(this.sekilModu=!1,this.secilenSekil="",this.cizilebilir=!0,this.fosforluKalemModu=!1,!this.silgiModu){this.silgiModu=!0,this.oncekiKalemRengi=this.kalemRengi,this.oncekiKalemKalinligi=this.kalemKalinligi,this.kalemRengi="#ffffff",this.kalemKalinligi=Math.max(20,this.kalemKalinligi),this.ayarlaKalemOzellikleri(),document.body.classList.add("silgi-aktif"),document.body.classList.remove("kalem-aktif","el-imleci-aktif","sekil-ciz-aktif","fosforlu-kalem-aktif");let e=this.canvasInstances[this.currentPage-1];e&&(e.off("mouse:down"),e.off("mouse:move"),e.off("mouse:up"),e.isDrawingMode=!0)}}kalemModunuAc(){this.silgiModu=!1,this.fosforluKalemModu=!1,this.sekilModu=!1,this.secilenSekil="",this.cizilebilir=!0,this.kalemRengi=this.oncekiKalemRengi,this.kalemKalinligi=this.oncekiKalemKalinligi,this.ayarlaKalemOzellikleri(),document.body.classList.add("kalem-aktif"),document.body.classList.remove("silgi-aktif","el-imleci-aktif","sekil-ciz-aktif","fosforlu-kalem-aktif");let e=this.canvasInstances[this.currentPage-1];e&&(e.off("mouse:down"),e.off("mouse:move"),e.off("mouse:up"),e.isDrawingMode=!0)}fosforluKalemModunuAc(e){this.silgiModu=!1,this.sekilModu=!1,this.secilenSekil="",this.cizilebilir=!0,this.fosforluKalemModu=!0,this.fosforluKalemModu||(this.oncekiKalemRengi=this.kalemRengi,this.oncekiKalemKalinligi=this.kalemKalinligi),e&&this.fosforluRenkler[e]&&(this.secilenFosforluRenk=this.fosforluRenkler[e]),this.kalemRengi=this.secilenFosforluRenk,this.kalemKalinligi=16,this.ayarlaKalemOzellikleri(),document.body.classList.add("fosforlu-kalem-aktif"),document.body.classList.remove("kalem-aktif","silgi-aktif","el-imleci-aktif","sekil-ciz-aktif");let t=this.canvasInstances[this.currentPage-1];t&&(t.off("mouse:down"),t.off("mouse:move"),t.off("mouse:up"),t.isDrawingMode=!0,t.freeDrawingBrush&&(t.freeDrawingBrush.color=this.secilenFosforluRenk,t.freeDrawingBrush.width=16))}indirPDF(){this.kaydetmeIsleminde=!0;try{let e=new _t({orientation:"portrait",unit:"mm",format:"a4"}),t=n=>{if(n>this.totalPages){let r=new Date,o=`${r.getFullYear()}${(r.getMonth()+1).toString().padStart(2,"0")}${r.getDate().toString().padStart(2,"0")}`,s=this.secilenGrup?`${this.secilenGrup.replace(/\s+/g,"_")}_${o}.pdf`:`ders_notu_${o}.pdf`;e.save(s),this.kaydetmeIsleminde=!1;return}this.sayfayaGit(n),setTimeout(()=>{let r=this.canvasInstances[n-1];if(r){let o=r.toDataURL({format:"png",quality:.8,multiplier:1.5});n>1&&e.addPage(),e.addImage(o,"PNG",0,0,210,297),t(n+1)}else console.error(`Canvas ${n} bulunamad\u0131`),t(n+1)},200)};t(1)}catch(e){console.error("PDF olu\u015Fturma hatas\u0131:",e),alert("PDF olu\u015Fturulurken bir hata olu\u015Ftu!"),this.kaydetmeIsleminde=!1}}veritabaninaKaydet(){if(!this.secilenGrup){alert("L\xFCtfen bir \xF6\u011Frenci grubu se\xE7in!");return}this.kaydetmeIsleminde=!0,console.log("Kaydetme i\u015Flemi ba\u015Flat\u0131ld\u0131...");try{console.log("ADIM 2: PDF olu\u015Fturuluyor...");let e=new _t({orientation:"portrait",unit:"mm",format:"a4"}),t=new Date,n=`${t.getDate()}.${t.getMonth()+1}.${t.getFullYear()}`,r=`${this.secilenGrup} - ${n}`,o=`${this.secilenGrup.replace(/\s+/g,"_")}_${t.getFullYear()}${(t.getMonth()+1).toString().padStart(2,"0")}${t.getDate().toString().padStart(2,"0")}.pdf`;console.log("PDF Dosya ad\u0131:",r),console.log("Fiziksel dosya ad\u0131:",o),Ge(this,null,function*(){console.log("ADIM 3: Canvas sayfalar\u0131 PDF'e ekleniyor...");for(let C=1;C<=this.totalPages;C++){console.log(`Sayfa ${C}/${this.totalPages} i\u015Fleniyor...`),this.sayfayaGit(C),yield new Promise(M=>setTimeout(M,100));let y=this.canvasInstances[C-1];if(y){let M=y.toDataURL({format:"png",quality:.8,multiplier:1.5});C>1&&e.addPage(),e.addImage(M,"PNG",0,0,210,297),console.log(`Sayfa ${C} PDF'e eklendi.`)}else console.error(`Canvas ${C} bulunamad\u0131!`)}console.log("ADIM 4: PDF blob olarak haz\u0131rlan\u0131yor...");let a=e.output("blob");if(console.log("PDF blob boyutu:",a.size,"bytes"),!a||a.size<=0){alert("PDF olu\u015Fturulamad\u0131! PDF boyutu s\u0131f\u0131r."),this.kaydetmeIsleminde=!1;return}console.log("ADIM 5: FormData olu\u015Fturuluyor...");let l=new FormData;if(console.log("ADIM 6: Gerekli alanlar kontrol ediliyor..."),!r||r.trim()===""){alert("PDF ad\u0131 bo\u015F olamaz!"),this.kaydetmeIsleminde=!1;return}if(!this.secilenGrup||this.secilenGrup.trim()===""){alert("\xD6\u011Frenci grubu se\xE7ilmelidir!"),this.kaydetmeIsleminde=!1;return}console.log("ADIM 7: FormData alanlar\u0131 dolduruluyor..."),l.append("pdf_adi",r),l.append("ogrenci_grubu",this.secilenGrup),l.append("sayfa_sayisi",this.totalPages.toString()),console.log("ADIM 8: PDF dosyas\u0131 FormData'ya ekleniyor...");let c=new File([a],o,{type:"application/pdf",lastModified:Date.now()});if(!c||c.size<=0){alert("PDF dosyas\u0131 olu\u015Fturulamad\u0131 veya bo\u015F!"),this.kaydetmeIsleminde=!1;return}if(l.append("pdf_dosyasi",c,o),console.log("PDF dosyas\u0131 FormData'ya eklendi:",c.name,c.size,"bytes"),console.log("ADIM 9: Kapak sayfas\u0131 ekleye haz\u0131rlan\u0131yor..."),this.canvasInstances[0]){let C=this.canvasInstances[0].toDataURL({format:"png",quality:.8,multiplier:1.5}),y=this.dataURLtoBlob(C),M=new File([y],"kapak.png",{type:"image/png",lastModified:Date.now()});l.append("cizim_verisi",M,"kapak.png"),console.log("Kapak sayfas\u0131 FormData'ya eklendi:",M.size,"bytes")}else console.log("Kapak sayfas\u0131 canvas'\u0131 bulunamad\u0131. Kapak eklenmedi.");console.log("ADIM 10: FormData i\xE7eri\u011Fi kontrol ediliyor...");let d=!0,h=!1,p=!1,g=!1;if(l.forEach((C,y)=>{d=!1,console.log(`FormData i\xE7eri\u011Fi - ${y}:`,C instanceof File?`File (${C.name}, ${C.type}, ${C.size} bytes)`:C),y==="pdf_dosyasi"&&C instanceof File&&C.size>0&&(h=!0),y==="ogrenci_grubu"&&(p=!0),y==="pdf_adi"&&(g=!0)}),d){alert("FormData bo\u015F! Hi\xE7bir veri eklenemedi."),this.kaydetmeIsleminde=!1;return}if(!h){alert("PDF dosyas\u0131 FormData'ya eklenemedi!"),this.kaydetmeIsleminde=!1;return}if(!p){alert("\xD6\u011Frenci grubu FormData'ya eklenemedi!"),this.kaydetmeIsleminde=!1;return}if(!g){alert("PDF ad\u0131 FormData'ya eklenemedi!"),this.kaydetmeIsleminde=!1;return}console.log("ADIM 11: API URL haz\u0131rlan\u0131yor...");let _="https://www.kimyaogreniyorum.com/server/api/konu_anlatim_kaydet.php";console.log("API URL:",_),console.log("ADIM 12: HTTP iste\u011Fi g\xF6nderiliyor...");let b={reportProgress:!0,observe:"events",headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}};console.log("ADIM 12.1: \u0130stek ba\u015Flat\u0131l\u0131yor..."),this.http.post(_,l,{reportProgress:!0,observe:"events"}).subscribe({next:C=>{if(C.type===0)console.log("ADIM 12.2: \u0130stek g\xF6nderildi");else if(C.type===1){if(C.loaded&&C.total){let y=Math.round(100*C.loaded/C.total);console.log(`ADIM 12.3: Y\xFCkleme ilerlemesi: %${y} (${C.loaded}/${C.total} bytes)`)}}else if(C.type===4){console.log("ADIM 13: Yan\u0131t al\u0131nd\u0131 - ham veri:",C.body);try{let y=C.body;y&&y.success===!0?(console.log("\u0130\u015Flem ba\u015Far\u0131l\u0131:",y),alert(`Konu anlat\u0131m\u0131 "${this.secilenGrup}" i\xE7in ba\u015Far\u0131yla kaydedildi!`)):(console.warn("Sunucu hatas\u0131:",y),alert(`Kaydetme hatas\u0131: ${y?.error||"Sunucu yan\u0131t\u0131 beklenmeyen formatta"}`))}catch(y){console.error("Yan\u0131t i\u015Fleme hatas\u0131:",y),console.log("Ham yan\u0131t:",C.body),alert("Kaydetme i\u015Flemi s\u0131ras\u0131nda bir hata olu\u015Ftu. Sunucu yan\u0131t\u0131 i\u015Flenemedi.")}this.kaydetmeIsleminde=!1}},error:C=>{console.error("ADIM 13: Kaydetme hatas\u0131 - detayl\u0131:",C);let y="Kaydetme i\u015Flemi s\u0131ras\u0131nda bir hata olu\u015Ftu: ";if(C.status===0)y+="Sunucuya ba\u011Flan\u0131lamad\u0131. A\u011F ba\u011Flant\u0131n\u0131z\u0131 kontrol edin.";else if(C.status===413)y+="Dosya boyutu \xE7ok b\xFCy\xFCk. Daha k\xFC\xE7\xFCk bir dosya deneyin.";else if(C.status===400)y+="Ge\xE7ersiz istek. L\xFCtfen t\xFCm alanlar\u0131 kontrol edin.";else if(C.error)try{if(typeof C.error=="string")if(C.error.includes("<br />")||C.error.includes("<b>"))console.error("PHP hatas\u0131:",C.error),y+="Sunucu taraf\u0131nda PHP hatas\u0131 olu\u015Ftu. L\xFCtfen y\xF6neticinize ba\u015Fvurun.";else try{let M=JSON.parse(C.error);y+=M.error||"Bilinmeyen hata"}catch{y+=C.error||"Bilinmeyen hata"}else typeof C.error=="object"?y+=C.error.error||"Bilinmeyen hata":y+="Sunucu yan\u0131t\u0131 beklenmeyen formatta"}catch(M){y+=`Hata ayr\u0131\u015Ft\u0131r\u0131lamad\u0131: ${M.message}`}else y+=`Bilinmeyen bir hata olu\u015Ftu. Durum kodu: ${C.status}`;alert(y),console.log("Tam hata detaylar\u0131:",C),this.kaydetmeIsleminde=!1},complete:()=>{console.log("ADIM 14: \u0130stek tamamland\u0131"),this.kaydetmeIsleminde=!1}})})}catch(e){console.error("Beklenmeyen hata:",e),alert("\u0130\u015Flem s\u0131ras\u0131nda beklenmeyen bir hata olu\u015Ftu: "+(e instanceof Error?e.message:String(e))),this.kaydetmeIsleminde=!1}}dataURLtoBlob(e){let t=e.split(","),n=t[0].match(/:(.*?);/)?.[1]||"image/png",r=atob(t[1]),o=r.length,s=new Uint8Array(o);for(;o--;)s[o]=r.charCodeAt(o);return new Blob([s],{type:n})}beforeUnloadHandler(e){let t=!1;for(let n of this.canvasInstances)if(n&&n.getObjects().length>0){t=!0;break}return t?(e.returnValue="Sayfadan ayr\u0131lmak istedi\u011Finize emin misiniz? Yap\u0131lan de\u011Fi\u015Fiklikler kaybolabilir.",e.returnValue):!0}tamEkranModu(){if(this.isTamEkran)document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen();else{let e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}this.isTamEkran=!this.isTamEkran}static \u0275fac=function(t){return new(t||i)(ke(gt))};static \u0275cmp=Ke({type:i,selectors:[["app-konu-anlatim-sayfalari"]],hostBindings:function(t,n){t&1&&U("resize",function(o){return n.onResize(o)},!1,ad)("beforeunload",function(o){return n.beforeUnloadHandler(o)},!1,ad)},standalone:!1,decls:107,vars:47,consts:[[1,"konu-anlatim-container"],[1,"kontrol-paneli"],[1,"arac-grubu","cizim-araclari"],[1,"renk-secici"],[1,"arac-grup-label"],["title","K\u0131rm\u0131z\u0131",1,"renk-btn","kirmizi",3,"click"],["title","Mavi",1,"renk-btn","mavi",3,"click"],["title","Ye\u015Fil",1,"renk-btn","yesil",3,"click"],["title","Siyah",1,"renk-btn","siyah",3,"click"],["type","color","title","\xD6zel Renk Se\xE7",1,"renk-input",3,"ngModelChange","change","ngModel"],[1,"arac-grubu"],[1,"btn-modern",3,"click"],[1,"ikon"],[1,"btn-modern","fosforlu-btn",3,"click"],["class","arac-grubu fosforlu-renkler",4,"ngIf"],[1,"boyut-secici",3,"ngModelChange","change","ngModel"],[3,"value"],[1,"arac-grubu","sekil-grubu"],["title","\xC7izgi",1,"sekil-btn",3,"click"],["title","Dikd\xF6rtgen",1,"sekil-btn",3,"click"],["title","Daire",1,"sekil-btn",3,"click"],["title","Ok",1,"sekil-btn",3,"click"],["title","\xDC\xE7gen",1,"sekil-btn",3,"click"],[1,"btn-modern","temizle",3,"click"],[1,"btn-modern","tam-ekran",3,"click"],[1,"arac-grubu","kaydetme-bolumu"],[1,"grup-secici",3,"ngModelChange","ngModel"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],[1,"btn-modern","kaydet",3,"click","disabled"],[1,"btn-modern","indir",3,"click","disabled"],[1,"calisma-alani"],[1,"beyaz-tahta-container"],["class","beyaz-tahta",3,"aktif-sayfa",4,"ngFor","ngForOf"],[1,"sayfa-navigasyon"],[1,"footer-content"],[1,"btn-modern","btn-sayfa",3,"click"],[1,"btn-modern","btn-sayfa",3,"click","disabled"],[1,"sayfa-bilgisi"],[1,"arac-grubu","fosforlu-renkler"],["title","Sar\u0131",1,"fosforlu-renk-btn","sari",3,"click"],["title","Ye\u015Fil",1,"fosforlu-renk-btn","yesil",3,"click"],["title","Pembe",1,"fosforlu-renk-btn","pembe",3,"click"],["title","Mavi",1,"fosforlu-renk-btn","mavi",3,"click"],["title","Turuncu",1,"fosforlu-renk-btn","turuncu",3,"click"],[1,"beyaz-tahta"],[1,"drawing-canvas",3,"id"]],template:function(t,n){t&1&&(u(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),m(5,"Renkler:"),f(),u(6,"button",5),U("click",function(){return n.hizliRenkSec("#FF0000")}),f(),u(7,"button",6),U("click",function(){return n.hizliRenkSec("#0000FF")}),f(),u(8,"button",7),U("click",function(){return n.hizliRenkSec("#00AA00")}),f(),u(9,"button",8),U("click",function(){return n.hizliRenkSec("#000000")}),f(),u(10,"input",9),at("ngModelChange",function(o){return dt(n.kalemRengi,o)||(n.kalemRengi=o),o}),U("change",function(){return n.ayarlaKalemOzellikleri()}),f()(),u(11,"div",10)(12,"span",4),m(13,"Ara\xE7lar:"),f(),u(14,"button",11),U("click",function(){return n.kalemModunuAc()}),u(15,"i",12),m(16,"\u270F\uFE0F"),f(),m(17," Kalem "),f(),u(18,"button",13),U("click",function(){return n.fosforluKalemModunuAc()}),u(19,"i",12),m(20,"\u{1F58C}\uFE0F"),f(),m(21," Fosforlu "),f(),u(22,"button",11),U("click",function(){return n.silgiModunuAc()}),u(23,"i",12),m(24,"\u{1F9F9}"),f(),m(25," Silgi "),f(),u(26,"button",11),U("click",function(){return n.toggleCizim()}),u(27,"i",12),m(28,"\u{1F446}"),f(),m(29," El "),f()(),ee(30,Ioe,8,10,"div",14),u(31,"div",10)(32,"span",4),m(33,"Kal\u0131nl\u0131k:"),f(),u(34,"select",15),at("ngModelChange",function(o){return dt(n.kalemKalinligi,o)||(n.kalemKalinligi=o),o}),U("change",function(){return n.ayarlaKalemOzellikleri()}),u(35,"option",16),m(36,"\u0130nce (2px)"),f(),u(37,"option",16),m(38,"Normal (4px)"),f(),u(39,"option",16),m(40,"Kal\u0131n (8px)"),f(),u(41,"option",16),m(42,"\xC7ok Kal\u0131n (12px)"),f(),u(43,"option",16),m(44,"Ekstra Kal\u0131n (16px)"),f()()(),u(45,"div",17)(46,"span",4),m(47,"\u015Eekiller:"),f(),u(48,"button",18),U("click",function(){return n.sekilSec("cizgi")}),m(49," \u2571 "),f(),u(50,"button",19),U("click",function(){return n.sekilSec("dikdortgen")}),m(51," \u25A1 "),f(),u(52,"button",20),U("click",function(){return n.sekilSec("daire")}),m(53," \u25CB "),f(),u(54,"button",21),U("click",function(){return n.sekilSec("ok")}),m(55," \u2192 "),f(),u(56,"button",22),U("click",function(){return n.sekilSec("ucgen")}),m(57," \u25B3 "),f()()(),u(58,"div",10)(59,"button",23),U("click",function(){return n.temizleSayfa()}),u(60,"i",12),m(61,"\u{1F5D1}\uFE0F"),f(),m(62," Temizle "),f(),u(63,"button",11),U("click",function(){return n.sayfaEkle()}),u(64,"i",12),m(65,"\u2795"),f(),m(66," Yeni Sayfa "),f(),u(67,"button",24),U("click",function(){return n.tamEkranModu()}),u(68,"i",12),m(69),f(),m(70),f()(),u(71,"div",25)(72,"select",26),at("ngModelChange",function(o){return dt(n.secilenGrup,o)||(n.secilenGrup=o),o}),u(73,"option",27),m(74,"\xD6\u011Frenci Grubu Se\xE7in"),f(),ee(75,Toe,2,2,"option",28),f(),u(76,"button",29),U("click",function(){return n.veritabaninaKaydet()}),u(77,"i",12),m(78,"\u{1F4BE}"),f(),m(79),f(),u(80,"button",30),U("click",function(){return n.indirPDF()}),u(81,"i",12),m(82,"\u{1F4E5}"),f(),m(83),f()()(),u(84,"div",31)(85,"div",32),ee(86,Boe,2,3,"div",33),f()(),u(87,"div",34)(88,"div",35)(89,"button",36),U("click",function(){return n.sayfaBas()}),u(90,"i",12),m(91,"\u23EE\uFE0F"),f(),m(92," \u0130lk Sayfa "),f(),u(93,"button",37),U("click",function(){return n.oncekiSayfa()}),u(94,"i",12),m(95,"\u25C0\uFE0F"),f(),m(96," \xD6nceki "),f(),u(97,"span",38),m(98),f(),u(99,"button",37),U("click",function(){return n.sonrakiSayfa()}),u(100,"i",12),m(101,"\u25B6\uFE0F"),f(),m(102," Sonraki "),f(),u(103,"button",36),U("click",function(){return n.sayfaSon()}),u(104,"i",12),m(105,"\u23ED\uFE0F"),f(),m(106," Son Sayfa "),f()()()()),t&2&&(x(6),xe("aktif",n.kalemRengi==="#FF0000"),x(),xe("aktif",n.kalemRengi==="#0000FF"),x(),xe("aktif",n.kalemRengi==="#00AA00"),x(),xe("aktif",n.kalemRengi==="#000000"),x(),st("ngModel",n.kalemRengi),x(4),xe("aktif",!n.silgiModu&&!n.fosforluKalemModu&&n.cizilebilir&&!n.sekilModu),x(4),xe("aktif",n.fosforluKalemModu),x(4),xe("aktif",n.silgiModu),x(4),xe("aktif",!n.cizilebilir),x(4),S("ngIf",n.fosforluKalemModu),x(4),st("ngModel",n.kalemKalinligi),x(),S("value",2),x(2),S("value",4),x(2),S("value",8),x(2),S("value",12),x(2),S("value",16),x(5),xe("aktif",n.secilenSekil==="cizgi"),x(2),xe("aktif",n.secilenSekil==="dikdortgen"),x(2),xe("aktif",n.secilenSekil==="daire"),x(2),xe("aktif",n.secilenSekil==="ok"),x(2),xe("aktif",n.secilenSekil==="ucgen"),x(13),W(n.isTamEkran?"\u2913":"\u2922"),x(),he(" ",n.isTamEkran?"Tam Ekrandan \xC7\u0131k":"Tam Ekran"," "),x(2),st("ngModel",n.secilenGrup),x(3),S("ngForOf",n.ogrenciGruplari),x(),S("disabled",!n.secilenGrup||n.kaydetmeIsleminde),x(3),he(" ",n.kaydetmeIsleminde?"\u0130\u015Fleniyor, l\xFCtfen bekleyin...":"Veritaban\u0131na Kaydet"," "),x(),S("disabled",n.kaydetmeIsleminde),x(3),he(" ",n.kaydetmeIsleminde?"\u0130\u015Fleniyor...":"PDF \u0130ndir"," "),x(3),S("ngForOf",n.sayfalar),x(7),S("disabled",n.currentPage<=1),x(5),hn("Sayfa ",n.currentPage," / ",n.totalPages,""),x(),S("disabled",n.currentPage>=n.totalPages))},dependencies:[yt,lt,Kn,Yn,rn,qn,fn,Un],styles:[`@charset "UTF-8";.konu-anlatim-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;width:100%;overflow:hidden;font-family:Arial,sans-serif}.kontrol-paneli[_ngcontent-%COMP%]{position:sticky;top:0;z-index:100;background-color:#f8f9fa;border-bottom:1px solid #dee2e6;padding:10px 20px;display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;box-shadow:0 2px 10px #0000001a}.arac-grubu[_ngcontent-%COMP%]{display:flex;align-items:center;margin:5px 10px;flex-wrap:wrap;gap:5px}.renk-secici[_ngcontent-%COMP%]{display:flex;margin-right:10px;align-items:center;gap:5px}.renk-input[_ngcontent-%COMP%]{width:30px;height:30px;padding:0;border:none;border-radius:4px;cursor:pointer;margin-left:5px}.renk-btn[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%;margin:0 4px;cursor:pointer;border:2px solid #ddd}.renk-btn.aktif[_ngcontent-%COMP%]{border-color:#666;transform:scale(1.2)}.renk-btn.kirmizi[_ngcontent-%COMP%]{background-color:red}.renk-btn.mavi[_ngcontent-%COMP%]{background-color:#00f}.renk-btn.yesil[_ngcontent-%COMP%]{background-color:#0a0}.renk-btn.siyah[_ngcontent-%COMP%]{background-color:#000}.fosforlu-btn[_ngcontent-%COMP%]{position:relative}.fosforlu-btn.aktif[_ngcontent-%COMP%]{background-color:#f0f0f0}.fosforlu-btn.aktif[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-2px;left:50%;transform:translate(-50%);width:80%;height:3px;background-color:#ff0;border-radius:2px}.fosforlu-renkler[_ngcontent-%COMP%]{display:flex;align-items:center;padding:4px 8px;background-color:#f5f5f5;border-radius:4px;margin-top:4px}.fosforlu-renk-btn[_ngcontent-%COMP%]{width:28px;height:28px;border-radius:4px;margin:0 4px;cursor:pointer;border:2px solid transparent}.fosforlu-renk-btn.aktif[_ngcontent-%COMP%]{border-color:#666;transform:scale(1.1)}.fosforlu-renk-btn.sari[_ngcontent-%COMP%]{background-color:#ffff0080}.fosforlu-renk-btn.yesil[_ngcontent-%COMP%]{background-color:#00ff0080}.fosforlu-renk-btn.pembe[_ngcontent-%COMP%]{background-color:#ff00ff80}.fosforlu-renk-btn.mavi[_ngcontent-%COMP%]{background-color:#00ffff80}.fosforlu-renk-btn.turuncu[_ngcontent-%COMP%]{background-color:#ffa50080}body.fosforlu-kalem-aktif[_ngcontent-%COMP%]   .drawing-canvas[_ngcontent-%COMP%]{cursor:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="yellow" stroke="black" stroke-width="1" d="M7,14l-5.5,5.5 0.7,0.7 5.5,-5.5 -0.7,-0.7z M22,2l-3,3c-1,-1 -2,-1 -3,0l-13,13c-0.5,0.5 -0.5,1.5 0,2l1,1c0.5,0.5 1.5,0.5 2,0l13,-13c1,-1 1,-2 0,-3l3,-3 -0.7,-0.7z"/></svg>') 0 24,auto}.arac-grup-label[_ngcontent-%COMP%]{font-weight:700;color:#495057;font-size:.85rem;margin-right:5px;white-space:nowrap}.btn-modern[_ngcontent-%COMP%]{padding:8px 12px;border:none;background-color:#fff;color:#333;border-radius:4px;margin:0 2px;cursor:pointer;box-shadow:0 1px 3px #0000001a;transition:all .2s;display:flex;align-items:center;font-size:14px}.btn-modern[_ngcontent-%COMP%]:hover{background-color:#f0f0f0;transform:translateY(-1px);box-shadow:0 2px 5px #00000026}.btn-modern.aktif[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.btn-modern.temizle[_ngcontent-%COMP%]{background-color:#f44336;color:#fff}.btn-modern.kaydet[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.btn-modern.indir[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.sekme-butonlari[_ngcontent-%COMP%]{display:flex;gap:5px;margin-bottom:5px}.sekme-btn[_ngcontent-%COMP%]{padding:6px 12px;border:none;background-color:#e9ecef;color:#495057;border-radius:4px 4px 0 0;cursor:pointer;transition:all .2s}.sekme-btn.aktif[_ngcontent-%COMP%]{background-color:#fff;color:#007bff;border-bottom:2px solid #007bff}.ikon[_ngcontent-%COMP%]{margin-right:5px;font-style:normal}.boyut-secici[_ngcontent-%COMP%]{padding:5px;border-radius:4px;border:1px solid #ccc;margin-left:5px}.grup-secici[_ngcontent-%COMP%]{padding:8px;border-radius:4px;border:1px solid #ccc;margin-right:10px;min-width:150px}.calisma-alani[_ngcontent-%COMP%]{flex:1;overflow:auto;position:relative;padding:20px;background-color:#f9f9f9}.beyaz-tahta-container[_ngcontent-%COMP%]{position:relative;height:100%;width:100%;display:flex;justify-content:center}.beyaz-tahta[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #eaeaea;border-radius:8px;box-shadow:0 4px 8px #0000000d;width:100%;height:1300px;margin:0 auto;display:none;position:relative}.aktif-sayfa[_ngcontent-%COMP%]{display:block}.drawing-canvas[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%}.sayfa-navigasyon[_ngcontent-%COMP%]{position:sticky;bottom:0;background-color:#f8f9fa;border-top:1px solid #dee2e6;padding:10px 20px;display:flex;justify-content:center;align-items:center;z-index:100;box-shadow:0 -2px 5px #0000001a}.footer-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.sayfa-bilgisi[_ngcontent-%COMP%]{margin:0 15px;font-weight:700;font-size:16px}body.kalem-aktif[_ngcontent-%COMP%]   .drawing-canvas[_ngcontent-%COMP%]{cursor:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="%23000000" d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/></svg>') 0 24,auto}body.silgi-aktif[_ngcontent-%COMP%]   .drawing-canvas[_ngcontent-%COMP%]{cursor:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="%23000000" d="M15.14 3c-.51 0-1.02.2-1.41.59L2.59 14.73c-.78.77-.78 2.04 0 2.83L5.03 20h7.94l-1.72-1.72-4.47.01-1.41-1.41 8.84-8.84 1.42 1.41 1.72-1.72-5.47-5.47c-.39-.39-.9-.59-1.41-.59M21 19.5c0 .83-.67 1.5-1.5 1.5h-5.25l1.73-1.73 3.52-.01V19.5z"/></svg>') 0 24,auto}body.el-imleci-aktif[_ngcontent-%COMP%]   .drawing-canvas[_ngcontent-%COMP%]{cursor:grab}body.sekil-ciz-aktif[_ngcontent-%COMP%]   .drawing-canvas[_ngcontent-%COMP%]{cursor:crosshair}.sekil-grubu[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:5px;align-items:center}.sekil-btn[_ngcontent-%COMP%]{width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:4px;background-color:#fff;border:1px solid #ccc;cursor:pointer;transition:all .2s}.sekil-btn[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}.sekil-btn.aktif[_ngcontent-%COMP%]{background-color:#e6f0ff;border-color:#007bff}@media (max-width: 768px){.kontrol-paneli[_ngcontent-%COMP%], .sayfa-navigasyon[_ngcontent-%COMP%]{padding:5px}.arac-grubu[_ngcontent-%COMP%]{margin:3px}.btn-modern[_ngcontent-%COMP%]{padding:5px 8px;font-size:12px}.sayfa-bilgisi[_ngcontent-%COMP%]{font-size:14px;margin:0 5px}}.yukleme-gostergesi[_ngcontent-%COMP%]{color:#007bff;margin-left:10px;display:flex;align-items:center;gap:5px}.canvas-container[_ngcontent-%COMP%]   .canvas-controls[_ngcontent-%COMP%]{opacity:.8!important}.btn-modern.tam-ekran[_ngcontent-%COMP%]{background-color:#3498db;color:#fff}.btn-modern.tam-ekran[_ngcontent-%COMP%]:hover{background-color:#2980b9}body.tam-ekran-modu[_ngcontent-%COMP%]   .kontrol-paneli[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;z-index:1000;background-color:#f8f9faf2;box-shadow:0 2px 10px #0003}body.tam-ekran-modu[_ngcontent-%COMP%]   .calisma-alani[_ngcontent-%COMP%]{padding-top:70px;height:calc(100vh - 130px)}body.tam-ekran-modu[_ngcontent-%COMP%]   .sayfa-navigasyon[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;right:0;z-index:1000;background-color:#f8f9faf2;box-shadow:0 -2px 10px #0003}body.tam-ekran-modu[_ngcontent-%COMP%]   .beyaz-tahta[_ngcontent-%COMP%]{max-height:calc(100vh - 150px);overflow:auto}`]})};var tg=()=>({standalone:!0}),Noe=()=>["VARCHAR","CHAR","DECIMAL","INT"];function Loe(i,e){i&1&&(u(0,"div",41),m(1," L\xFCtfen ge\xE7erli bir tablo ad\u0131 girin. "),f())}function Roe(i,e){if(i&1&&(u(0,"option",53),m(1),f()),i&2){let t=e.$implicit;S("value",t),x(),W(t)}}function zoe(i,e){if(i&1){let t=Ae();u(0,"tr")(1,"td")(2,"input",42),at("ngModelChange",function(r){let o=K(t).$implicit;return dt(o.name,r)||(o.name=r),Y(r)}),U("input",function(){K(t);let r=F();return Y(r.updateSqlPreview())}),f()(),u(3,"td")(4,"select",43),at("ngModelChange",function(r){let o=K(t).$implicit;return dt(o.type,r)||(o.type=r),Y(r)}),U("change",function(){K(t);let r=F();return Y(r.updateSqlPreview())}),ee(5,Roe,2,2,"option",44),f()(),u(6,"td")(7,"input",45),at("ngModelChange",function(r){let o=K(t).$implicit;return dt(o.length,r)||(o.length=r),Y(r)}),U("input",function(){K(t);let r=F();return Y(r.updateSqlPreview())}),f()(),u(8,"td",46)(9,"div",47)(10,"input",48),at("ngModelChange",function(r){let o=K(t).$implicit;return dt(o.notNull,r)||(o.notNull=r),Y(r)}),U("change",function(){K(t);let r=F();return Y(r.updateSqlPreview())}),f(),u(11,"label",49),m(12,"NOT NULL"),f()(),u(13,"div",47)(14,"input",48),at("ngModelChange",function(r){let o=K(t).$implicit;return dt(o.primaryKey,r)||(o.primaryKey=r),Y(r)}),U("change",function(){K(t);let r=F();return Y(r.updateSqlPreview())}),f(),u(15,"label",49),m(16,"PRIMARY KEY"),f()(),u(17,"div",47)(18,"input",50),at("ngModelChange",function(r){let o=K(t).$implicit;return dt(o.autoIncrement,r)||(o.autoIncrement=r),Y(r)}),U("change",function(){K(t);let r=F();return Y(r.updateSqlPreview())}),f(),u(19,"label",49),m(20,"AUTO_INCREMENT"),f()()(),u(21,"td",46)(22,"button",51),U("click",function(){let r=K(t).index,o=F();return Y(o.removeColumn(r))}),k(23,"i",52),f()()()}if(i&2){let t=e.$implicit,n=e.index,r=F();x(2),st("ngModel",t.name),S("ngModelOptions",rl(28,tg)),x(2),st("ngModel",t.type),S("ngModelOptions",rl(29,tg)),x(),S("ngForOf",r.availableTypes),x(2),st("ngModel",t.length),S("ngModelOptions",rl(30,tg))("disabled",!rl(31,Noe).includes(t.type)),x(3),sc("id","notNull",n,""),st("ngModel",t.notNull),S("ngModelOptions",rl(32,tg)),x(),sc("for","notNull",n,""),x(3),sc("id","primaryKey",n,""),st("ngModel",t.primaryKey),S("ngModelOptions",rl(33,tg)),x(),sc("for","primaryKey",n,""),x(3),sc("id","autoIncrement",n,""),st("ngModel",t.autoIncrement),S("ngModelOptions",rl(34,tg))("disabled",t.type!=="INT"),x(),sc("for","autoIncrement",n,""),x(3),S("disabled",r.columns.length===1)}}function joe(i,e){i&1&&k(0,"span",54)}function Voe(i,e){i&1&&k(0,"i",55)}function Uoe(i,e){if(i&1&&(u(0,"div",56),k(1,"i",57),m(2),f()),i&2){let t=F();x(2),he(" ",t.errorMessage," ")}}function Hoe(i,e){i&1&&(u(0,"div",58),k(1,"i",59),m(2," Tablo ba\u015Far\u0131yla olu\u015Fturuldu. "),f())}var yy=class i{constructor(e,t){this.http=e;this.fb=t;this.createTableForm=this.fb.group({tableName:["",[fi.required,fi.pattern("^[a-zA-Z][a-zA-Z0-9_]*$")]],databaseName:["kimyaogreniyorum",fi.required]})}tableName="";columns=[];availableTypes=["INT","VARCHAR","TEXT","DATE","DATETIME","FLOAT","DOUBLE","BOOLEAN","ENUM","JSON","BLOB","LONGTEXT","DECIMAL","TIMESTAMP"];sqlPreview="";createTableForm;isLoading=!1;isSuccess=!1;errorMessage="";ngOnInit(){this.addColumn(),this.updateSqlPreview()}addColumn(){this.columns.push({name:"",type:"VARCHAR",length:"255",notNull:!1,primaryKey:!1,autoIncrement:!1}),this.updateSqlPreview()}removeColumn(e){this.columns.splice(e,1),this.updateSqlPreview()}updateSqlPreview(){if(!this.createTableForm.value.tableName){this.sqlPreview="";return}let e=`CREATE TABLE ${this.createTableForm.value.tableName} (
`,t=this.columns.filter(r=>r.name.trim()!=="");if(t.length===0){this.sqlPreview="";return}let n=t.map(r=>{let o=`  ${r.name} ${r.type}`;return["VARCHAR","CHAR","DECIMAL","INT"].includes(r.type)&&r.length&&(o+=`(${r.length})`),r.notNull&&(o+=" NOT NULL"),r.primaryKey&&(o+=" PRIMARY KEY"),r.autoIncrement&&(o+=" AUTO_INCREMENT"),o});e+=n.join(`,
`),e+=`
);`,this.sqlPreview=e}createTable(){if(this.createTableForm.invalid){this.errorMessage="L\xFCtfen tablo ad\u0131n\u0131 do\u011Fru formatta girin (harf ile ba\u015Flamal\u0131, sadece harf, rakam ve alt \xE7izgi i\xE7erebilir).";return}let e=this.columns.filter(t=>t.name.trim()!=="");if(e.length===0){this.errorMessage="En az bir kolon eklemelisiniz.";return}this.isLoading=!0,this.isSuccess=!1,this.errorMessage="",this.http.post("./server/api/create_table.php",{tableName:this.createTableForm.value.tableName,databaseName:this.createTableForm.value.databaseName,columns:e}).subscribe({next:t=>{this.isLoading=!1,t.success?(this.isSuccess=!0,this.columns=[{name:"",type:"VARCHAR",length:"255",notNull:!1,primaryKey:!1,autoIncrement:!1}],this.createTableForm.get("tableName")?.setValue(""),this.updateSqlPreview()):this.errorMessage=t.message||"Tablo olu\u015Fturulurken bir hata olu\u015Ftu."},error:t=>{this.isLoading=!1,this.errorMessage="Sunucu hatas\u0131: "+(t.message||"Bilinmeyen bir hata olu\u015Ftu."),console.error("API hatas\u0131:",t)}})}resetForm(){this.createTableForm.reset({tableName:"",databaseName:"kimyaogreniyorum"}),this.columns=[{name:"",type:"VARCHAR",length:"255",notNull:!1,primaryKey:!1,autoIncrement:!1}],this.updateSqlPreview(),this.isSuccess=!1,this.errorMessage=""}formatSql(){return this.sqlPreview.replace(/\n/g,"<br>").replace(/ /g,"&nbsp;")}static \u0275fac=function(t){return new(t||i)(ke(gt),ke(ul))};static \u0275cmp=Ke({type:i,selectors:[["app-mysql-sayfasi"]],standalone:!1,decls:66,vars:9,consts:[[1,"container-fluid","mysql-creator"],[1,"row"],[1,"col-12"],[1,"card","mb-4"],[1,"card-header","bg-primary","text-white"],[1,"mb-0"],[1,"fas","fa-database","me-2"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"row","mb-4"],[1,"col-md-6"],["for","databaseName",1,"form-label"],["type","text","id","databaseName","formControlName","databaseName","readonly","",1,"form-control"],["for","tableName",1,"form-label"],["type","text","id","tableName","formControlName","tableName","placeholder","Tablo ad\u0131n\u0131 girin",1,"form-control",3,"input"],[1,"text-muted"],["class","text-danger mt-1",4,"ngIf"],[1,"card-header","bg-light"],[1,"card-body","p-0"],[1,"table-responsive"],[1,"table","table-striped","table-hover","mb-0"],[1,"table-light"],["scope","col","width","25%"],["scope","col","width","20%"],["scope","col","width","15%"],["scope","col","width","30%",1,"text-center"],["scope","col","width","10%",1,"text-center"],[4,"ngFor","ngForOf"],[1,"card-footer","bg-light"],["type","button",1,"btn","btn-success",3,"click"],[1,"fas","fa-plus","me-1"],[1,"fas","fa-code","me-2"],[1,"sql-preview","text-light","rounded"],[1,"d-flex","justify-content-between"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"fas","fa-undo","me-2"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm me-2","role","status","aria-hidden","true",4,"ngIf"],["class","fas fa-save me-2",4,"ngIf"],["class","alert alert-danger mt-4",4,"ngIf"],["class","alert alert-success mt-4",4,"ngIf"],[1,"text-danger","mt-1"],["type","text","placeholder","Kolon ad\u0131",1,"form-control",3,"ngModelChange","input","ngModel","ngModelOptions"],[1,"form-select",3,"ngModelChange","change","ngModel","ngModelOptions"],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","Uzunluk",1,"form-control",3,"ngModelChange","input","ngModel","ngModelOptions","disabled"],[1,"text-center"],[1,"form-check","form-check-inline"],["type","checkbox",1,"form-check-input",3,"ngModelChange","change","ngModel","ngModelOptions","id"],[1,"form-check-label",3,"for"],["type","checkbox",1,"form-check-input",3,"ngModelChange","change","ngModel","ngModelOptions","id","disabled"],["type","button",1,"btn","btn-danger","btn-sm",3,"click","disabled"],[1,"fas","fa-trash"],[3,"value"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"],[1,"fas","fa-save","me-2"],[1,"alert","alert-danger","mt-4"],[1,"fas","fa-exclamation-triangle","me-2"],[1,"alert","alert-success","mt-4"],[1,"fas","fa-check-circle","me-2"]],template:function(t,n){if(t&1&&(u(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3",5),k(6,"i",6),m(7,"MySQL Tablo Olu\u015Fturucu"),f()(),u(8,"div",7)(9,"form",8),U("ngSubmit",function(){return n.createTable()}),u(10,"div",9)(11,"div",10)(12,"label",11),m(13,"Veritaban\u0131 Ad\u0131"),f(),k(14,"input",12),f(),u(15,"div",10)(16,"label",13),m(17,"Tablo Ad\u0131"),f(),u(18,"input",14),U("input",function(){return n.updateSqlPreview()}),f(),u(19,"small",15),m(20,"Tablo ad\u0131 harf ile ba\u015Flamal\u0131 ve sadece harf, rakam ve alt \xE7izgi i\xE7erebilir."),f(),ee(21,Loe,2,0,"div",16),f()(),u(22,"div",3)(23,"div",17)(24,"h5",5),m(25,"Kolonlar"),f()(),u(26,"div",18)(27,"div",19)(28,"table",20)(29,"thead",21)(30,"tr")(31,"th",22),m(32,"Kolon Ad\u0131"),f(),u(33,"th",23),m(34,"Veri Tipi"),f(),u(35,"th",24),m(36,"Uzunluk"),f(),u(37,"th",25),m(38,"\xD6zellikler"),f(),u(39,"th",26),m(40,"\u0130\u015Flemler"),f()()(),u(41,"tbody"),ee(42,zoe,24,35,"tr",27),f()()()(),u(43,"div",28)(44,"button",29),U("click",function(){return n.addColumn()}),k(45,"i",30),m(46," Kolon Ekle "),f()()(),u(47,"div",3)(48,"div",17)(49,"h5",5),k(50,"i",31),m(51,"SQL \xD6nizleme"),f()(),u(52,"div",7)(53,"div",32)(54,"pre"),m(55),f()()()(),u(56,"div",33)(57,"button",34),U("click",function(){return n.resetForm()}),k(58,"i",35),m(59," S\u0131f\u0131rla "),f(),u(60,"button",36),ee(61,joe,1,0,"span",37)(62,Voe,1,0,"i",38),m(63," Tabloyu Olu\u015Ftur "),f()()(),ee(64,Uoe,3,1,"div",39)(65,Hoe,3,0,"div",40),f()()()()()),t&2){let r;x(9),S("formGroup",n.createTableForm),x(12),S("ngIf",((r=n.createTableForm.get("tableName"))==null?null:r.invalid)&&((r=n.createTableForm.get("tableName"))==null?null:r.touched)),x(21),S("ngForOf",n.columns),x(13),W(n.sqlPreview),x(5),S("disabled",n.isLoading||n.createTableForm.invalid),x(),S("ngIf",n.isLoading),x(),S("ngIf",!n.isLoading),x(2),S("ngIf",n.errorMessage),x(),S("ngIf",n.isSuccess)}},dependencies:[yt,lt,$r,Kn,Yn,rn,$u,qn,fn,Gr,ba,Ca,Un],styles:[".mysql-creator[_ngcontent-%COMP%]{padding:20px;font-family:Roboto,sans-serif}.mysql-creator[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border-radius:12px;overflow:hidden;transition:all .3s ease;box-shadow:0 6px 15px #00000014;border:none;margin-bottom:24px}.mysql-creator[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:hover{box-shadow:0 8px 20px #0000001f;transform:translateY(-2px)}.mysql-creator[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{border-bottom:0;padding:18px 24px}.mysql-creator[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .mysql-creator[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-weight:600;margin-bottom:0;letter-spacing:-.01em}.mysql-creator[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header.bg-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2c7be5,#1a68d1)!important}.mysql-creator[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header.bg-light[_ngcontent-%COMP%]{background:linear-gradient(to right,#f8f9fa,#f1f3f5)!important;border-bottom:1px solid rgba(0,0,0,.05)}.mysql-creator[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:24px}.mysql-creator[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{background-color:#f8f9fa;border-top:1px solid rgba(0,0,0,.05);padding:15px 24px}.mysql-creator[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{margin-bottom:0}.mysql-creator[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;padding:14px 16px;color:#495057;background-color:#f8f9fa;font-size:.875rem;letter-spacing:.02em;text-transform:uppercase;border-bottom:2px solid rgba(0,0,0,.05)}.mysql-creator[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:16px;vertical-align:middle;border-color:#0000000d}.mysql-creator[_ngcontent-%COMP%]   .table.table-striped[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:nth-of-type(odd) > *[_ngcontent-%COMP%]{background-color:#00000003}.mysql-creator[_ngcontent-%COMP%]   .table.table-hover[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:hover > *[_ngcontent-%COMP%]{background-color:#00000008}.mysql-creator[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%], .mysql-creator[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]{padding:.6rem 1rem;font-size:.9rem;border-radius:6px;border:1px solid rgba(0,0,0,.1);transition:all .2s ease}.mysql-creator[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus, .mysql-creator[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]:focus{border-color:#80bdff;box-shadow:0 0 0 .2rem #007bff26}.mysql-creator[_ngcontent-%COMP%]   .sql-preview[_ngcontent-%COMP%]{min-height:150px;max-height:300px;overflow-y:auto;font-family:Courier New,Courier,monospace;font-size:14px;line-height:1.5;background-color:#2d3748!important;border-radius:8px;padding:20px!important}.mysql-creator[_ngcontent-%COMP%]   .sql-preview[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{margin-bottom:0;white-space:pre-wrap;word-wrap:break-word;color:#e2e8f0}.mysql-creator[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.6rem 1.2rem;font-weight:500;border-radius:6px;transition:all .2s ease;letter-spacing:.01em}.mysql-creator[_ngcontent-%COMP%]   .btn.btn-sm[_ngcontent-%COMP%]{padding:.35rem .7rem;font-size:.875rem}.mysql-creator[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2c7be5,#1a68d1);border:none;box-shadow:0 2px 6px #1a68d133}.mysql-creator[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#1a68d1,#0b5abb);box-shadow:0 4px 10px #1a68d14d;transform:translateY(-1px)}.mysql-creator[_ngcontent-%COMP%]   .btn.btn-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#42ba96,#2f9d7a);border:none;box-shadow:0 2px 6px #2f9d7a33}.mysql-creator[_ngcontent-%COMP%]   .btn.btn-success[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#2f9d7a,#248a68);box-shadow:0 4px 10px #2f9d7a4d;transform:translateY(-1px)}.mysql-creator[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6c757d,#5a6268);border:none;box-shadow:0 2px 6px #5a626833}.mysql-creator[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#5a6268,#4e555b);box-shadow:0 4px 10px #5a62684d;transform:translateY(-1px)}.mysql-creator[_ngcontent-%COMP%]   .btn.btn-danger[_ngcontent-%COMP%]{background:linear-gradient(135deg,#df4759,#d22a3d);border:none;box-shadow:0 2px 6px #df475933}.mysql-creator[_ngcontent-%COMP%]   .btn.btn-danger[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#d22a3d,#be2434);box-shadow:0 4px 10px #df47594d;transform:translateY(-1px)}.mysql-creator[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.9rem;vertical-align:-1px}.mysql-creator[_ngcontent-%COMP%]   .form-check-inline[_ngcontent-%COMP%]{margin-right:12px}.mysql-creator[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]{width:1.1rem;height:1.1rem;margin-top:.2rem;border-color:#0003}.mysql-creator[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]:checked{background-color:#2c7be5;border-color:#2c7be5}.mysql-creator[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]:disabled + .form-check-label[_ngcontent-%COMP%]{opacity:.6}.mysql-creator[_ngcontent-%COMP%]   .form-check-label[_ngcontent-%COMP%]{font-size:.9rem;color:#495057;margin-left:4px}.mysql-creator[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{border-radius:8px;padding:16px 20px;font-size:.95rem;border:none;margin-top:20px}.mysql-creator[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px;font-size:1.1rem}.mysql-creator[_ngcontent-%COMP%]   .alert.alert-success[_ngcontent-%COMP%]{background-color:#42ba9626;color:#2a7d61}.mysql-creator[_ngcontent-%COMP%]   .alert.alert-danger[_ngcontent-%COMP%]{background-color:#df475926;color:#a52130}.mysql-creator[_ngcontent-%COMP%]   .text-muted[_ngcontent-%COMP%]{font-size:.85rem;margin-top:6px;display:block}@media (max-width: 768px){.mysql-creator[_ngcontent-%COMP%]{padding:12px}.mysql-creator[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border-radius:8px}.mysql-creator[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:14px 16px}.mysql-creator[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:16px}.mysql-creator[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{min-width:850px}.mysql-creator[_ngcontent-%COMP%]   .form-check-inline[_ngcontent-%COMP%]{margin-right:5px}.mysql-creator[_ngcontent-%COMP%]   .form-check-inline[_ngcontent-%COMP%]   .form-check-label[_ngcontent-%COMP%]{font-size:.8rem}.mysql-creator[_ngcontent-%COMP%]   .sql-preview[_ngcontent-%COMP%]{padding:16px!important}}"]})};var Goe=i=>["/yonetici-sayfasi/ogrenci-detay-sayfasi",i];function $oe(i,e){i&1&&(u(0,"div",27)(1,"div",28),k(2,"div",29),u(3,"p"),m(4,"Gruplar y\xFCkleniyor..."),f()()())}function Woe(i,e){if(i&1){let t=Ae();u(0,"div",30)(1,"div",31),k(2,"i",32),u(3,"h3"),m(4,"Hata Olu\u015Ftu"),f(),u(5,"p"),m(6),f(),u(7,"button",33),U("click",function(){K(t);let r=F();return Y(r.loadStudents())}),k(8,"i",34),m(9," Tekrar Dene "),f()()()}if(i&2){let t=F();x(6),W(t.error)}}function qoe(i,e){i&1&&(u(0,"div",47),k(1,"i",48),u(2,"p"),m(3,"Bu grupta \xF6\u011Frenci bulunamad\u0131"),f()())}function Koe(i,e){if(i&1&&(u(0,"span",65),k(1,"i",66),m(2),f()),i&2){let t=F().$implicit;x(2),he(" ",t.sinifi," ")}}function Yoe(i,e){if(i&1&&(u(0,"span",65),k(1,"i",67),m(2),f()),i&2){let t=F().$implicit;x(2),he(" ",t.okulu," ")}}function Xoe(i,e){if(i&1&&(u(0,"span",68),m(1),f()),i&2){let t=F().$implicit;x(),W(t.cep_telefonu)}}function Qoe(i,e){if(i&1){let t=Ae();u(0,"div",49)(1,"div",50),k(2,"img",51)(3,"div",52),f(),u(4,"div",53)(5,"div",54),m(6),f(),u(7,"div",55),ee(8,Koe,3,1,"span",56)(9,Yoe,3,1,"span",56),f(),u(10,"div",57)(11,"span",58),m(12),f(),ee(13,Xoe,2,1,"span",59),f()(),u(14,"div",60)(15,"a",61),k(16,"i",62),f(),u(17,"button",63),U("click",function(){let r=K(t).$implicit,o=F(3);return Y(o.deleteStudent(r.id))}),k(18,"i",64),f()()()}if(i&2){let t=e.$implicit;x(2),S("src",t.avatar||"assets/images/default-avatar.png",vt)("alt",t.adi_soyadi),x(),xe("active",t.aktif)("inactive",!t.aktif),x(3),W(t.adi_soyadi),x(2),S("ngIf",t.sinifi),x(),S("ngIf",t.okulu),x(3),W(t.email),x(),S("ngIf",t.cep_telefonu),x(2),S("routerLink",Do(12,Goe,t.id))}}function Joe(i,e){if(i&1){let t=Ae();u(0,"div",37),U("click",function(){let r=K(t).$implicit,o=F(2);return Y(o.viewGroupDetail(r.name))}),u(1,"div",38)(2,"div",39),k(3,"i",40),m(4),f(),u(5,"div",41)(6,"span",42),m(7),f(),u(8,"span",43),m(9,"\xF6\u011Frenci"),f()()(),u(10,"div",44),ee(11,qoe,4,0,"div",45)(12,Qoe,19,14,"div",46),f()()}if(i&2){let t=e.$implicit;x(),It("background-color",t.color),x(3),he(" ",t.name," "),x(3),W(t.students.length),x(4),S("ngIf",t.students.length===0),x(),S("ngForOf",t.students)}}function Zoe(i,e){if(i&1&&(u(0,"div",35),ee(1,Joe,13,6,"div",36),f()),i&2){let t=F();x(),S("ngForOf",t.filteredGroups)}}function ese(i,e){i&1&&(u(0,"div",69)(1,"div",70),k(2,"i",10),f(),u(3,"h3"),m(4,"Grup Bulunamad\u0131"),f(),u(5,"p"),m(6,"Hen\xFCz hi\xE7 grup olu\u015Fturulmam\u0131\u015F veya arama kriterinize uygun grup bulunmuyor."),f()())}var wy=class i{constructor(e,t){this.http=e;this.router=t}groups=[];isLoading=!0;error=null;searchQuery="";groupColors=["#4f46e5","#06b6d4","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899","#84cc16","#f97316","#6366f1","#14b8a6","#eab308"];ngOnInit(){this.loadStudents()}loadStudents(){this.isLoading=!0,this.error=null;let e="",t=localStorage.getItem("user")||sessionStorage.getItem("user");t&&(e=JSON.parse(t).token||"");let n=new xt({Authorization:`Bearer ${e}`});this.http.get("./server/api/ogrenciler_listesi.php",{headers:n}).subscribe({next:r=>{r.success?this.organizeStudentsByGroups(r.data):this.error=r.message||"\xD6\u011Frenci verileri y\xFCklenirken hata olu\u015Ftu.",this.isLoading=!1},error:r=>{this.error="Sunucu hatas\u0131: "+(r.error?.message||r.message),this.isLoading=!1}})}organizeStudentsByGroups(e){let t=new Map;e.filter(r=>r.rutbe==="ogrenci").forEach(r=>{let o=r.grubu||"Grup Atanmam\u0131\u015F";t.has(o)||t.set(o,[]),t.get(o).push(r)}),this.groups=Array.from(t.entries()).map(([r,o],s)=>({name:r,students:o,studentCount:o.length,color:this.groupColors[s%this.groupColors.length]})),this.groups.sort((r,o)=>r.name==="Grup Atanmam\u0131\u015F"?1:o.name==="Grup Atanmam\u0131\u015F"?-1:r.name.localeCompare(o.name))}get filteredGroups(){if(!this.searchQuery.trim())return this.groups;let e=this.searchQuery.toLowerCase().trim();return this.groups.map(t=>ot(Ie({},t),{students:t.students.filter(n=>n.adi_soyadi.toLowerCase().includes(e)||n.email.toLowerCase().includes(e)||t.name.toLowerCase().includes(e))})).filter(t=>t.students.length>0)}getTotalStudents(){return this.groups.reduce((e,t)=>e+t.studentCount,0)}getActiveStudents(){return this.groups.reduce((e,t)=>e+t.students.filter(n=>n.aktif).length,0)}deleteStudent(e){if(confirm("Bu \xF6\u011Frenciyi silmek istedi\u011Finizden emin misiniz?")){let t="",n=localStorage.getItem("user")||sessionStorage.getItem("user");n&&(t=JSON.parse(n).token||"");let r=new xt({Authorization:`Bearer ${t}`});this.http.delete(`./server/api/ogrenci_sil.php?id=${e}`,{headers:r}).subscribe({next:o=>{o.success?this.loadStudents():alert("\xD6\u011Frenci silinirken hata olu\u015Ftu: "+o.message)},error:o=>{alert("Sunucu hatas\u0131: "+o.message)}})}}viewGroupDetail(e){let t=encodeURIComponent(e);this.router.navigate(["/yonetici-sayfasi/grup-detay",t])}static \u0275fac=function(t){return new(t||i)(ke(gt),ke(an))};static \u0275cmp=Ke({type:i,selectors:[["app-ogrenci-gruplar"]],standalone:!1,decls:43,vars:8,consts:[[1,"groups-container"],[1,"page-header"],[1,"header-content"],[1,"header-text"],[1,"page-title"],[1,"bi","bi-people-fill","me-2"],[1,"page-description"],[1,"stats-row"],[1,"stat-card"],[1,"stat-icon","bg-primary"],[1,"bi","bi-collection"],[1,"stat-content"],[1,"stat-number"],[1,"stat-label"],[1,"stat-icon","bg-success"],[1,"bi","bi-people"],[1,"stat-icon","bg-info"],[1,"bi","bi-person-check"],[1,"search-section"],[1,"search-container"],[1,"search-input-wrapper"],[1,"bi","bi-search","search-icon"],["type","text","placeholder","Grup veya \xF6\u011Frenci ara...",1,"search-input",3,"ngModelChange","ngModel"],["class","loading-container",4,"ngIf"],["class","error-container",4,"ngIf"],["class","groups-grid",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"loading-container"],[1,"loading-spinner"],[1,"spinner"],[1,"error-container"],[1,"error-card"],[1,"bi","bi-exclamation-triangle","error-icon"],[1,"retry-button",3,"click"],[1,"bi","bi-arrow-clockwise","me-1"],[1,"groups-grid"],["class","group-card","style","cursor: pointer;",3,"click",4,"ngFor","ngForOf"],[1,"group-card",2,"cursor","pointer",3,"click"],[1,"group-header"],[1,"group-title"],[1,"bi","bi-collection-fill","me-2"],[1,"group-count"],[1,"count-badge"],[1,"count-text"],[1,"students-container"],["class","empty-group",4,"ngIf"],["class","student-item",4,"ngFor","ngForOf"],[1,"empty-group"],[1,"bi","bi-person-x"],[1,"student-item"],[1,"student-avatar"],[1,"avatar-img",3,"src","alt"],[1,"status-indicator"],[1,"student-info"],[1,"student-name"],[1,"student-details"],["class","detail-item",4,"ngIf"],[1,"student-contact"],[1,"email"],["class","phone",4,"ngIf"],[1,"student-actions"],["title","D\xFCzenle",1,"action-btn","edit-btn",3,"routerLink"],[1,"bi","bi-pencil"],["title","Sil",1,"action-btn","delete-btn",3,"click"],[1,"bi","bi-trash"],[1,"detail-item"],[1,"bi","bi-mortarboard","me-1"],[1,"bi","bi-building","me-1"],[1,"phone"],[1,"empty-state"],[1,"empty-illustration"]],template:function(t,n){t&1&&(u(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),k(5,"i",5),m(6," \xD6\u011Frenci Gruplar\u0131 "),f(),u(7,"p",6),m(8,"\xD6\u011Frencilerinizi gruplar\u0131na g\xF6re y\xF6netin"),f()(),u(9,"div",7)(10,"div",8)(11,"div",9),k(12,"i",10),f(),u(13,"div",11)(14,"div",12),m(15),f(),u(16,"div",13),m(17,"Toplam Grup"),f()()(),u(18,"div",8)(19,"div",14),k(20,"i",15),f(),u(21,"div",11)(22,"div",12),m(23),f(),u(24,"div",13),m(25,"Toplam \xD6\u011Frenci"),f()()(),u(26,"div",8)(27,"div",16),k(28,"i",17),f(),u(29,"div",11)(30,"div",12),m(31),f(),u(32,"div",13),m(33,"Aktif \xD6\u011Frenci"),f()()()()()(),u(34,"div",18)(35,"div",19)(36,"div",20),k(37,"i",21),u(38,"input",22),at("ngModelChange",function(o){return dt(n.searchQuery,o)||(n.searchQuery=o),o}),f()()()(),ee(39,$oe,5,0,"div",23)(40,Woe,10,1,"div",24)(41,Zoe,2,1,"div",25)(42,ese,7,0,"div",26),f()),t&2&&(x(15),W(n.groups.length),x(8),W(n.getTotalStudents()),x(8),W(n.getActiveStudents()),x(7),st("ngModel",n.searchQuery),x(),S("ngIf",n.isLoading),x(),S("ngIf",n.error&&!n.isLoading),x(),S("ngIf",!n.isLoading&&!n.error),x(),S("ngIf",!n.isLoading&&!n.error&&n.filteredGroups.length===0))},dependencies:[yt,lt,rn,fn,xi,Un],styles:[".groups-container[_ngcontent-%COMP%]{padding:20px;min-height:100vh;background:linear-gradient(135deg,#f8fafc,#e2e8f0)}.page-header[_ngcontent-%COMP%]{margin-bottom:30px}.page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:30px;box-shadow:0 4px 6px -1px #0000001a;border:1px solid #e2e8f0}.page-header[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]{margin-bottom:20px}.page-header[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;color:#1e293b;margin:0;display:flex;align-items:center}.page-header[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   .page-description[_ngcontent-%COMP%]{color:#64748b;font-size:1.1rem;margin:5px 0 0}.stats-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px}.stats-row[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;display:flex;align-items:center;gap:15px;border:1px solid #e2e8f0;transition:all .3s ease}.stats-row[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px -5px #0000001a}.stats-row[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:1.5rem;color:#fff}.stats-row[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon.bg-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4f46e5,#7c3aed)}.stats-row[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon.bg-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669)}.stats-row[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon.bg-info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#06b6d4,#0891b2)}.stats-row[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-number[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#1e293b;line-height:1}.stats-row[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{color:#64748b;font-size:.875rem;margin-top:2px}.search-section[_ngcontent-%COMP%]{margin-bottom:30px}.search-section[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;box-shadow:0 2px 4px -1px #0000000f;border:1px solid #e2e8f0}.search-section[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]{position:relative;max-width:400px}.search-section[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{position:absolute;left:15px;top:50%;transform:translateY(-50%);color:#64748b;font-size:1.1rem}.search-section[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:100%;padding:12px 15px 12px 45px;border:2px solid #e2e8f0;border-radius:10px;font-size:1rem;transition:all .3s ease}.search-section[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#4f46e5;box-shadow:0 0 0 3px #4f46e51a}.search-section[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]::placeholder{color:#94a3b8}.loading-container[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:400px}.loading-container[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%], .loading-container[_ngcontent-%COMP%]   .error-card[_ngcontent-%COMP%], .loading-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]   .error-card[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   .error-card[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{text-align:center;padding:40px;background:#fff;border-radius:16px;box-shadow:0 4px 6px -1px #0000001a;border:1px solid #e2e8f0}.spinner[_ngcontent-%COMP%]{width:50px;height:50px;border:4px solid #e2e8f0;border-top:4px solid #4f46e5;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 20px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.error-icon[_ngcontent-%COMP%]{font-size:3rem;color:#ef4444;margin-bottom:15px}.retry-button[_ngcontent-%COMP%]{background:#4f46e5;color:#fff;border:none;padding:10px 20px;border-radius:8px;font-size:.875rem;cursor:pointer;transition:all .3s ease}.retry-button[_ngcontent-%COMP%]:hover{background:#4338ca}.groups-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:25px}.group-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;overflow:hidden;box-shadow:0 4px 6px -1px #0000001a;border:1px solid #e2e8f0;transition:all .3s ease}.group-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 20px 25px -5px #0000001a}.group-header[_ngcontent-%COMP%]{padding:20px;color:#fff;display:flex;justify-content:space-between;align-items:center}.group-header[_ngcontent-%COMP%]   .group-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;display:flex;align-items:center}.group-header[_ngcontent-%COMP%]   .group-count[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.group-header[_ngcontent-%COMP%]   .group-count[_ngcontent-%COMP%]   .count-badge[_ngcontent-%COMP%]{background:#fff3;color:#fff;font-size:1.5rem;font-weight:700;padding:5px 10px;border-radius:8px;line-height:1}.group-header[_ngcontent-%COMP%]   .group-count[_ngcontent-%COMP%]   .count-text[_ngcontent-%COMP%]{font-size:.75rem;opacity:.9;margin-top:2px}.students-container[_ngcontent-%COMP%]{padding:20px;max-height:400px;overflow-y:auto}.empty-group[_ngcontent-%COMP%]{text-align:center;padding:30px;color:#64748b}.empty-group[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:10px;display:block}.student-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;padding:15px;border-radius:12px;margin-bottom:10px;transition:all .3s ease;border:1px solid transparent}.student-item[_ngcontent-%COMP%]:hover{background:#f8fafc;border-color:#e2e8f0}.student-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.student-avatar[_ngcontent-%COMP%]{position:relative;flex-shrink:0}.student-avatar[_ngcontent-%COMP%]   .avatar-img[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:12px;object-fit:cover;border:2px solid #e2e8f0}.student-avatar[_ngcontent-%COMP%]   .status-indicator[_ngcontent-%COMP%]{position:absolute;top:-2px;right:-2px;width:16px;height:16px;border-radius:50%;border:2px solid white}.student-avatar[_ngcontent-%COMP%]   .status-indicator.active[_ngcontent-%COMP%]{background:#10b981}.student-avatar[_ngcontent-%COMP%]   .status-indicator.inactive[_ngcontent-%COMP%]{background:#ef4444}.student-info[_ngcontent-%COMP%]{flex:1;min-width:0}.student-info[_ngcontent-%COMP%]   .student-name[_ngcontent-%COMP%]{font-weight:600;color:#1e293b;font-size:1rem;margin-bottom:4px}.student-info[_ngcontent-%COMP%]   .student-details[_ngcontent-%COMP%]{display:flex;gap:12px;margin-bottom:4px}.student-info[_ngcontent-%COMP%]   .student-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]{font-size:.75rem;color:#64748b;display:flex;align-items:center}.student-info[_ngcontent-%COMP%]   .student-contact[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]{font-size:.75rem;color:#4f46e5;margin-right:10px}.student-info[_ngcontent-%COMP%]   .student-contact[_ngcontent-%COMP%]   .phone[_ngcontent-%COMP%]{font-size:.75rem;color:#64748b}.student-actions[_ngcontent-%COMP%]{display:flex;gap:8px;flex-shrink:0}.student-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:8px;border:none;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s ease;text-decoration:none;font-size:.875rem}.student-actions[_ngcontent-%COMP%]   .action-btn.edit-btn[_ngcontent-%COMP%]{background:#e0f2fe;color:#0891b2}.student-actions[_ngcontent-%COMP%]   .action-btn.edit-btn[_ngcontent-%COMP%]:hover{background:#0891b2;color:#fff}.student-actions[_ngcontent-%COMP%]   .action-btn.delete-btn[_ngcontent-%COMP%]{background:#fef2f2;color:#dc2626}.student-actions[_ngcontent-%COMP%]   .action-btn.delete-btn[_ngcontent-%COMP%]:hover{background:#dc2626;color:#fff}.empty-illustration[_ngcontent-%COMP%]{font-size:4rem;color:#cbd5e1;margin-bottom:20px}@media (max-width: 768px){.groups-container[_ngcontent-%COMP%]{padding:15px}.groups-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:20px}.stats-row[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:15px}.page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{padding:20px}.page-title[_ngcontent-%COMP%]{font-size:2rem!important}.student-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:10px}.student-item[_ngcontent-%COMP%]   .student-actions[_ngcontent-%COMP%]{align-self:flex-end}}@media (max-width: 480px){.search-input-wrapper[_ngcontent-%COMP%]{max-width:100%}.student-details[_ngcontent-%COMP%]{flex-direction:column;gap:4px!important}}"]})};var My=class i{constructor(){}ngOnInit(){}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=Ke({type:i,selectors:[["app-ogrenci-ucretler"]],standalone:!1,decls:10,vars:0,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12"],[1,"card"],[1,"card-header"],[1,"card-title","mb-0"],[1,"card-body"]],template:function(t,n){t&1&&(u(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5",5),m(6,"\xD6\u011Frenci \xDCcretleri"),f()(),u(7,"div",6)(8,"p"),m(9,"\xD6\u011Frenci \xFCcretleri burada listelenecek..."),f()()()()()())},styles:[".card[_ngcontent-%COMP%]{border-radius:10px;box-shadow:0 0 10px #0000000d;margin-bottom:20px}.card-header[_ngcontent-%COMP%]{background-color:#f8f9fa;border-bottom:1px solid #e9ecef;padding:15px 20px}.card-title[_ngcontent-%COMP%]{font-weight:600;color:#2c3e50;margin-bottom:0}.card-body[_ngcontent-%COMP%]{padding:20px}"]})};function tse(i,e){i&1&&(u(0,"div",12),k(1,"div",13),u(2,"p"),m(3,"Grup detaylar\u0131 y\xFCkleniyor..."),f()())}function nse(i,e){if(i&1&&(u(0,"div",14),k(1,"i",15),u(2,"p"),m(3),f()()),i&2){let t=F();x(3),W(t.error)}}function ise(i,e){if(i&1&&(u(0,"div",29)(1,"div",30),m(2),f(),u(3,"div",31),m(4),f(),u(5,"div",32),m(6),f()()),i&2){let t=e.$implicit;x(2),W(t.gun),x(2),W(t.saat),x(2),W(t.ders_adi)}}function rse(i,e){if(i&1&&(u(0,"div",33)(1,"div",34),k(2,"i",35),f(),u(3,"div",36)(4,"div",37),m(5),f(),u(6,"div",38),m(7),f()(),u(8,"div",39),m(9),f()()),i&2){let t=e.$implicit;x(5),W(t.adi_soyadi),x(2),W(t.email),x(),xe("active",t.aktif)("inactive",!t.aktif),x(),he(" ",t.aktif?"Aktif":"Pasif"," ")}}function ose(i,e){i&1&&(u(0,"div",40),k(1,"i",41),u(2,"p"),m(3,"Hen\xFCz hi\xE7 ders kayd\u0131 bulunmuyor."),f()())}function sse(i,e){if(i&1&&(u(0,"div",47)(1,"span",48),m(2,"\xD6\u011Fretmen:"),f(),u(3,"span",49),m(4),f()()),i&2){let t=F().$implicit;x(4),W(t.ogretmen_adi)}}function ase(i,e){if(i&1){let t=Ae();u(0,"div",44)(1,"div",45),k(2,"i",41),u(3,"h3"),m(4),f()(),u(5,"div",46)(6,"div",47)(7,"span",48),m(8,"Tarih:"),f(),u(9,"span",49),m(10),f()(),u(11,"div",47)(12,"span",48),m(13,"Sayfa Say\u0131s\u0131:"),f(),u(14,"span",49),m(15),f()(),ee(16,sse,5,1,"div",50),f(),u(17,"div",51)(18,"button",52),U("click",function(){let r=K(t).$implicit,o=F(3);return Y(o.viewLessonPdf(r.pdf_dosya_yolu))}),k(19,"i",53),m(20," PDF G\xF6r\xFCnt\xFCle "),f()()()}if(i&2){let t=e.$implicit,n=F(3);x(4),W(t.pdf_adi),x(6),W(n.formatDate(t.olusturma_zamani)),x(5),he("",t.sayfa_sayisi," sayfa"),x(),S("ngIf",t.ogretmen_adi),x(2),S("disabled",!t.pdf_dosya_yolu)}}function lse(i,e){if(i&1&&(u(0,"div",42),ee(1,ase,21,5,"div",43),f()),i&2){let t=F(2);x(),S("ngForOf",t.grupDetay.dersKayitlari)}}function cse(i,e){if(i&1&&(u(0,"div",16)(1,"div",17)(2,"div",18),k(3,"i",19),u(4,"h2"),m(5,"Ders Program\u0131"),f()(),u(6,"div",20),ee(7,ise,7,3,"div",21),f()(),u(8,"div",17)(9,"div",18),k(10,"i",22),u(11,"h2"),m(12,"\xD6\u011Frenciler"),f()(),u(13,"div",23),ee(14,rse,10,7,"div",24),f()(),u(15,"div",25)(16,"div",18),k(17,"i",26),u(18,"h2"),m(19,"\u0130\u015Flenen Konular"),f()(),ee(20,ose,4,0,"div",27)(21,lse,2,1,"div",28),f()()),i&2){let t=F();x(7),S("ngForOf",t.grupDetay.dersProgram),x(7),S("ngForOf",t.grupDetay.students),x(6),S("ngIf",t.grupDetay.dersKayitlari.length===0),x(),S("ngIf",t.grupDetay.dersKayitlari.length>0)}}function dse(i,e){if(i&1){let t=Ae();u(0,"div",54),U("click",function(){K(t);let r=F();return Y(r.closePdfViewer())}),u(1,"div",55),U("click",function(r){return K(t),Y(r.stopPropagation())}),u(2,"div",56)(3,"h3"),m(4,"Ders PDF'i"),f(),u(5,"div",57)(6,"a",58),k(7,"i",59),m(8," Yeni Sekmede A\xE7 "),f(),u(9,"button",60),U("click",function(){K(t);let r=F();return Y(r.closePdfViewer())}),k(10,"i",61),f()()(),u(11,"div",62)(12,"div",63)(13,"div",64),k(14,"i",65),u(15,"h4"),m(16,"PDF G\xF6r\xFCnt\xFCleyici"),f(),u(17,"p"),m(18,"PDF dosyas\u0131n\u0131 g\xF6r\xFCnt\xFClemek i\xE7in a\u015Fa\u011F\u0131daki se\xE7enekleri kullan\u0131n:"),f(),u(19,"div",66)(20,"a",67),k(21,"i",53),m(22," Yeni Sekmede G\xF6r\xFCnt\xFCle "),f(),u(23,"a",68),k(24,"i",69),m(25," \u0130ndir "),f()()()(),u(26,"iframe",70),U("error",function(){K(t);let r=F();return Y(r.onPdfLoadError())}),f()()()()}if(i&2){let t=F();x(6),S("href",t.selectedPdf,vt),x(14),S("href",t.selectedPdf,vt),x(3),S("href",t.selectedPdf,vt),x(3),S("src",t.selectedPdf+"#toolbar=1",Bp)}}var Ey=class i{constructor(e,t){this.route=e;this.http=t}grupAdi="";grupDetay={name:"",students:[],dersProgram:[],dersKayitlari:[]};isLoading=!0;error=null;selectedPdf=null;showPdfModal=!1;apiBaseUrl=this.getApiBaseUrl();getApiBaseUrl(){let e=window.location.hostname;return e==="localhost"||e==="127.0.0.1"||e.includes("replit")?"http://localhost/server/api":"https://kimyaogreniyorum.com/server/api"}ngOnInit(){this.route.params.subscribe(e=>{this.grupAdi=decodeURIComponent(e.grupAdi),this.loadGrupDetay()})}loadGrupDetay(){this.isLoading=!0,this.error=null;let e="",t=localStorage.getItem("user")||sessionStorage.getItem("user");t&&(e=JSON.parse(t).token||"");let n=new xt({Authorization:`Bearer ${e}`});this.http.get("./server/api/ogrenciler_listesi.php",{headers:n}).subscribe({next:r=>{r.success?(this.grupDetay.students=r.data.filter(o=>o.grubu===this.grupAdi),this.grupDetay.name=this.grupAdi,this.loadDersKayitlari()):(this.error=r.message||"\xD6\u011Frenci verileri y\xFCklenirken hata olu\u015Ftu.",this.isLoading=!1)},error:r=>{this.error="Sunucu hatas\u0131: "+(r.error?.message||r.message),this.isLoading=!1}})}loadDersKayitlari(){let e="",t=localStorage.getItem("user")||sessionStorage.getItem("user");t&&(e=JSON.parse(t).token||"");let n=new xt({Authorization:`Bearer ${e}`});this.http.get(`./server/api/grup_ders_kayitlari.php?grup=${encodeURIComponent(this.grupAdi)}`,{headers:n}).subscribe({next:r=>{r.success&&(this.grupDetay.dersKayitlari=r.data||[]),this.loadDersProgram()},error:r=>{console.error("Ders kay\u0131tlar\u0131 y\xFCklenirken hata:",r),this.loadDersProgram()}})}loadDersProgram(){let e={"9A S\u0131n\u0131f\u0131":[{gun:"Pazartesi",saat:"09:00-10:00",ders_adi:"Kimya"},{gun:"\xC7ar\u015Famba",saat:"14:00-15:00",ders_adi:"Kimya"},{gun:"Cuma",saat:"11:00-12:00",ders_adi:"Kimya"}],"10A S\u0131n\u0131f\u0131":[{gun:"Sal\u0131",saat:"10:00-11:00",ders_adi:"Kimya"},{gun:"Per\u015Fembe",saat:"13:00-14:00",ders_adi:"Kimya"},{gun:"Cumartesi",saat:"09:00-10:00",ders_adi:"Kimya"}],"11A S\u0131n\u0131f\u0131":[{gun:"Pazartesi",saat:"14:00-15:00",ders_adi:"Kimya"},{gun:"\xC7ar\u015Famba",saat:"10:00-11:00",ders_adi:"Kimya"},{gun:"Cuma",saat:"15:00-16:00",ders_adi:"Kimya"}],"12A S\u0131n\u0131f\u0131":[{gun:"Sal\u0131",saat:"13:00-14:00",ders_adi:"Kimya"},{gun:"Per\u015Fembe",saat:"09:00-10:00",ders_adi:"Kimya"},{gun:"Cumartesi",saat:"14:00-15:00",ders_adi:"Kimya"}]};this.grupDetay.dersProgram=e[this.grupAdi]||[{gun:"Pazartesi",saat:"09:00-10:00",ders_adi:"Kimya"},{gun:"\xC7ar\u015Famba",saat:"14:00-15:00",ders_adi:"Kimya"}],this.isLoading=!1}openPdfViewer(e){this.selectedPdf=`./server/api/pdf_viewer.php?file=${encodeURIComponent(e)}`}closePdfViewer(){this.selectedPdf=null}onPdfLoadError(){console.error("PDF y\xFCklenemedi:",this.selectedPdf)}formatDate(e){return new Date(e).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}viewLessonPdf(e){e&&(this.selectedPdf=`${this.apiBaseUrl}/pdf_viewer.php?file=${encodeURIComponent(e)}`,this.showPdfModal=!0)}viewDrawingPng(e){if(e){let t=e.replace(".pdf",".png"),n=`${this.apiBaseUrl}/png_viewer.php?file=${encodeURIComponent(t)}`;window.open(n,"_blank")}}downloadFile(e,t){if(e){let n=t==="pdf"?`${this.apiBaseUrl}/pdf_viewer.php?file=${encodeURIComponent(e)}`:`${this.apiBaseUrl}/png_viewer.php?file=${encodeURIComponent(e)}`,r=document.createElement("a");r.href=n,r.download=e,document.body.appendChild(r),r.click(),document.body.removeChild(r)}}static \u0275fac=function(t){return new(t||i)(ke(Mi),ke(gt))};static \u0275cmp=Ke({type:i,selectors:[["app-grup-detay-sayfasi"]],standalone:!1,decls:16,vars:7,consts:[[1,"grup-detay-container"],[1,"header-section"],["routerLink","/yonetici/ogrenci-gruplar",1,"back-button"],[1,"fas","fa-arrow-left"],[1,"grup-title"],[1,"stats"],[1,"student-count"],[1,"lesson-count"],["class","loading-container",4,"ngIf"],["class","error-container",4,"ngIf"],["class","content-grid",4,"ngIf"],["class","pdf-modal-overlay",3,"click",4,"ngIf"],[1,"loading-container"],[1,"spinner"],[1,"error-container"],[1,"fas","fa-exclamation-triangle"],[1,"content-grid"],[1,"section-card"],[1,"section-header"],[1,"fas","fa-calendar-alt"],[1,"program-list"],["class","program-item",4,"ngFor","ngForOf"],[1,"fas","fa-users"],[1,"students-list"],["class","student-item",4,"ngFor","ngForOf"],[1,"section-card","full-width"],[1,"fas","fa-book"],["class","empty-state",4,"ngIf"],["class","lessons-grid",4,"ngIf"],[1,"program-item"],[1,"day"],[1,"time"],[1,"subject"],[1,"student-item"],[1,"student-avatar"],[1,"fas","fa-user"],[1,"student-info"],[1,"student-name"],[1,"student-email"],[1,"student-status"],[1,"empty-state"],[1,"fas","fa-file-pdf"],[1,"lessons-grid"],["class","lesson-card",4,"ngFor","ngForOf"],[1,"lesson-card"],[1,"lesson-header"],[1,"lesson-info"],[1,"info-item"],[1,"label"],[1,"value"],["class","info-item",4,"ngIf"],[1,"lesson-actions"],[1,"action-btn","view-btn",3,"click","disabled"],[1,"fas","fa-eye"],[1,"pdf-modal-overlay",3,"click"],[1,"pdf-modal-content",3,"click"],[1,"pdf-modal-header"],[1,"modal-actions"],["target","_blank",1,"download-btn",3,"href"],[1,"fas","fa-external-link-alt"],[1,"close-btn",3,"click"],[1,"fas","fa-times"],[1,"pdf-viewer"],[1,"pdf-fallback"],[1,"fallback-content"],[1,"fas","fa-file-pdf","pdf-icon"],[1,"pdf-actions"],["target","_blank",1,"pdf-action-btn","primary",3,"href"],["download","",1,"pdf-action-btn","secondary",3,"href"],[1,"fas","fa-download"],["width","100%","height","600px",2,"border","none",3,"error","src"]],template:function(t,n){t&1&&(u(0,"div",0)(1,"div",1)(2,"button",2),k(3,"i",3),m(4," Geri "),f(),u(5,"h1",4),m(6),f(),u(7,"div",5)(8,"span",6),m(9),f(),u(10,"span",7),m(11),f()()(),ee(12,tse,4,0,"div",8)(13,nse,4,1,"div",9)(14,cse,22,4,"div",10),f(),ee(15,dse,27,4,"div",11)),t&2&&(x(6),W(n.grupDetay.name),x(3),he("",n.grupDetay.students.length," \xD6\u011Frenci"),x(2),he("",n.grupDetay.dersKayitlari.length," Ders Kayd\u0131"),x(),S("ngIf",n.isLoading),x(),S("ngIf",n.error&&!n.isLoading),x(),S("ngIf",!n.isLoading&&!n.error),x(),S("ngIf",n.selectedPdf))},dependencies:[yt,lt,xi],styles:[".grup-detay-container[_ngcontent-%COMP%]{padding:20px;max-width:1200px;margin:0 auto}.header-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;margin-bottom:30px;flex-wrap:wrap}.header-section[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:10px 15px;background:#6c757d;color:#fff;border:none;border-radius:8px;cursor:pointer;font-size:14px;transition:all .3s ease}.header-section[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]:hover{background:#5a6268;transform:translateY(-1px)}.header-section[_ngcontent-%COMP%]   .grup-title[_ngcontent-%COMP%]{flex:1;margin:0;font-size:28px;font-weight:600;color:#2d3748}.header-section[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]{display:flex;gap:15px}.header-section[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:8px 16px;background:#f8f9fa;border-radius:20px;font-size:14px;font-weight:500;color:#495057}.header-section[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   .student-count[_ngcontent-%COMP%]{background:#e3f2fd;color:#1976d2}.header-section[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   .lesson-count[_ngcontent-%COMP%]{background:#f3e5f5;color:#7b1fa2}.loading-container[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #f3f3f3;border-top:4px solid #007bff;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:20px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.error-container[_ngcontent-%COMP%]{color:#dc3545}.error-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:48px;margin-bottom:16px}.content-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px}@media (max-width: 768px){.content-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.section-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:24px;box-shadow:0 2px 8px #0000001a;border:1px solid #e9ecef}.section-card.full-width[_ngcontent-%COMP%]{grid-column:1/-1}.section-card[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:20px;padding-bottom:12px;border-bottom:2px solid #f8f9fa}.section-card[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px;color:#007bff}.section-card[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:600;color:#2d3748}.program-list[_ngcontent-%COMP%]   .program-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px;padding:12px;margin-bottom:8px;background:#f8f9fa;border-radius:8px;align-items:center}.program-list[_ngcontent-%COMP%]   .program-item[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]{font-weight:600;color:#495057}.program-list[_ngcontent-%COMP%]   .program-item[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{color:#007bff;font-weight:500}.program-list[_ngcontent-%COMP%]   .program-item[_ngcontent-%COMP%]   .subject[_ngcontent-%COMP%]{background:#e7f3ff;color:#06c;padding:4px 8px;border-radius:12px;text-align:center;font-size:12px;font-weight:500}.students-list[_ngcontent-%COMP%]   .student-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px;margin-bottom:8px;background:#f8f9fa;border-radius:8px}.students-list[_ngcontent-%COMP%]   .student-item[_ngcontent-%COMP%]   .student-avatar[_ngcontent-%COMP%]{width:40px;height:40px;background:#007bff;border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff}.students-list[_ngcontent-%COMP%]   .student-item[_ngcontent-%COMP%]   .student-info[_ngcontent-%COMP%]{flex:1}.students-list[_ngcontent-%COMP%]   .student-item[_ngcontent-%COMP%]   .student-info[_ngcontent-%COMP%]   .student-name[_ngcontent-%COMP%]{font-weight:600;color:#2d3748;margin-bottom:2px}.students-list[_ngcontent-%COMP%]   .student-item[_ngcontent-%COMP%]   .student-info[_ngcontent-%COMP%]   .student-email[_ngcontent-%COMP%]{font-size:12px;color:#6c757d}.students-list[_ngcontent-%COMP%]   .student-item[_ngcontent-%COMP%]   .student-status[_ngcontent-%COMP%]{padding:4px 12px;border-radius:12px;font-size:12px;font-weight:500}.students-list[_ngcontent-%COMP%]   .student-item[_ngcontent-%COMP%]   .student-status.active[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.students-list[_ngcontent-%COMP%]   .student-item[_ngcontent-%COMP%]   .student-status.inactive[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#6c757d}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:48px;margin-bottom:16px;opacity:.5}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px}.lessons-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px}.lesson-card[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:12px;padding:20px;border:1px solid #e9ecef;transition:all .3s ease}.lesson-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.lesson-card[_ngcontent-%COMP%]   .lesson-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:16px}.lesson-card[_ngcontent-%COMP%]   .lesson-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:24px;color:#dc3545}.lesson-card[_ngcontent-%COMP%]   .lesson-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:600;color:#2d3748;line-height:1.4}.lesson-card[_ngcontent-%COMP%]   .lesson-info[_ngcontent-%COMP%]{margin-bottom:16px}.lesson-card[_ngcontent-%COMP%]   .lesson-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:8px}.lesson-card[_ngcontent-%COMP%]   .lesson-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:500;color:#6c757d;font-size:14px}.lesson-card[_ngcontent-%COMP%]   .lesson-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#2d3748;font-size:14px}.lesson-card[_ngcontent-%COMP%]   .lesson-actions[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:flex-end;margin-top:12px;flex-wrap:wrap}.lesson-card[_ngcontent-%COMP%]   .lesson-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:6px;cursor:pointer;font-size:14px;font-weight:500;transition:all .2s ease;display:flex;align-items:center;gap:6px}.lesson-card[_ngcontent-%COMP%]   .lesson-actions[_ngcontent-%COMP%]   .action-btn.view-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.lesson-card[_ngcontent-%COMP%]   .lesson-actions[_ngcontent-%COMP%]   .action-btn.view-btn.secondary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f093fb,#f5576c)}.lesson-card[_ngcontent-%COMP%]   .lesson-actions[_ngcontent-%COMP%]   .action-btn.view-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 4px 12px #667eea66}.lesson-card[_ngcontent-%COMP%]   .lesson-actions[_ngcontent-%COMP%]   .action-btn.view-btn.secondary[_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 4px 12px #f093fb66}.lesson-card[_ngcontent-%COMP%]   .lesson-actions[_ngcontent-%COMP%]   .action-btn.download-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4facfe,#00f2fe);color:#fff}.lesson-card[_ngcontent-%COMP%]   .lesson-actions[_ngcontent-%COMP%]   .action-btn.download-btn.secondary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#43e97b,#38f9d7)}.lesson-card[_ngcontent-%COMP%]   .lesson-actions[_ngcontent-%COMP%]   .action-btn.download-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 4px 12px #4facfe66}.lesson-card[_ngcontent-%COMP%]   .lesson-actions[_ngcontent-%COMP%]   .action-btn.download-btn.secondary[_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 4px 12px #43e97b66}.lesson-card[_ngcontent-%COMP%]   .lesson-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;transform:none!important;box-shadow:none!important}.lesson-card[_ngcontent-%COMP%]   .lesson-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:12px}.pdf-modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000c;display:flex;justify-content:center;align-items:center;z-index:9999}.pdf-modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;width:90%;max-width:1000px;height:80%;max-height:700px;display:flex;flex-direction:column}.pdf-modal-header[_ngcontent-%COMP%]{padding:1rem 1.5rem;border-bottom:1px solid #e0e0e0;display:flex;justify-content:space-between;align-items:center}.pdf-modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#2c3e50}.pdf-modal-header[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;align-items:center}.pdf-modal-header[_ngcontent-%COMP%]   .download-btn[_ngcontent-%COMP%]{background:#3498db;color:#fff;padding:.5rem 1rem;border-radius:4px;text-decoration:none;font-size:.9rem;transition:background-color .3s}.pdf-modal-header[_ngcontent-%COMP%]   .download-btn[_ngcontent-%COMP%]:hover{background:#2980b9}.pdf-modal-header[_ngcontent-%COMP%]   .download-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem}.pdf-modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;color:#7f8c8d;cursor:pointer;padding:.5rem;border-radius:4px}.pdf-modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background-color:#f8f9fa;color:#e74c3c}.pdf-viewer[_ngcontent-%COMP%]{flex:1;padding:1rem;position:relative}.pdf-viewer[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{width:100%;height:100%;border:1px solid #e0e0e0;border-radius:4px}.pdf-fallback[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center;z-index:1}.fallback-content[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:8px;box-shadow:0 4px 12px #0000001a}.fallback-content[_ngcontent-%COMP%]   .pdf-icon[_ngcontent-%COMP%]{font-size:3rem;color:#e74c3c;margin-bottom:1rem}.fallback-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 1rem;color:#2c3e50}.fallback-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1.5rem;color:#7f8c8d}.pdf-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:center}.pdf-action-btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border-radius:4px;text-decoration:none;font-weight:500;transition:all .3s;display:flex;align-items:center;gap:.5rem}.pdf-action-btn.primary[_ngcontent-%COMP%]{background:#3498db;color:#fff}.pdf-action-btn.primary[_ngcontent-%COMP%]:hover{background:#2980b9}.pdf-action-btn.secondary[_ngcontent-%COMP%]{background:#95a5a6;color:#fff}.pdf-action-btn.secondary[_ngcontent-%COMP%]:hover{background:#7f8c8d}@media (max-width: 768px){.grup-detay-container[_ngcontent-%COMP%]{padding:15px}.header-section[_ngcontent-%COMP%]   .grup-title[_ngcontent-%COMP%]{font-size:22px}.header-section[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]{width:100%;justify-content:center}.lessons-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.program-item[_ngcontent-%COMP%]{grid-template-columns:1fr!important;gap:8px!important;text-align:center}.pdf-modal-content[_ngcontent-%COMP%]{width:95%;max-height:85vh}.pdf-viewer[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{height:500px!important}}"]})};var go=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),sk=[.001,0,0,.001,0,0],Iy=1.35,use=.35,VSe=use/Iy,_s={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Ld={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},hse="pdfjs_internal_editor_",Ut={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},mn={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},fse={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Zr={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Ty={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},or={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};var ng={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};var g2={ERRORS:0,WARNINGS:1,INFOS:5},By={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Py={moveTo:0,lineTo:1,curveTo:2,closePath:3},gse={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},p2=g2.WARNINGS;function pse(i){Number.isInteger(i)&&(p2=i)}function mse(){return p2}function m2(i){p2>=g2.INFOS&&console.log(`Info: ${i}`)}function Ht(i){p2>=g2.WARNINGS&&console.log(`Warning: ${i}`)}function Xn(i){throw new Error(i)}function ar(i,e){i||Xn(e)}function xse(i){switch(i?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function BR(i,e=null,t=null){if(!i)return null;if(t&&typeof i=="string"&&(t.addDefaultProtocol&&i.startsWith("www.")&&i.match(/\./g)?.length>=2&&(i=`http://${i}`),t.tryConvertEncoding))try{i=Cse(i)}catch{}let n=e?URL.parse(i,e):URL.parse(i);return xse(n)?n:null}function NR(i,e,t=!1){let n=URL.parse(i);return n?(n.hash=e,n.href):t&&BR(i,"http://example.com")?i.split("#",1)[0]+`${e?`#${e}`:""}`:""}function gn(i,e,t,n=!1){return Object.defineProperty(i,e,{value:t,enumerable:!n,configurable:!0,writable:!1}),t}var A0=function(){function e(t,n){this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e}(),Ny=class extends A0{constructor(e,t){super(e,"PasswordException"),this.code=t}},ux=class extends A0{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}},hx=class extends A0{constructor(e){super(e,"InvalidPDFException")}},sg=class extends A0{constructor(e,t,n){super(e,"ResponseException"),this.status=t,this.missing=n}},ak=class extends A0{constructor(e){super(e,"FormatError")}},Ol=class extends A0{constructor(e){super(e,"AbortException")}};function LR(i){(typeof i!="object"||i?.length===void 0)&&Xn("Invalid argument for bytesToString");let e=i.length,t=8192;if(e<t)return String.fromCharCode.apply(null,i);let n=[];for(let r=0;r<e;r+=t){let o=Math.min(r+t,e),s=i.subarray(r,o);n.push(String.fromCharCode.apply(null,s))}return n.join("")}function Px(i){typeof i!="string"&&Xn("Invalid argument for stringToBytes");let e=i.length,t=new Uint8Array(e);for(let n=0;n<e;++n)t[n]=i.charCodeAt(n)&255;return t}function _se(i){return String.fromCharCode(i>>24&255,i>>16&255,i>>8&255,i&255)}function vse(){let i=new Uint8Array(4);return i[0]=1,new Uint32Array(i.buffer,0,1)[0]===1}function bse(){try{return new Function(""),!0}catch{return!1}}var vr=class{static get isLittleEndian(){return gn(this,"isLittleEndian",vse())}static get isEvalSupported(){return gn(this,"isEvalSupported",bse())}static get isOffscreenCanvasSupported(){return gn(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return gn(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){let{platform:e,userAgent:t}=navigator;return gn(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){return gn(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}},ek=Array.from(Array(256).keys(),i=>i.toString(16).padStart(2,"0")),Mt=class{static makeHexColor(e,t,n){return`#${ek[e]}${ek[t]}${ek[n]}`}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t,n=0){let r=e[n],o=e[n+1];e[n]=r*t[0]+o*t[2]+t[4],e[n+1]=r*t[1]+o*t[3]+t[5]}static applyTransformToBezier(e,t,n=0){let r=t[0],o=t[1],s=t[2],a=t[3],l=t[4],c=t[5];for(let d=0;d<6;d+=2){let h=e[n+d],p=e[n+d+1];e[n+d]=h*r+p*s+l,e[n+d+1]=h*o+p*a+c}}static applyInverseTransform(e,t){let n=e[0],r=e[1],o=t[0]*t[3]-t[1]*t[2];e[0]=(n*t[3]-r*t[2]+t[2]*t[5]-t[4]*t[3])/o,e[1]=(-n*t[1]+r*t[0]+t[4]*t[1]-t[5]*t[0])/o}static axialAlignedBoundingBox(e,t,n){let r=t[0],o=t[1],s=t[2],a=t[3],l=t[4],c=t[5],d=e[0],h=e[1],p=e[2],g=e[3],_=r*d+l,b=_,C=r*p+l,y=C,M=a*h+c,O=M,A=a*g+c,D=A;if(o!==0||s!==0){let N=o*d,B=o*p,T=s*h,H=s*g;_+=T,y+=T,C+=H,b+=H,M+=N,D+=N,A+=B,O+=B}n[0]=Math.min(n[0],_,C,b,y),n[1]=Math.min(n[1],M,A,O,D),n[2]=Math.max(n[2],_,C,b,y),n[3]=Math.max(n[3],M,A,O,D)}static inverseTransform(e){let t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){let n=e[0],r=e[1],o=e[2],s=e[3],a=n**2+r**2,l=n*o+r*s,c=o**2+s**2,d=(a+c)/2,h=Math.sqrt(d**2-(a*c-l**2));t[0]=Math.sqrt(d+h||1),t[1]=Math.sqrt(d-h||1)}static normalizeRect(e){let t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){let n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>r)return null;let o=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),s=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return o>s?null:[n,o,r,s]}static pointBoundingBox(e,t,n){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}static rectBoundingBox(e,t,n,r,o){o[0]=Math.min(o[0],e,n),o[1]=Math.min(o[1],t,r),o[2]=Math.max(o[2],e,n),o[3]=Math.max(o[3],t,r)}static#e(e,t,n,r,o,s,a,l,c,d){if(c<=0||c>=1)return;let h=1-c,p=c*c,g=p*c,_=h*(h*(h*e+3*c*t)+3*p*n)+g*r,b=h*(h*(h*o+3*c*s)+3*p*a)+g*l;d[0]=Math.min(d[0],_),d[1]=Math.min(d[1],b),d[2]=Math.max(d[2],_),d[3]=Math.max(d[3],b)}static#t(e,t,n,r,o,s,a,l,c,d,h,p){if(Math.abs(c)<1e-12){Math.abs(d)>=1e-12&&this.#e(e,t,n,r,o,s,a,l,-h/d,p);return}let g=d**2-4*h*c;if(g<0)return;let _=Math.sqrt(g),b=2*c;this.#e(e,t,n,r,o,s,a,l,(-d+_)/b,p),this.#e(e,t,n,r,o,s,a,l,(-d-_)/b,p)}static bezierBoundingBox(e,t,n,r,o,s,a,l,c){c[0]=Math.min(c[0],e,a),c[1]=Math.min(c[1],t,l),c[2]=Math.max(c[2],e,a),c[3]=Math.max(c[3],t,l),this.#t(e,n,o,a,t,r,s,l,3*(-e+3*(n-o)+a),6*(e-2*n+o),3*(n-e),c),this.#t(e,n,o,a,t,r,s,l,3*(-t+3*(r-s)+l),6*(t-2*r+s),3*(r-t),c)}};function Cse(i){return decodeURIComponent(escape(i))}var tk=null,CR=null;function yse(i){return tk||(tk=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,CR=new Map([["\uFB05","\u017Ft"]])),i.replaceAll(tk,(e,t,n)=>t?t.normalize("NFKC"):CR.get(n))}function RR(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();let i=new Uint8Array(32);return crypto.getRandomValues(i),LR(i)}var kA="pdfjs_internal_id_";function wse(i,e,t){if(!Array.isArray(t)||t.length<2)return!1;let[n,r,...o]=t;if(!i(n)&&!Number.isInteger(n)||!e(r))return!1;let s=o.length,a=!0;switch(r.name){case"XYZ":if(s<2||s>3)return!1;break;case"Fit":case"FitB":return s===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(s>1)return!1;break;case"FitR":if(s!==4)return!1;a=!1;break;default:return!1}for(let l of o)if(!(typeof l=="number"||a&&l===null))return!1;return!0}function po(i,e,t){return Math.min(Math.max(i,e),t)}function zR(i){return Uint8Array.prototype.toBase64?i.toBase64():btoa(LR(i))}function Mse(i){return Uint8Array.fromBase64?Uint8Array.fromBase64(i):Px(atob(i))}typeof Promise.try!="function"&&(Promise.try=function(i,...e){return new Promise(t=>{t(i(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(i){return i.reduce((e,t)=>e+t,0)});var wc="http://www.w3.org/2000/svg",zd=class{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF};function Ox(i,e="text"){return Ge(this,null,function*(){if(dx(i,document.baseURI)){let t=yield fetch(i);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,n)=>{let r=new XMLHttpRequest;r.open("GET",i,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(r.response);return}t(r.responseText);return}n(new Error(r.statusText))}},r.send(null)})})}var fx=class i{constructor({viewBox:e,userUnit:t,scale:n,rotation:r,offsetX:o=0,offsetY:s=0,dontFlip:a=!1}){this.viewBox=e,this.userUnit=t,this.scale=n,this.rotation=r,this.offsetX=o,this.offsetY=s,n*=t;let l=(e[2]+e[0])/2,c=(e[3]+e[1])/2,d,h,p,g;switch(r%=360,r<0&&(r+=360),r){case 180:d=-1,h=0,p=0,g=1;break;case 90:d=0,h=1,p=1,g=0;break;case 270:d=0,h=-1,p=-1,g=0;break;case 0:d=1,h=0,p=0,g=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(p=-p,g=-g);let _,b,C,y;d===0?(_=Math.abs(c-e[1])*n+o,b=Math.abs(l-e[0])*n+s,C=(e[3]-e[1])*n,y=(e[2]-e[0])*n):(_=Math.abs(l-e[0])*n+o,b=Math.abs(c-e[1])*n+s,C=(e[2]-e[0])*n,y=(e[3]-e[1])*n),this.transform=[d*n,h*n,p*n,g*n,_-d*n*l-p*n*c,b-h*n*l-g*n*c],this.width=C,this.height=y}get rawDims(){let e=this.viewBox;return gn(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:r=this.offsetY,dontFlip:o=!1}={}){return new i({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:o})}convertToViewportPoint(e,t){let n=[e,t];return Mt.applyTransform(n,this.transform),n}convertToViewportRectangle(e){let t=[e[0],e[1]];Mt.applyTransform(t,this.transform);let n=[e[2],e[3]];return Mt.applyTransform(n,this.transform),[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){let n=[e,t];return Mt.applyInverseTransform(n,this.transform),n}},gx=class extends A0{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}};function x2(i){let e=i.length,t=0;for(;t<e&&i[t].trim()==="";)t++;return i.substring(t,t+5).toLowerCase()==="data:"}function AA(i){return typeof i=="string"&&/\.pdf$/i.test(i)}function Ese(i){return[i]=i.split(/[#?]/,1),i.substring(i.lastIndexOf("/")+1)}function Pse(i,e="document.pdf"){if(typeof i!="string")return e;if(x2(i))return Ht('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;let t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=t.exec(i),o=n.exec(r[1])||n.exec(r[2])||n.exec(r[3]);if(o&&(o=o[0],o.includes("%")))try{o=n.exec(decodeURIComponent(o))[0]}catch{}return o||e}var Ly=class{started=Object.create(null);times=[];time(e){e in this.started&&Ht(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Ht(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){let e=[],t=0;for(let{name:n}of this.times)t=Math.max(n.length,t);for(let{name:n,start:r,end:o}of this.times)e.push(`${n.padEnd(t)} ${o-r}ms
`);return e.join("")}};function dx(i,e){let t=e?URL.parse(i,e):URL.parse(i);return t?.protocol==="http:"||t?.protocol==="https:"}function Ia(i){i.preventDefault()}function sr(i){i.preventDefault(),i.stopPropagation()}function Ose(i){console.log("Deprecated API usage: "+i)}var Ry=class{static#e;static toDateObject(e){if(!e||typeof e!="string")return null;this.#e||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");let t=this.#e.exec(e);if(!t)return null;let n=parseInt(t[1],10),r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let o=parseInt(t[3],10);o=o>=1&&o<=31?o:1;let s=parseInt(t[4],10);s=s>=0&&s<=23?s:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let l=parseInt(t[6],10);l=l>=0&&l<=59?l:0;let c=t[7]||"Z",d=parseInt(t[8],10);d=d>=0&&d<=23?d:0;let h=parseInt(t[9],10)||0;return h=h>=0&&h<=59?h:0,c==="-"?(s+=d,a+=h):c==="+"&&(s-=d,a-=h),new Date(Date.UTC(n,r,o,s,a,l))}};function Sse(i,{scale:e=1,rotation:t=0}){let{width:n,height:r}=i.attributes.style,o=[0,0,parseInt(n),parseInt(r)];return new fx({viewBox:o,userUnit:1,scale:e,rotation:t})}function DA(i){if(i.startsWith("#")){let e=parseInt(i.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return i.startsWith("rgb(")?i.slice(4,-1).split(",").map(e=>parseInt(e)):i.startsWith("rgba(")?i.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Ht(`Not a valid color format: "${i}"`),[0,0,0])}function kse(i){let e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(let t of i.keys()){e.style.color=t;let n=window.getComputedStyle(e).color;i.set(t,DA(n))}e.remove()}function Ei(i){let{a:e,b:t,c:n,d:r,e:o,f:s}=i.getTransform();return[e,t,n,r,o,s]}function El(i){let{a:e,b:t,c:n,d:r,e:o,f:s}=i.getTransform().invertSelf();return[e,t,n,r,o,s]}function P0(i,e,t=!1,n=!0){if(e instanceof fx){let{pageWidth:r,pageHeight:o}=e.rawDims,{style:s}=i,a=vr.isCSSRoundSupported,l=`var(--total-scale-factor) * ${r}px`,c=`var(--total-scale-factor) * ${o}px`,d=a?`round(down, ${l}, var(--scale-round-x))`:`calc(${l})`,h=a?`round(down, ${c}, var(--scale-round-y))`:`calc(${c})`;!t||e.rotation%180===0?(s.width=d,s.height=h):(s.width=h,s.height=d)}n&&i.setAttribute("data-main-rotation",e.rotation)}var Ec=class i{constructor(){let{pixelRatio:e}=i;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,n,r,o=-1){let s=1/0,a=1/0,l=1/0;n=i.capPixels(n,o),n>0&&(s=Math.sqrt(n/(e*t))),r!==-1&&(a=r/e,l=r/t);let c=Math.min(s,a,l);return this.sx>c||this.sy>c?(this.sx=c,this.sy=c,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){let n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,n):n}return e}},lk=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"],ck=class i{#e=null;#t=null;#n;#i=null;#o=null;#r=null;static#a=null;constructor(e){this.#n=e,i.#a||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){let e=this.#e=document.createElement("div");e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");let t=this.#n._uiManager._signal;e.addEventListener("contextmenu",Ia,{signal:t}),e.addEventListener("pointerdown",i.#s,{signal:t});let n=this.#i=document.createElement("div");n.className="buttons",e.append(n);let r=this.#n.toolbarPosition;if(r){let{style:o}=e,s=this.#n._uiManager.direction==="ltr"?1-r[0]:r[0];o.insetInlineEnd=`${100*s}%`,o.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return this.#d(),e}get div(){return this.#e}static#s(e){e.stopPropagation()}#u(e){this.#n._focusEventsAllowed=!1,sr(e)}#c(e){this.#n._focusEventsAllowed=!0,sr(e)}#h(e){let t=this.#n._uiManager._signal;e.addEventListener("focusin",this.#u.bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",this.#c.bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Ia,{signal:t})}hide(){this.#e.classList.add("hidden"),this.#t?.hideDropdown()}show(){this.#e.classList.remove("hidden"),this.#o?.shown()}#d(){let{editorType:e,_uiManager:t}=this.#n,n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",i.#a[e]),this.#h(n),n.addEventListener("click",r=>{t.delete()},{signal:t._signal}),this.#i.append(n)}get#f(){let e=document.createElement("div");return e.className="divider",e}addAltText(e){return Ge(this,null,function*(){let t=yield e.render();this.#h(t),this.#i.prepend(t,this.#f),this.#o=e})}addColorPicker(e){this.#t=e;let t=e.renderButton();this.#h(t),this.#i.prepend(t,this.#f)}addEditSignatureButton(e){return Ge(this,null,function*(){let t=this.#r=yield e.renderEditButton(this.#n);this.#h(t),this.#i.prepend(t,this.#f)})}updateEditSignatureButton(e){this.#r&&(this.#r.title=e)}remove(){this.#e.remove(),this.#t?.destroy(),this.#t=null}},dk=class{#e=null;#t=null;#n;constructor(e){this.#n=e}#i(){let e=this.#t=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",Ia,{signal:this.#n._signal});let t=this.#e=document.createElement("div");return t.className="buttons",e.append(t),this.#r(),e}#o(e,t){let n=0,r=0;for(let o of e){let s=o.y+o.height;if(s<n)continue;let a=o.x+(t?o.width:0);if(s>n){r=a,n=s;continue}t?a>r&&(r=a):a<r&&(r=a)}return[t?1-r:r,n]}show(e,t,n){let[r,o]=this.#o(t,n),{style:s}=this.#t||=this.#i();e.append(this.#t),s.insetInlineEnd=`${100*r}%`,s.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){this.#t.remove()}#r(){let e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");let t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");let n=this.#n._signal;e.addEventListener("contextmenu",Ia,{signal:n}),e.addEventListener("click",()=>{this.#n.highlightSelection("floating_button")},{signal:n}),this.#e.append(e)}};function jR(i,e,t){for(let n of t)e.addEventListener(n,i[n].bind(i))}var uk=class{#e=0;get id(){return`${hse}${this.#e++}`}},hk=class i{#e=RR();#t=0;#n=null;static get _isSVGFittingCanvas(){let e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=e;let o=r.decode().then(()=>(n.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return gn(this,"_isSVGFittingCanvas",o)}#i(e,t){return Ge(this,null,function*(){this.#n||=new Map;let n=this.#n.get(e);if(n===null)return null;if(n?.bitmap)return n.refCounter+=1,n;try{n||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let r;if(typeof t=="string"?(n.url=t,r=yield Ox(t,"blob")):t instanceof File?r=n.file=t:t instanceof Blob&&(r=t),r.type==="image/svg+xml"){let o=i._isSVGFittingCanvas,s=new FileReader,a=new Image,l=new Promise((c,d)=>{a.onload=()=>{n.bitmap=a,n.isSvg=!0,c()},s.onload=()=>Ge(this,null,function*(){let h=n.svgUrl=s.result;a.src=(yield o)?`${h}#svgView(preserveAspectRatio(none))`:h}),a.onerror=s.onerror=d});s.readAsDataURL(r),yield l}else n.bitmap=yield createImageBitmap(r);n.refCounter=1}catch(r){Ht(r),n=null}return this.#n.set(e,n),n&&this.#n.set(n.id,n),n})}getFromFile(e){return Ge(this,null,function*(){let{lastModified:t,name:n,size:r,type:o}=e;return this.#i(`${t}_${n}_${r}_${o}`,e)})}getFromUrl(e){return Ge(this,null,function*(){return this.#i(e,e)})}getFromBlob(e,t){return Ge(this,null,function*(){let n=yield t;return this.#i(e,n)})}getFromId(e){return Ge(this,null,function*(){this.#n||=new Map;let t=this.#n.get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){let{blobPromise:n}=t;return delete t.blobPromise,this.getFromBlob(t.id,n)}return this.getFromUrl(t.url)})}getFromCanvas(e,t){this.#n||=new Map;let n=this.#n.get(e);if(n?.bitmap)return n.refCounter+=1,n;let r=new OffscreenCanvas(t.width,t.height);return r.getContext("2d").drawImage(t,0,0),n={bitmap:r.transferToImageBitmap(),id:`image_${this.#e}_${this.#t++}`,refCounter:1,isSvg:!1},this.#n.set(e,n),this.#n.set(n.id,n),n}getSvgUrl(e){let t=this.#n.get(e);return t?.isSvg?t.svgUrl:null}deleteId(e){this.#n||=new Map;let t=this.#n.get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;let{bitmap:n}=t;if(!t.url&&!t.file){let r=new OffscreenCanvas(n.width,n.height);r.getContext("bitmaprenderer").transferFromImageBitmap(n),t.blobPromise=r.convertToBlob()}n.close?.(),t.bitmap=null}isValidId(e){return e.startsWith(`image_${this.#e}_`)}},fk=class{#e=[];#t=!1;#n;#i=-1;constructor(e=128){this.#n=e}add({cmd:e,undo:t,post:n,mustExec:r,type:o=NaN,overwriteIfSameType:s=!1,keepUndo:a=!1}){if(r&&e(),this.#t)return;let l={cmd:e,undo:t,post:n,type:o};if(this.#i===-1){this.#e.length>0&&(this.#e.length=0),this.#i=0,this.#e.push(l);return}if(s&&this.#e[this.#i].type===o){a&&(l.undo=this.#e[this.#i].undo),this.#e[this.#i]=l;return}let c=this.#i+1;c===this.#n?this.#e.splice(0,1):(this.#i=c,c<this.#e.length&&this.#e.splice(c)),this.#e.push(l)}undo(){if(this.#i===-1)return;this.#t=!0;let{undo:e,post:t}=this.#e[this.#i];e(),t?.(),this.#t=!1,this.#i-=1}redo(){if(this.#i<this.#e.length-1){this.#i+=1,this.#t=!0;let{cmd:e,post:t}=this.#e[this.#i];e(),t?.(),this.#t=!1}}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#e.length-1}cleanType(e){if(this.#i!==-1){for(let t=this.#i;t>=0;t--)if(this.#e[t].type!==e){this.#e.splice(t+1,this.#i-t),this.#i=t;return}this.#e.length=0,this.#i=-1}}destroy(){this.#e=null}},O0=class{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;let{isMac:t}=vr.platform;for(let[n,r,o={}]of e)for(let s of n){let a=s.startsWith("mac+");t&&a?(this.callbacks.set(s.slice(4),{callback:r,options:o}),this.allKeys.add(s.split("+").at(-1))):!t&&!a&&(this.callbacks.set(s,{callback:r,options:o}),this.allKeys.add(s.split("+").at(-1)))}}#e(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);let t=this.buffer.join("+");return this.buffer.length=0,t}exec(e,t){if(!this.allKeys.has(t.key))return;let n=this.callbacks.get(this.#e(t));if(!n)return;let{callback:r,options:{bubbles:o=!1,args:s=[],checker:a=null}}=n;a&&!a(e,t)||(r.bind(e,...s,t)(),o||sr(t))}},gk=class i{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){let e=new Map([["CanvasText",null],["Canvas",null]]);return kse(e),gn(this,"_colors",e)}convert(e){let t=DA(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(let[n,r]of this._colors)if(r.every((o,s)=>o===t[s]))return i._colorsMapping.get(n);return t}getHexCode(e){let t=this._colors.get(e);return t?Mt.makeHexColor(...t):e}},px=(()=>{class i{#e=new AbortController;#t=null;#n=new Map;#i=new Map;#o=null;#r=null;#a=null;#s=new fk;#u=null;#c=null;#h=0;#d=new Set;#f=null;#l=null;#g=new Set;_editorUndoBar=null;#m=!1;#p=!1;#x=!1;#_=null;#v=null;#C=null;#w=null;#E=!1;#O=null;#k=new uk;#y=!1;#S=!1;#P=null;#D=null;#F=null;#I=null;#j=null;#M=Ut.NONE;#b=new Set;#L=null;#R=null;#H=null;#G=null;#$={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#V=[0,0];#T=null;#B=null;#U=null;#N=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){let t=i.prototype,n=a=>a.#B.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),r=(a,{target:l})=>{if(l instanceof HTMLInputElement){let{type:c}=l;return c!=="text"&&c!=="number"}return!0},o=this.TRANSLATE_SMALL,s=this.TRANSLATE_BIG;return gn(this,"_keyboardManager",new O0([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:r}],[["ctrl+z","mac+meta+z"],t.undo,{checker:r}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:r}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:r}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&a.#B.contains(l)&&!a.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&a.#B.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:n}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:n}]]))}constructor(t,n,r,o,s,a,l,c,d,h,p,g,_,b){let C=this._signal=this.#e.signal;this.#B=t,this.#U=n,this.#o=r,this.#R=o,this._eventBus=s,s._on("editingaction",this.onEditingAction.bind(this),{signal:C}),s._on("pagechanging",this.onPageChanging.bind(this),{signal:C}),s._on("scalechanging",this.onScaleChanging.bind(this),{signal:C}),s._on("rotationchanging",this.onRotationChanging.bind(this),{signal:C}),s._on("setpreference",this.onSetPreference.bind(this),{signal:C}),s._on("switchannotationeditorparams",y=>this.updateParams(y.type,y.value),{signal:C}),this.#ie(),this.#ae(),this.#X(),this.#r=a.annotationStorage,this.#_=a.filterFactory,this.#H=l,this.#w=c||null,this.#m=d,this.#p=h,this.#x=p,this.#j=g||null,this.viewParameters={realScale:zd.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=_||null,this._supportsPinchToZoom=b!==!1}destroy(){this.#N?.resolve(),this.#N=null,this.#e?.abort(),this.#e=null,this._signal=null;for(let t of this.#i.values())t.destroy();this.#i.clear(),this.#n.clear(),this.#g.clear(),this.#I?.clear(),this.#t=null,this.#b.clear(),this.#s.destroy(),this.#o?.destroy(),this.#R?.destroy(),this.#O?.hide(),this.#O=null,this.#F?.destroy(),this.#F=null,this.#v&&(clearTimeout(this.#v),this.#v=null),this.#T&&(clearTimeout(this.#T),this.#T=null),this._editorUndoBar?.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#j}get useNewAltTextFlow(){return this.#p}get useNewAltTextWhenAddingImage(){return this.#x}get hcmFilter(){return gn(this,"hcmFilter",this.#H?this.#_.addHCMFilter(this.#H.foreground,this.#H.background):"none")}get direction(){return gn(this,"direction",getComputedStyle(this.#B).direction)}get highlightColors(){return gn(this,"highlightColors",this.#w?new Map(this.#w.split(",").map(t=>t.split("=").map(n=>n.trim()))):null)}get highlightColorNames(){return gn(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#c=t}setMainHighlightColorPicker(t){this.#F=t}editAltText(t,n=!1){this.#o?.editAltText(this,t,n)}getSignature(t){this.#R?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#R}switchToMode(t,n){this._eventBus.on("annotationeditormodechanged",n,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,n){this._eventBus.dispatch("setpreference",{source:this,name:t,value:n})}onSetPreference({name:t,value:n}){switch(t){case"enableNewAltTextWhenAddingImage":this.#x=n;break}}onPageChanging({pageNumber:t}){this.#h=t-1}focusMainContainer(){this.#B.focus()}findParent(t,n){for(let r of this.#i.values()){let{x:o,y:s,width:a,height:l}=r.div.getBoundingClientRect();if(t>=o&&t<=o+a&&n>=s&&n<=s+l)return r}return null}disableUserSelect(t=!1){this.#U.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#g.add(t)}removeShouldRescale(t){this.#g.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*zd.PDF_TO_CSS_UNITS;for(let n of this.#g)n.onScaleChanging();this.#c?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#q({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#Y(t){let{currentLayer:n}=this;if(n.hasTextLayer(t))return n;for(let r of this.#i.values())if(r.hasTextLayer(t))return r;return null}highlightSelection(t=""){let n=document.getSelection();if(!n||n.isCollapsed)return;let{anchorNode:r,anchorOffset:o,focusNode:s,focusOffset:a}=n,l=n.toString(),d=this.#q(n).closest(".textLayer"),h=this.getSelectionBoxes(d);if(!h)return;n.empty();let p=this.#Y(d),g=this.#M===Ut.NONE,_=()=>{p?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:h,anchorNode:r,anchorOffset:o,focusNode:s,focusOffset:a,text:l}),g&&this.showAllEditors("highlight",!0,!0)};if(g){this.switchToMode(Ut.HIGHLIGHT,_);return}_()}#te(){let t=document.getSelection();if(!t||t.isCollapsed)return;let r=this.#q(t).closest(".textLayer"),o=this.getSelectionBoxes(r);o&&(this.#O||=new dk(this),this.#O.show(r,o,this.direction==="ltr"))}addToAnnotationStorage(t){!t.isEmpty()&&this.#r&&!this.#r.has(t.id)&&this.#r.setValue(t.id,t)}#ne(){let t=document.getSelection();if(!t||t.isCollapsed){this.#L&&(this.#O?.hide(),this.#L=null,this.#A({hasSelectedText:!1}));return}let{anchorNode:n}=t;if(n===this.#L)return;let o=this.#q(t).closest(".textLayer");if(!o){this.#L&&(this.#O?.hide(),this.#L=null,this.#A({hasSelectedText:!1}));return}if(this.#O?.hide(),this.#L=n,this.#A({hasSelectedText:!0}),!(this.#M!==Ut.HIGHLIGHT&&this.#M!==Ut.NONE)&&(this.#M===Ut.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#E=this.isShiftKeyDown,!this.isShiftKeyDown)){let s=this.#M===Ut.HIGHLIGHT?this.#Y(o):null;s?.toggleDrawing();let a=new AbortController,l=this.combinedSignal(a),c=d=>{d.type==="pointerup"&&d.button!==0||(a.abort(),s?.toggleDrawing(!0),d.type==="pointerup"&&this.#K("main_toolbar"))};window.addEventListener("pointerup",c,{signal:l}),window.addEventListener("blur",c,{signal:l})}}#K(t=""){this.#M===Ut.HIGHLIGHT?this.highlightSelection(t):this.#m&&this.#te()}#ie(){document.addEventListener("selectionchange",this.#ne.bind(this),{signal:this._signal})}#re(){if(this.#C)return;this.#C=new AbortController;let t=this.combinedSignal(this.#C);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#oe(){this.#C?.abort(),this.#C=null}blur(){if(this.isShiftKeyDown=!1,this.#E&&(this.#E=!1,this.#K("main_toolbar")),!this.hasSelection)return;let{activeElement:t}=document;for(let n of this.#b)if(n.div.contains(t)){this.#D=[n,t],n._focusEventsAllowed=!1;break}}focus(){if(!this.#D)return;let[t,n]=this.#D;this.#D=null,n.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),n.focus()}#X(){if(this.#P)return;this.#P=new AbortController;let t=this.combinedSignal(this.#P);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#se(){this.#P?.abort(),this.#P=null}#Q(){if(this.#u)return;this.#u=new AbortController;let t=this.combinedSignal(this.#u);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#J(){this.#u?.abort(),this.#u=null}#ae(){let t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#X(),this.#Q()}removeEditListeners(){this.#se(),this.#J()}dragOver(t){for(let{type:n}of t.dataTransfer.items)for(let r of this.#l)if(r.isHandlingMimeForPasting(n)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(let n of t.dataTransfer.items)for(let r of this.#l)if(r.isHandlingMimeForPasting(n.type)){r.paste(n,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;let n=[];for(let r of this.#b){let o=r.serialize(!0);o&&n.push(o)}n.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(n))}cut(t){this.copy(t),this.delete()}paste(t){return Ge(this,null,function*(){t.preventDefault();let{clipboardData:n}=t;for(let s of n.items)for(let a of this.#l)if(a.isHandlingMimeForPasting(s.type)){a.paste(s,this.currentLayer);return}let r=n.getData("application/pdfjs");if(!r)return;try{r=JSON.parse(r)}catch(s){Ht(`paste: "${s.message}".`);return}if(!Array.isArray(r))return;this.unselectAll();let o=this.currentLayer;try{let s=[];for(let c of r){let d=yield o.deserialize(c);if(!d)return;s.push(d)}let a=()=>{for(let c of s)this.#Z(c);this.#ee(s)},l=()=>{for(let c of s)c.remove()};this.addCommands({cmd:a,undo:l,mustExec:!0})}catch(s){Ht(`paste: "${s.message}".`)}})}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#M!==Ut.NONE&&!this.isEditorHandlingKeyboard&&i._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#E&&(this.#E=!1,this.#K("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}#A(t){Object.entries(t).some(([r,o])=>this.#$[r]!==o)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#$,t)}),this.#M===Ut.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#z([[mn.HIGHLIGHT_FREE,!0]]))}#z(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#re(),this.#Q(),this.#A({isEditing:this.#M!==Ut.NONE,isEmpty:this.#W(),hasSomethingToUndo:this.#s.hasSomethingToUndo(),hasSomethingToRedo:this.#s.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#oe(),this.#J(),this.#A({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#l){this.#l=t;for(let n of this.#l)this.#z(n.defaultPropertiesToUpdate)}}getId(){return this.#k.id}get currentLayer(){return this.#i.get(this.#h)}getLayer(t){return this.#i.get(t)}get currentPageIndex(){return this.#h}addLayer(t){this.#i.set(t.pageIndex,t),this.#y?t.enable():t.disable()}removeLayer(t){this.#i.delete(t.pageIndex)}updateMode(t,n=null,r=!1){return Ge(this,null,function*(){if(this.#M!==t&&!(this.#N&&(yield this.#N.promise,!this.#N))){if(this.#N=Promise.withResolvers(),this.#c?.commitOrRemove(),this.#M=t,t===Ut.NONE){this.setEditingState(!1),this.#ce(),this._editorUndoBar?.hide(),this.#N.resolve();return}t===Ut.SIGNATURE&&(yield this.#R?.loadSignatures()),this.setEditingState(!0),yield this.#le(),this.unselectAll();for(let o of this.#i.values())o.updateMode(t);if(!n){r&&this.addNewEditorFromKeyboard(),this.#N.resolve();return}for(let o of this.#n.values())o.annotationElementId===n||o.id===n?(this.setSelected(o),o.enterInEditMode()):o.unselect();this.#N.resolve()}})}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#M&&this._eventBus.dispatch("switchannotationeditormode",Ie({source:this},t))}updateParams(t,n){if(this.#l){switch(t){case mn.CREATE:this.currentLayer.addNewEditor(n);return;case mn.HIGHLIGHT_DEFAULT_COLOR:this.#F?.updateColor(n);break;case mn.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#G||=new Map).set(t,n),this.showAllEditors("highlight",n);break}for(let r of this.#b)r.updateParams(t,n);for(let r of this.#l)r.updateDefaultParams(t,n)}}showAllEditors(t,n,r=!1){for(let s of this.#n.values())s.editorType===t&&s.show(n);(this.#G?.get(mn.HIGHLIGHT_SHOW_ALL)??!0)!==n&&this.#z([[mn.HIGHLIGHT_SHOW_ALL,n]])}enableWaiting(t=!1){if(this.#S!==t){this.#S=t;for(let n of this.#i.values())t?n.disableClick():n.enableClick(),n.div.classList.toggle("waiting",t)}}#le(){return Ge(this,null,function*(){if(!this.#y){this.#y=!0;let t=[];for(let n of this.#i.values())t.push(n.enable());yield Promise.all(t);for(let n of this.#n.values())n.enable()}})}#ce(){if(this.unselectAll(),this.#y){this.#y=!1;for(let t of this.#i.values())t.disable();for(let t of this.#n.values())t.disable()}}getEditors(t){let n=[];for(let r of this.#n.values())r.pageIndex===t&&n.push(r);return n}getEditor(t){return this.#n.get(t)}addEditor(t){this.#n.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#v&&clearTimeout(this.#v),this.#v=setTimeout(()=>{this.focusMainContainer(),this.#v=null},0)),this.#n.delete(t.id),t.annotationElementId&&this.#I?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#d.has(t.annotationElementId))&&this.#r?.remove(t.id)}addDeletedAnnotationElement(t){this.#d.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#d.has(t)}removeDeletedAnnotationElement(t){this.#d.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#Z(t){let n=this.#i.get(t.pageIndex);n?n.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#t!==t&&(this.#t=t,t&&this.#z(t.propertiesToUpdate))}get#de(){let t=null;for(t of this.#b);return t}updateUI(t){this.#de===t&&this.#z(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#z(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#b.has(t)){this.#b.delete(t),t.unselect(),this.#A({hasSelectedEditor:this.hasSelection});return}this.#b.add(t),t.select(),this.#z(t.propertiesToUpdate),this.#A({hasSelectedEditor:!0})}setSelected(t){this.#c?.commitOrRemove();for(let n of this.#b)n!==t&&n.unselect();this.#b.clear(),this.#b.add(t),t.select(),this.#z(t.propertiesToUpdate),this.#A({hasSelectedEditor:!0})}isSelected(t){return this.#b.has(t)}get firstSelectedEditor(){return this.#b.values().next().value}unselect(t){t.unselect(),this.#b.delete(t),this.#A({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#b.size!==0}get isEnterHandled(){return this.#b.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#s.undo(),this.#A({hasSomethingToUndo:this.#s.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#W()}),this._editorUndoBar?.hide()}redo(){this.#s.redo(),this.#A({hasSomethingToUndo:!0,hasSomethingToRedo:this.#s.hasSomethingToRedo(),isEmpty:this.#W()})}addCommands(t){this.#s.add(t),this.#A({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#W()})}cleanUndoStack(t){this.#s.cleanType(t)}#W(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(let t of this.#n.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();let t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;let n=t?[t]:[...this.#b],r=()=>{this._editorUndoBar?.show(o,n.length===1?n[0].editorType:n.length);for(let s of n)s.remove()},o=()=>{for(let s of n)this.#Z(s)};this.addCommands({cmd:r,undo:o,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#ee(t){for(let n of this.#b)n.unselect();this.#b.clear();for(let n of t)n.isEmpty()||(this.#b.add(n),n.select());this.#A({hasSelectedEditor:this.hasSelection})}selectAll(){for(let t of this.#b)t.commit();this.#ee(this.#n.values())}unselectAll(){if(!(this.#t&&(this.#t.commitOrRemove(),this.#M!==Ut.NONE))&&!this.#c?.commitOrRemove()&&this.hasSelection){for(let t of this.#b)t.unselect();this.#b.clear(),this.#A({hasSelectedEditor:!1})}}translateSelectedEditors(t,n,r=!1){if(r||this.commitOrRemove(),!this.hasSelection)return;this.#V[0]+=t,this.#V[1]+=n;let[o,s]=this.#V,a=[...this.#b],l=1e3;this.#T&&clearTimeout(this.#T),this.#T=setTimeout(()=>{this.#T=null,this.#V[0]=this.#V[1]=0,this.addCommands({cmd:()=>{for(let c of a)this.#n.has(c.id)&&(c.translateInPage(o,s),c.translationDone())},undo:()=>{for(let c of a)this.#n.has(c.id)&&(c.translateInPage(-o,-s),c.translationDone())},mustExec:!1})},l);for(let c of a)c.translateInPage(t,n),c.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#f=new Map;for(let t of this.#b)this.#f.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#f)return!1;this.disableUserSelect(!1);let t=this.#f;this.#f=null;let n=!1;for(let[{x:o,y:s,pageIndex:a},l]of t)l.newX=o,l.newY=s,l.newPageIndex=a,n||=o!==l.savedX||s!==l.savedY||a!==l.savedPageIndex;if(!n)return!1;let r=(o,s,a,l)=>{if(this.#n.has(o.id)){let c=this.#i.get(l);c?o._setParentAndPosition(c,s,a):(o.pageIndex=l,o.x=s,o.y=a)}};return this.addCommands({cmd:()=>{for(let[o,{newX:s,newY:a,newPageIndex:l}]of t)r(o,s,a,l)},undo:()=>{for(let[o,{savedX:s,savedY:a,savedPageIndex:l}]of t)r(o,s,a,l)},mustExec:!0}),!0}dragSelectedEditors(t,n){if(this.#f)for(let r of this.#f.keys())r.drag(t,n)}rebuild(t){if(t.parent===null){let n=this.getLayer(t.pageIndex);n?(n.changeParent(t),n.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#b.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#t===t}getActive(){return this.#t}getMode(){return this.#M}get imageManager(){return gn(this,"imageManager",new hk)}getSelectionBoxes(t){if(!t)return null;let n=document.getSelection();for(let d=0,h=n.rangeCount;d<h;d++)if(!t.contains(n.getRangeAt(d).commonAncestorContainer))return null;let{x:r,y:o,width:s,height:a}=t.getBoundingClientRect(),l;switch(t.getAttribute("data-main-rotation")){case"90":l=(d,h,p,g)=>({x:(h-o)/a,y:1-(d+p-r)/s,width:g/a,height:p/s});break;case"180":l=(d,h,p,g)=>({x:1-(d+p-r)/s,y:1-(h+g-o)/a,width:p/s,height:g/a});break;case"270":l=(d,h,p,g)=>({x:1-(h+g-o)/a,y:(d-r)/s,width:g/a,height:p/s});break;default:l=(d,h,p,g)=>({x:(d-r)/s,y:(h-o)/a,width:p/s,height:g/a});break}let c=[];for(let d=0,h=n.rangeCount;d<h;d++){let p=n.getRangeAt(d);if(!p.collapsed)for(let{x:g,y:_,width:b,height:C}of p.getClientRects())b===0||C===0||c.push(l(g,_,b,C))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:t,id:n}){(this.#a||=new Map).set(t,n)}removeChangedExistingAnnotation({annotationElementId:t}){this.#a?.delete(t)}renderAnnotationElement(t){let n=this.#a?.get(t.data.id);if(!n)return;let r=this.#r.getRawValue(n);r&&(this.#M===Ut.NONE&&!r.hasBeenModified||r.renderAnnotationElement(t))}setMissingCanvas(t,n,r){let o=this.#I?.get(t);o&&(o.setCanvas(n,r),this.#I.delete(t))}addMissingCanvas(t,n){(this.#I||=new Map).set(t,n)}}return i})(),yR=(()=>{class i{#e=null;#t=!1;#n=null;#i=null;#o=null;#r=null;#a=!1;#s=null;#u=null;#c=null;#h=null;#d=!1;static#f=null;static _l10n=null;constructor(t){this.#u=t,this.#d=t._uiManager.useNewAltTextFlow,i.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){i._l10n??=t}render(){return Ge(this,null,function*(){let t=this.#n=document.createElement("button");t.className="altText",t.tabIndex="0";let n=this.#i=document.createElement("span");t.append(n),this.#d?(t.classList.add("new"),t.setAttribute("data-l10n-id",i.#f.missing),n.setAttribute("data-l10n-id",i.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));let r=this.#u._uiManager._signal;t.addEventListener("contextmenu",Ia,{signal:r}),t.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:r});let o=s=>{s.preventDefault(),this.#u._uiManager.editAltText(this.#u),this.#d&&this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#l}})};return t.addEventListener("click",o,{capture:!0,signal:r}),t.addEventListener("keydown",s=>{s.target===t&&s.key==="Enter"&&(this.#a=!0,o(s))},{signal:r}),yield this.#g(),t})}get#l(){return this.#e&&"added"||this.#e===null&&this.guessedText&&"review"||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#a}),this.#a=!1)}isEmpty(){return this.#d?this.#e===null:!this.#e&&!this.#t}hasData(){return this.#d?this.#e!==null||!!this.#c:this.isEmpty()}get guessedText(){return this.#c}setGuessedText(t){return Ge(this,null,function*(){this.#e===null&&(this.#c=t,this.#h=yield i._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#g())})}toggleAltTextBadge(t=!1){if(!this.#d||this.#e){this.#s?.remove(),this.#s=null;return}if(!this.#s){let n=this.#s=document.createElement("div");n.className="noAltTextBadge",this.#u.div.append(n)}this.#s.classList.toggle("hidden",!t)}serialize(t){let n=this.#e;return!t&&this.#c===n&&(n=this.#h),{altText:n,decorative:this.#t,guessedText:this.#c,textWithDisclaimer:this.#h}}get data(){return{altText:this.#e,decorative:this.#t}}set data({altText:t,decorative:n,guessedText:r,textWithDisclaimer:o,cancel:s=!1}){r&&(this.#c=r,this.#h=o),!(this.#e===t&&this.#t===n)&&(s||(this.#e=t,this.#t=n),this.#g())}toggle(t=!1){this.#n&&(!t&&this.#r&&(clearTimeout(this.#r),this.#r=null),this.#n.disabled=!t)}shown(){this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#l}})}destroy(){this.#n?.remove(),this.#n=null,this.#i=null,this.#o=null,this.#s?.remove(),this.#s=null}#g(){return Ge(this,null,function*(){let t=this.#n;if(!t)return;if(this.#d){if(t.classList.toggle("done",!!this.#e),t.setAttribute("data-l10n-id",i.#f[this.#l]),this.#i?.setAttribute("data-l10n-id",i.#f[`${this.#l}-label`]),!this.#e){this.#o?.remove();return}}else{if(!this.#e&&!this.#t){t.classList.remove("done"),this.#o?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let n=this.#o;if(!n){this.#o=n=document.createElement("span"),n.className="tooltip",n.setAttribute("role","tooltip"),n.id=`alt-text-tooltip-${this.#u.id}`;let o=100,s=this.#u._uiManager._signal;s.addEventListener("abort",()=>{clearTimeout(this.#r),this.#r=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#r=setTimeout(()=>{this.#r=null,this.#o.classList.add("show"),this.#u._reportTelemetry({action:"alt_text_tooltip"})},o)},{signal:s}),t.addEventListener("mouseleave",()=>{this.#r&&(clearTimeout(this.#r),this.#r=null),this.#o?.classList.remove("show")},{signal:s})}this.#t?n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(n.removeAttribute("data-l10n-id"),n.textContent=this.#e),n.parentNode||t.append(n),this.#u.getElementForAltText()?.setAttribute("aria-describedby",n.id)})}}return i})(),zy=class i{#e;#t=!1;#n=null;#i;#o;#r;#a;#s=null;#u;#c=null;#h;#d=null;constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:n=null,onPinchStart:r=null,onPinching:o=null,onPinchEnd:s=null,signal:a}){this.#e=e,this.#n=n,this.#i=t,this.#o=r,this.#r=o,this.#a=s,this.#h=new AbortController,this.#u=AbortSignal.any([a,this.#h.signal]),e.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#u})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Ec.pixelRatio}#f(e){if(this.#i?.())return;if(e.touches.length===1){if(this.#s)return;let r=this.#s=new AbortController,o=AbortSignal.any([this.#u,r.signal]),s=this.#e,a={capture:!0,signal:o,passive:!1},l=c=>{c.pointerType==="touch"&&(this.#s?.abort(),this.#s=null)};s.addEventListener("pointerdown",c=>{c.pointerType==="touch"&&(sr(c),l(c))},a),s.addEventListener("pointerup",l,a),s.addEventListener("pointercancel",l,a);return}if(!this.#d){this.#d=new AbortController;let r=AbortSignal.any([this.#u,this.#d.signal]),o=this.#e,s={signal:r,capture:!1,passive:!1};o.addEventListener("touchmove",this.#l.bind(this),s);let a=this.#g.bind(this);o.addEventListener("touchend",a,s),o.addEventListener("touchcancel",a,s),s.capture=!0,o.addEventListener("pointerdown",sr,s),o.addEventListener("pointermove",sr,s),o.addEventListener("pointercancel",sr,s),o.addEventListener("pointerup",sr,s),this.#o?.()}if(sr(e),e.touches.length!==2||this.#n?.()){this.#c=null;return}let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]),this.#c={touch0X:t.screenX,touch0Y:t.screenY,touch1X:n.screenX,touch1Y:n.screenY}}#l(e){if(!this.#c||e.touches.length!==2)return;sr(e);let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]);let{screenX:r,screenY:o}=t,{screenX:s,screenY:a}=n,l=this.#c,{touch0X:c,touch0Y:d,touch1X:h,touch1Y:p}=l,g=h-c,_=p-d,b=s-r,C=a-o,y=Math.hypot(b,C)||1,M=Math.hypot(g,_)||1;if(!this.#t&&Math.abs(M-y)<=i.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=r,l.touch0Y=o,l.touch1X=s,l.touch1Y=a,!this.#t){this.#t=!0;return}let O=[(r+s)/2,(o+a)/2];this.#r?.(O,M,y)}#g(e){e.touches.length>=2||(this.#d&&(this.#d.abort(),this.#d=null,this.#a?.()),this.#c&&(sr(e),this.#c=null,this.#t=!1))}destroy(){this.#h?.abort(),this.#h=null,this.#s?.abort(),this.#s=null}},ci=class i{#e=null;#t=null;#n=null;#i=!1;#o=null;#r="";#a=!1;#s=null;#u=null;#c=null;#h=null;#d="";#f=!1;#l=null;#g=!1;#m=!1;#p=!1;#x=null;#_=0;#v=0;#C=null;#w=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#E=!1;#O=i._zIndex++;static _borderLineWidth=-1;static _colorManager=new gk;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){let e=i.prototype._resizeWithKeyboard,t=px.TRANSLATE_SMALL,n=px.TRANSLATE_BIG;return gn(this,"_resizerKeyboardManager",new O0([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],i.prototype._stopResizingWithKeyboard]]))}constructor(e){this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;let{rotation:t,rawDims:{pageWidth:n,pageHeight:r,pageX:o,pageY:s}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,r],this.pageTranslation=[o,s];let[a,l]=this.parentDimensions;this.x=e.x/a,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return gn(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){let t=new pk({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(i._l10n??=e,i._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),i._borderLineWidth!==-1)return;let n=getComputedStyle(document.documentElement);i._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Xn("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#E}set _isDraggable(e){this.#E=e,this.div?.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){let[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#O}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):this.#U(),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#f?this.#f=!1:this.parent.setSelected(this))}focusout(e){!this._focusEventsAllowed||!this.isAttachedToDOM||e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,r){let[o,s]=this.parentDimensions;[n,r]=this.screenToPageTranslation(n,r),this.x=(e+n)/o,this.y=(t+r)/s,this.fixAndSetPosition()}_moveAfterPaste(e,t){let[n,r]=this.parentDimensions;this.setAt(e*n,t*r,this.width*n,this.height*r),this._onTranslated()}#k([e,t],n,r){[n,r]=this.screenToPageTranslation(n,r),this.x+=n/e,this.y+=r/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(e,t){this.#k(this.parentDimensions,e,t)}translateInPage(e,t){this.#l||=[this.x,this.y,this.width,this.height],this.#k(this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){this.#l||=[this.x,this.y,this.width,this.height];let{div:n,parentDimensions:[r,o]}=this;if(this.x+=e/r,this.y+=t/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){let{x:h,y:p}=this.div.getBoundingClientRect();this.parent.findNewParent(this,h,p)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:s,y:a}=this,[l,c]=this.getBaseTranslation();s+=l,a+=c;let{style:d}=n;d.left=`${(100*s).toFixed(2)}%`,d.top=`${(100*a).toFixed(2)}%`,this._onTranslating(s,a),n.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!this.#l&&(this.#l[0]!==this.x||this.#l[1]!==this.y)}get _hasBeenResized(){return!!this.#l&&(this.#l[2]!==this.width||this.#l[3]!==this.height)}getBaseTranslation(){let[e,t]=this.parentDimensions,{_borderLineWidth:n}=i,r=n/e,o=n/t;switch(this.rotation){case 90:return[-r,o];case 180:return[r,o];case 270:return[r,-o];default:return[-r,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){let{div:{style:t},pageDimensions:[n,r]}=this,{x:o,y:s,width:a,height:l}=this;if(a*=n,l*=r,o*=n,s*=r,this._mustFixPosition)switch(e){case 0:o=po(o,0,n-a),s=po(s,0,r-l);break;case 90:o=po(o,0,n-l),s=po(s,a,r);break;case 180:o=po(o,a,n),s=po(s,l,r);break;case 270:o=po(o,l,n),s=po(s,0,r-a);break}this.x=o/=n,this.y=s/=r;let[c,d]=this.getBaseTranslation();o+=c,s+=d,t.left=`${(100*o).toFixed(2)}%`,t.top=`${(100*s).toFixed(2)}%`,this.moveInDOM()}static#y(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}screenToPageTranslation(e,t){return i.#y(e,t,this.parentRotation)}pageTranslationToScreen(e,t){return i.#y(e,t,360-this.parentRotation)}#S(e){switch(e){case 90:{let[t,n]=this.pageDimensions;return[0,-t/n,n/t,0]}case 180:return[-1,0,0,-1];case 270:{let[t,n]=this.pageDimensions;return[0,t/n,-n/t,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){let{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(e,t){let[n,r]=this.parentDimensions,{style:o}=this.div;o.width=`${(100*e/n).toFixed(2)}%`,this.#a||(o.height=`${(100*t/r).toFixed(2)}%`)}fixDims(){let{style:e}=this.div,{height:t,width:n}=e,r=n.endsWith("%"),o=!this.#a&&t.endsWith("%");if(r&&o)return;let[s,a]=this.parentDimensions;r||(e.width=`${(100*parseFloat(n)/s).toFixed(2)}%`),!this.#a&&!o&&(e.height=`${(100*parseFloat(t)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#P(){if(this.#s)return;this.#s=document.createElement("div"),this.#s.classList.add("resizers");let e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(let n of e){let r=document.createElement("div");this.#s.append(r),r.classList.add("resizer",n),r.setAttribute("data-resizer-name",n),r.addEventListener("pointerdown",this.#D.bind(this,n),{signal:t}),r.addEventListener("contextmenu",Ia,{signal:t}),r.tabIndex=-1}this.div.prepend(this.#s)}#D(e,t){t.preventDefault();let{isMac:n}=vr.platform;if(t.button!==0||t.ctrlKey&&n)return;this.#n?.toggle(!1);let r=this._isDraggable;this._isDraggable=!1,this.#u=[t.screenX,t.screenY];let o=new AbortController,s=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#j.bind(this,e),{passive:!0,capture:!0,signal:s}),window.addEventListener("touchmove",sr,{passive:!1,signal:s}),window.addEventListener("contextmenu",Ia,{signal:s}),this.#c={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};let a=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;let c=()=>{o.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=a,this.div.style.cursor=l,this.#I()};window.addEventListener("pointerup",c,{signal:s}),window.addEventListener("blur",c,{signal:s})}#F(e,t,n,r){this.width=n,this.height=r,this.x=e,this.y=t;let[o,s]=this.parentDimensions;this.setDims(o*n,s*r),this.fixAndSetPosition(),this._onResized()}_onResized(){}#I(){if(!this.#c)return;let{savedX:e,savedY:t,savedWidth:n,savedHeight:r}=this.#c;this.#c=null;let o=this.x,s=this.y,a=this.width,l=this.height;o===e&&s===t&&a===n&&l===r||this.addCommands({cmd:this.#F.bind(this,o,s,a,l),undo:this.#F.bind(this,e,t,n,r),mustExec:!0})}static _round(e){return Math.round(e*1e4)/1e4}#j(e,t){let[n,r]=this.parentDimensions,o=this.x,s=this.y,a=this.width,l=this.height,c=i.MIN_SIZE/n,d=i.MIN_SIZE/r,h=this.#S(this.rotation),p=(X,ie)=>[h[0]*X+h[2]*ie,h[1]*X+h[3]*ie],g=this.#S(360-this.rotation),_=(X,ie)=>[g[0]*X+g[2]*ie,g[1]*X+g[3]*ie],b,C,y=!1,M=!1;switch(e){case"topLeft":y=!0,b=(X,ie)=>[0,0],C=(X,ie)=>[X,ie];break;case"topMiddle":b=(X,ie)=>[X/2,0],C=(X,ie)=>[X/2,ie];break;case"topRight":y=!0,b=(X,ie)=>[X,0],C=(X,ie)=>[0,ie];break;case"middleRight":M=!0,b=(X,ie)=>[X,ie/2],C=(X,ie)=>[0,ie/2];break;case"bottomRight":y=!0,b=(X,ie)=>[X,ie],C=(X,ie)=>[0,0];break;case"bottomMiddle":b=(X,ie)=>[X/2,ie],C=(X,ie)=>[X/2,0];break;case"bottomLeft":y=!0,b=(X,ie)=>[0,ie],C=(X,ie)=>[X,0];break;case"middleLeft":M=!0,b=(X,ie)=>[0,ie/2],C=(X,ie)=>[X,ie/2];break}let O=b(a,l),A=C(a,l),D=p(...A),N=i._round(o+D[0]),B=i._round(s+D[1]),T=1,H=1,te,L;if(t.fromKeyboard)({deltaX:te,deltaY:L}=t);else{let{screenX:X,screenY:ie}=t,[oe,le]=this.#u;[te,L]=this.screenToPageTranslation(X-oe,ie-le),this.#u[0]=X,this.#u[1]=ie}if([te,L]=_(te/n,L/r),y){let X=Math.hypot(a,l);T=H=Math.max(Math.min(Math.hypot(A[0]-O[0]-te,A[1]-O[1]-L)/X,1/a,1/l),c/a,d/l)}else M?T=po(Math.abs(A[0]-O[0]-te),c,1)/a:H=po(Math.abs(A[1]-O[1]-L),d,1)/l;let z=i._round(a*T),J=i._round(l*H);D=p(...C(z,J));let Q=N-D[0],ce=B-D[1];this.#l||=[this.x,this.y,this.width,this.height],this.width=z,this.height=J,this.x=Q,this.y=ce,this.setDims(n*z,r*J),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#n?.finish()}addEditToolbar(){return Ge(this,null,function*(){return this._editToolbar||this.#m?this._editToolbar:(this._editToolbar=new ck(this),this.div.append(this._editToolbar.render()),this.#n&&(yield this._editToolbar.addAltText(this.#n)),this._editToolbar)})}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#n?.destroy())}addContainer(e){let t=this._editToolbar?.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}addAltTextButton(){return Ge(this,null,function*(){this.#n||(yR.initialize(i._l10n),this.#n=new yR(this),this.#e&&(this.#n.data=this.#e,this.#e=null),yield this.addEditToolbar())})}get altTextData(){return this.#n?.data}set altTextData(e){this.#n&&(this.#n.data=e)}get guessedAltText(){return this.#n?.guessedText}setGuessedAltText(e){return Ge(this,null,function*(){yield this.#n?.setGuessedText(e)})}serializeAltText(e){return this.#n?.serialize(e)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}render(){let e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=this.#i?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),this.#G();let[t,n]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*n/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/n).toFixed(2)}%`);let[r,o]=this.getInitialTranslation();return this.translate(r,o),jR(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#w||=new zy({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#M.bind(this),onPinching:this.#b.bind(this),onPinchEnd:this.#L.bind(this),signal:this._uiManager._signal})),this._uiManager._editorUndoBar?.hide(),e}#M(){this.#c={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#n?.toggle(!1),this.parent.togglePointerEvents(!1)}#b(e,t,n){let o=.7*(n/t)+1-.7;if(o===1)return;let s=this.#S(this.rotation),a=(N,B)=>[s[0]*N+s[2]*B,s[1]*N+s[3]*B],[l,c]=this.parentDimensions,d=this.x,h=this.y,p=this.width,g=this.height,_=i.MIN_SIZE/l,b=i.MIN_SIZE/c;o=Math.max(Math.min(o,1/p,1/g),_/p,b/g);let C=i._round(p*o),y=i._round(g*o);if(C===p&&y===g)return;this.#l||=[d,h,p,g];let M=a(p/2,g/2),O=i._round(d+M[0]),A=i._round(h+M[1]),D=a(C/2,y/2);this.x=O-D[0],this.y=A-D[1],this.width=C,this.height=y,this.setDims(l*C,c*y),this.fixAndSetPosition(),this._onResizing()}#L(){this.#n?.toggle(!0),this.parent.togglePointerEvents(!0),this.#I()}pointerdown(e){let{isMac:t}=vr.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(this.#f=!0,this._isDraggable){this.#H(e);return}this.#R(e)}#R(e){let{isMac:t}=vr.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}#H(e){let{isSelected:t}=this;this._uiManager.setUpDragSession();let n=!1,r=new AbortController,o=this._uiManager.combinedSignal(r),s={capture:!0,passive:!1,signal:o},a=c=>{r.abort(),this.#o=null,this.#f=!1,this._uiManager.endDragSession()||this.#R(c),n&&this._onStopDragging()};t&&(this.#_=e.clientX,this.#v=e.clientY,this.#o=e.pointerId,this.#r=e.pointerType,window.addEventListener("pointermove",c=>{n||(n=!0,this._onStartDragging());let{clientX:d,clientY:h,pointerId:p}=c;if(p!==this.#o){sr(c);return}let[g,_]=this.screenToPageTranslation(d-this.#_,h-this.#v);this.#_=d,this.#v=h,this._uiManager.dragSelectedEditors(g,_)},s),window.addEventListener("touchmove",sr,s),window.addEventListener("pointerdown",c=>{c.pointerType===this.#r&&(this.#w||c.isPrimary)&&a(c),sr(c)},s));let l=c=>{if(!this.#o||this.#o===c.pointerId){a(c);return}sr(c)};window.addEventListener("pointerup",l,{signal:o}),window.addEventListener("blur",l,{signal:o})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#x&&clearTimeout(this.#x),this.#x=setTimeout(()=>{this.#x=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,n=this.rotation){let r=this.parentScale,[o,s]=this.pageDimensions,[a,l]=this.pageTranslation,c=e/r,d=t/r,h=this.x*o,p=this.y*s,g=this.width*o,_=this.height*s;switch(n){case 0:return[h+c+a,s-p-d-_+l,h+c+g+a,s-p-d+l];case 90:return[h+d+a,s-p+c+l,h+d+_+a,s-p+c+g+l];case 180:return[h-c-g+a,s-p+d+l,h-c+a,s-p+d+_+l];case 270:return[h-d-_+a,s-p-c-g+l,h-d+a,s-p-c+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){let[n,r,o,s]=e,a=o-n,l=s-r;switch(this.rotation){case 0:return[n,t-s,a,l];case 90:return[n,t-r,l,a];case 180:return[o,t-r,a,l];case 270:return[o,t-s,l,a];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#m=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#m=!1,!0):!1}isInEditMode(){return this.#m}shouldGetKeyboardEvents(){return this.#p}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){let{top:e,left:t,bottom:n,right:r}=this.getClientDimensions(),{innerHeight:o,innerWidth:s}=window;return t<s&&r>0&&e<o&&n>0}#G(){if(this.#h||!this.div)return;this.#h=new AbortController;let e=this._uiManager.combinedSignal(this.#h);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}rebuild(){this.#G()}rotate(e){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(e=!1,t=null){Xn("An editor must be serializable")}static deserialize(e,t,n){return Ge(this,null,function*(){let r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n});r.rotation=e.rotation,r.#e=e.accessibilityData,r._isCopy=e.isCopy||!1;let[o,s]=r.pageDimensions,[a,l,c,d]=r.getRectInCurrentCoords(e.rect,s);return r.x=a/o,r.y=l/s,r.width=c/o,r.height=d/s,r})}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#h?.abort(),this.#h=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#x&&(clearTimeout(this.#x),this.#x=null),this.#U(),this.removeEditToolbar(),this.#C){for(let e of this.#C.values())clearTimeout(e);this.#C=null}this.parent=null,this.#w?.destroy(),this.#w=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#P(),this.#s.classList.remove("hidden"))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),this.#c={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};let t=this.#s.children;if(!this.#t){this.#t=Array.from(t);let s=this.#$.bind(this),a=this.#V.bind(this),l=this._uiManager._signal;for(let c of this.#t){let d=c.getAttribute("data-resizer-name");c.setAttribute("role","spinbutton"),c.addEventListener("keydown",s,{signal:l}),c.addEventListener("blur",a,{signal:l}),c.addEventListener("focus",this.#T.bind(this,d),{signal:l}),c.setAttribute("data-l10n-id",i._l10nResizer[d])}}let n=this.#t[0],r=0;for(let s of t){if(s===n)break;r++}let o=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(o!==r){if(o<r)for(let a=0;a<r-o;a++)this.#s.append(this.#s.firstChild);else if(o>r)for(let a=0;a<o-r;a++)this.#s.firstChild.before(this.#s.lastChild);let s=0;for(let a of t){let c=this.#t[s++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",i._l10nResizer[c])}}this.#B(0),this.#p=!0,this.#s.firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}#$(e){i._resizerKeyboardManager.exec(this,e)}#V(e){this.#p&&e.relatedTarget?.parentNode!==this.#s&&this.#U()}#T(e){this.#d=this.#p?e:""}#B(e){if(this.#t)for(let t of this.#t)t.tabIndex=e}_resizeWithKeyboard(e,t){this.#p&&this.#j(this.#d,{deltaX:e,deltaY:t,fromKeyboard:!0})}#U(){this.#p=!1,this.#B(-1),this.#I()}_stopResizingWithKeyboard(){this.#U(),this.div.focus()}select(){if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)}}unselect(){this.isSelected&&(this.isSelected=!1,this.#s?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#g}set isEditing(e){this.#g=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){this.#a=!0;let n=e/t,{style:r}=this.div;r.aspectRatio=n,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){this.#C||=new Map;let{action:n}=e,r=this.#C.get(n);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),this.#C.delete(n),this.#C.size===0&&(this.#C=null)},i._telemetryTimeout),this.#C.set(n,r);return}e.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),this.#i=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#i=!0}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){let n=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),n.before(t)}return t}resetAnnotationElement(e){let{firstChild:t}=e.container;t?.nodeName==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}},pk=class extends ci{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}},wR=3285377520,Vs=4294901760,Pl=65535,jy=class{constructor(e){this.h1=e?e&4294967295:wR,this.h2=e?e&4294967295:wR}update(e){let t,n;if(typeof e=="string"){t=new Uint8Array(e.length*2),n=0;for(let b=0,C=e.length;b<C;b++){let y=e.charCodeAt(b);y<=255?t[n++]=y:(t[n++]=y>>>8,t[n++]=y&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),n=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");let r=n>>2,o=n-r*4,s=new Uint32Array(t.buffer,0,r),a=0,l=0,c=this.h1,d=this.h2,h=3432918353,p=461845907,g=h&Pl,_=p&Pl;for(let b=0;b<r;b++)b&1?(a=s[b],a=a*h&Vs|a*g&Pl,a=a<<15|a>>>17,a=a*p&Vs|a*_&Pl,c^=a,c=c<<13|c>>>19,c=c*5+3864292196):(l=s[b],l=l*h&Vs|l*g&Pl,l=l<<15|l>>>17,l=l*p&Vs|l*_&Pl,d^=l,d=d<<13|d>>>19,d=d*5+3864292196);switch(a=0,o){case 3:a^=t[r*4+2]<<16;case 2:a^=t[r*4+1]<<8;case 1:a^=t[r*4],a=a*h&Vs|a*g&Pl,a=a<<15|a>>>17,a=a*p&Vs|a*_&Pl,r&1?c^=a:d^=a}this.h1=c,this.h2=d}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Vs|e*36045&Pl,t=t*4283543511&Vs|((t<<16|e>>>16)*2950163797&Vs)>>>16,e^=t>>>1,e=e*444984403&Vs|e*60499&Pl,t=t*3301882366&Vs|((t<<16|e>>>16)*3120437893&Vs)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}},mk=Object.freeze({map:null,hash:"",transfer:void 0}),mx=class{#e=!1;#t=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){let n=this.#n.get(e);return n===void 0?t:Object.assign(t,n)}getRawValue(e){return this.#n.get(e)}remove(e){if(this.#n.delete(e),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(let t of this.#n.values())if(t instanceof ci)return;this.onAnnotationEditor(null)}}setValue(e,t){let n=this.#n.get(e),r=!1;if(n!==void 0)for(let[o,s]of Object.entries(t))n[o]!==s&&(r=!0,n[o]=s);else r=!0,this.#n.set(e,t);r&&this.#i(),t instanceof ci&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return this.#n.has(e)}get size(){return this.#n.size}#i(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Vy(this)}get serializable(){if(this.#n.size===0)return mk;let e=new Map,t=new jy,n=[],r=Object.create(null),o=!1;for(let[s,a]of this.#n){let l=a instanceof ci?a.serialize(!1,r):a;l&&(e.set(s,l),t.update(`${s}:${JSON.stringify(l)}`),o||=!!l.bitmap)}if(o)for(let s of e.values())s.bitmap&&n.push(s.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:mk}get editorStats(){let e=null,t=new Map;for(let n of this.#n.values()){if(!(n instanceof ci))continue;let r=n.telemetryFinalData;if(!r)continue;let{type:o}=r;t.has(o)||t.set(o,Object.getPrototypeOf(n).constructor),e||=Object.create(null);let s=e[o]||=new Map;for(let[a,l]of Object.entries(r)){if(a==="type")continue;let c=s.get(a);c||(c=new Map,s.set(a,c));let d=c.get(l)??0;c.set(l,d+1)}}for(let[n,r]of t)e[n]=r.computeTelemetryFinalData(e[n]);return e}resetModifiedIds(){this.#t=null}get modifiedIds(){if(this.#t)return this.#t;let e=[];for(let t of this.#n.values())!(t instanceof ci)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return this.#t={ids:new Set(e),hash:e.join(",")}}[Symbol.iterator](){return this.#n.entries()}},Vy=class extends mx{#e;constructor(e){super();let{map:t,hash:n,transfer:r}=e.serializable,o=structuredClone(t,r?{transfer:r}:null);this.#e={map:o,hash:n,transfer:r}}get print(){Xn("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}get modifiedIds(){return gn(this,"modifiedIds",{ids:new Set,hash:""})}},xk=class{#e=new Set;constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));let t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(let e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}loadSystemFont(r){return Ge(this,arguments,function*({systemFontInfo:e,disableFontFace:t,_inspectFont:n}){if(!(!e||this.#e.has(e.loadedName))){if(ar(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){let{loadedName:o,src:s,style:a}=e,l=new FontFace(o,s,a);this.addNativeFontFace(l);try{yield l.load(),this.#e.add(o),n?.(e)}catch{Ht(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(l)}return}Xn("Not implemented: loadSystemFont without the Font Loading API.")}})}bind(e){return Ge(this,null,function*(){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){yield this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){let n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{yield n.loaded}catch(r){throw Ht(`Failed to load font '${n.family}': '${r}'.`),e.disableFontFace=!0,r}}return}let t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;yield new Promise(n=>{let r=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,r)})}})}get isFontLoadingAPISupported(){let e=!!this._document?.fonts;return gn(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return gn(this,"isSyncFontLoadingSupported",go||vr.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(ar(!r.done,"completeRequest() cannot be called twice."),r.done=!0;n.length>0&&n[0].done;){let o=n.shift();setTimeout(o.callback,0)}}let{loadingRequests:n}=this,r={done:!1,complete:t,callback:e};return n.push(r),r}get _loadTestFont(){let e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return gn(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(A,D){return A.charCodeAt(D)<<24|A.charCodeAt(D+1)<<16|A.charCodeAt(D+2)<<8|A.charCodeAt(D+3)&255}function r(A,D,N,B){let T=A.substring(0,D),H=A.substring(D+N);return T+B+H}let o,s,a=this._document.createElement("canvas");a.width=1,a.height=1;let l=a.getContext("2d"),c=0;function d(A,D){if(++c>30){Ht("Load test font never loaded."),D();return}if(l.font="30px "+A,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){D();return}setTimeout(d.bind(null,A,D))}let h=`lt${Date.now()}${this.loadTestFontId++}`,p=this._loadTestFont;p=r(p,976,h.length,h);let _=16,b=1482184792,C=n(p,_);for(o=0,s=h.length-3;o<s;o+=4)C=C-b+n(h,o)|0;o<h.length&&(C=C-b+n(h+"XXX",o)|0),p=r(p,_,4,_se(C));let y=`url(data:font/opentype;base64,${btoa(p)});`,M=`@font-face {font-family:"${h}";src:${y}}`;this.insertRule(M);let O=this._document.createElement("div");O.style.visibility="hidden",O.style.width=O.style.height="10px",O.style.position="absolute",O.style.top=O.style.left="0px";for(let A of[e.loadedName,h]){let D=this._document.createElement("span");D.textContent="Hi",D.style.fontFamily=A,O.append(D)}this._document.body.append(O),d(h,()=>{O.remove(),t.complete()})}},_k=class{constructor(e,t=null){this.compiledGlyphs=Object.create(null);for(let n in e)this[n]=e[n];this._inspectFont=t}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{let t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;let e=`url(data:${this.mimetype};base64,${zR(this.data)});`,t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let n=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(n+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${n}src:${e}}`}return this._inspectFont?.(this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];let n=this.loadedName+"_path_"+t,r;try{r=e.get(n)}catch(s){Ht(`getPathGenerator - ignoring character: "${s}".`)}let o=new Path2D(r||"");return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[t]=o}};function Ase(i){if(i instanceof URL)return i.href;if(typeof i=="string"){if(go)return i;let e=URL.parse(i,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function Dse(i){if(go&&typeof Buffer<"u"&&i instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength)return i;if(typeof i=="string")return Px(i);if(i instanceof ArrayBuffer||ArrayBuffer.isView(i)||typeof i=="object"&&!isNaN(i?.length))return new Uint8Array(i);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Oy(i){if(typeof i!="string")return null;if(i.endsWith("/"))return i;throw new Error(`Invalid factory url: "${i}" must include trailing slash.`)}var vk=i=>typeof i=="object"&&Number.isInteger(i?.num)&&i.num>=0&&Number.isInteger(i?.gen)&&i.gen>=0,Fse=i=>typeof i=="object"&&typeof i?.name=="string",Ise=wse.bind(null,vk,Fse),bk=class{#e=new Map;#t=Promise.resolve();postMessage(e,t){let n={data:structuredClone(e,t?{transfer:t}:null)};this.#t.then(()=>{for(let[r]of this.#e)r.call(this,n)})}addEventListener(e,t,n=null){let r=null;if(n?.signal instanceof AbortSignal){let{signal:o}=n;if(o.aborted){Ht("LoopbackPort - cannot use an `aborted` signal.");return}let s=()=>this.removeEventListener(e,t);r=()=>o.removeEventListener("abort",s),o.addEventListener("abort",s)}this.#e.set(t,r)}removeEventListener(e,t){this.#e.get(t)?.(),this.#e.delete(t)}terminate(){for(let[,e]of this.#e)e?.();this.#e.clear()}},Sy={DATA:1,ERROR:2},rr={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function MR(){}function Uo(i){if(i instanceof Ol||i instanceof hx||i instanceof Ny||i instanceof sg||i instanceof ux)return i;switch(i instanceof Error||typeof i=="object"&&i!==null||Xn('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),i.name){case"AbortException":return new Ol(i.message);case"InvalidPDFException":return new hx(i.message);case"PasswordException":return new Ny(i.message,i.code);case"ResponseException":return new sg(i.message,i.status,i.missing);case"UnknownErrorException":return new ux(i.message,i.details)}return new ux(i.message,i.toString())}var E0=class{#e=new AbortController;constructor(e,t,n){this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",this.#t.bind(this),{signal:this.#e.signal})}#t({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){this.#i(e);return}if(e.callback){let n=e.callbackId,r=this.callbackCapabilities[n];if(!r)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],e.callback===Sy.DATA)r.resolve(e.data);else if(e.callback===Sy.ERROR)r.reject(Uo(e.reason));else throw new Error("Unexpected callback case");return}let t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){let n=this.sourceName,r=e.sourceName,o=this.comObj;Promise.try(t,e.data).then(function(s){o.postMessage({sourceName:n,targetName:r,callback:Sy.DATA,callbackId:e.callbackId,data:s})},function(s){o.postMessage({sourceName:n,targetName:r,callback:Sy.ERROR,callbackId:e.callbackId,reason:Uo(s)})});return}if(e.streamId){this.#n(e);return}t(e.data)}on(e,t){let n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){let r=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[r]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},n)}catch(s){o.reject(s)}return o.promise}sendWithStream(e,t,n,r){let o=this.streamId++,s=this.sourceName,a=this.targetName,l=this.comObj;return new ReadableStream({start:c=>{let d=Promise.withResolvers();return this.streamControllers[o]={controller:c,startCall:d,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:s,targetName:a,action:e,streamId:o,data:t,desiredSize:c.desiredSize},r),d.promise},pull:c=>{let d=Promise.withResolvers();return this.streamControllers[o].pullCall=d,l.postMessage({sourceName:s,targetName:a,stream:rr.PULL,streamId:o,desiredSize:c.desiredSize}),d.promise},cancel:c=>{ar(c instanceof Error,"cancel must have a valid reason");let d=Promise.withResolvers();return this.streamControllers[o].cancelCall=d,this.streamControllers[o].isClosed=!0,l.postMessage({sourceName:s,targetName:a,stream:rr.CANCEL,streamId:o,reason:Uo(c)}),d.promise}},n)}#n(e){let t=e.streamId,n=this.sourceName,r=e.sourceName,o=this.comObj,s=this,a=this.actionHandler[e.action],l={enqueue(c,d=1,h){if(this.isCancelled)return;let p=this.desiredSize;this.desiredSize-=d,p>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:n,targetName:r,stream:rr.ENQUEUE,streamId:t,chunk:c},h)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:r,stream:rr.CLOSE,streamId:t}),delete s.streamSinks[t])},error(c){ar(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:r,stream:rr.ERROR,streamId:t,reason:Uo(c)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[t]=l,Promise.try(a,e.data,l).then(function(){o.postMessage({sourceName:n,targetName:r,stream:rr.START_COMPLETE,streamId:t,success:!0})},function(c){o.postMessage({sourceName:n,targetName:r,stream:rr.START_COMPLETE,streamId:t,reason:Uo(c)})})}#i(e){let t=e.streamId,n=this.sourceName,r=e.sourceName,o=this.comObj,s=this.streamControllers[t],a=this.streamSinks[t];switch(e.stream){case rr.START_COMPLETE:e.success?s.startCall.resolve():s.startCall.reject(Uo(e.reason));break;case rr.PULL_COMPLETE:e.success?s.pullCall.resolve():s.pullCall.reject(Uo(e.reason));break;case rr.PULL:if(!a){o.postMessage({sourceName:n,targetName:r,stream:rr.PULL_COMPLETE,streamId:t,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,Promise.try(a.onPull||MR).then(function(){o.postMessage({sourceName:n,targetName:r,stream:rr.PULL_COMPLETE,streamId:t,success:!0})},function(c){o.postMessage({sourceName:n,targetName:r,stream:rr.PULL_COMPLETE,streamId:t,reason:Uo(c)})});break;case rr.ENQUEUE:if(ar(s,"enqueue should have stream controller"),s.isClosed)break;s.controller.enqueue(e.chunk);break;case rr.CLOSE:if(ar(s,"close should have stream controller"),s.isClosed)break;s.isClosed=!0,s.controller.close(),this.#o(s,t);break;case rr.ERROR:ar(s,"error should have stream controller"),s.controller.error(Uo(e.reason)),this.#o(s,t);break;case rr.CANCEL_COMPLETE:e.success?s.cancelCall.resolve():s.cancelCall.reject(Uo(e.reason)),this.#o(s,t);break;case rr.CANCEL:if(!a)break;let l=Uo(e.reason);Promise.try(a.onCancel||MR,l).then(function(){o.postMessage({sourceName:n,targetName:r,stream:rr.CANCEL_COMPLETE,streamId:t,success:!0})},function(c){o.postMessage({sourceName:n,targetName:r,stream:rr.CANCEL_COMPLETE,streamId:t,reason:Uo(c)})}),a.sinkCapability.reject(l),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}#o(e,t){return Ge(this,null,function*(){yield Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete this.streamControllers[t]})}destroy(){this.#e?.abort(),this.#e=null}},Uy=class{#e=!1;constructor({enableHWA:e=!1}){this.#e=e}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");let n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!this.#e})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Xn("Abstract method `_createCanvas` called.")}},Ck=class extends Uy{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){let n=this._document.createElement("canvas");return n.width=e,n.height=t,n}},Hy=class{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}fetch(t){return Ge(this,arguments,function*({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");let n=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(n).then(r=>({cMapData:r,isCompressed:this.isCompressed})).catch(r=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${n}`)})})}_fetch(e){return Ge(this,null,function*(){Xn("Abstract method `_fetch` called.")})}},Gy=class extends Hy{_fetch(e){return Ge(this,null,function*(){let t=yield Ox(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Px(t)})}},$y=class{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,r,o){return"none"}destroy(e=!1){}},yk=class extends $y{#e;#t;#n;#i;#o;#r;#a=0;constructor({docId:e,ownerDocument:t=globalThis.document}){super(),this.#i=e,this.#o=t}get#s(){return this.#t||=new Map}get#u(){return this.#r||=new Map}get#c(){if(!this.#n){let e=this.#o.createElement("div"),{style:t}=e;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;let n=this.#o.createElementNS(wc,"svg");n.setAttribute("width",0),n.setAttribute("height",0),this.#n=this.#o.createElementNS(wc,"defs"),e.append(n),n.append(this.#n),this.#o.body.append(e)}return this.#n}#h(e){if(e.length===1){let l=e[0],c=new Array(256);for(let h=0;h<256;h++)c[h]=l[h]/255;let d=c.join(",");return[d,d,d]}let[t,n,r]=e,o=new Array(256),s=new Array(256),a=new Array(256);for(let l=0;l<256;l++)o[l]=t[l]/255,s[l]=n[l]/255,a[l]=r[l]/255;return[o.join(","),s.join(","),a.join(",")]}#d(e){if(this.#e===void 0){this.#e="";let t=this.#o.URL;t!==this.#o.baseURI&&(x2(t)?Ht('#createUrl: ignore "data:"-URL for performance reasons.'):this.#e=NR(t,""))}return`url(${this.#e}#${e})`}addFilter(e){if(!e)return"none";let t=this.#s.get(e);if(t)return t;let[n,r,o]=this.#h(e),s=e.length===1?n:`${n}${r}${o}`;if(t=this.#s.get(s),t)return this.#s.set(e,t),t;let a=`g_${this.#i}_transfer_map_${this.#a++}`,l=this.#d(a);this.#s.set(e,l),this.#s.set(s,l);let c=this.#g(a);return this.#p(n,r,o,c),l}addHCMFilter(e,t){let n=`${e}-${t}`,r="base",o=this.#u.get(r);if(o?.key===n||(o?(o.filter?.remove(),o.key=n,o.url="none",o.filter=null):(o={key:n,url:"none",filter:null},this.#u.set(r,o)),!e||!t))return o.url;let s=this.#_(e);e=Mt.makeHexColor(...s);let a=this.#_(t);if(t=Mt.makeHexColor(...a),this.#c.style.color="",e==="#000000"&&t==="#ffffff"||e===t)return o.url;let l=new Array(256);for(let g=0;g<=255;g++){let _=g/255;l[g]=_<=.03928?_/12.92:((_+.055)/1.055)**2.4}let c=l.join(","),d=`g_${this.#i}_hcm_filter`,h=o.filter=this.#g(d);this.#p(c,c,c,h),this.#l(h);let p=(g,_)=>{let b=s[g]/255,C=a[g]/255,y=new Array(_+1);for(let M=0;M<=_;M++)y[M]=b+M/_*(C-b);return y.join(",")};return this.#p(p(0,5),p(1,5),p(2,5),h),o.url=this.#d(d),o.url}addAlphaFilter(e){let t=this.#s.get(e);if(t)return t;let[n]=this.#h([e]),r=`alpha_${n}`;if(t=this.#s.get(r),t)return this.#s.set(e,t),t;let o=`g_${this.#i}_alpha_map_${this.#a++}`,s=this.#d(o);this.#s.set(e,s),this.#s.set(r,s);let a=this.#g(o);return this.#x(n,a),s}addLuminosityFilter(e){let t=this.#s.get(e||"luminosity");if(t)return t;let n,r;if(e?([n]=this.#h([e]),r=`luminosity_${n}`):r="luminosity",t=this.#s.get(r),t)return this.#s.set(e,t),t;let o=`g_${this.#i}_luminosity_map_${this.#a++}`,s=this.#d(o);this.#s.set(e,s),this.#s.set(r,s);let a=this.#g(o);return this.#f(a),e&&this.#x(n,a),s}addHighlightHCMFilter(e,t,n,r,o){let s=`${t}-${n}-${r}-${o}`,a=this.#u.get(e);if(a?.key===s||(a?(a.filter?.remove(),a.key=s,a.url="none",a.filter=null):(a={key:s,url:"none",filter:null},this.#u.set(e,a)),!t||!n))return a.url;let[l,c]=[t,n].map(this.#_.bind(this)),d=Math.round(.2126*l[0]+.7152*l[1]+.0722*l[2]),h=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),[p,g]=[r,o].map(this.#_.bind(this));h<d&&([d,h,p,g]=[h,d,g,p]),this.#c.style.color="";let _=(y,M,O)=>{let A=new Array(256),D=(h-d)/O,N=y/255,B=(M-y)/(255*O),T=0;for(let H=0;H<=O;H++){let te=Math.round(d+H*D),L=N+H*B;for(let z=T;z<=te;z++)A[z]=L;T=te+1}for(let H=T;H<256;H++)A[H]=A[T-1];return A.join(",")},b=`g_${this.#i}_hcm_${e}_filter`,C=a.filter=this.#g(b);return this.#l(C),this.#p(_(p[0],g[0],5),_(p[1],g[1],5),_(p[2],g[2],5),C),a.url=this.#d(b),a.url}destroy(e=!1){e&&this.#r?.size||(this.#n?.parentNode.parentNode.remove(),this.#n=null,this.#t?.clear(),this.#t=null,this.#r?.clear(),this.#r=null,this.#a=0)}#f(e){let t=this.#o.createElementNS(wc,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}#l(e){let t=this.#o.createElementNS(wc,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}#g(e){let t=this.#o.createElementNS(wc,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),this.#c.append(t),t}#m(e,t,n){let r=this.#o.createElementNS(wc,t);r.setAttribute("type","discrete"),r.setAttribute("tableValues",n),e.append(r)}#p(e,t,n,r){let o=this.#o.createElementNS(wc,"feComponentTransfer");r.append(o),this.#m(o,"feFuncR",e),this.#m(o,"feFuncG",t),this.#m(o,"feFuncB",n)}#x(e,t){let n=this.#o.createElementNS(wc,"feComponentTransfer");t.append(n),this.#m(n,"feFuncA",e)}#_(e){return this.#c.style.color=e,DA(getComputedStyle(this.#c).getPropertyValue("color"))}},Wy=class{constructor({baseUrl:e=null}){this.baseUrl=e}fetch(t){return Ge(this,arguments,function*({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");let n=`${this.baseUrl}${e}`;return this._fetch(n).catch(r=>{throw new Error(`Unable to load font data at: ${n}`)})})}_fetch(e){return Ge(this,null,function*(){Xn("Abstract method `_fetch` called.")})}},qy=class extends Wy{_fetch(e){return Ge(this,null,function*(){let t=yield Ox(e,"arraybuffer");return new Uint8Array(t)})}},Ky=class{constructor({baseUrl:e=null}){this.baseUrl=e}fetch(t){return Ge(this,arguments,function*({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");let n=`${this.baseUrl}${e}`;return this._fetch(n).catch(r=>{throw new Error(`Unable to load wasm data at: ${n}`)})})}_fetch(e){return Ge(this,null,function*(){Xn("Abstract method `_fetch` called.")})}},Yy=class extends Ky{_fetch(e){return Ge(this,null,function*(){let t=yield Ox(e,"arraybuffer");return new Uint8Array(t)})}};go&&Ht("Please use the `legacy` build in Node.js environments.");function FA(i){return Ge(this,null,function*(){let t=yield process.getBuiltinModule("fs").promises.readFile(i);return new Uint8Array(t)})}var wk=class extends $y{},Mk=class extends Uy{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}},Ek=class extends Hy{_fetch(e){return Ge(this,null,function*(){return FA(e)})}},Pk=class extends Wy{_fetch(e){return Ge(this,null,function*(){return FA(e)})}},Ok=class extends Ky{_fetch(e){return Ge(this,null,function*(){return FA(e)})}},Fr={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Sk(i,e){if(!e)return;let t=e[2]-e[0],n=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],t,n),i.clip(r)}var xx=class{isModifyingCurrentTransform(){return!1}getPattern(){Xn("Abstract method `getPattern` called.")}},kk=class extends xx{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(let n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,r){let o;if(r===Fr.STROKE||r===Fr.FILL){let s=t.current.getClippedPathBoundingBox(r,Ei(e))||[0,0,0,0],a=Math.ceil(s[2]-s[0])||1,l=Math.ceil(s[3]-s[1])||1,c=t.cachedCanvases.getCanvas("pattern",a,l),d=c.context;d.clearRect(0,0,d.canvas.width,d.canvas.height),d.beginPath(),d.rect(0,0,d.canvas.width,d.canvas.height),d.translate(-s[0],-s[1]),n=Mt.transform(n,[1,0,0,1,s[0],s[1]]),d.transform(...t.baseTransform),this.matrix&&d.transform(...this.matrix),Sk(d,this._bbox),d.fillStyle=this._createGradient(d),d.fill(),o=e.createPattern(c.canvas,"no-repeat");let h=new DOMMatrix(n);o.setTransform(h)}else Sk(e,this._bbox),o=this._createGradient(e);return o}};function nk(i,e,t,n,r,o,s,a){let l=e.coords,c=e.colors,d=i.data,h=i.width*4,p;l[t+1]>l[n+1]&&(p=t,t=n,n=p,p=o,o=s,s=p),l[n+1]>l[r+1]&&(p=n,n=r,r=p,p=s,s=a,a=p),l[t+1]>l[n+1]&&(p=t,t=n,n=p,p=o,o=s,s=p);let g=(l[t]+e.offsetX)*e.scaleX,_=(l[t+1]+e.offsetY)*e.scaleY,b=(l[n]+e.offsetX)*e.scaleX,C=(l[n+1]+e.offsetY)*e.scaleY,y=(l[r]+e.offsetX)*e.scaleX,M=(l[r+1]+e.offsetY)*e.scaleY;if(_>=M)return;let O=c[o],A=c[o+1],D=c[o+2],N=c[s],B=c[s+1],T=c[s+2],H=c[a],te=c[a+1],L=c[a+2],z=Math.round(_),J=Math.round(M),Q,ce,X,ie,oe,le,Ce,Ne;for(let R=z;R<=J;R++){if(R<C){let me=R<_?0:(_-R)/(_-C);Q=g-(g-b)*me,ce=O-(O-N)*me,X=A-(A-B)*me,ie=D-(D-T)*me}else{let me;R>M?me=1:C===M?me=0:me=(C-R)/(C-M),Q=b-(b-y)*me,ce=N-(N-H)*me,X=B-(B-te)*me,ie=T-(T-L)*me}let ne;R<_?ne=0:R>M?ne=1:ne=(_-R)/(_-M),oe=g-(g-y)*ne,le=O-(O-H)*ne,Ce=A-(A-te)*ne,Ne=D-(D-L)*ne;let re=Math.round(Math.min(Q,oe)),de=Math.round(Math.max(Q,oe)),fe=h*R+re*4;for(let me=re;me<=de;me++)ne=(Q-me)/(Q-oe),ne<0?ne=0:ne>1&&(ne=1),d[fe++]=ce-(ce-le)*ne|0,d[fe++]=X-(X-Ce)*ne|0,d[fe++]=ie-(ie-Ne)*ne|0,d[fe++]=255}}function Tse(i,e,t){let n=e.coords,r=e.colors,o,s;switch(e.type){case"lattice":let a=e.verticesPerRow,l=Math.floor(n.length/a)-1,c=a-1;for(o=0;o<l;o++){let d=o*a;for(let h=0;h<c;h++,d++)nk(i,t,n[d],n[d+1],n[d+a],r[d],r[d+1],r[d+a]),nk(i,t,n[d+a+1],n[d+1],n[d+a],r[d+a+1],r[d+1],r[d+a])}break;case"triangles":for(o=0,s=n.length;o<s;o+=3)nk(i,t,n[o],n[o+1],n[o+2],r[o],r[o+1],r[o+2]);break;default:throw new Error("illegal figure")}}var Ak=class extends xx{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,n){let a=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),c=Math.ceil(this._bounds[2])-a,d=Math.ceil(this._bounds[3])-l,h=Math.min(Math.ceil(Math.abs(c*e[0]*1.1)),3e3),p=Math.min(Math.ceil(Math.abs(d*e[1]*1.1)),3e3),g=c/h,_=d/p,b={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-l,scaleX:1/g,scaleY:1/_},C=h+2*2,y=p+2*2,M=n.getCanvas("mesh",C,y),O=M.context,A=O.createImageData(h,p);if(t){let N=A.data;for(let B=0,T=N.length;B<T;B+=4)N[B]=t[0],N[B+1]=t[1],N[B+2]=t[2],N[B+3]=255}for(let N of this._figures)Tse(A,N,b);return O.putImageData(A,2,2),{canvas:M.canvas,offsetX:a-2*g,offsetY:l-2*_,scaleX:g,scaleY:_}}isModifyingCurrentTransform(){return!0}getPattern(e,t,n,r){Sk(e,this._bbox);let o=new Float32Array(2);if(r===Fr.SHADING)Mt.singularValueDecompose2dScale(Ei(e),o);else if(this.matrix){Mt.singularValueDecompose2dScale(this.matrix,o);let[a,l]=o;Mt.singularValueDecompose2dScale(t.baseTransform,o),o[0]*=a,o[1]*=l}else Mt.singularValueDecompose2dScale(t.baseTransform,o);let s=this._createMeshCanvas(o,r===Fr.SHADING?null:this._background,t.cachedCanvases);return r!==Fr.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(s.offsetX,s.offsetY),e.scale(s.scaleX,s.scaleY),e.createPattern(s.canvas,"no-repeat")}},Dk=class extends xx{getPattern(){return"hotpink"}};function Bse(i){switch(i[0]){case"RadialAxial":return new kk(i);case"Mesh":return new Ak(i);case"Dummy":return new Dk}throw new Error(`Unknown IR type: ${i[0]}`)}var ER={COLORED:1,UNCOLORED:2},Nse=(()=>{class i{static MAX_PATTERN_SIZE=3e3;constructor(t,n,r,o){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=n,this.canvasGraphicsFactory=r,this.baseTransform=o}createPatternCanvas(t){let{bbox:n,operatorList:r,paintType:o,tilingType:s,color:a,canvasGraphicsFactory:l}=this,{xstep:c,ystep:d}=this;c=Math.abs(c),d=Math.abs(d),m2("TilingType: "+s);let h=n[0],p=n[1],g=n[2],_=n[3],b=g-h,C=_-p,y=new Float32Array(2);Mt.singularValueDecompose2dScale(this.matrix,y);let[M,O]=y;Mt.singularValueDecompose2dScale(this.baseTransform,y);let A=M*y[0],D=O*y[1],N=b,B=C,T=!1,H=!1,te=Math.ceil(c*A),L=Math.ceil(d*D),z=Math.ceil(b*A),J=Math.ceil(C*D);te>=z?N=c:T=!0,L>=J?B=d:H=!0;let Q=this.getSizeAndScale(N,this.ctx.canvas.width,A),ce=this.getSizeAndScale(B,this.ctx.canvas.height,D),X=t.cachedCanvases.getCanvas("pattern",Q.size,ce.size),ie=X.context,oe=l.createCanvasGraphics(ie);if(oe.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(oe,o,a),ie.translate(-Q.scale*h,-ce.scale*p),oe.transform(Q.scale,0,0,ce.scale,0,0),ie.save(),this.clipBbox(oe,h,p,g,_),oe.baseTransform=Ei(oe.ctx),oe.executeOperatorList(r),oe.endDrawing(),ie.restore(),T||H){let le=X.canvas;T&&(N=c),H&&(B=d);let Ce=this.getSizeAndScale(N,this.ctx.canvas.width,A),Ne=this.getSizeAndScale(B,this.ctx.canvas.height,D),R=Ce.size,ne=Ne.size,re=t.cachedCanvases.getCanvas("pattern-workaround",R,ne),de=re.context,fe=T?Math.floor(b/c):0,me=H?Math.floor(C/d):0;for(let Pe=0;Pe<=fe;Pe++)for(let Me=0;Me<=me;Me++)de.drawImage(le,R*Pe,ne*Me,R,ne,0,0,R,ne);return{canvas:re.canvas,scaleX:Ce.scale,scaleY:Ne.scale,offsetX:h,offsetY:p}}return{canvas:X.canvas,scaleX:Q.scale,scaleY:ce.scale,offsetX:h,offsetY:p}}getSizeAndScale(t,n,r){let o=Math.max(i.MAX_PATTERN_SIZE,n),s=Math.ceil(t*r);return s>=o?s=o:r=s/t,{scale:r,size:s}}clipBbox(t,n,r,o,s){let a=o-n,l=s-r;t.ctx.rect(n,r,a,l),Mt.axialAlignedBoundingBox([n,r,o,s],Ei(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,n,r){let o=t.ctx,s=t.current;switch(n){case ER.COLORED:let{fillStyle:a,strokeStyle:l}=this.ctx;o.fillStyle=s.fillColor=a,o.strokeStyle=s.strokeColor=l;break;case ER.UNCOLORED:o.fillStyle=o.strokeStyle=r,s.fillColor=s.strokeColor=r;break;default:throw new ak(`Unsupported paint type: ${n}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,n,r,o){let s=r;o!==Fr.SHADING&&(s=Mt.transform(s,n.baseTransform),this.matrix&&(s=Mt.transform(s,this.matrix)));let a=this.createPatternCanvas(n),l=new DOMMatrix(s);l=l.translate(a.offsetX,a.offsetY),l=l.scale(1/a.scaleX,1/a.scaleY);let c=t.createPattern(a.canvas,"repeat");return c.setTransform(l),c}}return i})();function Lse({src:i,srcPos:e=0,dest:t,width:n,height:r,nonBlackColor:o=4294967295,inverseDecode:s=!1}){let a=vr.isLittleEndian?4278190080:255,[l,c]=s?[o,a]:[a,o],d=n>>3,h=n&7,p=i.length;t=new Uint32Array(t.buffer);let g=0;for(let _=0;_<r;_++){for(let C=e+d;e<C;e++){let y=e<p?i[e]:255;t[g++]=y&128?c:l,t[g++]=y&64?c:l,t[g++]=y&32?c:l,t[g++]=y&16?c:l,t[g++]=y&8?c:l,t[g++]=y&4?c:l,t[g++]=y&2?c:l,t[g++]=y&1?c:l}if(h===0)continue;let b=e<p?i[e++]:255;for(let C=0;C<h;C++)t[g++]=b&1<<7-C?c:l}return{srcPos:e,destPos:g}}var PR=16,OR=100,Rse=15,SR=10,Ho=16,ik=new DOMMatrix,vs=new Float32Array(2),rg=new Float32Array([1/0,1/0,-1/0,-1/0]);function zse(i,e){if(i._removeMirroring)throw new Error("Context is already forwarding operations.");i.__originalSave=i.save,i.__originalRestore=i.restore,i.__originalRotate=i.rotate,i.__originalScale=i.scale,i.__originalTranslate=i.translate,i.__originalTransform=i.transform,i.__originalSetTransform=i.setTransform,i.__originalResetTransform=i.resetTransform,i.__originalClip=i.clip,i.__originalMoveTo=i.moveTo,i.__originalLineTo=i.lineTo,i.__originalBezierCurveTo=i.bezierCurveTo,i.__originalRect=i.rect,i.__originalClosePath=i.closePath,i.__originalBeginPath=i.beginPath,i._removeMirroring=()=>{i.save=i.__originalSave,i.restore=i.__originalRestore,i.rotate=i.__originalRotate,i.scale=i.__originalScale,i.translate=i.__originalTranslate,i.transform=i.__originalTransform,i.setTransform=i.__originalSetTransform,i.resetTransform=i.__originalResetTransform,i.clip=i.__originalClip,i.moveTo=i.__originalMoveTo,i.lineTo=i.__originalLineTo,i.bezierCurveTo=i.__originalBezierCurveTo,i.rect=i.__originalRect,i.closePath=i.__originalClosePath,i.beginPath=i.__originalBeginPath,delete i._removeMirroring},i.save=function(){e.save(),this.__originalSave()},i.restore=function(){e.restore(),this.__originalRestore()},i.translate=function(t,n){e.translate(t,n),this.__originalTranslate(t,n)},i.scale=function(t,n){e.scale(t,n),this.__originalScale(t,n)},i.transform=function(t,n,r,o,s,a){e.transform(t,n,r,o,s,a),this.__originalTransform(t,n,r,o,s,a)},i.setTransform=function(t,n,r,o,s,a){e.setTransform(t,n,r,o,s,a),this.__originalSetTransform(t,n,r,o,s,a)},i.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},i.rotate=function(t){e.rotate(t),this.__originalRotate(t)},i.clip=function(t){e.clip(t),this.__originalClip(t)},i.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},i.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},i.bezierCurveTo=function(t,n,r,o,s,a){e.bezierCurveTo(t,n,r,o,s,a),this.__originalBezierCurveTo(t,n,r,o,s,a)},i.rect=function(t,n,r,o){e.rect(t,n,r,o),this.__originalRect(t,n,r,o)},i.closePath=function(){e.closePath(),this.__originalClosePath()},i.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}var Fk=class{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let r;return this.cache[e]!==void 0?(r=this.cache[e],this.canvasFactory.reset(r,t,n)):(r=this.canvasFactory.create(t,n),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(let e in this.cache){let t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}};function ky(i,e,t,n,r,o,s,a,l,c){let[d,h,p,g,_,b]=Ei(i);if(h===0&&p===0){let M=s*d+_,O=Math.round(M),A=a*g+b,D=Math.round(A),N=(s+l)*d+_,B=Math.abs(Math.round(N)-O)||1,T=(a+c)*g+b,H=Math.abs(Math.round(T)-D)||1;return i.setTransform(Math.sign(d),0,0,Math.sign(g),O,D),i.drawImage(e,t,n,r,o,0,0,B,H),i.setTransform(d,h,p,g,_,b),[B,H]}if(d===0&&g===0){let M=a*p+_,O=Math.round(M),A=s*h+b,D=Math.round(A),N=(a+c)*p+_,B=Math.abs(Math.round(N)-O)||1,T=(s+l)*h+b,H=Math.abs(Math.round(T)-D)||1;return i.setTransform(0,Math.sign(h),Math.sign(p),0,O,D),i.drawImage(e,t,n,r,o,0,0,H,B),i.setTransform(d,h,p,g,_,b),[H,B]}i.drawImage(e,t,n,r,o,s,a,l,c);let C=Math.hypot(d,h),y=Math.hypot(p,g);return[C*l,y*c]}var Xy=class{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=sk;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=Zr.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(e,t){this.clipBox=new Float32Array([0,0,e,t]),this.minMax=rg.slice()}clone(){let e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=Fr.FILL,t=null){let n=this.minMax.slice();if(e===Fr.STROKE){t||Xn("Stroke bounding box must include transform."),Mt.singularValueDecompose2dScale(t,vs);let r=vs[0]*this.lineWidth/2,o=vs[1]*this.lineWidth/2;n[0]-=r,n[1]-=o,n[2]+=r,n[3]+=o}return n}updateClipFromPath(){let e=Mt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(rg,0)}getClippedPathBoundingBox(e=Fr.FILL,t=null){return Mt.intersect(this.clipBox,this.getPathBoundingBox(e,t))}};function kR(i,e){if(e instanceof ImageData){i.putImageData(e,0,0);return}let t=e.height,n=e.width,r=t%Ho,o=(t-r)/Ho,s=r===0?o:o+1,a=i.createImageData(n,Ho),l=0,c,d=e.data,h=a.data,p,g,_,b;if(e.kind===Ty.GRAYSCALE_1BPP){let C=d.byteLength,y=new Uint32Array(h.buffer,0,h.byteLength>>2),M=y.length,O=n+7>>3,A=4294967295,D=vr.isLittleEndian?4278190080:255;for(p=0;p<s;p++){for(_=p<o?Ho:r,c=0,g=0;g<_;g++){let N=C-l,B=0,T=N>O?n:N*8-7,H=T&-8,te=0,L=0;for(;B<H;B+=8)L=d[l++],y[c++]=L&128?A:D,y[c++]=L&64?A:D,y[c++]=L&32?A:D,y[c++]=L&16?A:D,y[c++]=L&8?A:D,y[c++]=L&4?A:D,y[c++]=L&2?A:D,y[c++]=L&1?A:D;for(;B<T;B++)te===0&&(L=d[l++],te=128),y[c++]=L&te?A:D,te>>=1}for(;c<M;)y[c++]=0;i.putImageData(a,0,p*Ho)}}else if(e.kind===Ty.RGBA_32BPP){for(g=0,b=n*Ho*4,p=0;p<o;p++)h.set(d.subarray(l,l+b)),l+=b,i.putImageData(a,0,g),g+=Ho;p<s&&(b=n*r*4,h.set(d.subarray(l,l+b)),i.putImageData(a,0,g))}else if(e.kind===Ty.RGB_24BPP)for(_=Ho,b=n*_,p=0;p<s;p++){for(p>=o&&(_=r,b=n*_),c=0,g=b;g--;)h[c++]=d[l++],h[c++]=d[l++],h[c++]=d[l++],h[c++]=255;i.putImageData(a,0,p*Ho)}else throw new Error(`bad image kind: ${e.kind}`)}function AR(i,e){if(e.bitmap){i.drawImage(e.bitmap,0,0);return}let t=e.height,n=e.width,r=t%Ho,o=(t-r)/Ho,s=r===0?o:o+1,a=i.createImageData(n,Ho),l=0,c=e.data,d=a.data;for(let h=0;h<s;h++){let p=h<o?Ho:r;({srcPos:l}=Lse({src:c,srcPos:l,dest:d,width:n,height:p,nonBlackColor:0})),i.putImageData(a,0,h*Ho)}}function sx(i,e){let t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(let n of t)i[n]!==void 0&&(e[n]=i[n]);i.setLineDash!==void 0&&(e.setLineDash(i.getLineDash()),e.lineDashOffset=i.lineDashOffset)}function Ay(i){i.strokeStyle=i.fillStyle="#000000",i.fillRule="nonzero",i.globalAlpha=1,i.lineWidth=1,i.lineCap="butt",i.lineJoin="miter",i.miterLimit=10,i.globalCompositeOperation="source-over",i.font="10px sans-serif",i.setLineDash!==void 0&&(i.setLineDash([]),i.lineDashOffset=0);let{filter:e}=i;e!=="none"&&e!==""&&(i.filter="none")}function DR(i,e){if(e)return!0;Mt.singularValueDecompose2dScale(i,vs);let t=Math.fround(Ec.pixelRatio*zd.PDF_TO_CSS_UNITS);return vs[0]<=t&&vs[1]<=t}var jse=["butt","round","square"],Vse=["miter","round","bevel"],Use={},FR={},og=class i{constructor(e,t,n,r,o,{optionalContentConfig:s,markedContentStack:a=null},l,c){this.ctx=e,this.current=new Xy(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=r,this.filterFactory=o,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=s,this.cachedCanvases=new Fk(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:r=null}){let o=this.ctx.canvas.width,s=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,o,s),this.ctx.fillStyle=a,n){let l=this.cachedCanvases.getCanvas("transparent",o,s);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...Ei(this.compositeCtx))}this.ctx.save(),Ay(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Ei(this.ctx)}executeOperatorList(e,t,n,r){let o=e.argsArray,s=e.fnArray,a=t||0,l=o.length;if(l===a)return a;let c=l-a>SR&&typeof n=="function",d=c?Date.now()+Rse:0,h=0,p=this.commonObjs,g=this.objs,_;for(;;){if(r!==void 0&&a===r.nextBreakPoint)return r.breakIt(a,n),a;if(_=s[a],_!==By.dependency)this[_].apply(this,o[a]);else for(let b of o[a]){let C=b.startsWith("g_")?p:g;if(!C.has(b))return C.get(b,n),a}if(a++,a===l)return a;if(c&&++h>SR){if(Date.now()>d)return n(),a;h=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(let e of this._cachedBitmapsMap.values()){for(let t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){let e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){let t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}_scaleImage(e,t){let n=e.width??e.displayWidth,r=e.height??e.displayHeight,o=Math.max(Math.hypot(t[0],t[1]),1),s=Math.max(Math.hypot(t[2],t[3]),1),a=n,l=r,c="prescale1",d,h;for(;o>2&&a>1||s>2&&l>1;){let p=a,g=l;o>2&&a>1&&(p=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),o/=a/p),s>2&&l>1&&(g=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,s/=l/g),d=this.cachedCanvases.getCanvas(c,p,g),h=d.context,h.clearRect(0,0,p,g),h.drawImage(e,0,0,a,l,0,0,p,g),e=d.canvas,a=p,l=g,c=c==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:a,paintHeight:l}}_createMaskCanvas(e){let t=this.ctx,{width:n,height:r}=e,o=this.current.fillColor,s=this.current.patternFill,a=Ei(t),l,c,d,h;if((e.bitmap||e.data)&&e.count>1){let H=e.bitmap||e.data.buffer;c=JSON.stringify(s?a:[a.slice(0,4),o]),l=this._cachedBitmapsMap.get(H),l||(l=new Map,this._cachedBitmapsMap.set(H,l));let te=l.get(c);if(te&&!s){let L=Math.round(Math.min(a[0],a[2])+a[4]),z=Math.round(Math.min(a[1],a[3])+a[5]);return{canvas:te,offsetX:L,offsetY:z}}d=te}d||(h=this.cachedCanvases.getCanvas("maskCanvas",n,r),AR(h.context,e));let p=Mt.transform(a,[1/n,0,0,-1/r,0,0]);p=Mt.transform(p,[1,0,0,1,0,-r]);let g=rg.slice();Mt.axialAlignedBoundingBox([0,0,n,r],p,g);let[_,b,C,y]=g,M=Math.round(C-_)||1,O=Math.round(y-b)||1,A=this.cachedCanvases.getCanvas("fillCanvas",M,O),D=A.context,N=_,B=b;D.translate(-N,-B),D.transform(...p),d||(d=this._scaleImage(h.canvas,El(D)),d=d.img,l&&s&&l.set(c,d)),D.imageSmoothingEnabled=DR(Ei(D),e.interpolate),ky(D,d,0,0,d.width,d.height,0,0,n,r),D.globalCompositeOperation="source-in";let T=Mt.transform(El(D),[1,0,0,1,-N,-B]);return D.fillStyle=s?o.getPattern(t,this,T,Fr.FILL):o,D.fillRect(0,0,n,r),l&&!s&&(this.cachedCanvases.delete("fillCanvas"),l.set(c,A.canvas)),{canvas:A.canvas,offsetX:Math.round(N),offsetY:Math.round(B)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=jse[e]}setLineJoin(e){this.ctx.lineJoin=Vse[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){let n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(e),n.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(let[t,n]of e)switch(t){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){let e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");let e=this.ctx.canvas.width,t=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(n,e,t);this.suspendedCtx=this.ctx;let o=this.ctx=r.context;o.setTransform(this.suspendedCtx.getTransform()),sx(this.suspendedCtx,o),zse(o,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),sx(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];let t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,r){let o=r[0],s=r[1],a=r[2]-o,l=r[3]-s;a===0||l===0||(this.genericComposeSMask(t.context,n,a,l,t.subtype,t.backdrop,t.transferMap,o,s,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,r,o,s,a,l,c,d,h){let p=e.canvas,g=l-d,_=c-h;if(s)if(g<0||_<0||g+n>p.width||_+r>p.height){let C=this.cachedCanvases.getCanvas("maskExtension",n,r),y=C.context;y.drawImage(p,-g,-_),y.globalCompositeOperation="destination-atop",y.fillStyle=s,y.fillRect(0,0,n,r),y.globalCompositeOperation="source-over",p=C.canvas,g=_=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);let C=new Path2D;C.rect(g,_,n,r),e.clip(C),e.globalCompositeOperation="destination-atop",e.fillStyle=s,e.fillRect(g,_,n,r),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),o==="Alpha"&&a?t.filter=this.filterFactory.addAlphaFilter(a):o==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(a));let b=new Path2D;b.rect(l,c,n,r),t.clip(b),t.globalCompositeOperation="destination-in",t.drawImage(p,g,_,n,r,l,c,n,r),t.restore()}save(){this.inSMaskMode&&sx(this.ctx,this.suspendedCtx),this.ctx.save();let e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&sx(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,n,r,o,s){this.ctx.transform(e,t,n,r,o,s),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n){let[r]=t;if(!n){r||=t[0]=new Path2D,this[e](r);return}if(!(r instanceof Path2D)){let o=t[0]=new Path2D;for(let s=0,a=r.length;s<a;)switch(r[s++]){case Py.moveTo:o.moveTo(r[s++],r[s++]);break;case Py.lineTo:o.lineTo(r[s++],r[s++]);break;case Py.curveTo:o.bezierCurveTo(r[s++],r[s++],r[s++],r[s++],r[s++],r[s++]);break;case Py.closePath:o.closePath();break;default:Ht(`Unrecognized drawing path operator: ${r[s-1]}`);break}r=o}Mt.axialAlignedBoundingBox(n,Ei(this.ctx),this.current.minMax),this[e](r)}closePath(){this.ctx.closePath()}stroke(e,t=!0){let n=this.ctx,r=this.current.strokeColor;if(n.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof r=="object"&&r?.getPattern){let o=r.isModifyingCurrentTransform()?n.getTransform():null;if(n.save(),n.strokeStyle=r.getPattern(n,this,El(n),Fr.STROKE),o){let s=new Path2D;s.addPath(e,n.getTransform().invertSelf().multiplySelf(o)),e=s}this.rescaleAndStroke(e,!1),n.restore()}else this.rescaleAndStroke(e,!0);t&&this.consumePath(e,this.current.getClippedPathBoundingBox(Fr.STROKE,Ei(this.ctx))),n.globalAlpha=this.current.fillAlpha}closeStroke(e){this.stroke(e)}fill(e,t=!0){let n=this.ctx,r=this.current.fillColor,o=this.current.patternFill,s=!1;if(o){let l=r.isModifyingCurrentTransform()?n.getTransform():null;if(n.save(),n.fillStyle=r.getPattern(n,this,El(n),Fr.FILL),l){let c=new Path2D;c.addPath(e,n.getTransform().invertSelf().multiplySelf(l)),e=c}s=!0}let a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(n.fill(e,"evenodd"),this.pendingEOFill=!1):n.fill(e)),s&&n.restore(),t&&this.consumePath(e,a)}eoFill(e){this.pendingEOFill=!0,this.fill(e)}fillStroke(e){this.fill(e,!1),this.stroke(e,!1),this.consumePath(e)}eoFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}closeFillStroke(e){this.fillStroke(e)}closeEOFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}endPath(e){this.consumePath(e)}rawFillPath(e){this.ctx.fill(e)}clip(){this.pendingClip=Use}eoClip(){this.pendingClip=FR}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){let e=this.pendingTextPaths,t=this.ctx;if(e===void 0)return;let n=new Path2D,r=t.getTransform().invertSelf();for(let{transform:o,x:s,y:a,fontSize:l,path:c}of e)n.addPath(c,new DOMMatrix(o).preMultiplySelf(r).translate(s,a).scale(l,-l));t.clip(n),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){let n=this.commonObjs.get(e),r=this.current;if(!n)throw new Error(`Can't find font for ${e}`);if(r.fontMatrix=n.fontMatrix||sk,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&Ht("Invalid font matrix for font "+e),t<0?(t=-t,r.fontDirection=-1):r.fontDirection=1,this.current.font=n,this.current.fontSize=t,n.isType3Font)return;let o=n.loadedName||"sans-serif",s=n.systemFontInfo?.css||`"${o}", ${n.fallbackName}`,a="normal";n.black?a="900":n.bold&&(a="bold");let l=n.italic?"italic":"normal",c=t;t<PR?c=PR:t>OR&&(c=OR),this.current.fontSizeScale=t/c,this.ctx.font=`${l} ${a} ${c}px ${s}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e){let{current:t}=this;t.textMatrix=e,t.textMatrixScale=Math.hypot(e[0],e[1]),t.x=t.lineX=0,t.y=t.lineY=0}nextLine(){this.moveText(0,this.current.leading)}#n(e,t,n){let r=new Path2D;return r.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(t)),r}paintChar(e,t,n,r,o){let s=this.ctx,a=this.current,l=a.font,c=a.textRenderingMode,d=a.fontSize/a.fontSizeScale,h=c&Zr.FILL_STROKE_MASK,p=!!(c&Zr.ADD_TO_PATH_FLAG),g=a.patternFill&&!l.missingFile,_=a.patternStroke&&!l.missingFile,b;if((l.disableFontFace||p||g||_)&&(b=l.getPathGenerator(this.commonObjs,e)),l.disableFontFace||g||_){s.save(),s.translate(t,n),s.scale(d,-d);let C;if((h===Zr.FILL||h===Zr.FILL_STROKE)&&(r?(C=s.getTransform(),s.setTransform(...r),s.fill(this.#n(b,C,r))):s.fill(b)),h===Zr.STROKE||h===Zr.FILL_STROKE)if(o){C||=s.getTransform(),s.setTransform(...o);let{a:y,b:M,c:O,d:A}=C,D=Mt.inverseTransform(o),N=Mt.transform([y,M,O,A,0,0],D);Mt.singularValueDecompose2dScale(N,vs),s.lineWidth*=Math.max(vs[0],vs[1])/d,s.stroke(this.#n(b,C,o))}else s.lineWidth/=d,s.stroke(b);s.restore()}else(h===Zr.FILL||h===Zr.FILL_STROKE)&&s.fillText(e,t,n),(h===Zr.STROKE||h===Zr.FILL_STROKE)&&s.strokeText(e,t,n);p&&(this.pendingTextPaths||=[]).push({transform:Ei(s),x:t,y:n,fontSize:d,path:b})}get isFontSubpixelAAEnabled(){let{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);let t=e.getImageData(0,0,10,10).data,n=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){n=!0;break}return gn(this,"isFontSubpixelAAEnabled",n)}showText(e){let t=this.current,n=t.font;if(n.isType3Font)return this.showType3Text(e);let r=t.fontSize;if(r===0)return;let o=this.ctx,s=t.fontSizeScale,a=t.charSpacing,l=t.wordSpacing,c=t.fontDirection,d=t.textHScale*c,h=e.length,p=n.vertical,g=p?1:-1,_=n.defaultVMetrics,b=r*t.fontMatrix[0],C=t.textRenderingMode===Zr.FILL&&!n.disableFontFace&&!t.patternFill;o.save(),t.textMatrix&&o.transform(...t.textMatrix),o.translate(t.x,t.y+t.textRise),c>0?o.scale(d,-1):o.scale(d,1);let y,M;if(t.patternFill){o.save();let B=t.fillColor.getPattern(o,this,El(o),Fr.FILL);y=Ei(o),o.restore(),o.fillStyle=B}if(t.patternStroke){o.save();let B=t.strokeColor.getPattern(o,this,El(o),Fr.STROKE);M=Ei(o),o.restore(),o.strokeStyle=B}let O=t.lineWidth,A=t.textMatrixScale;if(A===0||O===0){let B=t.textRenderingMode&Zr.FILL_STROKE_MASK;(B===Zr.STROKE||B===Zr.FILL_STROKE)&&(O=this.getSinglePixelWidth())}else O/=A;if(s!==1&&(o.scale(s,s),O/=s),o.lineWidth=O,n.isInvalidPDFjsFont){let B=[],T=0;for(let H of e)B.push(H.unicode),T+=H.width;o.fillText(B.join(""),0,0),t.x+=T*b*d,o.restore(),this.compose();return}let D=0,N;for(N=0;N<h;++N){let B=e[N];if(typeof B=="number"){D+=g*B*r/1e3;continue}let T=!1,H=(B.isSpace?l:0)+a,te=B.fontChar,L=B.accent,z,J,Q=B.width;if(p){let X=B.vmetric||_,ie=-(B.vmetric?X[1]:Q*.5)*b,oe=X[2]*b;Q=X?-X[0]:Q,z=ie/s,J=(D+oe)/s}else z=D/s,J=0;if(n.remeasure&&Q>0){let X=o.measureText(te).width*1e3/r*s;if(Q<X&&this.isFontSubpixelAAEnabled){let ie=Q/X;T=!0,o.save(),o.scale(ie,1),z/=ie}else Q!==X&&(z+=(Q-X)/2e3*r/s)}if(this.contentVisible&&(B.isInFont||n.missingFile)){if(C&&!L)o.fillText(te,z,J);else if(this.paintChar(te,z,J,y,M),L){let X=z+r*L.offset.x/s,ie=J-r*L.offset.y/s;this.paintChar(L.fontChar,X,ie,y,M)}}let ce=p?Q*b-H*c:Q*b+H*c;D+=ce,T&&o.restore()}p?t.y-=D:t.x+=D*d,o.restore(),this.compose()}showType3Text(e){let t=this.ctx,n=this.current,r=n.font,o=n.fontSize,s=n.fontDirection,a=r.vertical?1:-1,l=n.charSpacing,c=n.wordSpacing,d=n.textHScale*s,h=n.fontMatrix||sk,p=e.length,g=n.textRenderingMode===Zr.INVISIBLE,_,b,C,y;if(!(g||o===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),n.textMatrix&&t.transform(...n.textMatrix),t.translate(n.x,n.y+n.textRise),t.scale(d,s),_=0;_<p;++_){if(b=e[_],typeof b=="number"){y=a*b*o/1e3,this.ctx.translate(y,0),n.x+=y*d;continue}let M=(b.isSpace?c:0)+l,O=r.charProcOperatorList[b.operatorListId];O?this.contentVisible&&(this.save(),t.scale(o,o),t.transform(...h),this.executeOperatorList(O),this.restore()):Ht(`Type3 character "${b.operatorListId}" is not available.`);let A=[b.width,0];Mt.applyTransform(A,h),C=A[0]*o+M,t.translate(C,0),n.x+=C*d}t.restore()}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,n,r,o,s){let a=new Path2D;a.rect(n,r,o-n,s-r),this.ctx.clip(a),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){let n=this.baseTransform||Ei(this.ctx),r={createCanvasGraphics:o=>new i(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new Nse(e,this.ctx,r,n)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e){this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e){this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let n;return this.cachedPatterns.has(e)?n=this.cachedPatterns.get(e):(n=Bse(this.getObject(e)),this.cachedPatterns.set(e,n)),t&&(n.matrix=t),n}shadingFill(e){if(!this.contentVisible)return;let t=this.ctx;this.save();let n=this._getPattern(e);t.fillStyle=n.getPattern(t,this,El(t),Fr.SHADING);let r=El(t);if(r){let{width:o,height:s}=t.canvas,a=rg.slice();Mt.axialAlignedBoundingBox([0,0,o,s],r,a);let[l,c,d,h]=a;this.ctx.fillRect(l,c,d-l,h-c)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Xn("Should not call beginInlineImage")}beginImageData(){Xn("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=Ei(this.ctx),t)){Mt.axialAlignedBoundingBox(t,this.baseTransform,this.current.minMax);let[n,r,o,s]=t,a=new Path2D;a.rect(n,r,o-n,s-r),this.ctx.clip(a),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);let t=this.ctx;e.isolated||m2("TODO: Support non-isolated groups."),e.knockout&&Ht("Knockout groups not supported.");let n=Ei(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let r=rg.slice();Mt.axialAlignedBoundingBox(e.bbox,Ei(t),r);let o=[0,0,t.canvas.width,t.canvas.height];r=Mt.intersect(r,o)||[0,0,0,0];let s=Math.floor(r[0]),a=Math.floor(r[1]),l=Math.max(Math.ceil(r[2])-s,1),c=Math.max(Math.ceil(r[3])-a,1);this.current.startNewPathAndClipBox([0,0,l,c]);let d="groupAt"+this.groupLevel;e.smask&&(d+="_smask_"+this.smaskCounter++%2);let h=this.cachedCanvases.getCanvas(d,l,c),p=h.context;p.translate(-s,-a),p.transform(...n);let g=new Path2D,[_,b,C,y]=e.bbox;if(g.rect(_,b,C-_,y-b),e.matrix){let M=new Path2D;M.addPath(g,new DOMMatrix(e.matrix)),g=M}p.clip(g),e.smask?this.smaskStack.push({canvas:h.canvas,context:p,offsetX:s,offsetY:a,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(s,a),t.save()),sx(t,p),this.ctx=p,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;let t=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();let r=Ei(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...r);let o=rg.slice();Mt.axialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],r,o),this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(e,t,n,r,o){if(this.#e(),Ay(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){let s=t[2]-t[0],a=t[3]-t[1];if(o&&this.annotationCanvasMap){n=n.slice(),n[4]-=t[0],n[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=s,t[3]=a,Mt.singularValueDecompose2dScale(Ei(this.ctx),vs);let{viewportScale:l}=this,c=Math.ceil(s*this.outputScaleX*l),d=Math.ceil(a*this.outputScaleY*l);this.annotationCanvas=this.canvasFactory.create(c,d);let{canvas:h,context:p}=this.annotationCanvas;this.annotationCanvasMap.set(e,h),this.annotationCanvas.savedCtx=this.ctx,this.ctx=p,this.ctx.save(),this.ctx.setTransform(vs[0],0,0,-vs[1],0,a*vs[1]),Ay(this.ctx)}else{Ay(this.ctx),this.endPath();let l=new Path2D;l.rect(t[0],t[1],s,a),this.ctx.clip(l)}}this.current=new Xy(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;let t=e.count;e=this.getObject(e.data,e),e.count=t;let n=this.ctx,r=this._createMaskCanvas(e),o=r.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(o,r.offsetX,r.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n=0,r=0,o,s){if(!this.contentVisible)return;e=this.getObject(e.data,e);let a=this.ctx;a.save();let l=Ei(a);a.transform(t,n,r,o,0,0);let c=this._createMaskCanvas(e);a.setTransform(1,0,0,1,c.offsetX-l[4],c.offsetY-l[5]);for(let d=0,h=s.length;d<h;d+=2){let p=Mt.transform(l,[t,n,r,o,s[d],s[d+1]]);a.drawImage(c.canvas,p[4],p[5])}a.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;let t=this.ctx,n=this.current.fillColor,r=this.current.patternFill;for(let o of e){let{data:s,width:a,height:l,transform:c}=o,d=this.cachedCanvases.getCanvas("maskCanvas",a,l),h=d.context;h.save();let p=this.getObject(s,o);AR(h,p),h.globalCompositeOperation="source-in",h.fillStyle=r?n.getPattern(h,this,El(t),Fr.FILL):n,h.fillRect(0,0,a,l),h.restore(),t.save(),t.transform(...c),t.scale(1,-1),ky(t,d.canvas,0,0,a,l,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;let t=this.getObject(e);if(!t){Ht("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,n,r){if(!this.contentVisible)return;let o=this.getObject(e);if(!o){Ht("Dependent image isn't ready yet");return}let s=o.width,a=o.height,l=[];for(let c=0,d=r.length;c<d;c+=2)l.push({transform:[t,0,0,n,r[c],r[c+1]],x:0,y:0,w:s,h:a});this.paintInlineImageXObjectGroup(o,l)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;let{bitmap:t,width:n,height:r}=e,o=this.cachedCanvases.getCanvas("inlineImage",n,r),s=o.context;return s.filter=this.current.transferMaps,s.drawImage(t,0,0),s.filter="none",o.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;let t=e.width,n=e.height,r=this.ctx;this.save();let{filter:o}=r;o!=="none"&&o!==""&&(r.filter="none"),r.scale(1/t,-1/n);let s;if(e.bitmap)s=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)s=e;else{let c=this.cachedCanvases.getCanvas("inlineImage",t,n).context;kR(c,e),s=this.applyTransferMapsToCanvas(c)}let a=this._scaleImage(s,El(r));r.imageSmoothingEnabled=DR(Ei(r),e.interpolate),ky(r,a.img,0,0,a.paintWidth,a.paintHeight,0,-n,t,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;let n=this.ctx,r;if(e.bitmap)r=e.bitmap;else{let o=e.width,s=e.height,l=this.cachedCanvases.getCanvas("inlineImage",o,s).context;kR(l,e),r=this.applyTransferMapsToCanvas(l)}for(let o of t)n.save(),n.transform(...o.transform),n.scale(1,-1),ky(n,r,o.x,o.y,o.w,o.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e,t){let n=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);let r=this.ctx;this.pendingClip&&(n||(this.pendingClip===FR?r.clip(e,"evenodd"):r.clip(e)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){let e=Ei(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{let t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){let{lineWidth:e}=this.current,{a:t,b:n,c:r,d:o}=this.ctx.getTransform(),s,a;if(n===0&&r===0){let l=Math.abs(t),c=Math.abs(o);if(l===c)if(e===0)s=a=1/l;else{let d=l*e;s=a=d<1?1/d:1}else if(e===0)s=1/l,a=1/c;else{let d=l*e,h=c*e;s=d<1?1/d:1,a=h<1?1/h:1}}else{let l=Math.abs(t*o-n*r),c=Math.hypot(t,n),d=Math.hypot(r,o);if(e===0)s=d/l,a=c/l;else{let h=e*l;s=d>h?d/h:1,a=c>h?c/h:1}}this._cachedScaleForStroking[0]=s,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e,t){let{ctx:n,current:{lineWidth:r}}=this,[o,s]=this.getScaleForStroking();if(o===s){n.lineWidth=(r||1)*o,n.stroke(e);return}let a=n.getLineDash();t&&n.save(),n.scale(o,s),ik.a=1/o,ik.d=1/s;let l=new Path2D;if(l.addPath(e,ik),a.length>0){let c=Math.max(o,s);n.setLineDash(a.map(d=>d/c)),n.lineDashOffset/=c}n.lineWidth=r||1,n.stroke(l),t&&n.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};for(let i in By)og.prototype[i]!==void 0&&(og.prototype[By[i]]=og.prototype[i]);var Mc=class{static#e=null;static#t="";static get workerPort(){return this.#e}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");this.#e=e}static get workerSrc(){return this.#t}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");this.#t=e}},Ik=class{#e;#t;constructor({parsedData:e,rawData:t}){this.#e=e,this.#t=t}getRaw(){return this.#t}get(e){return this.#e.get(e)??null}[Symbol.iterator](){return this.#e.entries()}},ig=Symbol("INTERNAL"),Tk=class{#e=!1;#t=!1;#n=!1;#i=!0;constructor(e,{name:t,intent:n,usage:r,rbGroups:o}){this.#e=!!(e&_s.DISPLAY),this.#t=!!(e&_s.PRINT),this.name=t,this.intent=n,this.usage=r,this.rbGroups=o}get visible(){if(this.#n)return this.#i;if(!this.#i)return!1;let{print:e,view:t}=this.usage;return this.#e?t?.viewState!=="OFF":this.#t?e?.printState!=="OFF":!0}_setVisible(e,t,n=!1){e!==ig&&Xn("Internal method `_setVisible` called."),this.#n=n,this.#i=t}},Bk=class{#e=null;#t=new Map;#n=null;#i=null;constructor(e,t=_s.DISPLAY){if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,this.#i=e.order;for(let n of e.groups)this.#t.set(n.id,new Tk(t,n));if(e.baseState==="OFF")for(let n of this.#t.values())n._setVisible(ig,!1);for(let n of e.on)this.#t.get(n)._setVisible(ig,!0);for(let n of e.off)this.#t.get(n)._setVisible(ig,!1);this.#n=this.getHash()}}#o(e){let t=e.length;if(t<2)return!0;let n=e[0];for(let r=1;r<t;r++){let o=e[r],s;if(Array.isArray(o))s=this.#o(o);else if(this.#t.has(o))s=this.#t.get(o).visible;else return Ht(`Optional content group not found: ${o}`),!0;switch(n){case"And":if(!s)return!1;break;case"Or":if(s)return!0;break;case"Not":return!s;default:return!0}}return n==="And"}isVisible(e){if(this.#t.size===0)return!0;if(!e)return m2("Optional content group not defined."),!0;if(e.type==="OCG")return this.#t.has(e.id)?this.#t.get(e.id).visible:(Ht(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return this.#o(e.expression);if(!e.policy||e.policy==="AnyOn"){for(let t of e.ids){if(!this.#t.has(t))return Ht(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(let t of e.ids){if(!this.#t.has(t))return Ht(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(let t of e.ids){if(!this.#t.has(t))return Ht(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(let t of e.ids){if(!this.#t.has(t))return Ht(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!1}return!0}return Ht(`Unknown optional content policy ${e.policy}.`),!0}return Ht(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,n=!0){let r=this.#t.get(e);if(!r){Ht(`Optional content group not found: ${e}`);return}if(n&&t&&r.rbGroups.length)for(let o of r.rbGroups)for(let s of o)s!==e&&this.#t.get(s)?._setVisible(ig,!1,!0);r._setVisible(ig,!!t,!0),this.#e=null}setOCGState({state:e,preserveRB:t}){let n;for(let r of e){switch(r){case"ON":case"OFF":case"Toggle":n=r;continue}let o=this.#t.get(r);if(o)switch(n){case"ON":this.setVisibility(r,!0,t);break;case"OFF":this.setVisibility(r,!1,t);break;case"Toggle":this.setVisibility(r,!o.visible,t);break}}this.#e=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#t.size?this.#i?this.#i.slice():[...this.#t.keys()]:null}getGroup(e){return this.#t.get(e)||null}getHash(){if(this.#e!==null)return this.#e;let e=new jy;for(let[t,n]of this.#t)e.update(`${t}:${n.visible}`);return this.#e=e.hexdigest()}[Symbol.iterator](){return this.#t.entries()}},Nk=class{constructor(e,{disableRange:t=!1,disableStream:n=!1}){ar(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');let{length:r,initialData:o,progressiveDone:s,contentDispositionFilename:a}=e;if(this._queuedChunks=[],this._progressiveDone=s,this._contentDispositionFilename=a,o?.length>0){let l=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!t,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((l,c)=>{this._onReceiveData({begin:l,chunk:c})}),e.addProgressListener((l,c)=>{this._onProgress({loaded:l,total:c})}),e.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){let n=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{let r=this._rangeReaders.some(function(o){return o._begin!==e?!1:(o._enqueue(n),!0)});ar(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){e.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){let t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){ar(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");let e=this._queuedChunks;return this._queuedChunks=null,new Lk(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;let n=new Rk(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(let t of this._rangeReaders.slice(0))t.cancel(e);this._pdfDataRangeTransport.abort()}},Lk=class{constructor(e,t,n=!1,r=null){this._stream=e,this._done=n||!1,this._filename=AA(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(let o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}read(){return Ge(this,null,function*(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise})}cancel(e){this._done=!0;for(let t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}},Rk=class{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(let n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}read(){return Ge(this,null,function*(){if(this._queuedChunk){let t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise})}cancel(e){this._done=!0;for(let t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}};function Hse(i){let e=!0,t=n("filename\\*","i").exec(i);if(t){t=t[1];let d=a(t);return d=unescape(d),d=l(d),d=c(d),o(d)}if(t=s(i),t){let d=c(t);return o(d)}if(t=n("filename","i").exec(i),t){t=t[1];let d=a(t);return d=c(d),o(d)}function n(d,h){return new RegExp("(?:^|;)\\s*"+d+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',h)}function r(d,h){if(d){if(!/^[\x00-\xFF]+$/.test(h))return h;try{let p=new TextDecoder(d,{fatal:!0}),g=Px(h);h=p.decode(g),e=!1}catch{}}return h}function o(d){return e&&/[\x80-\xff]/.test(d)&&(d=r("utf-8",d),e&&(d=r("iso-8859-1",d))),d}function s(d){let h=[],p,g=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(p=g.exec(d))!==null;){let[,b,C,y]=p;if(b=parseInt(b,10),b in h){if(b===0)break;continue}h[b]=[C,y]}let _=[];for(let b=0;b<h.length&&b in h;++b){let[C,y]=h[b];y=a(y),C&&(y=unescape(y),b===0&&(y=l(y))),_.push(y)}return _.join("")}function a(d){if(d.startsWith('"')){let h=d.slice(1).split('\\"');for(let p=0;p<h.length;++p){let g=h[p].indexOf('"');g!==-1&&(h[p]=h[p].slice(0,g),h.length=p+1),h[p]=h[p].replaceAll(/\\(.)/g,"$1")}d=h.join('"')}return d}function l(d){let h=d.indexOf("'");if(h===-1)return d;let p=d.slice(0,h),_=d.slice(h+1).replace(/^[^']*'/,"");return r(p,_)}function c(d){return!d.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(d)?d:d.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(h,p,g,_){if(g==="q"||g==="Q")return _=_.replaceAll("_"," "),_=_.replaceAll(/=([0-9a-fA-F]{2})/g,function(b,C){return String.fromCharCode(parseInt(C,16))}),r(p,_);try{_=atob(_)}catch{}return r(p,_)})}return""}function VR(i,e){let t=new Headers;if(!i||!e||typeof e!="object")return t;for(let n in e){let r=e[n];r!==void 0&&t.append(n,r)}return t}function _2(i){return URL.parse(i)?.origin??null}function UR({responseHeaders:i,isHttp:e,rangeChunkSize:t,disableRange:n}){let r={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(i.get("Content-Length"),10);return!Number.isInteger(o)||(r.suggestedLength=o,o<=2*t)||n||!e||i.get("Accept-Ranges")!=="bytes"||(i.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function HR(i){let e=i.get("Content-Disposition");if(e){let t=Hse(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(AA(t))return t}return null}function Sx(i,e){return new sg(`Unexpected server response (${i}) while retrieving PDF "${e}".`,i,i===404||i===0&&e.startsWith("file:"))}function GR(i){return i===200||i===206}function $R(i,e,t){return{method:"GET",headers:i,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function WR(i){return i instanceof Uint8Array?i.buffer:i instanceof ArrayBuffer?i:(Ht(`getArrayBuffer - unexpected data format: ${i}`),new Uint8Array(i).buffer)}var zk=class{_responseOrigin=null;constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=VR(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return ar(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new jk(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;let n=new Vk(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(let t of this._rangeRequestReaders.slice(0))t.cancel(e)}},jk=class{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;let t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;let n=new Headers(e.headers),r=t.url;fetch(r,$R(n,this._withCredentials,this._abortController)).then(o=>{if(e._responseOrigin=_2(o.url),!GR(o.status))throw Sx(o.status,r);this._reader=o.body.getReader(),this._headersCapability.resolve();let s=o.headers,{allowRangeRequests:a,suggestedLength:l}=UR({responseHeaders:s,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=l||this._contentLength,this._filename=HR(s),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ol("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){return Ge(this,null,function*(){yield this._headersCapability.promise;let{value:e,done:t}=yield this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:WR(e),done:!1})})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}},Vk=class{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;let r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;let o=new Headers(e.headers);o.append("Range",`bytes=${t}-${n-1}`);let s=r.url;fetch(s,$R(o,this._withCredentials,this._abortController)).then(a=>{let l=_2(a.url);if(l!==e._responseOrigin)throw new Error(`Expected range response-origin "${l}" to match "${e._responseOrigin}".`);if(!GR(a.status))throw Sx(a.status,s);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}read(){return Ge(this,null,function*(){yield this._readCapability.promise;let{value:e,done:t}=yield this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded}),{value:WR(e),done:!1})})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}},rk=200,ok=206;function Gse(i){let e=i.response;return typeof e!="string"?e:Px(e).buffer}var Uk=class{_responseOrigin=null;constructor({url:e,httpHeaders:t,withCredentials:n}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=VR(this.isHttp,t),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){let t=new XMLHttpRequest,n=this.currXhrId++,r=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(let[o,s]of this.headers)t.setRequestHeader(o,s);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=ok):r.expectedStatus=rk,t.responseType="arraybuffer",ar(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){let n=this.pendingRequests[e];n&&n.onProgress?.(t)}onStateChange(e,t){let n=this.pendingRequests[e];if(!n)return;let r=n.xhr;if(r.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),r.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],r.status===0&&this.isHttp){n.onError(r.status);return}let o=r.status||rk;if(!(o===rk&&n.expectedStatus===ok)&&o!==n.expectedStatus){n.onError(r.status);return}let a=Gse(r);if(o===ok){let l=r.getResponseHeader("Content-Range"),c=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);c?n.onDone({begin:parseInt(c[1],10),chunk:a}):(Ht('Missing or invalid "Content-Range" header.'),n.onError(0))}else a?n.onDone({begin:0,chunk:a}):n.onError(r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){let t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}},Hk=class{constructor(e){this._source=e,this._manager=new Uk(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){let t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return ar(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Gk(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){let n=new $k(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(let t of this._rangeRequestReaders.slice(0))t.cancel(e)}},Gk=class{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){let e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=_2(t.responseURL);let n=t.getAllResponseHeaders(),r=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(a=>{let[l,...c]=a.split(": ");return[l,c.join(": ")]}):[]),{allowRangeRequests:o,suggestedLength:s}=UR({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=s||this._contentLength,this._filename=HR(r),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(let t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Sx(e,this._url),this._headersCapability.reject(this._storedError);for(let t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}read(){return Ge(this,null,function*(){if(yield this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise})}cancel(e){this._done=!0,this._headersCapability.reject(e);for(let t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}},$k=class{constructor(e,t,n){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){let e=_2(this._manager.getRequestXhr(this._requestId)?.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(e){let t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(let n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??=Sx(e,this._url);for(let t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}read(){return Ge(this,null,function*(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){let t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise})}cancel(e){this._done=!0;for(let t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}},$se=/^[a-z][a-z0-9\-+.]+:/i;function Wse(i){if($se.test(i))return new URL(i);let e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(i))}var Wk=class{constructor(e){this.source=e,this.url=Wse(e.url),ar(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return ar(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new qk(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;let n=new Kk(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(let t of this._rangeRequestReaders.slice(0))t.cancel(e)}},qk=class{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;let t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();let n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=Sx(0,this._url.href)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){return Ge(this,null,function*(){if(yield this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Ol("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}},Kk=class{constructor(e,t,n){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();let r=e.source;this._isStreamingSupported=!r.disableStream;let o=process.getBuiltinModule("fs");this._setReadableStream(o.createReadStream(this._url,{start:t,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}read(){return Ge(this,null,function*(){if(yield this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}},ax=Symbol("INITIAL_DATA"),Qy=class{#e=Object.create(null);#t(e){return this.#e[e]||=ot(Ie({},Promise.withResolvers()),{data:ax})}get(e,t=null){if(t){let r=this.#t(e);return r.promise.then(()=>t(r.data)),null}let n=this.#e[e];if(!n||n.data===ax)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){let t=this.#e[e];return!!t&&t.data!==ax}delete(e){let t=this.#e[e];return!t||t.data===ax?!1:(delete this.#e[e],!0)}resolve(e,t=null){let n=this.#t(e);n.data=t,n.resolve()}clear(){for(let e in this.#e){let{data:t}=this.#e[e];t?.bitmap?.close()}this.#e=Object.create(null)}*[Symbol.iterator](){for(let e in this.#e){let{data:t}=this.#e[e];t!==ax&&(yield[e,t])}}},qse=1e5,IR=30,_x=class i{#e=Promise.withResolvers();#t=null;#n=!1;#i=!!globalThis.FontInspector?.enabled;#o=null;#r=null;#a=0;#s=0;#u=null;#c=null;#h=0;#d=0;#f=Object.create(null);#l=[];#g=null;#m=[];#p=new WeakMap;#x=null;static#_=new Map;static#v=new Map;static#C=new WeakMap;static#w=null;static#E=new Set;constructor({textContentSource:e,container:t,viewport:n}){if(e instanceof ReadableStream)this.#g=e;else if(typeof e=="object")this.#g=new ReadableStream({start(l){l.enqueue(e),l.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#t=this.#c=t,this.#d=n.scale*Ec.pixelRatio,this.#h=n.rotation,this.#r={div:null,properties:null,ctx:null};let{pageWidth:r,pageHeight:o,pageX:s,pageY:a}=n.rawDims;this.#x=[1,0,0,-1,-s,a+o],this.#s=r,this.#a=o,i.#D(),P0(t,n),this.#e.promise.finally(()=>{i.#E.delete(this),this.#r=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){let{isWindows:e,isFirefox:t}=vr.platform;return gn(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){let e=()=>{this.#u.read().then(({value:t,done:n})=>{if(n){this.#e.resolve();return}this.#o??=t.lang,Object.assign(this.#f,t.styles),this.#O(t.items),e()},this.#e.reject)};return this.#u=this.#g.getReader(),i.#E.add(this),e(),this.#e.promise}update({viewport:e,onBefore:t=null}){let n=e.scale*Ec.pixelRatio,r=e.rotation;if(r!==this.#h&&(t?.(),this.#h=r,P0(this.#c,{rotation:r})),n!==this.#d){t?.(),this.#d=n;let o={div:null,properties:null,ctx:i.#S(this.#o)};for(let s of this.#m)o.properties=this.#p.get(s),o.div=s,this.#y(o)}}cancel(){let e=new Ol("TextLayer task cancelled.");this.#u?.cancel(e).catch(()=>{}),this.#u=null,this.#e.reject(e)}get textDivs(){return this.#m}get textContentItemsStr(){return this.#l}#O(e){if(this.#n)return;this.#r.ctx??=i.#S(this.#o);let t=this.#m,n=this.#l;for(let r of e){if(t.length>qse){Ht("Ignoring additional textDivs for performance reasons."),this.#n=!0;return}if(r.str===void 0){if(r.type==="beginMarkedContentProps"||r.type==="beginMarkedContent"){let o=this.#t;this.#t=document.createElement("span"),this.#t.classList.add("markedContent"),r.id!==null&&this.#t.setAttribute("id",`${r.id}`),o.append(this.#t)}else r.type==="endMarkedContent"&&(this.#t=this.#t.parentNode);continue}n.push(r.str),this.#k(r)}}#k(e){let t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};this.#m.push(t);let r=Mt.transform(this.#x,e.transform),o=Math.atan2(r[1],r[0]),s=this.#f[e.fontName];s.vertical&&(o+=Math.PI/2);let a=this.#i&&s.fontSubstitution||s.fontFamily;a=i.fontFamilyMap.get(a)||a;let l=Math.hypot(r[2],r[3]),c=l*i.#F(a,s,this.#o),d,h;o===0?(d=r[4],h=r[5]-c):(d=r[4]+c*Math.sin(o),h=r[5]-c*Math.cos(o));let p="calc(var(--total-scale-factor) *",g=t.style;this.#t===this.#c?(g.left=`${(100*d/this.#s).toFixed(2)}%`,g.top=`${(100*h/this.#a).toFixed(2)}%`):(g.left=`${p}${d.toFixed(2)}px)`,g.top=`${p}${h.toFixed(2)}px)`),g.fontSize=`${p}${(i.#w*l).toFixed(2)}px)`,g.fontFamily=a,n.fontSize=l,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,this.#i&&(t.dataset.fontName=s.fontSubstitutionLoadedName||e.fontName),o!==0&&(n.angle=o*(180/Math.PI));let _=!1;if(e.str.length>1)_=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){let b=Math.abs(e.transform[0]),C=Math.abs(e.transform[3]);b!==C&&Math.max(b,C)/Math.min(b,C)>1.5&&(_=!0)}if(_&&(n.canvasWidth=s.vertical?e.height:e.width),this.#p.set(t,n),this.#r.div=t,this.#r.properties=n,this.#y(this.#r),n.hasText&&this.#t.append(t),n.hasEOL){let b=document.createElement("br");b.setAttribute("role","presentation"),this.#t.append(b)}}#y(e){let{div:t,properties:n,ctx:r}=e,{style:o}=t,s="";if(i.#w>1&&(s=`scale(${1/i.#w})`),n.canvasWidth!==0&&n.hasText){let{fontFamily:a}=o,{canvasWidth:l,fontSize:c}=n;i.#P(r,c*this.#d,a);let{width:d}=r.measureText(t.textContent);d>0&&(s=`scaleX(${l*this.#d/d}) ${s}`)}n.angle!==0&&(s=`rotate(${n.angle}deg) ${s}`),s.length>0&&(o.transform=s)}static cleanup(){if(!(this.#E.size>0)){this.#_.clear();for(let{canvas:e}of this.#v.values())e.remove();this.#v.clear()}}static#S(e=null){let t=this.#v.get(e||="");if(!t){let n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#v.set(e,t),this.#C.set(t,{size:0,family:""})}return t}static#P(e,t,n){let r=this.#C.get(e);t===r.size&&n===r.family||(e.font=`${t}px ${n}`,r.size=t,r.family=n)}static#D(){if(this.#w!==null)return;let e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),this.#w=e.getBoundingClientRect().height,e.remove()}static#F(e,t,n){let r=this.#_.get(e);if(r)return r;let o=this.#S(n);o.canvas.width=o.canvas.height=IR,this.#P(o,IR,e);let s=o.measureText(""),a=s.fontBoundingBoxAscent,l=Math.abs(s.fontBoundingBoxDescent);o.canvas.width=o.canvas.height=0;let c=.8;return a?c=a/(a+l):(vr.platform.isFirefox&&Ht("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?c=t.ascent:t.descent&&(c=1+t.descent)),this.#_.set(e,c),c}},vx=class i{static textContent(e){let t=[],n={items:t,styles:Object.create(null)};function r(o){if(!o)return;let s=null,a=o.name;if(a==="#text")s=o.value;else if(i.shouldBuildText(a))o?.attributes?.textContent?s=o.attributes.textContent:o.value&&(s=o.value);else return;if(s!==null&&t.push({str:s}),!!o.children)for(let l of o.children)r(l)}return r(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}},Kse=100;function IA(i={}){typeof i=="string"||i instanceof URL?i={url:i}:(i instanceof ArrayBuffer||ArrayBuffer.isView(i))&&(i={data:i});let e=new Yk,{docId:t}=e,n=i.url?Ase(i.url):null,r=i.data?Dse(i.data):null,o=i.httpHeaders||null,s=i.withCredentials===!0,a=i.password??null,l=i.range instanceof Jy?i.range:null,c=Number.isInteger(i.rangeChunkSize)&&i.rangeChunkSize>0?i.rangeChunkSize:2**16,d=i.worker instanceof bx?i.worker:null,h=i.verbosity,p=typeof i.docBaseUrl=="string"&&!x2(i.docBaseUrl)?i.docBaseUrl:null,g=Oy(i.cMapUrl),_=i.cMapPacked!==!1,b=i.CMapReaderFactory||(go?Ek:Gy),C=Oy(i.iccUrl),y=Oy(i.standardFontDataUrl),M=i.StandardFontDataFactory||(go?Pk:qy),O=Oy(i.wasmUrl),A=i.WasmFactory||(go?Ok:Yy),D=i.stopAtErrors!==!0,N=Number.isInteger(i.maxImageSize)&&i.maxImageSize>-1?i.maxImageSize:-1,B=i.isEvalSupported!==!1,T=typeof i.isOffscreenCanvasSupported=="boolean"?i.isOffscreenCanvasSupported:!go,H=typeof i.isImageDecoderSupported=="boolean"?i.isImageDecoderSupported:!go&&(vr.platform.isFirefox||!globalThis.chrome),te=Number.isInteger(i.canvasMaxAreaInBytes)?i.canvasMaxAreaInBytes:-1,L=typeof i.disableFontFace=="boolean"?i.disableFontFace:go,z=i.fontExtraProperties===!0,J=i.enableXfa===!0,Q=i.ownerDocument||globalThis.document,ce=i.disableRange===!0,X=i.disableStream===!0,ie=i.disableAutoFetch===!0,oe=i.pdfBug===!0,le=i.CanvasFactory||(go?Mk:Ck),Ce=i.FilterFactory||(go?wk:yk),Ne=i.enableHWA===!0,R=i.useWasm!==!1,ne=l?l.length:i.length??NaN,re=typeof i.useSystemFonts=="boolean"?i.useSystemFonts:!go&&!L,de=typeof i.useWorkerFetch=="boolean"?i.useWorkerFetch:!!(b===Gy&&M===qy&&A===Yy&&g&&y&&O&&dx(g,document.baseURI)&&dx(y,document.baseURI)&&dx(O,document.baseURI)),fe=null;pse(h);let me={canvasFactory:new le({ownerDocument:Q,enableHWA:Ne}),filterFactory:new Ce({docId:t,ownerDocument:Q}),cMapReaderFactory:de?null:new b({baseUrl:g,isCompressed:_}),standardFontDataFactory:de?null:new M({baseUrl:y}),wasmFactory:de?null:new A({baseUrl:O})};d||(d=bx.create({verbosity:h,port:Mc.workerPort}),e._worker=d);let Pe={docId:t,apiVersion:"5.3.31",data:r,password:a,disableAutoFetch:ie,rangeChunkSize:c,length:ne,docBaseUrl:p,enableXfa:J,evaluatorOptions:{maxImageSize:N,disableFontFace:L,ignoreErrors:D,isEvalSupported:B,isOffscreenCanvasSupported:T,isImageDecoderSupported:H,canvasMaxAreaInBytes:te,fontExtraProperties:z,useSystemFonts:re,useWasm:R,useWorkerFetch:de,cMapUrl:g,iccUrl:C,standardFontDataUrl:y,wasmUrl:O}},Me={ownerDocument:Q,pdfBug:oe,styleElement:fe,loadingParams:{disableAutoFetch:ie,enableXfa:J}};return d.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");let Ue=d.messageHandler.sendWithPromise("GetDocRequest",Pe,r?[r.buffer]:null),He;if(l)He=new Nk(l,{disableRange:ce,disableStream:X});else if(!r){if(!n)throw new Error("getDocument - no `url` parameter provided.");let Xe=dx(n)?zk:go?Wk:Hk;He=new Xe({url:n,length:ne,httpHeaders:o,withCredentials:s,rangeChunkSize:c,disableRange:ce,disableStream:X})}return Ue.then(Xe=>{if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");let Ye=new E0(t,Xe,d.port),wt=new Jk(Ye,e,He,Me,me);e._transport=wt,Ye.send("Ready",null)})}).catch(e._capability.reject),e}var Yk=class i{static#e=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${i.#e++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}destroy(){return Ge(this,null,function*(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),yield this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker?.destroy(),this._worker=null})}getData(){return Ge(this,null,function*(){return this._transport.getData()})}},Jy=class{#e=Promise.withResolvers();#t=[];#n=[];#i=[];#o=[];constructor(e,t,n=!1,r=null){this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=r}addRangeListener(e){this.#o.push(e)}addProgressListener(e){this.#i.push(e)}addProgressiveReadListener(e){this.#n.push(e)}addProgressiveDoneListener(e){this.#t.push(e)}onDataRange(e,t){for(let n of this.#o)n(e,t)}onDataProgress(e,t){this.#e.promise.then(()=>{for(let n of this.#i)n(e,t)})}onDataProgressiveRead(e){this.#e.promise.then(()=>{for(let t of this.#n)t(e)})}onDataProgressiveDone(){this.#e.promise.then(()=>{for(let e of this.#t)e()})}transportReady(){this.#e.resolve()}requestDataRange(e,t){Xn("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}},Xk=class{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return gn(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){let{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}},Qk=class{#e=!1;constructor(e,t,n,r=!1){this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=r?new Ly:null,this._pdfBug=r,this.commonObjs=n.commonObjs,this.objs=new Qy,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:r=0,dontFlip:o=!1}={}){return new fx({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:o})}getAnnotations({intent:e="display"}={}){let{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return gn(this,"isPureXfa",!!this._transport._htmlForXfa)}getXfa(){return Ge(this,null,function*(){return this._transport._htmlForXfa?.children[this._pageIndex]||null})}render({canvasContext:e,viewport:t,intent:n="display",annotationMode:r=Ld.ENABLE,transform:o=null,background:s=null,optionalContentConfigPromise:a=null,annotationCanvasMap:l=null,pageColors:c=null,printAnnotationStorage:d=null,isEditing:h=!1}){this._stats?.time("Overall");let p=this._transport.getRenderingIntent(n,r,d,h),{renderingIntent:g,cacheKey:_}=p;this.#e=!1,a||=this._transport.getOptionalContentConfig(g);let b=this._intentStates.get(_);b||(b=Object.create(null),this._intentStates.set(_,b)),b.streamReaderCancelTimeout&&(clearTimeout(b.streamReaderCancelTimeout),b.streamReaderCancelTimeout=null);let C=!!(g&_s.PRINT);b.displayReadyCapability||(b.displayReadyCapability=Promise.withResolvers(),b.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(p));let y=A=>{b.renderTasks.delete(M),C&&(this.#e=!0),this.#t(),A?(M.capability.reject(A),this._abortOperatorList({intentState:b,reason:A instanceof Error?A:new Error(A)})):M.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},M=new eA({callback:y,params:{canvasContext:e,viewport:t,transform:o,background:s},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:b.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!C,pdfBug:this._pdfBug,pageColors:c});(b.renderTasks||=new Set).add(M);let O=M.task;return Promise.all([b.displayReadyCapability.promise,a]).then(([A,D])=>{if(this.destroyed){y();return}if(this._stats?.time("Rendering"),!(D.renderingIntent&g))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");M.initializeGraphics({transparency:A,optionalContentConfig:D}),M.operatorListChanged()}).catch(y),O}getOperatorList({intent:e="display",annotationMode:t=Ld.ENABLE,printAnnotationStorage:n=null,isEditing:r=!1}={}){function o(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(l))}let s=this._transport.getRenderingIntent(e,t,n,r,!0),a=this._intentStates.get(s.cacheKey);a||(a=Object.create(null),this._intentStates.set(s.cacheKey,a));let l;return a.opListReadCapability||(l=Object.create(null),l.operatorListChanged=o,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||=new Set).add(l),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(s)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>vx.textContent(n));let t=this.streamTextContent(e);return new Promise(function(n,r){function o(){s.read().then(function({value:l,done:c}){if(c){n(a);return}a.lang??=l.lang,Object.assign(a.styles,l.styles),a.items.push(...l.items),o()},r)}let s=t.getReader(),a={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;let e=[];for(let t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(let n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),this.#e=!1,Promise.all(e)}cleanup(e=!1){this.#e=!0;let t=this.#t();return e&&t&&(this._stats&&=new Ly),t}#t(){if(!this.#e||this.destroyed)return!1;for(let{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}_startRenderPage(e,t){let n=this._intentStates.get(t);n&&(this._stats?.timeEnd("Page Request"),n.displayReadyCapability?.resolve(e))}_renderPageChunk(e,t){for(let n=0,r=e.length;n<r;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(let n of t.renderTasks)n.operatorListChanged();e.lastChunk&&this.#t()}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:n,modifiedIds:r}){let{map:o,transfer:s}=n,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:o,modifiedIds:r},s).getReader(),c=this._intentStates.get(t);c.streamReader=l;let d=()=>{l.read().then(({value:h,done:p})=>{if(p){c.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(h,c),d())},h=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(let p of c.renderTasks)p.operatorListChanged();this.#t()}if(c.displayReadyCapability)c.displayReadyCapability.reject(h);else if(c.opListReadCapability)c.opListReadCapability.reject(h);else throw h}})};d()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof gx){let r=Kse;t.extraDelay>0&&t.extraDelay<1e3&&(r+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},r);return}}if(e.streamReader.cancel(new Ol(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(let[r,o]of this._intentStates)if(o===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}},bx=class i{#e=Promise.withResolvers();#t=null;#n=null;#i=null;static#o=0;static#r=!1;static#a=new WeakMap;static{go&&(this.#r=!0,Mc.workerSrc||="./pdf.worker.mjs"),this._isSameOrigin=(e,t)=>{let n=URL.parse(e);if(!n?.origin||n.origin==="null")return!1;let r=new URL(t,n);return n.origin===r.origin},this._createCDNWrapper=e=>{let t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},this.fromPort=e=>{if(Ose("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return this.create(e)}}constructor({name:e=null,port:t=null,verbosity:n=mse()}={}){if(this.name=e,this.destroyed=!1,this.verbosity=n,t){if(i.#a.has(t))throw new Error("Cannot use more than one PDFWorker per port.");i.#a.set(t,this),this.#u(t)}else this.#c()}get promise(){return this.#e.promise}#s(){this.#e.resolve(),this.#t.send("configure",{verbosity:this.verbosity})}get port(){return this.#n}get messageHandler(){return this.#t}#u(e){this.#n=e,this.#t=new E0("main","worker",e),this.#t.on("ready",()=>{}),this.#s()}#c(){if(i.#r||i.#d){this.#h();return}let{workerSrc:e}=i;try{i._isSameOrigin(window.location,e)||(e=i._createCDNWrapper(new URL(e,window.location).href));let t=new Worker(e,{type:"module"}),n=new E0("main","worker",t),r=()=>{o.abort(),n.destroy(),t.terminate(),this.destroyed?this.#e.reject(new Error("Worker was destroyed")):this.#h()},o=new AbortController;t.addEventListener("error",()=>{this.#i||r()},{signal:o.signal}),n.on("test",a=>{if(o.abort(),this.destroyed||!a){r();return}this.#t=n,this.#n=t,this.#i=t,this.#s()}),n.on("ready",a=>{if(o.abort(),this.destroyed){r();return}try{s()}catch{this.#h()}});let s=()=>{let a=new Uint8Array;n.send("test",a,[a.buffer])};s();return}catch{m2("The worker has been disabled.")}this.#h()}#h(){i.#r||(Ht("Setting up fake worker."),i.#r=!0),i._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this.#e.reject(new Error("Worker was destroyed"));return}let t=new bk;this.#n=t;let n=`fake${i.#o++}`,r=new E0(n+"_worker",n,t);e.setup(r,t),this.#t=new E0(n,n+"_worker",t),this.#s()}).catch(e=>{this.#e.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){this.destroyed=!0,this.#i?.terminate(),this.#i=null,i.#a.delete(this.#n),this.#n=null,this.#t?.destroy(),this.#t=null}static create(e){let t=this.#a.get(e?.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new i(e)}static get workerSrc(){if(Mc.workerSrc)return Mc.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get#d(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){return gn(this,"_setupFakeWorkerGlobal",Ge(this,null,function*(){return this.#d?this.#d:(yield import(this.workerSrc)).WorkerMessageHandler}))}},Jk=class{#e=new Map;#t=new Map;#n=new Map;#i=new Map;#o=null;constructor(e,t,n,r,o){this.messageHandler=e,this.loadingTask=t,this.commonObjs=new Qy,this.fontLoader=new xk({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.wasmFactory=o.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}#r(e,t=null){let n=this.#e.get(e);if(n)return n;let r=this.messageHandler.sendWithPromise(e,t);return this.#e.set(e,r),r}get annotationStorage(){return gn(this,"annotationStorage",new mx)}getRenderingIntent(e,t=Ld.ENABLE,n=null,r=!1,o=!1){let s=_s.DISPLAY,a=mk;switch(e){case"any":s=_s.ANY;break;case"display":break;case"print":s=_s.PRINT;break;default:Ht(`getRenderingIntent - invalid intent: ${e}`)}let l=s&_s.PRINT&&n instanceof Vy?n:this.annotationStorage;switch(t){case Ld.DISABLE:s+=_s.ANNOTATIONS_DISABLE;break;case Ld.ENABLE:break;case Ld.ENABLE_FORMS:s+=_s.ANNOTATIONS_FORMS;break;case Ld.ENABLE_STORAGE:s+=_s.ANNOTATIONS_STORAGE,a=l.serializable;break;default:Ht(`getRenderingIntent - invalid annotationMode: ${t}`)}r&&(s+=_s.IS_EDITING),o&&(s+=_s.OPLIST);let{ids:c,hash:d}=l.modifiedIds,h=[s,a.hash,d];return{renderingIntent:s,cacheKey:h.join("_"),annotationStorageSerializable:a,modifiedIds:c}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#o?.reject(new Error("Worker was destroyed during onPassword callback"));let e=[];for(let n of this.#t.values())e.push(n._destroy());this.#t.clear(),this.#n.clear(),this.#i.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();let t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),_x.cleanup(),this._networkStream?.cancelAllRequests(new Ol("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){let{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,r)=>{ar(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},r.onPull=()=>{this._fullReader.read().then(function({value:o,done:s}){if(s){r.close();return}ar(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{this._fullReader.cancel(o),r.ready.catch(s=>{if(!this.destroyed)throw s})}}),e.on("ReaderHeadersReady",n=>Ge(this,null,function*(){yield this._fullReader.headersReady;let{isStreamingSupported:r,isRangeSupported:o,contentLength:s}=this._fullReader;return(!r||!o)&&(this._lastProgress&&t.onProgress?.(this._lastProgress),this._fullReader.onProgress=a=>{t.onProgress?.({loaded:a.loaded,total:a.total})}),{isStreamingSupported:r,isRangeSupported:o,contentLength:s}})),e.on("GetRangeReader",(n,r)=>{ar(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");let o=this._networkStream.getRangeReader(n.begin,n.end);if(!o){r.close();return}r.onPull=()=>{o.read().then(function({value:s,done:a}){if(a){r.close();return}ar(s instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{r.error(s)})},r.onCancel=s=>{o.cancel(s),r.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new Xk(n,this))}),e.on("DocException",n=>{t._capability.reject(Uo(n))}),e.on("PasswordRequest",n=>{this.#o=Promise.withResolvers();try{if(!t.onPassword)throw Uo(n);let r=o=>{o instanceof Error?this.#o.reject(o):this.#o.resolve({password:o})};t.onPassword(r,n.code)}catch(r){this.#o.reject(r)}return this.#o.promise}),e.on("DataLoaded",n=>{t.onProgress?.({loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;this.#t.get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,r,o])=>{if(this.destroyed||this.commonObjs.has(n))return null;switch(r){case"Font":if("error"in o){let c=o.error;Ht(`Error during font loading: ${c}`),this.commonObjs.resolve(n,c);break}let s=this._params.pdfBug&&globalThis.FontInspector?.enabled?(c,d)=>globalThis.FontInspector.fontAdded(c,d):null,a=new _k(o,s);this.fontLoader.bind(a).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!a.fontExtraProperties&&a.data&&(a.data=null),this.commonObjs.resolve(n,a)});break;case"CopyLocalImage":let{imageRef:l}=o;ar(l,"The imageRef must be defined.");for(let c of this.#t.values())for(let[,d]of c.objs)if(d?.ref===l)return d.dataLen?(this.commonObjs.resolve(n,structuredClone(d)),d.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,o);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),e.on("obj",([n,r,o,s])=>{if(this.destroyed)return;let a=this.#t.get(r);if(!a.objs.has(n)){if(a._intentStates.size===0){s?.bitmap?.close();return}switch(o){case"Image":case"Pattern":a.objs.resolve(n,s);break;default:throw new Error(`Got unknown object type ${o}`)}}}),e.on("DocProgress",n=>{this.destroyed||t.onProgress?.({loaded:n.loaded,total:n.total})}),e.on("FetchBinaryData",n=>Ge(this,null,function*(){if(this.destroyed)throw new Error("Worker was destroyed.");let r=this[n.type];if(!r)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(n)}))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&Ht("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");let{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));let t=e-1,n=this.#n.get(t);if(n)return n;let r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&this.#i.set(o.refStr,e);let s=new Qk(t,o,this,this._params.pdfBug);return this.#t.set(t,s),s});return this.#n.set(t,r),r}getPageIndex(e){return vk(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return this.#r("GetFieldObjects")}hasJSActions(){return this.#r("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#r("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return this.#r("GetOptionalContentConfig").then(t=>new Bk(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){let e="GetMetadata",t=this.#e.get(e);if(t)return t;let n=this.messageHandler.sendWithPromise(e,null).then(r=>({info:r[0],metadata:r[1]?new Ik(r[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}startCleanup(e=!1){return Ge(this,null,function*(){if(!this.destroyed){yield this.messageHandler.sendWithPromise("Cleanup",null);for(let t of this.#t.values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0),_x.cleanup()}})}cachedPageNumber(e){if(!vk(e))return null;let t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return this.#i.get(t)??null}},Zk=class{#e=null;onContinue=null;onError=null;constructor(e){this.#e=e}get promise(){return this.#e.capability.promise}cancel(e=0){this.#e.cancel(null,e)}get separateAnnots(){let{separateAnnots:e}=this.#e.operatorList;if(!e)return!1;let{annotationCanvasMap:t}=this.#e;return e.form||e.canvas&&t?.size>0}},eA=class i{#e=null;static#t=new WeakSet;constructor({callback:e,params:t,objs:n,commonObjs:r,annotationCanvasMap:o,operatorList:s,pageIndex:a,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:d=!1,pdfBug:h=!1,pageColors:p=null}){this.callback=e,this.params=t,this.objs=n,this.commonObjs=r,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=s,this._pageIndex=a,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=h,this.pageColors=p,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=d===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Zk(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){if(this.cancelled)return;if(this._canvas){if(i.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");i.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());let{canvasContext:n,viewport:r,transform:o,background:s}=this.params;this.gfx=new og(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:o,viewport:r,transparency:e,background:s}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,t=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#e&&(window.cancelAnimationFrame(this.#e),this.#e=null),i.#t.delete(this._canvas),e||=new gx(`Rendering cancelled, page ${this._pageIndex+1}`,t),this.callback(e),this.task.onError?.(e)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#e=window.requestAnimationFrame(()=>{this.#e=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}_next(){return Ge(this,null,function*(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),i.#t.delete(this._canvas),this.callback())))})}},Yse="5.3.31",Xse="47ad820d9";function TR(i){return Math.floor(Math.max(0,Math.min(1,i))*255).toString(16).padStart(2,"0")}function lx(i){return Math.max(0,Math.min(255,255*i))}var Zy=class{static CMYK_G([e,t,n,r]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=lx(e),[e,e,e]}static G_HTML([e]){let t=TR(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_rgb(e){return e.map(lx)}static RGB_HTML(e){return`#${e.map(TR).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,n,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,n+r),1-Math.min(1,t+r)]}static CMYK_rgb([e,t,n,r]){return[lx(1-Math.min(1,e+r)),lx(1-Math.min(1,n+r)),lx(1-Math.min(1,t+r))]}static CMYK_HTML(e){let t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){let r=1-e,o=1-t,s=1-n,a=Math.min(r,o,s);return["CMYK",r,o,s,a]}},tA=class{create(e,t,n=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");let r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),n||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Xn("Abstract method `_createSVG` called.")}},ag=class extends tA{_createSVG(e){return document.createElementNS(wc,e)}},e2=class{static setupStorage(e,t,n,r,o){let s=r.getValue(t,{value:null});switch(n.name){case"textarea":if(s.value!==null&&(e.textContent=s.value),o==="print")break;e.addEventListener("input",a=>{r.setValue(t,{value:a.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(s.value===n.attributes.xfaOn?e.setAttribute("checked",!0):s.value===n.attributes.xfaOff&&e.removeAttribute("checked"),o==="print")break;e.addEventListener("change",a=>{r.setValue(t,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(s.value!==null&&e.setAttribute("value",s.value),o==="print")break;e.addEventListener("input",a=>{r.setValue(t,{value:a.target.value})})}break;case"select":if(s.value!==null){e.setAttribute("value",s.value);for(let a of n.children)a.attributes.value===s.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}e.addEventListener("input",a=>{let l=a.target.options,c=l.selectedIndex===-1?"":l[l.selectedIndex].value;r.setValue(t,{value:c})});break}}static setAttributes({html:e,element:t,storage:n=null,intent:r,linkService:o}){let{attributes:s}=t,a=e instanceof HTMLAnchorElement;s.type==="radio"&&(s.name=`${s.name}-${r}`);for(let[l,c]of Object.entries(s))if(c!=null)switch(l){case"class":c.length&&e.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",c);break;case"style":Object.assign(e.style,c);break;case"textContent":e.textContent=c;break;default:(!a||l!=="href"&&l!=="newWindow")&&e.setAttribute(l,c)}a&&o.addLinkAttributes(e,s.href,s.newWindow),n&&s.dataId&&this.setupStorage(e,s.dataId,t,n)}static render(e){let t=e.annotationStorage,n=e.linkService,r=e.xfaHtml,o=e.intent||"display",s=document.createElement(r.name);r.attributes&&this.setAttributes({html:s,element:r,intent:o,linkService:n});let a=o!=="richText",l=e.div;if(l.append(s),e.viewport){let h=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=h}a&&l.setAttribute("class","xfaLayer xfaFont");let c=[];if(r.children.length===0){if(r.value){let h=document.createTextNode(r.value);s.append(h),a&&vx.shouldBuildText(r.name)&&c.push(h)}return{textDivs:c}}let d=[[r,-1,s]];for(;d.length>0;){let[h,p,g]=d.at(-1);if(p+1===h.children.length){d.pop();continue}let _=h.children[++d.at(-1)[1]];if(_===null)continue;let{name:b}=_;if(b==="#text"){let y=document.createTextNode(_.value);c.push(y),g.append(y);continue}let C=_?.attributes?.xmlns?document.createElementNS(_.attributes.xmlns,b):document.createElement(b);if(g.append(C),_.attributes&&this.setAttributes({html:C,element:_,storage:t,intent:o,linkService:n}),_.children?.length>0)d.push([_,-1,C]);else if(_.value){let y=document.createTextNode(_.value);a&&vx.shouldBuildText(b)&&c.push(y),C.append(y)}}for(let h of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))h.setAttribute("readOnly",!0);return{textDivs:c}}static update(e){let t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}},kx=1e3,Qse=9,S0=new WeakSet,t2=class{static create(e){switch(e.data.annotationType){case or.LINK:return new n2(e);case or.TEXT:return new nA(e);case or.WIDGET:switch(e.data.fieldType){case"Tx":return new iA(e);case"Btn":return e.data.radioButton?new i2(e):e.data.checkBox?new oA(e):new sA(e);case"Ch":return new aA(e);case"Sig":return new rA(e)}return new Pc(e);case or.POPUP:return new Cx(e);case or.FREETEXT:return new r2(e);case or.LINE:return new cA(e);case or.SQUARE:return new dA(e);case or.CIRCLE:return new uA(e);case or.POLYLINE:return new o2(e);case or.CARET:return new fA(e);case or.INK:return new yx(e);case or.POLYGON:return new hA(e);case or.HIGHLIGHT:return new s2(e);case or.UNDERLINE:return new gA(e);case or.SQUIGGLY:return new pA(e);case or.STRIKEOUT:return new mA(e);case or.STAMP:return new a2(e);case or.FILEATTACHMENT:return new xA(e);default:return new Yi(e)}}},Yi=class i{#e=null;#t=!1;#n=null;constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:r=!1}={}){this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),r&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:n}){return!!(e?.str||t?.str||n?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return i._hasPopupData(this.data)}updateEdited(e){if(!this.container)return;this.#e||={rect:this.data.rect.slice(0)};let{rect:t}=e;t&&this.#i(t),this.#n?.popup.updateEdited(e)}resetEdited(){this.#e&&(this.#i(this.#e.rect),this.#n?.popup.resetEdited(),this.#e=null)}#i(e){let{container:{style:t},data:{rect:n,rotation:r},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:s,pageX:a,pageY:l}}}}=this;n?.splice(0,4,...e),t.left=`${100*(e[0]-a)/o}%`,t.top=`${100*(s-e[3]+l)/s}%`,r===0?(t.width=`${100*(e[2]-e[0])/o}%`,t.height=`${100*(e[3]-e[1])/s}%`):this.setRotation(r)}_createContainer(e){let{data:t,parent:{page:n,viewport:r}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",t.id),this instanceof Pc||(o.tabIndex=kx);let{style:s}=o;if(s.zIndex=this.parent.zIndex++,t.alternativeText&&(o.title=t.alternativeText),t.noRotate&&o.classList.add("norotate"),!t.rect||this instanceof Cx){let{rotation:b}=t;return!t.hasOwnCanvas&&b!==0&&this.setRotation(b,o),o}let{width:a,height:l}=this;if(!e&&t.borderStyle.width>0){s.borderWidth=`${t.borderStyle.width}px`;let b=t.borderStyle.horizontalCornerRadius,C=t.borderStyle.verticalCornerRadius;if(b>0||C>0){let M=`calc(${b}px * var(--total-scale-factor)) / calc(${C}px * var(--total-scale-factor))`;s.borderRadius=M}else if(this instanceof i2){let M=`calc(${a}px * var(--total-scale-factor)) / calc(${l}px * var(--total-scale-factor))`;s.borderRadius=M}switch(t.borderStyle.style){case ng.SOLID:s.borderStyle="solid";break;case ng.DASHED:s.borderStyle="dashed";break;case ng.BEVELED:Ht("Unimplemented border style: beveled");break;case ng.INSET:Ht("Unimplemented border style: inset");break;case ng.UNDERLINE:s.borderBottomStyle="solid";break;default:break}let y=t.borderColor||null;y?(this.#t=!0,s.borderColor=Mt.makeHexColor(y[0]|0,y[1]|0,y[2]|0)):s.borderWidth=0}let c=Mt.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:d,pageHeight:h,pageX:p,pageY:g}=r.rawDims;s.left=`${100*(c[0]-p)/d}%`,s.top=`${100*(c[1]-g)/h}%`;let{rotation:_}=t;return t.hasOwnCanvas||_===0?(s.width=`${100*a/d}%`,s.height=`${100*l/h}%`):this.setRotation(_,o),o}setRotation(e,t=this.container){if(!this.data.rect)return;let{pageWidth:n,pageHeight:r}=this.parent.viewport.rawDims,{width:o,height:s}=this;e%180!==0&&([o,s]=[s,o]),t.style.width=`${100*o/n}%`,t.style.height=`${100*s/r}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){let e=(t,n,r)=>{let o=r.detail[t],s=o[0],a=o.slice(1);r.target.style[n]=Zy[`${s}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[n]:Zy[`${s}_rgb`](a)})};return gn(this,"_commonActions",{display:t=>{let{display:n}=t.detail,r=n%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:n===1||n===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{let{hidden:n}=t.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{let n=t.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,t){let n=this._commonActions;for(let r of Object.keys(t.detail))(e[r]||n[r])?.(t)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;let t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;let n=this._commonActions;for(let[r,o]of Object.entries(t)){let s=n[r];if(s){let a={detail:{[r]:o},target:e};s(a),delete t[r]}}}_createQuadrilaterals(){if(!this.container)return;let{quadPoints:e}=this.data;if(!e)return;let[t,n,r,o]=this.data.rect.map(b=>Math.fround(b));if(e.length===8){let[b,C,y,M]=e.subarray(2,6);if(r===b&&o===C&&t===y&&n===M)return}let{style:s}=this.container,a;if(this.#t){let{borderColor:b,borderWidth:C}=s;s.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${b}" stroke-width="${C}">`],this.container.classList.add("hasBorder")}let l=r-t,c=o-n,{svgFactory:d}=this,h=d.createElement("svg");h.classList.add("quadrilateralsContainer"),h.setAttribute("width",0),h.setAttribute("height",0);let p=d.createElement("defs");h.append(p);let g=d.createElement("clipPath"),_=`clippath_${this.data.id}`;g.setAttribute("id",_),g.setAttribute("clipPathUnits","objectBoundingBox"),p.append(g);for(let b=2,C=e.length;b<C;b+=8){let y=e[b],M=e[b+1],O=e[b+2],A=e[b+3],D=d.createElement("rect"),N=(O-t)/l,B=(o-M)/c,T=(y-O)/l,H=(M-A)/c;D.setAttribute("x",N),D.setAttribute("y",B),D.setAttribute("width",T),D.setAttribute("height",H),g.append(D),a?.push(`<rect vector-effect="non-scaling-stroke" x="${N}" y="${B}" width="${T}" height="${H}"/>`)}this.#t&&(a.push("</g></svg>')"),s.backgroundImage=a.join("")),this.container.append(h),this.container.style.clipPath=`url(#${_})`}_createPopup(){let{data:e}=this,t=this.#n=new Cx({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]});this.parent.div.append(t.render())}render(){Xn("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){let n=[];if(this._fieldObjects){let r=this._fieldObjects[e];if(r)for(let{page:o,id:s,exportValues:a}of r){if(o===-1||s===t)continue;let l=typeof a=="string"?a:null,c=document.querySelector(`[data-element-id="${s}"]`);if(c&&!S0.has(c)){Ht(`_getElementsByName - element not allowed: ${s}`);continue}n.push({id:s,exportValue:l,domElement:c})}return n}for(let r of document.getElementsByName(e)){let{exportValue:o}=r,s=r.getAttribute("data-element-id");s!==t&&S0.has(r)&&n.push({id:s,exportValue:o,domElement:r})}return n}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){let e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(let t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;let{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}},n2=class extends Yi{constructor(e,t=null){super(e,{isRenderable:!0,ignoreBorder:!!t?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){let{data:e,linkService:t}=this,n=document.createElement("a");n.setAttribute("data-element-id",e.id);let r=!1;return e.url?(t.addLinkAttributes(n,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(n,e.action),r=!0):e.attachment?(this.#t(n,e.attachment,e.attachmentDest),r=!0):e.setOCGState?(this.#n(n,e.setOCGState),r=!0):e.dest?(this._bindLink(n,e.dest),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,e),r=!0),e.resetForm?(this._bindResetFormAction(n,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(n,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(n),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(e,t){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||t==="")&&this.#e()}_bindNamedAction(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),this.#e()}#t(e,t,n=null){e.href=this.linkService.getAnchorUrl(""),t.description&&(e.title=t.description),e.onclick=()=>(this.downloadManager?.openOrDownloadData(t.content,t.filename,n),!1),this.#e()}#n(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),this.#e()}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");let n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(let r of Object.keys(t.actions)){let o=n.get(r);o&&(e[o]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:r}}),!1))}e.onclick||(e.onclick=()=>!1),this.#e()}_bindResetFormAction(e,t){let n=e.onclick;if(n||(e.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){Ht('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),n||(e.onclick=()=>!1);return}e.onclick=()=>{n?.();let{fields:r,refs:o,include:s}=t,a=[];if(r.length!==0||o.length!==0){let d=new Set(o);for(let h of r){let p=this._fieldObjects[h]||[];for(let{id:g}of p)d.add(g)}for(let h of Object.values(this._fieldObjects))for(let p of h)d.has(p.id)===s&&a.push(p)}else for(let d of Object.values(this._fieldObjects))a.push(...d);let l=this.annotationStorage,c=[];for(let d of a){let{id:h}=d;switch(c.push(h),d.type){case"text":{let g=d.defaultValue||"";l.setValue(h,{value:g});break}case"checkbox":case"radiobutton":{let g=d.defaultValue===d.exportValues;l.setValue(h,{value:g});break}case"combobox":case"listbox":{let g=d.defaultValue||"";l.setValue(h,{value:g});break}default:continue}let p=document.querySelector(`[data-element-id="${h}"]`);if(p){if(!S0.has(p)){Ht(`_bindResetFormAction - element not allowed: ${h}`);continue}}else continue;p.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:c,name:"ResetForm"}}),!1}}},nA=class extends Yi{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");let e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}},Pc=class extends Yi{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&(e.previousSibling?.nodeName==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return vr.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,r,o){n.includes("mouse")?e.addEventListener(n,s=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(s),shift:s.shiftKey,modifier:this._getKeyModifier(s)}})}):e.addEventListener(n,s=>{if(n==="blur"){if(!t.focused||!s.relatedTarget)return;t.focused=!1}else if(n==="focus"){if(t.focused)return;t.focused=!0}o&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(s)}})})}_setEventListeners(e,t,n,r){for(let[o,s]of n)(s==="Action"||this.data.actions?.[s])&&((s==="Focus"||s==="Blur")&&(t||={focused:!1}),this._setEventListener(e,t,o,s,r),s==="Focus"&&!this.data.actions?.Blur?this._setEventListener(e,t,"blur","Blur",null):s==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){let t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":Mt.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){let t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||Qse,o=e.style,s,a=2,l=c=>Math.round(10*c)/10;if(this.data.multiLine){let c=Math.abs(this.data.rect[3]-this.data.rect[1]-a),d=Math.round(c/(Iy*r))||1,h=c/d;s=Math.min(r,l(h/Iy))}else{let c=Math.abs(this.data.rect[3]-this.data.rect[1]-a);s=Math.min(r,l(c/Iy))}o.fontSize=`calc(${s}px * var(--total-scale-factor))`,o.color=Mt.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(o.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}},iA=class extends Pc{constructor(e){let t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,n,r){let o=this.annotationStorage;for(let s of this._getElementsByName(e.name,e.id))s.domElement&&(s.domElement[t]=n),o.setValue(s.id,{[r]:n})}render(){let e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){let r=e.getValue(t,{value:this.data.fieldValue}),o=r.value||"",s=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;s&&o.length>s&&(o=o.slice(0,s));let a=r.formattedValue||this.data.textContent?.join(`
`)||null;a&&this.data.comb&&(a=a.replaceAll(/\s+/g,""));let l={userValue:o,formattedValue:a,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=a??o,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",a??o),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),S0.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=kx,this._setRequired(n,this.data.required),s&&(n.maxLength=s),n.addEventListener("input",d=>{e.setValue(t,{value:d.target.value}),this.setPropertyOnSiblings(n,"value",d.target.value,"value"),l.formattedValue=null}),n.addEventListener("resetform",d=>{let h=this.data.defaultFieldValue??"";n.value=l.userValue=h,l.formattedValue=null});let c=d=>{let{formattedValue:h}=l;h!=null&&(d.target.value=h),d.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",h=>{if(l.focused)return;let{target:p}=h;l.userValue&&(p.value=l.userValue),l.lastCommittedValue=p.value,l.commitKey=1,this.data.actions?.Focus||(l.focused=!0)}),n.addEventListener("updatefromsandbox",h=>{this.showElementAndHideCanvas(h.target);let p={value(g){l.userValue=g.detail.value??"",e.setValue(t,{value:l.userValue.toString()}),g.target.value=l.userValue},formattedValue(g){let{formattedValue:_}=g.detail;l.formattedValue=_,_!=null&&g.target!==document.activeElement&&(g.target.value=_),e.setValue(t,{formattedValue:_})},selRange(g){g.target.setSelectionRange(...g.detail.selRange)},charLimit:g=>{let{charLimit:_}=g.detail,{target:b}=g;if(_===0){b.removeAttribute("maxLength");return}b.setAttribute("maxLength",_);let C=l.userValue;!C||C.length<=_||(C=C.slice(0,_),b.value=l.userValue=C,e.setValue(t,{value:C}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:C,willCommit:!0,commitKey:1,selStart:b.selectionStart,selEnd:b.selectionEnd}}))}};this._dispatchEventFromSandbox(p,h)}),n.addEventListener("keydown",h=>{l.commitKey=1;let p=-1;if(h.key==="Escape"?p=0:h.key==="Enter"&&!this.data.multiLine?p=2:h.key==="Tab"&&(l.commitKey=3),p===-1)return;let{value:g}=h.target;l.lastCommittedValue!==g&&(l.lastCommittedValue=g,l.userValue=g,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:g,willCommit:!0,commitKey:p,selStart:h.target.selectionStart,selEnd:h.target.selectionEnd}}))});let d=c;c=null,n.addEventListener("blur",h=>{if(!l.focused||!h.relatedTarget)return;this.data.actions?.Blur||(l.focused=!1);let{value:p}=h.target;l.userValue=p,l.lastCommittedValue!==p&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:p,willCommit:!0,commitKey:l.commitKey,selStart:h.target.selectionStart,selEnd:h.target.selectionEnd}}),d(h)}),this.data.actions?.Keystroke&&n.addEventListener("beforeinput",h=>{l.lastCommittedValue=null;let{data:p,target:g}=h,{value:_,selectionStart:b,selectionEnd:C}=g,y=b,M=C;switch(h.inputType){case"deleteWordBackward":{let O=_.substring(0,b).match(/\w*[^\w]*$/);O&&(y-=O[0].length);break}case"deleteWordForward":{let O=_.substring(b).match(/^[^\w]*\w*/);O&&(M+=O[0].length);break}case"deleteContentBackward":b===C&&(y-=1);break;case"deleteContentForward":b===C&&(M+=1);break}h.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:_,change:p||"",willCommit:!1,selStart:y,selEnd:M}})}),this._setEventListeners(n,l,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],h=>h.target.value)}if(c&&n.addEventListener("blur",c),this.data.comb){let h=(this.data.rect[2]-this.data.rect[0])/s;n.classList.add("comb"),n.style.letterSpacing=`calc(${h}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}},rA=class extends Pc{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}},oA=class extends Pc{constructor(e){super(e,{isRenderable:e.renderForms})}render(){let e=this.annotationStorage,t=this.data,n=t.id,r=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",e.setValue(n,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");let o=document.createElement("input");return S0.add(o),o.setAttribute("data-element-id",n),o.disabled=t.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=t.fieldName,r&&o.setAttribute("checked",!0),o.setAttribute("exportValue",t.exportValue),o.tabIndex=kx,o.addEventListener("change",s=>{let{name:a,checked:l}=s.target;for(let c of this._getElementsByName(a,n)){let d=l&&c.exportValue===t.exportValue;c.domElement&&(c.domElement.checked=d),e.setValue(c.id,{value:d})}e.setValue(n,{value:l})}),o.addEventListener("resetform",s=>{let a=t.defaultFieldValue||"Off";s.target.checked=a===t.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",s=>{let a={value(l){l.target.checked=l.detail.value!=="Off",e.setValue(n,{value:l.target.checked})}};this._dispatchEventFromSandbox(a,s)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],s=>s.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}},i2=class extends Pc{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");let e=this.annotationStorage,t=this.data,n=t.id,r=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if(typeof r=="string"&&(r=r!==t.buttonValue,e.setValue(n,{value:r})),r)for(let s of this._getElementsByName(t.fieldName,n))e.setValue(s.id,{value:!1});let o=document.createElement("input");if(S0.add(o),o.setAttribute("data-element-id",n),o.disabled=t.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=t.fieldName,r&&o.setAttribute("checked",!0),o.tabIndex=kx,o.addEventListener("change",s=>{let{name:a,checked:l}=s.target;for(let c of this._getElementsByName(a,n))e.setValue(c.id,{value:!1});e.setValue(n,{value:l})}),o.addEventListener("resetform",s=>{let a=t.defaultFieldValue;s.target.checked=a!=null&&a===t.buttonValue}),this.enableScripting&&this.hasJSActions){let s=t.buttonValue;o.addEventListener("updatefromsandbox",a=>{let l={value:c=>{let d=s===c.detail.value;for(let h of this._getElementsByName(c.target.name)){let p=d&&h.id===n;h.domElement&&(h.domElement.checked=p),e.setValue(h.id,{value:p})}}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}},sA=class extends n2{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){let e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");let t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}},aA=class extends Pc{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");let e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");S0.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=kx;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",d=>{let h=this.data.defaultFieldValue;for(let p of r.options)p.selected=p.value===h});for(let d of this.data.options){let h=document.createElement("option");h.textContent=d.displayValue,h.value=d.exportValue,n.value.includes(d.exportValue)&&(h.setAttribute("selected",!0),o=!1),r.append(h)}let s=null;if(o){let d=document.createElement("option");d.value=" ",d.setAttribute("hidden",!0),d.setAttribute("selected",!0),r.prepend(d),s=()=>{d.remove(),r.removeEventListener("input",s),s=null},r.addEventListener("input",s)}let a=d=>{let h=d?"value":"textContent",{options:p,multiple:g}=r;return g?Array.prototype.filter.call(p,_=>_.selected).map(_=>_[h]):p.selectedIndex===-1?null:p[p.selectedIndex][h]},l=a(!1),c=d=>{let h=d.target.options;return Array.prototype.map.call(h,p=>({displayValue:p.textContent,exportValue:p.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",d=>{let h={value(p){s?.();let g=p.detail.value,_=new Set(Array.isArray(g)?g:[g]);for(let b of r.options)b.selected=_.has(b.value);e.setValue(t,{value:a(!0)}),l=a(!1)},multipleSelection(p){r.multiple=!0},remove(p){let g=r.options,_=p.detail.remove;g[_].selected=!1,r.remove(_),g.length>0&&Array.prototype.findIndex.call(g,C=>C.selected)===-1&&(g[0].selected=!0),e.setValue(t,{value:a(!0),items:c(p)}),l=a(!1)},clear(p){for(;r.length!==0;)r.remove(0);e.setValue(t,{value:null,items:[]}),l=a(!1)},insert(p){let{index:g,displayValue:_,exportValue:b}=p.detail.insert,C=r.children[g],y=document.createElement("option");y.textContent=_,y.value=b,C?C.before(y):r.append(y),e.setValue(t,{value:a(!0),items:c(p)}),l=a(!1)},items(p){let{items:g}=p.detail;for(;r.length!==0;)r.remove(0);for(let _ of g){let{displayValue:b,exportValue:C}=_,y=document.createElement("option");y.textContent=b,y.value=C,r.append(y)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:a(!0),items:c(p)}),l=a(!1)},indices(p){let g=new Set(p.detail.indices);for(let _ of p.target.options)_.selected=g.has(_.index);e.setValue(t,{value:a(!0)}),l=a(!1)},editable(p){p.target.disabled=!p.detail.editable}};this._dispatchEventFromSandbox(h,d)}),r.addEventListener("input",d=>{let h=a(!0),p=a(!1);e.setValue(t,{value:h}),d.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:l,change:p,changeEx:h,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],d=>d.target.value)):r.addEventListener("input",function(d){e.setValue(t,{value:a(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}},Cx=class extends Yi{constructor(e){let{data:t,elements:n}=e;super(e,{isRenderable:Yi._hasPopupData(t)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");let e=this.popup=new lA({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(let n of this.elements)n.popup=e,n.container.ariaHasPopup="dialog",t.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(n=>`${kA}${n}`).join(",")),this.container}},lA=class{#e=this.#O.bind(this);#t=this.#P.bind(this);#n=this.#S.bind(this);#i=this.#y.bind(this);#o=null;#r=null;#a=null;#s=null;#u=null;#c=null;#h=null;#d=!1;#f=null;#l=null;#g=null;#m=null;#p=null;#x=null;#_=!1;constructor({container:e,color:t,elements:n,titleObj:r,modificationDate:o,contentsObj:s,richText:a,parent:l,rect:c,parentRect:d,open:h}){this.#r=e,this.#p=r,this.#a=s,this.#m=a,this.#c=l,this.#o=t,this.#g=c,this.#h=d,this.#u=n,this.#s=Ry.toDateObject(o),this.trigger=n.flatMap(p=>p.getElementsToTriggerPopup());for(let p of this.trigger)p.addEventListener("click",this.#i),p.addEventListener("mouseenter",this.#n),p.addEventListener("mouseleave",this.#t),p.classList.add("popupTriggerArea");for(let p of n)p.container?.addEventListener("keydown",this.#e);this.#r.hidden=!0,h&&this.#y()}render(){if(this.#f)return;let e=this.#f=document.createElement("div");if(e.className="popup",this.#o){let o=e.style.outlineColor=Mt.makeHexColor(...this.#o);e.style.backgroundColor=`color-mix(in srgb, ${o} 30%, white)`}let t=document.createElement("span");t.className="header";let n=document.createElement("h1");if(t.append(n),{dir:n.dir,str:n.textContent}=this.#p,e.append(t),this.#s){let o=document.createElement("span");o.classList.add("popupDate"),o.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),o.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#s.valueOf()})),t.append(o)}let r=this.#v;if(r)e2.render({xfaHtml:r,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{let o=this._formatContents(this.#a);e.append(o)}this.#r.append(e)}get#v(){let e=this.#m,t=this.#a;return e?.str&&(!t?.str||t.str===e.str)&&this.#m.html||null}get#C(){return this.#v?.attributes?.style?.fontSize||0}get#w(){return this.#v?.attributes?.style?.color||null}#E(e){let t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},r={style:{color:this.#w,fontSize:this.#C?`calc(${this.#C}px * var(--total-scale-factor))`:""}};for(let o of e.split(`
`))t.push({name:"span",value:o,attributes:r});return n}_formatContents({str:e,dir:t}){let n=document.createElement("p");n.classList.add("popupContent"),n.dir=t;let r=e.split(/(?:\r\n?|\n)/);for(let o=0,s=r.length;o<s;++o){let a=r[o];n.append(document.createTextNode(a)),o<s-1&&n.append(document.createElement("br"))}return n}#O(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&this.#d)&&this.#y()}updateEdited({rect:e,popupContent:t}){this.#x||={contentsObj:this.#a,richText:this.#m},e&&(this.#l=null),t&&(this.#m=this.#E(t),this.#a=null),this.#f?.remove(),this.#f=null}resetEdited(){this.#x&&({contentsObj:this.#a,richText:this.#m}=this.#x,this.#x=null,this.#f?.remove(),this.#f=null,this.#l=null)}#k(){if(this.#l!==null)return;let{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:r,pageY:o}}}=this.#c,s=!!this.#h,a=s?this.#h:this.#g;for(let _ of this.#u)if(!a||Mt.intersect(_.data.rect,a)!==null){a=_.data.rect,s=!0;break}let l=Mt.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]),d=s?a[2]-a[0]+5:0,h=l[0]+d,p=l[1];this.#l=[100*(h-r)/t,100*(p-o)/n];let{style:g}=this.#r;g.left=`${this.#l[0]}%`,g.top=`${this.#l[1]}%`}#y(){this.#d=!this.#d,this.#d?(this.#S(),this.#r.addEventListener("click",this.#i),this.#r.addEventListener("keydown",this.#e)):(this.#P(),this.#r.removeEventListener("click",this.#i),this.#r.removeEventListener("keydown",this.#e))}#S(){this.#f||this.render(),this.isVisible?this.#d&&this.#r.classList.add("focused"):(this.#k(),this.#r.hidden=!1,this.#r.style.zIndex=parseInt(this.#r.style.zIndex)+1e3)}#P(){this.#r.classList.remove("focused"),!(this.#d||!this.isVisible)&&(this.#r.hidden=!0,this.#r.style.zIndex=parseInt(this.#r.style.zIndex)-1e3)}forceHide(){this.#_=this.isVisible,this.#_&&(this.#r.hidden=!0)}maybeShow(){this.#_&&(this.#f||this.#S(),this.#_=!1,this.#r.hidden=!1)}get isVisible(){return this.#r.hidden===!1}},r2=class extends Yi{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Ut.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){let e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(let t of this.textContent){let n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}},cA=class extends Yi{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");let{data:e,width:t,height:n}=this,r=this.svgFactory.create(t,n,!0),o=this.#e=this.svgFactory.createElement("svg:line");return o.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),o.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),o.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),o.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),o.setAttribute("stroke-width",e.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}},dA=class extends Yi{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");let{data:e,width:t,height:n}=this,r=this.svgFactory.create(t,n,!0),o=e.borderStyle.width,s=this.#e=this.svgFactory.createElement("svg:rect");return s.setAttribute("x",o/2),s.setAttribute("y",o/2),s.setAttribute("width",t-o),s.setAttribute("height",n-o),s.setAttribute("stroke-width",o||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),r.append(s),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}},uA=class extends Yi{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");let{data:e,width:t,height:n}=this,r=this.svgFactory.create(t,n,!0),o=e.borderStyle.width,s=this.#e=this.svgFactory.createElement("svg:ellipse");return s.setAttribute("cx",t/2),s.setAttribute("cy",n/2),s.setAttribute("rx",t/2-o/2),s.setAttribute("ry",n/2-o/2),s.setAttribute("stroke-width",o||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),r.append(s),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}},o2=class extends Yi{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);let{data:{rect:e,vertices:t,borderStyle:n,popupRef:r},width:o,height:s}=this;if(!t)return this.container;let a=this.svgFactory.create(o,s,!0),l=[];for(let d=0,h=t.length;d<h;d+=2){let p=t[d]-e[0],g=e[3]-t[d+1];l.push(`${p},${g}`)}l=l.join(" ");let c=this.#e=this.svgFactory.createElement(this.svgElementName);return c.setAttribute("points",l),c.setAttribute("stroke-width",n.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),a.append(c),this.container.append(a),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}},hA=class extends o2{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}},fA=class extends Yi{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}},yx=class extends Yi{#e=null;#t=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Ut.HIGHLIGHT:Ut.INK}#n(e,t){switch(e){case 90:return{transform:`rotate(90) translate(${-t[0]},${t[1]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};case 180:return{transform:`rotate(180) translate(${-t[2]},${t[1]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]};case 270:return{transform:`rotate(270) translate(${-t[2]},${t[3]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};default:return{transform:`translate(${-t[0]},${t[3]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]}}}render(){this.container.classList.add(this.containerClassName);let{data:{rect:e,rotation:t,inkLists:n,borderStyle:r,popupRef:o}}=this,{transform:s,width:a,height:l}=this.#n(t,e),c=this.svgFactory.create(a,l,!0),d=this.#e=this.svgFactory.createElement("svg:g");c.append(d),d.setAttribute("stroke-width",r.width||1),d.setAttribute("stroke-linecap","round"),d.setAttribute("stroke-linejoin","round"),d.setAttribute("stroke-miterlimit",10),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),d.setAttribute("transform",s);for(let h=0,p=n.length;h<p;h++){let g=this.svgFactory.createElement(this.svgElementName);this.#t.push(g),g.setAttribute("points",n[h].join(",")),d.append(g)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(c),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);let{thickness:t,points:n,rect:r}=e,o=this.#e;if(t>=0&&o.setAttribute("stroke-width",t||1),n)for(let s=0,a=this.#t.length;s<a;s++)this.#t[s].setAttribute("points",n[s].join(","));if(r){let{transform:s,width:a,height:l}=this.#n(this.data.rotation,r);o.parentElement.setAttribute("viewBox",`0 0 ${a} ${l}`),o.setAttribute("transform",s)}}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}},s2=class extends Yi{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Ut.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}},gA=class extends Yi{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}},pA=class extends Yi{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}},mA=class extends Yi{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}},a2=class extends Yi{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Ut.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}},xA=class extends Yi{#e=null;constructor(e){super(e,{isRenderable:!0});let{file:t}=this.data;this.filename=t.filename,this.content=t.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",Ie({source:this},t))}render(){this.container.classList.add("fileAttachmentAnnotation");let{container:e,data:t}=this,n;t.hasAppearance||t.fillAlpha===0?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(t.name)?"paperclip":"pushpin"}.svg`,t.fillAlpha&&t.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(t.fillAlpha*100)}%);`)),n.addEventListener("dblclick",this.#t.bind(this)),this.#e=n;let{isMac:r}=vr.platform;return e.addEventListener("keydown",o=>{o.key==="Enter"&&(r?o.metaKey:o.ctrlKey)&&this.#t()}),!t.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),e.append(n),e}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}},_A=class i{#e=null;#t=null;#n=new Map;#i=null;constructor({div:e,accessibilityManager:t,annotationCanvasMap:n,annotationEditorUIManager:r,page:o,viewport:s,structTreeLayer:a}){this.div=e,this.#e=t,this.#t=n,this.#i=a||null,this.page=o,this.viewport=s,this.zIndex=0,this._annotationEditorUIManager=r}hasEditableAnnotations(){return this.#n.size>0}#o(e,t){return Ge(this,null,function*(){let n=e.firstChild||e,r=n.id=`${kA}${t}`,o=yield this.#i?.getAriaAttributes(r);if(o)for(let[s,a]of o)n.setAttribute(s,a);this.div.append(e),this.#e?.moveElementInDOM(this.div,e,n,!1)})}render(e){return Ge(this,null,function*(){let{annotations:t}=e,n=this.div;P0(n,this.viewport);let r=new Map,o={data:null,layer:n,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new ag,annotationStorage:e.annotationStorage||new mx,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(let s of t){if(s.noHTML)continue;let a=s.annotationType===or.POPUP;if(a){let d=r.get(s.id);if(!d)continue;o.elements=d}else if(s.rect[2]===s.rect[0]||s.rect[3]===s.rect[1])continue;o.data=s;let l=t2.create(o);if(!l.isRenderable)continue;if(!a&&s.popupRef){let d=r.get(s.popupRef);d?d.push(l):r.set(s.popupRef,[l])}let c=l.render();s.hidden&&(c.style.visibility="hidden"),yield this.#o(c,s.id),l._isEditable&&(this.#n.set(l.data.id,l),this._annotationEditorUIManager?.renderAnnotationElement(l))}this.#r()})}addLinkAnnotations(e,t){return Ge(this,null,function*(){let n={data:null,layer:this.div,linkService:t,svgFactory:new ag,parent:this};for(let r of e){r.borderStyle||=i._defaultBorderStyle,n.data=r;let o=t2.create(n);if(!o.isRenderable)continue;let s=o.render();yield this.#o(s,r.id)}})}update({viewport:e}){let t=this.div;this.viewport=e,P0(t,{rotation:e.rotation}),this.#r(),t.hidden=!1}#r(){if(!this.#t)return;let e=this.div;for(let[t,n]of this.#t){let r=e.querySelector(`[data-annotation-id="${t}"]`);if(!r)continue;n.className="annotationContent";let{firstChild:o}=r;o?o.nodeName==="CANVAS"?o.replaceWith(n):o.classList.contains("annotationContent")?o.after(n):o.before(n):r.append(n);let s=this.#n.get(t);s&&(s._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(t,r.id,n),s._hasNoCanvas=!1):s.canvas=n)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(e){return this.#n.get(e)}static get _defaultBorderStyle(){return gn(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:ng.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}},Dy=/\r\n?|\n/g,vA=class i extends ci{#e;#t="";#n=`${this.id}-editor`;#i=null;#o;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){let e=i.prototype,t=o=>o.isEmpty(),n=px.TRANSLATE_SMALL,r=px.TRANSLATE_BIG;return gn(this,"_keyboardManager",new O0([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-n,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[n,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-n],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,n],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:t}]]))}static _type="freetext";static _editorType=Ut.FREETEXT;constructor(e){super(ot(Ie({},e),{name:"freeTextEditor"})),this.#e=e.color||i._defaultColor||ci._defaultLineColor,this.#o=e.fontSize||i._defaultFontSize}static initialize(e,t){ci.initialize(e,t);let n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case mn.FREETEXT_SIZE:i._defaultFontSize=t;break;case mn.FREETEXT_COLOR:i._defaultColor=t;break}}updateParams(e,t){switch(e){case mn.FREETEXT_SIZE:this.#r(t);break;case mn.FREETEXT_COLOR:this.#a(t);break}}static get defaultPropertiesToUpdate(){return[[mn.FREETEXT_SIZE,i._defaultFontSize],[mn.FREETEXT_COLOR,i._defaultColor||ci._defaultLineColor]]}get propertiesToUpdate(){return[[mn.FREETEXT_SIZE,this.#o],[mn.FREETEXT_COLOR,this.#e]]}#r(e){let t=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-this.#o)*this.parentScale),this.#o=r,this.#u()},n=this.#o;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:mn.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#a(e){let t=r=>{this.#e=this.editorDiv.style.color=r},n=this.#e;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:mn.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){let e=this.parentScale;return[-i._internalPadding*e,-(i._internalPadding+this.#o)*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#i=new AbortController;let e=this._uiManager.combinedSignal(this.#i);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#n),this._isDraggable=!0,this.#i?.abort(),this.#i=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#s(){let e=[];this.editorDiv.normalize();let t=null;for(let n of this.editorDiv.childNodes)t?.nodeType===Node.TEXT_NODE&&n.nodeName==="BR"||(e.push(i.#c(n)),t=n);return e.join(`
`)}#u(){let[e,t]=this.parentDimensions,n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{let{currentLayer:r,div:o}=this,s=o.style.display,a=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",r.div.append(this.div),n=o.getBoundingClientRect(),o.remove(),o.style.display=s,o.classList.toggle("hidden",a)}this.rotation%180===this.parentRotation%180?(this.width=n.width/e,this.height=n.height/t):(this.width=n.height/e,this.height=n.width/t),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();let e=this.#t,t=this.#t=this.#s().trimEnd();if(e===t)return;let n=r=>{if(this.#t=r,!r){this.remove();return}this.#h(),this._uiManager.rebuild(this),this.#u()};this.addCommands({cmd:()=>{n(t)},undo:()=>{n(e)},mustExec:!1}),this.#u()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){i._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,t;(this._isCopy||this.annotationElementId)&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#n),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;let{style:n}=this.editorDiv;if(n.fontSize=`calc(${this.#o}px * var(--total-scale-factor))`,n.color=this.#e,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){let[r,o]=this.parentDimensions;if(this.annotationElementId){let{position:s}=this._initialData,[a,l]=this.getInitialTranslation();[a,l]=this.pageTranslationToScreen(a,l);let[c,d]=this.pageDimensions,[h,p]=this.pageTranslation,g,_;switch(this.rotation){case 0:g=e+(s[0]-h)/c,_=t+this.height-(s[1]-p)/d;break;case 90:g=e+(s[0]-h)/c,_=t-(s[1]-p)/d,[a,l]=[l,-a];break;case 180:g=e-this.width+(s[0]-h)/c,_=t-(s[1]-p)/d,[a,l]=[-a,-l];break;case 270:g=e+(s[0]-h-this.height*d)/c,_=t+(s[1]-p-this.width*c)/d,[a,l]=[-l,a];break}this.setAt(g*r,_*o,a,l)}else this._moveAfterPaste(e,t);this.#h(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(Dy,"")}editorDivPaste(e){let t=e.clipboardData||window.clipboardData,{types:n}=t;if(n.length===1&&n[0]==="text/plain")return;e.preventDefault();let r=i.#f(t.getData("text")||"").replaceAll(Dy,`
`);if(!r)return;let o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();let s=o.getRangeAt(0);if(!r.includes(`
`)){s.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),o.collapseToStart();return}let{startContainer:a,startOffset:l}=s,c=[],d=[];if(a.nodeType===Node.TEXT_NODE){let g=a.parentElement;if(d.push(a.nodeValue.slice(l).replaceAll(Dy,"")),g!==this.editorDiv){let _=c;for(let b of this.editorDiv.childNodes){if(b===g){_=d;continue}_.push(i.#c(b))}}c.push(a.nodeValue.slice(0,l).replaceAll(Dy,""))}else if(a===this.editorDiv){let g=c,_=0;for(let b of this.editorDiv.childNodes)_++===l&&(g=d),g.push(i.#c(b))}this.#t=`${c.join(`
`)}${r}${d.join(`
`)}`,this.#h();let h=new Range,p=Math.sumPrecise(c.map(g=>g.length));for(let{firstChild:g}of this.editorDiv.childNodes)if(g.nodeType===Node.TEXT_NODE){let _=g.nodeValue.length;if(p<=_){h.setStart(g,p),h.setEnd(g,p);break}p-=_}o.removeAllRanges(),o.addRange(h)}#h(){if(this.editorDiv.replaceChildren(),!!this.#t)for(let e of this.#t.split(`
`)){let t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}#d(){return this.#t.replaceAll("\xA0"," ")}static#f(e){return e.replaceAll(" ","\xA0")}get contentDiv(){return this.editorDiv}static deserialize(e,t,n){return Ge(this,null,function*(){let r=null;if(e instanceof r2){let{data:{defaultAppearanceData:{fontSize:s,fontColor:a},rect:l,rotation:c,id:d,popupRef:h},textContent:p,textPosition:g,parent:{page:{pageNumber:_}}}=e;if(!p||p.length===0)return null;r=e={annotationType:Ut.FREETEXT,color:Array.from(a),fontSize:s,value:p.join(`
`),position:g,pageIndex:_-1,rect:l.slice(0),rotation:c,id:d,deleted:!1,popupRef:h}}let o=yield Wl(i,this,"deserialize").call(this,e,t,n);return o.#o=e.fontSize,o.#e=Mt.makeHexColor(...e.color),o.#t=i.#f(e.value),o.annotationElementId=e.id||null,o._initialData=r,o})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let t=i._internalPadding*this.parentScale,n=this.getRect(t,t),r=ci._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#e),o={annotationType:Ut.FREETEXT,color:r,fontSize:this.#o,value:this.#d(),pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(o.isCopy=!0,o):this.annotationElementId&&!this.#l(o)?null:(o.id=this.annotationElementId,o)}#l(e){let{value:t,fontSize:n,color:r,pageIndex:o}=this._initialData;return this._hasBeenMoved||e.value!==t||e.fontSize!==n||e.color.some((s,a)=>s!==r[a])||e.pageIndex!==o}renderAnnotationElement(e){let t=super.renderAnnotationElement(e);if(this.deleted)return t;let{style:n}=t;n.fontSize=`calc(${this.#o}px * var(--total-scale-factor))`,n.color=this.#e,t.replaceChildren();for(let o of this.#t.split(`
`)){let s=document.createElement("div");s.append(o?document.createTextNode(o):document.createElement("br")),t.append(s)}let r=i._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(r,r),popupContent:this.#t}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}},pt=(()=>{class i{static PRECISION=1e-4;toSVGPath(){Xn("Abstract method `toSVGPath` must be implemented.")}get box(){Xn("Abstract getter `box` must be implemented.")}serialize(t,n){Xn("Abstract method `serialize` must be implemented.")}static _rescale(t,n,r,o,s,a){a||=new Float32Array(t.length);for(let l=0,c=t.length;l<c;l+=2)a[l]=n+t[l]*o,a[l+1]=r+t[l+1]*s;return a}static _rescaleAndSwap(t,n,r,o,s,a){a||=new Float32Array(t.length);for(let l=0,c=t.length;l<c;l+=2)a[l]=n+t[l+1]*o,a[l+1]=r+t[l]*s;return a}static _translate(t,n,r,o){o||=new Float32Array(t.length);for(let s=0,a=t.length;s<a;s+=2)o[s]=n+t[s],o[s+1]=r+t[s+1];return o}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,n,r,o,s){switch(s){case 90:return[1-n/r,t/o];case 180:return[1-t/r,1-n/o];case 270:return[n/r,1-t/o];default:return[t/r,n/o]}}static _normalizePagePoint(t,n,r){switch(r){case 90:return[1-n,t];case 180:return[1-t,1-n];case 270:return[n,1-t];default:return[t,n]}}static createBezierPoints(t,n,r,o,s,a){return[(t+5*r)/6,(n+5*o)/6,(5*r+s)/6,(5*o+a)/6,(r+s)/2,(o+a)/2]}}return i})(),l2=class i{#e;#t=[];#n;#i;#o=[];#r=new Float32Array(18);#a;#s;#u;#c;#h;#d;#f=[];static#l=8;static#g=2;static#m=i.#l+i.#g;constructor({x:e,y:t},n,r,o,s,a=0){this.#e=n,this.#d=o*r,this.#i=s,this.#r.set([NaN,NaN,NaN,NaN,e,t],6),this.#n=a,this.#c=i.#l*r,this.#u=i.#m*r,this.#h=r,this.#f.push(e,t)}isEmpty(){return isNaN(this.#r[8])}#p(){let e=this.#r.subarray(4,6),t=this.#r.subarray(16,18),[n,r,o,s]=this.#e;return[(this.#a+(e[0]-t[0])/2-n)/o,(this.#s+(e[1]-t[1])/2-r)/s,(this.#a+(t[0]-e[0])/2-n)/o,(this.#s+(t[1]-e[1])/2-r)/s]}add({x:e,y:t}){this.#a=e,this.#s=t;let[n,r,o,s]=this.#e,[a,l,c,d]=this.#r.subarray(8,12),h=e-c,p=t-d,g=Math.hypot(h,p);if(g<this.#u)return!1;let _=g-this.#c,b=_/g,C=b*h,y=b*p,M=a,O=l;a=c,l=d,c+=C,d+=y,this.#f?.push(e,t);let A=-y/_,D=C/_,N=A*this.#d,B=D*this.#d;return this.#r.set(this.#r.subarray(2,8),0),this.#r.set([c+N,d+B],4),this.#r.set(this.#r.subarray(14,18),12),this.#r.set([c-N,d-B],16),isNaN(this.#r[6])?(this.#o.length===0&&(this.#r.set([a+N,l+B],2),this.#o.push(NaN,NaN,NaN,NaN,(a+N-n)/o,(l+B-r)/s),this.#r.set([a-N,l-B],14),this.#t.push(NaN,NaN,NaN,NaN,(a-N-n)/o,(l-B-r)/s)),this.#r.set([M,O,a,l,c,d],6),!this.isEmpty()):(this.#r.set([M,O,a,l,c,d],6),Math.abs(Math.atan2(O-l,M-a)-Math.atan2(y,C))<Math.PI/2?([a,l,c,d]=this.#r.subarray(2,6),this.#o.push(NaN,NaN,NaN,NaN,((a+c)/2-n)/o,((l+d)/2-r)/s),[a,l,M,O]=this.#r.subarray(14,18),this.#t.push(NaN,NaN,NaN,NaN,((M+a)/2-n)/o,((O+l)/2-r)/s),!0):([M,O,a,l,c,d]=this.#r.subarray(0,6),this.#o.push(((M+5*a)/6-n)/o,((O+5*l)/6-r)/s,((5*a+c)/6-n)/o,((5*l+d)/6-r)/s,((a+c)/2-n)/o,((l+d)/2-r)/s),[c,d,a,l,M,O]=this.#r.subarray(12,18),this.#t.push(((M+5*a)/6-n)/o,((O+5*l)/6-r)/s,((5*a+c)/6-n)/o,((5*l+d)/6-r)/s,((a+c)/2-n)/o,((l+d)/2-r)/s),!0))}toSVGPath(){if(this.isEmpty())return"";let e=this.#o,t=this.#t;if(isNaN(this.#r[6])&&!this.isEmpty())return this.#x();let n=[];n.push(`M${e[4]} ${e[5]}`);for(let r=6;r<e.length;r+=6)isNaN(e[r])?n.push(`L${e[r+4]} ${e[r+5]}`):n.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);this.#v(n);for(let r=t.length-6;r>=6;r-=6)isNaN(t[r])?n.push(`L${t[r+4]} ${t[r+5]}`):n.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);return this.#_(n),n.join(" ")}#x(){let[e,t,n,r]=this.#e,[o,s,a,l]=this.#p();return`M${(this.#r[2]-e)/n} ${(this.#r[3]-t)/r} L${(this.#r[4]-e)/n} ${(this.#r[5]-t)/r} L${o} ${s} L${a} ${l} L${(this.#r[16]-e)/n} ${(this.#r[17]-t)/r} L${(this.#r[14]-e)/n} ${(this.#r[15]-t)/r} Z`}#_(e){let t=this.#t;e.push(`L${t[4]} ${t[5]} Z`)}#v(e){let[t,n,r,o]=this.#e,s=this.#r.subarray(4,6),a=this.#r.subarray(16,18),[l,c,d,h]=this.#p();e.push(`L${(s[0]-t)/r} ${(s[1]-n)/o} L${l} ${c} L${d} ${h} L${(a[0]-t)/r} ${(a[1]-n)/o}`)}newFreeDrawOutline(e,t,n,r,o,s){return new c2(e,t,n,r,o,s)}getOutlines(){let e=this.#o,t=this.#t,n=this.#r,[r,o,s,a]=this.#e,l=new Float32Array((this.#f?.length??0)+2);for(let h=0,p=l.length-2;h<p;h+=2)l[h]=(this.#f[h]-r)/s,l[h+1]=(this.#f[h+1]-o)/a;if(l[l.length-2]=(this.#a-r)/s,l[l.length-1]=(this.#s-o)/a,isNaN(n[6])&&!this.isEmpty())return this.#C(l);let c=new Float32Array(this.#o.length+24+this.#t.length),d=e.length;for(let h=0;h<d;h+=2){if(isNaN(e[h])){c[h]=c[h+1]=NaN;continue}c[h]=e[h],c[h+1]=e[h+1]}d=this.#E(c,d);for(let h=t.length-6;h>=6;h-=6)for(let p=0;p<6;p+=2){if(isNaN(t[h+p])){c[d]=c[d+1]=NaN,d+=2;continue}c[d]=t[h+p],c[d+1]=t[h+p+1],d+=2}return this.#w(c,d),this.newFreeDrawOutline(c,l,this.#e,this.#h,this.#n,this.#i)}#C(e){let t=this.#r,[n,r,o,s]=this.#e,[a,l,c,d]=this.#p(),h=new Float32Array(36);return h.set([NaN,NaN,NaN,NaN,(t[2]-n)/o,(t[3]-r)/s,NaN,NaN,NaN,NaN,(t[4]-n)/o,(t[5]-r)/s,NaN,NaN,NaN,NaN,a,l,NaN,NaN,NaN,NaN,c,d,NaN,NaN,NaN,NaN,(t[16]-n)/o,(t[17]-r)/s,NaN,NaN,NaN,NaN,(t[14]-n)/o,(t[15]-r)/s],0),this.newFreeDrawOutline(h,e,this.#e,this.#h,this.#n,this.#i)}#w(e,t){let n=this.#t;return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+=6}#E(e,t){let n=this.#r.subarray(4,6),r=this.#r.subarray(16,18),[o,s,a,l]=this.#e,[c,d,h,p]=this.#p();return e.set([NaN,NaN,NaN,NaN,(n[0]-o)/a,(n[1]-s)/l,NaN,NaN,NaN,NaN,c,d,NaN,NaN,NaN,NaN,h,p,NaN,NaN,NaN,NaN,(r[0]-o)/a,(r[1]-s)/l],t),t+=24}},c2=class extends pt{#e;#t=new Float32Array(4);#n;#i;#o;#r;#a;constructor(e,t,n,r,o,s){super(),this.#a=e,this.#o=t,this.#e=n,this.#r=r,this.#n=o,this.#i=s,this.lastPoint=[NaN,NaN],this.#s(s);let[a,l,c,d]=this.#t;for(let h=0,p=e.length;h<p;h+=2)e[h]=(e[h]-a)/c,e[h+1]=(e[h+1]-l)/d;for(let h=0,p=t.length;h<p;h+=2)t[h]=(t[h]-a)/c,t[h+1]=(t[h+1]-l)/d}toSVGPath(){let e=[`M${this.#a[4]} ${this.#a[5]}`];for(let t=6,n=this.#a.length;t<n;t+=6){if(isNaN(this.#a[t])){e.push(`L${this.#a[t+4]} ${this.#a[t+5]}`);continue}e.push(`C${this.#a[t]} ${this.#a[t+1]} ${this.#a[t+2]} ${this.#a[t+3]} ${this.#a[t+4]} ${this.#a[t+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,t,n,r],o){let s=n-e,a=r-t,l,c;switch(o){case 0:l=pt._rescale(this.#a,e,r,s,-a),c=pt._rescale(this.#o,e,r,s,-a);break;case 90:l=pt._rescaleAndSwap(this.#a,e,t,s,a),c=pt._rescaleAndSwap(this.#o,e,t,s,a);break;case 180:l=pt._rescale(this.#a,n,t,-s,a),c=pt._rescale(this.#o,n,t,-s,a);break;case 270:l=pt._rescaleAndSwap(this.#a,n,r,-s,-a),c=pt._rescaleAndSwap(this.#o,n,r,-s,-a);break}return{outline:Array.from(l),points:[Array.from(c)]}}#s(e){let t=this.#a,n=t[4],r=t[5],o=[n,r,n,r],s=n,a=r,l=e?Math.max:Math.min;for(let d=6,h=t.length;d<h;d+=6){let p=t[d+4],g=t[d+5];if(isNaN(t[d]))Mt.pointBoundingBox(p,g,o),a<g?(s=p,a=g):a===g&&(s=l(s,p));else{let _=[1/0,1/0,-1/0,-1/0];Mt.bezierBoundingBox(n,r,...t.slice(d,d+6),_),Mt.rectBoundingBox(..._,o),a<_[3]?(s=_[2],a=_[3]):a===_[3]&&(s=l(s,_[2]))}n=p,r=g}let c=this.#t;c[0]=o[0]-this.#n,c[1]=o[1]-this.#n,c[2]=o[2]-o[0]+2*this.#n,c[3]=o[3]-o[1]+2*this.#n,this.lastPoint=[s,a]}get box(){return this.#t}newOutliner(e,t,n,r,o,s=0){return new l2(e,t,n,r,o,s)}getNewOutline(e,t){let[n,r,o,s]=this.#t,[a,l,c,d]=this.#e,h=o*c,p=s*d,g=n*c+a,_=r*d+l,b=this.newOutliner({x:this.#o[0]*h+g,y:this.#o[1]*p+_},this.#e,this.#r,e,this.#i,t??this.#n);for(let C=2;C<this.#o.length;C+=2)b.add({x:this.#o[C]*h+g,y:this.#o[C+1]*p+_});return b.getOutlines()}},wx=class{#e;#t;#n=[];#i=[];constructor(e,t=0,n=0,r=!0){let o=[1/0,1/0,-1/0,-1/0],a=10**-4;for(let{x:_,y:b,width:C,height:y}of e){let M=Math.floor((_-t)/a)*a,O=Math.ceil((_+C+t)/a)*a,A=Math.floor((b-t)/a)*a,D=Math.ceil((b+y+t)/a)*a,N=[M,A,D,!0],B=[O,A,D,!1];this.#n.push(N,B),Mt.rectBoundingBox(M,A,O,D,o)}let l=o[2]-o[0]+2*n,c=o[3]-o[1]+2*n,d=o[0]-n,h=o[1]-n,p=this.#n.at(r?-1:-2),g=[p[0],p[2]];for(let _ of this.#n){let[b,C,y]=_;_[0]=(b-d)/l,_[1]=(C-h)/c,_[2]=(y-h)/c}this.#e=new Float32Array([d,h,l,c]),this.#t=g}getOutlines(){this.#n.sort((t,n)=>t[0]-n[0]||t[1]-n[1]||t[2]-n[2]);let e=[];for(let t of this.#n)t[3]?(e.push(...this.#u(t)),this.#a(t)):(this.#s(t),e.push(...this.#u(t)));return this.#o(e)}#o(e){let t=[],n=new Set;for(let s of e){let[a,l,c]=s;t.push([a,l,s],[a,c,s])}t.sort((s,a)=>s[1]-a[1]||s[0]-a[0]);for(let s=0,a=t.length;s<a;s+=2){let l=t[s][2],c=t[s+1][2];l.push(c),c.push(l),n.add(l),n.add(c)}let r=[],o;for(;n.size>0;){let s=n.values().next().value,[a,l,c,d,h]=s;n.delete(s);let p=a,g=l;for(o=[a,c],r.push(o);;){let _;if(n.has(d))_=d;else if(n.has(h))_=h;else break;n.delete(_),[a,l,c,d,h]=_,p!==a&&(o.push(p,g,a,g===l?l:c),p=a),g=g===l?c:l}o.push(p,g)}return new bA(r,this.#e,this.#t)}#r(e){let t=this.#i,n=0,r=t.length-1;for(;n<=r;){let o=n+r>>1,s=t[o][0];if(s===e)return o;s<e?n=o+1:r=o-1}return r+1}#a([,e,t]){let n=this.#r(e);this.#i.splice(n,0,[e,t])}#s([,e,t]){let n=this.#r(e);for(let r=n;r<this.#i.length;r++){let[o,s]=this.#i[r];if(o!==e)break;if(o===e&&s===t){this.#i.splice(r,1);return}}for(let r=n-1;r>=0;r--){let[o,s]=this.#i[r];if(o!==e)break;if(o===e&&s===t){this.#i.splice(r,1);return}}}#u(e){let[t,n,r]=e,o=[[t,n,r]],s=this.#r(r);for(let a=0;a<s;a++){let[l,c]=this.#i[a];for(let d=0,h=o.length;d<h;d++){let[,p,g]=o[d];if(!(c<=p||g<=l)){if(p>=l){if(g>c)o[d][1]=c;else{if(h===1)return[];o.splice(d,1),d--,h--}continue}o[d][2]=l,g>c&&o.push([t,c,g])}}}return o}},bA=class extends pt{#e;#t;constructor(e,t,n){super(),this.#t=e,this.#e=t,this.lastPoint=n}toSVGPath(){let e=[];for(let t of this.#t){let[n,r]=t;e.push(`M${n} ${r}`);for(let o=2;o<t.length;o+=2){let s=t[o],a=t[o+1];s===n?(e.push(`V${a}`),r=a):a===r&&(e.push(`H${s}`),n=s)}e.push("Z")}return e.join(" ")}serialize([e,t,n,r],o){let s=[],a=n-e,l=r-t;for(let c of this.#t){let d=new Array(c.length);for(let h=0;h<c.length;h+=2)d[h]=e+c[h]*a,d[h+1]=r-c[h+1]*l;s.push(d)}return s}get box(){return this.#e}get classNamesForOutlining(){return["highlightOutline"]}},Mx=class extends l2{newFreeDrawOutline(e,t,n,r,o,s){return new CA(e,t,n,r,o,s)}},CA=class extends c2{newOutliner(e,t,n,r,o,s=0){return new Mx(e,t,n,r,o,s)}},d2=class i{#e=null;#t=null;#n;#i=null;#o=!1;#r=!1;#a=null;#s;#u=null;#c=null;#h;static#d=null;static get _keyboardManager(){return gn(this,"_keyboardManager",new O0([[["Escape","mac+Escape"],i.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],i.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],i.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],i.prototype._moveToPrevious],[["Home","mac+Home"],i.prototype._moveToBeginning],[["End","mac+End"],i.prototype._moveToEnd]]))}constructor({editor:e=null,uiManager:t=null}){e?(this.#r=!1,this.#h=mn.HIGHLIGHT_COLOR,this.#a=e):(this.#r=!0,this.#h=mn.HIGHLIGHT_DEFAULT_COLOR),this.#c=e?._uiManager||t,this.#s=this.#c._eventBus,this.#n=e?.color||this.#c?.highlightColors.values().next().value||"#FFFF98",i.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){let e=this.#e=document.createElement("button");e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);let t=this.#c._signal;e.addEventListener("click",this.#m.bind(this),{signal:t}),e.addEventListener("keydown",this.#g.bind(this),{signal:t});let n=this.#t=document.createElement("span");return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=this.#n,e.append(n),e}renderMainDropdown(){let e=this.#i=this.#f();return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}#f(){let e=document.createElement("div"),t=this.#c._signal;e.addEventListener("contextmenu",Ia,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(let[n,r]of this.#c.highlightColors){let o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",r),o.title=n,o.setAttribute("data-l10n-id",i.#d[n]);let s=document.createElement("span");o.append(s),s.className="swatch",s.style.backgroundColor=r,o.setAttribute("aria-selected",r===this.#n),o.addEventListener("click",this.#l.bind(this,r),{signal:t}),e.append(o)}return e.addEventListener("keydown",this.#g.bind(this),{signal:t}),e}#l(e,t){t.stopPropagation(),this.#s.dispatch("switchannotationeditorparams",{source:this,type:this.#h,value:e})}_colorSelectFromKeyboard(e){if(e.target===this.#e){this.#m(e);return}let t=e.target.getAttribute("data-color");t&&this.#l(t,e)}_moveToNext(e){if(!this.#x){this.#m(e);return}if(e.target===this.#e){this.#i.firstChild?.focus();return}e.target.nextSibling?.focus()}_moveToPrevious(e){if(e.target===this.#i?.firstChild||e.target===this.#e){this.#x&&this._hideDropdownFromKeyboard();return}this.#x||this.#m(e),e.target.previousSibling?.focus()}_moveToBeginning(e){if(!this.#x){this.#m(e);return}this.#i.firstChild?.focus()}_moveToEnd(e){if(!this.#x){this.#m(e);return}this.#i.lastChild?.focus()}#g(e){i._keyboardManager.exec(this,e)}#m(e){if(this.#x){this.hideDropdown();return}if(this.#o=e.detail===0,this.#u||(this.#u=new AbortController,window.addEventListener("pointerdown",this.#p.bind(this),{signal:this.#c.combinedSignal(this.#u)})),this.#i){this.#i.classList.remove("hidden");return}let t=this.#i=this.#f();this.#e.append(t)}#p(e){this.#i?.contains(e.target)||this.hideDropdown()}hideDropdown(){this.#i?.classList.add("hidden"),this.#u?.abort(),this.#u=null}get#x(){return this.#i&&!this.#i.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#r){if(!this.#x){this.#a?.unselect();return}this.hideDropdown(),this.#e.focus({preventScroll:!0,focusVisible:this.#o})}}updateColor(e){if(this.#t&&(this.#t.style.backgroundColor=e),!this.#i)return;let t=this.#c.highlightColors.values();for(let n of this.#i.children)n.setAttribute("aria-selected",t.next().value===e)}destroy(){this.#e?.remove(),this.#e=null,this.#t=null,this.#i?.remove(),this.#i=null}},u2=class i extends ci{#e=null;#t=0;#n;#i=null;#o=null;#r=null;#a=null;#s=0;#u=null;#c=null;#h=null;#d=!1;#f=null;#l;#g=null;#m="";#p;#x="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=Ut.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){let e=i.prototype;return gn(this,"_keyboardManager",new O0([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super(ot(Ie({},e),{name:"highlightEditor"})),this.color=e.color||i._defaultColor,this.#p=e.thickness||i._defaultThickness,this.#l=e.opacity||i._defaultOpacity,this.#n=e.boxes||null,this.#x=e.methodOfCreation||"",this.#m=e.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(this.#d=!0,this.#v(e),this.#k()):this.#n&&(this.#e=e.anchorNode,this.#t=e.anchorOffset,this.#a=e.focusNode,this.#s=e.focusOffset,this.#_(),this.#k(),this.rotate(this.rotation))}get telemetryInitialData(){return{action:"added",type:this.#d?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:this.#p,methodOfCreation:this.#x}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}#_(){let e=new wx(this.#n,.001);this.#c=e.getOutlines(),[this.x,this.y,this.width,this.height]=this.#c.box;let t=new wx(this.#n,.0025,.001,this._uiManager.direction==="ltr");this.#r=t.getOutlines();let{lastPoint:n}=this.#r;this.#f=[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height]}#v({highlightOutlines:e,highlightId:t,clipPathId:n}){this.#c=e;let r=1.5;if(this.#r=e.getNewOutline(this.#p/2+r,.0025),t>=0)this.#h=t,this.#i=n,this.parent.drawLayer.finalizeDraw(t,{bbox:e.box,path:{d:e.toSVGPath()}}),this.#g=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#r.box,path:{d:this.#r.toSVGPath()}},!0);else if(this.parent){let d=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#h,{bbox:i.#y(this.#c.box,(d-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#g,{bbox:i.#y(this.#r.box,d),path:{d:this.#r.toSVGPath()}})}let[o,s,a,l]=e.box;switch(this.rotation){case 0:this.x=o,this.y=s,this.width=a,this.height=l;break;case 90:{let[d,h]=this.parentDimensions;this.x=s,this.y=1-o,this.width=a*h/d,this.height=l*d/h;break}case 180:this.x=1-o,this.y=1-s,this.width=a,this.height=l;break;case 270:{let[d,h]=this.parentDimensions;this.x=1-s,this.y=o,this.width=a*h/d,this.height=l*d/h;break}}let{lastPoint:c}=this.#r;this.#f=[(c[0]-o)/a,(c[1]-s)/l]}static initialize(e,t){ci.initialize(e,t),i._defaultColor||=t.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(e,t){switch(e){case mn.HIGHLIGHT_DEFAULT_COLOR:i._defaultColor=t;break;case mn.HIGHLIGHT_THICKNESS:i._defaultThickness=t;break}}translateInPage(e,t){}get toolbarPosition(){return this.#f}updateParams(e,t){switch(e){case mn.HIGHLIGHT_COLOR:this.#C(t);break;case mn.HIGHLIGHT_THICKNESS:this.#w(t);break}}static get defaultPropertiesToUpdate(){return[[mn.HIGHLIGHT_DEFAULT_COLOR,i._defaultColor],[mn.HIGHLIGHT_THICKNESS,i._defaultThickness]]}get propertiesToUpdate(){return[[mn.HIGHLIGHT_COLOR,this.color||i._defaultColor],[mn.HIGHLIGHT_THICKNESS,this.#p||i._defaultThickness],[mn.HIGHLIGHT_FREE,this.#d]]}#C(e){let t=(o,s)=>{this.color=o,this.#l=s,this.parent?.drawLayer.updateProperties(this.#h,{root:{fill:o,"fill-opacity":s}}),this.#o?.updateColor(o)},n=this.color,r=this.#l;this.addCommands({cmd:t.bind(this,e,i._defaultOpacity),undo:t.bind(this,n,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:mn.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)}#w(e){let t=this.#p,n=r=>{this.#p=r,this.#E(r)};this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:mn.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}addEditToolbar(){return Ge(this,null,function*(){let e=yield Wl(i.prototype,this,"addEditToolbar").call(this);return e?(this._uiManager.highlightColors&&(this.#o=new d2({editor:this}),e.addColorPicker(this.#o)),e):null})}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#D())}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,this.#D())}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){this.#O(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#k(),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?this.#O():e&&(this.#k(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),t&&this.select()}#E(e){if(!this.#d)return;this.#v({highlightOutlines:this.#c.getNewOutline(e/2)}),this.fixAndSetPosition();let[t,n]=this.parentDimensions;this.setDims(this.width*t,this.height*n)}#O(){this.#h===null||!this.parent||(this.parent.drawLayer.remove(this.#h),this.#h=null,this.parent.drawLayer.remove(this.#g),this.#g=null)}#k(e=this.parent){this.#h===null&&({id:this.#h,clipPathId:this.#i}=e.drawLayer.draw({bbox:this.#c.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.#l},rootClass:{highlight:!0,free:this.#d},path:{d:this.#c.toSVGPath()}},!1,!0),this.#g=e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#d},bbox:this.#r.box,path:{d:this.#r.toSVGPath()}},this.#d),this.#u&&(this.#u.style.clipPath=this.#i))}static#y([e,t,n,r],o){switch(o){case 90:return[1-t-r,e,r,n];case 180:return[1-e-n,1-t-r,n,r];case 270:return[t,1-e-n,r,n]}return[e,t,n,r]}rotate(e){let{drawLayer:t}=this.parent,n;this.#d?(e=(e-this.rotation+360)%360,n=i.#y(this.#c.box,e)):n=i.#y([this.x,this.y,this.width,this.height],e),t.updateProperties(this.#h,{bbox:n,root:{"data-main-rotation":e}}),t.updateProperties(this.#g,{bbox:i.#y(this.#r.box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;let e=super.render();this.#m&&(e.setAttribute("aria-label",this.#m),e.setAttribute("role","mark")),this.#d?e.classList.add("free"):this.div.addEventListener("keydown",this.#S.bind(this),{signal:this._uiManager._signal});let t=this.#u=document.createElement("div");e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=this.#i;let[n,r]=this.parentDimensions;return this.setDims(this.width*n,this.height*r),jR(this,this.#u,["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!1}})}#S(e){i._keyboardManager.exec(this,e)}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:this.#P(!0);break;case 1:case 3:this.#P(!1);break}}#P(e){if(!this.#e)return;let t=window.getSelection();e?t.setPosition(this.#e,this.#t):t.setPosition(this.#a,this.#s)}select(){super.select(),this.#g&&this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#g&&(this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{selected:!1}}),this.#d||this.#P(!1))}get _mustFixPosition(){return!this.#d}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(this.#h,{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(this.#g,{rootClass:{hidden:!e}}))}#D(){return this.#d?this.rotation:0}#F(){if(this.#d)return null;let[e,t]=this.pageDimensions,[n,r]=this.pageTranslation,o=this.#n,s=new Float32Array(o.length*8),a=0;for(let{x:l,y:c,width:d,height:h}of o){let p=l*e+n,g=(1-c)*t+r;s[a]=s[a+4]=p,s[a+1]=s[a+3]=g,s[a+2]=s[a+6]=p+d*e,s[a+5]=s[a+7]=g-h*t,a+=8}return s}#I(e){return this.#c.serialize(e,this.#D())}static startHighlighting(e,t,{target:n,x:r,y:o}){let{x:s,y:a,width:l,height:c}=n.getBoundingClientRect(),d=new AbortController,h=e.combinedSignal(d),p=g=>{d.abort(),this.#M(e,g)};window.addEventListener("blur",p,{signal:h}),window.addEventListener("pointerup",p,{signal:h}),window.addEventListener("pointerdown",sr,{capture:!0,passive:!1,signal:h}),window.addEventListener("contextmenu",Ia,{signal:h}),n.addEventListener("pointermove",this.#j.bind(this,e),{signal:h}),this._freeHighlight=new Mx({x:r,y:o},[s,a,l,c],e.scale,this._defaultThickness/2,t,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#j(e,t){this._freeHighlight.add(t)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#M(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static deserialize(e,t,n){return Ge(this,null,function*(){let r=null;if(e instanceof s2){let{data:{quadPoints:_,rect:b,rotation:C,id:y,color:M,opacity:O,popupRef:A},parent:{page:{pageNumber:D}}}=e;r=e={annotationType:Ut.HIGHLIGHT,color:Array.from(M),opacity:O,quadPoints:_,boxes:null,pageIndex:D-1,rect:b.slice(0),rotation:C,id:y,deleted:!1,popupRef:A}}else if(e instanceof yx){let{data:{inkLists:_,rect:b,rotation:C,id:y,color:M,borderStyle:{rawWidth:O},popupRef:A},parent:{page:{pageNumber:D}}}=e;r=e={annotationType:Ut.HIGHLIGHT,color:Array.from(M),thickness:O,inkLists:_,boxes:null,pageIndex:D-1,rect:b.slice(0),rotation:C,id:y,deleted:!1,popupRef:A}}let{color:o,quadPoints:s,inkLists:a,opacity:l}=e,c=yield Wl(i,this,"deserialize").call(this,e,t,n);c.color=Mt.makeHexColor(...o),c.#l=l||1,a&&(c.#p=e.thickness),c.annotationElementId=e.id||null,c._initialData=r;let[d,h]=c.pageDimensions,[p,g]=c.pageTranslation;if(s){let _=c.#n=[];for(let b=0;b<s.length;b+=8)_.push({x:(s[b]-p)/d,y:1-(s[b+1]-g)/h,width:(s[b+2]-s[b])/d,height:(s[b+1]-s[b+5])/h});c.#_(),c.#k(),c.rotate(c.rotation)}else if(a){c.#d=!0;let _=a[0],b={x:_[0]-p,y:h-(_[1]-g)},C=new Mx(b,[0,0,d,h],1,c.#p/2,!0,.001);for(let O=0,A=_.length;O<A;O+=2)b.x=_[O]-p,b.y=h-(_[O+1]-g),C.add(b);let{id:y,clipPathId:M}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:c.color,"fill-opacity":c._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:C.toSVGPath()}},!0,!0);c.#v({highlightOutlines:C.getOutlines(),highlightId:y,clipPathId:M}),c.#k(),c.rotate(c.parentRotation)}return c})}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();let t=this.getRect(0,0),n=ci._colorManager.convert(this.color),r={annotationType:Ut.HIGHLIGHT,color:n,opacity:this.#l,thickness:this.#p,quadPoints:this.#F(),outlines:this.#I(t),pageIndex:this.pageIndex,rect:t,rotation:this.#D(),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!this.#b(r)?null:(r.id=this.annotationElementId,r)}#b(e){let{color:t}=this._initialData;return e.color.some((n,r)=>n!==t[r])}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}},h2=class{#e=Object.create(null);updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(let[t,n]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,n)}updateSVGProperty(e,t){this.#e[e]=t}toSVGProperties(){let e=this.#e;return this.#e=Object.create(null),{root:e}}reset(){this.#e=Object.create(null)}updateAll(e=this){this.updateProperties(e)}clone(){Xn("Not implemented")}},qR=(()=>{class i extends ci{#e=null;#t;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#n=null;static#i=null;static#o=null;static#r=NaN;static#a=null;static#s=null;static#u=NaN;static _INNER_MARGIN=3;constructor(t){super(t),this.#t=t.mustBeCommitted||!1,this._addOutlines(t)}_addOutlines(t){t.drawOutlines&&(this.#c(t),this.#f())}#c({drawOutlines:t,drawId:n,drawingOptions:r}){this.#e=t,this._drawingOptions||=r,n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,t.defaultProperties)):this._drawId=this.#h(t,this.parent),this.#m(t.box)}#h(t,n){let{id:r}=n.drawLayer.draw(i._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return r}static _mergeSVGProperties(t,n){let r=new Set(Object.keys(t));for(let[o,s]of Object.entries(n))r.has(o)?Object.assign(t[o],s):t[o]=s;return t}static getDefaultDrawingOptions(t){Xn("Not implemented")}static get typesMap(){Xn("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,n){let r=this.typesMap.get(t);r&&this._defaultDrawingOptions.updateProperty(r,n),this._currentParent&&(i.#n.updateProperty(r,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,n){let r=this.constructor.typesMap.get(t);r&&this._updateProperty(t,r,n)}static get defaultPropertiesToUpdate(){let t=[],n=this._defaultDrawingOptions;for(let[r,o]of this.typesMap)t.push([r,n[o]]);return t}get propertiesToUpdate(){let t=[],{_drawingOptions:n}=this;for(let[r,o]of this.constructor.typesMap)t.push([r,n[o]]);return t}_updateProperty(t,n,r){let o=this._drawingOptions,s=o[n],a=l=>{o.updateProperty(n,l);let c=this.#e.updateProperty(n,l);c&&this.#m(c),this.parent?.drawLayer.updateProperties(this._drawId,o.toSVGProperties())};this.addCommands({cmd:a.bind(this,r),undo:a.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,i._mergeSVGProperties(this.#e.getPathResizingSVGProperties(this.#g()),{bbox:this.#p()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,i._mergeSVGProperties(this.#e.getPathResizedSVGProperties(this.#g()),{bbox:this.#p()}))}_onTranslating(t,n){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#p()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,i._mergeSVGProperties(this.#e.getPathTranslatedSVGProperties(this.#g(),this.parentDimensions),{bbox:this.#p()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#t&&(this.#t=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#d(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#m(this.#e.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let n=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#d()):t&&(this._uiManager.addShouldRescale(this),this.#f(t),n=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),n&&this.select()}#d(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#h(this.#e,t)}}#l([t,n,r,o]){let{parentDimensions:[s,a],rotation:l}=this;switch(l){case 90:return[n,1-t,r*(a/s),o*(s/a)];case 180:return[1-t,1-n,r,o];case 270:return[1-n,t,r*(a/s),o*(s/a)];default:return[t,n,r,o]}}#g(){let{x:t,y:n,width:r,height:o,parentDimensions:[s,a],rotation:l}=this;switch(l){case 90:return[1-n,t,r*(s/a),o*(a/s)];case 180:return[1-t,1-n,r,o];case 270:return[n,1-t,r*(s/a),o*(a/s)];default:return[t,n,r,o]}}#m(t){if([this.x,this.y,this.width,this.height]=this.#l(t),this.div){this.fixAndSetPosition();let[n,r]=this.parentDimensions;this.setDims(this.width*n,this.height*r)}this._onResized()}#p(){let{x:t,y:n,width:r,height:o,rotation:s,parentRotation:a,parentDimensions:[l,c]}=this;switch((s*4+a)/90){case 1:return[1-n-o,t,o,r];case 2:return[1-t-r,1-n-o,r,o];case 3:return[n,1-t-r,o,r];case 4:return[t,n-r*(l/c),o*(c/l),r*(l/c)];case 5:return[1-n,t,r*(l/c),o*(c/l)];case 6:return[1-t-o*(c/l),1-n,o*(c/l),r*(l/c)];case 7:return[n-r*(l/c),1-t-o*(c/l),r*(l/c),o*(c/l)];case 8:return[t-r,n-o,r,o];case 9:return[1-n,t-r,o,r];case 10:return[1-t,1-n,r,o];case 11:return[n-o,1-t,o,r];case 12:return[t-o*(c/l),n,o*(c/l),r*(l/c)];case 13:return[1-n-r*(l/c),t-o*(c/l),r*(l/c),o*(c/l)];case 14:return[1-t,1-n-r*(l/c),o*(c/l),r*(l/c)];case 15:return[n,1-t,r*(l/c),o*(c/l)];default:return[t,n,r,o]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,i._mergeSVGProperties({bbox:this.#p()},this.#e.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#m(this.#e.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,n;this._isCopy&&(t=this.x,n=this.y);let r=super.render();r.classList.add("draw");let o=document.createElement("div");r.append(o),o.setAttribute("aria-hidden","true"),o.className="internal";let[s,a]=this.parentDimensions;return this.setDims(this.width*s,this.height*a),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,n),r}static createDrawerInstance(t,n,r,o,s){Xn("Not implemented")}static startDrawing(t,n,r,o){let{target:s,offsetX:a,offsetY:l,pointerId:c,pointerType:d}=o;if(i.#a&&i.#a!==d)return;let{viewport:{rotation:h}}=t,{width:p,height:g}=s.getBoundingClientRect(),_=i.#i=new AbortController,b=t.combinedSignal(_);if(i.#r||=c,i.#a??=d,window.addEventListener("pointerup",C=>{i.#r===C.pointerId?this._endDraw(C):i.#s?.delete(C.pointerId)},{signal:b}),window.addEventListener("pointercancel",C=>{i.#r===C.pointerId?this._currentParent.endDrawingSession():i.#s?.delete(C.pointerId)},{signal:b}),window.addEventListener("pointerdown",C=>{i.#a===C.pointerType&&((i.#s||=new Set).add(C.pointerId),i.#n.isCancellable()&&(i.#n.removeLastElement(),i.#n.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:b}),window.addEventListener("contextmenu",Ia,{signal:b}),s.addEventListener("pointermove",this._drawMove.bind(this),{signal:b}),s.addEventListener("touchmove",C=>{C.timeStamp===i.#u&&sr(C)},{signal:b}),t.toggleDrawing(),n._editorUndoBar?.hide(),i.#n){t.drawLayer.updateProperties(this._currentDrawId,i.#n.startNew(a,l,p,g,h));return}n.updateUIForDefaultProperties(this),i.#n=this.createDrawerInstance(a,l,p,g,h),i.#o=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(i.#o.toSVGProperties(),i.#n.defaultSVGProperties),!0,!1)}static _drawMove(t){if(i.#u=-1,!i.#n)return;let{offsetX:n,offsetY:r,pointerId:o}=t;if(i.#r===o){if(i.#s?.size>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,i.#n.add(n,r)),i.#u=t.timeStamp,sr(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,i.#n=null,i.#o=null,i.#a=null,i.#u=NaN),i.#i&&(i.#i.abort(),i.#i=null,i.#r=NaN,i.#s=null)}static _endDraw(t){let n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),t?.target===n.div&&n.drawLayer.updateProperties(this._currentDrawId,i.#n.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){let r=i.#n,o=this._currentDrawId,s=r.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(o,r.setLastElement(s))},undo:()=>{n.drawLayer.updateProperties(o,r.removeLastElement())},mustExec:!1,type:mn.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){let n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(mn.DRAW_STEP),!i.#n.isEmpty()){let{pageDimensions:[r,o],scale:s}=n,a=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:i.#n.getOutlines(r*s,o*s,s,this._INNER_MARGIN),drawingOptions:i.#o,mustBeCommitted:!t});return this._cleanup(!0),a}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,n,r,o,s,a){Xn("Not implemented")}static deserialize(t,n,r){return Ge(this,null,function*(){let{rawDims:{pageWidth:o,pageHeight:s,pageX:a,pageY:l}}=n.viewport,c=this.deserializeDraw(a,l,o,s,this._INNER_MARGIN,t),d=yield Wl(i,this,"deserialize").call(this,t,n,r);return d.createDrawingOptions(t),d.#c({drawOutlines:c}),d.#f(),d.onScaleChanging(),d.rotate(),d})}serializeDraw(t){let[n,r]=this.pageTranslation,[o,s]=this.pageDimensions;return this.#e.serialize([n,r,o,s],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}return i})(),yA=class{#e=new Float64Array(6);#t;#n;#i;#o;#r;#a="";#s=0;#u=new k0;#c;#h;constructor(e,t,n,r,o,s){this.#c=n,this.#h=r,this.#i=o,this.#o=s,[e,t]=this.#d(e,t);let a=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#r=[e,t],this.#n=[{line:a,points:this.#r}],this.#e.set(a,0)}updateProperty(e,t){e==="stroke-width"&&(this.#o=t)}#d(e,t){return pt._normalizePoint(e,t,this.#c,this.#h,this.#i)}isEmpty(){return!this.#n||this.#n.length===0}isCancellable(){return this.#r.length<=10}add(e,t){[e,t]=this.#d(e,t);let[n,r,o,s]=this.#e.subarray(2,6),a=e-o,l=t-s;return Math.hypot(this.#c*a,this.#h*l)<=2?null:(this.#r.push(e,t),isNaN(n)?(this.#e.set([o,s,e,t],2),this.#t.push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(this.#e[0])&&this.#t.splice(6,6),this.#e.set([n,r,o,s,e,t],0),this.#t.push(...pt.createBezierPoints(n,r,o,s,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){let n=this.add(e,t);return n||(this.#r.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,n,r,o){this.#c=n,this.#h=r,this.#i=o,[e,t]=this.#d(e,t);let s=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#r=[e,t];let a=this.#n.at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),this.#n.push({line:s,points:this.#r}),this.#e.set(s,0),this.#s=0,this.toSVGPath(),null}getLastElement(){return this.#n.at(-1)}setLastElement(e){return this.#n?(this.#n.push(e),this.#t=e.line,this.#r=e.points,this.#s=0,{path:{d:this.toSVGPath()}}):this.#u.setLastElement(e)}removeLastElement(){if(!this.#n)return this.#u.removeLastElement();this.#n.pop(),this.#a="";for(let e=0,t=this.#n.length;e<t;e++){let{line:n,points:r}=this.#n[e];this.#t=n,this.#r=r,this.#s=0,this.toSVGPath()}return{path:{d:this.#a}}}toSVGPath(){let e=pt.svgRound(this.#t[4]),t=pt.svgRound(this.#t[5]);if(this.#r.length===2)return this.#a=`${this.#a} M ${e} ${t} Z`,this.#a;if(this.#r.length<=6){let r=this.#a.lastIndexOf("M");this.#a=`${this.#a.slice(0,r)} M ${e} ${t}`,this.#s=6}if(this.#r.length===4){let r=pt.svgRound(this.#t[10]),o=pt.svgRound(this.#t[11]);return this.#a=`${this.#a} L ${r} ${o}`,this.#s=12,this.#a}let n=[];this.#s===0&&(n.push(`M ${e} ${t}`),this.#s=6);for(let r=this.#s,o=this.#t.length;r<o;r+=6){let[s,a,l,c,d,h]=this.#t.slice(r,r+6).map(pt.svgRound);n.push(`C${s} ${a} ${l} ${c} ${d} ${h}`)}return this.#a+=n.join(" "),this.#s=this.#t.length,this.#a}getOutlines(e,t,n,r){let o=this.#n.at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),this.#u.build(this.#n,e,t,n,this.#i,this.#o,r),this.#e=null,this.#t=null,this.#n=null,this.#a=null,this.#u}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}},k0=class extends pt{#e;#t=0;#n;#i;#o;#r;#a;#s;#u;build(e,t,n,r,o,s,a){this.#o=t,this.#r=n,this.#a=r,this.#s=o,this.#u=s,this.#n=a??0,this.#i=e,this.#d()}get thickness(){return this.#u}setLastElement(e){return this.#i.push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#i.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){let e=[];for(let{line:t}of this.#i){if(e.push(`M${pt.svgRound(t[4])} ${pt.svgRound(t[5])}`),t.length===6){e.push("Z");continue}if(t.length===12&&isNaN(t[6])){e.push(`L${pt.svgRound(t[10])} ${pt.svgRound(t[11])}`);continue}for(let n=6,r=t.length;n<r;n+=6){let[o,s,a,l,c,d]=t.subarray(n,n+6).map(pt.svgRound);e.push(`C${o} ${s} ${a} ${l} ${c} ${d}`)}}return e.join("")}serialize([e,t,n,r],o){let s=[],a=[],[l,c,d,h]=this.#h(),p,g,_,b,C,y,M,O,A;switch(this.#s){case 0:A=pt._rescale,p=e,g=t+r,_=n,b=-r,C=e+l*n,y=t+(1-c-h)*r,M=e+(l+d)*n,O=t+(1-c)*r;break;case 90:A=pt._rescaleAndSwap,p=e,g=t,_=n,b=r,C=e+c*n,y=t+l*r,M=e+(c+h)*n,O=t+(l+d)*r;break;case 180:A=pt._rescale,p=e+n,g=t,_=-n,b=r,C=e+(1-l-d)*n,y=t+c*r,M=e+(1-l)*n,O=t+(c+h)*r;break;case 270:A=pt._rescaleAndSwap,p=e+n,g=t+r,_=-n,b=-r,C=e+(1-c-h)*n,y=t+(1-l-d)*r,M=e+(1-c)*n,O=t+(1-l)*r;break}for(let{line:D,points:N}of this.#i)s.push(A(D,p,g,_,b,o?new Array(D.length):null)),a.push(A(N,p,g,_,b,o?new Array(N.length):null));return{lines:s,points:a,rect:[C,y,M,O]}}static deserialize(e,t,n,r,o,{paths:{lines:s,points:a},rotation:l,thickness:c}){let d=[],h,p,g,_,b;switch(l){case 0:b=pt._rescale,h=-e/n,p=t/r+1,g=1/n,_=-1/r;break;case 90:b=pt._rescaleAndSwap,h=-t/r,p=-e/n,g=1/r,_=1/n;break;case 180:b=pt._rescale,h=e/n+1,p=-t/r,g=-1/n,_=1/r;break;case 270:b=pt._rescaleAndSwap,h=t/r+1,p=e/n+1,g=-1/r,_=-1/n;break}if(!s){s=[];for(let y of a){let M=y.length;if(M===2){s.push(new Float32Array([NaN,NaN,NaN,NaN,y[0],y[1]]));continue}if(M===4){s.push(new Float32Array([NaN,NaN,NaN,NaN,y[0],y[1],NaN,NaN,NaN,NaN,y[2],y[3]]));continue}let O=new Float32Array(3*(M-2));s.push(O);let[A,D,N,B]=y.subarray(0,4);O.set([NaN,NaN,NaN,NaN,A,D],0);for(let T=4;T<M;T+=2){let H=y[T],te=y[T+1];O.set(pt.createBezierPoints(A,D,N,B,H,te),(T-2)*3),[A,D,N,B]=[N,B,H,te]}}}for(let y=0,M=s.length;y<M;y++)d.push({line:b(s[y].map(O=>O??NaN),h,p,g,_),points:b(a[y].map(O=>O??NaN),h,p,g,_)});let C=new this.prototype.constructor;return C.build(d,n,r,1,l,c,o),C}#c(e=this.#u){let t=this.#n+e/2*this.#a;return this.#s%180===0?[t/this.#o,t/this.#r]:[t/this.#r,t/this.#o]}#h(){let[e,t,n,r]=this.#e,[o,s]=this.#c(0);return[e+o,t+s,n-2*o,r-2*s]}#d(){let e=this.#e=new Float32Array([1/0,1/0,-1/0,-1/0]);for(let{line:r}of this.#i){if(r.length<=12){for(let a=4,l=r.length;a<l;a+=6)Mt.pointBoundingBox(r[a],r[a+1],e);continue}let o=r[4],s=r[5];for(let a=6,l=r.length;a<l;a+=6){let[c,d,h,p,g,_]=r.subarray(a,a+6);Mt.bezierBoundingBox(o,s,c,d,h,p,g,_,e),o=g,s=_}}let[t,n]=this.#c();e[0]=po(e[0]-t,0,1),e[1]=po(e[1]-n,0,1),e[2]=po(e[2]+t,0,1),e[3]=po(e[3]+n,0,1),e[2]-=e[0],e[3]-=e[1]}get box(){return this.#e}updateProperty(e,t){return e==="stroke-width"?this.#f(t):null}#f(e){let[t,n]=this.#c();this.#u=e;let[r,o]=this.#c(),[s,a]=[r-t,o-n],l=this.#e;return l[0]-=s,l[1]-=a,l[2]+=2*s,l[3]+=2*a,l}updateParentDimensions([e,t],n){let[r,o]=this.#c();this.#o=e,this.#r=t,this.#a=n;let[s,a]=this.#c(),l=s-r,c=a-o,d=this.#e;return d[0]-=l,d[1]-=c,d[2]+=2*l,d[3]+=2*c,d}updateRotation(e){return this.#t=e,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#e.map(pt.svgRound).join(" ")}get defaultProperties(){let[e,t]=this.#e;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${pt.svgRound(e)} ${pt.svgRound(t)}`}}}get rotationTransform(){let[,,e,t]=this.#e,n=0,r=0,o=0,s=0,a=0,l=0;switch(this.#t){case 90:r=t/e,o=-e/t,a=e;break;case 180:n=-1,s=-1,a=e,l=t;break;case 270:r=-t/e,o=e/t,l=t;break;default:return""}return`matrix(${n} ${r} ${o} ${s} ${pt.svgRound(a)} ${pt.svgRound(l)})`}getPathResizingSVGProperties([e,t,n,r]){let[o,s]=this.#c(),[a,l,c,d]=this.#e;if(Math.abs(c-o)<=pt.PRECISION||Math.abs(d-s)<=pt.PRECISION){let b=e+n/2-(a+c/2),C=t+r/2-(l+d/2);return{path:{"transform-origin":`${pt.svgRound(e)} ${pt.svgRound(t)}`,transform:`${this.rotationTransform} translate(${b} ${C})`}}}let h=(n-2*o)/(c-2*o),p=(r-2*s)/(d-2*s),g=c/n,_=d/r;return{path:{"transform-origin":`${pt.svgRound(a)} ${pt.svgRound(l)}`,transform:`${this.rotationTransform} scale(${g} ${_}) translate(${pt.svgRound(o)} ${pt.svgRound(s)}) scale(${h} ${p}) translate(${pt.svgRound(-o)} ${pt.svgRound(-s)})`}}}getPathResizedSVGProperties([e,t,n,r]){let[o,s]=this.#c(),a=this.#e,[l,c,d,h]=a;if(a[0]=e,a[1]=t,a[2]=n,a[3]=r,Math.abs(d-o)<=pt.PRECISION||Math.abs(h-s)<=pt.PRECISION){let C=e+n/2-(l+d/2),y=t+r/2-(c+h/2);for(let{line:M,points:O}of this.#i)pt._translate(M,C,y,M),pt._translate(O,C,y,O);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${pt.svgRound(e)} ${pt.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}let p=(n-2*o)/(d-2*o),g=(r-2*s)/(h-2*s),_=-p*(l+o)+e+o,b=-g*(c+s)+t+s;if(p!==1||g!==1||_!==0||b!==0)for(let{line:C,points:y}of this.#i)pt._rescale(C,_,b,p,g,C),pt._rescale(y,_,b,p,g,y);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${pt.svgRound(e)} ${pt.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,t],n){let[r,o]=n,s=this.#e,a=e-s[0],l=t-s[1];if(this.#o===r&&this.#r===o)for(let{line:c,points:d}of this.#i)pt._translate(c,a,l,c),pt._translate(d,a,l,d);else{let c=this.#o/r,d=this.#r/o;this.#o=r,this.#r=o;for(let{line:h,points:p}of this.#i)pt._rescale(h,a,l,c,d,h),pt._rescale(p,a,l,c,d,p);s[2]*=c,s[3]*=d}return s[0]=e,s[1]=t,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${pt.svgRound(e)} ${pt.svgRound(t)}`}}}get defaultSVGProperties(){let e=this.#e;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${pt.svgRound(e[0])} ${pt.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}},f2=class i extends h2{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:ci._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??=this["stroke-width"],t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){let e=new i(this._viewParameters);return e.updateAll(this),e}},wA=class i extends qR{static _type="ink";static _editorType=Ut.INK;static _defaultDrawingOptions=null;constructor(e){super(ot(Ie({},e),{name:"inkEditor"})),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,t){ci.initialize(e,t),this._defaultDrawingOptions=new f2(t.viewParameters)}static getDefaultDrawingOptions(e){let t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!0}static get typesMap(){return gn(this,"typesMap",new Map([[mn.INK_THICKNESS,"stroke-width"],[mn.INK_COLOR,"stroke"],[mn.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,t,n,r,o){return new yA(e,t,n,r,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,t,n,r,o,s){return k0.deserialize(e,t,n,r,o,s)}static deserialize(e,t,n){return Ge(this,null,function*(){let r=null;if(e instanceof yx){let{data:{inkLists:s,rect:a,rotation:l,id:c,color:d,opacity:h,borderStyle:{rawWidth:p},popupRef:g},parent:{page:{pageNumber:_}}}=e;r=e={annotationType:Ut.INK,color:Array.from(d),thickness:p,opacity:h,paths:{points:s},boxes:null,pageIndex:_-1,rect:a.slice(0),rotation:l,id:c,deleted:!1,popupRef:g}}let o=yield Wl(i,this,"deserialize").call(this,e,t,n);return o.annotationElementId=e.id||null,o._initialData=r,o})}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();let{_drawId:e,_drawingOptions:t,parent:n}=this;t.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(e,t.toSVGProperties())}static onScaleChangingWhenDrawing(){let e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:t,opacity:n}){this._drawingOptions=i.getDefaultDrawingOptions({stroke:Mt.makeHexColor(...e),"stroke-width":t,"stroke-opacity":n})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let{lines:t,points:n,rect:r}=this.serializeDraw(e),{_drawingOptions:{stroke:o,"stroke-opacity":s,"stroke-width":a}}=this,l={annotationType:Ut.INK,color:ci._colorManager.convert(o),opacity:s,thickness:a,paths:{lines:t,points:n},pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(l.isCopy=!0,l):this.annotationElementId&&!this.#e(l)?null:(l.id=this.annotationElementId,l)}#e(e){let{color:t,thickness:n,opacity:r,pageIndex:o}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||e.color.some((s,a)=>s!==t[a])||e.thickness!==n||e.opacity!==r||e.pageIndex!==o}renderAnnotationElement(e){let{points:t,rect:n}=this.serializeDraw(!1);return e.updateEdited({rect:n,thickness:this._drawingOptions["stroke-width"],points:t}),null}},Ex=class extends k0{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}},Fy=8,cx=3,Rd=class{static#e={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#t(e,t,n,r){return n-=e,r-=t,n===0?r>0?0:4:n===1?r+6:2-r}static#n=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#i(e,t,n,r,o,s,a){let l=this.#t(n,r,o,s);for(let c=0;c<8;c++){let d=(-c+l-a+16)%8,h=this.#n[2*d],p=this.#n[2*d+1];if(e[(n+h)*t+(r+p)]!==0)return d}return-1}static#o(e,t,n,r,o,s,a){let l=this.#t(n,r,o,s);for(let c=0;c<8;c++){let d=(c+l+a+16)%8,h=this.#n[2*d],p=this.#n[2*d+1];if(e[(n+h)*t+(r+p)]!==0)return d}return-1}static#r(e,t,n,r){let o=e.length,s=new Int32Array(o);for(let d=0;d<o;d++)s[d]=e[d]<=r?1:0;for(let d=1;d<n-1;d++)s[d*t]=s[d*t+t-1]=0;for(let d=0;d<t;d++)s[d]=s[t*n-1-d]=0;let a=1,l,c=[];for(let d=1;d<n-1;d++){l=1;for(let h=1;h<t-1;h++){let p=d*t+h,g=s[p];if(g===0)continue;let _=d,b=h;if(g===1&&s[p-1]===0)a+=1,b-=1;else if(g>=1&&s[p+1]===0)a+=1,b+=1,g>1&&(l=g);else{g!==1&&(l=Math.abs(g));continue}let C=[h,d],y=b===h+1,M={isHole:y,points:C,id:a,parent:0};c.push(M);let O;for(let L of c)if(L.id===l){O=L;break}O?O.isHole?M.parent=y?O.parent:l:M.parent=y?l:O.parent:M.parent=y?l:0;let A=this.#i(s,t,d,h,_,b,0);if(A===-1){s[p]=-a,s[p]!==1&&(l=Math.abs(s[p]));continue}let D=this.#n[2*A],N=this.#n[2*A+1],B=d+D,T=h+N;_=B,b=T;let H=d,te=h;for(;;){let L=this.#o(s,t,H,te,_,b,1);D=this.#n[2*L],N=this.#n[2*L+1];let z=H+D,J=te+N;C.push(J,z);let Q=H*t+te;if(s[Q+1]===0?s[Q]=-a:s[Q]===1&&(s[Q]=a),z===d&&J===h&&H===B&&te===T){s[p]!==1&&(l=Math.abs(s[p]));break}else _=H,b=te,H=z,te=J}}}return c}static#a(e,t,n,r){if(n-t<=4){for(let B=t;B<n-2;B+=2)r.push(e[B],e[B+1]);return}let o=e[t],s=e[t+1],a=e[n-4]-o,l=e[n-3]-s,c=Math.hypot(a,l),d=a/c,h=l/c,p=d*s-h*o,g=l/a,_=1/c,b=Math.atan(g),C=Math.cos(b),y=Math.sin(b),M=_*(Math.abs(C)+Math.abs(y)),O=_*(1-M+M**2),A=Math.max(Math.atan(Math.abs(y+C)*O),Math.atan(Math.abs(y-C)*O)),D=0,N=t;for(let B=t+2;B<n-2;B+=2){let T=Math.abs(p-d*e[B+1]+h*e[B]);T>D&&(N=B,D=T)}D>(c*A)**2?(this.#a(e,t,N+2,r),this.#a(e,N,n,r)):r.push(o,s)}static#s(e){let t=[],n=e.length;return this.#a(e,0,n,t),t.push(e[n-2],e[n-1]),t.length<=4?null:t}static#u(e,t,n,r,o,s){let a=new Float32Array(s**2),l=-2*r**2,c=s>>1;for(let b=0;b<s;b++){let C=(b-c)**2;for(let y=0;y<s;y++)a[b*s+y]=Math.exp((C+(y-c)**2)/l)}let d=new Float32Array(256),h=-2*o**2;for(let b=0;b<256;b++)d[b]=Math.exp(b**2/h);let p=e.length,g=new Uint8Array(p),_=new Uint32Array(256);for(let b=0;b<n;b++)for(let C=0;C<t;C++){let y=b*t+C,M=e[y],O=0,A=0;for(let N=0;N<s;N++){let B=b+N-c;if(!(B<0||B>=n))for(let T=0;T<s;T++){let H=C+T-c;if(H<0||H>=t)continue;let te=e[B*t+H],L=a[N*s+T]*d[Math.abs(te-M)];O+=te*L,A+=L}}let D=g[y]=Math.round(O/A);_[D]++}return[g,_]}static#c(e){let t=new Uint32Array(256);for(let n of e)t[n]++;return t}static#h(e){let t=e.length,n=new Uint8ClampedArray(t>>2),r=-1/0,o=1/0;for(let a=0,l=n.length;a<l;a++){if(e[(a<<2)+3]===0){r=n[a]=255;continue}let d=n[a]=e[a<<2];d>r&&(r=d),d<o&&(o=d)}let s=255/(r-o);for(let a=0;a<t;a++)n[a]=(n[a]-o)*s;return n}static#d(e){let t,n=-1/0,r=-1/0,o=e.findIndex(l=>l!==0),s=o,a=o;for(t=o;t<256;t++){let l=e[t];l>n&&(t-s>r&&(r=t-s,a=t-1),n=l,s=t)}for(t=a-1;t>=0&&!(e[t]>e[t+1]);t--);return t}static#f(e){let t=e,{width:n,height:r}=e,{maxDim:o}=this.#e,s=n,a=r;if(n>o||r>o){let p=n,g=r,_=Math.log2(Math.max(n,r)/o),b=Math.floor(_);_=_===b?b-1:b;for(let y=0;y<_;y++){s=Math.ceil(p/2),a=Math.ceil(g/2);let M=new OffscreenCanvas(s,a);M.getContext("2d").drawImage(e,0,0,p,g,0,0,s,a),p=s,g=a,e!==t&&e.close(),e=M.transferToImageBitmap()}let C=Math.min(o/s,o/a);s=Math.round(s*C),a=Math.round(a*C)}let c=new OffscreenCanvas(s,a).getContext("2d",{willReadFrequently:!0});c.filter="grayscale(1)",c.drawImage(e,0,0,e.width,e.height,0,0,s,a);let d=c.getImageData(0,0,s,a).data;return[this.#h(d),s,a]}static extractContoursFromText(e,{fontFamily:t,fontStyle:n,fontWeight:r},o,s,a,l){let c=new OffscreenCanvas(1,1),d=c.getContext("2d",{alpha:!1}),h=200,p=d.font=`${n} ${r} ${h}px ${t}`,{actualBoundingBoxLeft:g,actualBoundingBoxRight:_,actualBoundingBoxAscent:b,actualBoundingBoxDescent:C,fontBoundingBoxAscent:y,fontBoundingBoxDescent:M,width:O}=d.measureText(e),A=1.5,D=Math.ceil(Math.max(Math.abs(g)+Math.abs(_)||0,O)*A),N=Math.ceil(Math.max(Math.abs(b)+Math.abs(C)||h,Math.abs(y)+Math.abs(M)||h)*A);c=new OffscreenCanvas(D,N),d=c.getContext("2d",{alpha:!0,willReadFrequently:!0}),d.font=p,d.filter="grayscale(1)",d.fillStyle="white",d.fillRect(0,0,D,N),d.fillStyle="black",d.fillText(e,D*(A-1)/2,N*(3-A)/2);let B=this.#h(d.getImageData(0,0,D,N).data),T=this.#c(B),H=this.#d(T),te=this.#r(B,D,N,H);return this.processDrawnLines({lines:{curves:te,width:D,height:N},pageWidth:o,pageHeight:s,rotation:a,innerMargin:l,mustSmooth:!0,areContours:!0})}static process(e,t,n,r,o){let[s,a,l]=this.#f(e),[c,d]=this.#u(s,a,l,Math.hypot(a,l)*this.#e.sigmaSFactor,this.#e.sigmaR,this.#e.kernelSize),h=this.#d(d),p=this.#r(c,a,l,h);return this.processDrawnLines({lines:{curves:p,width:a,height:l},pageWidth:t,pageHeight:n,rotation:r,innerMargin:o,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:n,rotation:r,innerMargin:o,mustSmooth:s,areContours:a}){r%180!==0&&([t,n]=[n,t]);let{curves:l,width:c,height:d}=e,h=e.thickness??0,p=[],g=Math.min(t/c,n/d),_=g/t,b=g/n,C=[];for(let{points:M}of l){let O=s?this.#s(M):M;if(!O)continue;C.push(O);let A=O.length,D=new Float32Array(A),N=new Float32Array(3*(A===2?2:A-2));if(p.push({line:N,points:D}),A===2){D[0]=O[0]*_,D[1]=O[1]*b,N.set([NaN,NaN,NaN,NaN,D[0],D[1]],0);continue}let[B,T,H,te]=O;B*=_,T*=b,H*=_,te*=b,D.set([B,T,H,te],0),N.set([NaN,NaN,NaN,NaN,B,T],0);for(let L=4;L<A;L+=2){let z=D[L]=O[L]*_,J=D[L+1]=O[L+1]*b;N.set(pt.createBezierPoints(B,T,H,te,z,J),(L-2)*3),[B,T,H,te]=[H,te,z,J]}}if(p.length===0)return null;let y=a?new Ex:new k0;return y.build(p,t,n,1,r,a?0:h,o),{outline:y,newCurves:C,areContours:a,thickness:h,width:c,height:d}}static compressSignature(s){return Ge(this,arguments,function*({outlines:e,areContours:t,thickness:n,width:r,height:o}){let a=1/0,l=-1/0,c=0;for(let A of e){c+=A.length;for(let D=2,N=A.length;D<N;D++){let B=A[D]-A[D-2];a=Math.min(a,B),l=Math.max(l,B)}}let d;a>=-128&&l<=127?d=Int8Array:a>=-32768&&l<=32767?d=Int16Array:d=Int32Array;let h=e.length,p=Fy+cx*h,g=new Uint32Array(p),_=0;g[_++]=p*Uint32Array.BYTES_PER_ELEMENT+(c-2*h)*d.BYTES_PER_ELEMENT,g[_++]=0,g[_++]=r,g[_++]=o,g[_++]=t?0:1,g[_++]=Math.max(0,Math.floor(n??0)),g[_++]=h,g[_++]=d.BYTES_PER_ELEMENT;for(let A of e)g[_++]=A.length-2,g[_++]=A[0],g[_++]=A[1];let b=new CompressionStream("deflate-raw"),C=b.writable.getWriter();yield C.ready,C.write(g);let y=d.prototype.constructor;for(let A of e){let D=new y(A.length-2);for(let N=2,B=A.length;N<B;N++)D[N-2]=A[N]-A[N-2];C.write(D)}C.close();let M=yield new Response(b.readable).arrayBuffer(),O=new Uint8Array(M);return zR(O)})}static decompressSignature(e){return Ge(this,null,function*(){try{let s=Mse(e),{readable:a,writable:l}=new DecompressionStream("deflate-raw"),c=l.getWriter();yield c.ready,c.write(s).then(()=>Ge(null,null,function*(){yield c.ready,yield c.close()})).catch(()=>{});let d=null,h=0;try{for(var t=B4(a),n,r,o;n=!(r=yield t.next()).done;n=!1){let B=r.value;d||=new Uint8Array(new Uint32Array(B.buffer,0,4)[0]),d.set(B,h),h+=B.length}}catch{o=[r]}finally{try{n&&(r=t.return)&&(yield r.call(t))}finally{if(o)throw o[0]}}let p=new Uint32Array(d.buffer,0,d.length>>2),g=p[1];if(g!==0)throw new Error(`Invalid version: ${g}`);let _=p[2],b=p[3],C=p[4]===0,y=p[5],M=p[6],O=p[7],A=[],D=(Fy+cx*M)*Uint32Array.BYTES_PER_ELEMENT,N;switch(O){case Int8Array.BYTES_PER_ELEMENT:N=new Int8Array(d.buffer,D);break;case Int16Array.BYTES_PER_ELEMENT:N=new Int16Array(d.buffer,D);break;case Int32Array.BYTES_PER_ELEMENT:N=new Int32Array(d.buffer,D);break}h=0;for(let B=0;B<M;B++){let T=p[cx*B+Fy],H=new Float32Array(T+2);A.push(H);for(let te=0;te<cx-1;te++)H[te]=p[cx*B+Fy+te+1];for(let te=0;te<T;te++)H[te+2]=H[te]+N[h++]}return{areContours:C,thickness:y,outlines:A,width:_,height:b}}catch(s){return Ht(`decompressSignature: ${s}`),null}})}},MA=class i extends h2{constructor(){super(),super.updateProperties({fill:ci._defaultLineColor,"stroke-width":0})}clone(){let e=new i;return e.updateAll(this),e}},EA=class i extends f2{constructor(e){super(e),super.updateProperties({stroke:ci._defaultLineColor,"stroke-width":1})}clone(){let e=new i(this._viewParameters);return e.updateAll(this),e}},PA=class i extends qR{#e=!1;#t=null;#n=null;#i=null;static _type="signature";static _editorType=Ut.SIGNATURE;static _defaultDrawingOptions=null;constructor(e){super(ot(Ie({},e),{mustBeCommitted:!0,name:"signatureEditor"})),this._willKeepAspectRatio=!0,this.#n=e.signatureData||null,this.#t=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,t){ci.initialize(e,t),this._defaultDrawingOptions=new MA,this._defaultDrawnSignatureOptions=new EA(t.viewParameters)}static getDefaultDrawingOptions(e){let t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!1}static get typesMap(){return gn(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#t}}static computeTelemetryFinalData(e){let t=e.get("hasDescription");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,t,{_isCopy:n}=this;if(n&&(this._isCopy=!1,e=this.x,t=this.y),super.render(),this._drawId===null)if(this.#n){let{lines:r,mustSmooth:o,areContours:s,description:a,uuid:l,heightInPage:c}=this.#n,{rawDims:{pageWidth:d,pageHeight:h},rotation:p}=this.parent.viewport,g=Rd.processDrawnLines({lines:r,pageWidth:d,pageHeight:h,rotation:p,innerMargin:i._INNER_MARGIN,mustSmooth:o,areContours:s});this.addSignature(g,c,a,l)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);return n&&(this._isCopy=!0,this._moveAfterPaste(e,t)),this.div}setUuid(e){this.#i=e,this.addEditToolbar()}getUuid(){return this.#i}get description(){return this.#t}set description(e){this.#t=e,super.addEditToolbar().then(t=>{t?.updateEditSignatureButton(e)})}getSignaturePreview(){let{newCurves:e,areContours:t,thickness:n,width:r,height:o}=this.#n,s=Math.max(r,o),a=Rd.processDrawnLines({lines:{curves:e.map(l=>({points:l})),thickness:n,width:r,height:o},pageWidth:s,pageHeight:s,rotation:0,innerMargin:0,mustSmooth:!1,areContours:t});return{areContours:t,outline:a.outline}}addEditToolbar(){return Ge(this,null,function*(){let e=yield Wl(i.prototype,this,"addEditToolbar").call(this);return e?(this._uiManager.signatureManager&&this.#t!==null&&(yield e.addEditSignatureButton(this._uiManager.signatureManager,this.#i,this.#t),e.show()),e):null})}addSignature(e,t,n,r){let{x:o,y:s}=this,{outline:a}=this.#n=e;this.#e=a instanceof Ex,this.#t=n,this.div.setAttribute("data-l10n-args",JSON.stringify({description:n}));let l;this.#e?l=i.getDefaultDrawingOptions():(l=i._defaultDrawnSignatureOptions.clone(),l.updateProperties({"stroke-width":a.thickness})),this._addOutlines({drawOutlines:a,drawingOptions:l});let[c,d]=this.parentDimensions,[,h]=this.pageDimensions,p=t/h;p=p>=1?.5:p,this.width*=p/this.height,this.width>=1&&(p*=.9/this.width,this.width=.9),this.height=p,this.setDims(c*this.width,d*this.height),this.x=o,this.y=s,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!n}}),this.div.hidden=!1}getFromImage(e){let{rawDims:{pageWidth:t,pageHeight:n},rotation:r}=this.parent.viewport;return Rd.process(e,t,n,r,i._INNER_MARGIN)}getFromText(e,t){let{rawDims:{pageWidth:n,pageHeight:r},rotation:o}=this.parent.viewport;return Rd.extractContoursFromText(e,t,n,r,o,i._INNER_MARGIN)}getDrawnSignature(e){let{rawDims:{pageWidth:t,pageHeight:n},rotation:r}=this.parent.viewport;return Rd.processDrawnLines({lines:e,pageWidth:t,pageHeight:n,rotation:r,innerMargin:i._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:t}){e?this._drawingOptions=i.getDefaultDrawingOptions():(this._drawingOptions=i._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":t}))}serialize(e=!1){if(this.isEmpty())return null;let{lines:t,points:n,rect:r}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":o}}=this,s={annotationType:Ut.SIGNATURE,isSignature:!0,areContours:this.#e,color:[0,0,0],thickness:this.#e?0:o,pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(s.paths={lines:t,points:n},s.uuid=this.#i,s.isCopy=!0):s.lines=t,this.#t&&(s.accessibilityData={type:"Figure",alt:this.#t}),s}static deserializeDraw(e,t,n,r,o,s){return s.areContours?Ex.deserialize(e,t,n,r,o,s):k0.deserialize(e,t,n,r,o,s)}static deserialize(e,t,n){return Ge(this,null,function*(){let r=yield Wl(i,this,"deserialize").call(this,e,t,n);return r.#e=e.areContours,r.#t=e.accessibilityData?.alt||"",r.#i=e.uuid,r})}},OA=class i extends ci{#e=null;#t=null;#n=null;#i=null;#o=null;#r="";#a=null;#s=!1;#u=null;#c=!1;#h=!1;static _type="stamp";static _editorType=Ut.STAMP;constructor(e){super(ot(Ie({},e),{name:"stampEditor"})),this.#i=e.bitmapUrl,this.#o=e.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,t){ci.initialize(e,t)}static isHandlingMimeForPasting(e){return lk.includes(e)}static paste(e,t){t.pasteEditor({mode:Ut.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){let t=e.get("hasAltText");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}#d(e,t=!1){if(!e){this.remove();return}this.#e=e.bitmap,t||(this.#t=e.id,this.#c=e.isSvg),e.file&&(this.#r=e.file.name),this.#g()}#f(){if(this.#n=null,this._uiManager.enableWaiting(!1),!!this.#a){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}mlGuessAltText(e=null,t=!0){return Ge(this,null,function*(){if(this.hasAltTextData())return null;let{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!(yield n.isEnabledFor("altText")))throw new Error("ML isn't enabled for alt text.");let{data:r,width:o,height:s}=e||this.copyCanvas(null,null,!0).imageData,a=yield n.guess({name:"altText",request:{data:r,width:o,height:s,channels:r.length/(o*s)}});if(!a)throw new Error("No response from the AI service.");if(a.error)throw new Error("Error from the AI service.");if(a.cancel)return null;if(!a.output)throw new Error("No valid response from the AI service.");let l=a.output;return yield this.setGuessedAltText(l),t&&!this.hasAltTextData()&&(this.altTextData={alt:l,decorative:!1}),l})}#l(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(n=>this.#d(n,!0)).finally(()=>this.#f());return}if(this.#i){let n=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(n).then(r=>this.#d(r)).finally(()=>this.#f());return}if(this.#o){let n=this.#o;this.#o=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(n).then(r=>this.#d(r)).finally(()=>this.#f());return}let e=document.createElement("input");e.type="file",e.accept=lk.join(",");let t=this._uiManager._signal;this.#n=new Promise(n=>{e.addEventListener("change",()=>Ge(this,null,function*(){if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);let r=yield this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#d(r)}n()}),{signal:t}),e.addEventListener("cancel",()=>{this.remove(),n()},{signal:t})}).finally(()=>this.#f()),e.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#a?.remove(),this.#a=null,this.#u&&(clearTimeout(this.#u),this.#u=null)),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#l();return}super.rebuild(),this.div!==null&&(this.#t&&this.#a===null&&this.#l(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(this.#n||this.#e||this.#i||this.#o||this.#t||this.#s)}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;return this._isCopy&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),this.#s||(this.#e?this.#g():this.#l()),this._isCopy&&this._moveAfterPaste(e,t),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,t){let{id:n,bitmap:r}=this._uiManager.imageManager.getFromCanvas(e,t);t.remove(),n&&this._uiManager.imageManager.isValidId(n)&&(this.#t=n,r&&(this.#e=r),this.#s=!1,this.#g())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#u!==null&&clearTimeout(this.#u);let e=200;this.#u=setTimeout(()=>{this.#u=null,this.#p()},e)}#g(){let{div:e}=this,{width:t,height:n}=this.#e,[r,o]=this.pageDimensions,s=.75;if(this.width)t=this.width*r,n=this.height*o;else if(t>s*r||n>s*o){let d=Math.min(s*r/t,s*o/n);t*=d,n*=d}let[a,l]=this.parentDimensions;this.setDims(t*a/r,n*l/o),this._uiManager.enableWaiting(!1);let c=this.#a=document.createElement("canvas");c.setAttribute("role","img"),this.addContainer(c),this.width=t/r,this.height=n/o,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),this.#p(),this.#h||(this.parent.addUndoableEditor(this),this.#h=!0),this._reportTelemetry({action:"inserted_image"}),this.#r&&this.div.setAttribute("aria-description",this.#r)}copyCanvas(e,t,n=!1){e||(e=224);let{width:r,height:o}=this.#e,s=new Ec,a=this.#e,l=r,c=o,d=null;if(t){if(r>t||o>t){let N=Math.min(t/r,t/o);l=Math.floor(r*N),c=Math.floor(o*N)}d=document.createElement("canvas");let p=d.width=Math.ceil(l*s.sx),g=d.height=Math.ceil(c*s.sy);this.#c||(a=this.#m(p,g));let _=d.getContext("2d");_.filter=this._uiManager.hcmFilter;let b="white",C="#cfcfd8";this._uiManager.hcmFilter!=="none"?C="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(b="#8f8f9d",C="#42414d");let y=15,M=y*s.sx,O=y*s.sy,A=new OffscreenCanvas(M*2,O*2),D=A.getContext("2d");D.fillStyle=b,D.fillRect(0,0,M*2,O*2),D.fillStyle=C,D.fillRect(0,0,M,O),D.fillRect(M,O,M,O),_.fillStyle=_.createPattern(A,"repeat"),_.fillRect(0,0,p,g),_.drawImage(a,0,0,a.width,a.height,0,0,p,g)}let h=null;if(n){let p,g;if(s.symmetric&&a.width<e&&a.height<e)p=a.width,g=a.height;else if(a=this.#e,r>e||o>e){let C=Math.min(e/r,e/o);p=Math.floor(r*C),g=Math.floor(o*C),this.#c||(a=this.#m(p,g))}let b=new OffscreenCanvas(p,g).getContext("2d",{willReadFrequently:!0});b.drawImage(a,0,0,a.width,a.height,0,0,p,g),h={width:p,height:g,data:b.getImageData(0,0,p,g).data}}return{canvas:d,width:l,height:c,imageData:h}}#m(e,t){let{width:n,height:r}=this.#e,o=n,s=r,a=this.#e;for(;o>2*e||s>2*t;){let l=o,c=s;o>2*e&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),s>2*t&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2));let d=new OffscreenCanvas(o,s);d.getContext("2d").drawImage(a,0,0,l,c,0,0,o,s),a=d.transferToImageBitmap()}return a}#p(){let[e,t]=this.parentDimensions,{width:n,height:r}=this,o=new Ec,s=Math.ceil(n*e*o.sx),a=Math.ceil(r*t*o.sy),l=this.#a;if(!l||l.width===s&&l.height===a)return;l.width=s,l.height=a;let c=this.#c?this.#e:this.#m(s,a),d=l.getContext("2d");d.filter=this._uiManager.hcmFilter,d.drawImage(c,0,0,c.width,c.height,0,0,s,a)}#x(e){if(e){if(this.#c){let r=this._uiManager.imageManager.getSvgUrl(this.#t);if(r)return r}let t=document.createElement("canvas");return{width:t.width,height:t.height}=this.#e,t.getContext("2d").drawImage(this.#e,0,0),t.toDataURL()}if(this.#c){let[t,n]=this.pageDimensions,r=Math.round(this.width*t*zd.PDF_TO_CSS_UNITS),o=Math.round(this.height*n*zd.PDF_TO_CSS_UNITS),s=new OffscreenCanvas(r,o);return s.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,r,o),s.transferToImageBitmap()}return structuredClone(this.#e)}static deserialize(e,t,n){return Ge(this,null,function*(){let r=null,o=!1;if(e instanceof a2){let{data:{rect:b,rotation:C,id:y,structParent:M,popupRef:O},container:A,parent:{page:{pageNumber:D}},canvas:N}=e,B,T;N?(delete e.canvas,{id:B,bitmap:T}=n.imageManager.getFromCanvas(A.id,N),N.remove()):(o=!0,e._hasNoCanvas=!0);let H=(yield t._structTree.getAriaAttributes(`${kA}${y}`))?.get("aria-label")||"";r=e={annotationType:Ut.STAMP,bitmapId:B,bitmap:T,pageIndex:D-1,rect:b.slice(0),rotation:C,id:y,deleted:!1,accessibilityData:{decorative:!1,altText:H},isSvg:!1,structParent:M,popupRef:O}}let s=yield Wl(i,this,"deserialize").call(this,e,t,n),{rect:a,bitmap:l,bitmapUrl:c,bitmapId:d,isSvg:h,accessibilityData:p}=e;o?(n.addMissingCanvas(e.id,s),s.#s=!0):d&&n.imageManager.isValidId(d)?(s.#t=d,l&&(s.#e=l)):s.#i=c,s.#c=h;let[g,_]=s.pageDimensions;return s.width=(a[2]-a[0])/g,s.height=(a[3]-a[1])/_,s.annotationElementId=e.id||null,p&&(s.altTextData=p),s._initialData=r,s.#h=!!r,s})}serialize(e=!1,t=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let n={annotationType:Ut.STAMP,bitmapId:this.#t,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#c,structTreeParentId:this._structTreeParentId};if(e)return n.bitmapUrl=this.#x(!0),n.accessibilityData=this.serializeAltText(!0),n.isCopy=!0,n;let{decorative:r,altText:o}=this.serializeAltText(!1);if(!r&&o&&(n.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){let a=this.#_(n);if(a.isSame)return null;a.isSameAltText?delete n.accessibilityData:n.accessibilityData.structParent=this._initialData.structParent??-1}if(n.id=this.annotationElementId,t===null)return n;t.stamps||=new Map;let s=this.#c?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(!t.stamps.has(this.#t))t.stamps.set(this.#t,{area:s,serialized:n}),n.bitmap=this.#x(!1);else if(this.#c){let a=t.stamps.get(this.#t);s>a.area&&(a.area=s,a.serialized.bitmap.close(),a.serialized.bitmap=this.#x(!1))}return n}#_(e){let{pageIndex:t,accessibilityData:{altText:n}}=this._initialData,r=e.pageIndex===t,o=(e.accessibilityData?.alt||"")===n;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&r&&o,isSameAltText:o}}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}},Jse=(()=>{class i{#e;#t=!1;#n=null;#i=null;#o=null;#r=new Map;#a=!1;#s=!1;#u=!1;#c=null;#h=null;#d=null;#f=null;#l;static _initialized=!1;static#g=new Map([vA,wA,OA,u2,PA].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:n,div:r,structTreeLayer:o,accessibilityManager:s,annotationLayer:a,drawLayer:l,textLayer:c,viewport:d,l10n:h}){let p=[...i.#g.values()];if(!i._initialized){i._initialized=!0;for(let g of p)g.initialize(h,t)}t.registerEditorTypes(p),this.#l=t,this.pageIndex=n,this.div=r,this.#e=s,this.#n=a,this.viewport=d,this.#d=c,this.drawLayer=l,this._structTree=o,this.#l.addLayer(this)}get isEmpty(){return this.#r.size===0}get isInvisible(){return this.isEmpty&&this.#l.getMode()===Ut.NONE}updateToolbar(t){this.#l.updateToolbar(t)}updateMode(t=this.#l.getMode()){switch(this.#v(),t){case Ut.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Ut.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Ut.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);let{classList:n}=this.div;for(let r of i.#g.values())n.toggle(`${r._type}Editing`,t===r._editorType);this.div.hidden=!1}hasTextLayer(t){return t===this.#d?.div}setEditingState(t){this.#l.setEditingState(t)}addCommands(t){this.#l.addCommands(t)}cleanUndoStack(t){this.#l.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#n?.div.classList.toggle("disabled",!t)}enable(){return Ge(this,null,function*(){this.#u=!0,this.div.tabIndex=0,this.togglePointerEvents(!0);let t=new Set;for(let r of this.#r.values())r.enableEditing(),r.show(!0),r.annotationElementId&&(this.#l.removeChangedExistingAnnotation(r),t.add(r.annotationElementId));if(!this.#n){this.#u=!1;return}let n=this.#n.getEditableAnnotations();for(let r of n){if(r.hide(),this.#l.isDeletedAnnotationElement(r.data.id)||t.has(r.data.id))continue;let o=yield this.deserialize(r);o&&(this.addOrRebuild(o),o.enableEditing())}this.#u=!1})}disable(){this.#s=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1);let t=new Map,n=new Map;for(let o of this.#r.values())if(o.disableEditing(),!!o.annotationElementId){if(o.serialize()!==null){t.set(o.annotationElementId,o);continue}else n.set(o.annotationElementId,o);this.getEditableAnnotation(o.annotationElementId)?.show(),o.remove()}if(this.#n){let o=this.#n.getEditableAnnotations();for(let s of o){let{id:a}=s.data;if(this.#l.isDeletedAnnotationElement(a))continue;let l=n.get(a);if(l){l.resetAnnotationElement(s),l.show(!1),s.show();continue}l=t.get(a),l&&(this.#l.addChangedExistingAnnotation(l),l.renderAnnotationElement(s)&&l.show(!1)),s.show()}}this.#v(),this.isEmpty&&(this.div.hidden=!0);let{classList:r}=this.div;for(let o of i.#g.values())r.remove(`${o._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#s=!1}getEditableAnnotation(t){return this.#n?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#l.getActive()!==t&&this.#l.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#d?.div&&!this.#f){this.#f=new AbortController;let t=this.#l.combinedSignal(this.#f);this.#d.div.addEventListener("pointerdown",this.#m.bind(this),{signal:t}),this.#d.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#d?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#d.div.classList.remove("highlighting"))}#m(t){this.#l.unselectAll();let{target:n}=t;if(n===this.#d.div||(n.getAttribute("role")==="img"||n.classList.contains("endOfContent"))&&this.#d.div.contains(n)){let{isMac:r}=vr.platform;if(t.button!==0||t.ctrlKey&&r)return;this.#l.showAllEditors("highlight",!0,!0),this.#d.div.classList.add("free"),this.toggleDrawing(),u2.startHighlighting(this,this.#l.direction==="ltr",{target:this.#d.div,x:t.x,y:t.y}),this.#d.div.addEventListener("pointerup",()=>{this.#d.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#l._signal}),t.preventDefault()}}enableClick(){if(this.#i)return;this.#i=new AbortController;let t=this.#l.combinedSignal(this.#i);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});let n=this.pointerup.bind(this);this.div.addEventListener("pointerup",n,{signal:t}),this.div.addEventListener("pointercancel",n,{signal:t})}disableClick(){this.#i?.abort(),this.#i=null}attach(t){this.#r.set(t.id,t);let{annotationElementId:n}=t;n&&this.#l.isDeletedAnnotationElement(n)&&this.#l.removeDeletedAnnotationElement(t)}detach(t){this.#r.delete(t.id),this.#e?.removePointerInTextLayer(t.contentDiv),!this.#s&&t.annotationElementId&&this.#l.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#l.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#l.addDeletedAnnotationElement(t.annotationElementId),ci.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#l.addEditor(t),this.attach(t),!t.isAttachedToDOM){let n=t.render();this.div.append(n),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#u),this.#l.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;let{activeElement:n}=document;t.div.contains(n)&&!this.#o&&(t._focusEventsAllowed=!1,this.#o=setTimeout(()=>{this.#o=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#l._signal}),n.focus())},0)),t._structTreeParentId=this.#e?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){let n=()=>t._uiManager.rebuild(t),r=()=>{t.remove()};this.addCommands({cmd:n,undo:r,mustExec:!1})}getNextId(){return this.#l.getId()}get#p(){return i.#g.get(this.#l.getMode())}combinedSignal(t){return this.#l.combinedSignal(t)}#x(t){let n=this.#p;return n?new n.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#p?.canCreateNewEmptyEditor()}pasteEditor(t,n){return Ge(this,null,function*(){this.updateToolbar(t),yield this.#l.updateMode(t.mode);let{offsetX:r,offsetY:o}=this.#_(),s=this.getNextId(),a=this.#x(Ie({parent:this,id:s,x:r,y:o,uiManager:this.#l,isCentered:!0},n));a&&this.add(a)})}deserialize(t){return Ge(this,null,function*(){return(yield i.#g.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#l))||null})}createAndAddNewEditor(t,n,r={}){let o=this.getNextId(),s=this.#x(Ie({parent:this,id:o,x:t.offsetX,y:t.offsetY,uiManager:this.#l,isCentered:n},r));return s&&this.add(s),s}#_(){let{x:t,y:n,width:r,height:o}=this.div.getBoundingClientRect(),s=Math.max(0,t),a=Math.max(0,n),l=Math.min(window.innerWidth,t+r),c=Math.min(window.innerHeight,n+o),d=(s+l)/2-t,h=(a+c)/2-n,[p,g]=this.viewport.rotation%180===0?[d,h]:[h,d];return{offsetX:p,offsetY:g}}addNewEditor(t={}){this.createAndAddNewEditor(this.#_(),!0,t)}setSelected(t){this.#l.setSelected(t)}toggleSelected(t){this.#l.toggleSelected(t)}unselect(t){this.#l.unselect(t)}pointerup(t){let{isMac:n}=vr.platform;if(t.button!==0||t.ctrlKey&&n||t.target!==this.div||!this.#a||(this.#a=!1,this.#p?.isDrawer&&this.#p.supportMultipleDrawings))return;if(!this.#t){this.#t=!0;return}let r=this.#l.getMode();if(r===Ut.STAMP||r===Ut.SIGNATURE){this.#l.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#l.getMode()===Ut.HIGHLIGHT&&this.enableTextSelection(),this.#a){this.#a=!1;return}let{isMac:n}=vr.platform;if(t.button!==0||t.ctrlKey&&n||t.target!==this.div)return;if(this.#a=!0,this.#p?.isDrawer){this.startDrawingSession(t);return}let r=this.#l.getActive();this.#t=!r||r.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#c){this.#p.startDrawing(this,this.#l,!1,t);return}this.#l.setCurrentDrawingSession(this),this.#c=new AbortController;let n=this.#l.combinedSignal(this.#c);this.div.addEventListener("blur",({relatedTarget:r})=>{r&&!this.div.contains(r)&&(this.#h=null,this.commitOrRemove())},{signal:n}),this.#p.startDrawing(this,this.#l,!1,t)}pause(t){if(t){let{activeElement:n}=document;this.div.contains(n)&&(this.#h=n);return}this.#h&&setTimeout(()=>{this.#h?.focus(),this.#h=null},0)}endDrawingSession(t=!1){return this.#c?(this.#l.setCurrentDrawingSession(null),this.#c.abort(),this.#c=null,this.#h=null,this.#p.endDrawing(t)):null}findNewParent(t,n,r){let o=this.#l.findParent(n,r);return o===null||o===this?!1:(o.changeParent(t),!0)}commitOrRemove(){return this.#c?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#c&&this.#p.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#l.getActive()?.parent===this&&(this.#l.commitOrRemove(),this.#l.setActiveEditor(null)),this.#o&&(clearTimeout(this.#o),this.#o=null);for(let t of this.#r.values())this.#e?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#r.clear(),this.#l.removeLayer(this)}#v(){for(let t of this.#r.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,P0(this.div,t);for(let n of this.#l.getEditors(this.pageIndex))this.add(n),n.rebuild();this.updateMode()}update({viewport:t}){this.#l.commitOrRemove(),this.#v();let n=this.viewport.rotation,r=t.rotation;if(this.viewport=t,P0(this.div,{rotation:r}),n!==r)for(let o of this.#r.values())o.rotate(r)}get pageDimensions(){let{pageWidth:t,pageHeight:n}=this.viewport.rawDims;return[t,n]}get scale(){return this.#l.viewParameters.realScale}}return i})(),SA=class i{#e=null;#t=new Map;#n=new Map;static#i=0;constructor({pageIndex:e}){this.pageIndex=e}setParent(e){if(!this.#e){this.#e=e;return}if(this.#e!==e){if(this.#t.size>0)for(let t of this.#t.values())t.remove(),e.append(t);this.#e=e}}static get _svgFactory(){return gn(this,"_svgFactory",new ag)}static#o(e,[t,n,r,o]){let{style:s}=e;s.top=`${100*n}%`,s.left=`${100*t}%`,s.width=`${100*r}%`,s.height=`${100*o}%`}#r(){let e=i._svgFactory.create(1,1,!0);return this.#e.append(e),e.setAttribute("aria-hidden",!0),e}#a(e,t){let n=i._svgFactory.createElement("clipPath");e.append(n);let r=`clip_${t}`;n.setAttribute("id",r),n.setAttribute("clipPathUnits","objectBoundingBox");let o=i._svgFactory.createElement("use");return n.append(o),o.setAttribute("href",`#${t}`),o.classList.add("clip"),r}#s(e,t){for(let[n,r]of Object.entries(t))r===null?e.removeAttribute(n):e.setAttribute(n,r)}draw(e,t=!1,n=!1){let r=i.#i++,o=this.#r(),s=i._svgFactory.createElement("defs");o.append(s);let a=i._svgFactory.createElement("path");s.append(a);let l=`path_p${this.pageIndex}_${r}`;a.setAttribute("id",l),a.setAttribute("vector-effect","non-scaling-stroke"),t&&this.#n.set(r,a);let c=n?this.#a(s,l):null,d=i._svgFactory.createElement("use");return o.append(d),d.setAttribute("href",`#${l}`),this.updateProperties(o,e),this.#t.set(r,o),{id:r,clipPathId:`url(#${c})`}}drawOutline(e,t){let n=i.#i++,r=this.#r(),o=i._svgFactory.createElement("defs");r.append(o);let s=i._svgFactory.createElement("path");o.append(s);let a=`path_p${this.pageIndex}_${n}`;s.setAttribute("id",a),s.setAttribute("vector-effect","non-scaling-stroke");let l;if(t){let h=i._svgFactory.createElement("mask");o.append(h),l=`mask_p${this.pageIndex}_${n}`,h.setAttribute("id",l),h.setAttribute("maskUnits","objectBoundingBox");let p=i._svgFactory.createElement("rect");h.append(p),p.setAttribute("width","1"),p.setAttribute("height","1"),p.setAttribute("fill","white");let g=i._svgFactory.createElement("use");h.append(g),g.setAttribute("href",`#${a}`),g.setAttribute("stroke","none"),g.setAttribute("fill","black"),g.setAttribute("fill-rule","nonzero"),g.classList.add("mask")}let c=i._svgFactory.createElement("use");r.append(c),c.setAttribute("href",`#${a}`),l&&c.setAttribute("mask",`url(#${l})`);let d=c.cloneNode();return r.append(d),c.classList.add("mainOutline"),d.classList.add("secondaryOutline"),this.updateProperties(r,e),this.#t.set(n,r),n}finalizeDraw(e,t){this.#n.delete(e),this.updateProperties(e,t)}updateProperties(e,t){if(!t)return;let{root:n,bbox:r,rootClass:o,path:s}=t,a=typeof e=="number"?this.#t.get(e):e;if(a){if(n&&this.#s(a,n),r&&i.#o(a,r),o){let{classList:l}=a;for(let[c,d]of Object.entries(o))l.toggle(c,d)}if(s){let c=a.firstChild.firstChild;this.#s(c,s)}}}updateParent(e,t){if(t===this)return;let n=this.#t.get(e);n&&(t.#e.append(n),this.#t.delete(e),t.#t.set(e,n))}remove(e){this.#n.delete(e),this.#e!==null&&(this.#t.get(e).remove(),this.#t.delete(e))}destroy(){this.#e=null;for(let e of this.#t.values())e.remove();this.#t.clear(),this.#n.clear()}};globalThis._pdfjsTestingUtils={HighlightOutliner:wx};globalThis.pdfjsLib={AbortException:Ol,AnnotationEditorLayer:Jse,AnnotationEditorParamsType:mn,AnnotationEditorType:Ut,AnnotationEditorUIManager:px,AnnotationLayer:_A,AnnotationMode:Ld,AnnotationType:or,build:Xse,ColorPicker:d2,createValidAbsoluteUrl:BR,DOMSVGFactory:ag,DrawLayer:SA,FeatureTest:vr,fetchData:Ox,getDocument:IA,getFilenameFromUrl:Ese,getPdfFilenameFromUrl:Pse,getUuid:RR,getXfaPageViewport:Sse,GlobalWorkerOptions:Mc,ImageKind:Ty,InvalidPDFException:hx,isDataScheme:x2,isPdfFile:AA,isValidExplicitDest:Ise,MathClamp:po,noContextMenu:Ia,normalizeUnicode:yse,OPS:By,OutputScale:Ec,PasswordResponses:gse,PDFDataRangeTransport:Jy,PDFDateString:Ry,PDFWorker:bx,PermissionFlag:fse,PixelsPerInch:zd,RenderingCancelledException:gx,ResponseException:sg,setLayerDimensions:P0,shadow:gn,SignatureExtractor:Rd,stopEvent:sr,SupportedImageMimeTypes:lk,TextLayer:_x,TouchManager:zy,updateUrlHash:NR,Util:Mt,VerbosityLevel:g2,version:Yse,XfaLayer:e2};function eae(i,e){if(i&1){let t=Ae();u(0,"div",46)(1,"span",4),m(2,"Fosforlu Renkler:"),f(),u(3,"button",47),U("click",function(){K(t);let r=F();return Y(r.fosforluKalemModunuAc("sari"))}),f(),u(4,"button",48),U("click",function(){K(t);let r=F();return Y(r.fosforluKalemModunuAc("yesil"))}),f(),u(5,"button",49),U("click",function(){K(t);let r=F();return Y(r.fosforluKalemModunuAc("pembe"))}),f(),u(6,"button",50),U("click",function(){K(t);let r=F();return Y(r.fosforluKalemModunuAc("mavi"))}),f(),u(7,"button",51),U("click",function(){K(t);let r=F();return Y(r.fosforluKalemModunuAc("turuncu"))}),f()()}if(i&2){let t=F();x(3),xe("aktif",t.secilenFosforluRenk===t.fosforluRenkler.sari),x(),xe("aktif",t.secilenFosforluRenk===t.fosforluRenkler.yesil),x(),xe("aktif",t.secilenFosforluRenk===t.fosforluRenkler.pembe),x(),xe("aktif",t.secilenFosforluRenk===t.fosforluRenkler.mavi),x(),xe("aktif",t.secilenFosforluRenk===t.fosforluRenkler.turuncu)}}function tae(i,e){if(i&1&&(u(0,"option",16),m(1),f()),i&2){let t=e.$implicit;S("value",t),x(),W(t)}}function nae(i,e){if(i&1&&k(0,"canvas",52),i&2){let t=e.index,n=F();It("display",n.currentPage===t+1?"block":"none"),S("id","canvas-"+(t+1))}}function iae(i,e){if(i&1){let t=Ae();u(0,"div",40)(1,"span",41),m(2,"PDF:"),f(),u(3,"button",42),U("click",function(){K(t);let r=F();return Y(r.pdfSayfasiDegistir(1))}),u(4,"i",12),m(5,"\u23EE\uFE0F"),f(),m(6," \u0130lk "),f(),u(7,"button",43),U("click",function(){K(t);let r=F();return Y(r.oncekiPdfSayfasi())}),u(8,"i",12),m(9,"\u25C0\uFE0F"),f(),m(10," \xD6nceki "),f(),u(11,"span",44),m(12),f(),u(13,"button",43),U("click",function(){K(t);let r=F();return Y(r.sonrakiPdfSayfasi())}),u(14,"i",12),m(15,"\u25B6\uFE0F"),f(),m(16," Sonraki "),f(),u(17,"button",42),U("click",function(){K(t);let r=F();return Y(r.pdfSayfasiDegistir(r.pdfSayfaSayisi))}),u(18,"i",12),m(19,"\u23ED\uFE0F"),f(),m(20," Son "),f()()}if(i&2){let t=F();x(7),S("disabled",t.seciliPdfSayfasi<=1),x(5),hn("",t.seciliPdfSayfasi," / ",t.pdfSayfaSayisi,""),x(),S("disabled",t.seciliPdfSayfasi>=t.pdfSayfaSayisi)}}var v2=class i{constructor(e){this.http=e;Mc.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js"}canvasInstances=[];sayfalar=[{}];currentPage=1;totalPages=1;ogrenciGruplari=[];secilenGrup="";kaydetmeIsleminde=!1;kalemRengi="#000000";kalemKalinligi=4;isTamEkran=!1;kalemKalinlikSecenekleri=[2,4,8,12,16];cizilebilir=!0;silgiModu=!1;fosforluKalemModu=!1;oncekiKalemRengi="#000000";oncekiKalemKalinligi=2;fosforluRenkler={sari:"#ffff0080",yesil:"#00ff0080",pembe:"#ff00ff80",mavi:"#00ffff80",turuncu:"#ffa50080"};secilenFosforluRenk="#ffff0080";sekilModu=!1;secilenSekil="";geciciSekil=null;baslangicX=0;baslangicY=0;textModu=!1;textBoyutu=24;textFontu="Arial";resimYukleniyor=!1;pdfYukleniyor=!1;yuklenenPdf=null;pdfSayfaSayisi=0;seciliPdfSayfasi=1;ngOnInit(){document.body.classList.add("kalem-aktif"),this.getOgrenciGruplari()}getOgrenciGruplari(){let e="/server/api/ogrenciler_listesi.php";console.log("\xD6\u011Frenci gruplar\u0131 y\xFCkleniyor...");let t="",n=null,r=localStorage.getItem("user")||sessionStorage.getItem("user");r&&(n=JSON.parse(r),t=n.token||""),console.log("\xD6\u011Frenci gruplar\u0131 API iste\u011Fi g\xF6nderiliyor:",e),this.http.get(e,{headers:{Authorization:`Bearer ${t}`}}).subscribe({next:o=>{if(console.log("API yan\u0131t\u0131:",o),o&&o.success&&o.data){let s=n?.adi_soyadi||"",a=o.data.filter(h=>h.rutbe==="ogrenci"&&h.ogretmeni===s),l=new Set;a.forEach(h=>{h.grubu&&typeof h.grubu=="string"&&h.grubu.trim()!==""&&l.add(h.grubu)}),this.ogrenciGruplari=Array.from(l).sort();let d=new Date().getFullYear();this.ogrenciGruplari.sort((h,p)=>{let g=h.includes(d.toString()),_=p.includes(d.toString());return g&&!_?-1:!g&&_?1:h.localeCompare(p)}),console.log("\xD6\u011Fretmenin gruplar\u0131 y\xFCklendi:",this.ogrenciGruplari),console.log("\xD6\u011Fretmen ad\u0131:",s)}},error:o=>{console.error("Gruplar\u0131 getirme hatas\u0131:",o),o.status===0&&console.warn("A\u011F hatas\u0131 veya CORS sorunu olabilir. Alternatif \xE7\xF6z\xFCm uygulan\u0131yor..."),this.ogrenciGruplari=[],console.log("Hata nedeniyle grup listesi bo\u015F b\u0131rak\u0131ld\u0131")}})}ngAfterViewInit(){setTimeout(()=>{this.canvasOlustur(1)},500)}pdfYukle(e){let t=e.target;if(t.files&&t.files.length>0){this.pdfYukleniyor=!0;let n=t.files[0],r=25*1024*1024;if(n.size>r){alert("PDF dosyas\u0131 \xE7ok b\xFCy\xFCk! Maksimum 25MB olmal\u0131."),this.pdfYukleniyor=!1,t.value="";return}if(n.type!=="application/pdf"){alert("L\xFCtfen sadece PDF dosyas\u0131 se\xE7in!"),this.pdfYukleniyor=!1,t.value="";return}let o=new FileReader;o.onload=s=>Ge(this,null,function*(){try{let a=s.target?.result;if(!a||a.byteLength===0)throw new Error("PDF dosyas\u0131 bo\u015F veya okunamad\u0131");let l=yield IA(a).promise;this.yuklenenPdf=l,this.pdfSayfaSayisi=l.numPages,this.seciliPdfSayfasi=1,yield this.pdfSayfasiniYukle(1),console.log("PDF ba\u015Far\u0131yla y\xFCklendi:",l.numPages,"sayfa"),this.pdfYukleniyor=!1}catch(a){console.error("PDF y\xFCkleme hatas\u0131:",a),alert("PDF dosyas\u0131 y\xFCklenemedi! Dosya bozuk olabilir."),this.pdfYukleniyor=!1}}),o.onerror=()=>{console.error("PDF okuma hatas\u0131"),alert("PDF dosyas\u0131 okunamad\u0131!"),this.pdfYukleniyor=!1},o.readAsArrayBuffer(n),t.value=""}}pdfSayfasiniYukle(e){return Ge(this,null,function*(){if(this.yuklenenPdf)try{let t=yield this.yuklenenPdf.getPage(e),n=this.canvasInstances[this.currentPage-1];if(!n)return;let r=t.getViewport({scale:1}),o=Math.min(n.width/r.width,n.height/r.height)*.9,s=t.getViewport({scale:o}),a=document.createElement("canvas"),l=a.getContext("2d");a.width=s.width,a.height=s.height,yield t.render({canvasContext:l,viewport:s}).promise;let c=a.toDataURL();ao.fromURL(c,{crossOrigin:"anonymous"},d=>{this.sekilModu=!1,this.secilenSekil="",n.isDrawingMode=!1,d.set({left:(n.width-s.width)/2,top:(n.height-s.height)/2,selectable:!0,hasControls:!0,hasBorders:!0}),n.add(d),n.setActiveObject(d),n.renderAll()}),this.seciliPdfSayfasi=e}catch(t){console.error("PDF sayfa y\xFCkleme hatas\u0131:",t),alert("PDF sayfas\u0131 y\xFCklenemedi!")}})}pdfSayfasiDegistir(e){e>=1&&e<=this.pdfSayfaSayisi&&this.pdfSayfasiniYukle(e)}oncekiPdfSayfasi(){this.seciliPdfSayfasi>1&&this.pdfSayfasiDegistir(this.seciliPdfSayfasi-1)}sonrakiPdfSayfasi(){this.seciliPdfSayfasi<this.pdfSayfaSayisi&&this.pdfSayfasiDegistir(this.seciliPdfSayfasi+1)}resimYukle(e){let t=e.target;if(t.files&&t.files.length>0){this.resimYukleniyor=!0;let n=new FileReader;n.onload=r=>{let o=new Image;o.onload=()=>{let s=this.canvasInstances[this.currentPage-1];if(s){this.sekilModu=!1,this.secilenSekil="",s.isDrawingMode=!1;let a=Math.min(o.width,s.width*.8),l=o.height*(a/o.width);ao.fromURL(r.target?.result,{crossOrigin:"anonymous"},c=>{c.set({left:(s.width-a)/2,top:(s.height-l)/2,scaleX:a/(c.width||1),scaleY:l/(c.height||1),selectable:!0,hasControls:!0,hasBorders:!0}),s.add(c),s.setActiveObject(c),s.renderAll(),this.resimYukleniyor=!1})}else console.error("Canvas bulunamad\u0131"),this.resimYukleniyor=!1},o.src=r.target?.result},n.onerror=()=>{console.error("Resim y\xFCkleme hatas\u0131"),this.resimYukleniyor=!1},n.readAsDataURL(t.files[0]),t.value=""}}sekilSec(e){this.secilenSekil===e?(this.secilenSekil="",this.sekilModu=!1,this.kalemModunuAc()):(this.secilenSekil=e,this.sekilModu=!0,this.silgiModu=!1,this.fosforluKalemModu=!1,this.cizilebilir=!1,document.body.classList.remove("kalem-aktif","silgi-aktif","el-imleci-aktif","fosforlu-kalem-aktif"),document.body.classList.add("sekil-ciz-aktif"),this.ayarlaSekilOlaylari())}ayarlaSekilOlaylari(){let e=this.canvasInstances[this.currentPage-1];e&&(e.off("mouse:down"),e.off("mouse:move"),e.off("mouse:up"),e.isDrawingMode=!1,e.on("mouse:down",t=>{let n=e.getPointer(t.e);this.baslangicX=n.x,this.baslangicY=n.y,this.geciciSekil=this.sekilOlustur(this.secilenSekil,n.x,n.y,n.x,n.y),this.geciciSekil&&e.add(this.geciciSekil)}),e.on("mouse:move",t=>{if(!this.geciciSekil)return;let n=e.getPointer(t.e);this.sekilGuncelle(this.geciciSekil,this.secilenSekil,this.baslangicX,this.baslangicY,n.x,n.y),e.renderAll()}),e.on("mouse:up",()=>{this.geciciSekil=null}))}sekilOlustur(e,t,n,r,o){if(!this.canvasInstances[this.currentPage-1])return null;let a=null;switch(e){case"cizgi":a=new uo([t,n,r,o],{stroke:this.kalemRengi,strokeWidth:this.kalemKalinligi,selectable:!0});break;case"dikdortgen":a=new co({left:Math.min(t,r),top:Math.min(n,o),width:Math.abs(r-t),height:Math.abs(o-n),stroke:this.kalemRengi,strokeWidth:this.kalemKalinligi,fill:"transparent",selectable:!0});break;case"daire":let l=Math.sqrt(Math.pow(r-t,2)+Math.pow(o-n,2))/2,c=(t+r)/2,d=(n+o)/2;a=new No({left:c-l,top:d-l,radius:l,stroke:this.kalemRengi,strokeWidth:this.kalemKalinligi,fill:"transparent",selectable:!0});break;case"ok":let h=new uo([t,n,r,o],{stroke:this.kalemRengi,strokeWidth:this.kalemKalinligi,selectable:!0}),p=Math.atan2(o-n,r-t),g=15,_=Math.PI/6,b=r-g*Math.cos(p-_),C=o-g*Math.sin(p-_),y=r-g*Math.cos(p+_),M=o-g*Math.sin(p+_),O=[{x:r,y:o},{x:b,y:C},{x:y,y:M}],A=new xl(O,{fill:this.kalemRengi,stroke:this.kalemRengi,strokeWidth:1,selectable:!0});a=new jo([h,A],{selectable:!0});break;case"ucgen":a=new zs({left:Math.min(t,r),top:Math.min(n,o),width:Math.abs(r-t),height:Math.abs(o-n),stroke:this.kalemRengi,strokeWidth:this.kalemKalinligi,fill:"transparent",selectable:!0});break}return a}sekilGuncelle(e,t,n,r,o,s){if(e)switch(t){case"cizgi":e instanceof uo&&e.set({x2:o,y2:s});break;case"dikdortgen":e instanceof co&&e.set({left:Math.min(n,o),top:Math.min(r,s),width:Math.abs(o-n),height:Math.abs(s-r)});break;case"daire":if(e instanceof No){let a=Math.sqrt(Math.pow(o-n,2)+Math.pow(s-r,2))/2,l=(n+o)/2,c=(r+s)/2;e.set({left:l-a,top:c-a,radius:a})}break;case"ok":if(e instanceof jo){let a=e.getObjects()[0];a&&a.set({x2:o,y2:s});let l=Math.atan2(s-r,o-n),c=15,d=Math.PI/6,h=o-c*Math.cos(l-d),p=s-c*Math.sin(l-d),g=o-c*Math.cos(l+d),_=s-c*Math.sin(l+d),b=e.getObjects()[1];b&&b.set("points",[{x:o,y:s},{x:h,y:p},{x:g,y:_}]),e.setCoords()}break;case"ucgen":e instanceof zs&&e.set({left:Math.min(n,o),top:Math.min(r,s),width:Math.abs(o-n),height:Math.abs(s-r)});break}}onResize(){this.canvasInstances.forEach((e,t)=>{e&&this.canvasBoyutlandir(t+1)})}hizliRenkSec(e){this.kalemRengi=e,this.silgiModu=!1,this.ayarlaKalemOzellikleri(),document.body.classList.add("kalem-aktif"),document.body.classList.remove("silgi-aktif")}canvasOlustur(e){try{let t=`canvas-${e}`,n=document.getElementById(t);if(!n){console.error(`Canvas element ${t} bulunamad\u0131`);return}let r=window.innerWidth,o=Math.min(r-40,1400),s=o*1.414;n.width=o,n.height=s,n.style.marginTop="5px",n.style.marginBottom="10px";let a=new kd(t,{isDrawingMode:!0,width:o,height:s,selection:!1,renderOnAddRemove:!0,interactive:!0,backgroundColor:"#ffffff",preserveObjectStacking:!0});this.canvasInstances.length<e?this.canvasInstances.push(a):this.canvasInstances[e-1]=a,a.freeDrawingBrush=new _c(a),a.freeDrawingBrush.color=this.kalemRengi,a.freeDrawingBrush.width=this.kalemKalinligi,a.isDrawingMode=!0,a.on("path:created",l=>{console.log("Yeni \xE7izim olu\u015Fturuldu:",l)}),console.log(`Canvas ${e} olu\u015Fturuldu - \xC7izim modu: ${a.isDrawingMode}, Brush: ${a.freeDrawingBrush?"var":"yok"}`)}catch(t){console.error(`Canvas ${e} olu\u015Fturma hatas\u0131:`,t)}}canvasBoyutlandir(e){let t=this.canvasInstances[e-1];if(t)try{let n=window.innerWidth,r=Math.min(n-40,1400),o=r*1.414;t.setDimensions({width:r,height:o});let s=document.getElementById(`canvas-${e}`);s&&(s.width=r,s.height=o),t.renderAll()}catch(n){console.error(`Canvas ${e} boyutland\u0131rma hatas\u0131:`,n)}}sayfaEkle(){this.sayfalar.push({}),this.totalPages=this.sayfalar.length,this.currentPage=this.totalPages,this.sayfayaGit(this.currentPage),setTimeout(()=>{this.canvasOlustur(this.currentPage),setTimeout(()=>{let e=document.getElementById(`canvas-${this.currentPage}`);e&&(e.scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"}))},300)},100)}sayfaBas(){this.currentPage!==1&&(this.currentPage=1,this.sayfayaGit(1))}oncekiSayfa(){this.currentPage>1&&(this.currentPage--,this.sayfayaGit(this.currentPage))}sonrakiSayfa(){this.currentPage<this.totalPages&&(this.currentPage++,this.sayfayaGit(this.currentPage))}sayfaSon(){this.currentPage!==this.totalPages&&(this.currentPage=this.totalPages,this.sayfayaGit(this.totalPages))}sayfayaGit(e){this.currentPage=e,setTimeout(()=>{this.canvasInstances[e-1]?this.ayarlaKalemOzellikleri(e):this.canvasOlustur(e)},50)}temizleSayfa(){let e=this.canvasInstances[this.currentPage-1];e&&(e.clear(),e.backgroundColor="#ffffff",e.isDrawingMode=!0,e.freeDrawingBrush=new _c(e),e.freeDrawingBrush.color=this.kalemRengi,e.freeDrawingBrush.width=this.kalemKalinligi,e.renderAll())}toggleCizim(){this.sekilModu=!1,this.secilenSekil="",this.cizilebilir=!this.cizilebilir;let e=this.canvasInstances[this.currentPage-1];e&&(e.isDrawingMode=this.cizilebilir,this.cizilebilir||(e.off("mouse:down"),e.off("mouse:move"),e.off("mouse:up"))),this.cizilebilir?this.silgiModu?(document.body.classList.add("silgi-aktif"),document.body.classList.remove("kalem-aktif","el-imleci-aktif","sekil-ciz-aktif","fosforlu-kalem-aktif")):this.fosforluKalemModu?(document.body.classList.add("fosforlu-kalem-aktif"),document.body.classList.remove("kalem-aktif","silgi-aktif","el-imleci-aktif","sekil-ciz-aktif")):(document.body.classList.add("kalem-aktif"),document.body.classList.remove("silgi-aktif","el-imleci-aktif","sekil-ciz-aktif","fosforlu-kalem-aktif")):(document.body.classList.remove("kalem-aktif","silgi-aktif","sekil-ciz-aktif","fosforlu-kalem-aktif"),document.body.classList.add("el-imleci-aktif")),console.log("\xC7izim modu de\u011Fi\u015Ftirildi:",this.cizilebilir?"Kalem/Silgi/Fosforlu Aktif":"El \u0130mleci Aktif")}ayarlaKalemOzellikleri(e){let t=e||this.currentPage,n=this.canvasInstances[t-1];if(!n){console.log(`Canvas ${t} hen\xFCz haz\u0131r de\u011Fil`);return}n.isDrawingMode=this.cizilebilir,n.freeDrawingBrush=new _c(n),n.freeDrawingBrush.color=this.kalemRengi,n.freeDrawingBrush.width=this.kalemKalinligi,n.renderAll(),console.log(`Canvas ${t} kalem ayarlar\u0131 g\xFCncellendi - Renk: ${this.kalemRengi}, Kal\u0131nl\u0131k: ${this.kalemKalinligi}, \xC7izim Modu: ${n.isDrawingMode}`)}silgiModunuAc(){if(this.sekilModu=!1,this.secilenSekil="",this.cizilebilir=!0,this.fosforluKalemModu=!1,!this.silgiModu){this.silgiModu=!0,this.oncekiKalemRengi=this.kalemRengi,this.oncekiKalemKalinligi=this.kalemKalinligi,this.kalemRengi="#ffffff",this.kalemKalinligi=Math.max(20,this.kalemKalinligi),this.ayarlaKalemOzellikleri(),document.body.classList.add("silgi-aktif"),document.body.classList.remove("kalem-aktif","el-imleci-aktif","sekil-ciz-aktif","fosforlu-kalem-aktif");let e=this.canvasInstances[this.currentPage-1];e&&(e.off("mouse:down"),e.off("mouse:move"),e.off("mouse:up"),e.isDrawingMode=!0)}}kalemModunuAc(){this.silgiModu=!1,this.fosforluKalemModu=!1,this.sekilModu=!1,this.secilenSekil="",this.textModu=!1,this.cizilebilir=!0,this.oncekiKalemRengi!=="#ffffff"?this.kalemRengi=this.oncekiKalemRengi:this.kalemRengi="#000000",this.kalemKalinligi=this.oncekiKalemKalinligi||4;let e=this.canvasInstances[this.currentPage-1];e&&(e.off("mouse:down"),e.off("mouse:move"),e.off("mouse:up"),e.isDrawingMode=!0,e.selection=!1,e.freeDrawingBrush=new _c(e),e.freeDrawingBrush.color=this.kalemRengi,e.freeDrawingBrush.width=this.kalemKalinligi,e.renderAll(),console.log(`Kalem modu aktif - Renk: ${this.kalemRengi}, Kal\u0131nl\u0131k: ${this.kalemKalinligi}, \xC7izim Modu: ${e.isDrawingMode}`)),document.body.classList.add("kalem-aktif"),document.body.classList.remove("silgi-aktif","el-imleci-aktif","sekil-ciz-aktif","fosforlu-kalem-aktif","text-aktif"),console.log("Kalem modu ba\u015Far\u0131yla aktifle\u015Ftirildi")}fosforluKalemModunuAc(e){this.silgiModu=!1,this.sekilModu=!1,this.secilenSekil="",this.textModu=!1,this.cizilebilir=!0,this.fosforluKalemModu=!0,this.fosforluKalemModu||(this.oncekiKalemRengi=this.kalemRengi,this.oncekiKalemKalinligi=this.kalemKalinligi),e&&this.fosforluRenkler[e]&&(this.secilenFosforluRenk=this.fosforluRenkler[e]),this.kalemRengi=this.secilenFosforluRenk,this.kalemKalinligi=16,this.ayarlaKalemOzellikleri(),document.body.classList.add("fosforlu-kalem-aktif"),document.body.classList.remove("kalem-aktif","silgi-aktif","el-imleci-aktif","sekil-ciz-aktif","text-aktif");let t=this.canvasInstances[this.currentPage-1];t&&(t.off("mouse:down"),t.off("mouse:move"),t.off("mouse:up"),t.isDrawingMode=!0,t.freeDrawingBrush&&(t.freeDrawingBrush.color=this.secilenFosforluRenk,t.freeDrawingBrush.width=16))}textModunuAc(){this.textModu=!0,this.silgiModu=!1,this.fosforluKalemModu=!1,this.sekilModu=!1,this.secilenSekil="",this.cizilebilir=!1,document.body.classList.add("text-aktif"),document.body.classList.remove("kalem-aktif","silgi-aktif","el-imleci-aktif","sekil-ciz-aktif","fosforlu-kalem-aktif"),this.ayarlaTextOlaylari()}ayarlaTextOlaylari(){let e=this.canvasInstances[this.currentPage-1];e&&(e.off("mouse:down"),e.off("mouse:move"),e.off("mouse:up"),e.isDrawingMode=!1,e.on("mouse:down",t=>{let n=e.getPointer(t.e),r=prompt("Yaz\u0131lacak metni girin:");if(r&&r.trim()!==""){let o=new Bo(r,{left:n.x,top:n.y,fontFamily:this.textFontu,fontSize:this.textBoyutu,fill:this.kalemRengi,selectable:!0,editable:!0});e.add(o),e.setActiveObject(o),e.renderAll()}}))}indirPDF(){this.kaydetmeIsleminde=!0;try{let e=new _t({orientation:"portrait",unit:"mm",format:"a4",compress:!0}),t=n=>Ge(this,null,function*(){if(n>this.totalPages){let r=new Date,o=`${r.getFullYear()}${(r.getMonth()+1).toString().padStart(2,"0")}${r.getDate().toString().padStart(2,"0")}`,s=this.secilenGrup?`${this.secilenGrup.replace(/\s+/g,"_")}_${o}.pdf`:`ders_notu_${o}.pdf`;e.save(s),this.kaydetmeIsleminde=!1;return}this.sayfayaGit(n),setTimeout(()=>Ge(this,null,function*(){let r=this.canvasInstances[n-1];if(r){r.backgroundColor="#ffffff",r.renderAll(),r.backgroundColor="#ffffff",r.renderAll();let o=r.toDataURL({format:"jpeg",quality:.8,multiplier:1}),s=r.width||1200,a=r.height||600,l=s/a;n>1&&e.addPage();let c=210,d=297,h=8,p=c-h*2,g=d-h*2-10,_,b;l>p/g?(_=p,b=p/l):(b=g,_=g*l);let C=h+(p-_)/2,y=h+8+(g-b)/2;e.addImage(o,"JPEG",C,y,_,b,void 0,"MEDIUM"),e.setTextColor(0,0,0),e.setFontSize(11),e.setFont("helvetica","bold"),e.text("Ayta\xE7 Baydar || Kimya \xD6gretmeni",h,h+5),e.setLineWidth(.4),e.line(h,h+7,c-h,h+7),e.setFontSize(10),e.setFont("helvetica","normal");let M=`${n} / ${this.totalPages}`,O=e.getTextWidth(M);e.text(M,(c-O)/2,d-5),t(n+1)}else console.error(`Canvas ${n} bulunamad\u0131`),t(n+1)}),200)});t(1)}catch(e){console.error("PDF olu\u015Fturma hatas\u0131:",e),alert("PDF olu\u015Fturulurken bir hata olu\u015Ftu!"),this.kaydetmeIsleminde=!1}}veritabaninaKaydet(){if(!this.secilenGrup){alert("L\xFCtfen bir \xF6\u011Frenci grubu se\xE7in!");return}this.kaydetmeIsleminde=!0,console.log("Kaydetme i\u015Flemi ba\u015Flat\u0131ld\u0131...");try{console.log("ADIM 2: PDF olu\u015Fturuluyor...");let e=new _t({orientation:"portrait",unit:"mm",format:"a4"}),t=new Date,n=`${t.getDate()}.${t.getMonth()+1}.${t.getFullYear()}`,r=`${this.secilenGrup} - ${n}`,o=`${this.secilenGrup.replace(/\s+/g,"_")}_${t.getFullYear()}${(t.getMonth()+1).toString().padStart(2,"0")}${t.getDate().toString().padStart(2,"0")}.pdf`;console.log("PDF Dosya ad\u0131:",r),console.log("Fiziksel dosya ad\u0131:",o),Ge(this,null,function*(){console.log("ADIM 3: Canvas sayfalar\u0131 PDF'e ekleniyor...");for(let A=1;A<=this.totalPages;A++){console.log(`Sayfa ${A}/${this.totalPages} i\u015Fleniyor...`),this.sayfayaGit(A),yield new Promise(N=>setTimeout(N,100));let D=this.canvasInstances[A-1];if(D)if(D.backgroundColor="#ffffff",D.renderAll(),D.getObjects().length>0){let B=D.width||1200,T=D.height||600,H=210/297,te=B/T,L=D.toDataURL({format:"jpeg",quality:.7,multiplier:.8});A>1&&e.addPage();let z=210,J=297,Q=15,ce=z-Q*2,X=J-Q*2-20,ie,oe;te>ce/X?(ie=ce,oe=ce/te):(oe=X,ie=X*te);let le=Q+(ce-ie)/2,Ce=Q+15+(X-oe)/2;e.addImage(L,"JPEG",le,Ce,ie,oe,void 0,"MEDIUM"),e.setTextColor(0,0,0),e.setFontSize(12),e.setFont("helvetica","bold"),e.text("Ayta\xE7 Baydar || Kimya \xD6\u011Fretmeni",Q,Q+5),e.setLineWidth(.8),e.line(Q,Q+7,z-Q,Q+7),e.setFontSize(10),e.setFont("helvetica","normal");let Ne=`${A} / ${this.totalPages}`,R=e.getTextWidth(Ne);e.text(Ne,(z-R)/2,J-10),e.setLineWidth(.8),e.line(Q,J-12,z-Q,J-12),console.log(`Sayfa ${A} PDF'e eklendi. Canvas boyutu: ${B}x${T}, PDF boyutu: ${ie.toFixed(1)}x${oe.toFixed(1)}mm`)}else console.log(`Sayfa ${A} bo\u015F, atland\u0131.`);else console.error(`Canvas ${A} bulunamad\u0131!`)}console.log("ADIM 4: PDF blob olarak haz\u0131rlan\u0131yor...");let a=e.output("blob"),l=a.size/(1024*1024);if(console.log("PDF blob boyutu:",a.size,"bytes",`(${l.toFixed(2)} MB)`),!a||a.size<=0){alert("PDF olu\u015Fturulamad\u0131! PDF boyutu s\u0131f\u0131r."),this.kaydetmeIsleminde=!1;return}let c=10;if(l>c){alert(`PDF dosyas\u0131 \xE7ok b\xFCy\xFCk! Boyut: ${l.toFixed(2)} MB. Maksimum izin verilen: ${c} MB. L\xFCtfen daha az sayfa \xE7izin veya \xE7izimlerinizi basitle\u015Ftirin.`),this.kaydetmeIsleminde=!1;return}console.log("ADIM 5: FormData olu\u015Fturuluyor...");let d=new FormData;if(console.log("ADIM 6: Gerekli alanlar kontrol ediliyor..."),!r||r.trim()===""){alert("PDF ad\u0131 bo\u015F olamaz!"),this.kaydetmeIsleminde=!1;return}if(!this.secilenGrup||this.secilenGrup.trim()===""){alert("\xD6\u011Frenci grubu se\xE7ilmelidir!"),this.kaydetmeIsleminde=!1;return}console.log("ADIM 7: FormData alanlar\u0131 dolduruluyor..."),d.append("pdf_adi",r),d.append("ogrenci_grubu",this.secilenGrup),d.append("sayfa_sayisi",this.totalPages.toString()),console.log("ADIM 8: PDF dosyas\u0131 FormData'ya ekleniyor...");let h=new File([a],o,{type:"application/pdf",lastModified:Date.now()});if(!h||h.size<=0){alert("PDF dosyas\u0131 olu\u015Fturulamad\u0131 veya bo\u015F!"),this.kaydetmeIsleminde=!1;return}if(d.append("pdf_dosyasi",h,o),console.log("PDF dosyas\u0131 FormData'ya eklendi:",h.name,h.size,"bytes"),console.log("ADIM 9: Kapak sayfas\u0131 ekleye haz\u0131rlan\u0131yor..."),this.canvasInstances[0]&&this.canvasInstances[0].getObjects().length>0){let A=this.canvasInstances[0].toDataURL({format:"jpeg",quality:.1,multiplier:.2}),D=this.dataURLtoBlob(A),N=new File([D],"kapak.jpg",{type:"image/jpeg",lastModified:Date.now()});d.append("cizim_verisi",N,"kapak.jpg"),console.log("Kapak sayfas\u0131 FormData'ya eklendi:",N.size,"bytes")}else console.log("Kapak sayfas\u0131 canvas'\u0131 bo\u015F veya bulunamad\u0131. Kapak eklenmedi.");console.log("ADIM 10: FormData i\xE7eri\u011Fi kontrol ediliyor...");let p=!0,g=!1,_=!1,b=!1;if(d.forEach((A,D)=>{p=!1,console.log(`FormData i\xE7eri\u011Fi - ${D}:`,A instanceof File?`File (${A.name}, ${A.type}, ${A.size} bytes)`:A),D==="pdf_dosyasi"&&A instanceof File&&A.size>0&&(g=!0),D==="ogrenci_grubu"&&(_=!0),D==="pdf_adi"&&(b=!0)}),p){alert("FormData bo\u015F! Hi\xE7bir veri eklenemedi."),this.kaydetmeIsleminde=!1;return}if(!g){alert("PDF dosyas\u0131 FormData'ya eklenemedi!"),this.kaydetmeIsleminde=!1;return}if(!_){alert("\xD6\u011Frenci grubu FormData'ya eklenemedi!"),this.kaydetmeIsleminde=!1;return}if(!b){alert("PDF ad\u0131 FormData'ya eklenemedi!"),this.kaydetmeIsleminde=!1;return}console.log("ADIM 11: API URL haz\u0131rlan\u0131yor...");let C="/server/api/konu_anlatim_kaydet.php";console.log("API URL:",C),console.log("ADIM 12: HTTP iste\u011Fi g\xF6nderiliyor...");let y={reportProgress:!0,observe:"events",headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}};console.log("ADIM 12.1: \u0130stek ba\u015Flat\u0131l\u0131yor...");let M="",O=localStorage.getItem("user")||sessionStorage.getItem("user");O&&(M=JSON.parse(O).token||""),this.http.post(C,d,{reportProgress:!0,observe:"events",headers:{Authorization:`Bearer ${M}`,"Cache-Control":"no-cache",Pragma:"no-cache"}}).subscribe({next:A=>{if(A.type===0)console.log("ADIM 12.2: \u0130stek g\xF6nderildi");else if(A.type===1){if(A.loaded&&A.total){let D=Math.round(100*A.loaded/A.total);console.log(`ADIM 12.3: Y\xFCkleme ilerlemesi: %${D} (${A.loaded}/${A.total} bytes)`)}}else if(A.type===4){console.log("ADIM 13: Yan\u0131t al\u0131nd\u0131 - ham veri:",A.body),console.log("HTTP Status:",A.status),console.log("HTTP OK:",A.ok);try{let D=A.body;if(console.log("\u0130\u015Flem yan\u0131t\u0131:",D),D&&D.success===!0)console.log("\u0130\u015Flem ba\u015Far\u0131l\u0131:",D),alert(`Konu anlat\u0131m\u0131 "${this.secilenGrup}" i\xE7in ba\u015Far\u0131yla kaydedildi!`);else{console.warn("Sunucu hatas\u0131:",D);let N=D?.error||"Sunucu yan\u0131t\u0131 beklenmeyen formatta";alert(`Kaydetme hatas\u0131: ${N}`)}}catch(D){console.error("Yan\u0131t i\u015Fleme hatas\u0131:",D),console.log("Ham yan\u0131t:",A.body),alert("Kaydetme i\u015Flemi s\u0131ras\u0131nda bir hata olu\u015Ftu. Sunucu yan\u0131t\u0131 i\u015Flenemedi.")}this.kaydetmeIsleminde=!1}},error:A=>{console.error("ADIM 13: Kaydetme hatas\u0131 - detayl\u0131:",A);let D="Kaydetme i\u015Flemi s\u0131ras\u0131nda bir hata olu\u015Ftu: ";if(A.status===0)D+="Sunucuya ba\u011Flan\u0131lamad\u0131. A\u011F ba\u011Flant\u0131n\u0131z\u0131 kontrol edin.";else if(A.status===413)D+="Dosya boyutu \xE7ok b\xFCy\xFCk. Daha k\xFC\xE7\xFCk bir dosya deneyin.";else if(A.status===400)D+="Ge\xE7ersiz istek. L\xFCtfen t\xFCm alanlar\u0131 kontrol edin.";else if(A.error)try{if(typeof A.error=="string")if(A.error.includes("<br />")||A.error.includes("<b>"))console.error("PHP hatas\u0131:",A.error),D+="Sunucu taraf\u0131nda PHP hatas\u0131 olu\u015Ftu. L\xFCtfen y\xF6neticinize ba\u015Fvurun.";else try{let N=JSON.parse(A.error);D+=N.error||"Bilinmeyen hata"}catch{D+=A.error||"Bilinmeyen hata"}else typeof A.error=="object"?D+=A.error.error||"Bilinmeyen hata":D+="Sunucu yan\u0131t\u0131 beklenmeyen formatta"}catch(N){D+=`Hata ayr\u0131\u015Ft\u0131r\u0131lamad\u0131: ${N.message}`}else D+=`Bilinmeyen bir hata olu\u015Ftu. Durum kodu: ${A.status}`;alert(D),console.log("Tam hata detaylar\u0131:",A),this.kaydetmeIsleminde=!1},complete:()=>{console.log("ADIM 14: \u0130stek tamamland\u0131"),this.kaydetmeIsleminde=!1}})})}catch(e){console.error("Beklenmeyen hata:",e),alert("\u0130\u015Flem s\u0131ras\u0131nda beklenmeyen bir hata olu\u015Ftu: "+(e instanceof Error?e.message:String(e))),this.kaydetmeIsleminde=!1}}dataURLtoBlob(e){let t=e.split(","),n=t[0].match(/:(.*?);/)?.[1]||"image/png",r=atob(t[1]),o=r.length,s=new Uint8Array(o);for(;o--;)s[o]=r.charCodeAt(o);return new Blob([s],{type:n})}beforeUnloadHandler(e){let t=!1;for(let n of this.canvasInstances)if(n&&n.getObjects().length>0){t=!0;break}return t?(e.returnValue="Sayfadan ayr\u0131lmak istedi\u011Finize emin misiniz? Yap\u0131lan de\u011Fi\u015Fiklikler kaybolabilir.",e.returnValue):!0}ngOnDestroy(){document.body.classList.remove("kalem-aktif","silgi-aktif","el-imleci-aktif","sekil-ciz-aktif","fosforlu-kalem-aktif"),this.canvasInstances.forEach(e=>{e&&e.dispose()}),this.canvasInstances=[]}tamEkranModu(){if(this.isTamEkran)document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen();else{let e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():document.msRequestFullscreen&&document.msRequestFullscreen()}this.isTamEkran=!this.isTamEkran}static \u0275fac=function(t){return new(t||i)(ke(gt))};static \u0275cmp=Ke({type:i,selectors:[["app-ogretmen-ders-anlatma-tahtasi"]],hostBindings:function(t,n){t&1&&U("resize",function(o){return n.onResize(o)},!1,ad)("beforeunload",function(o){return n.beforeUnloadHandler(o)},!1,ad)},standalone:!1,decls:121,vars:50,consts:[[1,"konu-anlatim-container"],[1,"kontrol-paneli"],[1,"arac-grubu","cizim-araclari"],[1,"renk-secici"],[1,"arac-grup-label"],["title","K\u0131rm\u0131z\u0131",1,"renk-btn","kirmizi",3,"click"],["title","Mavi",1,"renk-btn","mavi",3,"click"],["title","Ye\u015Fil",1,"renk-btn","yesil",3,"click"],["title","Siyah",1,"renk-btn","siyah",3,"click"],["type","color","title","\xD6zel Renk Se\xE7",1,"renk-input",3,"ngModelChange","change","ngModel"],[1,"arac-grubu"],[1,"btn-modern",3,"click"],[1,"ikon"],[1,"btn-modern","fosforlu-btn",3,"click"],["class","arac-grubu fosforlu-renkler",4,"ngIf"],[1,"boyut-secici",3,"ngModelChange","change","ngModel"],[3,"value"],[1,"arac-grubu","sekil-grubu"],["title","\xC7izgi",1,"sekil-btn",3,"click"],["title","Dikd\xF6rtgen",1,"sekil-btn",3,"click"],["title","Daire",1,"sekil-btn",3,"click"],["title","Ok",1,"sekil-btn",3,"click"],["title","\xDC\xE7gen",1,"sekil-btn",3,"click"],[1,"btn-modern","temizle",3,"click"],["for","pdf-upload",1,"btn-modern","pdf-yukle-btn"],["type","file","id","pdf-upload","accept","application/pdf",2,"display","none",3,"change"],["for","resim-upload",1,"btn-modern","resim-yukle-btn"],["type","file","id","resim-upload","accept","image/*",2,"display","none",3,"change"],[1,"btn-modern","tam-ekran",3,"click"],[1,"arac-grubu","kaydetme-bolumu"],[1,"grup-secici",3,"ngModelChange","ngModel"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],[1,"btn-modern","kaydet",3,"click","disabled"],[1,"btn-modern","indir",3,"click","disabled"],[1,"calisma-alani"],[1,"canvas-container"],["class","drawing-canvas",3,"id","display",4,"ngFor","ngForOf"],[1,"sayfa-navigasyon"],[1,"footer-content"],[1,"navigasyon-grubu"],[1,"navigasyon-label"],[1,"btn-modern","btn-sayfa",3,"click"],[1,"btn-modern","btn-sayfa",3,"click","disabled"],[1,"sayfa-bilgisi"],["class","navigasyon-grubu",4,"ngIf"],[1,"arac-grubu","fosforlu-renkler"],["title","Sar\u0131",1,"fosforlu-renk-btn","sari",3,"click"],["title","Ye\u015Fil",1,"fosforlu-renk-btn","yesil",3,"click"],["title","Pembe",1,"fosforlu-renk-btn","pembe",3,"click"],["title","Mavi",1,"fosforlu-renk-btn","mavi",3,"click"],["title","Turuncu",1,"fosforlu-renk-btn","turuncu",3,"click"],[1,"drawing-canvas",3,"id"]],template:function(t,n){t&1&&(u(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),m(5,"Renkler:"),f(),u(6,"button",5),U("click",function(){return n.hizliRenkSec("#FF0000")}),f(),u(7,"button",6),U("click",function(){return n.hizliRenkSec("#0000FF")}),f(),u(8,"button",7),U("click",function(){return n.hizliRenkSec("#00AA00")}),f(),u(9,"button",8),U("click",function(){return n.hizliRenkSec("#000000")}),f(),u(10,"input",9),at("ngModelChange",function(o){return dt(n.kalemRengi,o)||(n.kalemRengi=o),o}),U("change",function(){return n.ayarlaKalemOzellikleri()}),f()(),u(11,"div",10)(12,"span",4),m(13,"Ara\xE7lar:"),f(),u(14,"button",11),U("click",function(){return n.kalemModunuAc()}),u(15,"i",12),m(16,"\u270F\uFE0F"),f(),m(17," Kalem "),f(),u(18,"button",13),U("click",function(){return n.fosforluKalemModunuAc()}),u(19,"i",12),m(20,"\u{1F58C}\uFE0F"),f(),m(21," Fosforlu "),f(),u(22,"button",11),U("click",function(){return n.silgiModunuAc()}),u(23,"i",12),m(24,"\u{1F9F9}"),f(),m(25," Silgi "),f(),u(26,"button",11),U("click",function(){return n.toggleCizim()}),u(27,"i",12),m(28,"\u{1F446}"),f(),m(29," El "),f()(),ee(30,eae,8,10,"div",14),u(31,"div",10)(32,"span",4),m(33,"Kal\u0131nl\u0131k:"),f(),u(34,"select",15),at("ngModelChange",function(o){return dt(n.kalemKalinligi,o)||(n.kalemKalinligi=o),o}),U("change",function(){return n.ayarlaKalemOzellikleri()}),u(35,"option",16),m(36,"\u0130nce (2px)"),f(),u(37,"option",16),m(38,"Normal (4px)"),f(),u(39,"option",16),m(40,"Kal\u0131n (8px)"),f(),u(41,"option",16),m(42,"\xC7ok Kal\u0131n (12px)"),f(),u(43,"option",16),m(44,"Ekstra Kal\u0131n (16px)"),f()()(),u(45,"div",17)(46,"span",4),m(47,"\u015Eekiller:"),f(),u(48,"button",18),U("click",function(){return n.sekilSec("cizgi")}),m(49," \u2571 "),f(),u(50,"button",19),U("click",function(){return n.sekilSec("dikdortgen")}),m(51," \u25A1 "),f(),u(52,"button",20),U("click",function(){return n.sekilSec("daire")}),m(53," \u25CB "),f(),u(54,"button",21),U("click",function(){return n.sekilSec("ok")}),m(55," \u2192 "),f(),u(56,"button",22),U("click",function(){return n.sekilSec("ucgen")}),m(57," \u25B3 "),f()()(),u(58,"div",10)(59,"button",23),U("click",function(){return n.temizleSayfa()}),u(60,"i",12),m(61,"\u{1F5D1}\uFE0F"),f(),m(62," Temizle "),f(),u(63,"button",11),U("click",function(){return n.sayfaEkle()}),u(64,"i",12),m(65,"\u2795"),f(),m(66," Yeni Sayfa "),f(),u(67,"label",24)(68,"i",12),m(69,"\u{1F4C4}"),f(),m(70),f(),u(71,"input",25),U("change",function(o){return n.pdfYukle(o)}),f(),u(72,"label",26)(73,"i",12),m(74,"\u{1F5BC}\uFE0F"),f(),m(75),f(),u(76,"input",27),U("change",function(o){return n.resimYukle(o)}),f(),u(77,"button",28),U("click",function(){return n.tamEkranModu()}),u(78,"i",12),m(79),f(),m(80),f()(),u(81,"div",29)(82,"select",30),at("ngModelChange",function(o){return dt(n.secilenGrup,o)||(n.secilenGrup=o),o}),u(83,"option",31),m(84,"\xD6\u011Frenci Grubu Se\xE7in"),f(),ee(85,tae,2,2,"option",32),f(),u(86,"button",33),U("click",function(){return n.veritabaninaKaydet()}),u(87,"i",12),m(88,"\u{1F4BE}"),f(),m(89),f(),u(90,"button",34),U("click",function(){return n.indirPDF()}),u(91,"i",12),m(92,"\u{1F4E5}"),f(),m(93),f()()(),u(94,"div",35)(95,"div",36),ee(96,nae,1,3,"canvas",37),f()(),u(97,"div",38)(98,"div",39)(99,"div",40)(100,"span",41),m(101,"Canvas:"),f(),u(102,"button",42),U("click",function(){return n.sayfaBas()}),u(103,"i",12),m(104,"\u23EE\uFE0F"),f(),m(105," \u0130lk "),f(),u(106,"button",43),U("click",function(){return n.oncekiSayfa()}),u(107,"i",12),m(108,"\u25C0\uFE0F"),f(),m(109," \xD6nceki "),f(),u(110,"span",44),m(111),f(),u(112,"button",43),U("click",function(){return n.sonrakiSayfa()}),u(113,"i",12),m(114,"\u25B6\uFE0F"),f(),m(115," Sonraki "),f(),u(116,"button",42),U("click",function(){return n.sayfaSon()}),u(117,"i",12),m(118,"\u23ED\uFE0F"),f(),m(119," Son "),f()(),ee(120,iae,21,4,"div",45),f()()()),t&2&&(x(6),xe("aktif",n.kalemRengi==="#FF0000"),x(),xe("aktif",n.kalemRengi==="#0000FF"),x(),xe("aktif",n.kalemRengi==="#00AA00"),x(),xe("aktif",n.kalemRengi==="#000000"),x(),st("ngModel",n.kalemRengi),x(4),xe("aktif",!n.silgiModu&&!n.fosforluKalemModu&&n.cizilebilir&&!n.sekilModu),x(4),xe("aktif",n.fosforluKalemModu),x(4),xe("aktif",n.silgiModu),x(4),xe("aktif",!n.cizilebilir),x(4),S("ngIf",n.fosforluKalemModu),x(4),st("ngModel",n.kalemKalinligi),x(),S("value",2),x(2),S("value",4),x(2),S("value",8),x(2),S("value",12),x(2),S("value",16),x(5),xe("aktif",n.secilenSekil==="cizgi"),x(2),xe("aktif",n.secilenSekil==="dikdortgen"),x(2),xe("aktif",n.secilenSekil==="daire"),x(2),xe("aktif",n.secilenSekil==="ok"),x(2),xe("aktif",n.secilenSekil==="ucgen"),x(14),he(" ",n.pdfYukleniyor?"PDF Y\xFCkleniyor...":"PDF Y\xFCkle"," "),x(5),he(" ",n.resimYukleniyor?"Resim Y\xFCkleniyor...":"Resim Y\xFCkle"," "),x(4),W(n.isTamEkran?"\u2913":"\u2922"),x(),he(" ",n.isTamEkran?"Tam Ekrandan \xC7\u0131k":"Tam Ekran"," "),x(2),st("ngModel",n.secilenGrup),x(3),S("ngForOf",n.ogrenciGruplari),x(),S("disabled",!n.secilenGrup||n.kaydetmeIsleminde),x(3),he(" ",n.kaydetmeIsleminde?"\u0130\u015Fleniyor, l\xFCtfen bekleyin...":"Veritaban\u0131na Kaydet"," "),x(),S("disabled",n.kaydetmeIsleminde),x(3),he(" ",n.kaydetmeIsleminde?"\u0130\u015Fleniyor...":"PDF \u0130ndir"," "),x(3),S("ngForOf",n.sayfalar),x(10),S("disabled",n.currentPage<=1),x(5),hn("",n.currentPage," / ",n.totalPages,""),x(),S("disabled",n.currentPage>=n.totalPages),x(8),S("ngIf",n.yuklenenPdf))},dependencies:[yt,lt,Kn,Yn,rn,qn,fn,Un],styles:[`@charset "UTF-8";.konu-anlatim-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;width:100%;overflow:hidden;font-family:Arial,sans-serif}.kontrol-paneli[_ngcontent-%COMP%]{position:sticky;top:0;z-index:100;background-color:#f8f9fa;border-bottom:1px solid #dee2e6;padding:8px 15px;display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;box-shadow:0 2px 10px #0000001a;min-height:60px}.arac-grubu[_ngcontent-%COMP%]{display:flex;align-items:center;margin:5px 10px;flex-wrap:wrap;gap:5px}.renk-secici[_ngcontent-%COMP%]{display:flex;margin-right:10px;align-items:center;gap:5px}.renk-input[_ngcontent-%COMP%]{width:30px;height:30px;padding:0;border:none;border-radius:4px;cursor:pointer;margin-left:5px}.renk-btn[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%;margin:0 4px;cursor:pointer;border:2px solid #ddd}.renk-btn.aktif[_ngcontent-%COMP%]{border-color:#666;transform:scale(1.2)}.renk-btn.kirmizi[_ngcontent-%COMP%]{background-color:red}.renk-btn.mavi[_ngcontent-%COMP%]{background-color:#00f}.renk-btn.yesil[_ngcontent-%COMP%]{background-color:#0a0}.renk-btn.siyah[_ngcontent-%COMP%]{background-color:#000}.fosforlu-btn[_ngcontent-%COMP%]{position:relative}.fosforlu-btn.aktif[_ngcontent-%COMP%]{background-color:#f0f0f0}.fosforlu-btn.aktif[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-2px;left:50%;transform:translate(-50%);width:80%;height:3px;background-color:#ff0;border-radius:2px}.fosforlu-renkler[_ngcontent-%COMP%]{display:flex;align-items:center;padding:2px 4px;background-color:#f5f5f5;border-radius:4px;margin-top:2px}.fosforlu-renk-btn[_ngcontent-%COMP%]{width:22px;height:22px;border-radius:4px;margin:0 2px;cursor:pointer;border:2px solid transparent}.fosforlu-renk-btn.aktif[_ngcontent-%COMP%]{border-color:#666;transform:scale(1.1)}.fosforlu-renk-btn.sari[_ngcontent-%COMP%]{background-color:#ffff0080}.fosforlu-renk-btn.yesil[_ngcontent-%COMP%]{background-color:#00ff0080}.fosforlu-renk-btn.pembe[_ngcontent-%COMP%]{background-color:#ff00ff80}.fosforlu-renk-btn.mavi[_ngcontent-%COMP%]{background-color:#00ffff80}.fosforlu-renk-btn.turuncu[_ngcontent-%COMP%]{background-color:#ffa50080}body.fosforlu-kalem-aktif[_ngcontent-%COMP%]   .drawing-canvas[_ngcontent-%COMP%]{cursor:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="yellow" stroke="black" stroke-width="1" d="M7,14l-5.5,5.5 0.7,0.7 5.5,-5.5 -0.7,-0.7z M22,2l-3,3c-1,-1 -2,-1 -3,0l-13,13c-0.5,0.5 -0.5,1.5 0,2l1,1c0.5,0.5 1.5,0.5 2,0l13,-13c1,-1 1,-2 0,-3l3,-3 -0.7,-0.7z"/></svg>') 0 24,auto}.arac-grup-label[_ngcontent-%COMP%]{font-weight:700;color:#495057;font-size:.85rem;margin-right:5px;white-space:nowrap}.btn-modern[_ngcontent-%COMP%]{padding:8px 12px;border:none;background-color:#fff;color:#333;border-radius:4px;margin:0 2px;cursor:pointer;box-shadow:0 1px 3px #0000001a;transition:all .2s;display:flex;align-items:center;font-size:14px}.btn-modern[_ngcontent-%COMP%]:hover{background-color:#f0f0f0;transform:translateY(-1px);box-shadow:0 2px 5px #00000026}.btn-modern.aktif[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.btn-modern.temizle[_ngcontent-%COMP%]{background-color:#f44336;color:#fff}.btn-modern.kaydet[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.btn-modern.indir[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.sekme-butonlari[_ngcontent-%COMP%]{display:flex;gap:5px;margin-bottom:5px}.sekme-btn[_ngcontent-%COMP%]{padding:6px 12px;border:none;background-color:#e9ecef;color:#495057;border-radius:4px 4px 0 0;cursor:pointer;transition:all .2s}.sekme-btn.aktif[_ngcontent-%COMP%]{background-color:#fff;color:#007bff;border-bottom:2px solid #007bff}.ikon[_ngcontent-%COMP%]{margin-right:5px;font-style:normal}.boyut-secici[_ngcontent-%COMP%]{padding:5px;border-radius:4px;border:1px solid #ccc;margin-left:5px}.grup-secici[_ngcontent-%COMP%]{padding:8px;border-radius:4px;border:1px solid #ccc;margin-right:10px;min-width:150px}.calisma-alani[_ngcontent-%COMP%]{flex:1;overflow:auto;position:relative;padding:0;background-color:#f9f9f9}.canvas-container[_ngcontent-%COMP%]{position:relative;height:100%;width:100%;display:flex;flex-direction:column;justify-content:flex-start;align-items:center;gap:15px;padding:15px 0}.drawing-canvas[_ngcontent-%COMP%]{width:100%;height:1130px;background:#fff!important;border:2px solid #ddd;border-radius:8px;box-shadow:0 4px 12px #0000001a;margin:0 auto 15px;display:block}.sayfa-navigasyon[_ngcontent-%COMP%]{position:sticky;bottom:0;background-color:#f8f9fa;border-top:1px solid #dee2e6;padding:8px 15px;display:flex;justify-content:center;align-items:center;z-index:100;box-shadow:0 -2px 5px #0000001a;min-height:50px}.footer-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.sayfa-bilgisi[_ngcontent-%COMP%]{margin:0 15px;font-weight:700;font-size:16px}body.kalem-aktif[_ngcontent-%COMP%]   .drawing-canvas[_ngcontent-%COMP%]{cursor:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="%23000000" d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/></svg>') 0 24,auto}body.silgi-aktif[_ngcontent-%COMP%]   .drawing-canvas[_ngcontent-%COMP%]{cursor:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="%23000000" d="M15.14 3c-.51 0-1.02.2-1.41.59L2.59 14.73c-.78.77-.78 2.04 0 2.83L5.03 20h7.94l-1.72-1.72-4.47.01-1.41-1.41 8.84-8.84 1.42 1.41 1.72-1.72-5.47-5.47c-.39-.39-.9-.59-1.41-.59M21 19.5c0 .83-.67 1.5-1.5 1.5h-5.25l1.73-1.73 3.52-.01V19.5z"/></svg>') 0 24,auto}body.el-imleci-aktif[_ngcontent-%COMP%]   .drawing-canvas[_ngcontent-%COMP%]{cursor:grab}body.sekil-ciz-aktif[_ngcontent-%COMP%]   .drawing-canvas[_ngcontent-%COMP%]{cursor:crosshair}.sekil-grubu[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:5px;align-items:center}.sekil-btn[_ngcontent-%COMP%]{width:26px;height:26px;display:flex;align-items:center;justify-content:center;border-radius:4px;background-color:#fff;border:1px solid #ccc;cursor:pointer;transition:all .2s;font-size:12px}.sekil-btn[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}.sekil-btn.aktif[_ngcontent-%COMP%]{background-color:#e6f0ff;border-color:#007bff}@media (max-width: 768px){.kontrol-paneli[_ngcontent-%COMP%], .sayfa-navigasyon[_ngcontent-%COMP%]{padding:5px}.arac-grubu[_ngcontent-%COMP%]{margin:3px}.btn-modern[_ngcontent-%COMP%]{padding:5px 8px;font-size:12px}.sayfa-bilgisi[_ngcontent-%COMP%]{font-size:14px;margin:0 5px}}.yukleme-gostergesi[_ngcontent-%COMP%]{color:#007bff;margin-left:10px;display:flex;align-items:center;gap:5px}.canvas-container[_ngcontent-%COMP%]   .canvas-controls[_ngcontent-%COMP%]{opacity:.8!important}.btn-modern.tam-ekran[_ngcontent-%COMP%]{background-color:#3498db;color:#fff}.btn-modern.tam-ekran[_ngcontent-%COMP%]:hover{background-color:#2980b9}.pdf-yukle-btn[_ngcontent-%COMP%]{background-color:#e74c3c;color:#fff;cursor:pointer}.pdf-yukle-btn[_ngcontent-%COMP%]:hover{background-color:#c0392b}.footer-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:30px;flex-wrap:wrap}.navigasyon-grubu[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px;padding:5px 10px;background-color:#ffffff1a;border-radius:5px}.navigasyon-label[_ngcontent-%COMP%]{font-weight:700;font-size:12px;color:#666;margin-right:5px}body.tam-ekran-modu[_ngcontent-%COMP%]   .kontrol-paneli[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;z-index:1000;background-color:#f8f9faf2;box-shadow:0 2px 10px #0003}body.tam-ekran-modu[_ngcontent-%COMP%]   .calisma-alani[_ngcontent-%COMP%]{padding-top:70px;height:calc(100vh - 130px)}body.tam-ekran-modu[_ngcontent-%COMP%]   .sayfa-navigasyon[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;right:0;z-index:1000;background-color:#f8f9faf2;box-shadow:0 -2px 10px #0003}body.tam-ekran-modu[_ngcontent-%COMP%]   .beyaz-tahta[_ngcontent-%COMP%]{max-height:calc(100vh - 150px);overflow:auto}.fosforlu-kalem-aktif[_ngcontent-%COMP%]   .drawing-canvas[_ngcontent-%COMP%]{cursor:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><circle cx="12" cy="12" r="8" fill="%23ffff00" stroke="%23000" stroke-width="2" opacity="0.7"/></svg>') 12 12,crosshair!important}.text-aktif[_ngcontent-%COMP%]   .drawing-canvas[_ngcontent-%COMP%]{cursor:text!important}.btn-text[_ngcontent-%COMP%]{background:linear-gradient(45deg,#7c3aed,#a855f7)}.btn-text.aktif[_ngcontent-%COMP%]{background:linear-gradient(45deg,#5b21b6,#7c3aed);box-shadow:0 0 20px #7c3aed80}`]})};var KR=i=>["/ogretmen-sayfasi/ogretmen-ogrenci-detay-sayfasi",i];function rae(i,e){if(i&1){let t=Ae();u(0,"button",41),U("click",function(){K(t);let r=F();return Y(r.clearSearch())}),k(1,"i",42),f()}}function oae(i,e){if(i&1&&(u(0,"span",43),m(1),f()),i&2){let t=F();x(),W(t.newUsers.length)}}function sae(i,e){i&1&&(u(0,"span",72),m(1," Aktif "),f())}function aae(i,e){i&1&&(u(0,"span",73),m(1," Pasif "),f())}function lae(i,e){if(i&1&&(u(0,"span",74),m(1),f()),i&2){let t=F().$implicit;x(),he(" ",t.grubu," ")}}function cae(i,e){if(i&1&&(u(0,"div",75),k(1,"i",76),m(2),f()),i&2){let t=F().$implicit;x(2),he(" ",t.ders_gunu," ")}}function dae(i,e){if(i&1&&(u(0,"div",75),k(1,"i",77),m(2),f()),i&2){let t=F().$implicit;x(2),he(" ",t.ders_saati," ")}}function uae(i,e){if(i&1&&(u(0,"div",75),k(1,"i",78),m(2),f()),i&2){let t=F().$implicit;x(2),he(" ",t.ucret," ")}}function hae(i,e){if(i&1){let t=Ae();u(0,"tr")(1,"td"),ee(2,sae,2,0,"span",60)(3,aae,2,0,"span",61),f(),u(4,"td"),m(5),f(),u(6,"td"),k(7,"img",62),f(),u(8,"td",63),m(9),f(),u(10,"td"),m(11),f(),u(12,"td"),m(13),f(),u(14,"td"),m(15),f(),u(16,"td"),m(17),f(),u(18,"td"),ee(19,lae,2,1,"span",64),f(),u(20,"td"),m(21),f(),u(22,"td")(23,"div",65),ee(24,cae,3,1,"div",66)(25,dae,3,1,"div",66)(26,uae,3,1,"div",66),f()(),u(27,"td")(28,"div",67)(29,"a",68),k(30,"i",69),m(31," D\xFCzenle "),f(),u(32,"button",70),U("click",function(){let r=K(t).$implicit,o=F(2);return Y(o.deleteStudent(r.id))}),k(33,"i",71),m(34," Sil "),f()()()()}if(i&2){let t=e.$implicit;x(2),S("ngIf",t.aktif),x(),S("ngIf",!t.aktif),x(2),W(t.id),x(2),S("src",t.avatar||"https://ui-avatars.com/api/?name="+t.adi_soyadi+"&background=random",vt),x(2),W(t.adi_soyadi),x(2),W(t.email),x(2),W(t.cep_telefonu||"Belirtilmemi\u015F"),x(2),W(t.okulu||"Belirtilmemi\u015F"),x(2),W(t.sinifi||"Belirtilmemi\u015F"),x(2),S("ngIf",t.grubu),x(2),W(t.ogretmeni||"Belirtilmemi\u015F"),x(3),S("ngIf",t.ders_gunu),x(),S("ngIf",t.ders_saati),x(),S("ngIf",t.ucret),x(3),S("routerLink",Do(15,KR,t.id))}}function fae(i,e){i&1&&(u(0,"tr")(1,"td",79)(2,"div",80)(3,"div",81),k(4,"i",82),f(),u(5,"p"),m(6,"Hen\xFCz \xF6\u011Frenci bulunamad\u0131."),f()()()())}function gae(i,e){i&1&&(u(0,"span",100),m(1,"Aktif"),f())}function pae(i,e){i&1&&(u(0,"span",101),m(1,"Pasif"),f())}function mae(i,e){if(i&1&&(u(0,"span",74),m(1),f()),i&2){let t=F().$implicit;x(),he(" ",t.grubu," ")}}function xae(i,e){if(i&1&&(u(0,"div",5),k(1,"i",76),m(2),f()),i&2){let t=F().$implicit;x(2),he(" ",t.ders_gunu," ")}}function _ae(i,e){if(i&1&&(u(0,"div",5),k(1,"i",77),m(2),f()),i&2){let t=F().$implicit;x(2),he(" ",t.ders_saati," ")}}function vae(i,e){if(i&1&&(u(0,"div",5),k(1,"i",78),m(2),f()),i&2){let t=F().$implicit;x(2),he(" ",t.ucret," ")}}function bae(i,e){i&1&&(u(0,"span",102),m(1," Belirtilmemi\u015F "),f())}function Cae(i,e){if(i&1){let t=Ae();u(0,"div",83)(1,"div",4)(2,"div",84),k(3,"img",85),u(4,"div",86)(5,"div",5)(6,"h6",87),m(7),f(),ee(8,gae,2,0,"span",88)(9,pae,2,0,"span",89),f(),u(10,"p",90),m(11),f(),ee(12,mae,2,1,"span",64),f()(),u(13,"div",91)(14,"div",92)(15,"div",93)(16,"div",94),m(17,"Telefon"),f(),u(18,"div"),m(19),f()()(),u(20,"div",92)(21,"div",93)(22,"div",94),m(23,"Okul"),f(),u(24,"div",95),m(25),f()()(),u(26,"div",92)(27,"div",93)(28,"div",94),m(29,"S\u0131n\u0131f"),f(),u(30,"div"),m(31),f()()(),u(32,"div",92)(33,"div",93)(34,"div",94),m(35,"Ders Bilgileri"),f(),u(36,"div",96),ee(37,xae,3,1,"div",97)(38,_ae,3,1,"div",97)(39,vae,3,1,"div",97)(40,bae,2,0,"span",98),f()()()(),u(41,"div",99)(42,"a",68),k(43,"i",69),m(44," D\xFCzenle "),f(),u(45,"button",70),U("click",function(){let r=K(t).$implicit,o=F(2);return Y(o.deleteStudent(r.id))}),k(46,"i",71),m(47," Sil "),f()()()()}if(i&2){let t=e.$implicit;x(3),S("src",t.avatar||"https://ui-avatars.com/api/?name="+t.adi_soyadi+"&background=random",vt),x(4),W(t.adi_soyadi),x(),S("ngIf",t.aktif),x(),S("ngIf",!t.aktif),x(2),W(t.email),x(),S("ngIf",t.grubu),x(7),W(t.cep_telefonu||"Belirtilmemi\u015F"),x(6),W(t.okulu||"Belirtilmemi\u015F"),x(6),W(t.sinifi||"Belirtilmemi\u015F"),x(6),S("ngIf",t.ders_gunu),x(),S("ngIf",t.ders_saati),x(),S("ngIf",t.ucret),x(),S("ngIf",!t.ders_gunu&&!t.ders_saati&&!t.ucret),x(2),S("routerLink",Do(14,KR,t.id))}}function yae(i,e){i&1&&(u(0,"div",103)(1,"div",80)(2,"div",81),k(3,"i",82),f(),u(4,"p"),m(5,"Hen\xFCz \xF6\u011Frenci bulunamad\u0131."),f()()())}function wae(i,e){if(i&1){let t=Ae();u(0,"li",113)(1,"button",118),U("click",function(){let r=K(t).$implicit,o=F(3);return Y(o.setStudentPage(r))}),m(2),f()()}if(i&2){let t=e.$implicit,n=F(3);xe("active",n.currentStudentPage===t),x(2),W(t)}}function Mae(i,e){if(i&1){let t=Ae();u(0,"div",104)(1,"div",105)(2,"div",106),m(3," Toplam "),u(4,"span",63),m(5),f(),m(6," \xF6\u011Frenci, "),u(7,"span",63),m(8),f(),m(9," aras\u0131 g\xF6steriliyor "),u(10,"div",107)(11,"span",108),m(12,"G\xF6ster:"),f(),u(13,"select",109),at("ngModelChange",function(r){K(t);let o=F(2);return dt(o.itemsPerPage,r)||(o.itemsPerPage=r),Y(r)}),U("change",function(){K(t);let r=F(2);return Y(r.setStudentPage(1))}),u(14,"option",110),m(15,"5"),f(),u(16,"option",110),m(17,"10"),f(),u(18,"option",110),m(19,"15"),f()()()(),u(20,"nav",111)(21,"ul",112)(22,"li",113)(23,"button",114),U("click",function(){K(t);let r=F(2);return Y(r.setStudentPage(r.currentStudentPage-1))}),u(24,"span",115),m(25,"\xAB"),f()()(),ee(26,wae,3,3,"li",116),u(27,"li",113)(28,"button",117),U("click",function(){K(t);let r=F(2);return Y(r.setStudentPage(r.currentStudentPage+1))}),u(29,"span",115),m(30,"\xBB"),f()()()()()()()}if(i&2){let t=F(2);x(5),W(t.totalStudentCount),x(3),hn("",(t.currentStudentPage-1)*t.itemsPerPage+1,"-",t.Math.min(t.currentStudentPage*t.itemsPerPage,t.totalStudentCount),""),x(5),st("ngModel",t.itemsPerPage),x(),S("value",5),x(2),S("value",10),x(2),S("value",15),x(4),xe("disabled",t.currentStudentPage===1),x(4),S("ngForOf",t.getStudentPageArray()),x(),xe("disabled",t.currentStudentPage===t.totalStudentPages)}}function Eae(i,e){if(i&1&&(u(0,"div",44)(1,"div",45)(2,"div")(3,"h5",46),m(4,"\xD6\u011Frenci Listesi"),f(),u(5,"p",47),m(6),f()(),u(7,"a",48),k(8,"i",49),m(9," Yeni \xD6\u011Frenci "),f()(),u(10,"div",50)(11,"table",51)(12,"thead",52)(13,"tr")(14,"th",53),m(15,"Durum"),f(),u(16,"th",53),m(17,"ID"),f(),u(18,"th",53),m(19,"Avatar"),f(),u(20,"th",53),m(21,"Ad Soyad"),f(),u(22,"th",53),m(23,"Email"),f(),u(24,"th",53),m(25,"Telefon"),f(),u(26,"th",53),m(27,"Okul"),f(),u(28,"th",53),m(29,"S\u0131n\u0131f"),f(),u(30,"th",53),m(31,"Grup"),f(),u(32,"th",53),m(33,"\xD6\u011Fretmeni"),f(),u(34,"th",53),m(35,"Ders Bilgileri"),f(),u(36,"th",53),m(37,"\u0130\u015Flemler"),f()()(),u(38,"tbody"),ee(39,hae,35,17,"tr",54)(40,fae,7,0,"tr",55),f()()(),u(41,"div",56),ee(42,Cae,48,16,"div",57)(43,yae,6,0,"div",58),f(),ee(44,Mae,31,12,"div",59),f()),i&2){let t=F();x(6),he("Toplam ",t.totalStudentCount," \xF6\u011Frenci"),x(33),S("ngForOf",t.paginatedStudents),x(),S("ngIf",t.students.length===0),x(2),S("ngForOf",t.paginatedStudents),x(),S("ngIf",t.students.length===0),x(),S("ngIf",t.students.length>0)}}function Pae(i,e){if(i&1){let t=Ae();u(0,"button",121),U("click",function(){K(t);let r=F(2);return Y(r.approveAllUsers())}),k(1,"i",122),m(2," T\xFCm\xFCn\xFC Onayla "),f()}}function Oae(i,e){i&1&&(u(0,"span",74),m(1," \xD6\u011Frenci "),f())}function Sae(i,e){i&1&&(u(0,"span",129),m(1," \xD6\u011Fretmen "),f())}function kae(i,e){i&1&&(u(0,"span",130),m(1," Admin "),f())}function Aae(i,e){i&1&&(u(0,"span",131),m(1," Belirtilmemi\u015F "),f())}function Dae(i,e){if(i&1&&(u(0,"span",106),m(1),f()),i&2){let t=F().$implicit,n=F(2);x(),he(" ",n.formatDate(t.created_at)," ")}}function Fae(i,e){if(i&1){let t=Ae();u(0,"tr")(1,"td"),m(2),f(),u(3,"td"),k(4,"img",62),f(),u(5,"td",63),m(6),f(),u(7,"td"),m(8),f(),u(9,"td"),m(10),f(),u(11,"td"),ee(12,Oae,2,0,"span",64)(13,Sae,2,0,"span",123)(14,kae,2,0,"span",124)(15,Aae,2,0,"span",125),f(),u(16,"td"),ee(17,Dae,2,1,"span",126),f(),u(18,"td")(19,"div",67)(20,"button",127),U("click",function(){let r=K(t).$implicit,o=F(2);return Y(o.approveUser(r.id))}),k(21,"i",122),m(22," Onayla "),f(),u(23,"button",70),U("click",function(){let r=K(t).$implicit,o=F(2);return Y(o.rejectUser(r.id))}),k(24,"i",128),m(25," Reddet "),f()()()()}if(i&2){let t=e.$implicit;x(2),W(t.id),x(2),S("src",t.avatar||"https://ui-avatars.com/api/?name="+t.adi_soyadi+"&background=random",vt),x(2),W(t.adi_soyadi),x(2),W(t.email),x(2),W(t.cep_telefonu||"Belirtilmemi\u015F"),x(2),S("ngIf",t.rutbe==="ogrenci"),x(),S("ngIf",t.rutbe==="ogretmen"),x(),S("ngIf",t.rutbe==="admin"),x(),S("ngIf",!t.rutbe||t.rutbe==="belirtilmemis"),x(2),S("ngIf",t.created_at)}}function Iae(i,e){i&1&&(u(0,"tr")(1,"td",132)(2,"div",80)(3,"div",81),k(4,"i",133),f(),u(5,"p"),m(6,"Onay bekleyen kullan\u0131c\u0131 bulunmamaktad\u0131r."),f()()()())}function Tae(i,e){i&1&&(u(0,"span",74),m(1," \xD6\u011Frenci "),f())}function Bae(i,e){i&1&&(u(0,"span",129),m(1," \xD6\u011Fretmen "),f())}function Nae(i,e){i&1&&(u(0,"span",130),m(1," Admin "),f())}function Lae(i,e){i&1&&(u(0,"span",131),m(1," Belirtilmemi\u015F "),f())}function Rae(i,e){if(i&1){let t=Ae();u(0,"div",83)(1,"div",4)(2,"div",84),k(3,"img",85),u(4,"div",86)(5,"h6",87),m(6),f(),u(7,"p",90),m(8),f(),ee(9,Tae,2,0,"span",64)(10,Bae,2,0,"span",123)(11,Nae,2,0,"span",124)(12,Lae,2,0,"span",125),f()(),u(13,"div",91)(14,"div",92)(15,"div",93)(16,"div",94),m(17,"Telefon"),f(),u(18,"div"),m(19),f()()(),u(20,"div",92)(21,"div",93)(22,"div",94),m(23,"Kay\u0131t Tarihi"),f(),u(24,"div",96),m(25),f()()()(),u(26,"div",99)(27,"button",127),U("click",function(){let r=K(t).$implicit,o=F(2);return Y(o.approveUser(r.id))}),k(28,"i",122),m(29," Onayla "),f(),u(30,"button",70),U("click",function(){let r=K(t).$implicit,o=F(2);return Y(o.rejectUser(r.id))}),k(31,"i",128),m(32," Reddet "),f()()()()}if(i&2){let t=e.$implicit,n=F(2);x(3),S("src",t.avatar||"https://ui-avatars.com/api/?name="+t.adi_soyadi+"&background=random",vt),x(3),W(t.adi_soyadi),x(2),W(t.email),x(),S("ngIf",t.rutbe==="ogrenci"),x(),S("ngIf",t.rutbe==="ogretmen"),x(),S("ngIf",t.rutbe==="admin"),x(),S("ngIf",!t.rutbe||t.rutbe==="belirtilmemis"),x(7),W(t.cep_telefonu||"Belirtilmemi\u015F"),x(6),W(t.created_at?n.formatDate(t.created_at):"Belirtilmemi\u015F")}}function zae(i,e){i&1&&(u(0,"div",103)(1,"div",80)(2,"div",81),k(3,"i",133),f(),u(4,"p"),m(5,"Onay bekleyen kullan\u0131c\u0131 bulunmamaktad\u0131r."),f()()())}function jae(i,e){if(i&1){let t=Ae();u(0,"li",113)(1,"button",118),U("click",function(){let r=K(t).$implicit,o=F(3);return Y(o.setNewUserPage(r))}),m(2),f()()}if(i&2){let t=e.$implicit,n=F(3);xe("active",n.currentNewUserPage===t),x(2),W(t)}}function Vae(i,e){if(i&1){let t=Ae();u(0,"div",104)(1,"div",105)(2,"div",106),m(3," Toplam "),u(4,"span",63),m(5),f(),m(6," bekleyen kullan\u0131c\u0131, "),u(7,"span",63),m(8),f(),m(9," aras\u0131 g\xF6steriliyor "),u(10,"div",107)(11,"span",108),m(12,"G\xF6ster:"),f(),u(13,"select",109),at("ngModelChange",function(r){K(t);let o=F(2);return dt(o.itemsPerPage,r)||(o.itemsPerPage=r),Y(r)}),U("change",function(){K(t);let r=F(2);return Y(r.setNewUserPage(1))}),u(14,"option",110),m(15,"5"),f(),u(16,"option",110),m(17,"10"),f(),u(18,"option",110),m(19,"15"),f()()()(),u(20,"nav",111)(21,"ul",112)(22,"li",113)(23,"button",114),U("click",function(){K(t);let r=F(2);return Y(r.setNewUserPage(r.currentNewUserPage-1))}),u(24,"span",115),m(25,"\xAB"),f()()(),ee(26,jae,3,3,"li",116),u(27,"li",113)(28,"button",117),U("click",function(){K(t);let r=F(2);return Y(r.setNewUserPage(r.currentNewUserPage+1))}),u(29,"span",115),m(30,"\xBB"),f()()()()()()()}if(i&2){let t=F(2);x(5),W(t.totalNewUserCount),x(3),hn("",(t.currentNewUserPage-1)*t.itemsPerPage+1,"-",t.Math.min(t.currentNewUserPage*t.itemsPerPage,t.totalNewUserCount),""),x(5),st("ngModel",t.itemsPerPage),x(),S("value",5),x(2),S("value",10),x(2),S("value",15),x(4),xe("disabled",t.currentNewUserPage===1),x(4),S("ngForOf",t.getNewUserPageArray()),x(),xe("disabled",t.currentNewUserPage===t.totalNewUserPages)}}function Uae(i,e){if(i&1&&(u(0,"div",44)(1,"div",45)(2,"div")(3,"h5",46),m(4,"Onay Bekleyen Kullan\u0131c\u0131lar"),f(),u(5,"p",47),k(6,"span",119),m(7),f()(),ee(8,Pae,3,0,"button",120),f(),u(9,"div",50)(10,"table",51)(11,"thead",52)(12,"tr")(13,"th",53),m(14,"ID"),f(),u(15,"th",53),m(16,"Avatar"),f(),u(17,"th",53),m(18,"Ad Soyad"),f(),u(19,"th",53),m(20,"Email"),f(),u(21,"th",53),m(22,"Telefon"),f(),u(23,"th",53),m(24,"R\xFCtbe"),f(),u(25,"th",53),m(26,"Kay\u0131t Tarihi"),f(),u(27,"th",53),m(28,"\u0130\u015Flemler"),f()()(),u(29,"tbody"),ee(30,Fae,26,10,"tr",54)(31,Iae,7,0,"tr",55),f()()(),u(32,"div",56),ee(33,Rae,33,9,"div",57)(34,zae,6,0,"div",58),f(),ee(35,Vae,31,12,"div",59),f()),i&2){let t=F();x(7),he(" ",t.newUsers.length," kullan\u0131c\u0131 onay bekliyor "),x(),S("ngIf",t.newUsers.length>0),x(22),S("ngForOf",t.paginatedNewUsers),x(),S("ngIf",t.newUsers.length===0),x(2),S("ngForOf",t.paginatedNewUsers),x(),S("ngIf",t.newUsers.length===0),x(),S("ngIf",t.newUsers.length>0)}}var b2=class i{constructor(e,t){this.http=e;this.router=t}students=[];newUsers=[];isLoading=!0;error=null;searchQuery="";activeTab="ogrenci";currentStudentPage=1;currentTeacherPage=1;currentNewUserPage=1;itemsPerPage=5;Math=Math;ngOnInit(){this.loadUsers()}setActiveTab(e){this.activeTab=e,e==="ogrenci"&&(this.currentStudentPage=1),e==="yeni"&&(this.currentNewUserPage=1)}loadUsers(){this.isLoading=!0;let e="",t=null,n=localStorage.getItem("user")||sessionStorage.getItem("user");n&&(t=JSON.parse(n),e=t.token||""),this.http.get("./server/api/ogrenciler_listesi.php",{headers:{Authorization:`Bearer ${e}`}}).subscribe({next:r=>{if(r.success){let o=Array.isArray(r.data)?r.data:[],s=t?.adi_soyadi||"";this.students=o.filter(a=>a.rutbe==="ogrenci"&&a.ogretmeni===s),this.newUsers=o.filter(a=>a.rutbe==="yeni")}else console.error("API yan\u0131t\u0131 ba\u015Far\u0131s\u0131z:",r.error);this.isLoading=!1},error:r=>{console.error("API hatas\u0131:",r),this.isLoading=!1}})}onSearch(){this.currentStudentPage=1,this.currentTeacherPage=1,this.currentNewUserPage=1,console.log("Arama yap\u0131l\u0131yor:",this.searchQuery)}clearSearch(){this.searchQuery="",this.onSearch()}filterItems(e,t){if(!t||t.trim()==="")return e;let n=t.toLowerCase().trim();return e.filter(r=>r.adi_soyadi.toLowerCase().includes(n)||r.email.toLowerCase().includes(n)||r.cep_telefonu&&r.cep_telefonu.toLowerCase().includes(n)||r.okulu&&r.okulu.toLowerCase().includes(n)||r.sinifi&&r.sinifi.toLowerCase().includes(n)||r.grubu&&r.grubu.toLowerCase().includes(n)||r.brans&&r.brans.toLowerCase().includes(n))}get filteredStudents(){return this.filterItems(this.students,this.searchQuery)}get totalStudentCount(){return this.filteredStudents.length}get totalStudentPages(){return Math.ceil(this.totalStudentCount/this.itemsPerPage)}get paginatedStudents(){let e=(this.currentStudentPage-1)*this.itemsPerPage;return this.filteredStudents.slice(e,e+this.itemsPerPage)}setStudentPage(e){e<1||e>this.totalStudentPages||(this.currentStudentPage=e)}getStudentPageArray(){return this.generatePageArray(this.currentStudentPage,this.totalStudentPages)}get filteredNewUsers(){return this.filterItems(this.newUsers,this.searchQuery)}get totalNewUserCount(){return this.filteredNewUsers.length}get totalNewUserPages(){return Math.ceil(this.totalNewUserCount/this.itemsPerPage)}get paginatedNewUsers(){let e=(this.currentNewUserPage-1)*this.itemsPerPage;return this.filteredNewUsers.slice(e,e+this.itemsPerPage)}setNewUserPage(e){e<1||e>this.totalNewUserPages||(this.currentNewUserPage=e)}getNewUserPageArray(){return this.generatePageArray(this.currentNewUserPage,this.totalNewUserPages)}generatePageArray(e,t){let n=[];if(t<=5)for(let r=1;r<=t;r++)n.push(r);else if(e<=3)for(let r=1;r<=5;r++)n.push(r);else if(e>=t-2)for(let r=t-4;r<=t;r++)n.push(r);else for(let r=e-2;r<=e+2;r++)n.push(r);return n}approveUser(e){if(!confirm("Bu kullan\u0131c\u0131y\u0131 onaylamak istedi\u011Finizden emin misiniz?"))return;let t="",n=localStorage.getItem("user")||sessionStorage.getItem("user");n&&(t=JSON.parse(n).token||"");let r={id:e,rutbe:"ogrenci",aktif:1};this.http.post("./server/api/kullanici_guncelle.php",r,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}}).subscribe({next:o=>{o.success?(alert("Kullan\u0131c\u0131 ba\u015Far\u0131yla onayland\u0131!"),this.loadUsers()):alert("Kullan\u0131c\u0131 onaylanamad\u0131: "+o.error)},error:o=>{console.error("Onaylama hatas\u0131:",o),alert("Onaylama i\u015Flemi s\u0131ras\u0131nda bir hata olu\u015Ftu: "+(o.message||"Bilinmeyen bir hata"))}})}rejectUser(e){if(!confirm("Bu kullan\u0131c\u0131y\u0131 reddetmek istedi\u011Finizden emin misiniz? Bu i\u015Flem kullan\u0131c\u0131y\u0131 silecektir."))return;let t="",n=localStorage.getItem("user")||sessionStorage.getItem("user");n&&(t=JSON.parse(n).token||""),this.http.post("./server/api/ogrenci_sil.php",{id:e},{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}}).subscribe({next:r=>{r.success?(alert("Kullan\u0131c\u0131 ba\u015Far\u0131yla reddedildi ve silindi!"),this.loadUsers()):alert("Kullan\u0131c\u0131 reddedilemedi: "+r.error)},error:r=>{console.error("Reddetme hatas\u0131:",r),alert("Reddetme i\u015Flemi s\u0131ras\u0131nda bir hata olu\u015Ftu: "+(r.message||"Bilinmeyen bir hata"))}})}approveAllUsers(){if(!confirm("T\xFCm bekleyen kullan\u0131c\u0131lar\u0131 onaylamak istedi\u011Finizden emin misiniz?"))return;let e="",t=localStorage.getItem("user")||sessionStorage.getItem("user");t&&(e=JSON.parse(t).token||""),this.http.post("./server/api/tum_ogrencileri_onayla.php",{},{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}}).subscribe({next:n=>{n.success?(alert("T\xFCm kullan\u0131c\u0131lar ba\u015Far\u0131yla onayland\u0131!"),this.loadUsers()):alert("Kullan\u0131c\u0131lar onaylanamad\u0131: "+n.error)},error:n=>{console.error("Onaylama hatas\u0131:",n),alert("Onaylama i\u015Flemi s\u0131ras\u0131nda bir hata olu\u015Ftu: "+(n.message||"Bilinmeyen bir hata"))}})}formatDate(e){return new Date(e).toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}getActiveStudents(){return this.students.filter(e=>e.aktif).length}getInactiveStudents(){return this.students.filter(e=>!e.aktif).length}getStudentsWaiting(){return this.newUsers.filter(e=>e.rutbe==="ogrenci"||e.rutbe==="").length}getTeachersWaiting(){return this.newUsers.filter(e=>e.rutbe==="ogretmen").length}loadStudents(){this.isLoading=!0,this.error=null;let e="",t=null,n=localStorage.getItem("user")||sessionStorage.getItem("user");n&&(t=JSON.parse(n),e=t.token||"");let r=new xt({Authorization:`Bearer ${e}`});this.http.get("./server/api/ogrenciler_listesi.php",{headers:r}).subscribe({next:o=>{if(o.success){let s=t?.adi_soyadi||"";this.students=o.data.filter(a=>{let l=a.rutbe==="ogrenci",c=a.ogretmeni===s;return l&&c})}else this.error=o.message||"\xD6\u011Frenci verileri y\xFCklenirken hata olu\u015Ftu.";this.isLoading=!1},error:o=>{this.error="Sunucu hatas\u0131: "+(o.error?.message||o.message),this.isLoading=!1}})}deleteStudent(e){if(confirm("Bu \xF6\u011Frenciyi silmek istedi\u011Finizden emin misiniz?")){let t="",n=localStorage.getItem("user")||sessionStorage.getItem("user");n&&(t=JSON.parse(n).token||"");let r=new xt({Authorization:`Bearer ${t}`,"Content-Type":"application/json"});this.http.post("./server/api/ogrenci_sil.php",{id:e},{headers:r}).subscribe({next:o=>{o.success?(alert("\xD6\u011Frenci ba\u015Far\u0131yla silindi."),this.loadStudents()):alert("\xD6\u011Frenci silinirken hata olu\u015Ftu: "+(o.error||o.message))},error:o=>{console.error("API hatas\u0131:",o);let s="Silme i\u015Flemi s\u0131ras\u0131nda bir hata olu\u015Ftu: ";o.error&&o.error.error?s+=o.error.error:o.message?s+=o.message:s+="Bilinmeyen bir hata",alert(s)}})}}static \u0275fac=function(t){return new(t||i)(ke(gt),ke(an))};static \u0275cmp=Ke({type:i,selectors:[["app-ogretmen-ogrenci-listesi-sayfasi"]],standalone:!1,decls:79,vars:17,consts:[[1,"container-fluid","p-2","p-md-3"],[1,"row","g-2","mb-3"],[1,"col-md-3","col-sm-6"],[1,"card","h-100","border-primary","border-start","border-4","rounded-lg"],[1,"card-body","p-3"],[1,"d-flex","align-items-center"],[1,"icon-bg","rounded-circle","bg-primary-subtle","p-2","me-3"],[1,"bi","bi-people-fill","fs-4","text-primary"],[1,"text-muted","mb-0","small"],[1,"mb-0"],[1,"small","text-muted","mt-1"],[1,"text-success"],[1,"text-danger"],[1,"card","h-100","border-success","border-start","border-4","rounded-lg"],[1,"icon-bg","rounded-circle","bg-success-subtle","p-2","me-3"],[1,"bi","bi-mortarboard","fs-4","text-success"],[1,"card","h-100","border-danger","border-start","border-4","rounded-lg"],[1,"icon-bg","rounded-circle","bg-danger-subtle","p-2","me-3"],[1,"bi","bi-clock-history","fs-4","text-danger"],[1,"text-primary"],[1,"card","rounded-lg","shadow","mb-3"],[1,"card-header","bg-primary","text-white","p-3"],[1,"d-flex","flex-column","flex-md-row","justify-content-between","align-items-start","align-items-md-center"],[1,"mb-0","fw-semibold"],[1,"d-flex","mt-3","mt-md-0","w-100","w-md-auto"],[1,"input-group","me-2"],[1,"input-group-text","bg-white"],[1,"bi","bi-search","text-muted","small"],["type","text","placeholder","Kullan\u0131c\u0131 ara...",1,"form-control",3,"ngModelChange","keyup.enter","ngModel"],["class","btn btn-outline-secondary border-0","type","button",3,"click",4,"ngIf"],[1,"btn","btn-light","d-flex","align-items-center",3,"click"],[1,"bi","bi-arrow-clockwise","me-1"],[1,"card-body","p-0"],[1,"nav","nav-tabs","nav-fill","sticky-top","bg-white","border-bottom"],[1,"nav-item"],[1,"nav-link","d-flex","align-items-center","py-2",3,"click"],[1,"bi","bi-mortarboard","me-2"],[1,"bi","bi-person-plus","me-2"],["class","badge bg-danger ms-2 rounded-pill",4,"ngIf"],[1,"p-2","p-md-3"],["class","fade-in",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary","border-0",3,"click"],[1,"bi","bi-x"],[1,"badge","bg-danger","ms-2","rounded-pill"],[1,"fade-in"],[1,"d-flex","flex-column","flex-md-row","justify-content-between","align-items-start","align-items-md-center","mb-3"],[1,"fw-medium","text-dark"],[1,"text-muted","small","mt-1"],["routerLink","/yonetici-sayfasi/ogrenci-detay-sayfasi/new",1,"btn","btn-primary","d-flex","align-items-center","shadow-sm"],[1,"bi","bi-plus-circle","me-1"],[1,"table-responsive","d-none","d-md-block","rounded","border"],[1,"table","table-hover","align-middle","mb-0"],[1,"bg-light"],[1,"text-uppercase","small","fw-medium"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"d-md-none"],["class","card mb-2 shadow-sm border",4,"ngFor","ngForOf"],["class","card shadow-sm text-center p-4 text-muted",4,"ngIf"],["class","mt-3",4,"ngIf"],["class","badge bg-success rounded-pill",4,"ngIf"],["class","badge bg-danger rounded-pill",4,"ngIf"],["width","40","height","40","alt","Avatar",1,"rounded-circle","border","border-2","border-light","shadow-sm",3,"src"],[1,"fw-medium"],["class","badge bg-primary-subtle text-primary rounded-pill",4,"ngIf"],[1,"d-flex","flex-column","gap-1","small"],["class","d-flex align-items-center text-muted",4,"ngIf"],[1,"btn-group"],[1,"btn","btn-outline-primary","btn-sm",3,"routerLink"],[1,"bi","bi-pencil","me-1"],[1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"bi","bi-trash","me-1"],[1,"badge","bg-success","rounded-pill"],[1,"badge","bg-danger","rounded-pill"],[1,"badge","bg-primary-subtle","text-primary","rounded-pill"],[1,"d-flex","align-items-center","text-muted"],[1,"bi","bi-calendar","me-1"],[1,"bi","bi-clock","me-1"],[1,"bi","bi-credit-card","me-1"],["colspan","11",1,"text-center","py-4","text-muted"],[1,"d-flex","flex-column","align-items-center"],[1,"bg-light","rounded-circle","p-3","mb-2"],[1,"bi","bi-mortarboard","fs-5","text-muted"],[1,"card","mb-2","shadow-sm","border"],[1,"d-flex"],["width","50","height","50","alt","Avatar",1,"rounded-circle","border","border-2","border-light","shadow-sm",3,"src"],[1,"ms-3"],[1,"fw-medium","mb-0"],["class","badge bg-success rounded-pill ms-2",4,"ngIf"],["class","badge bg-danger rounded-pill ms-2",4,"ngIf"],[1,"text-muted","small","mb-1"],[1,"row","mt-2","g-2"],[1,"col-6"],[1,"bg-light","rounded","p-2"],[1,"text-muted","small","fw-medium","mb-1"],[1,"text-truncate"],[1,"small"],["class","d-flex align-items-center",4,"ngIf"],["class","text-muted",4,"ngIf"],[1,"d-flex","justify-content-end","gap-2","mt-2","border-top","pt-2"],[1,"badge","bg-success","rounded-pill","ms-2"],[1,"badge","bg-danger","rounded-pill","ms-2"],[1,"text-muted"],[1,"card","shadow-sm","text-center","p-4","text-muted"],[1,"mt-3"],[1,"d-flex","justify-content-between","align-items-center"],[1,"text-muted","small"],[1,"d-inline-block","ms-3"],[1,"text-muted","small","me-2"],[1,"form-select","form-select-sm","d-inline-block","w-auto",3,"ngModelChange","change","ngModel"],[3,"value"],["aria-label","Page navigation"],[1,"pagination","pagination-sm","mb-0"],[1,"page-item"],["aria-label","Previous",1,"page-link",3,"click"],["aria-hidden","true"],["class","page-item",3,"active",4,"ngFor","ngForOf"],["aria-label","Next",1,"page-link",3,"click"],[1,"page-link",3,"click"],[1,"d-inline-block","bg-danger","rounded-circle","me-1",2,"width","8px","height","8px"],["class","btn btn-success d-flex align-items-center shadow-sm",3,"click",4,"ngIf"],[1,"btn","btn-success","d-flex","align-items-center","shadow-sm",3,"click"],[1,"bi","bi-check-circle","me-1"],["class","badge bg-success-subtle text-success rounded-pill",4,"ngIf"],["class","badge bg-danger-subtle text-danger rounded-pill",4,"ngIf"],["class","badge bg-secondary-subtle text-secondary rounded-pill",4,"ngIf"],["class","text-muted small",4,"ngIf"],[1,"btn","btn-outline-success","btn-sm",3,"click"],[1,"bi","bi-x-circle","me-1"],[1,"badge","bg-success-subtle","text-success","rounded-pill"],[1,"badge","bg-danger-subtle","text-danger","rounded-pill"],[1,"badge","bg-secondary-subtle","text-secondary","rounded-pill"],["colspan","8",1,"text-center","py-4","text-muted"],[1,"bi","bi-person-plus","fs-5","text-muted"]],template:function(t,n){t&1&&(u(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),k(7,"i",7),f(),u(8,"div")(9,"h6",8),m(10,"Toplam Kullan\u0131c\u0131"),f(),u(11,"h4",9),m(12),f(),u(13,"div",10)(14,"span",11),m(15),f(),m(16," | "),u(17,"span",12),m(18),f()()()()()()(),u(19,"div",2)(20,"div",13)(21,"div",4)(22,"div",5)(23,"div",14),k(24,"i",15),f(),u(25,"div")(26,"h6",8),m(27,"\xD6\u011Frenciler"),f(),u(28,"h4",9),m(29),f(),u(30,"div",10)(31,"span",11),m(32),f(),m(33," | "),u(34,"span",12),m(35),f()()()()()()(),u(36,"div",2)(37,"div",16)(38,"div",4)(39,"div",5)(40,"div",17),k(41,"i",18),f(),u(42,"div")(43,"h6",8),m(44,"Onay Bekleyen"),f(),u(45,"h4",9),m(46),f(),u(47,"div",10)(48,"span",19),m(49),f(),m(50," | "),f()()()()()()(),u(51,"div",20)(52,"div",21)(53,"div",22)(54,"h4",23),m(55,"Kullan\u0131c\u0131 Y\xF6netimi"),f(),u(56,"div",24)(57,"div",25)(58,"span",26),k(59,"i",27),f(),u(60,"input",28),at("ngModelChange",function(o){return dt(n.searchQuery,o)||(n.searchQuery=o),o}),U("keyup.enter",function(){return n.onSearch()}),f(),ee(61,rae,2,0,"button",29),f(),u(62,"button",30),U("click",function(){return n.loadUsers()}),k(63,"i",31),m(64," Yenile "),f()()()(),u(65,"div",32)(66,"ul",33)(67,"li",34)(68,"a",35),U("click",function(){return n.setActiveTab("ogrenci")}),k(69,"i",36),m(70," \xD6\u011Frenciler "),f()(),u(71,"li",34)(72,"a",35),U("click",function(){return n.setActiveTab("yeni")}),k(73,"i",37),m(74," Yeni Kullan\u0131c\u0131lar "),ee(75,oae,2,1,"span",38),f()()(),u(76,"div",39),ee(77,Eae,45,6,"div",40)(78,Uae,36,7,"div",40),f()()()()),t&2&&(x(12),W(n.students.length+n.newUsers.length),x(3),he("",n.getActiveStudents()," Aktif"),x(3),he("",n.getInactiveStudents()," Pasif"),x(11),W(n.students.length),x(3),he("",n.getActiveStudents()," Aktif"),x(3),he("",n.getInactiveStudents()," Pasif"),x(11),W(n.newUsers.length),x(3),he("",n.getStudentsWaiting()," \xD6\u011Frenci"),x(11),st("ngModel",n.searchQuery),x(),S("ngIf",n.searchQuery),x(7),xe("active",n.activeTab==="ogrenci"),x(4),xe("active",n.activeTab==="yeni"),x(3),S("ngIf",n.newUsers.length>0),x(2),S("ngIf",n.activeTab==="ogrenci"),x(),S("ngIf",n.activeTab==="yeni"))},dependencies:[yt,lt,Kn,Yn,rn,qn,fn,Un,xi],styles:['@charset "UTF-8";.card.border-4[_ngcontent-%COMP%]{transition:all .3s ease}.card.border-4[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 .5rem 1rem #00000026!important}.icon-bg[_ngcontent-%COMP%]{width:45px;height:45px;display:flex;align-items:center;justify-content:center}.small[_ngcontent-%COMP%]{font-size:.875rem}.fw-medium[_ngcontent-%COMP%]{font-weight:500}.rounded-lg[_ngcontent-%COMP%]{border-radius:.5rem}.shadow-sm[_ngcontent-%COMP%]{box-shadow:0 .125rem .25rem #00000013!important}.bg-gradient-primary[_ngcontent-%COMP%]{background:linear-gradient(to right,var(--bs-primary),#3a87ff)!important}.nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{border:none;color:#6c757d;position:relative;transition:all .2s;font-weight:500}.nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{color:var(--bs-primary);background-color:rgba(var(--bs-primary-rgb),.05)}.nav-tabs[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:var(--bs-primary);background-color:transparent;border-bottom:2px solid var(--bs-primary)}@media (max-width: 767.98px){.card-body[_ngcontent-%COMP%]{padding:1rem}.table-responsive[_ngcontent-%COMP%]{border:none!important}.pagination[_ngcontent-%COMP%]{justify-content:center}}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .4s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.pagination[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{color:var(--bs-primary);border-radius:.25rem;margin:0 2px}.pagination[_ngcontent-%COMP%]   .page-item.active[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{background-color:var(--bs-primary);border-color:var(--bs-primary)}.form-select-sm[_ngcontent-%COMP%]{min-width:70px;padding-top:.25rem;padding-bottom:.25rem;font-size:.875rem}.bg-primary-subtle[_ngcontent-%COMP%]{background-color:rgba(var(--bs-primary-rgb),.1)}.bg-success-subtle[_ngcontent-%COMP%]{background-color:rgba(var(--bs-success-rgb),.1)}.bg-info-subtle[_ngcontent-%COMP%]{background-color:rgba(var(--bs-info-rgb),.1)}.bg-danger-subtle[_ngcontent-%COMP%]{background-color:rgba(var(--bs-danger-rgb),.1)}.bg-secondary-subtle[_ngcontent-%COMP%]{background-color:rgba(var(--bs-secondary-rgb),.1)}.btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-radius:.25rem;margin:0 1px}.card-header[_ngcontent-%COMP%], .card-body[_ngcontent-%COMP%]{padding:1rem}@media (min-width: 768px){.card-header[_ngcontent-%COMP%], .card-body[_ngcontent-%COMP%]{padding:1.25rem}}@media (min-width: 992px){.card-header[_ngcontent-%COMP%], .card-body[_ngcontent-%COMP%]{padding:1.5rem}}']})};function Hae(i,e){i&1&&(u(0,"div",102)(1,"div",103)(2,"span",104),m(3,"Y\xFCkleniyor..."),f()()())}function Gae(i,e){if(i&1&&(u(0,"span",115),m(1),ha(2,"date"),f()),i&2){let t=F().$implicit;x(),he(" ",ol(2,1,t.son_odeme_tarihi,"dd/MM")," ")}}function $ae(i,e){if(i&1&&(u(0,"div",108)(1,"div",109)(2,"div",84)(3,"h4"),m(4),f(),u(5,"p"),m(6),f()(),u(7,"div",110)(8,"span",111),m(9),f(),ee(10,Gae,3,4,"span",112),f()(),u(11,"div",113),k(12,"i",114),f()()),i&2){let t=e.$implicit,n=F(2);x(4),W(t.adi_soyadi),x(2),hn("",t.grubu," \u2022 ",t.ders_sayisi," ders"),x(3),W(n.formatCurrency(t.ucret)),x(),S("ngIf",t.son_odeme_tarihi)}}function Wae(i,e){i&1&&(u(0,"div",116),k(1,"i",117),u(2,"p"),m(3,"T\xFCm \xF6demeler tamamland\u0131!"),f()())}function qae(i,e){if(i&1&&(u(0,"div",105),ee(1,$ae,13,5,"div",106)(2,Wae,4,0,"div",107),f()),i&2){let t=F();x(),S("ngForOf",t.upcomingPayments.slice(0,3)),x(),S("ngIf",t.upcomingPayments.length===0)}}var C2=class i{constructor(e,t){this.http=e;this.router=t}groups=[];isLoading=!0;error=null;searchQuery="";upcomingPayments=[];isLoadingPayments=!1;groupColors=["#4f46e5","#06b6d4","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899","#84cc16","#f97316","#6366f1","#14b8a6","#eab308"];ngOnInit(){this.loadStudents(),this.loadUpcomingPayments()}loadStudents(){this.isLoading=!0,this.error=null;let e="",t=null,n=localStorage.getItem("user")||sessionStorage.getItem("user");n&&(t=JSON.parse(n),e=t.token||"",console.log("Gruplar sayfas\u0131 - User bilgileri:",{id:t.id,name:t.adi_soyadi,userRole:t.rutbe}));let r=new xt({Authorization:`Bearer ${e}`});this.http.get("./server/api/ogrenciler_listesi.php",{headers:r}).subscribe({next:o=>{o.success?this.organizeStudentsByGroups(o.data):this.error=o.message||"\xD6\u011Frenci verileri y\xFCklenirken hata olu\u015Ftu.",this.isLoading=!1},error:o=>{this.error="Sunucu hatas\u0131: "+(o.error?.message||o.message),this.isLoading=!1}})}organizeStudentsByGroups(e){let t="",n=null,r=localStorage.getItem("user")||sessionStorage.getItem("user");r&&(n=JSON.parse(r),t=n.token||"");let o=new Map,s=n?.adi_soyadi||"";e.filter(l=>l.rutbe==="ogrenci"&&l.ogretmeni===s).forEach(l=>{let c=l.grubu||"Grup Atanmam\u0131\u015F";o.has(c)||o.set(c,[]),o.get(c).push(l)}),this.groups=Array.from(o.entries()).map(([l,c],d)=>({name:l,students:c,studentCount:c.length,color:this.groupColors[d%this.groupColors.length]})),this.groups.sort((l,c)=>l.name==="Grup Atanmam\u0131\u015F"?1:c.name==="Grup Atanmam\u0131\u015F"?-1:l.name.localeCompare(c.name))}get filteredGroups(){if(!this.searchQuery.trim())return this.groups;let e=this.searchQuery.toLowerCase().trim();return this.groups.map(t=>ot(Ie({},t),{students:t.students.filter(n=>n.adi_soyadi.toLowerCase().includes(e)||n.email.toLowerCase().includes(e)||t.name.toLowerCase().includes(e))})).filter(t=>t.students.length>0)}getTotalStudents(){return this.groups.reduce((e,t)=>e+t.studentCount,0)}getActiveStudents(){return this.groups.reduce((e,t)=>e+t.students.filter(n=>n.aktif).length,0)}getInactiveStudents(){return this.groups.reduce((e,t)=>e+t.students.filter(n=>!n.aktif).length,0)}deleteStudent(e){if(confirm("Bu \xF6\u011Frenciyi silmek istedi\u011Finizden emin misiniz?")){let t="",n=localStorage.getItem("user")||sessionStorage.getItem("user");n&&(t=JSON.parse(n).token||"");let r=new xt({Authorization:`Bearer ${t}`});this.http.delete(`./server/api/ogrenci_sil.php?id=${e}`,{headers:r}).subscribe({next:o=>{o.success?this.loadStudents():alert("\xD6\u011Frenci silinirken hata olu\u015Ftu: "+o.message)},error:o=>{alert("Sunucu hatas\u0131: "+o.message)}})}}viewGroupDetail(e){let t=encodeURIComponent(e);this.router.navigate(["/ogretmen-sayfasi/ogretmen-gruplar-detay-sayfasi",t])}goToAttendance(e){let t=encodeURIComponent(e);this.router.navigate(["/ogretmen-sayfasi/devamsizlik",t])}isSidebarOpen=!0;teacherName="";teacherAvatar="";totalStudents=127;activeStudents=95;totalGroups=8;activeGroups=6;totalTopics=24;completedTopics=18;totalExams=12;pendingExams=3;loadTeacherInfo(){let e=localStorage.getItem("user")||sessionStorage.getItem("user");if(e)try{let t=JSON.parse(e);this.teacherName=t.adi_soyadi||"\xD6\u011Fretmen",t.avatar&&t.avatar.trim()!==""?this.teacherAvatar=t.avatar:this.teacherAvatar=`https://ui-avatars.com/api/?name=${encodeURIComponent(this.teacherName)}&background=4f46e5&color=fff&size=40&font-size=0.6&rounded=true`,console.log("\xD6\u011Fretmen bilgileri y\xFCklendi:",{id:t.id,name:this.teacherName,avatar:this.teacherAvatar,userRole:t.rutbe})}catch(t){console.error("Kullan\u0131c\u0131 bilgileri ayr\u0131\u015Ft\u0131r\u0131l\u0131rken hata:",t),this.setDefaultTeacherInfo()}else console.warn("Kullan\u0131c\u0131 giri\u015F bilgisi bulunamad\u0131"),this.setDefaultTeacherInfo()}setDefaultTeacherInfo(){this.teacherName="\xD6\u011Fretmen",this.teacherAvatar="https://ui-avatars.com/api/?name=\xD6\u011Fretmen&background=6c757d&color=fff&size=40&font-size=0.6&rounded=true"}toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen,localStorage.setItem("sidebarOpen",JSON.stringify(this.isSidebarOpen))}checkScreenSize(){if(window.innerWidth<768)this.isSidebarOpen=!1;else{let e=localStorage.getItem("sidebarOpen");this.isSidebarOpen=e?JSON.parse(e):!0}}loadUpcomingPayments(){this.isLoadingPayments=!0;let e="",t=localStorage.getItem("user")||sessionStorage.getItem("user");t&&(e=JSON.parse(t).token||"");let n=new xt({Authorization:`Bearer ${e}`});this.http.get("./server/api/yaklasan_odemeler.php",{headers:n}).subscribe({next:r=>{r.success?this.upcomingPayments=r.data||[]:console.error("Yakla\u015Fan \xF6demeler y\xFCklenirken hata:",r.message),this.isLoadingPayments=!1},error:r=>{console.error("Yakla\u015Fan \xF6demeler API hatas\u0131:",r),this.isLoadingPayments=!1}})}formatCurrency(e){let t=typeof e=="string"?parseFloat(e):e;return new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(t||0)}static \u0275fac=function(t){return new(t||i)(ke(gt),ke(an))};static \u0275cmp=Ke({type:i,selectors:[["app-ogretmen-ana-sayfasi"]],standalone:!1,decls:313,vars:6,consts:[[1,"attendance-container"],[1,"modern-page-header"],[1,"header-content"],[1,"header-text"],[1,"modern-page-title"],[1,"bi","bi-people-fill","me-2"],[1,"modern-page-description"],[1,"admin-overview"],[1,"stat-card","mavi"],[1,"stat-icon"],[1,"fas","fa-users"],[1,"stat-content"],[1,"stat-card","yesil"],[1,"fas","fa-user-graduate"],[1,"stat-card","turuncu"],[1,"stat-card","k\u0131rm\u0131z\u0131"],[1,"fas","fa-chalkboard-teacher"],[1,"admin-grid"],[1,"admin-container","grid-6"],[1,"card-header"],[1,"card-actions"],[1,"btn-icon"],[1,"fas","fa-ellipsis-h"],[1,"card-body"],[1,"action-grid"],["href","/ogretmen-ders-anlatma-tahtasi",1,"action-item"],[1,"action-icon","primary"],[1,"fas","fa-chalkboard"],["href","/ogretmen-gruplar-sayfasi",1,"action-item"],[1,"action-icon","success"],["href","/ogretmen-ogrenci-listesi",1,"action-item"],[1,"action-icon","warning"],[1,"fas","fa-user-plus"],["href","/ogretmen-raporlar",1,"action-item"],[1,"action-icon","info"],[1,"fas","fa-chart-bar"],[1,"badge"],[1,"activity-list"],[1,"activity-item"],[1,"activity-avatar","primary"],[1,"fas","fa-user"],[1,"activity-content"],[1,"time"],[1,"activity-avatar","success"],[1,"fas","fa-check"],[1,"activity-avatar","warning"],[1,"fas","fa-clock"],[1,"activity-avatar","info"],[1,"fas","fa-file-alt"],[1,"activity-footer"],["href","#",1,"view-all"],[1,"admin-container","grid-8"],[1,"period-select"],[1,"chart-placeholder"],[1,"chart-bars"],[1,"bar",2,"height","60%"],[1,"bar",2,"height","80%"],[1,"bar",2,"height","45%"],[1,"bar",2,"height","90%"],[1,"bar",2,"height","70%"],[1,"bar",2,"height","85%"],[1,"bar",2,"height","65%"],[1,"chart-legend"],[1,"legend-item"],[1,"dot","primary"],[1,"dot","success"],[1,"admin-container","grid-4"],["href","/ogretmen-sayfasi/ogretmen-ucret-sayfasi",1,"btn-primary","btn-sm"],["class","text-center py-3",4,"ngIf"],["class","payment-list",4,"ngIf"],["href","#",1,"btn-primary","btn-sm"],[1,"class-list"],[1,"class-item"],[1,"class-time"],[1,"duration"],[1,"class-info"],[1,"class-status","active"],[1,"fas","fa-play"],[1,"class-status","pending"],[1,"progress-list"],[1,"progress-item"],[1,"student-info"],[1,"student-avatar"],["src","https://ui-avatars.com/api/?name=Ahmet+Yilmaz&background=6366f1&color=fff","alt","AY"],[1,"student-details"],[1,"progress-bar"],[1,"progress-fill",2,"width","85%"],[1,"progress-text"],["src","https://ui-avatars.com/api/?name=Fatma+Kaya&background=10b981&color=fff","alt","FK"],[1,"progress-fill",2,"width","92%"],["src","https://ui-avatars.com/api/?name=Mehmet+Demir&background=f59e0b&color=fff","alt","MD"],[1,"progress-fill",2,"width","78%"],[1,"stats-mini"],[1,"mini-stat"],[1,"mini-icon","primary"],[1,"fas","fa-book"],[1,"mini-content"],[1,"mini-icon","success"],[1,"fas","fa-check-circle"],[1,"mini-icon","warning"],[1,"mini-icon","info"],[1,"fas","fa-star"],[1,"text-center","py-3"],["role","status",1,"spinner-border","spinner-border-sm","text-primary"],[1,"visually-hidden"],[1,"payment-list"],["class","payment-item",4,"ngFor","ngForOf"],["class","no-payments",4,"ngIf"],[1,"payment-item"],[1,"payment-info"],[1,"payment-amount"],[1,"amount"],["class","due-date",4,"ngIf"],[1,"payment-status","pending"],[1,"bi","bi-clock"],[1,"due-date"],[1,"no-payments"],[1,"bi","bi-check-circle","text-success"]],template:function(t,n){t&1&&(u(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),k(5,"i",5),m(6," \xD6\u011Frenci Gruplar\u0131 "),f(),u(7,"p",6),m(8," \xD6\u011Frencilerinizi gruplar\u0131na g\xF6re y\xF6netin ve devams\u0131zl\u0131k takibi yap\u0131n "),f()(),u(9,"div",7)(10,"div",8)(11,"div",9),k(12,"i",10),f(),u(13,"div",11)(14,"h3"),m(15),f(),u(16,"p"),m(17,"Toplam \xD6\u011Frenci"),f()()(),u(18,"div",12)(19,"div",9),k(20,"i",13),f(),u(21,"div",11)(22,"h3"),m(23),f(),u(24,"p"),m(25,"Aktif \xD6\u011Frenci"),f()()(),u(26,"div",14)(27,"div",9),k(28,"i",10),f(),u(29,"div",11)(30,"h3"),m(31),f(),u(32,"p"),m(33,"Pasit \xD6\u011Frenci"),f()()(),u(34,"div",15)(35,"div",9),k(36,"i",16),f(),u(37,"div",11)(38,"h3"),m(39),f(),u(40,"p"),m(41,"Aktif Grup"),f()()()()()(),u(42,"div",17)(43,"div",18)(44,"div",19)(45,"h3"),m(46,"H\u0131zl\u0131 \u0130\u015Flemler"),f(),u(47,"div",20)(48,"button",21),k(49,"i",22),f()()(),u(50,"div",23)(51,"div",24)(52,"a",25)(53,"div",26),k(54,"i",27),f(),u(55,"span"),m(56,"Ders Ba\u015Flat"),f()(),u(57,"a",28)(58,"div",29),k(59,"i",10),f(),u(60,"span"),m(61,"Grup Y\xF6netimi"),f()(),u(62,"a",30)(63,"div",31),k(64,"i",32),f(),u(65,"span"),m(66,"\xD6\u011Frenci Ekle"),f()(),u(67,"a",33)(68,"div",34),k(69,"i",35),f(),u(70,"span"),m(71,"Raporlar"),f()()()()(),u(72,"div",18)(73,"div",19)(74,"h3"),m(75,"Son Aktiviteler"),f(),u(76,"div",20)(77,"span",36),m(78,"Bug\xFCn"),f()()(),u(79,"div",23)(80,"div",37)(81,"div",38)(82,"div",39),k(83,"i",40),f(),u(84,"div",41)(85,"p")(86,"strong"),m(87,"Ahmet Y\u0131lmaz"),f(),m(88," gruba kat\u0131ld\u0131"),f(),u(89,"span",42),m(90,"2 saat \xF6nce"),f()()(),u(91,"div",38)(92,"div",43),k(93,"i",44),f(),u(94,"div",41)(95,"p")(96,"strong"),m(97,"Asit-Baz Konusu"),f(),m(98," tamamland\u0131"),f(),u(99,"span",42),m(100,"4 saat \xF6nce"),f()()(),u(101,"div",38)(102,"div",45),k(103,"i",46),f(),u(104,"div",41)(105,"p")(106,"strong"),m(107,"Grup B"),f(),m(108," dersi ba\u015Flad\u0131"),f(),u(109,"span",42),m(110,"6 saat \xF6nce"),f()()(),u(111,"div",38)(112,"div",47),k(113,"i",48),f(),u(114,"div",41)(115,"p")(116,"strong"),m(117,"Yeni s\u0131nav"),f(),m(118," olu\u015Fturuldu"),f(),u(119,"span",42),m(120,"1 g\xFCn \xF6nce"),f()()()(),u(121,"div",49)(122,"a",50),m(123,"T\xFCm\xFCn\xFC G\xF6r"),f()()()(),u(124,"div",51)(125,"div",19)(126,"h3"),m(127,"Haftal\u0131k Performans"),f(),u(128,"div",20)(129,"select",52)(130,"option"),m(131,"Bu Hafta"),f(),u(132,"option"),m(133,"Bu Ay"),f(),u(134,"option"),m(135,"Bu Y\u0131l"),f()()()(),u(136,"div",23)(137,"div",53)(138,"div",54)(139,"div",55)(140,"span"),m(141,"P"),f()(),u(142,"div",56)(143,"span"),m(144,"S"),f()(),u(145,"div",57)(146,"span"),m(147,"\xC7"),f()(),u(148,"div",58)(149,"span"),m(150,"P"),f()(),u(151,"div",59)(152,"span"),m(153,"C"),f()(),u(154,"div",60)(155,"span"),m(156,"C"),f()(),u(157,"div",61)(158,"span"),m(159,"P"),f()()(),u(160,"div",62)(161,"div",63),k(162,"span",64),u(163,"span"),m(164,"Ders Say\u0131s\u0131"),f()(),u(165,"div",63),k(166,"span",65),u(167,"span"),m(168,"Kat\u0131l\u0131m"),f()()()()()(),u(169,"div",66)(170,"div",19)(171,"h3"),m(172,"Yakla\u015Fan \xD6demeler"),f(),u(173,"div",20)(174,"a",67),m(175,"T\xFCm\xFCn\xFC G\xF6r"),f()()(),u(176,"div",23),ee(177,Hae,4,0,"div",68)(178,qae,3,2,"div",69),f()(),u(179,"div",66)(180,"div",19)(181,"h3"),m(182,"Yakla\u015Fan Dersler"),f(),u(183,"div",20)(184,"a",70),m(185,"Yeni Ekle"),f()()(),u(186,"div",23)(187,"div",71)(188,"div",72)(189,"div",73)(190,"span",42),m(191,"14:00"),f(),u(192,"span",74),m(193,"1.5 saat"),f()(),u(194,"div",75)(195,"h4"),m(196,"Asit ve Bazlar"),f(),u(197,"p"),m(198,"Grup A \u2022 12 \xD6\u011Frenci"),f()(),u(199,"div",76),k(200,"i",77),f()(),u(201,"div",72)(202,"div",73)(203,"span",42),m(204,"16:30"),f(),u(205,"span",74),m(206,"2 saat"),f()(),u(207,"div",75)(208,"h4"),m(209,"Organik Kimya"),f(),u(210,"p"),m(211,"Grup C \u2022 8 \xD6\u011Frenci"),f()(),u(212,"div",78),k(213,"i",46),f()(),u(214,"div",72)(215,"div",73)(216,"span",42),m(217,"19:00"),f(),u(218,"span",74),m(219,"1 saat"),f()(),u(220,"div",75)(221,"h4"),m(222,"Kimyasal Denge"),f(),u(223,"p"),m(224,"Grup B \u2022 15 \xD6\u011Frenci"),f()(),u(225,"div",78),k(226,"i",46),f()()()()(),u(227,"div",18)(228,"div",19)(229,"h3"),m(230,"\xD6\u011Frenci \u0130lerlemesi"),f(),u(231,"div",20)(232,"a",50),m(233,"Detaylar"),f()()(),u(234,"div",23)(235,"div",79)(236,"div",80)(237,"div",81)(238,"div",82),k(239,"img",83),f(),u(240,"div",84)(241,"h4"),m(242,"Ahmet Y\u0131lmaz"),f(),u(243,"p"),m(244,"Organik Kimya"),f()()(),u(245,"div",85),k(246,"div",86),u(247,"span",87),m(248,"85%"),f()()(),u(249,"div",80)(250,"div",81)(251,"div",82),k(252,"img",88),f(),u(253,"div",84)(254,"h4"),m(255,"Fatma Kaya"),f(),u(256,"p"),m(257,"Asit-Baz"),f()()(),u(258,"div",85),k(259,"div",89),u(260,"span",87),m(261,"92%"),f()()(),u(262,"div",80)(263,"div",81)(264,"div",82),k(265,"img",90),f(),u(266,"div",84)(267,"h4"),m(268,"Mehmet Demir"),f(),u(269,"p"),m(270,"Kimyasal Denge"),f()()(),u(271,"div",85),k(272,"div",91),u(273,"span",87),m(274,"78%"),f()()()()()(),u(275,"div",18)(276,"div",19)(277,"h3"),m(278,"\xD6zet \u0130statistikler"),f()(),u(279,"div",23)(280,"div",92)(281,"div",93)(282,"div",94),k(283,"i",95),f(),u(284,"div",96)(285,"h4"),m(286,"24"),f(),u(287,"p"),m(288,"Toplam Ders"),f()()(),u(289,"div",93)(290,"div",97),k(291,"i",98),f(),u(292,"div",96)(293,"h4"),m(294,"18"),f(),u(295,"p"),m(296,"Tamamlanan"),f()()(),u(297,"div",93)(298,"div",99),k(299,"i",46),f(),u(300,"div",96)(301,"h4"),m(302,"6"),f(),u(303,"p"),m(304,"Bekleyen"),f()()(),u(305,"div",93)(306,"div",100),k(307,"i",101),f(),u(308,"div",96)(309,"h4"),m(310,"4.8"),f(),u(311,"p"),m(312,"Ortalama"),f()()()()()()()()),t&2&&(x(15),W(n.getTotalStudents()),x(8),W(n.getActiveStudents()),x(8),W(n.getInactiveStudents()),x(8),W(n.groups.length),x(138),S("ngIf",n.isLoadingPayments),x(),S("ngIf",!n.isLoadingPayments))},dependencies:[yt,lt,Kn,Yn,cc],styles:[".dashboard-container[_ngcontent-%COMP%]{padding:10px;height:auto;margin-top:15px}@media (max-width: 768px){.dashboard-container[_ngcontent-%COMP%]{padding:16px}}.dashboard-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(12,1fr);gap:24px}@media (max-width: 1200px){.dashboard-grid[_ngcontent-%COMP%]{gap:20px}}@media (max-width: 768px){.dashboard-grid[_ngcontent-%COMP%]{gap:16px;grid-template-columns:1fr}}.dashboard-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;box-shadow:0 4px 12px #0000000d;overflow:hidden;transition:all .3s ease}.dashboard-card[_ngcontent-%COMP%]:hover{box-shadow:0 8px 24px #0000001a}.dashboard-card.quick-actions[_ngcontent-%COMP%]{grid-column:span 6}@media (max-width: 768px){.dashboard-card.quick-actions[_ngcontent-%COMP%]{grid-column:span 1}}.dashboard-card.activities[_ngcontent-%COMP%]{grid-column:span 6}@media (max-width: 768px){.dashboard-card.activities[_ngcontent-%COMP%]{grid-column:span 1}}.dashboard-card.chart-card[_ngcontent-%COMP%]{grid-column:span 8}@media (max-width: 768px){.dashboard-card.chart-card[_ngcontent-%COMP%]{grid-column:span 1}}.dashboard-card.upcoming-classes[_ngcontent-%COMP%]{grid-column:span 4}@media (max-width: 768px){.dashboard-card.upcoming-classes[_ngcontent-%COMP%]{grid-column:span 1}}.dashboard-card.student-progress[_ngcontent-%COMP%]{grid-column:span 6}@media (max-width: 768px){.dashboard-card.student-progress[_ngcontent-%COMP%]{grid-column:span 1}}.dashboard-card.quick-stats[_ngcontent-%COMP%]{grid-column:span 6}@media (max-width: 768px){.dashboard-card.quick-stats[_ngcontent-%COMP%]{grid-column:span 1}}.dashboard-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:24px 24px 0;display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid #f1f5f9;margin-bottom:24px}.dashboard-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#1e293b;margin:0}.dashboard-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.dashboard-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{width:32px;height:32px;border:none;background:#f8fafc;border-radius:8px;display:flex;align-items:center;justify-content:center;color:#64748b;cursor:pointer;transition:all .2s}.dashboard-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]:hover{background:#e2e8f0;color:#475569}.dashboard-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{background:#f1f5f9;color:#475569;padding:4px 12px;border-radius:20px;font-size:12px;font-weight:500}.dashboard-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   .period-select[_ngcontent-%COMP%]{border:1px solid #e2e8f0;border-radius:8px;padding:6px 12px;font-size:12px;background:#fff;color:#475569;cursor:pointer}.dashboard-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   .period-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#6366f1}@media (max-width: 768px){.dashboard-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:20px 20px 0;margin-bottom:20px}.dashboard-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px}}.dashboard-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:0 24px 24px}@media (max-width: 768px){.dashboard-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:0 20px 20px}}.action-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:16px}@media (max-width: 768px){.action-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}.action-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:20px;border-radius:12px;background:#f8fafc;text-decoration:none;color:#475569;transition:all .3s ease;border:2px solid transparent}.action-item[_ngcontent-%COMP%]:hover{background:#fff;border-color:#e2e8f0;transform:translateY(-2px);box-shadow:0 4px 12px #0000001a;color:#1e293b}.action-item[_ngcontent-%COMP%]   .action-icon[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:12px;display:flex;align-items:center;justify-content:center;color:#fff;font-size:20px;margin-bottom:12px}.action-item[_ngcontent-%COMP%]   .action-icon.primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6366f1,#4f46e5)}.action-item[_ngcontent-%COMP%]   .action-icon.success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669)}.action-item[_ngcontent-%COMP%]   .action-icon.warning[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#d97706)}.action-item[_ngcontent-%COMP%]   .action-icon.info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#2563eb)}.action-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px;font-weight:500;text-align:center}@media (max-width: 768px){.action-item[_ngcontent-%COMP%]{padding:16px}.action-item[_ngcontent-%COMP%]   .action-icon[_ngcontent-%COMP%]{width:40px;height:40px;font-size:18px}.action-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px}}.activity-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.activity-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px}.activity-item[_ngcontent-%COMP%]   .activity-avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:10px;display:flex;align-items:center;justify-content:center;color:#fff;font-size:16px;flex-shrink:0}.activity-item[_ngcontent-%COMP%]   .activity-avatar.primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6366f1,#4f46e5)}.activity-item[_ngcontent-%COMP%]   .activity-avatar.success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669)}.activity-item[_ngcontent-%COMP%]   .activity-avatar.warning[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#d97706)}.activity-item[_ngcontent-%COMP%]   .activity-avatar.info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#2563eb)}.activity-item[_ngcontent-%COMP%]   .activity-content[_ngcontent-%COMP%]{flex:1}.activity-item[_ngcontent-%COMP%]   .activity-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 4px;color:#1e293b;font-size:14px;line-height:1.4}.activity-item[_ngcontent-%COMP%]   .activity-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:600}.activity-item[_ngcontent-%COMP%]   .activity-content[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-size:12px;color:#64748b}.activity-footer[_ngcontent-%COMP%]{margin-top:20px;padding-top:20px;border-top:1px solid #f1f5f9;text-align:center}.activity-footer[_ngcontent-%COMP%]   .view-all[_ngcontent-%COMP%]{color:#6366f1;text-decoration:none;font-size:14px;font-weight:500}.activity-footer[_ngcontent-%COMP%]   .view-all[_ngcontent-%COMP%]:hover{text-decoration:underline}.chart-placeholder[_ngcontent-%COMP%]{height:200px;display:flex;flex-direction:column;justify-content:space-between}.chart-placeholder[_ngcontent-%COMP%]   .chart-bars[_ngcontent-%COMP%]{display:flex;align-items:end;justify-content:space-around;height:150px;gap:8px}.chart-placeholder[_ngcontent-%COMP%]   .chart-bars[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6366f1,#4f46e5);border-radius:4px 4px 0 0;flex:1;position:relative;display:flex;align-items:end;justify-content:center;min-height:20px}.chart-placeholder[_ngcontent-%COMP%]   .chart-bars[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff;font-size:10px;font-weight:600;padding-bottom:4px}.chart-placeholder[_ngcontent-%COMP%]   .chart-legend[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:24px;margin-top:16px}.chart-placeholder[_ngcontent-%COMP%]   .chart-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:12px;color:#64748b}.chart-placeholder[_ngcontent-%COMP%]   .chart-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%}.chart-placeholder[_ngcontent-%COMP%]   .chart-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .dot.primary[_ngcontent-%COMP%]{background:#6366f1}.chart-placeholder[_ngcontent-%COMP%]   .chart-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .dot.success[_ngcontent-%COMP%]{background:#10b981}.payment-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.payment-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:16px;background:#f8fafc;border-radius:12px;transition:all .2s}.payment-item[_ngcontent-%COMP%]:hover{background:#f1f5f9}.payment-item[_ngcontent-%COMP%]   .payment-info[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:space-between;align-items:center}.payment-item[_ngcontent-%COMP%]   .payment-info[_ngcontent-%COMP%]   .student-details[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 4px;font-size:14px;font-weight:600;color:#1e293b}.payment-item[_ngcontent-%COMP%]   .payment-info[_ngcontent-%COMP%]   .student-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:12px;color:#64748b}.payment-item[_ngcontent-%COMP%]   .payment-info[_ngcontent-%COMP%]   .payment-amount[_ngcontent-%COMP%]{text-align:right}.payment-item[_ngcontent-%COMP%]   .payment-info[_ngcontent-%COMP%]   .payment-amount[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{display:block;font-size:16px;font-weight:600;color:#059669;margin-bottom:2px}.payment-item[_ngcontent-%COMP%]   .payment-info[_ngcontent-%COMP%]   .payment-amount[_ngcontent-%COMP%]   .due-date[_ngcontent-%COMP%]{font-size:11px;color:#f59e0b;font-weight:500}.payment-item[_ngcontent-%COMP%]   .payment-status[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:14px}.payment-item[_ngcontent-%COMP%]   .payment-status.pending[_ngcontent-%COMP%]{background:#f59e0b1a;color:#d97706}.no-payments[_ngcontent-%COMP%]{text-align:center;padding:20px;color:#64748b}.no-payments[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:24px;margin-bottom:8px}.no-payments[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px}.class-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.class-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:16px;background:#f8fafc;border-radius:12px;transition:all .2s}.class-item[_ngcontent-%COMP%]:hover{background:#f1f5f9}.class-item[_ngcontent-%COMP%]   .class-time[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;min-width:60px}.class-item[_ngcontent-%COMP%]   .class-time[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#1e293b}.class-item[_ngcontent-%COMP%]   .class-time[_ngcontent-%COMP%]   .duration[_ngcontent-%COMP%]{font-size:11px;color:#64748b}.class-item[_ngcontent-%COMP%]   .class-info[_ngcontent-%COMP%]{flex:1}.class-item[_ngcontent-%COMP%]   .class-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 4px;font-size:14px;font-weight:600;color:#1e293b}.class-item[_ngcontent-%COMP%]   .class-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:12px;color:#64748b}.class-item[_ngcontent-%COMP%]   .class-status[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:14px}.class-item[_ngcontent-%COMP%]   .class-status.active[_ngcontent-%COMP%]{background:#10b9811a;color:#059669}.class-item[_ngcontent-%COMP%]   .class-status.pending[_ngcontent-%COMP%]{background:#f59e0b1a;color:#d97706}.progress-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.progress-item[_ngcontent-%COMP%]   .student-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:12px}.progress-item[_ngcontent-%COMP%]   .student-info[_ngcontent-%COMP%]   .student-avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:10px;overflow:hidden}.progress-item[_ngcontent-%COMP%]   .student-info[_ngcontent-%COMP%]   .student-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.progress-item[_ngcontent-%COMP%]   .student-info[_ngcontent-%COMP%]   .student-details[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 2px;font-size:14px;font-weight:600;color:#1e293b}.progress-item[_ngcontent-%COMP%]   .student-info[_ngcontent-%COMP%]   .student-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:12px;color:#64748b}.progress-item[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{position:relative;height:8px;background:#f1f5f9;border-radius:4px;overflow:hidden}.progress-item[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#6366f1,#4f46e5);border-radius:4px;transition:width .5s ease}.progress-item[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .progress-text[_ngcontent-%COMP%]{position:absolute;right:0;top:-20px;font-size:11px;font-weight:600;color:#6366f1}.stats-mini[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:20px}@media (max-width: 768px){.stats-mini[_ngcontent-%COMP%]{gap:16px}}.mini-stat[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.mini-stat[_ngcontent-%COMP%]   .mini-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:10px;display:flex;align-items:center;justify-content:center;color:#fff;font-size:16px}.mini-stat[_ngcontent-%COMP%]   .mini-icon.primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6366f1,#4f46e5)}.mini-stat[_ngcontent-%COMP%]   .mini-icon.success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669)}.mini-stat[_ngcontent-%COMP%]   .mini-icon.warning[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#d97706)}.mini-stat[_ngcontent-%COMP%]   .mini-icon.info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#2563eb)}.mini-stat[_ngcontent-%COMP%]   .mini-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 2px;font-size:18px;font-weight:700;color:#1e293b}.mini-stat[_ngcontent-%COMP%]   .mini-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:11px;color:#64748b}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6366f1,#4f46e5);color:#fff;border:none;padding:8px 16px;border-radius:8px;font-size:13px;font-weight:500;text-decoration:none;display:inline-flex;align-items:center;gap:6px;cursor:pointer;transition:all .2s}.btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #6366f14d}.btn-primary.btn-sm[_ngcontent-%COMP%]{padding:6px 12px;font-size:12px}.view-all[_ngcontent-%COMP%]{color:#6366f1;text-decoration:none;font-size:13px;font-weight:500}.view-all[_ngcontent-%COMP%]:hover{text-decoration:underline}@media (max-width: 1200px){.dashboard-card.quick-actions[_ngcontent-%COMP%], .dashboard-card.activities[_ngcontent-%COMP%]{grid-column:span 12}.dashboard-card.chart-card[_ngcontent-%COMP%]{grid-column:span 8}.dashboard-card.upcoming-classes[_ngcontent-%COMP%]{grid-column:span 4}.dashboard-card.student-progress[_ngcontent-%COMP%], .dashboard-card.quick-stats[_ngcontent-%COMP%]{grid-column:span 6}}@media (max-width: 768px){.dashboard-card.quick-actions[_ngcontent-%COMP%], .dashboard-card.activities[_ngcontent-%COMP%], .dashboard-card.chart-card[_ngcontent-%COMP%], .dashboard-card.upcoming-classes[_ngcontent-%COMP%], .dashboard-card.student-progress[_ngcontent-%COMP%], .dashboard-card.quick-stats[_ngcontent-%COMP%]{grid-column:span 1}.action-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.stats-mini[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};var Kae=i=>["/ogretmen-sayfasi/ogretmen-ogrenci-detay-sayfasi",i];function Yae(i,e){if(i&1){let t=Ae();u(0,"button",28),U("click",function(){K(t);let r=F();return Y(r.searchQuery="")}),k(1,"i",29),f()}}function Xae(i,e){i&1&&(u(0,"div",30)(1,"div",31),k(2,"div",32),u(3,"p"),m(4,"Gruplar y\xFCkleniyor..."),f()()())}function Qae(i,e){if(i&1){let t=Ae();u(0,"div",33)(1,"div",34),k(2,"i",35),u(3,"h3"),m(4,"Hata Olu\u015Ftu"),f(),u(5,"p"),m(6),f(),u(7,"button",36),U("click",function(){K(t);let r=F();return Y(r.loadStudents())}),k(8,"i",37),m(9," Tekrar Dene "),f()()()}if(i&2){let t=F();x(6),W(t.error)}}function Jae(i,e){i&1&&(u(0,"div",61)(1,"div",62),k(2,"i",63),f(),u(3,"p"),m(4,"Bu grupta hen\xFCz \xF6\u011Frenci bulunmuyor"),f()())}function Zae(i,e){if(i&1&&(u(0,"span",77),k(1,"i",78),m(2),f()),i&2){let t=F().$implicit;x(2),he(" ",t.sinifi," ")}}function ele(i,e){if(i&1&&(u(0,"span",77),k(1,"i",79),m(2),f()),i&2){let t=F().$implicit;x(2),he(" ",t.okulu," ")}}function tle(i,e){if(i&1&&(u(0,"span",77),k(1,"i",80),m(2),f()),i&2){let t=F().$implicit;x(2),hn(" ",t.ders_gunu," - ",t.ders_saati," ")}}function nle(i,e){i&1&&(u(0,"span",77),k(1,"i",81),m(2," G\xFCncelle "),f())}function ile(i,e){if(i&1&&(u(0,"div",66)(1,"div",67),k(2,"img",68),u(3,"div",69),k(4,"i",70),f()(),u(5,"div",71)(6,"h4",72),m(7),f(),u(8,"p",73),m(9),f(),u(10,"div",74),ee(11,Zae,3,1,"span",75)(12,ele,3,1,"span",75)(13,tle,3,2,"span",75),u(14,"a",76),ee(15,nle,3,0,"span",75),f()()()()),i&2){let t=e.$implicit,n=F(4);x(2),S("src",t.avatar||n.getDefaultAvatar(t.adi_soyadi),vt)("alt",t.adi_soyadi),x(),xe("active",t.aktif)("inactive",!t.aktif),x(),xe("bi-check-circle-fill",t.aktif)("bi-x-circle-fill",!t.aktif),x(3),W(t.adi_soyadi),x(2),W(t.email),x(2),S("ngIf",t.sinifi),x(),S("ngIf",t.okulu),x(),S("ngIf",t.ders_gunu&&t.ders_saati),x(),S("routerLink",Do(17,Kae,t.id)),x(),S("ngIf",t.ders_gunu&&t.ders_saati)}}function rle(i,e){if(i&1&&(u(0,"div",64),ee(1,ile,16,19,"div",65),f()),i&2){let t=F().$implicit;x(),S("ngForOf",t.students)}}function ole(i,e){if(i&1){let t=Ae();u(0,"div",40)(1,"div",41)(2,"div",42)(3,"div",43),k(4,"i",15),f(),u(5,"div",44)(6,"h2",45),m(7),f(),u(8,"div",46)(9,"span",47),k(10,"i",48),m(11),f(),u(12,"span",49),k(13,"i",50),m(14),f(),u(15,"span",51),k(16,"i",52),m(17),f()()()(),u(18,"div",53)(19,"button",54),U("click",function(){let r=K(t).$implicit,o=F(2);return Y(o.viewGroupDetail(r.name))}),k(20,"i",55),u(21,"span"),m(22,"Detay G\xF6r\xFCnt\xFCle"),f()(),u(23,"button",56),U("click",function(){let r=K(t).$implicit,o=F(2);return Y(o.goToAttendance(r.name))}),k(24,"i",57),u(25,"span"),m(26,"Yoklama Al"),f()()()(),u(27,"div",58),ee(28,Jae,5,0,"div",59)(29,rle,2,1,"div",60),f()()}if(i&2){let t=e.$implicit,n=F(2);x(),It("background","linear-gradient(135deg, "+t.color+" 0%, "+n.adjustColorBrightness(t.color,-20)+" 100%)"),x(6),W(t.name),x(4),he(" ",t.students.length," \xF6\u011Frenci "),x(3),he(" ",n.getActiveStudentsInGroup(t)," aktif "),x(3),he(" ",n.getInactiveStudentsInGroup(t)," pasif "),x(11),S("ngIf",t.students.length===0),x(),S("ngIf",t.students.length>0)}}function sle(i,e){if(i&1&&(u(0,"div",38),ee(1,ole,30,8,"div",39),f()),i&2){let t=F();x(),S("ngForOf",t.filteredGroups)}}function ale(i,e){if(i&1){let t=Ae();u(0,"div",82)(1,"div",83)(2,"div",62),k(3,"i",84),f(),u(4,"h3"),m(5,"Arama Sonucu Bulunamad\u0131"),f(),u(6,"p"),m(7,"Arad\u0131\u011F\u0131n\u0131z kriterlere uygun grup bulunamad\u0131."),f(),u(8,"button",85),U("click",function(){K(t);let r=F();return Y(r.searchQuery="")}),k(9,"i",37),m(10," Filtreleri Temizle "),f()()()}}function lle(i,e){i&1&&(u(0,"div",82)(1,"div",83)(2,"div",62),k(3,"i",86),f(),u(4,"h3"),m(5,"Hen\xFCz Grup Bulunmuyor"),f(),u(6,"p"),m(7,"Hen\xFCz hi\xE7 \xF6\u011Frenci grubunuz yok. \xD6\u011Frenciler otomatik olarak gruplar\u0131na g\xF6re burada g\xF6r\xFCnecektir."),f()()())}var y2=class i{constructor(e,t){this.http=e;this.router=t}groups=[];isLoading=!0;error=null;searchQuery="";Math=Math;groupColors=["#4f46e5","#06b6d4","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899","#84cc16","#f97316","#6366f1","#14b8a6","#eab308"];ngOnInit(){this.loadStudents()}loadStudents(){this.isLoading=!0,this.error=null;let e="",t=null,n=localStorage.getItem("user")||sessionStorage.getItem("user");n&&(t=JSON.parse(n),e=t.token||"",console.log("Gruplar sayfas\u0131 - User bilgileri:",{id:t.id,name:t.adi_soyadi,userRole:t.rutbe}));let r=new xt({Authorization:`Bearer ${e}`});this.http.get("./server/api/ogrenciler_listesi.php",{headers:r}).subscribe({next:o=>{o.success?this.organizeStudentsByGroups(o.data):this.error=o.message||"\xD6\u011Frenci verileri y\xFCklenirken hata olu\u015Ftu.",this.isLoading=!1},error:o=>{this.error="Sunucu hatas\u0131: "+(o.error?.message||o.message),this.isLoading=!1}})}organizeStudentsByGroups(e){let t="",n=null,r=localStorage.getItem("user")||sessionStorage.getItem("user");r&&(n=JSON.parse(r),t=n.token||"");let o=new Map,s=n?.adi_soyadi||"";e.filter(l=>l.rutbe==="ogrenci"&&l.ogretmeni===s).forEach(l=>{let c=l.grubu||"Grup Atanmam\u0131\u015F";o.has(c)||o.set(c,[]),o.get(c).push(l)}),this.groups=Array.from(o.entries()).map(([l,c],d)=>({name:l,students:c,studentCount:c.length,color:this.groupColors[d%this.groupColors.length]})),this.groups.sort((l,c)=>l.name==="Grup Atanmam\u0131\u015F"?1:c.name==="Grup Atanmam\u0131\u015F"?-1:l.name.localeCompare(c.name))}get filteredGroups(){if(!this.searchQuery.trim())return this.groups;let e=this.searchQuery.toLowerCase().trim();return this.groups.map(t=>ot(Ie({},t),{students:t.students.filter(n=>n.adi_soyadi.toLowerCase().includes(e)||n.email.toLowerCase().includes(e)||t.name.toLowerCase().includes(e))})).filter(t=>t.students.length>0)}getTotalStudents(){return this.groups.reduce((e,t)=>e+t.studentCount,0)}getActiveStudents(){return this.groups.reduce((e,t)=>e+t.students.filter(n=>n.aktif).length,0)}deleteStudent(e){if(confirm("Bu \xF6\u011Frenciyi silmek istedi\u011Finizden emin misiniz?")){let t="",n=localStorage.getItem("user")||sessionStorage.getItem("user");n&&(t=JSON.parse(n).token||"");let r=new xt({Authorization:`Bearer ${t}`});this.http.delete(`./server/api/ogrenci_sil.php?id=${e}`,{headers:r}).subscribe({next:o=>{o.success?this.loadStudents():alert("\xD6\u011Frenci silinirken hata olu\u015Ftu: "+o.message)},error:o=>{alert("Sunucu hatas\u0131: "+o.message)}})}}viewGroupDetail(e){let t=encodeURIComponent(e);this.router.navigate(["/ogretmen-sayfasi/ogretmen-gruplar-detay-sayfasi",t])}goToAttendance(e){let t=encodeURIComponent(e);this.router.navigate(["/ogretmen-sayfasi/devamsizlik",t])}getDefaultAvatar(e){return`https://ui-avatars.com/api/?name=${encodeURIComponent(e)}&background=4f46e5&color=fff&size=32&font-size=0.6&rounded=true`}getActiveStudentsInGroup(e){return e.students.filter(t=>t.aktif).length}getInactiveStudentsInGroup(e){return e.students.filter(t=>!t.aktif).length}adjustColorBrightness(e,t){e=e.replace("#","");let n=parseInt(e,16),r=Math.round(2.55*t),o=(n>>16)+r,s=(n>>8&255)+r,a=(n&255)+r;return"#"+(16777216+(o<255?o<1?0:o:255)*65536+(s<255?s<1?0:s:255)*256+(a<255?a<1?0:a:255)).toString(16).slice(1)}static \u0275fac=function(t){return new(t||i)(ke(gt),ke(an))};static \u0275cmp=Ke({type:i,selectors:[["app-ogretmen-gruplar-sayfasi"]],standalone:!1,decls:45,vars:10,consts:[[1,"groups-container"],[1,"page-header"],[1,"header-content"],[1,"header-text"],[1,"page-title"],[1,"bi","bi-people-fill","me-2"],[1,"page-description"],[1,"stats-row"],[1,"stat-card"],[1,"stat-icon","bg-primary"],[1,"bi","bi-collection-fill"],[1,"stat-content"],[1,"stat-number"],[1,"stat-label"],[1,"stat-icon","bg-success"],[1,"bi","bi-people-fill"],[1,"stat-icon","bg-info"],[1,"bi","bi-person-check-fill"],[1,"search-section"],[1,"search-container"],[1,"search-input-wrapper"],[1,"bi","bi-search","search-icon"],["type","text","placeholder","Grup veya \xF6\u011Frenci ara...",1,"search-input",3,"ngModelChange","ngModel"],["class","clear-search-btn",3,"click",4,"ngIf"],["class","loading-container",4,"ngIf"],["class","error-container",4,"ngIf"],["class","full-width-groups",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"clear-search-btn",3,"click"],[1,"bi","bi-x"],[1,"loading-container"],[1,"loading-spinner"],[1,"spinner"],[1,"error-container"],[1,"error-card"],[1,"bi","bi-exclamation-triangle-fill","error-icon"],[1,"retry-button",3,"click"],[1,"bi","bi-arrow-clockwise","me-1"],[1,"full-width-groups"],["class","full-width-group-card",4,"ngFor","ngForOf"],[1,"full-width-group-card"],[1,"group-card-header"],[1,"group-header-left"],[1,"group-icon"],[1,"group-info"],[1,"group-title"],[1,"group-meta"],[1,"group-count"],[1,"bi","bi-person-fill","me-1"],[1,"active-count"],[1,"bi","bi-check-circle-fill","me-1"],[1,"inactive-count"],[1,"bi","bi-x-circle-fill","me-1"],[1,"group-header-actions"],[1,"header-action-btn","detail-btn",3,"click"],[1,"bi","bi-eye-fill"],[1,"header-action-btn","attendance-btn",3,"click"],[1,"bi","bi-clipboard-check-fill"],[1,"students-content"],["class","empty-group-message",4,"ngIf"],["class","students-horizontal-list",4,"ngIf"],[1,"empty-group-message"],[1,"empty-icon"],[1,"bi","bi-person-x"],[1,"students-horizontal-list"],["class","student-list-item",4,"ngFor","ngForOf"],[1,"student-list-item"],[1,"student-avatar-container"],[1,"student-avatar",3,"src","alt"],[1,"student-status-indicator"],[1,"bi"],[1,"student-details"],[1,"student-name"],[1,"student-email"],[1,"student-meta-tags"],["class","meta-tag",4,"ngIf"],[3,"routerLink"],[1,"meta-tag"],[1,"bi","bi-mortarboard","me-1"],[1,"bi","bi-building","me-1"],[1,"bi","bi-calendar","me-1"],[1,"bi","bi-layout-text-window-reverse","me-1"],[1,"empty-state"],[1,"empty-content"],[1,"bi","bi-search"],[1,"empty-action-btn",3,"click"],[1,"bi","bi-people"]],template:function(t,n){t&1&&(u(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),k(5,"i",5),m(6," \xD6\u011Frenci Gruplar\u0131 "),f(),u(7,"p",6),m(8,"\xD6\u011Frencilerinizi gruplar\u0131na g\xF6re y\xF6netin ve takip edin"),f()(),u(9,"div",7)(10,"div",8)(11,"div",9),k(12,"i",10),f(),u(13,"div",11)(14,"div",12),m(15),f(),u(16,"div",13),m(17,"Toplam Grup"),f()()(),u(18,"div",8)(19,"div",14),k(20,"i",15),f(),u(21,"div",11)(22,"div",12),m(23),f(),u(24,"div",13),m(25,"Toplam \xD6\u011Frenci"),f()()(),u(26,"div",8)(27,"div",16),k(28,"i",17),f(),u(29,"div",11)(30,"div",12),m(31),f(),u(32,"div",13),m(33,"Aktif \xD6\u011Frenci"),f()()()()(),u(34,"div",18)(35,"div",19)(36,"div",20),k(37,"i",21),u(38,"input",22),at("ngModelChange",function(o){return dt(n.searchQuery,o)||(n.searchQuery=o),o}),f(),ee(39,Yae,2,0,"button",23),f()()()(),ee(40,Xae,5,0,"div",24)(41,Qae,10,1,"div",25)(42,sle,2,1,"div",26)(43,ale,11,0,"div",27)(44,lle,8,0,"div",27),f()),t&2&&(x(15),W(n.groups.length),x(8),W(n.getTotalStudents()),x(8),W(n.getActiveStudents()),x(7),st("ngModel",n.searchQuery),x(),S("ngIf",n.searchQuery),x(),S("ngIf",n.isLoading),x(),S("ngIf",n.error&&!n.isLoading),x(),S("ngIf",!n.isLoading&&!n.error&&n.filteredGroups.length>0),x(),S("ngIf",!n.isLoading&&!n.error&&n.filteredGroups.length===0&&n.groups.length>0),x(),S("ngIf",!n.isLoading&&!n.error&&n.groups.length===0))},dependencies:[yt,lt,rn,fn,Un,xi],styles:['.groups-container[_ngcontent-%COMP%]{padding:2rem;background:#f8fafc;min-height:100vh;font-family:Inter,-apple-system,BlinkMacSystemFont,sans-serif}.page-header[_ngcontent-%COMP%]{background:#fffffff2;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border-radius:8px;padding:2rem;margin-bottom:2rem;box-shadow:0 20px 40px #0000001a;border:1px solid rgba(255,255,255,.2)}.header-content[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.header-content[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;background:linear-gradient(135deg,#667eea,#764ba2);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:.5rem;display:flex;align-items:center;justify-content:center}.header-content[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent}.header-content[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   .page-description[_ngcontent-%COMP%]{color:#64748b;font-size:1.1rem;margin:0}.header-content[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1.5rem}.header-content[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{background:#fff;padding:1.5rem;border-radius:16px;display:flex;align-items:center;gap:1rem;box-shadow:0 4px 12px #0000000d;border:1px solid rgba(0,0,0,.05);transition:all .3s ease}.header-content[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 24px #0000001a}.header-content[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:12px;display:flex;align-items:center;justify-content:center;color:#fff;font-size:1.5rem}.header-content[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon.bg-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2)}.header-content[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon.bg-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4facfe,#00f2fe)}.header-content[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon.bg-info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#43e97b,#38f9d7)}.header-content[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-number[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;color:#1e293b;display:block}.header-content[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:.875rem;color:#64748b;margin-top:.25rem}.search-section[_ngcontent-%COMP%]{margin-top:1.5rem}.search-section[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]{display:flex;justify-content:center}.search-section[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]{position:relative;width:100%;max-width:400px}.search-section[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{position:absolute;left:1rem;top:50%;transform:translateY(-50%);color:#64748b;font-size:1.1rem;z-index:2}.search-section[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:100%;padding:.875rem 1rem .875rem 3rem;border:2px solid rgba(0,0,0,.1);border-radius:12px;font-size:1rem;background:#fff;transition:all .3s ease}.search-section[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.search-section[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.search-section[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .clear-search-btn[_ngcontent-%COMP%]{position:absolute;right:.75rem;top:50%;transform:translateY(-50%);background:none;border:none;color:#9ca3af;cursor:pointer;font-size:1.2rem;padding:.25rem;border-radius:4px;transition:all .2s ease}.search-section[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .clear-search-btn[_ngcontent-%COMP%]:hover{color:#ef4444;background:#ef44441a}.loading-container[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem}.loading-container[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:48px;height:48px;border:4px solid rgba(102,126,234,.2);border-top:4px solid #667eea;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 1rem}.loading-container[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;font-size:1.1rem;margin:0}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.error-container[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:4rem 2rem}.error-container[_ngcontent-%COMP%]   .error-card[_ngcontent-%COMP%]{background:#fff;padding:3rem 2rem;border-radius:16px;text-align:center;max-width:400px;box-shadow:0 8px 24px #0000001a}.error-container[_ngcontent-%COMP%]   .error-card[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{font-size:3rem;color:#ef4444;margin-bottom:1rem}.error-container[_ngcontent-%COMP%]   .error-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#1e293b;margin-bottom:1rem;font-weight:600}.error-container[_ngcontent-%COMP%]   .error-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;margin-bottom:2rem}.error-container[_ngcontent-%COMP%]   .error-card[_ngcontent-%COMP%]   .retry-button[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;padding:.75rem 1.5rem;border-radius:8px;font-weight:500;cursor:pointer;transition:all .3s ease}.error-container[_ngcontent-%COMP%]   .error-card[_ngcontent-%COMP%]   .retry-button[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #667eea4d}.full-width-groups[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}.full-width-groups[_ngcontent-%COMP%]   .full-width-group-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;box-shadow:0 8px 32px #00000014;border:1px solid rgba(0,0,0,.05);overflow:hidden;transition:all .3s ease}.full-width-groups[_ngcontent-%COMP%]   .full-width-group-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 16px 48px #0000001f}.full-width-groups[_ngcontent-%COMP%]   .full-width-group-card[_ngcontent-%COMP%]   .group-card-header[_ngcontent-%COMP%]{padding:2rem;color:#fff;display:flex;align-items:center;justify-content:space-between;position:relative;overflow:hidden}.full-width-groups[_ngcontent-%COMP%]   .full-width-group-card[_ngcontent-%COMP%]   .group-card-header[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:#ffffff1a;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);z-index:0}.full-width-groups[_ngcontent-%COMP%]   .full-width-group-card[_ngcontent-%COMP%]   .group-card-header[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{position:relative;z-index:1}.full-width-groups[_ngcontent-%COMP%]   .full-width-group-card[_ngcontent-%COMP%]   .group-card-header[_ngcontent-%COMP%]   .group-header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5rem}.full-width-groups[_ngcontent-%COMP%]   .full-width-group-card[_ngcontent-%COMP%]   .group-card-header[_ngcontent-%COMP%]   .group-header-left[_ngcontent-%COMP%]   .group-icon[_ngcontent-%COMP%]{width:64px;height:64px;background:#fff3;border-radius:16px;display:flex;align-items:center;justify-content:center;font-size:2rem;color:#fff}.full-width-groups[_ngcontent-%COMP%]   .full-width-group-card[_ngcontent-%COMP%]   .group-card-header[_ngcontent-%COMP%]   .group-header-left[_ngcontent-%COMP%]   .group-info[_ngcontent-%COMP%]   .group-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin:0 0 .5rem;color:#fff}.full-width-groups[_ngcontent-%COMP%]   .full-width-group-card[_ngcontent-%COMP%]   .group-card-header[_ngcontent-%COMP%]   .group-header-left[_ngcontent-%COMP%]   .group-info[_ngcontent-%COMP%]   .group-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5rem;flex-wrap:wrap}.full-width-groups[_ngcontent-%COMP%]   .full-width-group-card[_ngcontent-%COMP%]   .group-card-header[_ngcontent-%COMP%]   .group-header-left[_ngcontent-%COMP%]   .group-info[_ngcontent-%COMP%]   .group-meta[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff3;padding:.5rem 1rem;border-radius:20px;font-size:.875rem;font-weight:500;display:flex;align-items:center;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.full-width-groups[_ngcontent-%COMP%]   .full-width-group-card[_ngcontent-%COMP%]   .group-card-header[_ngcontent-%COMP%]   .group-header-left[_ngcontent-%COMP%]   .group-info[_ngcontent-%COMP%]   .group-meta[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.25rem}.full-width-groups[_ngcontent-%COMP%]   .full-width-group-card[_ngcontent-%COMP%]   .group-card-header[_ngcontent-%COMP%]   .group-header-actions[_ngcontent-%COMP%]{display:flex;gap:1rem}.full-width-groups[_ngcontent-%COMP%]   .full-width-group-card[_ngcontent-%COMP%]   .group-card-header[_ngcontent-%COMP%]   .group-header-actions[_ngcontent-%COMP%]   .header-action-btn[_ngcontent-%COMP%]{background:#fff3;color:#fff;border:none;padding:1rem 1.5rem;border-radius:12px;font-weight:600;display:flex;align-items:center;gap:.5rem;cursor:pointer;transition:all .3s ease;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.full-width-groups[_ngcontent-%COMP%]   .full-width-group-card[_ngcontent-%COMP%]   .group-card-header[_ngcontent-%COMP%]   .group-header-actions[_ngcontent-%COMP%]   .header-action-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:translateY(-2px)}.full-width-groups[_ngcontent-%COMP%]   .full-width-group-card[_ngcontent-%COMP%]   .group-card-header[_ngcontent-%COMP%]   .group-header-actions[_ngcontent-%COMP%]   .header-action-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem}.full-width-groups[_ngcontent-%COMP%]   .full-width-group-card[_ngcontent-%COMP%]   .students-content[_ngcontent-%COMP%]{padding:2rem}.full-width-groups[_ngcontent-%COMP%]   .full-width-group-card[_ngcontent-%COMP%]   .students-content[_ngcontent-%COMP%]   .empty-group-message[_ngcontent-%COMP%]{text-align:center;padding:3rem 2rem;color:#64748b}.full-width-groups[_ngcontent-%COMP%]   .full-width-group-card[_ngcontent-%COMP%]   .students-content[_ngcontent-%COMP%]   .empty-group-message[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:1rem;color:#cbd5e1}.full-width-groups[_ngcontent-%COMP%]   .full-width-group-card[_ngcontent-%COMP%]   .students-content[_ngcontent-%COMP%]   .empty-group-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;margin:0}.full-width-groups[_ngcontent-%COMP%]   .full-width-group-card[_ngcontent-%COMP%]   .students-content[_ngcontent-%COMP%]   .students-horizontal-list[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:1.5rem}.full-width-groups[_ngcontent-%COMP%]   .full-width-group-card[_ngcontent-%COMP%]   .students-content[_ngcontent-%COMP%]   .students-horizontal-list[_ngcontent-%COMP%]   .student-list-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1.5rem;background:#f8fafc;border-radius:12px;border:1px solid #e2e8f0;transition:all .3s ease}.full-width-groups[_ngcontent-%COMP%]   .full-width-group-card[_ngcontent-%COMP%]   .students-content[_ngcontent-%COMP%]   .students-horizontal-list[_ngcontent-%COMP%]   .student-list-item[_ngcontent-%COMP%]:hover{background:#e2e8f0;transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}.full-width-groups[_ngcontent-%COMP%]   .full-width-group-card[_ngcontent-%COMP%]   .students-content[_ngcontent-%COMP%]   .students-horizontal-list[_ngcontent-%COMP%]   .student-list-item[_ngcontent-%COMP%]   .student-avatar-container[_ngcontent-%COMP%]{position:relative;flex-shrink:0}.full-width-groups[_ngcontent-%COMP%]   .full-width-group-card[_ngcontent-%COMP%]   .students-content[_ngcontent-%COMP%]   .students-horizontal-list[_ngcontent-%COMP%]   .student-list-item[_ngcontent-%COMP%]   .student-avatar-container[_ngcontent-%COMP%]   .student-avatar[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:50%;object-fit:cover;border:3px solid white;box-shadow:0 4px 12px #0000001a}.full-width-groups[_ngcontent-%COMP%]   .full-width-group-card[_ngcontent-%COMP%]   .students-content[_ngcontent-%COMP%]   .students-horizontal-list[_ngcontent-%COMP%]   .student-list-item[_ngcontent-%COMP%]   .student-avatar-container[_ngcontent-%COMP%]   .student-status-indicator[_ngcontent-%COMP%]{position:absolute;bottom:-2px;right:-2px;width:20px;height:20px;border-radius:50%;background:#fff;display:flex;align-items:center;justify-content:center;font-size:.75rem;border:2px solid white;box-shadow:0 2px 8px #0000001a}.full-width-groups[_ngcontent-%COMP%]   .full-width-group-card[_ngcontent-%COMP%]   .students-content[_ngcontent-%COMP%]   .students-horizontal-list[_ngcontent-%COMP%]   .student-list-item[_ngcontent-%COMP%]   .student-avatar-container[_ngcontent-%COMP%]   .student-status-indicator.active[_ngcontent-%COMP%]{color:#10b981}.full-width-groups[_ngcontent-%COMP%]   .full-width-group-card[_ngcontent-%COMP%]   .students-content[_ngcontent-%COMP%]   .students-horizontal-list[_ngcontent-%COMP%]   .student-list-item[_ngcontent-%COMP%]   .student-avatar-container[_ngcontent-%COMP%]   .student-status-indicator.inactive[_ngcontent-%COMP%]{color:#ef4444}.full-width-groups[_ngcontent-%COMP%]   .full-width-group-card[_ngcontent-%COMP%]   .students-content[_ngcontent-%COMP%]   .students-horizontal-list[_ngcontent-%COMP%]   .student-list-item[_ngcontent-%COMP%]   .student-details[_ngcontent-%COMP%]{flex:1;min-width:0}.full-width-groups[_ngcontent-%COMP%]   .full-width-group-card[_ngcontent-%COMP%]   .students-content[_ngcontent-%COMP%]   .students-horizontal-list[_ngcontent-%COMP%]   .student-list-item[_ngcontent-%COMP%]   .student-details[_ngcontent-%COMP%]   .student-name[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:#1e293b;margin:0 0 .25rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.full-width-groups[_ngcontent-%COMP%]   .full-width-group-card[_ngcontent-%COMP%]   .students-content[_ngcontent-%COMP%]   .students-horizontal-list[_ngcontent-%COMP%]   .student-list-item[_ngcontent-%COMP%]   .student-details[_ngcontent-%COMP%]   .student-email[_ngcontent-%COMP%]{color:#64748b;font-size:.875rem;margin:0 0 .75rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.full-width-groups[_ngcontent-%COMP%]   .full-width-group-card[_ngcontent-%COMP%]   .students-content[_ngcontent-%COMP%]   .students-horizontal-list[_ngcontent-%COMP%]   .student-list-item[_ngcontent-%COMP%]   .student-details[_ngcontent-%COMP%]   .student-meta-tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem}.full-width-groups[_ngcontent-%COMP%]   .full-width-group-card[_ngcontent-%COMP%]   .students-content[_ngcontent-%COMP%]   .students-horizontal-list[_ngcontent-%COMP%]   .student-list-item[_ngcontent-%COMP%]   .student-details[_ngcontent-%COMP%]   .student-meta-tags[_ngcontent-%COMP%]   .meta-tag[_ngcontent-%COMP%]{background:#e2e8f0;color:#475569;padding:.25rem .5rem;border-radius:6px;font-size:.75rem;font-weight:500;display:flex;align-items:center}.full-width-groups[_ngcontent-%COMP%]   .full-width-group-card[_ngcontent-%COMP%]   .students-content[_ngcontent-%COMP%]   .students-horizontal-list[_ngcontent-%COMP%]   .student-list-item[_ngcontent-%COMP%]   .student-details[_ngcontent-%COMP%]   .student-meta-tags[_ngcontent-%COMP%]   .meta-tag[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.25rem}.empty-state[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:400px}.empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]{text-align:center;max-width:400px;background:#fff;padding:3rem 2rem;border-radius:16px;box-shadow:0 8px 24px #00000014}.empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:4rem;color:#cbd5e1;margin-bottom:1.5rem}.empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#1e293b;margin-bottom:1rem;font-weight:600}.empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;margin-bottom:2rem;line-height:1.6}.empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   .empty-action-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;padding:.75rem 1.5rem;border-radius:8px;font-weight:500;cursor:pointer;transition:all .3s ease}.empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   .empty-action-btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #667eea4d}@media (max-width: 1200px){.students-horizontal-list[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(280px,1fr))}}@media (max-width: 768px){.groups-container[_ngcontent-%COMP%]{padding:1rem}.page-header[_ngcontent-%COMP%]{padding:1.5rem}.header-content[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:2rem}.stats-row[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}.full-width-group-card[_ngcontent-%COMP%]   .group-card-header[_ngcontent-%COMP%]{padding:1.5rem;flex-direction:column;gap:1.5rem;align-items:flex-start}.full-width-group-card[_ngcontent-%COMP%]   .group-card-header[_ngcontent-%COMP%]   .group-header-left[_ngcontent-%COMP%]{width:100%}.full-width-group-card[_ngcontent-%COMP%]   .group-card-header[_ngcontent-%COMP%]   .group-header-actions[_ngcontent-%COMP%]{width:100%;justify-content:flex-start}.full-width-group-card[_ngcontent-%COMP%]   .students-content[_ngcontent-%COMP%]{padding:1.5rem}.full-width-group-card[_ngcontent-%COMP%]   .students-content[_ngcontent-%COMP%]   .students-horizontal-list[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}.full-width-group-card[_ngcontent-%COMP%]   .students-content[_ngcontent-%COMP%]   .students-horizontal-list[_ngcontent-%COMP%]   .student-list-item[_ngcontent-%COMP%]{padding:1rem}}@media (max-width: 480px){.page-header[_ngcontent-%COMP%]{padding:1rem}.header-content[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:1.75rem;flex-direction:column;gap:.5rem}.full-width-group-card[_ngcontent-%COMP%]   .group-card-header[_ngcontent-%COMP%]{padding:1rem}.full-width-group-card[_ngcontent-%COMP%]   .group-card-header[_ngcontent-%COMP%]   .group-header-left[_ngcontent-%COMP%]{gap:1rem}.full-width-group-card[_ngcontent-%COMP%]   .group-card-header[_ngcontent-%COMP%]   .group-header-left[_ngcontent-%COMP%]   .group-icon[_ngcontent-%COMP%]{width:48px;height:48px;font-size:1.5rem}.full-width-group-card[_ngcontent-%COMP%]   .group-card-header[_ngcontent-%COMP%]   .group-header-left[_ngcontent-%COMP%]   .group-info[_ngcontent-%COMP%]   .group-title[_ngcontent-%COMP%]{font-size:1.5rem}.full-width-group-card[_ngcontent-%COMP%]   .group-card-header[_ngcontent-%COMP%]   .group-header-left[_ngcontent-%COMP%]   .group-info[_ngcontent-%COMP%]   .group-meta[_ngcontent-%COMP%]{gap:.5rem}.full-width-group-card[_ngcontent-%COMP%]   .group-card-header[_ngcontent-%COMP%]   .group-header-left[_ngcontent-%COMP%]   .group-info[_ngcontent-%COMP%]   .group-meta[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:.375rem .75rem;font-size:.75rem}.full-width-group-card[_ngcontent-%COMP%]   .group-card-header[_ngcontent-%COMP%]   .group-header-actions[_ngcontent-%COMP%]{gap:.5rem}.full-width-group-card[_ngcontent-%COMP%]   .group-card-header[_ngcontent-%COMP%]   .group-header-actions[_ngcontent-%COMP%]   .header-action-btn[_ngcontent-%COMP%]{padding:.75rem 1rem;font-size:.875rem}.full-width-group-card[_ngcontent-%COMP%]   .students-content[_ngcontent-%COMP%]{padding:1rem}.full-width-group-card[_ngcontent-%COMP%]   .students-content[_ngcontent-%COMP%]   .students-horizontal-list[_ngcontent-%COMP%]   .student-list-item[_ngcontent-%COMP%]{padding:.75rem;gap:.75rem}.full-width-group-card[_ngcontent-%COMP%]   .students-content[_ngcontent-%COMP%]   .students-horizontal-list[_ngcontent-%COMP%]   .student-list-item[_ngcontent-%COMP%]   .student-avatar-container[_ngcontent-%COMP%]   .student-avatar[_ngcontent-%COMP%]{width:48px;height:48px}.full-width-group-card[_ngcontent-%COMP%]   .students-content[_ngcontent-%COMP%]   .students-horizontal-list[_ngcontent-%COMP%]   .student-list-item[_ngcontent-%COMP%]   .student-avatar-container[_ngcontent-%COMP%]   .student-status-indicator[_ngcontent-%COMP%]{width:16px;height:16px;font-size:.625rem}.full-width-group-card[_ngcontent-%COMP%]   .students-content[_ngcontent-%COMP%]   .students-horizontal-list[_ngcontent-%COMP%]   .student-list-item[_ngcontent-%COMP%]   .student-details[_ngcontent-%COMP%]   .student-name[_ngcontent-%COMP%]{font-size:1rem}.full-width-group-card[_ngcontent-%COMP%]   .students-content[_ngcontent-%COMP%]   .students-horizontal-list[_ngcontent-%COMP%]   .student-list-item[_ngcontent-%COMP%]   .student-details[_ngcontent-%COMP%]   .student-email[_ngcontent-%COMP%]{font-size:.8rem}.full-width-group-card[_ngcontent-%COMP%]   .students-content[_ngcontent-%COMP%]   .students-horizontal-list[_ngcontent-%COMP%]   .student-list-item[_ngcontent-%COMP%]   .student-details[_ngcontent-%COMP%]   .student-meta-tags[_ngcontent-%COMP%]   .meta-tag[_ngcontent-%COMP%]{font-size:.7rem;padding:.2rem .4rem}}']})};var cle=["videoElement"],dle=["canvasElement"];function ule(i,e){if(i&1&&(u(0,"option",25),m(1),f()),i&2){let t=e.$implicit;S("value",t.name),x(),W(t.name)}}function hle(i,e){i&1&&(u(0,"div",26)(1,"div",4)(2,"h3"),k(3,"i",27),m(4," QR Kod Taray\u0131c\u0131"),f()(),u(5,"div",6)(6,"div",28),k(7,"video",29,0)(9,"canvas",30,1),u(11,"div",31),k(12,"div",32),u(13,"p"),m(14,"QR kodu kamera g\xF6r\xFC\u015F alan\u0131na getirin"),f()()()()())}function fle(i,e){if(i&1){let t=Ae();u(0,"div",42)(1,"div",43)(2,"div",44),k(3,"img",45),f(),u(4,"div",46)(5,"h4"),m(6),f(),u(7,"p"),m(8),f(),u(9,"span",47),m(10),f()()(),u(11,"div",48)(12,"button",49),U("click",function(){let r=K(t).$implicit,o=F(2);return Y(o.markAttendance(r.id,"present"))}),k(13,"i",50),u(14,"span"),m(15,"Kat\u0131ld\u0131"),f()(),u(16,"button",51),U("click",function(){let r=K(t).$implicit,o=F(2);return Y(o.markAttendance(r.id,"absent"))}),k(17,"i",52),u(18,"span"),m(19,"Kat\u0131lmad\u0131"),f()()()()}if(i&2){let t=e.$implicit,n=F(2);x(3),S("src",t.avatar||n.getDefaultAvatar(t.adi_soyadi),vt)("alt",t.adi_soyadi),x(3),W(t.adi_soyadi),x(2),W(t.email),x(),ei(n.getAttendanceStatus(t.id)),x(),he(" ",n.getAttendanceStatusText(t.id)," "),x(2),xe("active",n.getAttendanceStatus(t.id)==="present"),x(4),xe("active",n.getAttendanceStatus(t.id)==="absent")}}function gle(i,e){if(i&1){let t=Ae();u(0,"div",33)(1,"div",4)(2,"h3"),k(3,"i",34),m(4),f(),u(5,"div",35)(6,"button",36),U("click",function(){K(t);let r=F();return Y(r.markAllPresent())}),k(7,"i",37),m(8," Hepsini Kat\u0131ld\u0131 "),f(),u(9,"button",38),U("click",function(){K(t);let r=F();return Y(r.markAllAbsent())}),k(10,"i",39),m(11," Hepsini Kat\u0131lmad\u0131 "),f()()(),u(12,"div",6)(13,"div",40),ee(14,fle,20,11,"div",41),f()()()}if(i&2){let t=F();x(4),he(" \xD6\u011Frenci Listesi (",t.selectedGroup,")"),x(10),S("ngForOf",t.groupStudents)}}function ple(i,e){if(i&1){let t=Ae();u(0,"div",53)(1,"div",4)(2,"h3"),k(3,"i",54),m(4," Ge\xE7mi\u015F Kay\u0131tlar"),f()(),u(5,"div",6)(6,"div",55)(7,"div",56)(8,"div",57)(9,"label"),m(10,"Ba\u015Flang\u0131\xE7 Tarihi"),f(),u(11,"input",58),at("ngModelChange",function(r){K(t);let o=F();return dt(o.startDate,r)||(o.startDate=r),Y(r)}),f()(),u(12,"div",57)(13,"label"),m(14,"Biti\u015F Tarihi"),f(),u(15,"input",58),at("ngModelChange",function(r){K(t);let o=F();return dt(o.endDate,r)||(o.endDate=r),Y(r)}),f()()(),u(16,"div",59)(17,"button",60),U("click",function(){K(t);let r=F();return Y(r.setDateRangeLastWeek())}),k(18,"i",61),m(19," Bu Hafta "),f(),u(20,"button",60),U("click",function(){K(t);let r=F();return Y(r.setDateRangeThisMonth())}),k(21,"i",62),m(22," Bu Ay "),f(),u(23,"button",60),U("click",function(){K(t);let r=F();return Y(r.setDateRangeThisYear())}),k(24,"i",63),m(25," Bu Y\u0131l "),f()(),u(26,"div",64)(27,"button",13),U("click",function(){K(t);let r=F();return Y(r.loadHistoricalAttendanceByDateRange())}),k(28,"i",65),m(29," Filtrele "),f(),u(30,"button",66),U("click",function(){K(t);let r=F();return Y(r.loadAllAttendanceRecords())}),k(31,"i",67),m(32," T\xFCm\xFCn\xFC Getir "),f()()()()()}if(i&2){let t=F();x(11),st("ngModel",t.startDate),x(4),st("ngModel",t.endDate),x(12),S("disabled",!t.startDate||!t.endDate),x(3),S("disabled",!t.selectedGroup)}}function mle(i,e){if(i&1&&(u(0,"div",68)(1,"div",69)(2,"div",70)(3,"div",71),k(4,"i",72),f(),u(5,"div",73)(6,"div",74),m(7),f(),u(8,"div",75),m(9,"Toplam Ders"),f(),u(10,"div",76),m(11,"Se\xE7ilen d\xF6nemdeki ders say\u0131s\u0131"),f()()(),u(12,"div",70)(13,"div",77),k(14,"i",78),f(),u(15,"div",73)(16,"div",74),m(17),f(),u(18,"div",75),m(19,"Toplam Kat\u0131l\u0131m"),f(),u(20,"div",76),m(21,"Derse kat\u0131lan \xF6\u011Frenci say\u0131s\u0131"),f()()(),u(22,"div",70)(23,"div",79),k(24,"i",80),f(),u(25,"div",73)(26,"div",74),m(27),f(),u(28,"div",75),m(29,"Toplam Devams\u0131zl\u0131k"),f(),u(30,"div",76),m(31,"Derse kat\u0131lmayan \xF6\u011Frenci say\u0131s\u0131"),f()()(),u(32,"div",70)(33,"div",81),k(34,"i",82),f(),u(35,"div",73)(36,"div",74),m(37),f(),u(38,"div",75),m(39,"Kat\u0131l\u0131m Oran\u0131"),f(),u(40,"div",76),m(41,"Genel kat\u0131l\u0131m y\xFCzdesi"),f()()()()()),i&2){let t=F();x(7),W(t.groupedAttendanceByDate.length),x(10),W(t.getTotalPresentInPeriod()),x(10),W(t.getTotalAbsentInPeriod()),x(10),he("",t.getAttendancePercentage(),"%")}}function xle(i,e){if(i&1&&(u(0,"span",107),k(1,"i",16),m(2),f()),i&2){let t=e.$implicit;x(2),he(" ",t.adi_soyadi," ")}}function _le(i,e){if(i&1&&(u(0,"div",103)(1,"h5"),k(2,"i",104),m(3),f(),u(4,"div",105),ee(5,xle,3,1,"span",106),f()()),i&2){let t=F().$implicit;x(3),he(" Derse Kat\u0131lanlar (",t.katilanlar==null?null:t.katilanlar.length,"):"),x(2),S("ngForOf",t.katilanlar)}}function vle(i,e){if(i&1&&(u(0,"span",111),k(1,"i",98),m(2),f()),i&2){let t=e.$implicit;x(2),he(" ",t.adi_soyadi||t.name," ")}}function ble(i,e){if(i&1&&(u(0,"div",108)(1,"h5"),k(2,"i",109),m(3),f(),u(4,"div",105),ee(5,vle,3,1,"span",110),f()()),i&2){let t=F().$implicit;x(3),he(" Derse Kat\u0131lmayanlar (",t.katilmayanlar==null?null:t.katilmayanlar.length,"):"),x(2),S("ngForOf",t.katilmayanlar)}}function Cle(i,e){i&1&&(u(0,"div",112)(1,"p",113),k(2,"i",78),m(3," Bu derste hi\xE7bir \xF6\u011Frenci devams\u0131zl\u0131k yapmad\u0131! "),f()())}function yle(i,e){if(i&1&&(u(0,"div",88)(1,"div",89)(2,"div",90)(3,"div",91),m(4),f(),u(5,"div",92),m(6),f()()(),u(7,"div",93)(8,"div",94)(9,"div",95)(10,"span",96),k(11,"i",16),m(12),f(),u(13,"span",97),k(14,"i",98),m(15),f()(),u(16,"div",99),ee(17,_le,6,2,"div",100)(18,ble,6,2,"div",101)(19,Cle,4,0,"div",102),f()()()()),i&2){let t=e.$implicit,n=F(2);x(4),W(n.formatDate(t.tarih)),x(2),W(n.getDayName(t.tarih)),x(6),he(" ",t.katilan_sayisi," Kat\u0131ld\u0131 "),x(3),he(" ",t.katilmayan_sayisi," Kat\u0131lmad\u0131 "),x(2),S("ngIf",(t.katilanlar==null?null:t.katilanlar.length)>0),x(),S("ngIf",(t.katilmayanlar==null?null:t.katilmayanlar.length)>0),x(),S("ngIf",t.katilmayan_sayisi===0)}}function wle(i,e){if(i&1&&(u(0,"div",83)(1,"div",84)(2,"h3"),k(3,"i",85),m(4," Ge\xE7mi\u015F Kay\u0131tlar"),f()(),u(5,"div",86),ee(6,yle,20,7,"div",87),f()()),i&2){let t=F();x(6),S("ngForOf",t.groupedAttendanceByDate)}}function Mle(i,e){if(i&1&&(u(0,"div",142),k(1,"i",143),m(2),f()),i&2){let t=F().$implicit;x(2),he(" Sonraki \xF6demeye ",t.lessonsUntilNextPayment," ders kald\u0131 ")}}function Ele(i,e){i&1&&(u(0,"div",144),k(1,"i",145),m(2," \xD6deme Zaman\u0131! "),f())}function Ple(i,e){i&1&&(u(0,"span"),m(1,"Detayl\u0131 \u0130statistikleri G\xF6r"),f())}function Ole(i,e){i&1&&(u(0,"span"),m(1,"Y\xFCkleniyor..."),f())}function Sle(i,e){if(i&1){let t=Ae();u(0,"div",119)(1,"div",120),k(2,"img",121),u(3,"div",122)(4,"h5",123),m(5),f(),u(6,"p",124),m(7),f(),u(8,"div",125),m(9),f()()(),u(10,"div",126)(11,"div",127)(12,"div",128)(13,"div",129),m(14),f(),u(15,"div",130),m(16,"Kat\u0131ld\u0131"),f()(),u(17,"div",131)(18,"div",129),m(19),f(),u(20,"div",130),m(21,"Kat\u0131lmad\u0131"),f()()(),u(22,"div",132)(23,"div",133)(24,"span",134),m(25,"Beklenen \xD6deme:"),f(),u(26,"span",135),m(27),f()(),ee(28,Mle,3,1,"div",136)(29,Ele,3,0,"div",137),f()(),u(30,"div",138)(31,"button",139),U("click",function(){let r=K(t).$implicit,o=F(2);return Y(o.loadStudentDetailedStats(r.id))}),k(32,"i",140),ee(33,Ple,2,0,"span",141)(34,Ole,2,0,"span",141),f()()()}if(i&2){let t=e.$implicit,n=F(2);x(2),S("src",t.avatar||n.getDefaultAvatar(t.name),vt),x(3),W(t.name),x(2),W(t.email),x(),xe("yuksek",t.attendancePercentage>=80)("orta",t.attendancePercentage>=60&&t.attendancePercentage<80)("dusuk",t.attendancePercentage<60),x(),he(" %",t.attendancePercentage," Kat\u0131l\u0131m "),x(5),W(t.presentCount),x(5),W(t.absentCount),x(8),W(n.formatCurrency(t.expectedTotalAmount)),x(),S("ngIf",t.lessonsUntilNextPayment>0),x(),S("ngIf",t.lessonsUntilNextPayment===0),x(2),S("disabled",n.isLoading),x(2),S("ngIf",!n.isLoading),x(),S("ngIf",n.isLoading)}}function kle(i,e){if(i&1&&(u(0,"div",114)(1,"h3",115),k(2,"i",116),m(3," \xD6\u011Frenci Bilgi Kartlar\u0131 "),f(),u(4,"div",117),ee(5,Sle,35,18,"div",118),f()()),i&2){let t=F();x(5),S("ngForOf",t.getStudentAttendanceStats())}}function Ale(i,e){i&1&&(u(0,"div",146)(1,"div",147),k(2,"i",148),f(),u(3,"h3"),m(4,"Grup Se\xE7iniz"),f(),u(5,"p"),m(6,"Devams\u0131zl\u0131k takibi yapabilmek i\xE7in \xF6nce bir grup se\xE7meniz gerekiyor."),f()())}function Dle(i,e){i&1&&(u(0,"div",146)(1,"div",147),k(2,"i",34),f(),u(3,"h3"),m(4,"\xD6\u011Frenci Bulunamad\u0131"),f(),u(5,"p"),m(6,"Se\xE7ilen grupta hen\xFCz \xF6\u011Frenci bulunmuyor."),f()())}function Fle(i,e){if(i&1&&(u(0,"p"),m(1),f()),i&2){let t=F(2);x(),W(t.selectedStudentStats.student_info.name)}}function Ile(i,e){if(i&1&&(u(0,"div",88)(1,"div",180),k(2,"i",181),f(),u(3,"div",93)(4,"div",89),m(5),f(),u(6,"div",182),m(7),f(),u(8,"div",183),m(9),ha(10,"date"),f()()()),i&2){let t=e.$implicit,n=F(3);x(),xe("present",t.durum==="present")("absent",t.durum==="absent"),x(),xe("bi-check-circle",t.durum==="present")("bi-x-circle",t.durum==="absent"),x(3),W(n.formatDate(t.tarih)),x(),xe("text-success",t.durum==="present")("text-danger",t.durum==="absent"),x(),he(" ",t.durum==="present"?"Kat\u0131ld\u0131":"Kat\u0131lmad\u0131"," "),x(2),W(ol(10,15,t.zaman,"HH:mm"))}}function Tle(i,e){if(i&1&&(u(0,"div",161)(1,"div",162)(2,"div",163)(3,"div",164)(4,"div",165)(5,"h6"),k(6,"i",166),m(7,"\xD6\u011Frenci Bilgileri"),f(),u(8,"div",167)(9,"span",168),m(10,"Ad Soyad:"),f(),u(11,"span",169),m(12),f()(),u(13,"div",167)(14,"span",168),m(15,"E-posta:"),f(),u(16,"span",169),m(17),f()(),u(18,"div",167)(19,"span",168),m(20,"Grup:"),f(),u(21,"span",169),m(22),f()(),u(23,"div",167)(24,"span",168),m(25,"Ders \xDCcreti:"),f(),u(26,"span",169),m(27),f()()()(),u(28,"div",164)(29,"div",165)(30,"h6"),k(31,"i",170),m(32,"Kat\u0131l\u0131m \u0130statistikleri"),f(),u(33,"div",167)(34,"span",168),m(35,"Toplam Ders:"),f(),u(36,"span",169),m(37),f()(),u(38,"div",167)(39,"span",168),m(40,"Kat\u0131ld\u0131\u011F\u0131 Ders:"),f(),u(41,"span",169),m(42),f()(),u(43,"div",167)(44,"span",168),m(45,"Kat\u0131lmad\u0131\u011F\u0131 Ders:"),f(),u(46,"span",169),m(47),f()(),u(48,"div",167)(49,"span",168),m(50,"Kat\u0131l\u0131m Oran\u0131:"),f(),u(51,"span",171),m(52),f()()()()()(),u(53,"div",172)(54,"div",165)(55,"h6"),k(56,"i",173),m(57,"\xD6deme \u0130statistikleri"),f(),u(58,"div",163)(59,"div",174)(60,"div",175)(61,"div",176),m(62),f(),u(63,"div",75),m(64,"Beklenen D\xF6nem"),f()()(),u(65,"div",174)(66,"div",175)(67,"div",176),m(68),f(),u(69,"div",75),m(70,"Beklenen Tutar"),f()()(),u(71,"div",174)(72,"div",175)(73,"div",176),m(74),f(),u(75,"div",75),m(76,"\xD6denen Tutar"),f()()(),u(77,"div",174)(78,"div",175)(79,"div",176),m(80),f(),u(81,"div",75),m(82,"Bor\xE7"),f()()()()()(),u(83,"div",177)(84,"div",165)(85,"h6"),k(86,"i",178),m(87,"Son Kat\u0131l\u0131m Kay\u0131tlar\u0131"),f(),u(88,"div",179),ee(89,Ile,11,18,"div",87),f()()()()),i&2){let t=F(2);x(12),W(t.selectedStudentStats.student_info.name),x(5),W(t.selectedStudentStats.student_info.email),x(5),W(t.selectedStudentStats.student_info.grup),x(5),W(t.formatCurrency(t.selectedStudentStats.student_info.ucret)),x(10),W(t.selectedStudentStats.attendance_stats.total_lessons),x(5),W(t.selectedStudentStats.attendance_stats.present_count),x(5),W(t.selectedStudentStats.attendance_stats.absent_count),x(5),he("%",t.selectedStudentStats.attendance_stats.attendance_percentage,""),x(10),W(t.selectedStudentStats.payment_stats.expected_payment_cycles),x(6),W(t.formatCurrency(t.selectedStudentStats.payment_stats.expected_total_amount)),x(6),W(t.formatCurrency(t.selectedStudentStats.payment_stats.total_paid)),x(5),xe("text-danger",t.selectedStudentStats.payment_stats.debt>0),x(),he(" ",t.formatCurrency(t.selectedStudentStats.payment_stats.debt)," "),x(9),S("ngForOf",t.selectedStudentStats.recent_attendance)}}function Ble(i,e){if(i&1){let t=Ae();u(0,"div",149),U("click",function(){K(t);let r=F();return Y(r.closeStudentStatsModal())}),u(1,"div",150),U("click",function(r){return K(t),Y(r.stopPropagation())}),u(2,"div",151)(3,"div",152)(4,"div",153),k(5,"i",154),f(),u(6,"div",155)(7,"h4"),m(8,"\xD6\u011Frenci Detay \u0130statistikleri"),f(),ee(9,Fle,2,1,"p",141),f()(),u(10,"button",156),U("click",function(){K(t);let r=F();return Y(r.closeStudentStatsModal())}),k(11,"i",157),f()(),ee(12,Tle,90,15,"div",158),u(13,"div",159)(14,"button",160),U("click",function(){K(t);let r=F();return Y(r.closeStudentStatsModal())}),k(15,"i",98),m(16," Kapat "),f()()()()}if(i&2){let t=F();x(9),S("ngIf",t.selectedStudentStats),x(3),S("ngIf",t.selectedStudentStats)}}var w2=class i{constructor(e,t,n){this.http=e;this.route=t;this.toastr=n}videoElement;canvasElement;apiBaseUrl="http://localhost:8000/api";mediaStream=null;qrScanInterval;groups=[];groupStudents=[];attendanceRecords=new Map;pastWeekAttendance=[];historicalAttendance=[];groupedAttendanceByDate=[];selectedGroup="";selectedDate=new Date().toISOString().split("T")[0];viewHistoricalData=!1;startDate="";endDate="";isQRScannerActive=!1;isLoading=!1;hasChanges=!1;get totalStudents(){return this.groupStudents.length}get presentStudents(){return Array.from(this.attendanceRecords.values()).filter(e=>e.status==="present").length}get absentStudents(){return Array.from(this.attendanceRecords.values()).filter(e=>e.status==="absent").length}ngOnInit(){this.route.params.subscribe(e=>{e.grupAdi&&(this.selectedGroup=decodeURIComponent(e.grupAdi))}),this.loadGroups(),this.setTodayDate(),this.restoreLastState()}ngOnDestroy(){this.stopQRScanner()}getAuthHeaders(){let e="",t=localStorage.getItem("user")||sessionStorage.getItem("user");return t&&(e=JSON.parse(t).token||""),new xt({Authorization:`Bearer ${e}`,"Content-Type":"application/json"})}loadGroups(){this.isLoading=!0,this.http.get("./server/api/ogrenciler_listesi.php",{headers:this.getAuthHeaders()}).subscribe({next:e=>{if(e.success&&e.data){let n=this.getLoggedInUser()?.adi_soyadi||"",r=e.data.filter(s=>s.rutbe==="ogrenci"&&s.ogretmeni===n),o=new Map;r.forEach(s=>{let a=s.grubu||"Grup Atanmam\u0131\u015F";o.has(a)||o.set(a,[]),o.get(a)?.push(s)}),this.groups=Array.from(o.entries()).map(([s,a])=>({name:s,students:a,color:this.getGroupColor(s)})),this.selectedGroup&&this.onGroupChange()}this.isLoading=!1},error:e=>{console.error("Gruplar y\xFCklenirken hata:",e),this.toastr.error("Gruplar y\xFCklenemedi","Hata"),this.isLoading=!1}})}getLoggedInUser(){let e=localStorage.getItem("user")||sessionStorage.getItem("user");return e?JSON.parse(e):null}onGroupChange(){if(this.selectedGroup){let e=this.groups.find(t=>t.name===this.selectedGroup);this.groupStudents=e?e.students:[],this.initializeAttendanceRecords(),this.loadAttendanceData(),this.loadPastWeekAttendance(),this.loadHistoricalAttendance(),this.saveLastState()}else this.groupStudents=[],this.attendanceRecords.clear(),this.pastWeekAttendance=[],this.historicalAttendance=[],this.groupedAttendanceByDate=[];this.hasChanges=!1}onDateChange(){this.selectedGroup&&this.selectedDate&&(console.log("Tarih de\u011Fi\u015Fti:",this.selectedDate),this.hasChanges=!1,this.initializeAttendanceRecords(),this.loadAttendanceData(),this.saveLastState())}loadHistoricalAttendance(){if(!this.selectedGroup)return;let e=new Date,t=new Date;t.setDate(t.getDate()-30);let n=t.toISOString().split("T")[0],r=e.toISOString().split("T")[0];this.http.get("./server/api/devamsizlik_kayitlari.php",{headers:this.getAuthHeaders(),params:{grup:this.selectedGroup,baslangic_tarih:n,bitis_tarih:r}}).subscribe({next:o=>{o.success&&o.data?(this.historicalAttendance=o.data.kayitlar||[],this.groupedAttendanceByDate=o.data.tarihlere_gore||[],this.groupedAttendanceByDate.forEach(s=>{if((!s.katilmayanlar||s.katilmayanlar.length===0)&&s.katilmayan_sayisi>0){let a=this.historicalAttendance.filter(d=>d.tarih===s.tarih),l=a.filter(d=>d.durum==="present").map(d=>d.ogrenci_id),c=a.filter(d=>d.durum==="absent").map(d=>d.ogrenci_id);s.katilmayanlar=this.groupStudents.filter(d=>c.includes(d.id))}console.log(`${s.tarih} tarihinde:`,{katilan_sayisi:s.katilan_sayisi,katilmayan_sayisi:s.katilmayan_sayisi,katilanlar:s.katilanlar?.length||0,katilmayanlar:s.katilmayanlar?.length||0,katilmayan_isimler:s.katilmayanlar?.map(a=>a.adi_soyadi)||[]})})):(this.historicalAttendance=[],this.groupedAttendanceByDate=[])},error:o=>{console.error("Ge\xE7mi\u015F devams\u0131zl\u0131k verileri y\xFCklenirken hata:",o),this.historicalAttendance=[],this.groupedAttendanceByDate=[]}})}loadHistoricalAttendanceByDateRange(){if(!this.selectedGroup||!this.startDate||!this.endDate){console.warn("Eksik parametreler:",{selectedGroup:this.selectedGroup,startDate:this.startDate,endDate:this.endDate});return}console.log("Tarih aral\u0131\u011F\u0131 filtresi:",{grup:this.selectedGroup,baslangic_tarih:this.startDate,bitis_tarih:this.endDate}),this.http.get("./server/api/devamsizlik_kayitlari.php",{headers:this.getAuthHeaders(),params:{grup:this.selectedGroup,baslangic_tarih:this.startDate,bitis_tarih:this.endDate}}).subscribe({next:e=>{console.log("Tarih aral\u0131\u011F\u0131 filtre yan\u0131t\u0131:",e),e.success&&e.data?(this.historicalAttendance=e.data.kayitlar||[],this.groupedAttendanceByDate=e.data.tarihlere_gore||[],this.groupedAttendanceByDate.length===0?this.toastr.info("Se\xE7ilen tarih aral\u0131\u011F\u0131nda kay\u0131t bulunamad\u0131","Bilgi"):this.toastr.success(`${this.groupedAttendanceByDate.length} g\xFCnl\xFCk kay\u0131t y\xFCklendi`,"Ba\u015Far\u0131l\u0131")):(this.historicalAttendance=[],this.groupedAttendanceByDate=[],this.toastr.warning("Se\xE7ilen tarih aral\u0131\u011F\u0131nda kay\u0131t bulunamad\u0131","Uyar\u0131"))},error:e=>{console.error("Tarih aral\u0131\u011F\u0131na g\xF6re devams\u0131zl\u0131k verileri y\xFCklenirken hata:",e),this.historicalAttendance=[],this.groupedAttendanceByDate=[],this.toastr.error("Veriler y\xFCklenirken hata olu\u015Ftu","Hata")}})}toggleHistoricalView(){this.viewHistoricalData=!this.viewHistoricalData,this.viewHistoricalData&&this.loadHistoricalAttendance()}getDayName(e){let t=["Pazar","Pazartesi","Sal\u0131","\xC7ar\u015Famba","Per\u015Fembe","Cuma","Cumartesi"],n=new Date(e).getDay();return t[n]}setDateRangeLastWeek(){let e=new Date,t=new Date;t.setDate(e.getDate()-7),this.startDate=t.toISOString().split("T")[0],this.endDate=e.toISOString().split("T")[0],console.log("Son 1 hafta filtrelendi:",this.startDate,"to",this.endDate),this.loadHistoricalAttendanceByDateRange()}setDateRangeLastMonth(){let e=new Date,t=new Date;t.setDate(e.getDate()-30),this.startDate=t.toISOString().split("T")[0],this.endDate=e.toISOString().split("T")[0],console.log("Son 1 ay filtrelendi:",this.startDate,"to",this.endDate),this.loadHistoricalAttendanceByDateRange()}setDateRangeThisMonth(){let e=new Date,t=new Date(e.getFullYear(),e.getMonth(),1),n=new Date(e.getFullYear(),e.getMonth()+1,0);this.startDate=t.toISOString().split("T")[0],this.endDate=n.toISOString().split("T")[0],console.log("Bu ay filtrelendi:",this.startDate,"to",this.endDate),this.loadHistoricalAttendanceByDateRange()}setDateRangeThisYear(){let e=new Date,t=new Date(e.getFullYear(),0,1),n=new Date(e.getFullYear(),11,31);this.startDate=t.toISOString().split("T")[0],this.endDate=n.toISOString().split("T")[0],console.log("Bu y\u0131l filtrelendi:",this.startDate,"to",this.endDate),this.loadHistoricalAttendanceByDateRange()}loadAllAttendanceRecords(){this.selectedGroup&&(console.log("B\xFCt\xFCn devams\u0131zl\u0131k kay\u0131tlar\u0131 y\xFCkleniyor..."),this.http.get("./server/api/devamsizlik_kayitlari.php",{headers:this.getAuthHeaders(),params:{grup:this.selectedGroup,butun_kayitlar:"true"}}).subscribe({next:e=>{console.log("T\xFCm kay\u0131tlar API yan\u0131t\u0131:",e),e.success&&e.data?(this.historicalAttendance=e.data.kayitlar||[],this.groupedAttendanceByDate=e.data.tarihlere_gore||[],console.log("Toplam t\xFCm kay\u0131t:",this.historicalAttendance.length),console.log("Grupland\u0131r\u0131lm\u0131\u015F tarih say\u0131s\u0131:",this.groupedAttendanceByDate.length),console.log("API yan\u0131t\u0131 toplam_kayit:",e.data.toplam_kayit),console.log("Se\xE7ilen grup:",this.selectedGroup),console.log("\u0130lk 5 kay\u0131t:",this.historicalAttendance.slice(0,5)),console.log("Son 5 kay\u0131t:",this.historicalAttendance.slice(-5)),this.startDate="",this.endDate="",this.toastr.success("T\xFCm devams\u0131zl\u0131k kay\u0131tlar\u0131 y\xFCklendi","Ba\u015Far\u0131l\u0131")):(this.historicalAttendance=[],this.groupedAttendanceByDate=[],this.toastr.warning("Herhangi bir kay\u0131t bulunamad\u0131","Uyar\u0131"))},error:e=>{console.error("T\xFCm devams\u0131zl\u0131k kay\u0131tlar\u0131 y\xFCklenirken hata:",e),this.historicalAttendance=[],this.groupedAttendanceByDate=[],this.toastr.error("Kay\u0131tlar y\xFCklenirken hata olu\u015Ftu","Hata")}}))}getTotalPresentInPeriod(){return this.groupedAttendanceByDate.reduce((e,t)=>e+t.katilan_sayisi,0)}getTotalAbsentInPeriod(){return this.groupedAttendanceByDate.reduce((e,t)=>e+t.katilmayan_sayisi,0)}getAttendancePercentage(){let e=this.getTotalPresentInPeriod(),t=this.getTotalAbsentInPeriod(),n=e+t;return n===0?0:Math.round(e/n*100)}getAverageAttendanceRate(){if(this.groupedAttendanceByDate.length===0)return 0;let e=this.getTotalPresentInPeriod(),t=this.getTotalAbsentInPeriod(),n=e+t;return n>0?Math.round(e/n*100):0}getTotalLessonsCount(){return this.groupedAttendanceByDate.length}getTotalAttendanceCount(){return this.getTotalPresentInPeriod()}getTotalAbsenceCount(){return this.getTotalAbsentInPeriod()}getOverallAttendancePercentage(){return this.getAttendancePercentage()}getStudentAttendanceStats(){return!this.selectedGroup||this.groupStudents.length===0?[]:this.groupStudents.map(e=>{let t=this.historicalAttendance.filter(h=>h.ogrenci_id===e.id),n=t.filter(h=>h.durum==="present").length,r=t.filter(h=>h.durum==="absent").length,o=n+r,s=o>0?Math.round(n/o*100):0,a=parseFloat(e.ucret||"0"),l=Math.floor(n/4),c=l*a,d=n>0?4-n%4:4;return{id:e.id,name:e.adi_soyadi,email:e.email,avatar:e.avatar,ucret:a,presentCount:n,absentCount:r,totalLessons:o,attendancePercentage:s,expectedPaymentCycles:l,expectedTotalAmount:c,lessonsUntilNextPayment:d===4?0:d}}).sort((e,t)=>t.attendancePercentage-e.attendancePercentage)}selectedStudentStats=null;showStudentStatsModal=!1;loadStudentDetailedStats(e){return Ge(this,null,function*(){if(!this.selectedGroup){this.toastr.error("L\xFCtfen \xF6nce bir grup se\xE7iniz","Hata");return}console.log("\xD6\u011Frenci detay istatistikleri y\xFCkleniyor:",{studentId:e,grup:this.selectedGroup}),this.isLoading=!0;try{let t=yield this.http.get("./server/api/ogrenci_detay_istatistik.php",{headers:this.getAuthHeaders(),params:{grup:this.selectedGroup,ogrenci_id:e.toString()},responseType:"json"}).toPromise();console.log("\xD6\u011Frenci detay istatistik API yan\u0131t\u0131:",t),t&&t.success?(this.selectedStudentStats=t.data,this.showStudentStatsModal=!0,console.log("Modal a\xE7\u0131l\u0131yor, se\xE7ilen \xF6\u011Frenci stats:",this.selectedStudentStats)):this.toastr.error(t?.message||"\xD6\u011Frenci istatistikleri y\xFCklenemedi","Hata")}catch(t){console.error("\xD6\u011Frenci istatistikleri y\xFCklenirken hata:",t),t.error&&typeof t.error.text=="string"&&t.error.text.includes("<!doctype html>")?(console.error("Server HTML d\xF6nd\xFCrd\xFC, muhtemelen PHP hatas\u0131 var"),this.toastr.error("Server hatas\u0131: API PHP hatas\u0131 d\xF6nd\xFCr\xFCyor","Hata")):t.status===200&&t.error?.error?this.toastr.error("JSON parse hatas\u0131: "+t.error.error.message,"Hata"):this.toastr.error("\u0130statistikler y\xFCklenirken hata olu\u015Ftu","Hata")}finally{this.isLoading=!1}})}closeStudentStatsModal(){this.showStudentStatsModal=!1,this.selectedStudentStats=null}formatCurrency(e){return new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(e)}formatDate(e){return new Date(e).toLocaleDateString("tr-TR")}initializeAttendanceRecords(){this.attendanceRecords.clear(),this.groupStudents.forEach(e=>{this.attendanceRecords.set(e.id,{student_id:e.id,status:"pending",timestamp:new Date,method:"manual"})})}loadAttendanceData(){!this.selectedGroup||!this.selectedDate||(this.isLoading=!0,this.http.get(`./server/api/devamsizlik_kayitlari.php?group=${encodeURIComponent(this.selectedGroup)}&tarih=${this.selectedDate}`,{headers:this.getAuthHeaders(),params:{grup:this.selectedGroup,tarih:this.selectedDate}}).subscribe({next:e=>{if(console.log("API yan\u0131t\u0131 tam yap\u0131s\u0131:",e),e.success){let t=[];e.data&&Array.isArray(e.data)?t=e.data:e.kayitlar&&Array.isArray(e.kayitlar)?t=e.kayitlar:Array.isArray(e.data)&&(t=e.data),console.log("Mevcut yoklama verileri y\xFCklendi:",t),t&&t.length>0?(t.forEach(n=>{this.attendanceRecords.has(n.ogrenci_id)&&this.attendanceRecords.set(n.ogrenci_id,{student_id:n.ogrenci_id,status:n.durum,timestamp:new Date(n.zaman),method:n.yontem})}),console.log(`${this.selectedDate} tarihinde ${t.length} kay\u0131t bulundu`)):console.log(`${this.selectedDate} tarihinde kay\u0131t bulunamad\u0131, yeni yoklama al\u0131nabilir`),this.hasChanges=!1}else console.log(`${this.selectedDate} tarihinde mevcut yoklama kayd\u0131 yok veya hata:`,e.message||"Bilinmeyen hata"),this.hasChanges=!1;this.isLoading=!1},error:e=>{console.error("Devams\u0131zl\u0131k verileri y\xFCklenirken hata:",e),this.hasChanges=!1,this.isLoading=!1}}))}toggleQRScanner(){this.isQRScannerActive?this.stopQRScanner():this.startQRScanner()}startQRScanner(){return Ge(this,null,function*(){try{this.mediaStream=yield navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}),this.isQRScannerActive=!0,setTimeout(()=>{this.videoElement&&(this.videoElement.nativeElement.srcObject=this.mediaStream,this.videoElement.nativeElement.play(),this.startQRCodeDetection())},100)}catch(e){console.error("Kamera eri\u015Fim hatas\u0131:",e),this.toastr.error("Kameraya eri\u015Fim sa\u011Flanamad\u0131","Hata")}})}stopQRScanner(){this.mediaStream&&(this.mediaStream.getTracks().forEach(e=>e.stop()),this.mediaStream=null),this.qrScanInterval&&(clearInterval(this.qrScanInterval),this.qrScanInterval=null),this.isQRScannerActive=!1}startQRCodeDetection(){this.qrScanInterval=setInterval(()=>{this.detectQRCode()},1e3)}detectQRCode(){if(!this.videoElement||!this.canvasElement)return;let e=this.videoElement.nativeElement,t=this.canvasElement.nativeElement,n=t.getContext("2d");if(!n||e.readyState!==e.HAVE_ENOUGH_DATA)return;t.width=e.videoWidth,t.height=e.videoHeight,n.drawImage(e,0,0,t.width,t.height);let r=n.getImageData(0,0,t.width,t.height),o=this.generateMockQRData();o&&this.processQRCode(o)}generateMockQRData(){return Math.random()<.1?`student_${this.groupStudents[Math.floor(Math.random()*this.groupStudents.length)].id}`:null}processQRCode(e){let t=e.match(/student_(\d+)/);if(t){let n=parseInt(t[1]),r=this.groupStudents.find(o=>o.id===n);r?(this.markAttendance(n,"present","qr"),this.toastr.success(`${r.adi_soyadi} QR kod ile kat\u0131ld\u0131 olarak i\u015Faretlendi`,"Ba\u015Far\u0131l\u0131")):this.toastr.warning("QR kodundaki \xF6\u011Frenci bu grupta bulunamad\u0131","Uyar\u0131")}}markAttendance(e,t,n="manual"){if(this.attendanceRecords.has(e)){let r=this.attendanceRecords.get(e);(!r||r.status!==t)&&(this.attendanceRecords.set(e,{student_id:e,status:t,timestamp:new Date,method:n}),this.hasChanges=!0,console.log(`\xD6\u011Frenci ${e} durumu ${t} olarak g\xFCncellendi`))}}markAllPresent(){this.groupStudents.forEach(e=>{this.markAttendance(e.id,"present")})}markAllAbsent(){this.groupStudents.forEach(e=>{this.markAttendance(e.id,"absent")})}getAttendanceStatus(e){let t=this.attendanceRecords.get(e);return t?t.status:"pending"}getAttendanceStatusText(e){switch(this.getAttendanceStatus(e)){case"present":return"Kat\u0131ld\u0131";case"absent":return"Kat\u0131lmad\u0131";default:return"Bekliyor"}}getAttendanceTime(e){let t=this.attendanceRecords.get(e);return t&&t.status!=="pending"?t.timestamp:null}saveAttendance(){if(!this.selectedGroup||!this.hasChanges)return;if(!this.selectedDate){this.toastr.error("L\xFCtfen tarih se\xE7iniz","Hata");return}let e=new Date(this.selectedDate),t=new Date;if(t.setHours(0,0,0,0),e<t){let o=`Se\xE7ilen tarih (${this.formatDate(this.selectedDate)}) ge\xE7mi\u015F bir tarih. Ge\xE7mi\u015F tarihli yoklama kayd\u0131 yapmak istedi\u011Finizden emin misiniz?`;if(!confirm(o)){this.toastr.info("Yoklama kayd\u0131 iptal edildi","Bilgi");return}this.toastr.warning("Ge\xE7mi\u015F tarihli kay\u0131t yap\u0131l\u0131yor...","Uyar\u0131")}let n=Array.from(this.attendanceRecords.values()).filter(o=>o.status!=="pending");if(n.length===0){this.toastr.warning("Kaydedilecek devams\u0131zl\u0131k kayd\u0131 bulunamad\u0131","Uyar\u0131");return}this.isLoading=!0;let r=n.map(o=>({ogrenci_id:o.student_id,grup:this.selectedGroup,tarih:this.selectedDate,durum:o.status,zaman:o.timestamp.toISOString(),yontem:o.method}));console.log("Kaydedilecek devams\u0131zl\u0131k verisi:",{grup:this.selectedGroup,tarih:this.selectedDate,kayit_sayisi:r.length,data:r}),this.http.post("./server/api/devamsizlik_kaydet.php",{records:r},{headers:this.getAuthHeaders()}).subscribe({next:o=>{console.log("Devams\u0131zl\u0131k kaydet API yan\u0131t\u0131:",o),o.success?(this.toastr.success(`${r.length} \xF6\u011Frencinin devams\u0131zl\u0131k kayd\u0131 ba\u015Far\u0131yla kaydedildi`,"Ba\u015Far\u0131l\u0131"),this.hasChanges=!1,this.loadHistoricalAttendance(),this.saveLastState(),this.loadAttendanceData()):this.toastr.error(o.message||"Kay\u0131t s\u0131ras\u0131nda hata olu\u015Ftu","Hata"),this.isLoading=!1},error:o=>{console.error("Devams\u0131zl\u0131k kaydedilirken hata:",o),this.toastr.error("Kay\u0131t s\u0131ras\u0131nda hata olu\u015Ftu","Hata"),this.isLoading=!1}})}loadPastWeekAttendance(){if(!this.selectedGroup)return;let e=new Date;e.setDate(e.getDate()-7);let t=e.toISOString().split("T")[0];this.http.get(`./server/api/devamsizlik_kayitlari.php?group=${encodeURIComponent(this.selectedGroup)}&tarih=${t}`,{headers:this.getAuthHeaders(),params:{grup:this.selectedGroup,tarih:t}}).subscribe({next:n=>{n.success&&n.data?this.pastWeekAttendance=n.data.map(r=>{let o=this.groupStudents.find(s=>s.id===r.ogrenci_id);return ot(Ie({},r),{student:o,adi_soyadi:o?.adi_soyadi||"Bilinmeyen \xD6\u011Frenci",avatar:o?.avatar})}):this.pastWeekAttendance=[]},error:n=>{console.error("Ge\xE7en hafta devams\u0131zl\u0131k verileri y\xFCklenirken hata:",n),this.pastWeekAttendance=[]}})}getPastWeekDate(){let e=new Date;return e.setDate(e.getDate()-7),e}getPastWeekPresentCount(){return this.pastWeekAttendance.filter(e=>e.durum==="present").length}getPastWeekAbsentCount(){return this.pastWeekAttendance.filter(e=>e.durum==="absent").length}getPastWeekPresentStudents(){return this.pastWeekAttendance.filter(e=>e.durum==="present")}getPastWeekAbsentStudents(){return this.pastWeekAttendance.filter(e=>e.durum==="absent")}getDefaultAvatar(e){return`https://ui-avatars.com/api/?name=${encodeURIComponent(e)}&background=4f46e5&color=fff&size=40&font-size=0.6&rounded=true`}getGroupColor(e){let t=["#3B82F6","#EF4444","#10B981","#F59E0B","#8B5CF6","#EC4899","#06B6D4","#84CC16"],n=e.length%t.length;return t[n]}saveLastState(){let e={selectedGroup:this.selectedGroup,selectedDate:this.selectedDate};localStorage.setItem("attendanceState",JSON.stringify(e))}restoreLastState(){let e=localStorage.getItem("attendanceState");if(e){let t=JSON.parse(e);this.selectedGroup=t.selectedGroup,this.selectedDate=t.selectedDate,this.selectedGroup&&this.onGroupChange(),this.selectedDate&&this.onDateChange()}}setTodayDate(){this.selectedDate=new Date().toISOString().split("T")[0]}static \u0275fac=function(t){return new(t||i)(ke(gt),ke(Mi),ke(Bs))};static \u0275cmp=Ke({type:i,selectors:[["app-ogretmen-devamsizlik-sayfasi"]],viewQuery:function(t,n){if(t&1&&(Gi(cle,5),Gi(dle,5)),t&2){let r;Di(r=Fi())&&(n.videoElement=r.first),Di(r=Fi())&&(n.canvasElement=r.first)}},standalone:!1,decls:36,vars:16,consts:[["videoElement",""],["canvasElement",""],[1,"modern-attendance-container"],[1,"controls-card"],[1,"card-header"],[1,"bi","bi-gear"],[1,"card-body"],[1,"controls-grid"],[1,"control-item"],[1,"modern-select",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","date",1,"modern-input",3,"ngModelChange","change","ngModel"],[1,"btn","btn-primary",3,"click","disabled"],[1,"bi","bi-qr-code-scan"],[1,"btn","btn-success",3,"click","disabled"],[1,"bi","bi-check-circle"],["class","qr-scanner-card",4,"ngIf"],["class","students-card",4,"ngIf"],["class","filters-card",4,"ngIf"],["class","stats-section",4,"ngIf"],["class","historical-records",4,"ngIf"],["class","ogrenci-bilgi-kartlari",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","modern-modal-overlay",3,"click",4,"ngIf"],[3,"value"],[1,"qr-scanner-card"],[1,"bi","bi-camera"],[1,"scanner-container"],["autoplay","","playsinline","",1,"scanner-video"],[1,"scanner-canvas",2,"display","none"],[1,"scanner-overlay"],[1,"scanner-box"],[1,"students-card"],[1,"bi","bi-people"],[1,"bulk-actions"],[1,"btn","btn-sm","btn-outline-success",3,"click"],[1,"bi","bi-check-all"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"bi","bi-x-octagon"],[1,"students-grid"],["class","student-card",4,"ngFor","ngForOf"],[1,"student-card"],[1,"student-info"],[1,"student-avatar"],[3,"src","alt"],[1,"student-details"],[1,"status-badge"],[1,"attendance-actions"],[1,"btn-action","present",3,"click"],[1,"bi","bi-check-lg"],[1,"btn-action","absent",3,"click"],[1,"bi","bi-x-lg"],[1,"filters-card"],[1,"bi","bi-filter"],[1,"filters-grid"],[1,"date-range"],[1,"date-input"],["type","date",1,"modern-input",3,"ngModelChange","ngModel"],[1,"quick-filters"],[1,"btn","btn-outline-primary","btn-sm",3,"click"],[1,"bi","bi-calendar-week"],[1,"bi","bi-calendar3"],[1,"bi","bi-calendar-range"],[1,"filter-actions"],[1,"bi","bi-search"],[1,"btn","btn-secondary",3,"click","disabled"],[1,"bi","bi-collection"],[1,"stats-section"],[1,"stats-cards"],[1,"stat-card"],[1,"stat-icon","lessons"],[1,"bi","bi-calendar-event"],[1,"stat-content"],[1,"stat-number"],[1,"stat-label"],[1,"stat-description"],[1,"stat-icon","attendance"],[1,"bi","bi-check-circle-fill"],[1,"stat-icon","absence"],[1,"bi","bi-x-circle-fill"],[1,"stat-icon","percentage"],[1,"bi","bi-percent"],[1,"historical-records"],[1,"records-header"],[1,"bi","bi-clock-history"],[1,"timeline"],["class","timeline-item",4,"ngFor","ngForOf"],[1,"timeline-item"],[1,"timeline-date"],[1,"date-badge"],[1,"day"],[1,"weekday"],[1,"timeline-content"],[1,"attendance-summary"],[1,"summary-stats"],[1,"present-count"],[1,"absent-count"],[1,"bi","bi-x-circle"],[1,"students-list"],["class","present-students",4,"ngIf"],["class","absent-students",4,"ngIf"],["class","no-absents",4,"ngIf"],[1,"present-students"],[1,"bi","bi-person-check"],[1,"student-tags"],["class","student-tag present",4,"ngFor","ngForOf"],[1,"student-tag","present"],[1,"absent-students"],[1,"bi","bi-person-x"],["class","student-tag absent",4,"ngFor","ngForOf"],[1,"student-tag","absent"],[1,"no-absents"],[1,"text-success"],[1,"ogrenci-bilgi-kartlari"],[1,"section-title"],[1,"bi","bi-people-fill"],[1,"bilgi-kartlari-grid"],["class","ogrenci-bilgi-karti",4,"ngFor","ngForOf"],[1,"ogrenci-bilgi-karti"],[1,"kart-header"],["alt","Avatar",1,"ogrenci-avatar",3,"src"],[1,"ogrenci-bilgileri"],[1,"ogrenci-adi"],[1,"ogrenci-email"],[1,"katilim-badge"],[1,"kart-istatistikler"],[1,"istatistik-satiri"],[1,"istatistik-kutusu","katildi"],[1,"istatistik-sayi"],[1,"istatistik-etiket"],[1,"istatistik-kutusu","katilmadi"],[1,"odeme-bilgileri"],[1,"odeme-satiri"],[1,"odeme-etiket"],[1,"odeme-tutar"],["class","sonraki-odeme",4,"ngIf"],["class","odeme-zamani",4,"ngIf"],[1,"kart-footer"],["type","button",1,"detay-buton",3,"click","disabled"],[1,"bi","bi-info-circle-fill"],[4,"ngIf"],[1,"sonraki-odeme"],[1,"bi","bi-clock"],[1,"odeme-zamani"],[1,"bi","bi-exclamation-circle"],[1,"empty-state"],[1,"empty-icon"],[1,"bi","bi-calendar-x"],[1,"modern-modal-overlay",3,"click"],[1,"modern-modal-content","large-modal",3,"click"],[1,"modern-modal-header"],[1,"modal-title-section"],[1,"modal-icon"],[1,"bi","bi-graph-up"],[1,"modal-title-text"],["type","button",1,"modern-close-btn",3,"click"],[1,"bi","bi-x"],["class","modern-modal-body",4,"ngIf"],[1,"modern-modal-footer"],["type","button",1,"modern-btn","modern-btn-secondary",3,"click"],[1,"modern-modal-body"],[1,"student-basic-info","mb-4"],[1,"row"],[1,"col-md-6"],[1,"info-card"],[1,"bi","bi-person-fill","me-2"],[1,"info-item"],[1,"label"],[1,"value"],[1,"bi","bi-graph-up","me-2"],[1,"value","badge","bg-success"],[1,"payment-stats","mb-4"],[1,"bi","bi-credit-card","me-2"],[1,"col-md-3"],[1,"stat-item"],[1,"stat-value"],[1,"recent-attendance"],[1,"bi","bi-clock-history","me-2"],[1,"attendance-timeline"],[1,"timeline-marker"],[1,"bi"],[1,"timeline-status"],[1,"timeline-time","text-muted","small"]],template:function(t,n){t&1&&(u(0,"div",2)(1,"div",3)(2,"div",4)(3,"h3"),k(4,"i",5),m(5," Kontroller"),f()(),u(6,"div",6)(7,"div",7)(8,"div",8)(9,"label"),m(10,"Grup Se\xE7in"),f(),u(11,"select",9),at("ngModelChange",function(o){return dt(n.selectedGroup,o)||(n.selectedGroup=o),o}),U("change",function(){return n.onGroupChange()}),u(12,"option",10),m(13,"Grup se\xE7iniz..."),f(),ee(14,ule,2,2,"option",11),f()(),u(15,"div",8)(16,"label"),m(17,"Tarih"),f(),u(18,"input",12),at("ngModelChange",function(o){return dt(n.selectedDate,o)||(n.selectedDate=o),o}),U("change",function(){return n.onDateChange()}),f()(),u(19,"div",8)(20,"button",13),U("click",function(){return n.toggleQRScanner()}),k(21,"i",14),m(22),f()(),u(23,"div",8)(24,"button",15),U("click",function(){return n.saveAttendance()}),k(25,"i",16),m(26),f()()()()(),ee(27,hle,15,0,"div",17)(28,gle,15,2,"div",18)(29,ple,33,4,"div",19)(30,mle,42,4,"div",20)(31,wle,7,1,"div",21)(32,kle,6,1,"div",22)(33,Ale,7,0,"div",23)(34,Dle,7,0,"div",23),f(),ee(35,Ble,17,2,"div",24)),t&2&&(x(11),st("ngModel",n.selectedGroup),x(3),S("ngForOf",n.groups),x(4),st("ngModel",n.selectedDate),x(2),S("disabled",!n.selectedGroup),x(2),he(" ",n.isQRScannerActive?"QR Taray\u0131c\u0131y\u0131 Kapat":"QR Kod Taray"," "),x(2),S("disabled",!n.hasChanges||n.isLoading),x(2),he(" ",n.isLoading?"Kaydediliyor...":"Yoklamay\u0131 Kaydet"," "),x(),S("ngIf",n.isQRScannerActive),x(),S("ngIf",n.groupStudents.length>0),x(),S("ngIf",n.selectedGroup),x(),S("ngIf",n.groupedAttendanceByDate.length>0),x(),S("ngIf",n.groupedAttendanceByDate.length>0),x(),S("ngIf",n.selectedGroup&&!n.viewHistoricalData),x(),S("ngIf",!n.selectedGroup),x(),S("ngIf",n.selectedGroup&&n.groupStudents.length===0),x(),S("ngIf",n.showStudentStatsModal))},dependencies:[yt,lt,Kn,Yn,rn,qn,fn,Un,cc],styles:['@charset "UTF-8";.modern-attendance-container[_ngcontent-%COMP%]{padding:24px;background:#f8fafc;min-height:100vh;font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif}.modern-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);border-radius:16px;padding:32px;margin-bottom:24px;color:#fff;position:relative;overflow:hidden}.modern-header[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;right:0;width:200px;height:200px;background:#ffffff1a;border-radius:50%;transform:translate(50%,-50%)}.header-content[_ngcontent-%COMP%]{position:relative;z-index:1}.page-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin:0 0 8px;display:flex;align-items:center;gap:12px}.page-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.8rem}.page-subtitle[_ngcontent-%COMP%]{font-size:1.1rem;opacity:.9;margin:0 0 24px;font-weight:400}.quick-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:16px;margin-top:24px}.stat-item[_ngcontent-%COMP%]{background:#ffffff26;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:12px;padding:16px;text-align:center;border:1px solid rgba(255,255,255,.2)}.stat-value[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;margin-bottom:4px}.stat-label[_ngcontent-%COMP%]{font-size:.9rem;opacity:.9}.controls-card[_ngcontent-%COMP%], .qr-scanner-card[_ngcontent-%COMP%], .students-card[_ngcontent-%COMP%], .filters-card[_ngcontent-%COMP%], .student-stats-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;box-shadow:0 4px 20px #00000014;margin-bottom:24px;overflow:hidden;transition:transform .2s ease,box-shadow .2s ease}.controls-card[_ngcontent-%COMP%]:hover, .qr-scanner-card[_ngcontent-%COMP%]:hover, .students-card[_ngcontent-%COMP%]:hover, .filters-card[_ngcontent-%COMP%]:hover, .student-stats-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 30px #0000001f}.card-header[_ngcontent-%COMP%]{background:#f8fafc;border-bottom:1px solid #e2e8f0;padding:20px 24px;display:flex;justify-content:space-between;align-items:center}.card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600;margin:0;color:#1e293b;display:flex;align-items:center;gap:8px}.card-body[_ngcontent-%COMP%]{padding:24px}.controls-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;align-items:end}.control-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:500;color:#374151;margin-bottom:8px;font-size:.9rem}.modern-select[_ngcontent-%COMP%], .modern-input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:2px solid #e5e7eb;border-radius:8px;font-size:.95rem;transition:all .2s ease;background:#fff}.modern-select[_ngcontent-%COMP%]:focus, .modern-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;padding:12px 20px;border:none;border-radius:8px;font-weight:500;font-size:.9rem;cursor:pointer;transition:all .2s ease;text-decoration:none}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 4px 12px #667eea66}.btn-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);color:#fff}.btn-success[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 4px 12px #10b98166}.btn-secondary[_ngcontent-%COMP%]{background:#6b7280;color:#fff}.btn-outline-primary[_ngcontent-%COMP%]{background:transparent;color:#667eea;border:2px solid #667eea}.btn-outline-primary[_ngcontent-%COMP%]:hover{background:#667eea;color:#fff}.btn-outline-success[_ngcontent-%COMP%]{background:transparent;color:#10b981;border:2px solid #10b981}.btn-outline-success[_ngcontent-%COMP%]:hover{background:#10b981;color:#fff}.btn-outline-danger[_ngcontent-%COMP%]{background:transparent;color:#ef4444;border:2px solid #ef4444}.btn-outline-danger[_ngcontent-%COMP%]:hover{background:#ef4444;color:#fff}.btn-sm[_ngcontent-%COMP%]{padding:8px 16px;font-size:.85rem}.scanner-container[_ngcontent-%COMP%]{position:relative;max-width:500px;margin:0 auto;border-radius:12px;overflow:hidden}.scanner-video[_ngcontent-%COMP%]{width:100%;height:300px;object-fit:cover;background:#000}.scanner-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;color:#fff;text-align:center}.scanner-box[_ngcontent-%COMP%]{width:200px;height:200px;border:3px solid #667eea;border-radius:12px;margin-bottom:16px;position:relative}.scanner-box[_ngcontent-%COMP%]:before, .scanner-box[_ngcontent-%COMP%]:after{content:"";position:absolute;width:20px;height:20px;border:3px solid #667eea}.scanner-box[_ngcontent-%COMP%]:before{top:-3px;left:-3px;border-right:none;border-bottom:none}.scanner-box[_ngcontent-%COMP%]:after{bottom:-3px;right:-3px;border-left:none;border-top:none}.students-grid[_ngcontent-%COMP%]{display:grid;gap:16px}.student-card[_ngcontent-%COMP%]{cursor:pointer;transition:all .3s ease}.student-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #00000026;border-color:#007bff}.student-card[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:12px;padding:20px;display:flex;justify-content:space-between;align-items:center;transition:all .2s ease}.student-card[_ngcontent-%COMP%]:hover{background:#f1f5f9;border-color:#cbd5e1;transform:translate(4px)}.student-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;flex:1}.student-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;object-fit:cover;border:3px solid #e2e8f0}.student-details[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 4px;font-weight:600;color:#1e293b}.student-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 8px;color:#64748b;font-size:.9rem}.status-badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:20px;font-size:.8rem;font-weight:500}.status-badge.present[_ngcontent-%COMP%]{background:#dcfce7;color:#166534}.status-badge.absent[_ngcontent-%COMP%]{background:#fee2e2;color:#991b1b}.status-badge.pending[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.attendance-actions[_ngcontent-%COMP%]{display:flex;gap:8px}.btn-action[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:4px;padding:12px 16px;border:2px solid;border-radius:8px;background:transparent;cursor:pointer;transition:all .2s ease;font-size:.8rem;min-width:80px}.btn-action.present[_ngcontent-%COMP%]{border-color:#10b981;color:#10b981}.btn-action.present[_ngcontent-%COMP%]:hover, .btn-action.present.active[_ngcontent-%COMP%]{background:#10b981;color:#fff}.btn-action.absent[_ngcontent-%COMP%]{border-color:#ef4444;color:#ef4444}.btn-action.absent[_ngcontent-%COMP%]:hover, .btn-action.absent.active[_ngcontent-%COMP%]{background:#ef4444;color:#fff}.filters-grid[_ngcontent-%COMP%]{display:grid;gap:24px}.date-range[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px}.quick-filters[_ngcontent-%COMP%]{display:flex;gap:12px;flex-wrap:wrap}.filter-actions[_ngcontent-%COMP%]{display:flex;gap:12px}.stats-section[_ngcontent-%COMP%]{margin-bottom:24px}.stats-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:24px;border:1px solid #e2e8f0;transition:all .2s ease}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #0000001a}.stat-icon[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:1.5rem;margin-bottom:16px}.stat-icon.lessons[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.stat-icon.attendance[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);color:#fff}.stat-icon.absence[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef4444,#dc2626);color:#fff}.stat-icon.percentage[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#d97706);color:#fff}.stat-content[_ngcontent-%COMP%]   .stat-number[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#1e293b;margin-bottom:4px}.stat-content[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-weight:600;color:#374151;margin-bottom:4px}.stat-content[_ngcontent-%COMP%]   .stat-description[_ngcontent-%COMP%]{font-size:.9rem;color:#64748b}.historical-records[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:24px;margin-bottom:24px;box-shadow:0 4px 20px #00000014}.records-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:600;color:#1e293b;margin:0 0 24px;display:flex;align-items:center;gap:8px}.timeline[_ngcontent-%COMP%]{position:relative}.timeline[_ngcontent-%COMP%]:before{content:"";position:absolute;left:60px;top:0;bottom:0;width:2px;background:#e2e8f0}.timeline-item[_ngcontent-%COMP%]{display:flex;margin-bottom:32px;position:relative}.timeline-date[_ngcontent-%COMP%]{width:120px;flex-shrink:0}.date-badge[_ngcontent-%COMP%]{background:#667eea;color:#fff;border-radius:12px;padding:12px;text-align:center;position:relative;z-index:1}.date-badge[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]{font-weight:600;font-size:.9rem}.date-badge[_ngcontent-%COMP%]   .weekday[_ngcontent-%COMP%]{font-size:.8rem;opacity:.9}.timeline-content[_ngcontent-%COMP%]{flex:1;margin-left:24px;background:#f8fafc;border-radius:12px;padding:20px;border:1px solid #e2e8f0}.attendance-summary[_ngcontent-%COMP%]{margin-bottom:16px}.summary-stats[_ngcontent-%COMP%]{display:flex;gap:16px;margin-bottom:16px}.present-count[_ngcontent-%COMP%], .absent-count[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-weight:500}.present-count[_ngcontent-%COMP%]{color:#059669}.absent-count[_ngcontent-%COMP%]{color:#dc2626}.students-list[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;margin:16px 0 8px;color:#374151}.student-tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.student-tag[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:4px;padding:4px 8px;border-radius:12px;font-size:11px;font-weight:500;border:1px solid}.student-tag.present[_ngcontent-%COMP%]{background:var(--success-bg);color:var(--success-color);border-color:var(--success-border)}.student-tag.absent[_ngcontent-%COMP%]{background:var(--danger-bg);color:var(--danger-color);border-color:var(--danger-border)}.student-tag[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:10px}.student-stats-grid[_ngcontent-%COMP%]{display:grid;gap:16px}.student-stat-item[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:12px;padding:20px;display:flex;align-items:center;gap:20px}.student-stat-item[_ngcontent-%COMP%]   .student-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;flex:1}.student-stat-item[_ngcontent-%COMP%]   .student-avatar[_ngcontent-%COMP%]{width:45px;height:45px;border-radius:50%;object-fit:cover;border:2px solid #e2e8f0}.attendance-metrics[_ngcontent-%COMP%]{display:flex;gap:16px}.metric[_ngcontent-%COMP%]{text-align:center}.metric-value[_ngcontent-%COMP%]{display:block;font-size:1.2rem;font-weight:600;color:#1e293b}.metric-label[_ngcontent-%COMP%]{font-size:.8rem;color:#64748b}.progress-bar[_ngcontent-%COMP%]{width:120px;height:8px;background:#e2e8f0;border-radius:4px;overflow:hidden}.progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#10b981,#059669);transition:width .3s ease}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#64748b}.empty-icon[_ngcontent-%COMP%]{font-size:4rem;color:#cbd5e1;margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:600;color:#374151;margin-bottom:8px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;margin:0}.bulk-actions[_ngcontent-%COMP%]{display:flex;gap:8px}@media (max-width: 768px){.modern-attendance-container[_ngcontent-%COMP%]{padding:16px}.modern-header[_ngcontent-%COMP%]{padding:24px 20px}.page-title[_ngcontent-%COMP%]{font-size:1.5rem}.quick-stats[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.controls-grid[_ngcontent-%COMP%], .date-range[_ngcontent-%COMP%]{grid-template-columns:1fr}.quick-filters[_ngcontent-%COMP%]{justify-content:center}.filter-actions[_ngcontent-%COMP%]{flex-direction:column}.stats-cards[_ngcontent-%COMP%]{grid-template-columns:1fr}.student-card[_ngcontent-%COMP%]{flex-direction:column;gap:16px;text-align:center}.attendance-actions[_ngcontent-%COMP%]{justify-content:center}.timeline[_ngcontent-%COMP%]:before{left:30px}.timeline-date[_ngcontent-%COMP%]{width:80px}.timeline-content[_ngcontent-%COMP%]{margin-left:16px}.student-stat-item[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.attendance-metrics[_ngcontent-%COMP%]{justify-content:center}.bulk-actions[_ngcontent-%COMP%]{flex-direction:column}}@media (max-width: 480px){.quick-stats[_ngcontent-%COMP%]{grid-template-columns:1fr}.summary-stats[_ngcontent-%COMP%]{flex-direction:column;gap:8px}.student-tags[_ngcontent-%COMP%]{justify-content:center}.attendance-metrics[_ngcontent-%COMP%]{flex-direction:column;gap:8px}}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.5}}.loading[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s infinite}*[_ngcontent-%COMP%]{transition:all .2s ease}[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:4px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:4px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#94a3b8}.ogrenci-bilgi-kartlari[_ngcontent-%COMP%]{margin-top:2rem}.ogrenci-bilgi-kartlari[_ngcontent-%COMP%]   .bilgi-kartlari-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(380px,1fr));gap:1.5rem;margin-top:1.5rem}.ogrenci-bilgi-kartlari[_ngcontent-%COMP%]   .ogrenci-bilgi-karti[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff,#f8fafc);border-radius:16px;padding:0;box-shadow:0 4px 20px #00000014;border:1px solid #e2e8f0;transition:all .3s ease;cursor:pointer;overflow:hidden}.ogrenci-bilgi-kartlari[_ngcontent-%COMP%]   .ogrenci-bilgi-karti[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 32px #0000001f;border-color:#3b82f6}.ogrenci-bilgi-kartlari[_ngcontent-%COMP%]   .ogrenci-bilgi-karti[_ngcontent-%COMP%]   .kart-header[_ngcontent-%COMP%]{display:flex;align-items:center;padding:1.5rem;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.ogrenci-bilgi-kartlari[_ngcontent-%COMP%]   .ogrenci-bilgi-karti[_ngcontent-%COMP%]   .kart-header[_ngcontent-%COMP%]   .ogrenci-avatar[_ngcontent-%COMP%]{width:64px;height:64px;border-radius:50%;margin-right:1rem;object-fit:cover;border:3px solid rgba(255,255,255,.3);box-shadow:0 4px 12px #0003}.ogrenci-bilgi-kartlari[_ngcontent-%COMP%]   .ogrenci-bilgi-karti[_ngcontent-%COMP%]   .kart-header[_ngcontent-%COMP%]   .ogrenci-bilgileri[_ngcontent-%COMP%]{flex:1}.ogrenci-bilgi-kartlari[_ngcontent-%COMP%]   .ogrenci-bilgi-karti[_ngcontent-%COMP%]   .kart-header[_ngcontent-%COMP%]   .ogrenci-bilgileri[_ngcontent-%COMP%]   .ogrenci-adi[_ngcontent-%COMP%]{margin:0 0 .25rem;font-size:1.25rem;font-weight:700;color:#fff}.ogrenci-bilgi-kartlari[_ngcontent-%COMP%]   .ogrenci-bilgi-karti[_ngcontent-%COMP%]   .kart-header[_ngcontent-%COMP%]   .ogrenci-bilgileri[_ngcontent-%COMP%]   .ogrenci-email[_ngcontent-%COMP%]{margin:0 0 .75rem;color:#fffc;font-size:.875rem}.ogrenci-bilgi-kartlari[_ngcontent-%COMP%]   .ogrenci-bilgi-karti[_ngcontent-%COMP%]   .kart-header[_ngcontent-%COMP%]   .ogrenci-bilgileri[_ngcontent-%COMP%]   .katilim-badge[_ngcontent-%COMP%]{display:inline-block;padding:.25rem .75rem;border-radius:20px;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.5px}.ogrenci-bilgi-kartlari[_ngcontent-%COMP%]   .ogrenci-bilgi-karti[_ngcontent-%COMP%]   .kart-header[_ngcontent-%COMP%]   .ogrenci-bilgileri[_ngcontent-%COMP%]   .katilim-badge.yuksek[_ngcontent-%COMP%]{background:#10b98133;color:#10b981;border:1px solid rgba(16,185,129,.3)}.ogrenci-bilgi-kartlari[_ngcontent-%COMP%]   .ogrenci-bilgi-karti[_ngcontent-%COMP%]   .kart-header[_ngcontent-%COMP%]   .ogrenci-bilgileri[_ngcontent-%COMP%]   .katilim-badge.orta[_ngcontent-%COMP%]{background:#f59e0b33;color:#f59e0b;border:1px solid rgba(245,158,11,.3)}.ogrenci-bilgi-kartlari[_ngcontent-%COMP%]   .ogrenci-bilgi-karti[_ngcontent-%COMP%]   .kart-header[_ngcontent-%COMP%]   .ogrenci-bilgileri[_ngcontent-%COMP%]   .katilim-badge.dusuk[_ngcontent-%COMP%]{background:#ef444433;color:#ef4444;border:1px solid rgba(239,68,68,.3)}.ogrenci-bilgi-kartlari[_ngcontent-%COMP%]   .ogrenci-bilgi-karti[_ngcontent-%COMP%]   .kart-istatistikler[_ngcontent-%COMP%]{padding:1.5rem}.ogrenci-bilgi-kartlari[_ngcontent-%COMP%]   .ogrenci-bilgi-karti[_ngcontent-%COMP%]   .kart-istatistikler[_ngcontent-%COMP%]   .istatistik-satiri[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:1.5rem}.ogrenci-bilgi-kartlari[_ngcontent-%COMP%]   .ogrenci-bilgi-karti[_ngcontent-%COMP%]   .kart-istatistikler[_ngcontent-%COMP%]   .istatistik-satiri[_ngcontent-%COMP%]   .istatistik-kutusu[_ngcontent-%COMP%]{flex:1;text-align:center;padding:1rem;border-radius:12px;transition:all .2s ease}.ogrenci-bilgi-kartlari[_ngcontent-%COMP%]   .ogrenci-bilgi-karti[_ngcontent-%COMP%]   .kart-istatistikler[_ngcontent-%COMP%]   .istatistik-satiri[_ngcontent-%COMP%]   .istatistik-kutusu.katildi[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dcfce7,#bbf7d0);border:1px solid #10b981}.ogrenci-bilgi-kartlari[_ngcontent-%COMP%]   .ogrenci-bilgi-karti[_ngcontent-%COMP%]   .kart-istatistikler[_ngcontent-%COMP%]   .istatistik-satiri[_ngcontent-%COMP%]   .istatistik-kutusu.katildi[_ngcontent-%COMP%]   .istatistik-sayi[_ngcontent-%COMP%]{color:#059669}.ogrenci-bilgi-kartlari[_ngcontent-%COMP%]   .ogrenci-bilgi-karti[_ngcontent-%COMP%]   .kart-istatistikler[_ngcontent-%COMP%]   .istatistik-satiri[_ngcontent-%COMP%]   .istatistik-kutusu.katilmadi[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fef2f2,#fecaca);border:1px solid #ef4444}.ogrenci-bilgi-kartlari[_ngcontent-%COMP%]   .ogrenci-bilgi-karti[_ngcontent-%COMP%]   .kart-istatistikler[_ngcontent-%COMP%]   .istatistik-satiri[_ngcontent-%COMP%]   .istatistik-kutusu.katilmadi[_ngcontent-%COMP%]   .istatistik-sayi[_ngcontent-%COMP%]{color:#dc2626}.ogrenci-bilgi-kartlari[_ngcontent-%COMP%]   .ogrenci-bilgi-karti[_ngcontent-%COMP%]   .kart-istatistikler[_ngcontent-%COMP%]   .istatistik-satiri[_ngcontent-%COMP%]   .istatistik-kutusu[_ngcontent-%COMP%]   .istatistik-sayi[_ngcontent-%COMP%]{font-size:2rem;font-weight:800;line-height:1;margin-bottom:.25rem}.ogrenci-bilgi-kartlari[_ngcontent-%COMP%]   .ogrenci-bilgi-karti[_ngcontent-%COMP%]   .kart-istatistikler[_ngcontent-%COMP%]   .istatistik-satiri[_ngcontent-%COMP%]   .istatistik-kutusu[_ngcontent-%COMP%]   .istatistik-etiket[_ngcontent-%COMP%]{font-size:.75rem;font-weight:600;color:#64748b;text-transform:uppercase;letter-spacing:.5px}.ogrenci-bilgi-kartlari[_ngcontent-%COMP%]   .ogrenci-bilgi-karti[_ngcontent-%COMP%]   .kart-istatistikler[_ngcontent-%COMP%]   .odeme-bilgileri[_ngcontent-%COMP%]{background:#f8fafc;border-radius:12px;padding:1rem;border:1px solid #e2e8f0}.ogrenci-bilgi-kartlari[_ngcontent-%COMP%]   .ogrenci-bilgi-karti[_ngcontent-%COMP%]   .kart-istatistikler[_ngcontent-%COMP%]   .odeme-bilgileri[_ngcontent-%COMP%]   .odeme-satiri[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.75rem}.ogrenci-bilgi-kartlari[_ngcontent-%COMP%]   .ogrenci-bilgi-karti[_ngcontent-%COMP%]   .kart-istatistikler[_ngcontent-%COMP%]   .odeme-bilgileri[_ngcontent-%COMP%]   .odeme-satiri[_ngcontent-%COMP%]   .odeme-etiket[_ngcontent-%COMP%]{color:#64748b;font-size:.875rem;font-weight:500}.ogrenci-bilgi-kartlari[_ngcontent-%COMP%]   .ogrenci-bilgi-karti[_ngcontent-%COMP%]   .kart-istatistikler[_ngcontent-%COMP%]   .odeme-bilgileri[_ngcontent-%COMP%]   .odeme-satiri[_ngcontent-%COMP%]   .odeme-tutar[_ngcontent-%COMP%]{font-weight:700;color:#7c3aed;font-size:1.1rem}.ogrenci-bilgi-kartlari[_ngcontent-%COMP%]   .ogrenci-bilgi-karti[_ngcontent-%COMP%]   .kart-istatistikler[_ngcontent-%COMP%]   .odeme-bilgileri[_ngcontent-%COMP%]   .sonraki-odeme[_ngcontent-%COMP%], .ogrenci-bilgi-kartlari[_ngcontent-%COMP%]   .ogrenci-bilgi-karti[_ngcontent-%COMP%]   .kart-istatistikler[_ngcontent-%COMP%]   .odeme-bilgileri[_ngcontent-%COMP%]   .odeme-zamani[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:.875rem}.ogrenci-bilgi-kartlari[_ngcontent-%COMP%]   .ogrenci-bilgi-karti[_ngcontent-%COMP%]   .kart-istatistikler[_ngcontent-%COMP%]   .odeme-bilgileri[_ngcontent-%COMP%]   .sonraki-odeme[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .ogrenci-bilgi-kartlari[_ngcontent-%COMP%]   .ogrenci-bilgi-karti[_ngcontent-%COMP%]   .kart-istatistikler[_ngcontent-%COMP%]   .odeme-bilgileri[_ngcontent-%COMP%]   .odeme-zamani[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem}.ogrenci-bilgi-kartlari[_ngcontent-%COMP%]   .ogrenci-bilgi-karti[_ngcontent-%COMP%]   .kart-istatistikler[_ngcontent-%COMP%]   .odeme-bilgileri[_ngcontent-%COMP%]   .sonraki-odeme[_ngcontent-%COMP%]{color:#ea580c}.ogrenci-bilgi-kartlari[_ngcontent-%COMP%]   .ogrenci-bilgi-karti[_ngcontent-%COMP%]   .kart-istatistikler[_ngcontent-%COMP%]   .odeme-bilgileri[_ngcontent-%COMP%]   .sonraki-odeme[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#f59e0b}.ogrenci-bilgi-kartlari[_ngcontent-%COMP%]   .ogrenci-bilgi-karti[_ngcontent-%COMP%]   .kart-istatistikler[_ngcontent-%COMP%]   .odeme-bilgileri[_ngcontent-%COMP%]   .odeme-zamani[_ngcontent-%COMP%]{color:#dc2626;font-weight:600;animation:_ngcontent-%COMP%_pulse 2s infinite}.ogrenci-bilgi-kartlari[_ngcontent-%COMP%]   .ogrenci-bilgi-karti[_ngcontent-%COMP%]   .kart-istatistikler[_ngcontent-%COMP%]   .odeme-bilgileri[_ngcontent-%COMP%]   .odeme-zamani[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#ef4444}.ogrenci-bilgi-kartlari[_ngcontent-%COMP%]   .ogrenci-bilgi-karti[_ngcontent-%COMP%]   .kart-alt[_ngcontent-%COMP%]{margin-top:1rem;padding-top:1rem;border-top:1px solid #e2e8f0}.ogrenci-bilgi-kartlari[_ngcontent-%COMP%]   .ogrenci-bilgi-karti[_ngcontent-%COMP%]   .kart-alt[_ngcontent-%COMP%]   .odeme-bilgisi[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;font-size:.875rem;margin-bottom:1rem}.ogrenci-bilgi-kartlari[_ngcontent-%COMP%]   .ogrenci-bilgi-karti[_ngcontent-%COMP%]   .kart-alt[_ngcontent-%COMP%]   .odeme-bilgisi[_ngcontent-%COMP%]   .beklenen-odeme[_ngcontent-%COMP%]{color:#059669;font-weight:600}.ogrenci-bilgi-kartlari[_ngcontent-%COMP%]   .ogrenci-bilgi-karti[_ngcontent-%COMP%]   .kart-alt[_ngcontent-%COMP%]   .odeme-bilgisi[_ngcontent-%COMP%]   .kalan-ders[_ngcontent-%COMP%]{color:#f59e0b;font-weight:500}.ogrenci-bilgi-kartlari[_ngcontent-%COMP%]   .ogrenci-bilgi-karti[_ngcontent-%COMP%]   .kart-alt[_ngcontent-%COMP%]   .odeme-bilgisi[_ngcontent-%COMP%]   .odeme-zamani[_ngcontent-%COMP%]{color:#ef4444;font-weight:600;animation:_ngcontent-%COMP%_pulse 2s infinite}.ogrenci-bilgi-kartlari[_ngcontent-%COMP%]   .ogrenci-bilgi-karti[_ngcontent-%COMP%]   .kart-alt[_ngcontent-%COMP%]   .detay-buton[_ngcontent-%COMP%]{width:100%;background:linear-gradient(135deg,#3b82f6,#1d4ed8);color:#fff;border:none;border-radius:8px;padding:.75rem 1rem;font-size:.875rem;font-weight:500;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:.5rem}.ogrenci-bilgi-kartlari[_ngcontent-%COMP%]   .ogrenci-bilgi-karti[_ngcontent-%COMP%]   .kart-alt[_ngcontent-%COMP%]   .detay-buton[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#1d4ed8,#1e3a8a);transform:translateY(-1px);box-shadow:0 4px 12px #3b82f64d}.ogrenci-bilgi-kartlari[_ngcontent-%COMP%]   .ogrenci-bilgi-karti[_ngcontent-%COMP%]   .kart-alt[_ngcontent-%COMP%]   .detay-buton[_ngcontent-%COMP%]:active{transform:translateY(0)}.ogrenci-bilgi-kartlari[_ngcontent-%COMP%]   .ogrenci-bilgi-karti[_ngcontent-%COMP%]   .kart-alt[_ngcontent-%COMP%]   .detay-buton[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}@media (max-width: 768px){.ogrenci-bilgi-kartlari[_ngcontent-%COMP%]   .bilgi-kartlari-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}.ogrenci-bilgi-kartlari[_ngcontent-%COMP%]   .ogrenci-bilgi-karti[_ngcontent-%COMP%]   .kart-header[_ngcontent-%COMP%]{padding:1rem}.ogrenci-bilgi-kartlari[_ngcontent-%COMP%]   .ogrenci-bilgi-karti[_ngcontent-%COMP%]   .kart-header[_ngcontent-%COMP%]   .ogrenci-avatar[_ngcontent-%COMP%]{width:56px;height:56px}.ogrenci-bilgi-kartlari[_ngcontent-%COMP%]   .ogrenci-bilgi-karti[_ngcontent-%COMP%]   .kart-header[_ngcontent-%COMP%]   .ogrenci-bilgileri[_ngcontent-%COMP%]   .ogrenci-adi[_ngcontent-%COMP%]{font-size:1.1rem}.ogrenci-bilgi-kartlari[_ngcontent-%COMP%]   .ogrenci-bilgi-karti[_ngcontent-%COMP%]   .kart-istatistikler[_ngcontent-%COMP%]{padding:1rem}.ogrenci-bilgi-kartlari[_ngcontent-%COMP%]   .ogrenci-bilgi-karti[_ngcontent-%COMP%]   .kart-istatistikler[_ngcontent-%COMP%]   .istatistik-satiri[_ngcontent-%COMP%]   .istatistik-kutusu[_ngcontent-%COMP%]{padding:.75rem}.ogrenci-bilgi-kartlari[_ngcontent-%COMP%]   .ogrenci-bilgi-karti[_ngcontent-%COMP%]   .kart-istatistikler[_ngcontent-%COMP%]   .istatistik-satiri[_ngcontent-%COMP%]   .istatistik-kutusu[_ngcontent-%COMP%]   .istatistik-sayi[_ngcontent-%COMP%]{font-size:1.5rem}}.kart-footer[_ngcontent-%COMP%]{margin-top:auto;padding-top:1rem;border-top:1px solid #e2e8f0}.detay-buton[_ngcontent-%COMP%]{width:100%;padding:12px 16px;background:linear-gradient(135deg,#4f46e5,#7c3aed);border:none;border-radius:8px;color:#fff;font-size:13px;font-weight:600;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:8px;box-shadow:0 2px 8px #4f46e533}.detay-buton[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#4338ca,#6d28d9);transform:translateY(-2px);box-shadow:0 4px 16px #4f46e54d}.detay-buton[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 2px 8px #4f46e533}.detay-buton[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.detay-buton[_ngcontent-%COMP%]:disabled{background:#94a3b8;cursor:not-allowed;transform:none;box-shadow:none}.detay-buton[_ngcontent-%COMP%]:disabled:hover{background:#94a3b8;transform:none;box-shadow:none}.large-modal[_ngcontent-%COMP%]{max-width:900px!important;width:90%!important}.student-basic-info[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:12px;padding:20px;border:1px solid #e9ecef}.student-basic-info[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#495057;font-weight:600;margin-bottom:15px}.student-basic-info[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#007bff}.student-basic-info[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:8px 0;border-bottom:1px solid #e9ecef}.student-basic-info[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.student-basic-info[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:500;color:#6c757d}.student-basic-info[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:600;color:#212529}.payment-stats[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border-radius:12px;padding:20px}.payment-stats[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin-bottom:20px;font-weight:600}.payment-stats[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{text-align:center}.payment-stats[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;margin-bottom:5px}.payment-stats[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-value.text-danger[_ngcontent-%COMP%]{color:#ff6b6b!important}.payment-stats[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:.85rem;opacity:.9}.recent-attendance[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;border:1px solid #e9ecef}.recent-attendance[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#495057;font-weight:600;margin-bottom:20px}.recent-attendance[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#17a2b8}.recent-attendance[_ngcontent-%COMP%]   .attendance-timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:12px 0;border-bottom:1px solid #f1f3f4}.recent-attendance[_ngcontent-%COMP%]   .attendance-timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.recent-attendance[_ngcontent-%COMP%]   .attendance-timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-marker[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;margin-right:15px}.recent-attendance[_ngcontent-%COMP%]   .attendance-timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-marker.present[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.recent-attendance[_ngcontent-%COMP%]   .attendance-timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-marker.absent[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.recent-attendance[_ngcontent-%COMP%]   .attendance-timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-marker[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem}.recent-attendance[_ngcontent-%COMP%]   .attendance-timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]{flex:1}.recent-attendance[_ngcontent-%COMP%]   .attendance-timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   .timeline-date[_ngcontent-%COMP%]{font-weight:600;color:#212529;margin-bottom:2px}.recent-attendance[_ngcontent-%COMP%]   .attendance-timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   .timeline-status[_ngcontent-%COMP%]{font-weight:500;margin-bottom:2px}.recent-attendance[_ngcontent-%COMP%]   .attendance-timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   .timeline-time[_ngcontent-%COMP%]{font-size:.8rem}.modern-modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0009;display:flex;align-items:center;justify-content:center;z-index:9999;padding:20px}.modern-modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:16px;box-shadow:0 25px 50px #0000004d;max-width:800px;width:100%;max-height:90vh;display:flex;flex-direction:column;animation:_ngcontent-%COMP%_modalSlideIn .3s ease-out}.modern-modal-content.large-modal[_ngcontent-%COMP%]{max-width:1000px}@keyframes _ngcontent-%COMP%_modalSlideIn{0%{opacity:0;transform:scale(.95) translateY(-20px)}to{opacity:1;transform:scale(1) translateY(0)}}.modern-modal-header[_ngcontent-%COMP%]{padding:24px;border-bottom:1px solid #e5e7eb;display:flex;align-items:center;justify-content:space-between;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border-radius:16px 16px 0 0;flex-shrink:0}.modal-title-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;flex:1;min-width:0}.modal-icon[_ngcontent-%COMP%]{width:48px;height:48px;background:#fff3;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:20px;flex-shrink:0}.modal-title-text[_ngcontent-%COMP%]{flex:1;min-width:0}.modal-title-text[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:600;line-height:1.2}.modal-title-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0 0;opacity:.9;font-size:14px;line-height:1.2}.modern-close-btn[_ngcontent-%COMP%]{background:#fff3;border:none;width:40px;height:40px;border-radius:8px;color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:18px;transition:all .2s ease;flex-shrink:0}.modern-close-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d}.modern-modal-body[_ngcontent-%COMP%]{padding:24px;overflow-y:auto;flex:1;min-height:0}.modern-modal-footer[_ngcontent-%COMP%]{padding:20px 24px;background:#f8fafc;border-top:1px solid #e5e7eb;display:flex;gap:12px;justify-content:flex-end;border-radius:0 0 16px 16px;flex-shrink:0}.modern-btn[_ngcontent-%COMP%]{padding:10px 20px;border-radius:8px;font-weight:600;border:none;cursor:pointer;display:flex;align-items:center;gap:8px;transition:all .2s ease;white-space:nowrap}.modern-btn-secondary[_ngcontent-%COMP%]{background:#e5e7eb;color:#374151}.modern-btn-secondary[_ngcontent-%COMP%]:hover{background:#d1d5db}.modern-btn-primary[_ngcontent-%COMP%]{background:#3b82f6;color:#fff}.modern-btn-primary[_ngcontent-%COMP%]:hover{background:#2563eb}.student-basic-info[_ngcontent-%COMP%]{margin-bottom:24px}.info-card[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e5e7eb;border-radius:12px;padding:20px;margin-bottom:16px}.info-card[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin:0 0 16px;color:#374151;font-weight:600;font-size:16px;display:flex;align-items:center;gap:8px}.info-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:8px 0;border-bottom:1px solid #e5e7eb}.info-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.info-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:500;color:#6b7280}.info-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:600;color:#111827}.stats-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin:24px 0}.stat-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e5e7eb;border-radius:12px;padding:20px;text-align:center;transition:all .2s ease}.stat-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #0000001a}.stat-card[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#111827;margin-bottom:4px}.stat-card[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:14px;color:#6b7280;font-weight:500}.attendance-records[_ngcontent-%COMP%]{margin-top:24px}.attendance-records[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin-bottom:16px;color:#374151;font-weight:600}.attendance-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;background:#f8fafc;border:1px solid #e5e7eb;border-radius:8px;margin-bottom:8px}.attendance-date[_ngcontent-%COMP%]{font-weight:500;color:#374151}.attendance-status[_ngcontent-%COMP%]{padding:4px 12px;border-radius:20px;font-size:12px;font-weight:600}.attendance-status.present[_ngcontent-%COMP%]{background:#d1fae5;color:#065f46}.attendance-status.absent[_ngcontent-%COMP%]{background:#fee2e2;color:#991b1b}.attendance-time[_ngcontent-%COMP%]{font-size:12px;color:#6b7280}@media (max-width: 768px){.stats-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.btn-group[_ngcontent-%COMP%]{flex-direction:column}.btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-bottom:8px}.modern-modal-overlay[_ngcontent-%COMP%]{padding:10px}.modern-modal-content[_ngcontent-%COMP%]{max-height:95vh}.modern-modal-header[_ngcontent-%COMP%], .modern-modal-body[_ngcontent-%COMP%]{padding:16px}.modern-modal-footer[_ngcontent-%COMP%]{padding:16px;flex-direction:column}.modern-btn[_ngcontent-%COMP%]{width:100%;justify-content:center}.stats-cards[_ngcontent-%COMP%]{grid-template-columns:1fr}.info-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:4px}.modal-title-section[_ngcontent-%COMP%]{gap:12px}.modal-icon[_ngcontent-%COMP%]{width:40px;height:40px;font-size:18px}.modal-title-text[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:18px}}']})};function Nle(i,e){i&1&&(u(0,"div",12),k(1,"div",13),u(2,"p"),m(3,"Grup detaylar\u0131 y\xFCkleniyor..."),f()())}function Lle(i,e){if(i&1&&(u(0,"div",14),k(1,"i",15),u(2,"p"),m(3),f()()),i&2){let t=F();x(3),W(t.error)}}function Rle(i,e){if(i&1&&(u(0,"div",29)(1,"div",30),m(2),f(),u(3,"div",31),m(4),f(),u(5,"div",32),m(6),f()()),i&2){let t=e.$implicit;x(2),W(t.ders_gunu),x(2),W(t.ders_saati),x(2),W(t.ders_adi)}}function zle(i,e){if(i&1&&(u(0,"div",33)(1,"div"),k(2,"img",34),f(),u(3,"div",35)(4,"div",36),m(5),f(),u(6,"div",37),m(7),f()(),u(8,"div",38),m(9),f()()),i&2){let t=e.$implicit;x(2),S("src",t.avatar,vt),x(3),W(t.adi_soyadi),x(2),W(t.email),x(),xe("active",t.aktif)("inactive",!t.aktif),x(),he(" ",t.aktif?"Aktif":"Pasif"," ")}}function jle(i,e){i&1&&(u(0,"div",39),k(1,"i",40),u(2,"p"),m(3,"Hen\xFCz hi\xE7 ders kayd\u0131 bulunmuyor."),f()())}function Vle(i,e){if(i&1&&(u(0,"div",46)(1,"span",47),m(2,"\xD6\u011Fretmen:"),f(),u(3,"span",48),m(4),f()()),i&2){let t=F().$implicit;x(4),W(t.ogretmen_adi)}}function Ule(i,e){if(i&1){let t=Ae();u(0,"div",43)(1,"div",44),k(2,"i",40),u(3,"h3"),m(4),f()(),u(5,"div",45)(6,"div",46)(7,"span",47),m(8,"Tarih:"),f(),u(9,"span",48),m(10),f()(),u(11,"div",46)(12,"span",47),m(13,"Sayfa Say\u0131s\u0131:"),f(),u(14,"span",48),m(15),f()(),ee(16,Vle,5,1,"div",49),f(),u(17,"div",50)(18,"button",51),U("click",function(){let r=K(t).$implicit,o=F(3);return Y(o.viewLessonPdf(r.pdf_dosya_yolu))}),k(19,"i",52),m(20," PDF G\xF6r\xFCnt\xFCle "),f()()()}if(i&2){let t=e.$implicit,n=F(3);x(4),W(t.pdf_adi),x(6),W(n.formatDate(t.olusturma_zamani)),x(5),he("",t.sayfa_sayisi," sayfa"),x(),S("ngIf",t.ogretmen_adi),x(2),S("disabled",!t.pdf_dosya_yolu)}}function Hle(i,e){if(i&1&&(u(0,"div",41),ee(1,Ule,21,5,"div",42),f()),i&2){let t=F(2);x(),S("ngForOf",t.grupDetay.dersKayitlari)}}function Gle(i,e){if(i&1&&(u(0,"div",16)(1,"div",17)(2,"div",18),k(3,"i",19),u(4,"h2"),m(5,"Ders Program\u0131"),f()(),u(6,"div",20),ee(7,Rle,7,3,"div",21),f()(),u(8,"div",17)(9,"div",18),k(10,"i",22),u(11,"h2"),m(12,"\xD6\u011Frenciler"),f()(),u(13,"div",23),ee(14,zle,10,8,"div",24),f()(),u(15,"div",25)(16,"div",18),k(17,"i",26),u(18,"h2"),m(19,"\u0130\u015Flenen Konular"),f()(),ee(20,jle,4,0,"div",27)(21,Hle,2,1,"div",28),f()()),i&2){let t=F();x(7),S("ngForOf",t.grupDetay.students),x(7),S("ngForOf",t.grupDetay.students),x(6),S("ngIf",t.grupDetay.dersKayitlari.length===0),x(),S("ngIf",t.grupDetay.dersKayitlari.length>0)}}function $le(i,e){if(i&1){let t=Ae();u(0,"div",53),U("click",function(){K(t);let r=F();return Y(r.closePdfViewer())}),u(1,"div",54),U("click",function(r){return K(t),Y(r.stopPropagation())}),u(2,"div",55)(3,"h3"),k(4,"i",56),m(5," PDF G\xF6r\xFCnt\xFCleyici "),f()(),u(6,"div",57)(7,"div",58)(8,"div",59),k(9,"i",60),u(10,"h4"),m(11,"PDF G\xF6r\xFCnt\xFCleyici"),f(),u(12,"p"),m(13,"PDF dosyas\u0131n\u0131 g\xF6r\xFCnt\xFClemek i\xE7in a\u015Fa\u011F\u0131daki se\xE7enekleri kullan\u0131n:"),f(),u(14,"div",61)(15,"button",62),U("click",function(){K(t);let r=F();return Y(r.openPdfInNewTab())}),k(16,"i",63),m(17," Yeni Sekmede G\xF6r\xFCnt\xFCle "),f(),u(18,"button",64),U("click",function(){K(t);let r=F();return Y(r.downloadPdf())}),k(19,"i",65),m(20," \u0130ndir "),f()()()()()()()}}var M2=class i{constructor(e,t){this.route=e;this.http=t}grupAdi="";grupDetay={name:"",students:[],dersProgram:[],dersKayitlari:[]};isLoading=!0;error=null;selectedPdf=null;showPdfModal=!1;pdfLoaded=!1;apiBaseUrl=this.getApiBaseUrl();getApiBaseUrl(){let e=window.location.hostname;return e==="localhost"||e==="127.0.0.1"||e.includes("replit")?"http://localhost/server/api":"https://kimyaogreniyorum.com/server/api"}ngOnInit(){this.route.params.subscribe(e=>{this.grupAdi=decodeURIComponent(e.grupAdi),this.loadGrupDetay()})}loadGrupDetay(){this.isLoading=!0,this.error=null;let e="",t=localStorage.getItem("user")||sessionStorage.getItem("user");t&&(e=JSON.parse(t).token||"");let n=new xt({Authorization:`Bearer ${e}`});this.http.get("./server/api/ogrenciler_listesi.php",{headers:n}).subscribe({next:r=>{r.success?(this.grupDetay.students=r.data.filter(o=>o.grubu===this.grupAdi),this.grupDetay.name=this.grupAdi,this.loadDersKayitlari()):(this.error=r.message||"\xD6\u011Frenci verileri y\xFCklenirken hata olu\u015Ftu.",this.isLoading=!1)},error:r=>{this.error="Sunucu hatas\u0131: "+(r.error?.message||r.message),this.isLoading=!1}})}loadDersKayitlari(){let e="",t=localStorage.getItem("user")||sessionStorage.getItem("user");t&&(e=JSON.parse(t).token||"");let n=new xt({Authorization:`Bearer ${e}`});this.http.get(`./server/api/grup_ders_kayitlari.php?grup=${encodeURIComponent(this.grupAdi)}`,{headers:n}).subscribe({next:r=>{r.success&&(this.grupDetay.dersKayitlari=r.data||[]),this.loadDersProgram()},error:r=>{console.error("Ders kay\u0131tlar\u0131 y\xFCklenirken hata:",r),this.loadDersProgram()}})}loadDersProgram(){let e={"9A S\u0131n\u0131f\u0131":[{gun:"Pazartesi",saat:"09:00-10:00",ders_adi:"Kimya"},{gun:"\xC7ar\u015Famba",saat:"14:00-15:00",ders_adi:"Kimya"},{gun:"Cuma",saat:"11:00-12:00",ders_adi:"Kimya"}],"10A S\u0131n\u0131f\u0131":[{gun:"Sal\u0131",saat:"10:00-11:00",ders_adi:"Kimya"},{gun:"Per\u015Fembe",saat:"13:00-14:00",ders_adi:"Kimya"},{gun:"Cumartesi",saat:"09:00-10:00",ders_adi:"Kimya"}],"11A S\u0131n\u0131f\u0131":[{gun:"Pazartesi",saat:"14:00-15:00",ders_adi:"Kimya"},{gun:"\xC7ar\u015Famba",saat:"10:00-11:00",ders_adi:"Kimya"},{gun:"Cuma",saat:"15:00-16:00",ders_adi:"Kimya"}],"12A S\u0131n\u0131f\u0131":[{gun:"Sal\u0131",saat:"13:00-14:00",ders_adi:"Kimya"},{gun:"Per\u015Fembe",saat:"09:00-10:00",ders_adi:"Kimya"},{gun:"Cumartesi",saat:"14:00-15:00",ders_adi:"Kimya"}]};this.grupDetay.dersProgram=e[this.grupAdi]||[{gun:"Pazartesi",saat:"09:00-10:00",ders_adi:"Kimya"},{gun:"\xC7ar\u015Famba",saat:"14:00-15:00",ders_adi:"Kimya"}],this.isLoading=!1}openPdfViewer(e){this.selectedPdf=`./server/api/pdf_viewer.php?file=${encodeURIComponent(e)}`}closePdfViewer(){this.showPdfModal=!1,this.selectedPdf=null,this.pdfLoaded=!1,console.log("PDF modal kapat\u0131ld\u0131")}onPdfLoad(){this.pdfLoaded=!0,console.log("PDF ba\u015Far\u0131yla y\xFCklendi")}onPdfLoadError(e){console.error("PDF y\xFCklenemedi:",this.selectedPdf,e),this.pdfLoaded=!1,setTimeout(()=>{alert("PDF dosyas\u0131 y\xFCklenirken hata olu\u015Ftu. Dosya mevcut olmayabilir veya bozuk olabilir.")},100)}formatDate(e){return new Date(e).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}viewLessonPdf(e){if(!e){alert("PDF dosya ad\u0131 bulunamad\u0131!");return}console.log("PDF a\xE7\u0131l\u0131yor:",e),console.log("API Base URL:",this.apiBaseUrl),this.pdfLoaded=!1,this.selectedPdf=null,this.showPdfModal=!0,setTimeout(()=>{this.selectedPdf=`./server/api/pdf_viewer.php?file=${encodeURIComponent(e)}`,console.log("PDF URL olu\u015Fturuldu:",this.selectedPdf)},100)}openPdfInNewTab(){this.selectedPdf&&window.open(this.selectedPdf,"_blank")}downloadPdf(){if(this.selectedPdf){let e=document.createElement("a");e.href=this.selectedPdf,e.download="ders_notlari.pdf",document.body.appendChild(e),e.click(),document.body.removeChild(e)}}viewDrawingPng(e){if(e){let t=e.replace(".pdf",".png"),n=`${this.apiBaseUrl}/png_viewer.php?file=${encodeURIComponent(t)}`;window.open(n,"_blank")}}downloadFile(e,t){if(e){let n=t==="pdf"?`${this.apiBaseUrl}/pdf_viewer.php?file=${encodeURIComponent(e)}`:`${this.apiBaseUrl}/png_viewer.php?file=${encodeURIComponent(e)}`,r=document.createElement("a");r.href=n,r.download=e,document.body.appendChild(r),r.click(),document.body.removeChild(r)}}printPdf(){if(this.selectedPdf){let e=window.open(this.selectedPdf,"_blank");e&&(e.onload=()=>{e.print()})}}static \u0275fac=function(t){return new(t||i)(ke(Mi),ke(gt))};static \u0275cmp=Ke({type:i,selectors:[["app-ogretmen-gruplar-detay-sayfasi"]],standalone:!1,decls:16,vars:7,consts:[[1,"grup-detay-container"],[1,"header-section"],["routerLink","/yonetici/ogrenci-gruplar",1,"back-button"],[1,"fas","fa-arrow-left"],[1,"grup-title"],[1,"stats"],[1,"student-count"],[1,"lesson-count"],["class","loading-container",4,"ngIf"],["class","error-container",4,"ngIf"],["class","content-grid",4,"ngIf"],["class","pdf-modal-overlay",3,"click",4,"ngIf"],[1,"loading-container"],[1,"spinner"],[1,"error-container"],[1,"fas","fa-exclamation-triangle"],[1,"content-grid"],[1,"section-card"],[1,"section-header"],[1,"fas","fa-calendar-alt"],[1,"program-list"],["class","program-item",4,"ngFor","ngForOf"],[1,"fas","fa-users"],[1,"students-list"],["class","student-item",4,"ngFor","ngForOf"],[1,"section-card","full-width"],[1,"fas","fa-book"],["class","empty-state",4,"ngIf"],["class","lessons-grid",4,"ngIf"],[1,"program-item"],[1,"day"],[1,"time"],[1,"subject"],[1,"student-item"],["alt","",2,"width","45px","height","45px","border-radius","50%",3,"src"],[1,"student-info"],[1,"student-name"],[1,"student-email"],[1,"student-status"],[1,"empty-state"],[1,"fas","fa-file-pdf"],[1,"lessons-grid"],["class","lesson-card",4,"ngFor","ngForOf"],[1,"lesson-card"],[1,"lesson-header"],[1,"lesson-info"],[1,"info-item"],[1,"label"],[1,"value"],["class","info-item",4,"ngIf"],[1,"lesson-actions"],[1,"action-btn","view-btn",3,"click","disabled"],[1,"fas","fa-eye"],[1,"pdf-modal-overlay",3,"click"],[1,"pdf-modal-content",3,"click"],[1,"pdf-modal-header"],[1,"bi","bi-file-earmark-pdf-fill","me-2"],[1,"pdf-modal-body"],[1,"pdf-fallback"],[1,"fallback-content"],[1,"bi","bi-file-earmark-pdf","pdf-icon"],[1,"pdf-actions"],[1,"pdf-action-btn","primary",3,"click"],[1,"bi","bi-eye"],[1,"pdf-action-btn","secondary",3,"click"],[1,"bi","bi-download"]],template:function(t,n){t&1&&(u(0,"div",0)(1,"div",1)(2,"button",2),k(3,"i",3),m(4," Geri "),f(),u(5,"h1",4),m(6),f(),u(7,"div",5)(8,"span",6),m(9),f(),u(10,"span",7),m(11),f()()(),ee(12,Nle,4,0,"div",8)(13,Lle,4,1,"div",9)(14,Gle,22,4,"div",10),f(),ee(15,$le,21,0,"div",11)),t&2&&(x(6),W(n.grupDetay.name),x(3),he("",n.grupDetay.students.length," \xD6\u011Frenci"),x(2),he("",n.grupDetay.dersKayitlari.length," Ders Kayd\u0131"),x(),S("ngIf",n.isLoading),x(),S("ngIf",n.error&&!n.isLoading),x(),S("ngIf",!n.isLoading&&!n.error),x(),S("ngIf",n.showPdfModal))},dependencies:[yt,lt,xi],styles:['.grup-detay-container[_ngcontent-%COMP%]{padding:20px;width:100%;margin:0 auto}.header-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;margin-bottom:30px;flex-wrap:wrap}.header-section[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:10px 15px;background:#6c757d;color:#fff;border:none;border-radius:8px;cursor:pointer;font-size:14px;transition:all .3s ease}.header-section[_ngcontent-%COMP%]   .grup-title[_ngcontent-%COMP%]{flex:1;margin:0;font-size:28px;font-weight:600;color:#2d3748}.header-section[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]{display:flex;gap:15px}.header-section[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:8px 16px;background:#f8f9fa;border-radius:20px;font-size:14px;font-weight:500;color:#495057}.header-section[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   .student-count[_ngcontent-%COMP%]{background:#e3f2fd;color:#1976d2}.header-section[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   .lesson-count[_ngcontent-%COMP%]{background:#f3e5f5;color:#7b1fa2}.loading-container[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #f3f3f3;border-top:4px solid #007bff;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:20px}.error-container[_ngcontent-%COMP%]{color:#dc3545}.error-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:48px;margin-bottom:16px}.content-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px}.section-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:24px;box-shadow:0 2px 8px #0000001a;border:1px solid #e9ecef}.section-card[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:20px;padding-bottom:12px;border-bottom:2px solid #f8f9fa}.section-card[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px;color:#007bff}.section-card[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:600;color:#2d3748}.program-list[_ngcontent-%COMP%]   .program-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px;padding:12px;margin-bottom:8px;background:#f8f9fa;border-radius:8px;align-items:center}.program-list[_ngcontent-%COMP%]   .program-item[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]{font-weight:600;color:#495057}.program-list[_ngcontent-%COMP%]   .program-item[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{color:#007bff;font-weight:500}.program-list[_ngcontent-%COMP%]   .program-item[_ngcontent-%COMP%]   .subject[_ngcontent-%COMP%]{background:#e7f3ff;color:#06c;padding:4px 8px;border-radius:12px;text-align:center;font-size:12px;font-weight:500}.students-list[_ngcontent-%COMP%]   .student-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px;margin-bottom:8px;background:#f8f9fa;border-radius:8px}.students-list[_ngcontent-%COMP%]   .student-item[_ngcontent-%COMP%]   .student-avatar[_ngcontent-%COMP%]{width:40px;height:40px;background:#007bff;border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff}.students-list[_ngcontent-%COMP%]   .student-item[_ngcontent-%COMP%]   .student-info[_ngcontent-%COMP%]   .student-name[_ngcontent-%COMP%]{font-weight:600;color:#2d3748;margin-bottom:2px}.students-list[_ngcontent-%COMP%]   .student-item[_ngcontent-%COMP%]   .student-info[_ngcontent-%COMP%]   .student-email[_ngcontent-%COMP%]{font-size:12px;color:#6c757d}.students-list[_ngcontent-%COMP%]   .student-item[_ngcontent-%COMP%]   .student-status[_ngcontent-%COMP%]{padding:4px 12px;border-radius:12px;font-size:12px;font-weight:500}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#6c757d}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:48px;margin-bottom:16px;opacity:.5}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px}.lesson-card[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:12px;padding:20px;border:1px solid #e9ecef;transition:all .3s ease}.lesson-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.lesson-card[_ngcontent-%COMP%]   .lesson-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:16px}.lesson-card[_ngcontent-%COMP%]   .lesson-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:24px;color:#dc3545}.lesson-card[_ngcontent-%COMP%]   .lesson-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:600;color:#2d3748;line-height:1.4}.lesson-card[_ngcontent-%COMP%]   .lesson-info[_ngcontent-%COMP%]{margin-bottom:16px}.lesson-card[_ngcontent-%COMP%]   .lesson-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:8px}.lesson-card[_ngcontent-%COMP%]   .lesson-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:500;color:#6c757d;font-size:14px}.lesson-card[_ngcontent-%COMP%]   .lesson-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#2d3748;font-size:14px}.lesson-card[_ngcontent-%COMP%]   .lesson-actions[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:flex-end;margin-top:12px;flex-wrap:wrap}.lesson-card[_ngcontent-%COMP%]   .lesson-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:6px;cursor:pointer;font-size:14px;font-weight:500;transition:all .2s ease;display:flex;align-items:center;gap:6px}.lesson-card[_ngcontent-%COMP%]   .lesson-actions[_ngcontent-%COMP%]   .action-btn.view-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.lesson-card[_ngcontent-%COMP%]   .lesson-actions[_ngcontent-%COMP%]   .action-btn.view-btn.secondary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f093fb,#f5576c)}.lesson-card[_ngcontent-%COMP%]   .lesson-actions[_ngcontent-%COMP%]   .action-btn.view-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 4px 12px #667eea66}.lesson-card[_ngcontent-%COMP%]   .lesson-actions[_ngcontent-%COMP%]   .action-btn.view-btn.secondary[_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 4px 12px #f093fb66}.lesson-card[_ngcontent-%COMP%]   .lesson-actions[_ngcontent-%COMP%]   .action-btn.download-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4facfe,#00f2fe);color:#fff}.lesson-card[_ngcontent-%COMP%]   .lesson-actions[_ngcontent-%COMP%]   .action-btn.download-btn.secondary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#43e97b,#38f9d7)}.lesson-card[_ngcontent-%COMP%]   .lesson-actions[_ngcontent-%COMP%]   .action-btn.download-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 4px 12px #4facfe66}.lesson-card[_ngcontent-%COMP%]   .lesson-actions[_ngcontent-%COMP%]   .action-btn.download-btn.secondary[_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 4px 12px #43e97b66}.lesson-card[_ngcontent-%COMP%]   .lesson-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;transform:none!important;box-shadow:none!important}.lesson-card[_ngcontent-%COMP%]   .lesson-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:12px}.grup-detay-container[_ngcontent-%COMP%]{padding:20px;background:#f8f9fa;min-height:100vh}.header-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;margin-bottom:30px;padding:20px;background:#fff;border-radius:12px;box-shadow:0 2px 10px #0000001a}.header-section[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{background:#6c757d;color:#fff;border:none;padding:10px 15px;border-radius:8px;display:flex;align-items:center;gap:8px;transition:all .3s ease}.header-section[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]:hover{background:#5a6268;transform:translateY(-1px)}.header-section[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.header-section[_ngcontent-%COMP%]   .grup-title[_ngcontent-%COMP%]{font-size:28px;font-weight:700;color:#333;margin:0}.header-section[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]{margin-left:auto;display:flex;gap:20px}.header-section[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#e9ecef;padding:8px 16px;border-radius:20px;font-weight:500;color:#495057}.header-section[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   span.student-count[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.header-section[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   span.lesson-count[_ngcontent-%COMP%]{background:#d1ecf1;color:#0c5460}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;background:#fff;border-radius:12px;box-shadow:0 2px 10px #0000001a}.loading-container[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #f3f3f3;border-top:4px solid #007bff;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:20px}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6c757d;font-size:16px;margin:0}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.error-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;background:#fff;border-radius:12px;box-shadow:0 2px 10px #0000001a}.error-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:48px;color:#dc3545;margin-bottom:20px}.error-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#dc3545;font-size:16px;text-align:center;margin:0}.content-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:30px}@media (max-width: 768px){.content-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.section-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:25px;box-shadow:0 2px 10px #0000001a}.section-card.full-width[_ngcontent-%COMP%]{grid-column:1/-1}.section-card[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:20px;padding-bottom:15px;border-bottom:2px solid #e9ecef}.section-card[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:24px;color:#007bff}.section-card[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#333;margin:0}.program-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.program-list[_ngcontent-%COMP%]   .program-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:100px 120px 1fr;gap:15px;padding:15px;background:#f8f9fa;border-radius:8px;border-left:4px solid #007bff}.program-list[_ngcontent-%COMP%]   .program-item[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]{font-weight:700;color:#495057}.program-list[_ngcontent-%COMP%]   .program-item[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{color:#6c757d;font-family:monospace}.program-list[_ngcontent-%COMP%]   .program-item[_ngcontent-%COMP%]   .subject[_ngcontent-%COMP%]{color:#007bff;font-weight:500}.students-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.students-list[_ngcontent-%COMP%]   .student-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;padding:15px;background:#f8f9fa;border-radius:8px;transition:all .3s ease}.students-list[_ngcontent-%COMP%]   .student-item[_ngcontent-%COMP%]:hover{background:#e9ecef;transform:translateY(-1px)}.students-list[_ngcontent-%COMP%]   .student-item[_ngcontent-%COMP%]   .student-avatar[_ngcontent-%COMP%]{width:45px;height:45px;background:#007bff;border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff}.students-list[_ngcontent-%COMP%]   .student-item[_ngcontent-%COMP%]   .student-avatar[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px}.students-list[_ngcontent-%COMP%]   .student-item[_ngcontent-%COMP%]   .student-info[_ngcontent-%COMP%]{flex:1}.students-list[_ngcontent-%COMP%]   .student-item[_ngcontent-%COMP%]   .student-info[_ngcontent-%COMP%]   .student-name[_ngcontent-%COMP%]{font-weight:700;color:#333;margin-bottom:4px}.students-list[_ngcontent-%COMP%]   .student-item[_ngcontent-%COMP%]   .student-info[_ngcontent-%COMP%]   .student-email[_ngcontent-%COMP%]{color:#6c757d;font-size:14px}.students-list[_ngcontent-%COMP%]   .student-item[_ngcontent-%COMP%]   .student-status[_ngcontent-%COMP%]{padding:6px 12px;border-radius:20px;font-size:12px;font-weight:700}.students-list[_ngcontent-%COMP%]   .student-item[_ngcontent-%COMP%]   .student-status.active[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.students-list[_ngcontent-%COMP%]   .student-item[_ngcontent-%COMP%]   .student-status.inactive[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:64px;color:#dee2e6;margin-bottom:20px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6c757d;font-size:16px;margin:0}.lessons-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px}.lessons-grid[_ngcontent-%COMP%]   .lesson-card[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:12px;padding:20px;border:1px solid #e9ecef;transition:all .3s ease}.lessons-grid[_ngcontent-%COMP%]   .lesson-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 15px #0000001a}.lessons-grid[_ngcontent-%COMP%]   .lesson-card[_ngcontent-%COMP%]   .lesson-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:15px}.lessons-grid[_ngcontent-%COMP%]   .lesson-card[_ngcontent-%COMP%]   .lesson-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:24px;color:#dc3545}.lessons-grid[_ngcontent-%COMP%]   .lesson-card[_ngcontent-%COMP%]   .lesson-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#333;margin:0}.lessons-grid[_ngcontent-%COMP%]   .lesson-card[_ngcontent-%COMP%]   .lesson-meta[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;margin-bottom:15px}.lessons-grid[_ngcontent-%COMP%]   .lesson-card[_ngcontent-%COMP%]   .lesson-meta[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;color:#6c757d}.lessons-grid[_ngcontent-%COMP%]   .lesson-card[_ngcontent-%COMP%]   .lesson-meta[_ngcontent-%COMP%]   span.lesson-date[_ngcontent-%COMP%]{font-weight:500}.lessons-grid[_ngcontent-%COMP%]   .lesson-card[_ngcontent-%COMP%]   .lesson-actions[_ngcontent-%COMP%]{display:flex;gap:10px}.lessons-grid[_ngcontent-%COMP%]   .lesson-card[_ngcontent-%COMP%]   .lesson-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{flex:1;padding:8px 12px;border:none;border-radius:6px;font-size:14px;font-weight:500;display:flex;align-items:center;justify-content:center;gap:6px;transition:all .3s ease;cursor:pointer}.lessons-grid[_ngcontent-%COMP%]   .lesson-card[_ngcontent-%COMP%]   .lesson-actions[_ngcontent-%COMP%]   .action-btn.view-btn[_ngcontent-%COMP%]{background:#007bff;color:#fff}.lessons-grid[_ngcontent-%COMP%]   .lesson-card[_ngcontent-%COMP%]   .lesson-actions[_ngcontent-%COMP%]   .action-btn.view-btn[_ngcontent-%COMP%]:hover{background:#0056b3}.lessons-grid[_ngcontent-%COMP%]   .lesson-card[_ngcontent-%COMP%]   .lesson-actions[_ngcontent-%COMP%]   .action-btn.download-btn[_ngcontent-%COMP%]{background:#28a745;color:#fff}.lessons-grid[_ngcontent-%COMP%]   .lesson-card[_ngcontent-%COMP%]   .lesson-actions[_ngcontent-%COMP%]   .action-btn.download-btn[_ngcontent-%COMP%]:hover{background:#1e7e34}.lessons-grid[_ngcontent-%COMP%]   .lesson-card[_ngcontent-%COMP%]   .lesson-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:12px}.pdf-modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#000000d9;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);display:flex;align-items:center;justify-content:center;z-index:1000;animation:_ngcontent-%COMP%_fadeIn .3s ease;padding:1rem}.pdf-modal[_ngcontent-%COMP%]{background:#fff;border-radius:16px;width:100%;height:100%;max-width:1400px;max-height:900px;display:flex;flex-direction:column;box-shadow:0 25px 80px #0006;animation:_ngcontent-%COMP%_slideIn .3s ease;overflow:hidden;border:1px solid rgba(255,255,255,.1)}.pdf-modal-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:1.75rem 2.5rem;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid rgba(255,255,255,.15);position:relative;overflow:hidden}.pdf-modal-header[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:linear-gradient(135deg,#ffffff1a,#ffffff0d);-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px)}.pdf-modal-header[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{position:relative;z-index:1}.pdf-modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.4rem;font-weight:700;display:flex;align-items:center;gap:.75rem;text-shadow:0 2px 4px rgba(0,0,0,.2)}.pdf-modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.6rem;filter:drop-shadow(0 2px 4px rgba(0,0,0,.2))}.pdf-modal-header[_ngcontent-%COMP%]   .pdf-controls[_ngcontent-%COMP%]{display:flex;gap:.5rem}.pdf-modal-header[_ngcontent-%COMP%]   .pdf-control-btn[_ngcontent-%COMP%]{background:#ffffff26;color:#fff;border:1px solid rgba(255,255,255,.2);padding:.875rem 1.25rem;border-radius:10px;cursor:pointer;font-size:.875rem;font-weight:600;display:flex;align-items:center;gap:.5rem;transition:all .3s ease;text-decoration:none;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);white-space:nowrap}.pdf-modal-header[_ngcontent-%COMP%]   .pdf-control-btn[_ngcontent-%COMP%]:hover{background:#ffffff40;border-color:#ffffff4d;transform:translateY(-2px);box-shadow:0 8px 25px #0003}.pdf-modal-header[_ngcontent-%COMP%]   .pdf-control-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.pdf-modal-header[_ngcontent-%COMP%]   .pdf-control-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem}.pdf-modal-header[_ngcontent-%COMP%]   .pdf-control-btn[_ngcontent-%COMP%]:nth-child(2){background:#17a2b8cc;border-color:#17a2b899}.pdf-modal-header[_ngcontent-%COMP%]   .pdf-control-btn[_ngcontent-%COMP%]:nth-child(2):hover{background:#138496e6;border-color:#138496b3}.pdf-modal-header[_ngcontent-%COMP%]   .pdf-control-btn.download-btn[_ngcontent-%COMP%]{background:#007bffcc;border-color:#007bff99}.pdf-modal-header[_ngcontent-%COMP%]   .pdf-control-btn.download-btn[_ngcontent-%COMP%]:hover{background:#0056b3e6;border-color:#0056b3b3}.pdf-modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:#dc3545cc;border-color:#dc354599}.pdf-modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#c82333e6;border-color:#c82333b3}.pdf-modal-body[_ngcontent-%COMP%]{flex:1;position:relative;overflow:hidden;background:#f8f9fa;display:flex;align-items:center;justify-content:center}.pdf-iframe[_ngcontent-%COMP%]{border:none;width:100%;height:100%;background:#fff;border-radius:0 0 16px 16px}.pdf-fallback[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%;width:100%;background:linear-gradient(135deg,#f8f9fa,#e9ecef)}.pdf-fallback[_ngcontent-%COMP%]   .fallback-content[_ngcontent-%COMP%]{text-align:center;padding:3rem 2.5rem;background:#fff;border-radius:16px;box-shadow:0 10px 40px #0000001a;max-width:500px;border:1px solid rgba(0,0,0,.05)}.pdf-fallback[_ngcontent-%COMP%]   .fallback-content[_ngcontent-%COMP%]   .pdf-icon[_ngcontent-%COMP%]{font-size:5rem;color:#dc3545;margin-bottom:1.5rem;filter:drop-shadow(0 4px 8px rgba(220,53,69,.2))}.pdf-fallback[_ngcontent-%COMP%]   .fallback-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#2c3e50;margin-bottom:1rem;font-size:1.5rem;font-weight:700}.pdf-fallback[_ngcontent-%COMP%]   .fallback-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6c757d;margin-bottom:2.5rem;font-size:1.1rem;line-height:1.6}.pdf-fallback[_ngcontent-%COMP%]   .fallback-content[_ngcontent-%COMP%]   .pdf-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:center;flex-wrap:wrap}.pdf-fallback[_ngcontent-%COMP%]   .fallback-content[_ngcontent-%COMP%]   .pdf-actions[_ngcontent-%COMP%]   .pdf-action-btn[_ngcontent-%COMP%]{padding:1rem 2rem;border-radius:10px;text-decoration:none;font-weight:600;font-size:1rem;display:flex;align-items:center;gap:.75rem;transition:all .3s ease;cursor:pointer;border:none;white-space:nowrap}.pdf-fallback[_ngcontent-%COMP%]   .fallback-content[_ngcontent-%COMP%]   .pdf-actions[_ngcontent-%COMP%]   .pdf-action-btn.primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#007bff,#0056b3);color:#fff;box-shadow:0 4px 15px #007bff4d}.pdf-fallback[_ngcontent-%COMP%]   .fallback-content[_ngcontent-%COMP%]   .pdf-actions[_ngcontent-%COMP%]   .pdf-action-btn.primary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#0056b3,#004085);transform:translateY(-3px);box-shadow:0 8px 25px #007bff66}.pdf-fallback[_ngcontent-%COMP%]   .fallback-content[_ngcontent-%COMP%]   .pdf-actions[_ngcontent-%COMP%]   .pdf-action-btn.secondary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6c757d,#545b62);color:#fff;box-shadow:0 4px 15px #6c757d4d}.pdf-fallback[_ngcontent-%COMP%]   .fallback-content[_ngcontent-%COMP%]   .pdf-actions[_ngcontent-%COMP%]   .pdf-action-btn.secondary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#545b62,#3d4045);transform:translateY(-3px);box-shadow:0 8px 25px #6c757d66}.pdf-fallback[_ngcontent-%COMP%]   .fallback-content[_ngcontent-%COMP%]   .pdf-actions[_ngcontent-%COMP%]   .pdf-action-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem}.pdf-loading[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%;font-size:1.2rem;color:#6c757d}.pdf-modal-footer[_ngcontent-%COMP%]{padding:1rem 1.5rem;border-top:1px solid #e9ecef;background:#f8f9fa}.pdf-modal-footer[_ngcontent-%COMP%]   .pdf-controls[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:center}.pdf-modal-footer[_ngcontent-%COMP%]   .pdf-controls[_ngcontent-%COMP%]   .pdf-control-btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:none;border-radius:8px;font-weight:500;cursor:pointer;display:flex;align-items:center;gap:.5rem;transition:all .3s ease;text-decoration:none;font-size:.875rem}.pdf-modal-footer[_ngcontent-%COMP%]   .pdf-controls[_ngcontent-%COMP%]   .pdf-control-btn[_ngcontent-%COMP%]:first-child{background:#6c757d;color:#fff}.pdf-modal-footer[_ngcontent-%COMP%]   .pdf-controls[_ngcontent-%COMP%]   .pdf-control-btn[_ngcontent-%COMP%]:first-child:hover{background:#545b62;transform:translateY(-1px)}.pdf-modal-footer[_ngcontent-%COMP%]   .pdf-controls[_ngcontent-%COMP%]   .pdf-control-btn[_ngcontent-%COMP%]:nth-child(2){background:#17a2b8;color:#fff}.pdf-modal-footer[_ngcontent-%COMP%]   .pdf-controls[_ngcontent-%COMP%]   .pdf-control-btn[_ngcontent-%COMP%]:nth-child(2):hover{background:#138496;transform:translateY(-1px)}.pdf-modal-footer[_ngcontent-%COMP%]   .pdf-controls[_ngcontent-%COMP%]   .pdf-control-btn.download-btn[_ngcontent-%COMP%]{background:#007bff;color:#fff}.pdf-modal-footer[_ngcontent-%COMP%]   .pdf-controls[_ngcontent-%COMP%]   .pdf-control-btn.download-btn[_ngcontent-%COMP%]:hover{background:#0056b3;transform:translateY(-1px)}.pdf-modal-footer[_ngcontent-%COMP%]   .pdf-controls[_ngcontent-%COMP%]   .pdf-control-btn[_ngcontent-%COMP%]:last-child{background:#28a745;color:#fff}.pdf-modal-footer[_ngcontent-%COMP%]   .pdf-controls[_ngcontent-%COMP%]   .pdf-control-btn[_ngcontent-%COMP%]:last-child:hover{background:#1e7e34;transform:translateY(-1px)}.pdf-modal-footer[_ngcontent-%COMP%]   .pdf-controls[_ngcontent-%COMP%]   .pdf-control-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}@media (max-width: 768px){.pdf-modal-overlay[_ngcontent-%COMP%]{padding:10px}.pdf-modal-content[_ngcontent-%COMP%]{max-height:95vh}.pdf-modal-header[_ngcontent-%COMP%]{padding:10px 15px}.pdf-modal-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.1rem}}@media (max-width: 768px){.grup-detay-container[_ngcontent-%COMP%]{padding:15px}.header-section[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:15px}.header-section[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]{margin-left:0;flex-direction:column;gap:10px}.lessons-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.pdf-modal[_ngcontent-%COMP%]   .pdf-modal-content[_ngcontent-%COMP%]{width:95%;height:95%}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;-webkit-backdrop-filter:blur(0px);backdrop-filter:blur(0px)}to{opacity:1;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px)}}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:scale(.85) translateY(30px)}to{opacity:1;transform:scale(1) translateY(0)}}@media (max-width: 1024px){.pdf-modal[_ngcontent-%COMP%]{max-width:95%;max-height:95%}.pdf-modal-header[_ngcontent-%COMP%]{padding:1.5rem 2rem}.pdf-modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.25rem}.pdf-modal-header[_ngcontent-%COMP%]   .pdf-controls[_ngcontent-%COMP%]{gap:.375rem}.pdf-modal-header[_ngcontent-%COMP%]   .pdf-control-btn[_ngcontent-%COMP%]{padding:.75rem 1rem;font-size:.8rem}}@media (max-width: 768px){.pdf-modal-overlay[_ngcontent-%COMP%]{padding:.5rem}.pdf-modal[_ngcontent-%COMP%]{max-width:100%;max-height:100%;border-radius:12px}.pdf-modal-header[_ngcontent-%COMP%]{padding:1.25rem 1.5rem;flex-direction:column;gap:1rem;align-items:flex-start}.pdf-modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem}.pdf-modal-header[_ngcontent-%COMP%]   .pdf-controls[_ngcontent-%COMP%]{width:100%;justify-content:flex-start;flex-wrap:wrap;gap:.5rem}.pdf-modal-header[_ngcontent-%COMP%]   .pdf-control-btn[_ngcontent-%COMP%]{padding:.6rem .8rem;font-size:.75rem;flex:1;min-width:120px}.pdf-fallback[_ngcontent-%COMP%]   .fallback-content[_ngcontent-%COMP%]{padding:2rem 1.5rem;margin:1rem}.pdf-fallback[_ngcontent-%COMP%]   .fallback-content[_ngcontent-%COMP%]   .pdf-icon[_ngcontent-%COMP%]{font-size:3.5rem}.pdf-fallback[_ngcontent-%COMP%]   .fallback-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.25rem}.pdf-fallback[_ngcontent-%COMP%]   .fallback-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem}.pdf-fallback[_ngcontent-%COMP%]   .fallback-content[_ngcontent-%COMP%]   .pdf-actions[_ngcontent-%COMP%]{flex-direction:column;gap:.75rem}.pdf-fallback[_ngcontent-%COMP%]   .fallback-content[_ngcontent-%COMP%]   .pdf-actions[_ngcontent-%COMP%]   .pdf-action-btn[_ngcontent-%COMP%]{padding:.875rem 1.5rem;font-size:.9rem}}@media (max-width: 480px){.pdf-modal-header[_ngcontent-%COMP%]{padding:1rem}.pdf-modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem;gap:.5rem}.pdf-modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem}.pdf-modal-header[_ngcontent-%COMP%]   .pdf-control-btn[_ngcontent-%COMP%]{padding:.5rem .75rem;font-size:.7rem;min-width:100px}.pdf-modal-header[_ngcontent-%COMP%]   .pdf-control-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.9rem}.pdf-fallback[_ngcontent-%COMP%]   .fallback-content[_ngcontent-%COMP%]{padding:1.5rem 1rem}.pdf-fallback[_ngcontent-%COMP%]   .fallback-content[_ngcontent-%COMP%]   .pdf-icon[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:1rem}.pdf-fallback[_ngcontent-%COMP%]   .fallback-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.1rem;margin-bottom:.75rem}.pdf-fallback[_ngcontent-%COMP%]   .fallback-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem;margin-bottom:1.5rem}.pdf-fallback[_ngcontent-%COMP%]   .fallback-content[_ngcontent-%COMP%]   .pdf-actions[_ngcontent-%COMP%]   .pdf-action-btn[_ngcontent-%COMP%]{padding:.75rem 1.25rem;font-size:.85rem;gap:.5rem}.pdf-fallback[_ngcontent-%COMP%]   .fallback-content[_ngcontent-%COMP%]   .pdf-actions[_ngcontent-%COMP%]   .pdf-action-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}}']})};function Wle(i,e){i&1&&(u(0,"div",9)(1,"div",10)(2,"span",11),m(3,"Y\xFCkleniyor..."),f()(),u(4,"p",12),m(5,"Y\xFCkleniyor..."),f()())}function qle(i,e){if(i&1&&(u(0,"div",13)(1,"div",14),k(2,"i",15),f(),u(3,"div",16)(4,"h3",17),m(5,"Hata"),f(),u(6,"p",18),m(7),f()()()),i&2){let t=F();x(7),W(t.error)}}function Kle(i,e){if(i&1&&(u(0,"div",19)(1,"div",14),k(2,"i",20),f(),u(3,"div",16)(4,"h3",17),m(5,"Ba\u015Far\u0131l\u0131"),f(),u(6,"p",18),m(7),f()()()),i&2){let t=F();x(7),W(t.success)}}function Yle(i,e){if(i&1&&(u(0,"div",99)(1,"span",100),m(2),f(),u(3,"span",101),m(4),f(),u(5,"small",102),m(6,"Kaydet butonuna bas\u0131nca y\xFCklenecektir"),f()()),i&2){let t=F(2);x(2),W(t.selectedFile.name),x(2),he("(",(t.selectedFile.size/1024).toFixed(1)," KB)")}}function Xle(i,e){i&1&&(u(0,"div",103)(1,"small"),m(2,"Ad Soyad gereklidir"),f()())}function Qle(i,e){i&1&&(u(0,"div",103)(1,"small"),m(2,"Ge\xE7erli bir email adresi gereklidir"),f()())}function Jle(i,e){i&1&&(u(0,"div",103)(1,"small"),m(2,"\u015Eifreler e\u015Fle\u015Fmiyor"),f()())}function Zle(i,e){if(i&1){let t=Ae();u(0,"div",44)(1,"input",104),U("focus",function(){K(t);let r=F(2);return Y(r.onFocus("brans"))})("blur",function(){K(t);let r=F(2);return Y(r.onBlur("brans"))}),f(),u(2,"label",105),m(3,"Bran\u015F"),f()()}if(i&2){let t=F(2);xe("focused",t.isFocused("brans")),x(2),xe("raised",t.isRaised("brans"))}}function ece(i,e){i&1&&k(0,"span",106)}function tce(i,e){if(i&1){let t=Ae();u(0,"div",21)(1,"form",22),U("ngSubmit",function(){K(t);let r=F();return Y(r.onSubmit())}),u(2,"div",23)(3,"div",24)(4,"div",25),U("click",function(){K(t);let r=ua(11);return Y(r.click())}),k(5,"img",26),u(6,"div",27),k(7,"i",28),u(8,"span",29),m(9,"Foto\u011Fraf De\u011Fi\u015Ftir"),f()()(),u(10,"input",30,0),U("change",function(r){K(t);let o=F();return Y(o.onFileChange(r))}),f(),u(12,"div",31)(13,"h2",32),m(14),f(),u(15,"p",33),m(16),f(),ee(17,Yle,7,2,"div",34),f()()(),u(18,"div",35)(19,"div",36)(20,"div",37)(21,"div",38),k(22,"i",39),u(23,"h2",40),m(24,"Temel Bilgiler"),f()(),u(25,"div",41)(26,"div",42)(27,"div",43)(28,"div",44)(29,"input",45),U("focus",function(){K(t);let r=F();return Y(r.onFocus("adi_soyadi"))})("blur",function(){K(t);let r=F();return Y(r.onBlur("adi_soyadi"))}),f(),u(30,"label",46),m(31,"Ad\u0131 Soyad\u0131"),f()(),ee(32,Xle,3,0,"div",47),f(),u(33,"div",43)(34,"div",44)(35,"input",48),U("focus",function(){K(t);let r=F();return Y(r.onFocus("email"))})("blur",function(){K(t);let r=F();return Y(r.onBlur("email"))}),f(),u(36,"label",49),m(37,"Email"),f()(),ee(38,Qle,3,0,"div",47),f()(),u(39,"div",42)(40,"div",43)(41,"div",44)(42,"input",50),U("focus",function(){K(t);let r=F();return Y(r.onFocus("cep_telefonu"))})("blur",function(){K(t);let r=F();return Y(r.onBlur("cep_telefonu"))}),f(),u(43,"label",51),m(44,"Cep Telefonu"),f()()(),u(45,"div",43)(46,"div",52)(47,"select",53),U("focus",function(){K(t);let r=F();return Y(r.onFocus("rutbe"))})("blur",function(){K(t);let r=F();return Y(r.onBlur("rutbe"))}),u(48,"option",54),m(49,"\xD6\u011Frenci"),f(),u(50,"option",55),m(51,"\xD6\u011Fretmen"),f(),u(52,"option",56),m(53,"Admin"),f()(),u(54,"label",57),m(55,"R\xFCtbe"),f()()()(),u(56,"div",42)(57,"div",43)(58,"div",44)(59,"select",58),U("focus",function(){K(t);let r=F();return Y(r.onFocus("aktif"))})("blur",function(){K(t);let r=F();return Y(r.onBlur("aktif"))}),u(60,"option",59),m(61,"Aktif"),f(),u(62,"option",60),m(63,"Pasif"),f()(),u(64,"label",61),m(65,"Hesap Durumu"),f()()()(),u(66,"div",42)(67,"div",43)(68,"div",44)(69,"input",62),U("focus",function(){K(t);let r=F();return Y(r.onFocus("sifre"))})("blur",function(){K(t);let r=F();return Y(r.onBlur("sifre"))}),f(),u(70,"label",63),m(71,"Yeni \u015Eifre (Bo\u015F b\u0131rak\u0131labilir)"),f()()()(),u(72,"div",42)(73,"div",43)(74,"div",44)(75,"input",64),U("focus",function(){K(t);let r=F();return Y(r.onFocus("sifre_tekrar"))})("blur",function(){K(t);let r=F();return Y(r.onBlur("sifre_tekrar"))}),f(),u(76,"label",65),m(77,"\u015Eifre Tekrar"),f()(),ee(78,Jle,3,0,"div",47),f()()()(),u(79,"div",37)(80,"div",38),k(81,"i",66),u(82,"h2",40),m(83,"E\u011Fitim Bilgileri"),f()(),u(84,"div",41)(85,"div",42)(86,"div",43)(87,"div",44)(88,"input",67),U("focus",function(){K(t);let r=F();return Y(r.onFocus("okulu"))})("blur",function(){K(t);let r=F();return Y(r.onBlur("okulu"))}),f(),u(89,"label",68),m(90,"Okul"),f()()(),u(91,"div",43)(92,"div",44)(93,"input",69),U("focus",function(){K(t);let r=F();return Y(r.onFocus("sinifi"))})("blur",function(){K(t);let r=F();return Y(r.onBlur("sinifi"))}),f(),u(94,"label",70),m(95,"S\u0131n\u0131f"),f()()()(),u(96,"div",42)(97,"div",43)(98,"div",44)(99,"input",71),U("focus",function(){K(t);let r=F();return Y(r.onFocus("grubu"))})("blur",function(){K(t);let r=F();return Y(r.onBlur("grubu"))}),f(),u(100,"label",72),m(101,"Grup"),f()()(),u(102,"div",43),ee(103,Zle,4,4,"div",73),f()(),u(104,"div",42)(105,"div",43)(106,"div",44)(107,"select",74),U("focus",function(){K(t);let r=F();return Y(r.onFocus("ders_gunu"))})("blur",function(){K(t);let r=F();return Y(r.onBlur("ders_gunu"))}),u(108,"option",75),m(109,"Se\xE7iniz"),f(),u(110,"option",76),m(111,"Pazartesi"),f(),u(112,"option",77),m(113,"Sal\u0131"),f(),u(114,"option",78),m(115,"\xC7ar\u015Famba"),f(),u(116,"option",79),m(117,"Per\u015Fembe"),f(),u(118,"option",80),m(119,"Cuma"),f(),u(120,"option",81),m(121,"Cumartesi"),f(),u(122,"option",82),m(123,"Pazar"),f()(),u(124,"label",83),m(125,"Ders G\xFCn\xFC"),f()()(),u(126,"div",43)(127,"div",44)(128,"input",84),U("focus",function(){K(t);let r=F();return Y(r.onFocus("ders_saati"))})("blur",function(){K(t);let r=F();return Y(r.onBlur("ders_saati"))}),f(),u(129,"label",85),m(130,"Ders Saati"),f()()(),u(131,"div",43)(132,"div",44)(133,"input",86),U("focus",function(){K(t);let r=F();return Y(r.onFocus("ders_adi"))})("blur",function(){K(t);let r=F();return Y(r.onBlur("ders_adi"))}),f(),u(134,"label",87),m(135,"Ders Ad\u0131"),f()()()(),u(136,"div",42)(137,"div",43)(138,"div",44)(139,"input",88),U("focus",function(){K(t);let r=F();return Y(r.onFocus("ucret"))})("blur",function(){K(t);let r=F();return Y(r.onBlur("ucret"))}),f(),u(140,"label",89),m(141,"Ayl\u0131k \xDCcret"),f()()()()()(),u(142,"div",37)(143,"div",38),k(144,"i",90),u(145,"h2",40),m(146,"Veli Bilgileri"),f()(),u(147,"div",41)(148,"div",42)(149,"div",43)(150,"div",44)(151,"input",91),U("focus",function(){K(t);let r=F();return Y(r.onFocus("veli_adi"))})("blur",function(){K(t);let r=F();return Y(r.onBlur("veli_adi"))}),f(),u(152,"label",92),m(153,"Veli Ad\u0131"),f()()(),u(154,"div",43)(155,"div",44)(156,"input",93),U("focus",function(){K(t);let r=F();return Y(r.onFocus("veli_cep"))})("blur",function(){K(t);let r=F();return Y(r.onBlur("veli_cep"))}),f(),u(157,"label",94),m(158,"Veli Telefon"),f()()()()()(),u(159,"div",95)(160,"button",96),U("click",function(){K(t);let r=F();return Y(r.navigateBack())}),m(161,"\u0130ptal"),f(),u(162,"button",97),ee(163,ece,1,0,"span",98),m(164," Kaydet "),f()()()()()()}if(i&2){let t,n,r,o=F();x(),S("formGroup",o.editForm),x(4),S("src",o.student.avatar||"assets/images/default-avatar.png",vt),x(9),W(o.student.adi_soyadi),x(2),W(o.student.email),x(),S("ngIf",o.selectedFile),x(11),xe("focused",o.isFocused("adi_soyadi"))("error",o.isInvalid("adi_soyadi")),x(2),xe("raised",o.isRaised("adi_soyadi")),x(2),S("ngIf",((t=o.editForm.get("adi_soyadi"))==null?null:t.invalid)&&((t=o.editForm.get("adi_soyadi"))==null?null:t.touched)),x(2),xe("focused",o.isFocused("email"))("error",o.isInvalid("email")),x(2),xe("raised",o.isRaised("email")),x(2),S("ngIf",((n=o.editForm.get("email"))==null?null:n.invalid)&&((n=o.editForm.get("email"))==null?null:n.touched)),x(3),xe("focused",o.isFocused("cep_telefonu")),x(2),xe("raised",o.isRaised("cep_telefonu")),x(3),xe("focused",o.isFocused("rutbe")),x(8),xe("raised",o.isRaised("rutbe")),x(4),xe("focused",o.isFocused("aktif")),x(6),xe("raised",o.isRaised("aktif")),x(4),xe("focused",o.isFocused("sifre")),x(2),xe("raised",o.isRaised("sifre")),x(4),xe("focused",o.isFocused("sifre_tekrar"))("error",o.editForm.errors==null?null:o.editForm.errors.passwordMismatch),x(2),xe("raised",o.isRaised("sifre_tekrar")),x(2),S("ngIf",o.editForm.errors==null?null:o.editForm.errors.passwordMismatch),x(9),xe("focused",o.isFocused("okulu")),x(2),xe("raised",o.isRaised("okulu")),x(3),xe("focused",o.isFocused("sinifi")),x(2),xe("raised",o.isRaised("sinifi")),x(4),xe("focused",o.isFocused("grubu")),x(2),xe("raised",o.isRaised("grubu")),x(3),S("ngIf",((r=o.editForm.get("rutbe"))==null?null:r.value)==="ogretmen"),x(3),xe("focused",o.isFocused("ders_gunu")),x(18),xe("raised",o.isRaised("ders_gunu")),x(3),xe("focused",o.isFocused("ders_saati")),x(2),xe("raised",o.isRaised("ders_saati")),x(3),xe("focused",o.isFocused("ders_adi")),x(2),xe("raised",o.isRaised("ders_adi")),x(4),xe("focused",o.isFocused("ucret")),x(2),xe("raised",o.isRaised("ucret")),x(10),xe("focused",o.isFocused("veli_adi")),x(2),xe("raised",o.isRaised("veli_adi")),x(3),xe("focused",o.isFocused("veli_cep")),x(2),xe("raised",o.isRaised("veli_cep")),x(5),S("disabled",o.editForm.invalid||o.isSubmitting),x(),S("ngIf",o.isSubmitting)}}var E2=class i{constructor(e,t,n,r){this.http=e;this.route=t;this.router=n;this.fb=r}studentId=1;student={id:"",adi_soyadi:"",email:"",cep_telefonu:"",rutbe:"",aktif:!0,avatar:"",okulu:"",sinifi:"",grubu:"",ders_adi:"",ders_gunu:"",ders_saati:"",ucret:"",brans:""};editForm;isLoading=!0;isSubmitting=!1;error=null;success=null;selectedFile=null;focusedFields={};ngOnInit(){this.initForm(),this.route.paramMap.subscribe(e=>{let t=e.get("id");t?(this.studentId=+t,this.loadStudentData()):(this.isLoading=!1,this.error="\xD6\u011Frenci ID bulunamad\u0131.")})}initForm(){this.editForm=this.fb.group({adi_soyadi:["",fi.required],email:["",[fi.required,fi.email]],cep_telefonu:[""],aktif:[!0],rutbe:[""],sifre:[""],sifre_tekrar:[""],okulu:[""],sinifi:[""],grubu:[""],ders_adi:[""],ders_gunu:[""],ders_saati:[""],ucret:[""],brans:[""],veli_adi:[""],veli_cep:[""]},{validators:this.passwordMatchValidator})}passwordMatchValidator(e){let t=e.get("sifre"),n=e.get("sifre_tekrar");return t&&n&&t.value&&t.value!==n.value?{passwordMismatch:!0}:null}loadStudentData(){this.isLoading=!0,this.error=null;let e="",t=localStorage.getItem("user")||sessionStorage.getItem("user");t&&(e=JSON.parse(t).token||"");let n=new xt({Authorization:`Bearer ${e}`});this.http.get(`./server/api/ogrenci_bilgileri.php?id=${this.studentId}`,{headers:n}).subscribe({next:r=>{r.success?(this.student=r.data,console.log("\xD6\u011Frenci verileri:",this.student),this.editForm.patchValue({adi_soyadi:this.student.adi_soyadi||"",email:this.student.email||"",cep_telefonu:this.student.cep_telefonu||"",aktif:this.student.aktif===1||this.student.aktif===!0?"true":"false",rutbe:this.student.rutbe||"",okulu:this.student.okulu||"",sinifi:this.student.sinifi||"",grubu:this.student.grubu||"",ders_adi:this.student.ders_adi||"",ders_gunu:this.student.ders_gunu||"",ders_saati:this.student.ders_saati||"",ucret:this.student.ucret||"",brans:this.student.brans||"",veli_adi:this.student.veli_adi||"",veli_cep:this.student.veli_cep||""}),this.isLoading=!1):(this.isLoading=!1,this.error=r.error||"\xD6\u011Frenci bilgileri al\u0131namad\u0131.")},error:r=>{this.isLoading=!1,this.error="Ba\u011Flant\u0131 hatas\u0131: "+(r.message||"Bilinmeyen bir hata olu\u015Ftu.")}})}onFileChange(e){let t=e.target.files;if(t&&t.length>0){this.selectedFile=t[0];let n=new FileReader;n.onload=r=>{r.target&&r.target.result&&(this.student.avatar=r.target.result)},this.selectedFile&&n.readAsDataURL(this.selectedFile)}}onSubmit(){if(this.editForm.invalid){Object.keys(this.editForm.controls).forEach(e=>{this.editForm.get(e)?.markAsTouched()});return}this.isSubmitting=!0,this.error=null,this.success=null,this.uploadAvatar().then(e=>{let t=this.prepareFormData(e),n="",r=localStorage.getItem("user")||sessionStorage.getItem("user");r&&(n=JSON.parse(r).token||"");let o=new xt({"Content-Type":"application/json",Authorization:`Bearer ${n}`});this.http.post("./server/api/ogrenci_profil.php",t,{headers:o}).subscribe({next:s=>{s.success?(this.success="\xD6\u011Frenci bilgileri ba\u015Far\u0131yla g\xFCncellendi!",this.student=Ie(Ie({},this.student),s.data),setTimeout(()=>{this.success=null},3e3)):this.error=s.message||"G\xFCncelleme s\u0131ras\u0131nda hata olu\u015Ftu.",this.isSubmitting=!1},error:s=>{this.error="Ba\u011Flant\u0131 hatas\u0131: "+(s.error?.message||s.message||"Bilinmeyen bir hata olu\u015Ftu."),this.isSubmitting=!1}})}).catch(e=>{this.isSubmitting=!1,this.error="Avatar y\xFCkleme hatas\u0131: "+e})}uploadAvatar(){return new Promise((e,t)=>{if(!this.selectedFile){e(this.student?.avatar||"");return}let n="",r=localStorage.getItem("user")||sessionStorage.getItem("user");r&&(n=JSON.parse(r).token||"");let o=new FormData;o.append("avatar",this.selectedFile),o.append("id",this.studentId.toString());let s=new xt({Authorization:`Bearer ${n}`});this.http.post("./server/api/ogrenci_guncelle.php",o,{headers:s}).subscribe({next:a=>{a.success&&a.data&&a.data.avatar?e(a.data.avatar):t(a.error||"Dosya y\xFCklenemedi.")},error:a=>{console.error("Avatar y\xFCkleme hatas\u0131:",a),t(a.message||"Ba\u011Flant\u0131 hatas\u0131.")}})})}prepareFormData(e){let t=this.editForm.value,n={id:this.studentId,temel_bilgiler:{adi_soyadi:t.adi_soyadi,email:t.email,cep_telefonu:t.cep_telefonu,aktif:t.aktif==="true"||t.aktif===!0?1:0,rutbe:t.rutbe,brans:t.brans},detay_bilgiler:{okulu:t.okulu,sinifi:t.sinifi,grubu:t.grubu,ders_adi:t.ders_adi,ders_gunu:t.ders_gunu,ders_saati:t.ders_saati,ucret:t.ucret,veli_adi:t.veli_adi,veli_cep:t.veli_cep}};return e&&(n.temel_bilgiler.avatar=e),t.sifre&&(n.temel_bilgiler.sifre=t.sifre),n}navigateBack(){this.router.navigate(["/ogretmen-sayfasi/ogretmen-ogrenci-listesi-sayfasi"])}onFocus(e){this.focusedFields[e]=!0}onBlur(e){this.focusedFields[e]=!1}isFocused(e){return this.focusedFields[e]===!0}isRaised(e){let t=this.editForm.get(e);return this.focusedFields[e]===!0||t?.value!==""&&t?.value!==null&&t?.value!==void 0}isInvalid(e){let t=this.editForm.get(e);return(t?.invalid&&t?.touched)??!1}static \u0275fac=function(t){return new(t||i)(ke(gt),ke(Mi),ke(an),ke(ul))};static \u0275cmp=Ke({type:i,selectors:[["app-ogretmen-ogrenci-detay-sayfasi"]],standalone:!1,decls:11,vars:4,consts:[["fileInput",""],[1,"edit-container"],[1,"page-header"],[1,"back-button",3,"click"],[1,"bi","bi-arrow-left"],["class","loading-spinner",4,"ngIf"],["class","alert alert-error",4,"ngIf"],["class","alert alert-success",4,"ngIf"],["class","edit-form",4,"ngIf"],[1,"loading-spinner"],[1,"spinner"],[1,"visually-hidden"],[1,"loading-text"],[1,"alert","alert-error"],[1,"alert-icon"],[1,"bi","bi-exclamation-triangle"],[1,"alert-content"],[1,"alert-title"],[1,"alert-message"],[1,"alert","alert-success"],[1,"bi","bi-check-circle"],[1,"edit-form"],[3,"ngSubmit","formGroup"],[1,"profile-header"],[1,"avatar-upload"],[1,"avatar-container",3,"click"],["alt","Avatar",1,"avatar-image",3,"src"],[1,"avatar-overlay"],[1,"bi","bi-camera"],[1,"avatar-text"],["type","file","hidden","","accept","image/jpeg,image/png,image/gif,image/webp",3,"change"],[1,"avatar-info"],[1,"student-name"],[1,"student-email"],["class","selected-file-info",4,"ngIf"],[1,"form-grid"],[1,"form-column"],[1,"info-card"],[1,"card-header"],[1,"bi","bi-person","card-icon"],[1,"card-title"],[1,"card-body"],[1,"form-row"],[1,"form-field"],[1,"material-input-container"],["id","adi_soyadi","type","text","formControlName","adi_soyadi",1,"material-input",3,"focus","blur"],["for","adi_soyadi",1,"material-input-label"],["class","error-message",4,"ngIf"],["id","email","type","email","formControlName","email",1,"material-input",3,"focus","blur"],["for","email",1,"material-input-label"],["id","cep_telefonu","type","text","formControlName","cep_telefonu",1,"material-input",3,"focus","blur"],["for","cep_telefonu",1,"material-input-label"],[1,"material-input-container","rutbe-select"],["id","rutbe","formControlName","rutbe",1,"material-input","material-select",3,"focus","blur"],["value","ogrenci"],["value","ogretmen"],["value","admin"],["for","rutbe",1,"material-input-label"],["id","aktif","formControlName","aktif",1,"material-input","material-select",3,"focus","blur"],["value","true"],["value","false"],["for","aktif",1,"material-input-label"],["id","sifre","type","password","formControlName","sifre",1,"material-input",3,"focus","blur"],["for","sifre",1,"material-input-label"],["id","sifre_tekrar","type","password","formControlName","sifre_tekrar",1,"material-input",3,"focus","blur"],["for","sifre_tekrar",1,"material-input-label"],[1,"bi","bi-book","card-icon"],["id","okulu","type","text","formControlName","okulu",1,"material-input",3,"focus","blur"],["for","okulu",1,"material-input-label"],["id","sinifi","type","text","formControlName","sinifi",1,"material-input",3,"focus","blur"],["for","sinifi",1,"material-input-label"],["id","grubu","type","text","formControlName","grubu",1,"material-input",3,"focus","blur"],["for","grubu",1,"material-input-label"],["class","material-input-container",3,"focused",4,"ngIf"],["id","ders_gunu","formControlName","ders_gunu",1,"material-input","material-select",3,"focus","blur"],["value",""],["value","Pazartesi"],["value","Sal\u0131"],["value","\xC7ar\u015Famba"],["value","Per\u015Fembe"],["value","Cuma"],["value","Cumartesi"],["value","Pazar"],["for","ders_gunu",1,"material-input-label"],["id","ders_saati","type","text","formControlName","ders_saati",1,"material-input",3,"focus","blur"],["for","ders_saati",1,"material-input-label"],["id","ders_adi","type","text","formControlName","ders_adi",1,"material-input",3,"focus","blur"],["for","ders_adi",1,"material-input-label"],["id","ucret","type","number","formControlName","ucret",1,"material-input",3,"focus","blur"],["for","ucret",1,"material-input-label"],[1,"bi","bi-people","card-icon"],["id","veli_adi","type","text","formControlName","veli_adi",1,"material-input",3,"focus","blur"],["for","veli_adi",1,"material-input-label"],["id","veli_cep","type","text","formControlName","veli_cep",1,"material-input",3,"focus","blur"],["for","veli_cep",1,"material-input-label"],[1,"form-actions"],["type","button",1,"button","button-secondary",3,"click"],["type","submit",1,"button","button-primary",3,"disabled"],["class","spinner-small",4,"ngIf"],[1,"selected-file-info"],[1,"file-name"],[1,"file-size"],[1,"file-notice"],[1,"error-message"],["id","brans","type","text","formControlName","brans",1,"material-input",3,"focus","blur"],["for","brans",1,"material-input-label"],[1,"spinner-small"]],template:function(t,n){t&1&&(u(0,"div",1)(1,"header",2)(2,"h1"),m(3,"\xD6\u011Frenci D\xFCzenle"),f(),u(4,"button",3),U("click",function(){return n.navigateBack()}),k(5,"i",4),m(6," Geri D\xF6n "),f()(),ee(7,Wle,6,0,"div",5)(8,qle,8,1,"div",6)(9,Kle,8,1,"div",7)(10,tce,165,81,"div",8),f()),t&2&&(x(7),S("ngIf",n.isLoading),x(),S("ngIf",n.error),x(),S("ngIf",n.success),x(),S("ngIf",!n.isLoading&&n.student))},dependencies:[lt,$r,Kn,Yn,rn,hc,qn,fn,Gr,ba,Ca],styles:[`.edit-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:16px}@media (max-width: 768px){.edit-container[_ngcontent-%COMP%]{padding:8px}}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;padding:12px;background-color:#fff;border-radius:8px;box-shadow:0 2px 10px #0000000d}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:500;color:#343a40}.page-header[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;background-color:#f5f7fa;color:#495057;border:none;padding:8px 16px;border-radius:999px;cursor:pointer;transition:all .3s ease}.page-header[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]:hover{background-color:#e4e9f2}.page-header[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}@media (max-width: 576px){.page-header[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{padding:8px}.page-header[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}}.loading-spinner[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:200px}.loading-spinner[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;border:4px solid #c8e1fb;border-top-color:#4a90e2;animation:_ngcontent-%COMP%_spinner 1s linear infinite}.loading-spinner[_ngcontent-%COMP%]   .loading-text[_ngcontent-%COMP%]{margin-top:16px;color:#6c757d}@keyframes _ngcontent-%COMP%_spinner{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.alert[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px;margin-bottom:24px;padding:16px;border-left:4px solid;border-radius:8px;animation:_ngcontent-%COMP%_slide-up .3s ease}.alert.alert-error[_ngcontent-%COMP%]{background-color:#e539351a;border-left-color:#e53935}.alert.alert-error[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%], .alert.alert-error[_ngcontent-%COMP%]   .alert-title[_ngcontent-%COMP%]{color:#e53935}.alert.alert-success[_ngcontent-%COMP%]{background-color:#43a0471a;border-left-color:#43a047}.alert.alert-success[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%], .alert.alert-success[_ngcontent-%COMP%]   .alert-title[_ngcontent-%COMP%]{color:#43a047}.alert[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{font-size:20px;margin-top:4px}.alert[_ngcontent-%COMP%]   .alert-content[_ngcontent-%COMP%]{flex:1}.alert[_ngcontent-%COMP%]   .alert-title[_ngcontent-%COMP%]{margin:0 0 4px;font-size:16px;font-weight:500}.alert[_ngcontent-%COMP%]   .alert-message[_ngcontent-%COMP%]{margin:0;color:#495057}@keyframes _ngcontent-%COMP%_slide-up{0%{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}.edit-form[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in .3s ease}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}.profile-header[_ngcontent-%COMP%]{background-color:#fff;border-radius:12px;box-shadow:0 2px 10px #0000000d;padding:24px;margin-bottom:24px;transition:all .3s ease}.profile-header[_ngcontent-%COMP%]:hover{box-shadow:0 8px 16px #0000001a}.profile-header[_ngcontent-%COMP%]   .avatar-upload[_ngcontent-%COMP%]{display:flex;align-items:center;gap:24px}@media (max-width: 768px){.profile-header[_ngcontent-%COMP%]   .avatar-upload[_ngcontent-%COMP%]{flex-direction:column;text-align:center}}.profile-header[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]{flex-shrink:0;width:100px;height:100px;margin:0}.profile-header[_ngcontent-%COMP%]   .avatar-info[_ngcontent-%COMP%]{flex:1}.profile-header[_ngcontent-%COMP%]   .student-name[_ngcontent-%COMP%]{margin:0 0 4px;font-size:20px;font-weight:500;color:#343a40}.profile-header[_ngcontent-%COMP%]   .student-email[_ngcontent-%COMP%]{margin:0 0 12px;color:#6c757d;font-size:16px}.profile-header[_ngcontent-%COMP%]   .selected-file-info[_ngcontent-%COMP%]{display:inline-block;max-width:400px}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:0}.form-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}.avatar-container[_ngcontent-%COMP%]{position:relative;width:150px;height:150px;border-radius:50%;overflow:hidden;margin-bottom:16px;border:4px solid #c8e1fb;box-shadow:0 4px 8px #0000001a;cursor:pointer;transition:all .3s ease}.avatar-container[_ngcontent-%COMP%]:hover{transform:scale(1.02);box-shadow:0 6px 12px #00000026}.avatar-container[_ngcontent-%COMP%]:hover   .avatar-overlay[_ngcontent-%COMP%]{opacity:1}.avatar-container[_ngcontent-%COMP%]:hover   .avatar-image[_ngcontent-%COMP%]{filter:brightness(.75)}.avatar-container[_ngcontent-%COMP%]   .avatar-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:all .3s ease}.avatar-container[_ngcontent-%COMP%]   .avatar-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;flex-direction:column;align-items:center;justify-content:center;opacity:0;transition:all .3s ease;color:#fff}.avatar-container[_ngcontent-%COMP%]   .avatar-overlay[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:32px;margin-bottom:8px}.avatar-container[_ngcontent-%COMP%]   .avatar-overlay[_ngcontent-%COMP%]   .avatar-text[_ngcontent-%COMP%]{font-size:14px;font-weight:500;background-color:#00000080;padding:4px 12px;border-radius:99px}.avatar-help-text[_ngcontent-%COMP%]{color:#6c757d;font-size:14px;text-align:center;margin-bottom:16px}.selected-file-info[_ngcontent-%COMP%]{background-color:#c8e1fb;color:#2c6cb0;padding:8px 12px;border-radius:8px;width:100%;text-align:center;animation:_ngcontent-%COMP%_fade-in .3s ease}.selected-file-info[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]{font-weight:500;font-size:14px;display:block}.selected-file-info[_ngcontent-%COMP%]   .file-size[_ngcontent-%COMP%]{font-size:12px}.selected-file-info[_ngcontent-%COMP%]   .file-notice[_ngcontent-%COMP%]{display:block;margin-top:4px;color:#6c757d;font-size:12px}.info-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:12px;overflow:hidden;box-shadow:0 2px 10px #0000000d;transition:all .3s ease}.info-card[_ngcontent-%COMP%]:hover{box-shadow:0 8px 16px #0000001a}.info-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:16px;border-bottom:1px solid #e9ecef}.info-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{font-size:20px;color:#4a90e2}.info-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:500;color:#343a40}.info-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:20px 16px}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:16px}.form-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}@media (max-width: 576px){.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}.form-field[_ngcontent-%COMP%]{position:relative}.material-input-container[_ngcontent-%COMP%]{position:relative;height:56px;border-radius:8px;overflow:hidden;transition:all .3s ease;box-shadow:0 0 0 1px #dee2e6}.material-input-container.focused[_ngcontent-%COMP%]{box-shadow:0 0 0 2px #4a90e24d}.material-input-container.error[_ngcontent-%COMP%]{box-shadow:0 0 0 2px #e539354d}.material-input-container.rutbe-select[_ngcontent-%COMP%]   .material-input[_ngcontent-%COMP%]{background-color:#4a90e20d}.material-input-container.rutbe-select.focused[_ngcontent-%COMP%]{box-shadow:0 0 0 2px #4a90e266}.material-input[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;padding:24px 16px 8px;border:none;background-color:#fff;font-size:16px;color:#343a40;outline:none}.material-input.material-select[_ngcontent-%COMP%]{appearance:none;padding-right:40px;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' stroke='%23666666' stroke-width='2' fill='none'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 16px center}.material-input-label[_ngcontent-%COMP%]{position:absolute;left:16px;top:50%;transform:translateY(-50%);font-size:16px;color:#adb5bd;transition:all .2s ease;pointer-events:none}.material-input-label.raised[_ngcontent-%COMP%]{top:8px;left:16px;font-size:12px;color:#4a90e2;font-weight:500}.error-message[_ngcontent-%COMP%]{margin-top:4px;color:#e53935;font-size:12px}.error-message[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{margin-left:4px}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;margin-top:8px}@media (max-width: 576px){.form-actions[_ngcontent-%COMP%]{flex-direction:column}}.button[_ngcontent-%COMP%]{padding:12px 24px;border:none;border-radius:8px;font-size:16px;font-weight:500;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center;gap:8px}.button[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.button.button-primary[_ngcontent-%COMP%]{background-color:#4a90e2;color:#fff;box-shadow:0 3px 5px -1px #0000001a,0 6px 10px #0000000a,0 1px 18px #00000005}.button.button-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#3483de}.button.button-primary[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(1px)}.button.button-secondary[_ngcontent-%COMP%]{background-color:#f5f7fa;color:#495057}.button.button-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#e4e9f2}.button.button-secondary[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(1px)}.spinner-small[_ngcontent-%COMP%]{display:inline-block;width:20px;height:20px;border-radius:50%;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;animation:_ngcontent-%COMP%_spinner 1s linear infinite}.visually-hidden[_ngcontent-%COMP%]{position:absolute;height:1px;width:1px;overflow:hidden;clip:rect(1px 1px 1px 1px);clip:rect(1px,1px,1px,1px);white-space:nowrap}`]})};var fz=yh(YR());function tz(i,e,t,n,r){n=n||{};var o=1.15,s=r.internal.scaleFactor,a=r.internal.getFontSize()/s,l=r.getLineHeightFactor?r.getLineHeightFactor():o,c=a*l,d=/\r\n|\r|\n/g,h="",p=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(h=typeof i=="string"?i.split(d):i,p=h.length||1),t+=a*(2-o),n.valign==="middle"?t-=p/2*c:n.valign==="bottom"&&(t-=p*c),n.halign==="center"||n.halign==="right"){var g=a;if(n.halign==="center"&&(g*=.5),h&&p>=1){for(var _=0;_<h.length;_++)r.text(h[_],e-r.getStringUnitWidth(h[_])*g,t),t+=c;return r}e-=r.getStringUnitWidth(i)*g}return n.halign==="justify"?r.text(i,e,t,{maxWidth:n.maxWidth||100,align:"justify"}):r.text(i,e,t),r}var XR={},lg=function(){function i(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return i.setDefaults=function(e,t){t===void 0&&(t=null),t?t.__autoTableDocumentDefaults=e:XR=e},i.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},i.prototype.applyStyles=function(e,t){var n,r,o;t===void 0&&(t=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var s=this.jsPDFDocument.internal.getFont(),a=s.fontStyle,l=s.fontName;if(e.font&&(l=e.font),e.fontStyle){a=e.fontStyle;var c=this.getFontList()[l];c&&c.indexOf(a)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(c[0]),a=c[0])}if(this.jsPDFDocument.setFont(l,a),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!t){var d=i.unifyColor(e.fillColor);d&&(n=this.jsPDFDocument).setFillColor.apply(n,d),d=i.unifyColor(e.textColor),d&&(r=this.jsPDFDocument).setTextColor.apply(r,d),d=i.unifyColor(e.lineColor),d&&(o=this.jsPDFDocument).setDrawColor.apply(o,d),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},i.prototype.splitTextToSize=function(e,t,n){return this.jsPDFDocument.splitTextToSize(e,t,n)},i.prototype.rect=function(e,t,n,r,o){return this.jsPDFDocument.rect(e,t,n,r,o)},i.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},i.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},i.prototype.getDocument=function(){return this.jsPDFDocument},i.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},i.prototype.addPage=function(){return this.jsPDFDocument.addPage()},i.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},i.prototype.getGlobalOptions=function(){return XR||{}},i.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},i.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},i.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},i.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},i.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},i.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},i}(),VA=function(i,e){return VA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},VA(i,e)};function nz(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");VA(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var iz=function(i){nz(e,i);function e(t){var n=i.call(this)||this;return n._element=t,n}return e}(Array);function nce(i){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/i,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function ice(i){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[i]}function P2(i,e,t){t.applyStyles(e,!0);var n=Array.isArray(i)?i:[i],r=n.map(function(o){return t.getTextWidth(o)}).reduce(function(o,s){return Math.max(o,s)},0);return r}function rz(i,e,t,n){var r=e.settings.tableLineWidth,o=e.settings.tableLineColor;i.applyStyles({lineWidth:r,lineColor:o});var s=oz(r,!1);s&&i.rect(t.x,t.y,e.getWidth(i.pageSize().width),n.y-t.y,s)}function oz(i,e){var t=i>0,n=e||e===0;return t&&n?"DF":t?"S":n?"F":null}function S2(i,e){var t,n,r,o;if(i=i||e,Array.isArray(i)){if(i.length>=4)return{top:i[0],right:i[1],bottom:i[2],left:i[3]};if(i.length===3)return{top:i[0],right:i[1],bottom:i[2],left:i[1]};if(i.length===2)return{top:i[0],right:i[1],bottom:i[0],left:i[1]};i.length===1?i=i[0]:i=e}return typeof i=="object"?(typeof i.vertical=="number"&&(i.top=i.vertical,i.bottom=i.vertical),typeof i.horizontal=="number"&&(i.right=i.horizontal,i.left=i.horizontal),{left:(t=i.left)!==null&&t!==void 0?t:e,top:(n=i.top)!==null&&n!==void 0?n:e,right:(r=i.right)!==null&&r!==void 0?r:e,bottom:(o=i.bottom)!==null&&o!==void 0?o:e}):(typeof i!="number"&&(i=e),{top:i,right:i,bottom:i,left:i})}function sz(i,e){var t=S2(e.settings.margin,0);return i.pageSize().width-(t.left+t.right)}function rce(i,e,t,n,r){var o={},s=1.3333333333333333,a=BA(e,function(O){return r.getComputedStyle(O).backgroundColor});a!=null&&(o.fillColor=a);var l=BA(e,function(O){return r.getComputedStyle(O).color});l!=null&&(o.textColor=l);var c=sce(n,t);c&&(o.cellPadding=c);var d="borderTopColor",h=s*t,p=n.borderTopWidth;if(n.borderBottomWidth===p&&n.borderRightWidth===p&&n.borderLeftWidth===p){var g=(parseFloat(p)||0)/h;g&&(o.lineWidth=g)}else o.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/h,right:(parseFloat(n.borderRightWidth)||0)/h,bottom:(parseFloat(n.borderBottomWidth)||0)/h,left:(parseFloat(n.borderLeftWidth)||0)/h},o.lineWidth.top||(o.lineWidth.right?d="borderRightColor":o.lineWidth.bottom?d="borderBottomColor":o.lineWidth.left&&(d="borderLeftColor"));var _=BA(e,function(O){return r.getComputedStyle(O)[d]});_!=null&&(o.lineColor=_);var b=["left","right","center","justify"];b.indexOf(n.textAlign)!==-1&&(o.halign=n.textAlign),b=["middle","bottom","top"],b.indexOf(n.verticalAlign)!==-1&&(o.valign=n.verticalAlign);var C=parseInt(n.fontSize||"");isNaN(C)||(o.fontSize=C/s);var y=oce(n);y&&(o.fontStyle=y);var M=(n.fontFamily||"").toLowerCase();return i.indexOf(M)!==-1&&(o.font=M),o}function oce(i){var e="";return(i.fontWeight==="bold"||i.fontWeight==="bolder"||parseInt(i.fontWeight)>=700)&&(e="bold"),(i.fontStyle==="italic"||i.fontStyle==="oblique")&&(e+="italic"),e}function BA(i,e){var t=az(i,e);if(!t)return null;var n=t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var r=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],o=parseInt(n[4]);return o===0||isNaN(r[0])||isNaN(r[1])||isNaN(r[2])?null:r}function az(i,e){var t=e(i);return t==="rgba(0, 0, 0, 0)"||t==="transparent"||t==="initial"||t==="inherit"?i.parentElement==null?null:az(i.parentElement,e):t}function sce(i,e){var t=[i.paddingTop,i.paddingRight,i.paddingBottom,i.paddingLeft],n=96/(72/e),r=(parseInt(i.lineHeight)-parseInt(i.fontSize))/e/2,o=t.map(function(a){return parseInt(a||"0")/n}),s=S2(o,0);return r>s.top&&(s.top=r),r>s.bottom&&(s.bottom=r),s}function lz(i,e,t,n,r){var o,s;n===void 0&&(n=!1),r===void 0&&(r=!1);var a;typeof e=="string"?a=t.document.querySelector(e):a=e;var l=Object.keys(i.getFontList()),c=i.scaleFactor(),d=[],h=[],p=[];if(!a)return console.error("Html table could not be found with input: ",e),{head:d,body:h,foot:p};for(var g=0;g<a.rows.length;g++){var _=a.rows[g],b=(s=(o=_?.parentElement)===null||o===void 0?void 0:o.tagName)===null||s===void 0?void 0:s.toLowerCase(),C=ace(l,c,t,_,n,r);C&&(b==="thead"?d.push(C):b==="tfoot"?p.push(C):h.push(C))}return{head:d,body:h,foot:p}}function ace(i,e,t,n,r,o){for(var s=new iz(n),a=0;a<n.cells.length;a++){var l=n.cells[a],c=t.getComputedStyle(l);if(r||c.display!=="none"){var d=void 0;o&&(d=rce(i,l,e,c,t)),s.push({rowSpan:l.rowSpan,colSpan:l.colSpan,styles:d,_element:l,content:lce(l)})}}var h=t.getComputedStyle(n);if(s.length>0&&(r||h.display!=="none"))return s}function lce(i){var e=i.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(t){return t.trim()}).join(`
`),e.innerText||e.textContent||""}function cce(i,e,t){for(var n=0,r=[i,e,t];n<r.length;n++){var o=r[n];o&&typeof o!="object"&&console.error("The options parameter should be of type object, is: "+typeof o),o.startY&&typeof o.startY!="number"&&(console.error("Invalid value for startY option",o.startY),delete o.startY)}}function Oc(i,e,t,n,r){if(i==null)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(i),s=1;s<arguments.length;s++){var a=arguments[s];if(a!=null)for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(o[l]=a[l])}return o}function dce(i,e){var t=new lg(i),n=t.getDocumentOptions(),r=t.getGlobalOptions();cce(r,n,e);var o=Oc({},r,n,e),s;typeof window<"u"&&(s=window);var a=uce(r,n,e),l=hce(r,n,e),c=fce(t,o),d=pce(t,o,s);return{id:e.tableId,content:d,hooks:l,styles:a,settings:c}}function uce(i,e,t){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},r=function(l){if(l==="columnStyles"){var c=i[l],d=e[l],h=t[l];n.columnStyles=Oc({},c,d,h)}else{var p=[i,e,t],g=p.map(function(_){return _[l]||{}});n[l]=Oc({},g[0],g[1],g[2])}},o=0,s=Object.keys(n);o<s.length;o++){var a=s[o];r(a)}return n}function hce(i,e,t){for(var n=[i,e,t],r={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},o=0,s=n;o<s.length;o++){var a=s[o];a.didParseCell&&r.didParseCell.push(a.didParseCell),a.willDrawCell&&r.willDrawCell.push(a.willDrawCell),a.didDrawCell&&r.didDrawCell.push(a.didDrawCell),a.willDrawPage&&r.willDrawPage.push(a.willDrawPage),a.didDrawPage&&r.didDrawPage.push(a.didDrawPage)}return r}function fce(i,e){var t,n,r,o,s,a,l,c,d,h,p,g,_=S2(e.margin,40/i.scaleFactor()),b=(t=gce(i,e.startY))!==null&&t!==void 0?t:_.top,C;e.showFoot===!0?C="everyPage":e.showFoot===!1?C="never":C=(n=e.showFoot)!==null&&n!==void 0?n:"everyPage";var y;e.showHead===!0?y="everyPage":e.showHead===!1?y="never":y=(r=e.showHead)!==null&&r!==void 0?r:"everyPage";var M=(o=e.useCss)!==null&&o!==void 0?o:!1,O=e.theme||(M?"plain":"striped"),A=!!e.horizontalPageBreak,D=(s=e.horizontalPageBreakRepeat)!==null&&s!==void 0?s:null;return{includeHiddenHtml:(a=e.includeHiddenHtml)!==null&&a!==void 0?a:!1,useCss:M,theme:O,startY:b,margin:_,pageBreak:(l=e.pageBreak)!==null&&l!==void 0?l:"auto",rowPageBreak:(c=e.rowPageBreak)!==null&&c!==void 0?c:"auto",tableWidth:(d=e.tableWidth)!==null&&d!==void 0?d:"auto",showHead:y,showFoot:C,tableLineWidth:(h=e.tableLineWidth)!==null&&h!==void 0?h:0,tableLineColor:(p=e.tableLineColor)!==null&&p!==void 0?p:200,horizontalPageBreak:A,horizontalPageBreakRepeat:D,horizontalPageBreakBehaviour:(g=e.horizontalPageBreakBehaviour)!==null&&g!==void 0?g:"afterAllRows"}}function gce(i,e){var t=i.getLastAutoTable(),n=i.scaleFactor(),r=i.pageNumber(),o=!1;if(t&&t.startPageNumber){var s=t.startPageNumber+t.pageNumber-1;o=s===r}return typeof e=="number"?e:(e==null||e===!1)&&o&&t?.finalY!=null?t.finalY+20/n:null}function pce(i,e,t){var n=e.head||[],r=e.body||[],o=e.foot||[];if(e.html){var s=e.includeHiddenHtml;if(t){var a=lz(i,e.html,t,s,e.useCss)||{};n=a.head||n,r=a.body||n,o=a.foot||n}else console.error("Cannot parse html in non browser environment")}var l=e.columns||mce(n,r,o);return{columns:l,head:n,body:r,foot:o}}function mce(i,e,t){var n=i[0]||e[0]||t[0]||[],r=[];return Object.keys(n).filter(function(o){return o!=="_element"}).forEach(function(o){var s=1,a;Array.isArray(n)?a=n[parseInt(o)]:a=n[o],typeof a=="object"&&!Array.isArray(a)&&(s=a?.colSpan||1);for(var l=0;l<s;l++){var c=void 0;Array.isArray(n)?c=r.length:c=o+(l>0?"_".concat(l):"");var d={dataKey:c};r.push(d)}}),r}var UA=function(){function i(e,t,n){this.table=t,this.pageNumber=t.pageNumber,this.settings=t.settings,this.cursor=n,this.doc=e.getDocument()}return i}(),xce=function(i){nz(e,i);function e(t,n,r,o,s,a){var l=i.call(this,t,n,a)||this;return l.cell=r,l.row=o,l.column=s,l.section=o.section,l}return e}(UA),_ce=function(){function i(e,t){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=t.columns,this.head=t.head,this.body=t.body,this.foot=t.foot}return i.prototype.getHeadHeight=function(e){return this.head.reduce(function(t,n){return t+n.getMaxCellHeight(e)},0)},i.prototype.getFootHeight=function(e){return this.foot.reduce(function(t,n){return t+n.getMaxCellHeight(e)},0)},i.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},i.prototype.callCellHooks=function(e,t,n,r,o,s){for(var a=0,l=t;a<l.length;a++){var c=l[a],d=new xce(e,this,n,r,o,s),h=c(d)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],h)return!1}return!0},i.prototype.callEndPageHooks=function(e,t){e.applyStyles(e.userStyles);for(var n=0,r=this.hooks.didDrawPage;n<r.length;n++){var o=r[n];o(new UA(e,this,t))}},i.prototype.callWillDrawPageHooks=function(e,t){for(var n=0,r=this.hooks.willDrawPage;n<r.length;n++){var o=r[n];o(new UA(e,this,t))}},i.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var t=this.columns.reduce(function(r,o){return r+o.wrappedWidth},0);return t}else{var n=this.settings.margin;return e-n.left-n.right}},i}(),cz=function(){function i(e,t,n,r,o){o===void 0&&(o=!1),this.height=0,this.raw=e,e instanceof iz&&(this.raw=e._element,this.element=e._element),this.index=t,this.section=n,this.cells=r,this.spansMultiplePages=o}return i.prototype.getMaxCellHeight=function(e){var t=this;return e.reduce(function(n,r){var o;return Math.max(n,((o=t.cells[r.index])===null||o===void 0?void 0:o.height)||0)},0)},i.prototype.hasRowSpan=function(e){var t=this;return e.filter(function(n){var r=t.cells[n.index];return r?r.rowSpan>1:!1}).length>0},i.prototype.canEntireRowFit=function(e,t){return this.getMaxCellHeight(t)<=e},i.prototype.getMinimumRowHeight=function(e,t){var n=this;return e.reduce(function(r,o){var s=n.cells[o.index];if(!s)return 0;var a=t.getLineHeight(s.styles.fontSize),l=s.padding("vertical"),c=l+a;return c>r?c:r},0)},i}(),dz=function(){function i(e,t,n){var r;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=t,this.section=n,this.raw=e;var o=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,o=(r=e.content)!==null&&r!==void 0?r:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var s=o!=null?""+o:"",a=/\r\n|\r|\n/g;this.text=s.split(a)}return i.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var t=this.height-this.padding("vertical");e=this.y+t/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var r=this.width-this.padding("horizontal");n=this.x+r/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:e}},i.prototype.getContentHeight=function(e,t){t===void 0&&(t=1.15);var n=Array.isArray(this.text)?this.text.length:1,r=this.styles.fontSize/e*t,o=n*r+this.padding("vertical");return Math.max(o,this.styles.minCellHeight)},i.prototype.padding=function(e){var t=S2(this.styles.cellPadding,0);return e==="vertical"?t.top+t.bottom:e==="horizontal"?t.left+t.right:t[e]},i}(),vce=function(){function i(e,t,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=t,this.index=n}return i.prototype.getMaxCustomCellWidth=function(e){for(var t=0,n=0,r=e.allRows();n<r.length;n++){var o=r[n],s=o.cells[this.index];s&&typeof s.styles.cellWidth=="number"&&(t=Math.max(t,s.styles.cellWidth))}return t},i}();function bce(i,e){Cce(i,e);var t=[],n=0;e.columns.forEach(function(o){var s=o.getMaxCustomCellWidth(e);s?o.width=s:(o.width=o.wrappedWidth,t.push(o)),n+=o.width});var r=e.getWidth(i.pageSize().width)-n;r&&(r=HA(t,r,function(o){return Math.max(o.minReadableWidth,o.minWidth)})),r&&(r=HA(t,r,function(o){return o.minWidth})),r=Math.abs(r),!e.settings.horizontalPageBreak&&r>.1/i.scaleFactor()&&(r=r<1?r:Math.round(r),console.warn("Of the table content, ".concat(r," units width could not fit page"))),wce(e),Mce(e,i),yce(e)}function Cce(i,e){var t=i.scaleFactor(),n=e.settings.horizontalPageBreak,r=sz(i,e);e.allRows().forEach(function(o){for(var s=0,a=e.columns;s<a.length;s++){var l=a[s],c=o.cells[l.index];if(c){var d=e.hooks.didParseCell;e.callCellHooks(i,d,c,o,l,null);var h=c.padding("horizontal");c.contentWidth=P2(c.text,c.styles,i)+h;var p=P2(c.text.join(" ").split(/[^\S\u00A0]+/),c.styles,i);if(c.minReadableWidth=p+c.padding("horizontal"),typeof c.styles.cellWidth=="number")c.minWidth=c.styles.cellWidth,c.wrappedWidth=c.styles.cellWidth;else if(c.styles.cellWidth==="wrap"||n===!0)c.contentWidth>r?(c.minWidth=r,c.wrappedWidth=r):(c.minWidth=c.contentWidth,c.wrappedWidth=c.contentWidth);else{var g=10/t;c.minWidth=c.styles.minCellWidth||g,c.wrappedWidth=c.contentWidth,c.minWidth>c.wrappedWidth&&(c.wrappedWidth=c.minWidth)}}}}),e.allRows().forEach(function(o){for(var s=0,a=e.columns;s<a.length;s++){var l=a[s],c=o.cells[l.index];if(c&&c.colSpan===1)l.wrappedWidth=Math.max(l.wrappedWidth,c.wrappedWidth),l.minWidth=Math.max(l.minWidth,c.minWidth),l.minReadableWidth=Math.max(l.minReadableWidth,c.minReadableWidth);else{var d=e.styles.columnStyles[l.dataKey]||e.styles.columnStyles[l.index]||{},h=d.cellWidth||d.minCellWidth;h&&typeof h=="number"&&(l.minWidth=h,l.wrappedWidth=h)}c&&(c.colSpan>1&&!l.minWidth&&(l.minWidth=c.minWidth),c.colSpan>1&&!l.wrappedWidth&&(l.wrappedWidth=c.minWidth))}})}function HA(i,e,t){for(var n=e,r=i.reduce(function(g,_){return g+_.wrappedWidth},0),o=0;o<i.length;o++){var s=i[o],a=s.wrappedWidth/r,l=n*a,c=s.width+l,d=t(s),h=c<d?d:c;e-=h-s.width,s.width=h}if(e=Math.round(e*1e10)/1e10,e){var p=i.filter(function(g){return e<0?g.width>t(g):!0});p.length&&(e=HA(p,e,t))}return e}function yce(i){for(var e={},t=1,n=i.allRows(),r=0;r<n.length;r++)for(var o=n[r],s=0,a=i.columns;s<a.length;s++){var l=a[s],c=e[l.index];if(t>1)t--,delete o.cells[l.index];else if(c)c.cell.height+=o.height,t=c.cell.colSpan,delete o.cells[l.index],c.left--,c.left<=1&&delete e[l.index];else{var d=o.cells[l.index];if(!d)continue;if(d.height=o.height,d.rowSpan>1){var h=n.length-r,p=d.rowSpan>h?h:d.rowSpan;e[l.index]={cell:d,left:p,row:o}}}}}function wce(i){for(var e=i.allRows(),t=0;t<e.length;t++)for(var n=e[t],r=null,o=0,s=0,a=0;a<i.columns.length;a++){var l=i.columns[a];if(s-=1,s>1&&i.columns[a+1])o+=l.width,delete n.cells[l.index];else if(r){var c=r;delete n.cells[l.index],r=null,c.width=l.width+o}else{var c=n.cells[l.index];if(!c)continue;if(s=c.colSpan,o=0,c.colSpan>1){r=c,o+=l.width;continue}c.width=l.width+o}}}function Mce(i,e){for(var t={count:0,height:0},n=0,r=i.allRows();n<r.length;n++){for(var o=r[n],s=0,a=i.columns;s<a.length;s++){var l=a[s],c=o.cells[l.index];if(c){e.applyStyles(c.styles,!0);var d=c.width-c.padding("horizontal");if(c.styles.overflow==="linebreak")c.text=e.splitTextToSize(c.text,d+1/e.scaleFactor(),{fontSize:c.styles.fontSize});else if(c.styles.overflow==="ellipsize")c.text=QR(c.text,d,c.styles,e,"...");else if(c.styles.overflow==="hidden")c.text=QR(c.text,d,c.styles,e,"");else if(typeof c.styles.overflow=="function"){var h=c.styles.overflow(c.text,d);typeof h=="string"?c.text=[h]:c.text=h}c.contentHeight=c.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var p=c.contentHeight/c.rowSpan;c.rowSpan>1&&t.count*t.height<p*c.rowSpan?t={height:p,count:c.rowSpan}:t&&t.count>0&&t.height>p&&(p=t.height),p>o.height&&(o.height=p)}}t.count--}}function QR(i,e,t,n,r){return i.map(function(o){return Ece(o,e,t,n,r)})}function Ece(i,e,t,n,r){var o=1e4*n.scaleFactor();if(e=Math.ceil(e*o)/o,e>=P2(i,t,n))return i;for(;e<P2(i+r,t,n)&&!(i.length<=1);)i=i.substring(0,i.length-1);return i.trim()+r}function Pce(i,e){var t=new lg(i),n=Oce(e,t.scaleFactor()),r=new _ce(e,n);return bce(t,r),t.applyStyles(t.userStyles),r}function Oce(i,e){var t=i.content,n=kce(t.columns);if(t.head.length===0){var r=JR(n,"head");r&&t.head.push(r)}if(t.foot.length===0){var r=JR(n,"foot");r&&t.foot.push(r)}var o=i.settings.theme,s=i.styles;return{columns:n,head:NA("head",t.head,n,s,o,e),body:NA("body",t.body,n,s,o,e),foot:NA("foot",t.foot,n,s,o,e)}}function NA(i,e,t,n,r,o){var s={},a=e.map(function(l,c){for(var d=0,h={},p=0,g=0,_=0,b=t;_<b.length;_++){var C=b[_];if(s[C.index]==null||s[C.index].left===0)if(g===0){var y=void 0;Array.isArray(l)?y=l[C.index-p-d]:y=l[C.dataKey];var M={};typeof y=="object"&&!Array.isArray(y)&&(M=y?.styles||{});var O=Ace(i,C,c,r,n,o,M),A=new dz(y,O,i);h[C.dataKey]=A,h[C.index]=A,g=A.colSpan-1,s[C.index]={left:A.rowSpan-1,times:g}}else g--,p++;else s[C.index].left--,g=s[C.index].times,d++}return new cz(l,c,i,h)});return a}function JR(i,e){var t={};return i.forEach(function(n){if(n.raw!=null){var r=Sce(e,n.raw);r!=null&&(t[n.dataKey]=r)}}),Object.keys(t).length>0?t:null}function Sce(i,e){if(i==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(i==="foot"&&typeof e=="object")return e.footer;return null}function kce(i){return i.map(function(e,t){var n,r;return typeof e=="object"?r=(n=e.dataKey)!==null&&n!==void 0?n:t:r=t,new vce(r,e,t)})}function Ace(i,e,t,n,r,o,s){var a=ice(n),l;i==="head"?l=r.headStyles:i==="body"?l=r.bodyStyles:i==="foot"&&(l=r.footStyles);var c=Oc({},a.table,a[i],r.styles,l),d=r.columnStyles[e.dataKey]||r.columnStyles[e.index]||{},h=i==="body"?d:{},p=i==="body"&&t%2===0?Oc({},a.alternateRow,r.alternateRowStyles):{},g=nce(o),_=Oc({},g,c,p,h);return Oc(_,s)}function Dce(i,e,t){var n;t===void 0&&(t={});var r=sz(i,e),o=new Map,s=[],a=[],l=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?l=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(l=[e.settings.horizontalPageBreakRepeat]),l.forEach(function(p){var g=e.columns.find(function(_){return _.dataKey===p||_.index===p});g&&!o.has(g.index)&&(o.set(g.index,!0),s.push(g.index),a.push(e.columns[g.index]),r-=g.wrappedWidth)});for(var c=!0,d=(n=t?.start)!==null&&n!==void 0?n:0;d<e.columns.length;){if(o.has(d)){d++;continue}var h=e.columns[d].wrappedWidth;if(c||r>=h)c=!1,s.push(d),a.push(e.columns[d]),r-=h;else break;d++}return{colIndexes:s,columns:a,lastIndex:d-1}}function Fce(i,e){for(var t=[],n=0;n<e.columns.length;n++){var r=Dce(i,e,{start:n});r.columns.length&&(t.push(r),n=r.lastIndex)}return t}function Ice(i,e){var t=e.settings,n=t.startY,r=t.margin,o={x:r.left,y:n},s=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),a=n+r.bottom+s;if(t.pageBreak==="avoid"){var l=e.body,c=l.reduce(function(p,g){return p+g.height},0);a+=c}var d=new lg(i);(t.pageBreak==="always"||t.startY!=null&&a>d.pageSize().height)&&(hz(d),o.y=r.top),e.callWillDrawPageHooks(d,o);var h=Oc({},o);e.startPageNumber=d.pageNumber(),t.horizontalPageBreak?Tce(d,e,h,o):(d.applyStyles(d.userStyles),(t.showHead==="firstPage"||t.showHead==="everyPage")&&e.head.forEach(function(p){return Sc(d,e,p,o,e.columns)}),d.applyStyles(d.userStyles),e.body.forEach(function(p,g){var _=g===e.body.length-1;O2(d,e,p,_,h,o,e.columns)}),d.applyStyles(d.userStyles),(t.showFoot==="lastPage"||t.showFoot==="everyPage")&&e.foot.forEach(function(p){return Sc(d,e,p,o,e.columns)})),rz(d,e,h,o),e.callEndPageHooks(d,o),e.finalY=o.y,i.lastAutoTable=e,d.applyStyles(d.userStyles)}function Tce(i,e,t,n){var r=Fce(i,e),o=e.settings;if(o.horizontalPageBreakBehaviour==="afterAllRows")r.forEach(function(c,d){i.applyStyles(i.userStyles),d>0?Dx(i,e,t,n,c.columns,!0):ZR(i,e,n,c.columns),Bce(i,e,t,n,c.columns),LA(i,e,n,c.columns)});else for(var s=-1,a=r[0],l=function(){var c=s;if(a){i.applyStyles(i.userStyles);var d=a.columns;s>=0?Dx(i,e,t,n,d,!0):ZR(i,e,n,d),c=ez(i,e,s+1,n,d),LA(i,e,n,d)}var h=c-s;r.slice(1).forEach(function(p){i.applyStyles(i.userStyles),Dx(i,e,t,n,p.columns,!0),ez(i,e,s+1,n,p.columns,h),LA(i,e,n,p.columns)}),s=c};s<e.body.length-1;)l()}function ZR(i,e,t,n){var r=e.settings;i.applyStyles(i.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&e.head.forEach(function(o){return Sc(i,e,o,t,n)})}function Bce(i,e,t,n,r){i.applyStyles(i.userStyles),e.body.forEach(function(o,s){var a=s===e.body.length-1;O2(i,e,o,a,t,n,r)})}function ez(i,e,t,n,r,o){i.applyStyles(i.userStyles),o=o??e.body.length;var s=Math.min(t+o,e.body.length),a=-1;return e.body.slice(t,s).forEach(function(l,c){var d=t+c===e.body.length-1,h=uz(i,e,d,n);l.canEntireRowFit(h,r)&&(Sc(i,e,l,n,r),a=t+c)}),a}function LA(i,e,t,n){var r=e.settings;i.applyStyles(i.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&e.foot.forEach(function(o){return Sc(i,e,o,t,n)})}function Nce(i,e,t){var n=t.getLineHeight(i.styles.fontSize),r=i.padding("vertical"),o=Math.floor((e-r)/n);return Math.max(0,o)}function Lce(i,e,t,n){var r={};i.spansMultiplePages=!0,i.height=0;for(var o=0,s=0,a=t.columns;s<a.length;s++){var l=a[s],c=i.cells[l.index];if(c){Array.isArray(c.text)||(c.text=[c.text]);var d=new dz(c.raw,c.styles,c.section);d=Oc(d,c),d.text=[];var h=Nce(c,e,n);c.text.length>h&&(d.text=c.text.splice(h,c.text.length));var p=n.scaleFactor(),g=n.getLineHeightFactor();c.contentHeight=c.getContentHeight(p,g),c.contentHeight>=e&&(c.contentHeight=e,d.styles.minCellHeight-=e),c.contentHeight>i.height&&(i.height=c.contentHeight),d.contentHeight=d.getContentHeight(p,g),d.contentHeight>o&&(o=d.contentHeight),r[l.index]=d}}var _=new cz(i.raw,-1,i.section,r,!0);_.height=o;for(var b=0,C=t.columns;b<C.length;b++){var l=C[b],d=_.cells[l.index];d&&(d.height=_.height);var c=i.cells[l.index];c&&(c.height=i.height)}return _}function Rce(i,e,t,n){var r=i.pageSize().height,o=n.settings.margin,s=o.top+o.bottom,a=r-s;e.section==="body"&&(a-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var l=e.getMinimumRowHeight(n.columns,i),c=l<t;if(l>a)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!c)return!1;var d=e.hasRowSpan(n.columns),h=e.getMaxCellHeight(n.columns)>a;return h?(d&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||n.settings.rowPageBreak==="avoid")}function O2(i,e,t,n,r,o,s){var a=uz(i,e,n,o);if(t.canEntireRowFit(a,s))Sc(i,e,t,o,s);else if(Rce(i,t,a,e)){var l=Lce(t,a,e,i);Sc(i,e,t,o,s),Dx(i,e,r,o,s),O2(i,e,l,n,r,o,s)}else Dx(i,e,r,o,s),O2(i,e,t,n,r,o,s)}function Sc(i,e,t,n,r){n.x=e.settings.margin.left;for(var o=0,s=r;o<s.length;o++){var a=s[o],l=t.cells[a.index];if(!l){n.x+=a.width;continue}i.applyStyles(l.styles),l.x=n.x,l.y=n.y;var c=e.callCellHooks(i,e.hooks.willDrawCell,l,t,a,n);if(c===!1){n.x+=a.width;continue}zce(i,l,n);var d=l.getTextPos();tz(l.text,d.x,d.y,{halign:l.styles.halign,valign:l.styles.valign,maxWidth:Math.ceil(l.width-l.padding("left")-l.padding("right"))},i.getDocument()),e.callCellHooks(i,e.hooks.didDrawCell,l,t,a,n),n.x+=a.width}n.y+=t.height}function zce(i,e,t){var n=e.styles;if(i.getDocument().setFillColor(i.getDocument().getFillColor()),typeof n.lineWidth=="number"){var r=oz(n.lineWidth,n.fillColor);r&&i.rect(e.x,t.y,e.width,e.height,r)}else typeof n.lineWidth=="object"&&(n.fillColor&&i.rect(e.x,t.y,e.width,e.height,"F"),jce(i,e,t,n.lineWidth))}function jce(i,e,t,n){var r,o,s,a;n.top&&(r=t.x,o=t.y,s=t.x+e.width,a=t.y,n.right&&(s+=.5*n.right),n.left&&(r-=.5*n.left),l(n.top,r,o,s,a)),n.bottom&&(r=t.x,o=t.y+e.height,s=t.x+e.width,a=t.y+e.height,n.right&&(s+=.5*n.right),n.left&&(r-=.5*n.left),l(n.bottom,r,o,s,a)),n.left&&(r=t.x,o=t.y,s=t.x,a=t.y+e.height,n.top&&(o-=.5*n.top),n.bottom&&(a+=.5*n.bottom),l(n.left,r,o,s,a)),n.right&&(r=t.x+e.width,o=t.y,s=t.x+e.width,a=t.y+e.height,n.top&&(o-=.5*n.top),n.bottom&&(a+=.5*n.bottom),l(n.right,r,o,s,a));function l(c,d,h,p,g){i.getDocument().setLineWidth(c),i.getDocument().line(d,h,p,g,"S")}}function uz(i,e,t,n){var r=e.settings.margin.bottom,o=e.settings.showFoot;return(o==="everyPage"||o==="lastPage"&&t)&&(r+=e.getFootHeight(e.columns)),i.pageSize().height-n.y-r}function Dx(i,e,t,n,r,o){r===void 0&&(r=[]),o===void 0&&(o=!1),i.applyStyles(i.userStyles),e.settings.showFoot==="everyPage"&&!o&&e.foot.forEach(function(a){return Sc(i,e,a,n,r)}),e.callEndPageHooks(i,n);var s=e.settings.margin;rz(i,e,t,n),hz(i),e.pageNumber++,n.x=s.left,n.y=s.top,t.y=s.top,e.callWillDrawPageHooks(i,n),e.settings.showHead==="everyPage"&&(e.head.forEach(function(a){return Sc(i,e,a,n,r)}),i.applyStyles(i.userStyles))}function hz(i){var e=i.pageNumber();i.setPage(e+1);var t=i.pageNumber();return t===e?(i.addPage(),!0):!1}function Vce(i){i.API.autoTable=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[0],r=dce(this,n),o=Pce(this,r);return Ice(this,o),this},i.API.lastAutoTable=!1,i.API.autoTableText=function(e,t,n,r){tz(e,t,n,r,this)},i.API.autoTableSetDefaults=function(e){return lg.setDefaults(e,this),this},i.autoTableSetDefaults=function(e,t){lg.setDefaults(e,t)},i.API.autoTableHtmlToJson=function(e,t){var n;if(t===void 0&&(t=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var r=new lg(this),o=lz(r,e,window,t,!1),s=o.head,a=o.body,l=((n=s[0])===null||n===void 0?void 0:n.map(function(c){return c.content}))||[];return{columns:l,rows:a,data:a}}}var RA;try{typeof window<"u"&&window&&(zA=window,jA=zA.jsPDF||((RA=zA.jspdf)===null||RA===void 0?void 0:RA.jsPDF),jA&&Vce(jA))}catch(i){console.error("Could not apply autoTable plugin",i)}var zA,jA;var gz=yh(aM());var Uce=["videoElement"],Hce=["canvasElement"];function Gce(i,e){if(i&1&&(u(0,"option",40),m(1),f()),i&2){let t=e.$implicit;S("value",t),x(),he(" ",t," ")}}function $ce(i,e){i&1&&(u(0,"div",41)(1,"div",42),k(2,"video",43,0)(4,"canvas",44,1),u(6,"div",45)(7,"div",46),k(8,"div",47)(9,"div",48)(10,"div",49)(11,"div",50),f(),u(12,"p",51),m(13," \xD6\u011Frenci QR kodunu kameran\u0131n \xF6n\xFCne tutun "),f(),u(14,"p",52),k(15,"i",53),m(16," Giri\u015F i\xE7in: G\u0130R\u0130\u015E QR Kodu | \xC7\u0131k\u0131\u015F i\xE7in: \xC7IKI\u015E QR Kodu "),f()()()())}function Wce(i,e){if(i&1&&(u(0,"div",77),k(1,"i",78),u(2,"span",79),m(3,"Giri\u015F:"),f(),u(4,"span",80),m(5),ha(6,"date"),f()()),i&2){let t=F(2).$implicit,n=F(2);x(5),W(ol(6,1,n.getStudentEntryTime(t.id),"HH:mm:ss"))}}function qce(i,e){if(i&1&&(u(0,"div",81),k(1,"i",82),u(2,"span",79),m(3,"\xC7\u0131k\u0131\u015F:"),f(),u(4,"span",80),m(5),ha(6,"date"),f()()),i&2){let t=F(2).$implicit,n=F(2);x(5),W(ol(6,1,n.getStudentExitTime(t.id),"HH:mm:ss"))}}function Kce(i,e){if(i&1&&(u(0,"div",73)(1,"div",74),ee(2,Wce,7,4,"div",75)(3,qce,7,4,"div",76),f()()),i&2){let t=F().$implicit,n=F(2);x(2),S("ngIf",n.getStudentEntryTime(t.id)),x(),S("ngIf",n.getStudentExitTime(t.id))}}function Yce(i,e){if(i&1){let t=Ae();u(0,"div",62)(1,"div",63)(2,"div",64),k(3,"img",65),u(4,"div",66)(5,"h4"),m(6),f(),u(7,"p"),m(8),f()()(),u(9,"div",67)(10,"div",68),k(11,"i",69),m(12),f()()(),ee(13,Kce,4,2,"div",70),u(14,"div",71)(15,"button",72),U("click",function(){let r=K(t).$implicit,o=F(2);return Y(o.manualToggleStudentPresence(r.id))}),k(16,"i",69),m(17),f()()()}if(i&2){let t=e.$implicit,n=F(2);xe("present",n.isStudentPresent(t.id))("absent",!n.isStudentPresent(t.id)),x(3),S("src",t.avatar,vt),x(3),W(t.adi_soyadi),x(2),W(t.email),x(2),xe("online",n.isStudentPresent(t.id))("offline",!n.isStudentPresent(t.id)),x(),xe("bi-circle-fill",n.isStudentPresent(t.id))("bi-circle",!n.isStudentPresent(t.id)),x(),he(" ",n.isStudentPresent(t.id)?"S\u0131n\u0131fta":"Yok"," "),x(),S("ngIf",n.isStudentPresent(t.id)||n.getStudentExitTime(t.id)),x(2),xe("btn-danger",n.isStudentPresent(t.id))("btn-success",!n.isStudentPresent(t.id)),x(),xe("bi-box-arrow-left",n.isStudentPresent(t.id))("bi-box-arrow-in-right",!n.isStudentPresent(t.id)),x(),he(" ",n.isStudentPresent(t.id)?"\xC7\u0131k\u0131\u015F Yap":"Giri\u015F Yap"," ")}}function Xce(i,e){i&1&&(u(0,"div",83),k(1,"i",84),u(2,"p",85),m(3,"Bu grupta hen\xFCz \xF6\u011Frenci bulunmuyor"),f()())}function Qce(i,e){if(i&1){let t=Ae();u(0,"div",54)(1,"div",55)(2,"h3"),m(3),f(),u(4,"div",56),k(5,"i",57),m(6),u(7,"button",58),U("click",function(){K(t);let r=F();return Y(r.exportClassroomReport())}),m(8," Rapor G\xF6ster "),f()()(),u(9,"div",59),ee(10,Yce,18,26,"div",60),f(),ee(11,Xce,4,0,"div",61),f()}if(i&2){let t=F();x(3),he("",t.selectedGroup," - Anl\u0131k S\u0131n\u0131f Durumu"),x(3),he(" Son g\xFCncellenme: ",t.currentTime," "),x(),S("disabled",!t.selectedGroup||!t.selectedDate),x(3),S("ngForOf",t.groupStudents),x(),S("ngIf",t.groupStudents.length===0)}}function Jce(i,e){i&1&&(u(0,"div",86),k(1,"i",87),u(2,"p",85),m(3," S\u0131n\u0131f durumunu g\xF6rmek i\xE7in yukar\u0131dan bir grup se\xE7in "),f()())}function Zce(i,e){if(i&1&&(u(0,"tr",103)(1,"td",104),m(2),f(),u(3,"td",105),m(4),f(),u(5,"td",106),m(6),f(),u(7,"td",107)(8,"span"),k(9,"i"),m(10),f()(),u(11,"td",107)(12,"span"),m(13),f()(),u(14,"td",107)(15,"span"),m(16),f()(),u(17,"td",107)(18,"span",108),m(19),f()()()),i&2){let t=e.$implicit,n=e.index;x(2),W(n+1),x(2),W(t.student_name),x(2),W(t.student_email),x(2),ei(t.is_present?"badge bg-success-subtle text-success":"badge bg-secondary-subtle text-secondary"),x(),ei(t.is_present?"bi bi-check-circle me-1":"bi bi-x-circle me-1"),x(),he(" ",t.status," "),x(2),ei(t.entry_time!=="-"?"text-success fw-medium":"text-muted"),x(),he(" ",t.entry_time," "),x(2),ei(t.exit_time!=="-"?"text-danger fw-medium":"text-muted"),x(),he(" ",t.exit_time," "),x(3),W(t.movement_count)}}function ede(i,e){i&1&&(u(0,"div",109),k(1,"i",110),u(2,"p",111),m(3,"Bu tarih i\xE7in hen\xFCz bir kay\u0131t bulunamad\u0131."),f()())}function tde(i,e){if(i&1){let t=Ae();u(0,"div",88)(1,"div",89)(2,"h5",90),m(3),f(),u(4,"div")(5,"button",91),U("click",function(){K(t);let r=F();return Y(r.pdfKaydet())}),k(6,"i",92),m(7," PDF \u0130ndir "),f(),u(8,"span",93),m(9),f()()(),u(10,"div",94)(11,"div",95)(12,"table",96)(13,"thead",97)(14,"tr")(15,"th",98),m(16," S\u0131ra "),f(),u(17,"th",99),m(18," \xD6\u011Frenci Ad\u0131 "),f(),u(19,"th",99),m(20," E-posta "),f(),u(21,"th",100),m(22," Durum "),f(),u(23,"th",100),m(24," Giri\u015F Saati "),f(),u(25,"th",100),m(26," \xC7\u0131k\u0131\u015F Saati "),f(),u(27,"th",100),m(28," Hareket Say\u0131s\u0131 "),f()()(),u(29,"tbody"),ee(30,Zce,20,15,"tr",101),f()()(),ee(31,ede,4,0,"div",102),f()()}if(i&2){let t=F();x(3),hn(" G\xFCnl\xFCk Giri\u015F-\xC7\u0131k\u0131\u015F Raporu - ",t.selectedGroup," (",t.selectedDate,") "),x(6),he("",t.dailyReportData.length," \xF6\u011Frenci"),x(21),S("ngForOf",t.dailyReportData),x(),S("ngIf",t.dailyReportData.length===0)}}var Fx=class i{constructor(e,t){this.http=e;this.toastr=t}videoElement;canvasElement;groups=[];selectedGroup="";selectedDate="";groupStudents=[];presentStudents=new Set;classroomEntries=new Map;qrScanInterval;recentlyProcessedQR=new Map;isQRScannerActive=!1;mediaStream=null;scanInterval=null;currentTime="";pdfKaydet(){let e=document.getElementById("sonucSayfasi");e&&(0,gz.default)(e).then(t=>{let n=t.toDataURL("image/png"),r=new _t("p","mm","a4"),o=r.internal.pageSize.getWidth(),s=r.internal.pageSize.getHeight(),a=8,l=5,c=5,d=5,h=o-l-c,p=s-a-d,g=t.height*h/t.width;if(g<=p)r.addImage(n,"PNG",l,a,h,g);else{let _=g,b=0;for(r.addImage(n,"PNG",l,a,h,g),_-=p;_>0;)b=_-g,r.addPage(),r.addImage(n,"PNG",l,a+b,h,g),_-=p}r.save("sinav-sonuc.pdf")})}ngOnInit(){this.loadGroups(),this.setTodayDate(),this.updateCurrentTime(),setInterval(()=>this.updateCurrentTime(),1e3),setInterval(()=>this.cleanupOldQRRecords(),1e4)}ngAfterViewInit(){}updateCurrentTime(){let e=new Date;this.currentTime=e.toLocaleTimeString()}setTodayDate(){let e=new Date,t=e.getFullYear(),n=(e.getMonth()+1).toString().padStart(2,"0"),r=e.getDate().toString().padStart(2,"0");this.selectedDate=`${t}-${n}-${r}`}loadGroups(){this.http.get("./server/api/ogrenciler_listesi.php",{headers:this.getAuthHeaders()}).subscribe({next:e=>{if(e.success){let t=null,n=localStorage.getItem("user")||sessionStorage.getItem("user");n&&(t=JSON.parse(n));let r=t?.adi_soyadi||"",o=e.data.filter(a=>a.rutbe==="ogrenci"&&a.ogretmeni===r&&a.grubu),s=[...new Set(o.map(a=>a.grubu))];this.groups=s}},error:e=>{console.error("Gruplar y\xFCklenirken hata:",e)}})}onGroupChange(){this.selectedGroup?(this.loadGroupStudents(),this.loadClassroomStatus()):(this.groupStudents=[],this.presentStudents.clear(),this.classroomEntries.clear())}loadGroupStudents(){this.http.get("./server/api/ogrenciler_listesi.php",{headers:this.getAuthHeaders()}).subscribe({next:e=>{if(e.success){let t=null,n=localStorage.getItem("user")||sessionStorage.getItem("user");n&&(t=JSON.parse(n));let r=t?.adi_soyadi||"";this.groupStudents=e.data.filter(o=>o.rutbe==="ogrenci"&&o.grubu===this.selectedGroup&&o.ogretmeni===r)}},error:e=>{console.error("Grup \xF6\u011Frencileri y\xFCklenirken hata:",e)}})}loadClassroomStatus(){this.selectedGroup&&this.http.get("./server/api/sinif_durumu.php",{headers:this.getAuthHeaders(),params:{grup:this.selectedGroup,tarih:this.selectedDate}}).subscribe({next:e=>{e&&e.success&&e.data&&(this.presentStudents.clear(),this.classroomEntries.clear(),e.data.forEach(t=>{t.is_present&&this.presentStudents.add(t.student_id),this.classroomEntries.set(t.student_id,{student_id:t.student_id,entry_time:new Date(t.entry_time),exit_time:t.exit_time?new Date(t.exit_time):void 0,is_present:t.is_present,qr_method:t.qr_method})}))},error:e=>{console.error("S\u0131n\u0131f durumu y\xFCklenirken hata:",e)}})}refreshClassroomStatus(){this.loadClassroomStatus()}toggleQRScanner(){this.isQRScannerActive?this.stopQRScanner():this.startQRScanner()}startQRScanner(){return Ge(this,null,function*(){try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){this.toastr.error("Bu cihazda kamera deste\u011Fi bulunmuyor","Hata");return}try{if("permissions"in navigator&&"query"in navigator.permissions&&(yield navigator.permissions.query({name:"camera"})).state==="denied"){this.toastr.error("Kamera eri\u015Fimi reddedildi. L\xFCtfen taray\u0131c\u0131 ayarlar\u0131ndan kamera iznini a\xE7\u0131n.","Kamera \u0130zni");return}}catch{console.log("Permission API desteklenmiyor, direkt kamera eri\u015Fimi denenecek")}this.mediaStream=yield navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}),this.isQRScannerActive=!0,this.toastr.success("QR kod taray\u0131c\u0131 ba\u015Flat\u0131ld\u0131","Ba\u015Far\u0131l\u0131"),setTimeout(()=>{this.videoElement&&(this.videoElement.nativeElement.srcObject=this.mediaStream,this.videoElement.nativeElement.play(),this.startQRCodeDetection())},100)}catch(e){console.error("Kamera eri\u015Fim hatas\u0131:",e);let t="Kameraya eri\u015Fim sa\u011Flanamad\u0131";e.name==="NotAllowedError"?t="Kamera izni verilmedi":e.name==="NotFoundError"?t="Bu cihazda kamera bulunamad\u0131":e.name==="NotReadableError"?t="Kamera ba\u015Fka bir uygulama taraf\u0131ndan kullan\u0131l\u0131yor":e.name==="SecurityError"&&(t="G\xFCvenlik nedeniyle eri\u015Fim engellendi"),this.toastr.error(t,"Kamera Hatas\u0131")}})}stopQRScanner(){this.mediaStream&&(this.mediaStream.getTracks().forEach(e=>e.stop()),this.mediaStream=null),this.scanInterval&&(clearInterval(this.scanInterval),this.scanInterval=null),this.isQRScannerActive=!1,this.recentlyProcessedQR.clear(),this.toastr.info("QR kod taray\u0131c\u0131 durduruldu","Bilgi")}startQRCodeDetection(){this.scanInterval=setInterval(()=>{this.detectQRCode()},200)}detectQRCode(){if(!this.videoElement||!this.canvasElement)return;let e=this.videoElement.nativeElement,t=this.canvasElement.nativeElement,n=t.getContext("2d");if(!n||e.readyState!==e.HAVE_ENOUGH_DATA)return;t.width=e.videoWidth,t.height=e.videoHeight,n.drawImage(e,0,0,t.width,t.height);let r=n.getImageData(0,0,t.width,t.height);try{let o=(0,fz.default)(r.data,r.width,r.height);o&&o.data&&(console.log("QR Kod tespit edildi:",o.data),this.processQRCodeForClassroom(o.data))}catch(o){console.error("QR kod okuma hatas\u0131:",o)}}generateMockQRData(){return null}processQRCodeForClassroom(e){console.log("QR Kod okundu:",e);let t=Date.now(),n=this.recentlyProcessedQR.get(e);if(n&&t-n<3e3){console.log("QR kod son 3 saniye i\xE7inde i\u015Flendi, tekrar i\u015Flenmeyecek:",e);return}this.recentlyProcessedQR.set(e,t);let r=e.split("_");if(r.length!==3){this.toastr.error("Ge\xE7ersiz QR kod format\u0131. Beklenen format: id_action_timestamp","Hata"),console.error("QR Kod parse hatas\u0131:",{qrData:e,parts:r});return}let o=parseInt(r[0]),s=r[1],a=parseInt(r[2]),l=Date.now(),c=Math.abs(l-a),d=5*60*1e3;if(c>d){this.toastr.error("QR kod s\xFCresi dolmu\u015F. Yeni kod olu\u015Fturunuz.","Hata");return}if(s!=="entry"&&s!=="exit"){this.toastr.error("Ge\xE7ersiz QR kod aksiyon t\xFCr\xFC","Hata");return}let h=this.groupStudents.find(p=>p.id===o);if(!h){this.toastr.error(`\xD6\u011Frenci (ID: ${o}) bu grupta bulunamad\u0131`,"Hata"),console.error("\xD6\u011Frenci bulunamad\u0131:",{studentId:o,grupStudents:this.groupStudents});return}console.log("QR Kod i\u015Flemi ba\u015Flat\u0131l\u0131yor:",{studentId:o,action:s,studentName:h.adi_soyadi}),this.recordClassroomActivity(o,s)}recordClassroomActivity(e,t){let n=this.groupStudents.find(s=>s.id===e);if(!n){this.toastr.error("\xD6\u011Frenci bulunamad\u0131","Hata");return}this.toastr.info(`QR Kod okundu: ${n.adi_soyadi} - ${t==="entry"?"Giri\u015F":"\xC7\u0131k\u0131\u015F"}`,"QR Kod Ba\u015Far\u0131l\u0131");let r=new Date,o={student_id:e,grup:this.selectedGroup,action:t,tarih:r.toISOString().split("T")[0],zaman:r.toISOString()};console.log("Sunucuya g\xF6nderilen veri:",o),this.http.post("./server/api/sinif_giris_cikis.php",o,{headers:this.getAuthHeaders()}).subscribe({next:s=>{if(console.log("Sunucu yan\u0131t\u0131:",s),s.success)if(t==="entry")this.presentStudents.add(e),this.classroomEntries.set(e,{student_id:e,entry_time:r,is_present:!0,qr_method:"entry"}),this.toastr.success(`${n.adi_soyadi} s\u0131n\u0131fa giri\u015F yapt\u0131! (${r.toLocaleTimeString()})`,"Giri\u015F Kaydedildi"),this.speakMessage(`${n.adi_soyadi}, iyi dersler!`),this.openClassroomDoor(n.adi_soyadi);else{this.presentStudents.delete(e);let a=this.classroomEntries.get(e);a&&(a.exit_time=r,a.is_present=!1,a.qr_method="exit"),this.toastr.info(`${n.adi_soyadi} s\u0131n\u0131ftan \xE7\u0131k\u0131\u015F yapt\u0131! (${r.toLocaleTimeString()})`,"\xC7\u0131k\u0131\u015F Kaydedildi"),this.speakMessage(`${n.adi_soyadi}, iyi g\xFCnler!`)}else this.toastr.error("\u0130\u015Flem kaydedilemedi: "+s.message,"Hata"),this.speakMessage("\u0130\u015Flem ba\u015Far\u0131s\u0131z!")},error:s=>{console.error("QR i\u015Flem hatas\u0131:",s);let a=s.error?.error||s.error?.message||s.message||"Bilinmeyen hata";this.toastr.error("QR i\u015Flem hatas\u0131: "+a,"Hata"),this.speakMessage("Ba\u011Flant\u0131 hatas\u0131!")}})}manualToggleStudentPresence(e){let t=this.groupStudents.find(s=>s.id===e);if(!t)return;let r=this.presentStudents.has(e)?"exit":"entry",o=r==="entry"?"giri\u015F":"\xE7\u0131k\u0131\u015F";this.toastr.info(`${t.adi_soyadi} manuel ${o} i\u015Flemi`,"Manuel \u0130\u015Flem"),this.recordClassroomActivity(e,r)}getPresentCount(){return this.presentStudents.size}getAbsentCount(){return this.groupStudents.length-this.presentStudents.size}isStudentPresent(e){return this.presentStudents.has(e)}getStudentEntryTime(e){return this.classroomEntries.get(e)?.entry_time}getStudentExitTime(e){return this.classroomEntries.get(e)?.exit_time}getStudentAvatar(e){return`https://ui-avatars.com/api/?name=${encodeURIComponent(e)}&background=4f46e5&color=fff&size=50&font-size=0.6&rounded=true`}dailyReportData=[];isLoadingReport=!1;exportClassroomReport(){this.loadTableReport()}loadTableReport(){if(!this.selectedGroup||!this.selectedDate){this.toastr.warning("L\xFCtfen grup ve tarih se\xE7iniz","Uyar\u0131");return}this.isLoadingReport=!0,this.dailyReportData=[],[...this.groupStudents].sort((t,n)=>t.adi_soyadi.localeCompare(n.adi_soyadi,"tr",{sensitivity:"base"})).forEach(t=>{let n=this.isStudentPresent(t.id),r=this.classroomEntries.get(t.id),o="-",s="-",a=0;r&&(r.entry_time&&(o=r.entry_time.toLocaleTimeString("tr-TR"),a++),r.exit_time&&(s=r.exit_time.toLocaleTimeString("tr-TR"),a++)),this.dailyReportData.push({student_name:t.adi_soyadi,student_email:t.email,is_present:n,entry_time:o,exit_time:s,movement_count:a,status:n?"S\u0131n\u0131fta":"S\u0131n\u0131fta De\u011Fil"})}),this.isLoadingReport=!1,this.toastr.success("Rapor y\xFCklendi","Ba\u015Far\u0131l\u0131")}getAttendancePercentage(){if(this.dailyReportData.length===0)return 0;let e=this.dailyReportData.filter(t=>t.is_present).length;return Math.round(e/this.dailyReportData.length*100)}exportToPDF(){if(console.log("PDF export ba\u015Flat\u0131ld\u0131..."),console.log("Rapor verileri:",this.dailyReportData),this.dailyReportData.length===0){alert("Rapor verisi bulunamad\u0131!");return}try{console.log("jsPDF olu\u015Fturuluyor...");let e=new _t;e.setFontSize(16),e.text(`G\xFCnl\xFCk Giri\u015F-\xC7\u0131k\u0131\u015F Raporu - ${this.selectedGroup} (${this.selectedDate})`,20,20),e.setFontSize(12),e.text(`Toplam \xD6\u011Frenci: ${this.dailyReportData.length}`,20,35),e.text(`Devam Eden: ${this.dailyReportData.filter(r=>r.is_present).length}`,20,45),e.text(`Devams\u0131zl\u0131k Oran\u0131: %${100-this.getAttendancePercentage()}`,20,55);let t=this.dailyReportData.map((r,o)=>[(o+1).toString(),r.student_name,r.student_email,r.status,r.entry_time,r.exit_time,r.movement_count.toString()]);e.autoTable({head:[["S\u0131ra","\xD6\u011Frenci Ad\u0131","E-posta","Durum","Giri\u015F Saati","\xC7\u0131k\u0131\u015F Saati","Hareket Say\u0131s\u0131"]],body:t,startY:65,styles:{fontSize:8,cellPadding:3},headStyles:{fillColor:[41,128,185],textColor:255,fontStyle:"bold"},alternateRowStyles:{fillColor:[245,245,245]},columnStyles:{0:{halign:"center",cellWidth:15},1:{cellWidth:40},2:{cellWidth:50},3:{halign:"center",cellWidth:25},4:{halign:"center",cellWidth:30},5:{halign:"center",cellWidth:30},6:{halign:"center",cellWidth:20}}});let n=`Gunluk_Rapor_${this.selectedGroup}_${this.selectedDate.replace(/-/g,"_")}.pdf`;e.save(n)}catch(e){console.error("PDF olu\u015Fturma hatas\u0131:",e),alert("PDF olu\u015Fturulurken bir hata olu\u015Ftu!")}}getAuthHeaders(){let e="",t=localStorage.getItem("user")||sessionStorage.getItem("user");return t&&(e=JSON.parse(t).token||""),new xt({Authorization:`Bearer ${e}`,"Content-Type":"application/json"})}processQRData(e){try{let t=e.split("_");if(t.length!==3){console.error("Ge\xE7ersiz QR kod format\u0131:",e);return}let n=parseInt(t[0]),r=t[1],o=parseInt(t[2]);if(!this.groupStudents.find(a=>a.id===n)){console.error("\xD6\u011Frenci bulunamad\u0131:",n);return}this.recordClassroomActivity(n,r)}catch(t){console.error("QR kod i\u015Flenirken hata:",t)}}playVoiceMessage(e){console.log("Sesli mesaj \xE7al\u0131nacak:",e),this.speakMessage(e)}speakMessage(e){if("speechSynthesis"in window){speechSynthesis.cancel();let t=()=>{let r=new SpeechSynthesisUtterance(e);r.lang="tr-TR",r.rate=.9,r.pitch=1,r.volume=1;let o=speechSynthesis.getVoices();console.log("Mevcut sesler:",o.map(a=>`${a.name} (${a.lang})`));let s=o.find(a=>a.lang.toLowerCase().includes("tr")||a.name.toLowerCase().includes("turkish")||a.name.toLowerCase().includes("t\xFCrk"));s?(r.voice=s,console.log("T\xFCrk\xE7e ses bulundu:",s.name)):console.log("T\xFCrk\xE7e ses bulunamad\u0131, varsay\u0131lan ses kullan\u0131l\u0131yor"),r.onstart=()=>console.log("Ses \xE7almaya ba\u015Flad\u0131"),r.onend=()=>console.log("Ses \xE7alma tamamland\u0131"),r.onerror=a=>console.error("Ses hatas\u0131:",a.error),speechSynthesis.speak(r)};speechSynthesis.getVoices().length===0?speechSynthesis.addEventListener("voiceschanged",t,{once:!0}):t()}else console.error("Bu taray\u0131c\u0131 Text-to-Speech desteklemiyor")}cleanupOldQRRecords(){let e=Date.now(),t=5e3;for(let[n,r]of this.recentlyProcessedQR.entries())e-r>t&&this.recentlyProcessedQR.delete(n)}openClassroomDoor(e){let t={action:"open_door",student_name:e,classroom:this.selectedGroup,timestamp:new Date().toISOString()};console.log("Kap\u0131 a\xE7ma komutu g\xF6nderiliyor:",t),this.http.post("./server/api/door_control_usb.php",t,{headers:this.getAuthHeaders()}).subscribe({next:n=>{n.success?(this.toastr.success("Kap\u0131 a\xE7\u0131ld\u0131!","Kap\u0131 Kontrol\xFC"),this.speakMessage("Kap\u0131 a\xE7\u0131ld\u0131, buyurun!"),setTimeout(()=>{this.closeClassroomDoor()},5e3)):this.toastr.error("Kap\u0131 a\xE7\u0131lamad\u0131: "+n.message,"Kap\u0131 Hatas\u0131")},error:n=>{console.error("Kap\u0131 kontrol\xFC hatas\u0131:",n),this.toastr.error("Kap\u0131 kontrol\xFC ba\u015Far\u0131s\u0131z","Ba\u011Flant\u0131 Hatas\u0131")}})}closeClassroomDoor(){let e={action:"close_door",classroom:this.selectedGroup,timestamp:new Date().toISOString()};this.http.post("./server/api/door_control_usb.php",e,{headers:this.getAuthHeaders()}).subscribe({next:t=>{t.success?(this.toastr.success("Kap\u0131 kapat\u0131ld\u0131!","Kap\u0131 Kontrol\xFC"),console.log("Kap\u0131 kapatma yan\u0131t\u0131:",t)):this.toastr.error("Kap\u0131 kapat\u0131lamad\u0131: "+t.message,"Kap\u0131 Hatas\u0131")},error:t=>{console.error("Kap\u0131 kapatma hatas\u0131:",t),this.toastr.error("Kap\u0131 kapatma ba\u015Far\u0131s\u0131z","Ba\u011Flant\u0131 Hatas\u0131")}})}openDoorManually(){if(!this.selectedGroup){this.toastr.warning("\xD6nce bir s\u0131n\u0131f se\xE7in","Uyar\u0131");return}if(confirm(`${this.selectedGroup} s\u0131n\u0131f\u0131n\u0131n kap\u0131s\u0131n\u0131 manuel olarak a\xE7mak istiyor musunuz?`)){let e={action:"open_door",student_name:"Manuel A\xE7ma",classroom:this.selectedGroup,timestamp:new Date().toISOString()};console.log("Manuel kap\u0131 a\xE7ma komutu g\xF6nderiliyor:",e),this.http.post("./server/api/door_control_usb.php",e,{headers:this.getAuthHeaders()}).subscribe({next:t=>{t.success?(this.toastr.success("Kap\u0131 manuel olarak a\xE7\u0131ld\u0131!","Kap\u0131 Kontrol\xFC"),this.speakMessage("Kap\u0131 manuel olarak a\xE7\u0131ld\u0131!"),t.esp_ip&&console.log("ESP8266 IP adresi:",t.esp_ip),setTimeout(()=>{this.closeClassroomDoor()},1e4)):this.toastr.error("Kap\u0131 a\xE7\u0131lamad\u0131: "+t.message,"Kap\u0131 Hatas\u0131")},error:t=>{console.error("Manuel kap\u0131 kontrol\xFC hatas\u0131:",t),this.toastr.error("Manuel kap\u0131 kontrol\xFC ba\u015Far\u0131s\u0131z","Ba\u011Flant\u0131 Hatas\u0131")}})}}static \u0275fac=function(t){return new(t||i)(ke(gt),ke(Bs))};static \u0275cmp=Ke({type:i,selectors:[["app-ogretmen-sinifta-kimler-var-sayfasi"]],viewQuery:function(t,n){if(t&1&&(Gi(Uce,5),Gi(Hce,5)),t&2){let r;Di(r=Fi())&&(n.videoElement=r.first),Di(r=Fi())&&(n.canvasElement=r.first)}},standalone:!1,decls:88,vars:14,consts:[["videoElement",""],["canvasElement",""],[1,"attendance-container"],[1,"modern-page-header"],[1,"header-content"],[1,"header-text"],[1,"modern-page-title"],[1,"bi","bi-people-fill","me-2"],[1,"modern-page-description"],[1,"admin-overview"],[1,"stat-card","mavi"],[1,"stat-icon"],[1,"fas","fa-users"],[1,"stat-content"],[1,"stat-card","yesil"],[1,"bi","bi-check-circle"],[1,"stat-card","turuncu"],[1,"bi","bi-x-circle"],[1,"stat-card","k\u0131rm\u0131z\u0131"],[1,"bi","bi-percent"],[1,"bi","bi-webcam","me-2"],[1,"controls-section"],[1,"control-group"],[1,"control-label"],[1,"form-select",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","date",1,"form-control",3,"ngModelChange","change","ngModel"],[1,"btn","btn-primary",3,"click","disabled"],[1,"bi","bi-qr-code-scan","me-1"],["title","Acil durum i\xE7in manuel kap\u0131 a\xE7ma",1,"btn","btn-warning",3,"click","disabled"],[1,"bi","bi-door-open","me-1"],["class","qr-scanner-section",4,"ngIf"],[1,"bi","bi-card-checklist","me-2"],[1,"admin-grid"],[1,"admin-container","grid-12"],[1,"classroom-tracker-container"],["class","classroom-status-section",4,"ngIf"],["class","no-group-selected",4,"ngIf"],["id","sonucSayfasi","class","admin-container grid-12",4,"ngIf"],[3,"value"],[1,"qr-scanner-section"],[1,"scanner-container"],["autoplay","","playsinline","",1,"scanner-video"],[2,"display","none"],[1,"scanner-overlay"],[1,"scanner-frame"],[1,"scanner-corner","top-left"],[1,"scanner-corner","top-right"],[1,"scanner-corner","bottom-left"],[1,"scanner-corner","bottom-right"],[1,"scanner-text"],[1,"scanner-instructions"],[1,"bi","bi-info-circle","me-1"],[1,"classroom-status-section"],[1,"section-header"],[1,"last-update"],[1,"bi","bi-clock","me-1"],[1,"btn","btn-danger","btn-sm","ms-2",3,"click","disabled"],[1,"students-grid"],["class","student-card",3,"present","absent",4,"ngFor","ngForOf"],["class","no-students",4,"ngIf"],[1,"student-card"],[1,"student-header"],[1,"student-info"],[2,"width","45px","height","45px","border-radius","50%",3,"src"],[1,"student-name"],[1,"presence-indicator"],[1,"status-badge"],[1,"bi"],["class","student-details",4,"ngIf"],[1,"student-actions"],[1,"btn","btn-sm",3,"click"],[1,"student-details"],[1,"time-info"],["class","entry-time",4,"ngIf"],["class","exit-time",4,"ngIf"],[1,"entry-time"],[1,"bi","bi-box-arrow-in-right","text-success","me-1"],[1,"time-label"],[1,"time-value"],[1,"exit-time"],[1,"bi","bi-box-arrow-left","text-danger","me-1"],[1,"no-students"],[1,"bi","bi-people","text-muted","fs-1","mb-3"],[1,"text-muted"],[1,"no-group-selected"],[1,"bi","bi-arrow-up","text-muted","fs-1","mb-3"],["id","sonucSayfasi",1,"admin-container","grid-12"],[1,"card-header","bg-white","border-bottom","d-flex","justify-content-between","align-items-center"],[1,"card-title","mb-0","mt-1",2,"margin","15px 10px 0px 10px"],[1,"btn","btn-outline-primary","btn-sm","me-2",3,"click"],[1,"bi","bi-file-earmark-pdf","me-1"],[1,"badge","bg-light","text-dark"],[1,"card-body","p-0"],[1,"table-responsive"],[1,"table","table-hover","mb-0"],[1,"table-light"],[1,"text-uppercase","small","fw-medium","border-0","px-3"],[1,"text-uppercase","small","fw-medium","border-0"],[1,"text-uppercase","small","fw-medium","border-0","text-center"],["class","border-bottom border-light",4,"ngFor","ngForOf"],["class","text-center p-4",4,"ngIf"],[1,"border-bottom","border-light"],[1,"fw-medium","text-muted","px-3"],[1,"fw-semibold"],[1,"text-muted","small"],[1,"text-center"],[1,"badge","bg-info-subtle","text-info"],[1,"text-center","p-4"],[1,"bi","bi-exclamation-triangle","text-warning","fs-3"],[1,"mb-0"]],template:function(t,n){t&1&&(u(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"h1",6),k(5,"i",7),m(6," \xD6\u011Frenci Yoklama Sistemi "),f(),u(7,"p",8),m(8," \xD6\u011Frencilerinizi gruplar\u0131na g\xF6re devams\u0131zl\u0131k takibi Sistemi "),f()(),u(9,"div",9)(10,"div",10)(11,"div",11),k(12,"i",12),f(),u(13,"div",13)(14,"h3"),m(15),f(),u(16,"p"),m(17,"Toplam \xD6\u011Frenci"),f()()(),u(18,"div",14)(19,"div",11),k(20,"i",15),f(),u(21,"div",13)(22,"h3"),m(23),f(),u(24,"p"),m(25,"S\u0131n\u0131fta Olan"),f()()(),u(26,"div",16)(27,"div",11),k(28,"i",17),f(),u(29,"div",13)(30,"h3"),m(31),f(),u(32,"p"),m(33,"Hen\xFCz Gelmemi\u015F"),f()()(),u(34,"div",18)(35,"div",11),k(36,"i",19),f(),u(37,"div",13)(38,"h3"),m(39),f(),u(40,"p"),m(41,"Kat\u0131l\u0131m Y\xFCzdesi"),f()()()()()()(),u(42,"div",2)(43,"div",3)(44,"div",4)(45,"div",5)(46,"h1",6),k(47,"i",20),m(48," Yoklama Sistemi "),f(),u(49,"p",8),m(50," \xD6\u011Frenciler QR kodlar\u0131n\u0131 Cameraya okutabilirler. "),f()(),u(51,"div",9)(52,"div",21)(53,"div",22)(54,"label",23),m(55,"Grup Se\xE7in:"),f(),u(56,"select",24),at("ngModelChange",function(o){return dt(n.selectedGroup,o)||(n.selectedGroup=o),o}),U("change",function(){return n.onGroupChange()}),u(57,"option",25),m(58,"Grup se\xE7iniz..."),f(),ee(59,Gce,2,2,"option",26),f()(),u(60,"div",22)(61,"label",23),m(62,"Tarih:"),f(),u(63,"input",27),at("ngModelChange",function(o){return dt(n.selectedDate,o)||(n.selectedDate=o),o}),U("change",function(){return n.loadClassroomStatus()}),f()(),u(64,"div",22)(65,"button",28),U("click",function(){return n.toggleQRScanner()}),k(66,"i",29),m(67),f()(),u(68,"div",22)(69,"button",30),U("click",function(){return n.openDoorManually()}),k(70,"i",31),m(71," Kap\u0131y\u0131 A\xE7 "),f()()(),ee(72,$ce,17,0,"div",32),f()()()(),u(73,"div",2)(74,"div",3)(75,"div",4)(76,"div",5)(77,"h1",6),k(78,"i",33),m(79," \xD6\u011Frenci Yoklama Listesi "),f(),u(80,"p",8),m(81,"\xD6\u011Frencilerin Geli\u015F Gidi\u015F Listesi."),f()(),u(82,"div",34)(83,"div",35)(84,"div",36),ee(85,Qce,12,5,"div",37),f(),ee(86,Jce,4,0,"div",38),f(),ee(87,tde,32,5,"div",39),f()()()()),t&2&&(x(15),W(n.groupStudents.length),x(8),W(n.getPresentCount()),x(8),W(n.getAbsentCount()),x(8),he("",n.getAttendancePercentage(),"%"),x(17),st("ngModel",n.selectedGroup),x(3),S("ngForOf",n.groups),x(4),st("ngModel",n.selectedDate),x(2),S("disabled",!n.selectedGroup),x(2),he(" ",n.isQRScannerActive?"QR Taray\u0131c\u0131y\u0131 Kapat":"QR Kod Taray\u0131c\u0131"," "),x(2),S("disabled",!n.selectedGroup),x(3),S("ngIf",n.isQRScannerActive),x(13),S("ngIf",n.selectedGroup&&n.groupStudents.length>0),x(),S("ngIf",!n.selectedGroup),x(),S("ngIf",n.dailyReportData.length>0))},dependencies:[yt,lt,Kn,Yn,rn,qn,fn,Un,cc],styles:['.classroom-tracker-container[_ngcontent-%COMP%]{height:auto}.classroom-tracker-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{background:#fffffff2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:8px;padding:10px;margin-bottom:25px}.classroom-tracker-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]{margin-bottom:25px}.classroom-tracker-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{color:#2d3748;font-size:2.5rem;font-weight:700;margin-bottom:10px}.classroom-tracker-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#667eea}.classroom-tracker-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   .page-description[_ngcontent-%COMP%]{color:#718096;font-size:1.1rem;margin:0}.classroom-tracker-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px}.classroom-tracker-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:20px;display:flex;align-items:center;box-shadow:0 4px 15px #0000001a;transition:transform .3s ease,box-shadow .3s ease}.classroom-tracker-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 8px 25px #00000026}.classroom-tracker-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:15px;display:flex;align-items:center;justify-content:center;margin-right:15px}.classroom-tracker-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem;color:#fff}.classroom-tracker-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon.bg-primary[_ngcontent-%COMP%]{background:linear-gradient(45deg,#667eea,#764ba2)}.classroom-tracker-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon.bg-success[_ngcontent-%COMP%]{background:linear-gradient(45deg,#56ab2f,#a8e6cf)}.classroom-tracker-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon.bg-warning[_ngcontent-%COMP%]{background:linear-gradient(45deg,#f093fb,#f5576c)}.classroom-tracker-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon.bg-info[_ngcontent-%COMP%]{background:linear-gradient(45deg,#4facfe,#00f2fe)}.classroom-tracker-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-number[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#2d3748;line-height:1}.classroom-tracker-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{color:#718096;font-size:.9rem;margin-top:5px}.classroom-tracker-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .pdf-export-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dc3545,#c82333);color:#fff;border:none;border-radius:8px;padding:12px 20px;font-size:14px;font-weight:600;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;gap:8px;justify-content:center;width:100%}.classroom-tracker-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .pdf-export-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#c82333,#a71e2a);transform:translateY(-1px);box-shadow:0 4px 12px #dc35454d}.classroom-tracker-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .pdf-export-btn[_ngcontent-%COMP%]:disabled{background:#6c757d;cursor:not-allowed;opacity:.6}.classroom-tracker-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .pdf-export-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff;font-size:1.2rem;margin:0}.classroom-tracker-container[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]{background:#fffffff2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:15px;padding:25px;margin-bottom:25px;box-shadow:0 4px 15px #0000001a;display:flex;flex-wrap:wrap;gap:20px;align-items:end}.classroom-tracker-container[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]{flex:1;min-width:200px}.classroom-tracker-container[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .control-label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:600;color:#2d3748;font-size:.9rem}.classroom-tracker-container[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%], .classroom-tracker-container[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border:2px solid #e2e8f0;border-radius:10px;padding:12px 15px;font-size:1rem;transition:all .3s ease}.classroom-tracker-container[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]:focus, .classroom-tracker-container[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 3px #667eea1a;outline:none}.classroom-tracker-container[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:12px 20px;border-radius:10px;font-weight:600;text-transform:uppercase;letter-spacing:.5px;transition:all .3s ease;border:none}.classroom-tracker-container[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(45deg,#667eea,#764ba2);color:#fff}.classroom-tracker-container[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 5px 15px #667eea66}.classroom-tracker-container[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]{background:linear-gradient(45deg,#718096,#a0aec0);color:#fff}.classroom-tracker-container[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 5px 15px #71809666}.classroom-tracker-container[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .btn.btn-info[_ngcontent-%COMP%]{background:linear-gradient(45deg,#4facfe,#00f2fe);color:#fff}.classroom-tracker-container[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .btn.btn-info[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 5px 15px #4facfe66}.classroom-tracker-container[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.classroom-tracker-container[_ngcontent-%COMP%]   .qr-scanner-section[_ngcontent-%COMP%]{background:#fffffff2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:15px;padding:30px;margin-bottom:25px;box-shadow:0 4px 15px #0000001a}.classroom-tracker-container[_ngcontent-%COMP%]   .qr-scanner-section[_ngcontent-%COMP%]   .scanner-container[_ngcontent-%COMP%]{position:relative;max-width:500px;margin:0 auto}.classroom-tracker-container[_ngcontent-%COMP%]   .qr-scanner-section[_ngcontent-%COMP%]   .scanner-container[_ngcontent-%COMP%]   .scanner-video[_ngcontent-%COMP%]{width:100%;border-radius:15px;background:#000}.classroom-tracker-container[_ngcontent-%COMP%]   .qr-scanner-section[_ngcontent-%COMP%]   .scanner-container[_ngcontent-%COMP%]   .scanner-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;background:#0000004d;border-radius:15px}.classroom-tracker-container[_ngcontent-%COMP%]   .qr-scanner-section[_ngcontent-%COMP%]   .scanner-container[_ngcontent-%COMP%]   .scanner-overlay[_ngcontent-%COMP%]   .scanner-frame[_ngcontent-%COMP%]{position:relative;width:250px;height:250px;border:2px dashed #667eea;border-radius:15px}.classroom-tracker-container[_ngcontent-%COMP%]   .qr-scanner-section[_ngcontent-%COMP%]   .scanner-container[_ngcontent-%COMP%]   .scanner-overlay[_ngcontent-%COMP%]   .scanner-frame[_ngcontent-%COMP%]   .scanner-corner[_ngcontent-%COMP%]{position:absolute;width:30px;height:30px;border:3px solid #667eea}.classroom-tracker-container[_ngcontent-%COMP%]   .qr-scanner-section[_ngcontent-%COMP%]   .scanner-container[_ngcontent-%COMP%]   .scanner-overlay[_ngcontent-%COMP%]   .scanner-frame[_ngcontent-%COMP%]   .scanner-corner.top-left[_ngcontent-%COMP%]{top:-3px;left:-3px;border-right:none;border-bottom:none;border-radius:15px 0 0}.classroom-tracker-container[_ngcontent-%COMP%]   .qr-scanner-section[_ngcontent-%COMP%]   .scanner-container[_ngcontent-%COMP%]   .scanner-overlay[_ngcontent-%COMP%]   .scanner-frame[_ngcontent-%COMP%]   .scanner-corner.top-right[_ngcontent-%COMP%]{top:-3px;right:-3px;border-left:none;border-bottom:none;border-radius:0 15px 0 0}.classroom-tracker-container[_ngcontent-%COMP%]   .qr-scanner-section[_ngcontent-%COMP%]   .scanner-container[_ngcontent-%COMP%]   .scanner-overlay[_ngcontent-%COMP%]   .scanner-frame[_ngcontent-%COMP%]   .scanner-corner.bottom-left[_ngcontent-%COMP%]{bottom:-3px;left:-3px;border-right:none;border-top:none;border-radius:0 0 0 15px}.classroom-tracker-container[_ngcontent-%COMP%]   .qr-scanner-section[_ngcontent-%COMP%]   .scanner-container[_ngcontent-%COMP%]   .scanner-overlay[_ngcontent-%COMP%]   .scanner-frame[_ngcontent-%COMP%]   .scanner-corner.bottom-right[_ngcontent-%COMP%]{bottom:-3px;right:-3px;border-left:none;border-top:none;border-radius:0 0 15px}.classroom-tracker-container[_ngcontent-%COMP%]   .qr-scanner-section[_ngcontent-%COMP%]   .scanner-container[_ngcontent-%COMP%]   .scanner-overlay[_ngcontent-%COMP%]   .scanner-text[_ngcontent-%COMP%]{color:#fff;font-size:1.2rem;font-weight:600;margin-top:20px;text-align:center;text-shadow:2px 2px 4px rgba(0,0,0,.5)}.classroom-tracker-container[_ngcontent-%COMP%]   .qr-scanner-section[_ngcontent-%COMP%]   .scanner-container[_ngcontent-%COMP%]   .scanner-overlay[_ngcontent-%COMP%]   .scanner-instructions[_ngcontent-%COMP%]{color:#ffffffe6;font-size:.9rem;margin-top:10px;text-align:center;text-shadow:1px 1px 2px rgba(0,0,0,.5)}.classroom-tracker-container[_ngcontent-%COMP%]   .classroom-status-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;align-items:center;margin-bottom:25px;padding:10px 5px;border-bottom:2px solid #e2e8f0}.classroom-tracker-container[_ngcontent-%COMP%]   .classroom-status-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#2d3748;font-size:1.5rem;font-weight:700;margin:0}.classroom-tracker-container[_ngcontent-%COMP%]   .classroom-status-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .last-update[_ngcontent-%COMP%]{color:#718096;font-size:.9rem;display:flex;align-items:center}.classroom-tracker-container[_ngcontent-%COMP%]   .classroom-status-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .last-update[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#667eea}.classroom-tracker-container[_ngcontent-%COMP%]   .classroom-status-section[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]{margin-bottom:25px}.classroom-tracker-container[_ngcontent-%COMP%]   .classroom-status-section[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]{position:relative;max-width:400px}.classroom-tracker-container[_ngcontent-%COMP%]   .classroom-status-section[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:15px;top:50%;transform:translateY(-50%);color:#718096;z-index:1}.classroom-tracker-container[_ngcontent-%COMP%]   .classroom-status-section[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{padding-left:45px;border:2px solid #e2e8f0;border-radius:25px;background:#fff}.classroom-tracker-container[_ngcontent-%COMP%]   .classroom-status-section[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.classroom-tracker-container[_ngcontent-%COMP%]   .classroom-status-section[_ngcontent-%COMP%]   .students-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:20px;padding:10px}.classroom-tracker-container[_ngcontent-%COMP%]   .classroom-status-section[_ngcontent-%COMP%]   .students-grid[_ngcontent-%COMP%]   .student-card[_ngcontent-%COMP%]{border:2px solid #e2e8f0;border-radius:15px;padding:20px;transition:all .3s ease;position:relative;overflow:hidden}.classroom-tracker-container[_ngcontent-%COMP%]   .classroom-status-section[_ngcontent-%COMP%]   .students-grid[_ngcontent-%COMP%]   .student-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,#e2e8f0,#e2e8f0);transition:all .3s ease}.classroom-tracker-container[_ngcontent-%COMP%]   .classroom-status-section[_ngcontent-%COMP%]   .students-grid[_ngcontent-%COMP%]   .student-card.present[_ngcontent-%COMP%]{border-color:#48bb78;box-shadow:0 4px 15px #48bb781a}.classroom-tracker-container[_ngcontent-%COMP%]   .classroom-status-section[_ngcontent-%COMP%]   .students-grid[_ngcontent-%COMP%]   .student-card.present[_ngcontent-%COMP%]:before{background:linear-gradient(90deg,#48bb78,#68d391)}.classroom-tracker-container[_ngcontent-%COMP%]   .classroom-status-section[_ngcontent-%COMP%]   .students-grid[_ngcontent-%COMP%]   .student-card.present[_ngcontent-%COMP%]   .presence-indicator[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{background:linear-gradient(45deg,#48bb78,#68d391);color:#fff}.classroom-tracker-container[_ngcontent-%COMP%]   .classroom-status-section[_ngcontent-%COMP%]   .students-grid[_ngcontent-%COMP%]   .student-card.absent[_ngcontent-%COMP%]{border-color:#f56565;box-shadow:0 4px 15px #f565651a}.classroom-tracker-container[_ngcontent-%COMP%]   .classroom-status-section[_ngcontent-%COMP%]   .students-grid[_ngcontent-%COMP%]   .student-card.absent[_ngcontent-%COMP%]:before{background:linear-gradient(90deg,#f56565,#fc8181)}.classroom-tracker-container[_ngcontent-%COMP%]   .classroom-status-section[_ngcontent-%COMP%]   .students-grid[_ngcontent-%COMP%]   .student-card.absent[_ngcontent-%COMP%]   .presence-indicator[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{background:linear-gradient(45deg,#f56565,#fc8181);color:#fff}.classroom-tracker-container[_ngcontent-%COMP%]   .classroom-status-section[_ngcontent-%COMP%]   .students-grid[_ngcontent-%COMP%]   .student-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 8px 25px #0000001a}.classroom-tracker-container[_ngcontent-%COMP%]   .classroom-status-section[_ngcontent-%COMP%]   .students-grid[_ngcontent-%COMP%]   .student-card[_ngcontent-%COMP%]   .student-header[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:15px}.classroom-tracker-container[_ngcontent-%COMP%]   .classroom-status-section[_ngcontent-%COMP%]   .students-grid[_ngcontent-%COMP%]   .student-card[_ngcontent-%COMP%]   .student-header[_ngcontent-%COMP%]   .student-avatar[_ngcontent-%COMP%]{margin-right:15px}.classroom-tracker-container[_ngcontent-%COMP%]   .classroom-status-section[_ngcontent-%COMP%]   .students-grid[_ngcontent-%COMP%]   .student-card[_ngcontent-%COMP%]   .student-header[_ngcontent-%COMP%]   .student-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;object-fit:cover;border:3px solid #e2e8f0}.classroom-tracker-container[_ngcontent-%COMP%]   .classroom-status-section[_ngcontent-%COMP%]   .students-grid[_ngcontent-%COMP%]   .student-card[_ngcontent-%COMP%]   .student-header[_ngcontent-%COMP%]   .student-info[_ngcontent-%COMP%]{flex:1}.classroom-tracker-container[_ngcontent-%COMP%]   .classroom-status-section[_ngcontent-%COMP%]   .students-grid[_ngcontent-%COMP%]   .student-card[_ngcontent-%COMP%]   .student-header[_ngcontent-%COMP%]   .student-info[_ngcontent-%COMP%]   .student-name[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:#2d3748;margin-bottom:5px}.classroom-tracker-container[_ngcontent-%COMP%]   .classroom-status-section[_ngcontent-%COMP%]   .students-grid[_ngcontent-%COMP%]   .student-card[_ngcontent-%COMP%]   .student-header[_ngcontent-%COMP%]   .student-info[_ngcontent-%COMP%]   .student-meta[_ngcontent-%COMP%]{display:flex;gap:10px}.classroom-tracker-container[_ngcontent-%COMP%]   .classroom-status-section[_ngcontent-%COMP%]   .students-grid[_ngcontent-%COMP%]   .student-card[_ngcontent-%COMP%]   .student-header[_ngcontent-%COMP%]   .student-info[_ngcontent-%COMP%]   .student-meta[_ngcontent-%COMP%]   .student-class[_ngcontent-%COMP%], .classroom-tracker-container[_ngcontent-%COMP%]   .classroom-status-section[_ngcontent-%COMP%]   .students-grid[_ngcontent-%COMP%]   .student-card[_ngcontent-%COMP%]   .student-header[_ngcontent-%COMP%]   .student-info[_ngcontent-%COMP%]   .student-meta[_ngcontent-%COMP%]   .student-email[_ngcontent-%COMP%]{font-size:.8rem;color:#718096;background:#f7fafc;padding:3px 8px;border-radius:10px}.classroom-tracker-container[_ngcontent-%COMP%]   .classroom-status-section[_ngcontent-%COMP%]   .students-grid[_ngcontent-%COMP%]   .student-card[_ngcontent-%COMP%]   .student-header[_ngcontent-%COMP%]   .presence-indicator[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:8px 12px;border-radius:20px;font-size:.8rem;font-weight:600;display:flex;align-items:center;gap:5px;text-transform:uppercase;letter-spacing:.5px}.classroom-tracker-container[_ngcontent-%COMP%]   .classroom-status-section[_ngcontent-%COMP%]   .students-grid[_ngcontent-%COMP%]   .student-card[_ngcontent-%COMP%]   .student-header[_ngcontent-%COMP%]   .presence-indicator[_ngcontent-%COMP%]   .status-badge.online[_ngcontent-%COMP%]{background:linear-gradient(45deg,#48bb78,#68d391);color:#fff}.classroom-tracker-container[_ngcontent-%COMP%]   .classroom-status-section[_ngcontent-%COMP%]   .students-grid[_ngcontent-%COMP%]   .student-card[_ngcontent-%COMP%]   .student-header[_ngcontent-%COMP%]   .presence-indicator[_ngcontent-%COMP%]   .status-badge.offline[_ngcontent-%COMP%]{background:linear-gradient(45deg,#f56565,#fc8181);color:#fff}.classroom-tracker-container[_ngcontent-%COMP%]   .classroom-status-section[_ngcontent-%COMP%]   .students-grid[_ngcontent-%COMP%]   .student-card[_ngcontent-%COMP%]   .student-details[_ngcontent-%COMP%]{margin-bottom:15px}.classroom-tracker-container[_ngcontent-%COMP%]   .classroom-status-section[_ngcontent-%COMP%]   .students-grid[_ngcontent-%COMP%]   .student-card[_ngcontent-%COMP%]   .student-details[_ngcontent-%COMP%]   .time-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.classroom-tracker-container[_ngcontent-%COMP%]   .classroom-status-section[_ngcontent-%COMP%]   .students-grid[_ngcontent-%COMP%]   .student-card[_ngcontent-%COMP%]   .student-details[_ngcontent-%COMP%]   .time-info[_ngcontent-%COMP%]   .entry-time[_ngcontent-%COMP%], .classroom-tracker-container[_ngcontent-%COMP%]   .classroom-status-section[_ngcontent-%COMP%]   .students-grid[_ngcontent-%COMP%]   .student-card[_ngcontent-%COMP%]   .student-details[_ngcontent-%COMP%]   .time-info[_ngcontent-%COMP%]   .exit-time[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 12px;background:#f7fafc;border-radius:10px;font-size:.9rem}.classroom-tracker-container[_ngcontent-%COMP%]   .classroom-status-section[_ngcontent-%COMP%]   .students-grid[_ngcontent-%COMP%]   .student-card[_ngcontent-%COMP%]   .student-details[_ngcontent-%COMP%]   .time-info[_ngcontent-%COMP%]   .entry-time[_ngcontent-%COMP%]   .time-label[_ngcontent-%COMP%], .classroom-tracker-container[_ngcontent-%COMP%]   .classroom-status-section[_ngcontent-%COMP%]   .students-grid[_ngcontent-%COMP%]   .student-card[_ngcontent-%COMP%]   .student-details[_ngcontent-%COMP%]   .time-info[_ngcontent-%COMP%]   .exit-time[_ngcontent-%COMP%]   .time-label[_ngcontent-%COMP%]{font-weight:600;color:#4a5568}.classroom-tracker-container[_ngcontent-%COMP%]   .classroom-status-section[_ngcontent-%COMP%]   .students-grid[_ngcontent-%COMP%]   .student-card[_ngcontent-%COMP%]   .student-details[_ngcontent-%COMP%]   .time-info[_ngcontent-%COMP%]   .entry-time[_ngcontent-%COMP%]   .time-value[_ngcontent-%COMP%], .classroom-tracker-container[_ngcontent-%COMP%]   .classroom-status-section[_ngcontent-%COMP%]   .students-grid[_ngcontent-%COMP%]   .student-card[_ngcontent-%COMP%]   .student-details[_ngcontent-%COMP%]   .time-info[_ngcontent-%COMP%]   .exit-time[_ngcontent-%COMP%]   .time-value[_ngcontent-%COMP%]{color:#2d3748;font-family:Courier New,monospace}.classroom-tracker-container[_ngcontent-%COMP%]   .classroom-status-section[_ngcontent-%COMP%]   .students-grid[_ngcontent-%COMP%]   .student-card[_ngcontent-%COMP%]   .student-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;padding:10px;border-radius:10px;font-weight:600;font-size:.9rem;text-transform:uppercase;letter-spacing:.5px;transition:all .3s ease;border:none}.classroom-tracker-container[_ngcontent-%COMP%]   .classroom-status-section[_ngcontent-%COMP%]   .students-grid[_ngcontent-%COMP%]   .student-card[_ngcontent-%COMP%]   .student-actions[_ngcontent-%COMP%]   .btn.btn-success[_ngcontent-%COMP%]{background:linear-gradient(45deg,#48bb78,#68d391);color:#fff}.classroom-tracker-container[_ngcontent-%COMP%]   .classroom-status-section[_ngcontent-%COMP%]   .students-grid[_ngcontent-%COMP%]   .student-card[_ngcontent-%COMP%]   .student-actions[_ngcontent-%COMP%]   .btn.btn-success[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 5px 15px #48bb7866}.classroom-tracker-container[_ngcontent-%COMP%]   .classroom-status-section[_ngcontent-%COMP%]   .students-grid[_ngcontent-%COMP%]   .student-card[_ngcontent-%COMP%]   .student-actions[_ngcontent-%COMP%]   .btn.btn-danger[_ngcontent-%COMP%]{background:linear-gradient(45deg,#f56565,#fc8181);color:#fff}.classroom-tracker-container[_ngcontent-%COMP%]   .classroom-status-section[_ngcontent-%COMP%]   .students-grid[_ngcontent-%COMP%]   .student-card[_ngcontent-%COMP%]   .student-actions[_ngcontent-%COMP%]   .btn.btn-danger[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 5px 15px #f5656566}.classroom-tracker-container[_ngcontent-%COMP%]   .classroom-status-section[_ngcontent-%COMP%]   .no-results[_ngcontent-%COMP%]{text-align:center;padding:50px 20px;color:#718096}.classroom-tracker-container[_ngcontent-%COMP%]   .classroom-status-section[_ngcontent-%COMP%]   .no-results[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:15px;color:#cbd5e0}.classroom-tracker-container[_ngcontent-%COMP%]   .classroom-status-section[_ngcontent-%COMP%]   .no-results[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;margin:0}.classroom-tracker-container[_ngcontent-%COMP%]   .no-group-selected[_ngcontent-%COMP%]{background:#fffffff2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:15px;padding:60px 30px;text-align:center}.classroom-tracker-container[_ngcontent-%COMP%]   .no-group-selected[_ngcontent-%COMP%]   .no-group-content[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:4rem;color:#cbd5e0;margin-bottom:20px}.classroom-tracker-container[_ngcontent-%COMP%]   .no-group-selected[_ngcontent-%COMP%]   .no-group-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#2d3748;font-size:1.8rem;font-weight:700;margin-bottom:10px}.classroom-tracker-container[_ngcontent-%COMP%]   .no-group-selected[_ngcontent-%COMP%]   .no-group-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#718096;font-size:1.1rem;margin:0}.classroom-tracker-container[_ngcontent-%COMP%]   .loading-section[_ngcontent-%COMP%]{background:#fffffff2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:15px;padding:50px 30px;text-align:center;box-shadow:0 4px 15px #0000001a}.classroom-tracker-container[_ngcontent-%COMP%]   .loading-section[_ngcontent-%COMP%]   .spinner-border[_ngcontent-%COMP%]{width:3rem;height:3rem;margin-bottom:20px}.classroom-tracker-container[_ngcontent-%COMP%]   .loading-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#718096;font-size:1.1rem;margin:0}.header-controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;gap:15px}.test-speech-btn[_ngcontent-%COMP%]{background:linear-gradient(45deg,#4caf50,#45a049);color:#fff;border:none;padding:8px 15px;border-radius:6px;cursor:pointer;font-size:14px;transition:all .3s ease}.test-speech-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(45deg,#45a049,#4caf50);transform:translateY(-1px)}.test-speech-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}@media (max-width: 768px){.classroom-tracker-container[_ngcontent-%COMP%]{padding:5px}.classroom-tracker-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.classroom-tracker-container[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]{flex-direction:column}.classroom-tracker-container[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]{min-width:auto}.classroom-tracker-container[_ngcontent-%COMP%]   .classroom-status-section[_ngcontent-%COMP%]   .students-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.classroom-tracker-container[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{flex-direction:column;gap:10px;text-align:center}}@media (max-width: 480px){.classroom-tracker-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]{grid-template-columns:1fr}.classroom-tracker-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:2rem}}.page-description[_ngcontent-%COMP%]{color:var(--text-secondary);margin-bottom:2rem}.page-description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:500;margin-bottom:.5rem}.page-description[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.4}.stat-card[_ngcontent-%COMP%]{position:relative;overflow:hidden;transition:all .3s ease}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #0000001a!important}.stat-card.bg-gradient[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff,#f8f9fa)}.stat-card[_ngcontent-%COMP%]   .stat-trend[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem;opacity:.6}.card[_ngcontent-%COMP%]{transition:all .3s ease}.card[_ngcontent-%COMP%]:hover{transform:translateY(-1px)}.card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;font-size:.75rem;letter-spacing:.5px;padding:1rem .75rem}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem .75rem;vertical-align:middle}.table[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{font-size:.75rem;padding:.5rem .75rem;font-weight:500}.table[_ngcontent-%COMP%]   .badge.bg-success-subtle[_ngcontent-%COMP%]{background-color:#1987541a!important;border:1px solid rgba(25,135,84,.2)}.table[_ngcontent-%COMP%]   .badge.bg-secondary-subtle[_ngcontent-%COMP%]{background-color:#6c757d1a!important;border:1px solid rgba(108,117,125,.2)}.btn-outline-primary[_ngcontent-%COMP%]{border-width:1.5px;font-weight:500}.btn-outline-primary[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #4f46e54d}']})};var gD=yh(fD());var gj=yh(aM());var Yde=["entryQRCanvas"],Xde=["exitQRCanvas"];function Qde(i,e){if(i&1){let t=Ae();u(0,"div",16),k(1,"i",17),m(2),u(3,"button",18),U("click",function(){K(t);let r=F();return Y(r.regenerateQRCodes())}),m(4," Tekrar Dene "),f()()}if(i&2){let t=F();x(2),he(" ",t.loadError," ")}}function Jde(i,e){if(i&1&&(u(0,"div",19)(1,"div",20)(2,"h3"),m(3,"Giri\u015F QR Kodu"),f(),k(4,"canvas",null,0),u(6,"p",21),m(7),f()(),u(8,"div",22)(9,"h3"),m(10,"\xC7\u0131k\u0131\u015F QR Kodu"),f(),k(11,"canvas",null,1),u(13,"p",21),m(14),f()()()),i&2){let t=F();x(7),W(t.entryQRData),x(7),W(t.exitQRData)}}function Zde(i,e){if(i&1){let t=Ae();u(0,"button",23),U("click",function(){K(t);let r=F();return Y(r.printQRCodes())}),k(1,"i",24),m(2," Yazd\u0131r "),f()}}function eue(i,e){if(i&1){let t=Ae();u(0,"button",25),U("click",function(){K(t);let r=F();return Y(r.downloadAsPDF())}),k(1,"i",26),m(2," PDF \u0130ndir "),f()}}var j2=class i{entryQRCanvas;exitQRCanvas;studentData={id:36,name:"Elif Elif",email:"elish263624@gmail.com"};currentDate="";entryQRData="";exitQRData="";isLibraryLoaded=!1;loadError="";constructor(){}ngOnInit(){this.updateDateTime(),setInterval(()=>this.updateDateTime(),1e3)}ngAfterViewInit(){this.isLibraryLoaded=!0,this.generateQRCodes()}updateDateTime(){let e=new Date;this.currentDate=e.toLocaleDateString("tr-TR")+" "+e.toLocaleTimeString("tr-TR")}generateQRData(e){let t=Date.now();return`${this.studentData.id}_${e}_${t}`}generateQRCodes(){if(!this.isLibraryLoaded){console.error("QRCode k\xFCt\xFCphanesi hen\xFCz y\xFCklenmedi");return}try{this.entryQRData=this.generateQRData("entry"),this.exitQRData=this.generateQRData("exit"),gD.toCanvas(this.entryQRCanvas.nativeElement,this.entryQRData,{width:200,margin:2,color:{dark:"#28a745",light:"#FFFFFF"}}).then(()=>{console.log("Giri\u015F QR kodu ba\u015Far\u0131yla olu\u015Fturuldu")}).catch(e=>{console.error("Giri\u015F QR kodu olu\u015Fturulamad\u0131:",e),this.loadError="Giri\u015F QR kodu olu\u015Fturulamad\u0131"}),gD.toCanvas(this.exitQRCanvas.nativeElement,this.exitQRData,{width:200,margin:2,color:{dark:"#dc3545",light:"#FFFFFF"}}).then(()=>{console.log("\xC7\u0131k\u0131\u015F QR kodu ba\u015Far\u0131yla olu\u015Fturuldu")}).catch(e=>{console.error("\xC7\u0131k\u0131\u015F QR kodu olu\u015Fturulamad\u0131:",e),this.loadError="\xC7\u0131k\u0131\u015F QR kodu olu\u015Fturulamad\u0131"})}catch(e){console.error("QR kod olu\u015Fturma hatas\u0131:",e),this.loadError="QR kodlar\u0131 olu\u015Fturulamad\u0131: "+e}}printQRCodes(){window.print()}regenerateQRCodes(){this.loadError="",this.generateQRCodes()}downloadAsPDF(){return Ge(this,null,function*(){try{let e=document.querySelector(".qr-generator-container");if(!e){console.error("QR Generator container bulunamad\u0131");return}let t=yield(0,gj.default)(e,{scale:2,useCORS:!0,allowTaint:!0}),n=new _t("p","mm","a4"),r=t.toDataURL("image/png"),o=210,s=295,a=t.height*o/t.width,l=a,c=0;for(n.addImage(r,"PNG",0,c,o,a),l-=s;l>=0;)c=l-a,n.addPage(),n.addImage(r,"PNG",0,c,o,a),l-=s;let d=`QR_Kodlari_${this.studentData.name.replace(/\s+/g,"_")}_${new Date().toISOString().split("T")[0]}.pdf`;n.save(d)}catch(e){console.error("PDF olu\u015Fturma hatas\u0131:",e),this.loadError="PDF olu\u015Fturulamad\u0131: "+e}})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=Ke({type:i,selectors:[["app-ogretmen-qr-generator"]],viewQuery:function(t,n){if(t&1&&(Gi(Yde,5),Gi(Xde,5)),t&2){let r;Di(r=Fi())&&(n.entryQRCanvas=r.first),Di(r=Fi())&&(n.exitQRCanvas=r.first)}},standalone:!1,decls:31,vars:8,consts:[["entryQRCanvas",""],["exitQRCanvas",""],[1,"qr-generator-container"],[1,"header"],[1,"student-stats"],[1,"stat-item"],[1,"bi","bi-person-circle"],[1,"bi","bi-people-fill"],[1,"bi","bi-clock"],["class","alert alert-danger",4,"ngIf"],["class","qr-codes-section",4,"ngIf"],[1,"controls"],[1,"btn","btn-primary",3,"click"],[1,"bi","bi-arrow-clockwise"],["class","btn btn-success",3,"click",4,"ngIf"],["class","btn btn-danger",3,"click",4,"ngIf"],[1,"alert","alert-danger"],[1,"bi","bi-exclamation-triangle"],[1,"btn","btn-sm","btn-outline-danger","ms-2",3,"click"],[1,"qr-codes-section"],[1,"qr-code-card","entry-card"],[1,"qr-data"],[1,"qr-code-card","exit-card"],[1,"btn","btn-success",3,"click"],[1,"bi","bi-printer"],[1,"btn","btn-danger",3,"click"],[1,"bi","bi-file-earmark-pdf"]],template:function(t,n){t&1&&(u(0,"div",2)(1,"div",3)(2,"h2"),m(3,"QR Kod Generator"),f(),u(4,"div",4)(5,"div",5),k(6,"i",6),u(7,"span")(8,"strong"),m(9,"\xD6\u011Frenci:"),f(),m(10),f()(),u(11,"div",5),k(12,"i",7),u(13,"span")(14,"strong"),m(15,"\xD6\u011Frenci ID:"),f(),m(16),f()(),u(17,"div",5),k(18,"i",8),u(19,"span")(20,"strong"),m(21,"Olu\u015Fturulma:"),f(),m(22),f()()()(),ee(23,Qde,5,1,"div",9)(24,Jde,15,2,"div",10),u(25,"div",11)(26,"button",12),U("click",function(){return n.regenerateQRCodes()}),k(27,"i",13),m(28," Yenile "),f(),ee(29,Zde,3,0,"button",14)(30,eue,3,0,"button",15),f()()),t&2&&(x(10),hn(" ",n.studentData.name," (",n.studentData.email,")"),x(6),he(" ",n.studentData.id,""),x(6),he(" ",n.currentDate,""),x(),S("ngIf",n.loadError),x(),S("ngIf",!n.loadError),x(5),S("ngIf",!n.loadError),x(),S("ngIf",!n.loadError))},dependencies:[lt],styles:[".qr-generator-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:20px;font-family:Arial,sans-serif}.header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;margin-bottom:10px}.header[_ngcontent-%COMP%]   .student-info[_ngcontent-%COMP%]{font-size:18px;color:#666;margin-bottom:10px}.header[_ngcontent-%COMP%]   .current-time[_ngcontent-%COMP%]{font-size:14px;color:#888}.alert[_ngcontent-%COMP%]{padding:15px;border-radius:8px;margin-bottom:20px;display:flex;align-items:center}.alert.alert-danger[_ngcontent-%COMP%]{background-color:#f8d7da;border:1px solid #f5c6cb;color:#721c24}.alert[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:10px}.qr-codes-section[_ngcontent-%COMP%]{display:flex;gap:30px;justify-content:center;margin-bottom:30px;flex-wrap:wrap}.qr-code-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;box-shadow:0 4px 6px #0000001a;text-align:center;min-width:280px}.qr-code-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:15px;font-size:18px}.qr-code-card[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{display:block;margin:0 auto 15px;border:2px solid #eee;border-radius:8px}.qr-code-card[_ngcontent-%COMP%]   .qr-data[_ngcontent-%COMP%]{font-family:monospace;font-size:12px;color:#666;word-break:break-all;background:#f8f9fa;padding:8px;border-radius:4px}.qr-code-card.entry-card[_ngcontent-%COMP%]{border-top:4px solid #28a745}.qr-code-card.entry-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#28a745}.qr-code-card.exit-card[_ngcontent-%COMP%]{border-top:4px solid #dc3545}.qr-code-card.exit-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#dc3545}.controls[_ngcontent-%COMP%]{text-align:center;gap:15px;display:flex;justify-content:center;flex-wrap:wrap}.controls[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:6px;cursor:pointer;font-size:14px;display:inline-flex;align-items:center;text-decoration:none}.controls[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px}.controls[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.controls[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3}.controls[_ngcontent-%COMP%]   .btn.btn-success[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.controls[_ngcontent-%COMP%]   .btn.btn-success[_ngcontent-%COMP%]:hover{background-color:#1e7e34}.controls[_ngcontent-%COMP%]   .btn.btn-outline-danger[_ngcontent-%COMP%]{background-color:transparent;color:#dc3545;border:1px solid #dc3545}.controls[_ngcontent-%COMP%]   .btn.btn-outline-danger[_ngcontent-%COMP%]:hover{background-color:#dc3545;color:#fff}@media (max-width: 768px){.qr-codes-section[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.qr-code-card[_ngcontent-%COMP%]{min-width:250px}}@media print{.controls[_ngcontent-%COMP%]{display:none}.header[_ngcontent-%COMP%]   .current-time[_ngcontent-%COMP%]{display:block}.qr-generator-container[_ngcontent-%COMP%]{margin:0;padding:10px}}.qr-generator-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:20px}.header[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.student-stats[_ngcontent-%COMP%]{background:#f8f9fa;padding:20px;border-radius:10px;margin:20px 0;border-left:4px solid #4f46e5}.stat-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin:8px 0;font-size:1.1em;color:#666}.stat-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:10px;color:#4f46e5;font-size:1.2em}"]})};function Hx(i){return i+.5|0}var Gd=(i,e,t)=>Math.max(Math.min(i,t),e);function Vx(i){return Gd(Hx(i*2.55),0,255)}function $d(i){return Gd(Hx(i*255),0,255)}function Ac(i){return Gd(Hx(i/2.55)/100,0,1)}function pj(i){return Gd(Hx(i*100),0,100)}var Hs={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},mD=[..."0123456789ABCDEF"],tue=i=>mD[i&15],nue=i=>mD[(i&240)>>4]+mD[i&15],V2=i=>(i&240)>>4===(i&15),iue=i=>V2(i.r)&&V2(i.g)&&V2(i.b)&&V2(i.a);function rue(i){var e=i.length,t;return i[0]==="#"&&(e===4||e===5?t={r:255&Hs[i[1]]*17,g:255&Hs[i[2]]*17,b:255&Hs[i[3]]*17,a:e===5?Hs[i[4]]*17:255}:(e===7||e===9)&&(t={r:Hs[i[1]]<<4|Hs[i[2]],g:Hs[i[3]]<<4|Hs[i[4]],b:Hs[i[5]]<<4|Hs[i[6]],a:e===9?Hs[i[7]]<<4|Hs[i[8]]:255})),t}var oue=(i,e)=>i<255?e(i):"";function sue(i){var e=iue(i)?tue:nue;return i?"#"+e(i.r)+e(i.g)+e(i.b)+oue(i.a,e):void 0}var aue=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function vj(i,e,t){let n=e*Math.min(t,1-t),r=(o,s=(o+i/30)%12)=>t-n*Math.max(Math.min(s-3,9-s,1),-1);return[r(0),r(8),r(4)]}function lue(i,e,t){let n=(r,o=(r+i/60)%6)=>t-t*e*Math.max(Math.min(o,4-o,1),0);return[n(5),n(3),n(1)]}function cue(i,e,t){let n=vj(i,1,.5),r;for(e+t>1&&(r=1/(e+t),e*=r,t*=r),r=0;r<3;r++)n[r]*=1-e-t,n[r]+=e;return n}function due(i,e,t,n,r){return i===r?(e-t)/n+(e<t?6:0):e===r?(t-i)/n+2:(i-e)/n+4}function xD(i){let t=i.r/255,n=i.g/255,r=i.b/255,o=Math.max(t,n,r),s=Math.min(t,n,r),a=(o+s)/2,l,c,d;return o!==s&&(d=o-s,c=a>.5?d/(2-o-s):d/(o+s),l=due(t,n,r,d,o),l=l*60+.5),[l|0,c||0,a]}function _D(i,e,t,n){return(Array.isArray(e)?i(e[0],e[1],e[2]):i(e,t,n)).map($d)}function vD(i,e,t){return _D(vj,i,e,t)}function uue(i,e,t){return _D(cue,i,e,t)}function hue(i,e,t){return _D(lue,i,e,t)}function bj(i){return(i%360+360)%360}function fue(i){let e=aue.exec(i),t=255,n;if(!e)return;e[5]!==n&&(t=e[6]?Vx(+e[5]):$d(+e[5]));let r=bj(+e[2]),o=+e[3]/100,s=+e[4]/100;return e[1]==="hwb"?n=uue(r,o,s):e[1]==="hsv"?n=hue(r,o,s):n=vD(r,o,s),{r:n[0],g:n[1],b:n[2],a:t}}function gue(i,e){var t=xD(i);t[0]=bj(t[0]+e),t=vD(t),i.r=t[0],i.g=t[1],i.b=t[2]}function pue(i){if(!i)return;let e=xD(i),t=e[0],n=pj(e[1]),r=pj(e[2]);return i.a<255?`hsla(${t}, ${n}%, ${r}%, ${Ac(i.a)})`:`hsl(${t}, ${n}%, ${r}%)`}var mj={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},xj={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function mue(){let i={},e=Object.keys(xj),t=Object.keys(mj),n,r,o,s,a;for(n=0;n<e.length;n++){for(s=a=e[n],r=0;r<t.length;r++)o=t[r],a=a.replace(o,mj[o]);o=parseInt(xj[s],16),i[a]=[o>>16&255,o>>8&255,o&255]}return i}var U2;function xue(i){U2||(U2=mue(),U2.transparent=[0,0,0,0]);let e=U2[i.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}var _ue=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function vue(i){let e=_ue.exec(i),t=255,n,r,o;if(e){if(e[7]!==n){let s=+e[7];t=e[8]?Vx(s):Gd(s*255,0,255)}return n=+e[1],r=+e[3],o=+e[5],n=255&(e[2]?Vx(n):Gd(n,0,255)),r=255&(e[4]?Vx(r):Gd(r,0,255)),o=255&(e[6]?Vx(o):Gd(o,0,255)),{r:n,g:r,b:o,a:t}}}function bue(i){return i&&(i.a<255?`rgba(${i.r}, ${i.g}, ${i.b}, ${Ac(i.a)})`:`rgb(${i.r}, ${i.g}, ${i.b})`)}var pD=i=>i<=.0031308?i*12.92:Math.pow(i,1/2.4)*1.055-.055,gg=i=>i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4);function Cue(i,e,t){let n=gg(Ac(i.r)),r=gg(Ac(i.g)),o=gg(Ac(i.b));return{r:$d(pD(n+t*(gg(Ac(e.r))-n))),g:$d(pD(r+t*(gg(Ac(e.g))-r))),b:$d(pD(o+t*(gg(Ac(e.b))-o))),a:i.a+t*(e.a-i.a)}}function H2(i,e,t){if(i){let n=xD(i);n[e]=Math.max(0,Math.min(n[e]+n[e]*t,e===0?360:1)),n=vD(n),i.r=n[0],i.g=n[1],i.b=n[2]}}function Cj(i,e){return i&&Object.assign(e||{},i)}function _j(i){var e={r:0,g:0,b:0,a:255};return Array.isArray(i)?i.length>=3&&(e={r:i[0],g:i[1],b:i[2],a:255},i.length>3&&(e.a=$d(i[3]))):(e=Cj(i,{r:0,g:0,b:0,a:1}),e.a=$d(e.a)),e}function yue(i){return i.charAt(0)==="r"?vue(i):fue(i)}var Ux=class i{constructor(e){if(e instanceof i)return e;let t=typeof e,n;t==="object"?n=_j(e):t==="string"&&(n=rue(e)||xue(e)||yue(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=Cj(this._rgb);return e&&(e.a=Ac(e.a)),e}set rgb(e){this._rgb=_j(e)}rgbString(){return this._valid?bue(this._rgb):void 0}hexString(){return this._valid?sue(this._rgb):void 0}hslString(){return this._valid?pue(this._rgb):void 0}mix(e,t){if(e){let n=this.rgb,r=e.rgb,o,s=t===o?.5:t,a=2*s-1,l=n.a-r.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;o=1-c,n.r=255&c*n.r+o*r.r+.5,n.g=255&c*n.g+o*r.g+.5,n.b=255&c*n.b+o*r.b+.5,n.a=s*n.a+(1-s)*r.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=Cue(this._rgb,e._rgb,t)),this}clone(){return new i(this.rgb)}alpha(e){return this._rgb.a=$d(e),this}clearer(e){let t=this._rgb;return t.a*=1-e,this}greyscale(){let e=this._rgb,t=Hx(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){let t=this._rgb;return t.a*=1+e,this}negate(){let e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return H2(this._rgb,2,e),this}darken(e){return H2(this._rgb,2,-e),this}saturate(e){return H2(this._rgb,1,e),this}desaturate(e){return H2(this._rgb,1,-e),this}rotate(e){return gue(this._rgb,e),this}};function Al(){}var Fj=(()=>{let i=0;return()=>i++})();function on(i){return i==null}function ui(i){if(Array.isArray&&Array.isArray(i))return!0;let e=Object.prototype.toString.call(i);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function ln(i){return i!==null&&Object.prototype.toString.call(i)==="[object Object]"}function Pi(i){return(typeof i=="number"||i instanceof Number)&&isFinite(+i)}function Go(i,e){return Pi(i)?i:e}function Bt(i,e){return typeof i>"u"?e:i}var Ij=(i,e)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100:+i/e,wD=(i,e)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100*e:+i;function ni(i,e,t){if(i&&typeof i.call=="function")return i.apply(t,e)}function Rn(i,e,t,n){let r,o,s;if(ui(i))if(o=i.length,n)for(r=o-1;r>=0;r--)e.call(t,i[r],r);else for(r=0;r<o;r++)e.call(t,i[r],r);else if(ln(i))for(s=Object.keys(i),o=s.length,r=0;r<o;r++)e.call(t,i[s[r]],s[r])}function Wx(i,e){let t,n,r,o;if(!i||!e||i.length!==e.length)return!1;for(t=0,n=i.length;t<n;++t)if(r=i[t],o=e[t],r.datasetIndex!==o.datasetIndex||r.index!==o.index)return!1;return!0}function K2(i){if(ui(i))return i.map(K2);if(ln(i)){let e=Object.create(null),t=Object.keys(i),n=t.length,r=0;for(;r<n;++r)e[t[r]]=K2(i[t[r]]);return e}return i}function Tj(i){return["__proto__","prototype","constructor"].indexOf(i)===-1}function wue(i,e,t,n){if(!Tj(i))return;let r=e[i],o=t[i];ln(r)&&ln(o)?mg(r,o,n):e[i]=K2(o)}function mg(i,e,t){let n=ui(e)?e:[e],r=n.length;if(!ln(i))return i;t=t||{};let o=t.merger||wue,s;for(let a=0;a<r;++a){if(s=n[a],!ln(s))continue;let l=Object.keys(s);for(let c=0,d=l.length;c<d;++c)o(l[c],i,s,t)}return i}function _g(i,e){return mg(i,e,{merger:Mue})}function Mue(i,e,t){if(!Tj(i))return;let n=e[i],r=t[i];ln(n)&&ln(r)?_g(n,r):Object.prototype.hasOwnProperty.call(e,i)||(e[i]=K2(r))}var yj={"":i=>i,x:i=>i.x,y:i=>i.y};function Eue(i){let e=i.split("."),t=[],n="";for(let r of e)n+=r,n.endsWith("\\")?n=n.slice(0,-1)+".":(t.push(n),n="");return t}function Pue(i){let e=Eue(i);return t=>{for(let n of e){if(n==="")break;t=t&&t[n]}return t}}function Ic(i,e){return(yj[e]||(yj[e]=Pue(e)))(i)}function J2(i){return i.charAt(0).toUpperCase()+i.slice(1)}var vg=i=>typeof i<"u",Dc=i=>typeof i=="function",MD=(i,e)=>{if(i.size!==e.size)return!1;for(let t of i)if(!e.has(t))return!1;return!0};function Bj(i){return i.type==="mouseup"||i.type==="click"||i.type==="contextmenu"}var Mn=Math.PI,hi=2*Mn,Oue=hi+Mn,Y2=Number.POSITIVE_INFINITY,Sue=Mn/180,Li=Mn/2,B0=Mn/4,wj=Mn*2/3,Fc=Math.log10,Ta=Math.sign;function bg(i,e,t){return Math.abs(i-e)<t}function ED(i){let e=Math.round(i);i=bg(i,e,i/1e3)?e:i;let t=Math.pow(10,Math.floor(Fc(i))),n=i/t;return(n<=1?1:n<=2?2:n<=5?5:10)*t}function Nj(i){let e=[],t=Math.sqrt(i),n;for(n=1;n<t;n++)i%n===0&&(e.push(n),e.push(i/n));return t===(t|0)&&e.push(t),e.sort((r,o)=>r-o).pop(),e}function kue(i){return typeof i=="symbol"||typeof i=="object"&&i!==null&&!(Symbol.toPrimitive in i||"toString"in i||"valueOf"in i)}function R0(i){return!kue(i)&&!isNaN(parseFloat(i))&&isFinite(i)}function Lj(i,e){let t=Math.round(i);return t-e<=i&&t+e>=i}function PD(i,e,t){let n,r,o;for(n=0,r=i.length;n<r;n++)o=i[n][t],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function Gs(i){return i*(Mn/180)}function Z2(i){return i*(180/Mn)}function OD(i){if(!Pi(i))return;let e=1,t=0;for(;Math.round(i*e)/e!==i;)e*=10,t++;return t}function SD(i,e){let t=e.x-i.x,n=e.y-i.y,r=Math.sqrt(t*t+n*n),o=Math.atan2(n,t);return o<-.5*Mn&&(o+=hi),{angle:o,distance:r}}function X2(i,e){return Math.sqrt(Math.pow(e.x-i.x,2)+Math.pow(e.y-i.y,2))}function Aue(i,e){return(i-e+Oue)%hi-Mn}function Ir(i){return(i%hi+hi)%hi}function Cg(i,e,t,n){let r=Ir(i),o=Ir(e),s=Ir(t),a=Ir(o-r),l=Ir(s-r),c=Ir(r-o),d=Ir(r-s);return r===o||r===s||n&&o===s||a>l&&c<d}function br(i,e,t){return Math.max(e,Math.min(t,i))}function Rj(i){return br(i,-32768,32767)}function Dl(i,e,t,n=1e-6){return i>=Math.min(e,t)-n&&i<=Math.max(e,t)+n}function e5(i,e,t){t=t||(s=>i[s]<e);let n=i.length-1,r=0,o;for(;n-r>1;)o=r+n>>1,t(o)?r=o:n=o;return{lo:r,hi:n}}var Sl=(i,e,t,n)=>e5(i,t,n?r=>{let o=i[r][e];return o<t||o===t&&i[r+1][e]===t}:r=>i[r][e]<t),zj=(i,e,t)=>e5(i,t,n=>i[n][e]>=t);function jj(i,e,t){let n=0,r=i.length;for(;n<r&&i[n]<e;)n++;for(;r>n&&i[r-1]>t;)r--;return n>0||r<i.length?i.slice(n,r):i}var Vj=["push","pop","shift","splice","unshift"];function Uj(i,e){if(i._chartjs){i._chartjs.listeners.push(e);return}Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Vj.forEach(t=>{let n="_onData"+J2(t),r=i[t];Object.defineProperty(i,t,{configurable:!0,enumerable:!1,value(...o){let s=r.apply(this,o);return i._chartjs.listeners.forEach(a=>{typeof a[n]=="function"&&a[n](...o)}),s}})})}function kD(i,e){let t=i._chartjs;if(!t)return;let n=t.listeners,r=n.indexOf(e);r!==-1&&n.splice(r,1),!(n.length>0)&&(Vj.forEach(o=>{delete i[o]}),delete i._chartjs)}function AD(i){let e=new Set(i);return e.size===i.length?i:Array.from(e)}var DD=function(){return typeof window>"u"?function(i){return i()}:window.requestAnimationFrame}();function FD(i,e){let t=[],n=!1;return function(...r){t=r,n||(n=!0,DD.call(window,()=>{n=!1,i.apply(e,t)}))}}function Hj(i,e){let t;return function(...n){return e?(clearTimeout(t),t=setTimeout(i,e,n)):i.apply(this,n),e}}var t5=i=>i==="start"?"left":i==="end"?"right":"center",Tr=(i,e,t)=>i==="start"?e:i==="end"?t:(e+t)/2,Gj=(i,e,t,n)=>i===(n?"left":"right")?t:i==="center"?(e+t)/2:e;function ID(i,e,t){let n=e.length,r=0,o=n;if(i._sorted){let{iScale:s,vScale:a,_parsed:l}=i,c=i.dataset&&i.dataset.options?i.dataset.options.spanGaps:null,d=s.axis,{min:h,max:p,minDefined:g,maxDefined:_}=s.getUserBounds();if(g){if(r=Math.min(Sl(l,d,h).lo,t?n:Sl(e,d,s.getPixelForValue(h)).lo),c){let b=l.slice(0,r+1).reverse().findIndex(C=>!on(C[a.axis]));r-=Math.max(0,b)}r=br(r,0,n-1)}if(_){let b=Math.max(Sl(l,s.axis,p,!0).hi+1,t?0:Sl(e,d,s.getPixelForValue(p),!0).hi+1);if(c){let C=l.slice(b-1).findIndex(y=>!on(y[a.axis]));b+=Math.max(0,C)}o=br(b,r,n)-r}else o=n-r}return{start:r,count:o}}function TD(i){let{xScale:e,yScale:t,_scaleRanges:n}=i,r={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!n)return i._scaleRanges=r,!0;let o=n.xmin!==e.min||n.xmax!==e.max||n.ymin!==t.min||n.ymax!==t.max;return Object.assign(n,r),o}var G2=i=>i===0||i===1,Mj=(i,e,t)=>-(Math.pow(2,10*(i-=1))*Math.sin((i-e)*hi/t)),Ej=(i,e,t)=>Math.pow(2,-10*i)*Math.sin((i-e)*hi/t)+1,pg={linear:i=>i,easeInQuad:i=>i*i,easeOutQuad:i=>-i*(i-2),easeInOutQuad:i=>(i/=.5)<1?.5*i*i:-.5*(--i*(i-2)-1),easeInCubic:i=>i*i*i,easeOutCubic:i=>(i-=1)*i*i+1,easeInOutCubic:i=>(i/=.5)<1?.5*i*i*i:.5*((i-=2)*i*i+2),easeInQuart:i=>i*i*i*i,easeOutQuart:i=>-((i-=1)*i*i*i-1),easeInOutQuart:i=>(i/=.5)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2),easeInQuint:i=>i*i*i*i*i,easeOutQuint:i=>(i-=1)*i*i*i*i+1,easeInOutQuint:i=>(i/=.5)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2),easeInSine:i=>-Math.cos(i*Li)+1,easeOutSine:i=>Math.sin(i*Li),easeInOutSine:i=>-.5*(Math.cos(Mn*i)-1),easeInExpo:i=>i===0?0:Math.pow(2,10*(i-1)),easeOutExpo:i=>i===1?1:-Math.pow(2,-10*i)+1,easeInOutExpo:i=>G2(i)?i:i<.5?.5*Math.pow(2,10*(i*2-1)):.5*(-Math.pow(2,-10*(i*2-1))+2),easeInCirc:i=>i>=1?i:-(Math.sqrt(1-i*i)-1),easeOutCirc:i=>Math.sqrt(1-(i-=1)*i),easeInOutCirc:i=>(i/=.5)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1),easeInElastic:i=>G2(i)?i:Mj(i,.075,.3),easeOutElastic:i=>G2(i)?i:Ej(i,.075,.3),easeInOutElastic(i){return G2(i)?i:i<.5?.5*Mj(i*2,.1125,.45):.5+.5*Ej(i*2-1,.1125,.45)},easeInBack(i){return i*i*((1.70158+1)*i-1.70158)},easeOutBack(i){return(i-=1)*i*((1.70158+1)*i+1.70158)+1},easeInOutBack(i){let e=1.70158;return(i/=.5)<1?.5*(i*i*(((e*=1.525)+1)*i-e)):.5*((i-=2)*i*(((e*=1.525)+1)*i+e)+2)},easeInBounce:i=>1-pg.easeOutBounce(1-i),easeOutBounce(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375},easeInOutBounce:i=>i<.5?pg.easeInBounce(i*2)*.5:pg.easeOutBounce(i*2-1)*.5+.5};function BD(i){if(i&&typeof i=="object"){let e=i.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function ND(i){return BD(i)?i:new Ux(i)}function bD(i){return BD(i)?i:new Ux(i).saturate(.5).darken(.1).hexString()}var Due=["x","y","borderWidth","radius","tension"],Fue=["color","borderColor","backgroundColor"];function Iue(i){i.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),i.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),i.set("animations",{colors:{type:"color",properties:Fue},numbers:{type:"number",properties:Due}}),i.describe("animations",{_fallback:"animation"}),i.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function Tue(i){i.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}var Pj=new Map;function Bue(i,e){e=e||{};let t=i+JSON.stringify(e),n=Pj.get(t);return n||(n=new Intl.NumberFormat(i,e),Pj.set(t,n)),n}function yg(i,e,t){return Bue(e,t).format(i)}var $j={values(i){return ui(i)?i:""+i},numeric(i,e,t){if(i===0)return"0";let n=this.chart.options.locale,r,o=i;if(t.length>1){let c=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(c<1e-4||c>1e15)&&(r="scientific"),o=Nue(i,t)}let s=Fc(Math.abs(o)),a=isNaN(s)?1:Math.max(Math.min(-1*Math.floor(s),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),yg(i,n,l)},logarithmic(i,e,t){if(i===0)return"0";let n=t[e].significand||i/Math.pow(10,Math.floor(Fc(i)));return[1,2,3,5,10,15].includes(n)||e>.8*t.length?$j.numeric.call(this,i,e,t):""}};function Nue(i,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&i!==Math.floor(i)&&(t=i-Math.floor(i)),t}var qx={formatters:$j};function Lue(i){i.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:qx.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),i.route("scale.ticks","color","","color"),i.route("scale.grid","color","","borderColor"),i.route("scale.border","color","","borderColor"),i.route("scale.title","color","","color"),i.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),i.describe("scales",{_fallback:"scale"}),i.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}var qd=Object.create(null),n5=Object.create(null);function Gx(i,e){if(!e)return i;let t=e.split(".");for(let n=0,r=t.length;n<r;++n){let o=t[n];i=i[o]||(i[o]=Object.create(null))}return i}function CD(i,e,t){return typeof e=="string"?mg(Gx(i,e),t):mg(Gx(i,""),e)}var yD=class{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,r)=>bD(r.backgroundColor),this.hoverBorderColor=(n,r)=>bD(r.borderColor),this.hoverColor=(n,r)=>bD(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return CD(this,e,t)}get(e){return Gx(this,e)}describe(e,t){return CD(n5,e,t)}override(e,t){return CD(qd,e,t)}route(e,t,n,r){let o=Gx(this,e),s=Gx(this,n),a="_"+t;Object.defineProperties(o,{[a]:{value:o[t],writable:!0},[t]:{enumerable:!0,get(){let l=this[a],c=s[r];return ln(l)?Object.assign({},c,l):Bt(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(t=>t(this))}},pi=new yD({_scriptable:i=>!i.startsWith("on"),_indexable:i=>i!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Iue,Tue,Lue]);function Rue(i){return!i||on(i.size)||on(i.family)?null:(i.style?i.style+" ":"")+(i.weight?i.weight+" ":"")+i.size+"px "+i.family}function $x(i,e,t,n,r){let o=e[r];return o||(o=e[r]=i.measureText(r).width,t.push(r)),o>n&&(n=o),n}function Wj(i,e,t,n){n=n||{};let r=n.data=n.data||{},o=n.garbageCollect=n.garbageCollect||[];n.font!==e&&(r=n.data={},o=n.garbageCollect=[],n.font=e),i.save(),i.font=e;let s=0,a=t.length,l,c,d,h,p;for(l=0;l<a;l++)if(h=t[l],h!=null&&!ui(h))s=$x(i,r,o,s,h);else if(ui(h))for(c=0,d=h.length;c<d;c++)p=h[c],p!=null&&!ui(p)&&(s=$x(i,r,o,s,p));i.restore();let g=o.length/2;if(g>t.length){for(l=0;l<g;l++)delete r[o[l]];o.splice(0,g)}return s}function Kd(i,e,t){let n=i.currentDevicePixelRatio,r=t!==0?Math.max(t/2,.5):0;return Math.round((e-r)*n)/n+r}function LD(i,e){!e&&!i||(e=e||i.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,i.width,i.height),e.restore())}function i5(i,e,t,n){RD(i,e,t,n,null)}function RD(i,e,t,n,r){let o,s,a,l,c,d,h,p,g=e.pointStyle,_=e.rotation,b=e.radius,C=(_||0)*Sue;if(g&&typeof g=="object"&&(o=g.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){i.save(),i.translate(t,n),i.rotate(C),i.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),i.restore();return}if(!(isNaN(b)||b<=0)){switch(i.beginPath(),g){default:r?i.ellipse(t,n,r/2,b,0,0,hi):i.arc(t,n,b,0,hi),i.closePath();break;case"triangle":d=r?r/2:b,i.moveTo(t+Math.sin(C)*d,n-Math.cos(C)*b),C+=wj,i.lineTo(t+Math.sin(C)*d,n-Math.cos(C)*b),C+=wj,i.lineTo(t+Math.sin(C)*d,n-Math.cos(C)*b),i.closePath();break;case"rectRounded":c=b*.516,l=b-c,s=Math.cos(C+B0)*l,h=Math.cos(C+B0)*(r?r/2-c:l),a=Math.sin(C+B0)*l,p=Math.sin(C+B0)*(r?r/2-c:l),i.arc(t-h,n-a,c,C-Mn,C-Li),i.arc(t+p,n-s,c,C-Li,C),i.arc(t+h,n+a,c,C,C+Li),i.arc(t-p,n+s,c,C+Li,C+Mn),i.closePath();break;case"rect":if(!_){l=Math.SQRT1_2*b,d=r?r/2:l,i.rect(t-d,n-l,2*d,2*l);break}C+=B0;case"rectRot":h=Math.cos(C)*(r?r/2:b),s=Math.cos(C)*b,a=Math.sin(C)*b,p=Math.sin(C)*(r?r/2:b),i.moveTo(t-h,n-a),i.lineTo(t+p,n-s),i.lineTo(t+h,n+a),i.lineTo(t-p,n+s),i.closePath();break;case"crossRot":C+=B0;case"cross":h=Math.cos(C)*(r?r/2:b),s=Math.cos(C)*b,a=Math.sin(C)*b,p=Math.sin(C)*(r?r/2:b),i.moveTo(t-h,n-a),i.lineTo(t+h,n+a),i.moveTo(t+p,n-s),i.lineTo(t-p,n+s);break;case"star":h=Math.cos(C)*(r?r/2:b),s=Math.cos(C)*b,a=Math.sin(C)*b,p=Math.sin(C)*(r?r/2:b),i.moveTo(t-h,n-a),i.lineTo(t+h,n+a),i.moveTo(t+p,n-s),i.lineTo(t-p,n+s),C+=B0,h=Math.cos(C)*(r?r/2:b),s=Math.cos(C)*b,a=Math.sin(C)*b,p=Math.sin(C)*(r?r/2:b),i.moveTo(t-h,n-a),i.lineTo(t+h,n+a),i.moveTo(t+p,n-s),i.lineTo(t-p,n+s);break;case"line":s=r?r/2:Math.cos(C)*b,a=Math.sin(C)*b,i.moveTo(t-s,n-a),i.lineTo(t+s,n+a);break;case"dash":i.moveTo(t,n),i.lineTo(t+Math.cos(C)*(r?r/2:b),n+Math.sin(C)*b);break;case!1:i.closePath();break}i.fill(),e.borderWidth>0&&i.stroke()}}function kl(i,e,t){return t=t||.5,!e||i&&i.x>e.left-t&&i.x<e.right+t&&i.y>e.top-t&&i.y<e.bottom+t}function Kx(i,e){i.save(),i.beginPath(),i.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),i.clip()}function Yx(i){i.restore()}function qj(i,e,t,n,r){if(!e)return i.lineTo(t.x,t.y);if(r==="middle"){let o=(e.x+t.x)/2;i.lineTo(o,e.y),i.lineTo(o,t.y)}else r==="after"!=!!n?i.lineTo(e.x,t.y):i.lineTo(t.x,e.y);i.lineTo(t.x,t.y)}function Kj(i,e,t,n){if(!e)return i.lineTo(t.x,t.y);i.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?t.cp2x:t.cp1x,n?t.cp2y:t.cp1y,t.x,t.y)}function zue(i,e){e.translation&&i.translate(e.translation[0],e.translation[1]),on(e.rotation)||i.rotate(e.rotation),e.color&&(i.fillStyle=e.color),e.textAlign&&(i.textAlign=e.textAlign),e.textBaseline&&(i.textBaseline=e.textBaseline)}function jue(i,e,t,n,r){if(r.strikethrough||r.underline){let o=i.measureText(n),s=e-o.actualBoundingBoxLeft,a=e+o.actualBoundingBoxRight,l=t-o.actualBoundingBoxAscent,c=t+o.actualBoundingBoxDescent,d=r.strikethrough?(l+c)/2:c;i.strokeStyle=i.fillStyle,i.beginPath(),i.lineWidth=r.decorationWidth||2,i.moveTo(s,d),i.lineTo(a,d),i.stroke()}}function Vue(i,e){let t=i.fillStyle;i.fillStyle=e.color,i.fillRect(e.left,e.top,e.width,e.height),i.fillStyle=t}function Yd(i,e,t,n,r,o={}){let s=ui(e)?e:[e],a=o.strokeWidth>0&&o.strokeColor!=="",l,c;for(i.save(),i.font=r.string,zue(i,o),l=0;l<s.length;++l)c=s[l],o.backdrop&&Vue(i,o.backdrop),a&&(o.strokeColor&&(i.strokeStyle=o.strokeColor),on(o.strokeWidth)||(i.lineWidth=o.strokeWidth),i.strokeText(c,t,n,o.maxWidth)),i.fillText(c,t,n,o.maxWidth),jue(i,t,n,c,o),n+=Number(r.lineHeight);i.restore()}function wg(i,e){let{x:t,y:n,w:r,h:o,radius:s}=e;i.arc(t+s.topLeft,n+s.topLeft,s.topLeft,1.5*Mn,Mn,!0),i.lineTo(t,n+o-s.bottomLeft),i.arc(t+s.bottomLeft,n+o-s.bottomLeft,s.bottomLeft,Mn,Li,!0),i.lineTo(t+r-s.bottomRight,n+o),i.arc(t+r-s.bottomRight,n+o-s.bottomRight,s.bottomRight,Li,0,!0),i.lineTo(t+r,n+s.topRight),i.arc(t+r-s.topRight,n+s.topRight,s.topRight,0,-Li,!0),i.lineTo(t+s.topLeft,n)}var Uue=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Hue=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Gue(i,e){let t=(""+i).match(Uue);if(!t||t[1]==="normal")return e*1.2;switch(i=+t[2],t[3]){case"px":return i;case"%":i/=100;break}return e*i}var $ue=i=>+i||0;function r5(i,e){let t={},n=ln(e),r=n?Object.keys(e):e,o=ln(i)?n?s=>Bt(i[s],i[e[s]]):s=>i[s]:()=>i;for(let s of r)t[s]=$ue(o(s));return t}function zD(i){return r5(i,{top:"y",right:"x",bottom:"y",left:"x"})}function Xd(i){return r5(i,["topLeft","topRight","bottomLeft","bottomRight"])}function Br(i){let e=zD(i);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function cr(i,e){i=i||{},e=e||pi.font;let t=Bt(i.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let n=Bt(i.style,e.style);n&&!(""+n).match(Hue)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);let r={family:Bt(i.family,e.family),lineHeight:Gue(Bt(i.lineHeight,e.lineHeight),t),size:t,style:n,weight:Bt(i.weight,e.weight),string:""};return r.string=Rue(r),r}function Mg(i,e,t,n){let r=!0,o,s,a;for(o=0,s=i.length;o<s;++o)if(a=i[o],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),r=!1),t!==void 0&&ui(a)&&(a=a[t%a.length],r=!1),a!==void 0))return n&&!r&&(n.cacheable=!1),a}function Yj(i,e,t){let{min:n,max:r}=i,o=wD(e,(r-n)/2),s=(a,l)=>t&&a===0?0:a+l;return{min:s(n,-Math.abs(o)),max:s(r,o)}}function Tc(i,e){return Object.assign(Object.create(i),e)}function o5(i,e=[""],t,n,r=()=>i[0]){let o=t||i;typeof n>"u"&&(n=Jj("_fallback",i));let s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:i,_rootScopes:o,_fallback:n,_getTarget:r,override:a=>o5([a,...i],e,o,n)};return new Proxy(s,{deleteProperty(a,l){return delete a[l],delete a._keys,delete i[0][l],!0},get(a,l){return Xj(a,l,()=>Zue(l,e,i,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(i[0])},has(a,l){return Sj(a).includes(l)},ownKeys(a){return Sj(a)},set(a,l,c){let d=a._storage||(a._storage=r());return a[l]=d[l]=c,delete a._keys,!0}})}function L0(i,e,t,n){let r={_cacheable:!1,_proxy:i,_context:e,_subProxy:t,_stack:new Set,_descriptors:jD(i,n),setContext:o=>L0(i,o,t,n),override:o=>L0(i.override(o),e,t,n)};return new Proxy(r,{deleteProperty(o,s){return delete o[s],delete i[s],!0},get(o,s,a){return Xj(o,s,()=>que(o,s,a))},getOwnPropertyDescriptor(o,s){return o._descriptors.allKeys?Reflect.has(i,s)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(i,s)},getPrototypeOf(){return Reflect.getPrototypeOf(i)},has(o,s){return Reflect.has(i,s)},ownKeys(){return Reflect.ownKeys(i)},set(o,s,a){return i[s]=a,delete o[s],!0}})}function jD(i,e={scriptable:!0,indexable:!0}){let{_scriptable:t=e.scriptable,_indexable:n=e.indexable,_allKeys:r=e.allKeys}=i;return{allKeys:r,scriptable:t,indexable:n,isScriptable:Dc(t)?t:()=>t,isIndexable:Dc(n)?n:()=>n}}var Wue=(i,e)=>i?i+J2(e):e,VD=(i,e)=>ln(e)&&i!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function Xj(i,e,t){if(Object.prototype.hasOwnProperty.call(i,e)||e==="constructor")return i[e];let n=t();return i[e]=n,n}function que(i,e,t){let{_proxy:n,_context:r,_subProxy:o,_descriptors:s}=i,a=n[e];return Dc(a)&&s.isScriptable(e)&&(a=Kue(e,a,i,t)),ui(a)&&a.length&&(a=Yue(e,a,i,s.isIndexable)),VD(e,a)&&(a=L0(a,r,o&&o[e],s)),a}function Kue(i,e,t,n){let{_proxy:r,_context:o,_subProxy:s,_stack:a}=t;if(a.has(i))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+i);a.add(i);let l=e(o,s||n);return a.delete(i),VD(i,l)&&(l=UD(r._scopes,r,i,l)),l}function Yue(i,e,t,n){let{_proxy:r,_context:o,_subProxy:s,_descriptors:a}=t;if(typeof o.index<"u"&&n(i))return e[o.index%e.length];if(ln(e[0])){let l=e,c=r._scopes.filter(d=>d!==l);e=[];for(let d of l){let h=UD(c,r,i,d);e.push(L0(h,o,s&&s[i],a))}}return e}function Qj(i,e,t){return Dc(i)?i(e,t):i}var Xue=(i,e)=>i===!0?e:typeof i=="string"?Ic(e,i):void 0;function Que(i,e,t,n,r){for(let o of e){let s=Xue(t,o);if(s){i.add(s);let a=Qj(s._fallback,t,r);if(typeof a<"u"&&a!==t&&a!==n)return a}else if(s===!1&&typeof n<"u"&&t!==n)return null}return!1}function UD(i,e,t,n){let r=e._rootScopes,o=Qj(e._fallback,t,n),s=[...i,...r],a=new Set;a.add(n);let l=Oj(a,s,t,o||t,n);return l===null||typeof o<"u"&&o!==t&&(l=Oj(a,s,o,l,n),l===null)?!1:o5(Array.from(a),[""],r,o,()=>Jue(e,t,n))}function Oj(i,e,t,n,r){for(;t;)t=Que(i,e,t,n,r);return t}function Jue(i,e,t){let n=i._getTarget();e in n||(n[e]={});let r=n[e];return ui(r)&&ln(t)?t:r||{}}function Zue(i,e,t,n){let r;for(let o of e)if(r=Jj(Wue(o,i),t),typeof r<"u")return VD(i,r)?UD(t,n,i,r):r}function Jj(i,e){for(let t of e){if(!t)continue;let n=t[i];if(typeof n<"u")return n}}function Sj(i){let e=i._keys;return e||(e=i._keys=e0e(i._scopes)),e}function e0e(i){let e=new Set;for(let t of i)for(let n of Object.keys(t).filter(r=>!r.startsWith("_")))e.add(n);return Array.from(e)}function HD(i,e,t,n){let{iScale:r}=i,{key:o="r"}=this._parsing,s=new Array(n),a,l,c,d;for(a=0,l=n;a<l;++a)c=a+t,d=e[c],s[a]={r:r.parse(Ic(d,o),c)};return s}var t0e=Number.EPSILON||1e-14,xg=(i,e)=>e<i.length&&!i[e].skip&&i[e],Zj=i=>i==="x"?"y":"x";function n0e(i,e,t,n){let r=i.skip?e:i,o=e,s=t.skip?e:t,a=X2(o,r),l=X2(s,o),c=a/(a+l),d=l/(a+l);c=isNaN(c)?0:c,d=isNaN(d)?0:d;let h=n*c,p=n*d;return{previous:{x:o.x-h*(s.x-r.x),y:o.y-h*(s.y-r.y)},next:{x:o.x+p*(s.x-r.x),y:o.y+p*(s.y-r.y)}}}function i0e(i,e,t){let n=i.length,r,o,s,a,l,c=xg(i,0);for(let d=0;d<n-1;++d)if(l=c,c=xg(i,d+1),!(!l||!c)){if(bg(e[d],0,t0e)){t[d]=t[d+1]=0;continue}r=t[d]/e[d],o=t[d+1]/e[d],a=Math.pow(r,2)+Math.pow(o,2),!(a<=9)&&(s=3/Math.sqrt(a),t[d]=r*s*e[d],t[d+1]=o*s*e[d])}}function r0e(i,e,t="x"){let n=Zj(t),r=i.length,o,s,a,l=xg(i,0);for(let c=0;c<r;++c){if(s=a,a=l,l=xg(i,c+1),!a)continue;let d=a[t],h=a[n];s&&(o=(d-s[t])/3,a[`cp1${t}`]=d-o,a[`cp1${n}`]=h-o*e[c]),l&&(o=(l[t]-d)/3,a[`cp2${t}`]=d+o,a[`cp2${n}`]=h+o*e[c])}}function o0e(i,e="x"){let t=Zj(e),n=i.length,r=Array(n).fill(0),o=Array(n),s,a,l,c=xg(i,0);for(s=0;s<n;++s)if(a=l,l=c,c=xg(i,s+1),!!l){if(c){let d=c[e]-l[e];r[s]=d!==0?(c[t]-l[t])/d:0}o[s]=a?c?Ta(r[s-1])!==Ta(r[s])?0:(r[s-1]+r[s])/2:r[s-1]:r[s]}i0e(i,r,o),r0e(i,o,e)}function $2(i,e,t){return Math.max(Math.min(i,t),e)}function s0e(i,e){let t,n,r,o,s,a=kl(i[0],e);for(t=0,n=i.length;t<n;++t)s=o,o=a,a=t<n-1&&kl(i[t+1],e),o&&(r=i[t],s&&(r.cp1x=$2(r.cp1x,e.left,e.right),r.cp1y=$2(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=$2(r.cp2x,e.left,e.right),r.cp2y=$2(r.cp2y,e.top,e.bottom)))}function eV(i,e,t,n,r){let o,s,a,l;if(e.spanGaps&&(i=i.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")o0e(i,r);else{let c=n?i[i.length-1]:i[0];for(o=0,s=i.length;o<s;++o)a=i[o],l=n0e(c,a,i[Math.min(o+1,s-(n?0:1))%s],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&s0e(i,t)}function s5(){return typeof window<"u"&&typeof document<"u"}function a5(i){let e=i.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Q2(i,e,t){let n;return typeof i=="string"?(n=parseInt(i,10),i.indexOf("%")!==-1&&(n=n/100*e.parentNode[t])):n=i,n}var l5=i=>i.ownerDocument.defaultView.getComputedStyle(i,null);function a0e(i,e){return l5(i).getPropertyValue(e)}var l0e=["top","right","bottom","left"];function N0(i,e,t){let n={};t=t?"-"+t:"";for(let r=0;r<4;r++){let o=l0e[r];n[o]=parseFloat(i[e+"-"+o+t])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}var c0e=(i,e,t)=>(i>0||e>0)&&(!t||!t.shadowRoot);function d0e(i,e){let t=i.touches,n=t&&t.length?t[0]:i,{offsetX:r,offsetY:o}=n,s=!1,a,l;if(c0e(r,o,i.target))a=r,l=o;else{let c=e.getBoundingClientRect();a=n.clientX-c.left,l=n.clientY-c.top,s=!0}return{x:a,y:l,box:s}}function Qd(i,e){if("native"in i)return i;let{canvas:t,currentDevicePixelRatio:n}=e,r=l5(t),o=r.boxSizing==="border-box",s=N0(r,"padding"),a=N0(r,"border","width"),{x:l,y:c,box:d}=d0e(i,t),h=s.left+(d&&a.left),p=s.top+(d&&a.top),{width:g,height:_}=e;return o&&(g-=s.width+a.width,_-=s.height+a.height),{x:Math.round((l-h)/g*t.width/n),y:Math.round((c-p)/_*t.height/n)}}function u0e(i,e,t){let n,r;if(e===void 0||t===void 0){let o=i&&a5(i);if(!o)e=i.clientWidth,t=i.clientHeight;else{let s=o.getBoundingClientRect(),a=l5(o),l=N0(a,"border","width"),c=N0(a,"padding");e=s.width-c.width-l.width,t=s.height-c.height-l.height,n=Q2(a.maxWidth,o,"clientWidth"),r=Q2(a.maxHeight,o,"clientHeight")}}return{width:e,height:t,maxWidth:n||Y2,maxHeight:r||Y2}}var W2=i=>Math.round(i*10)/10;function tV(i,e,t,n){let r=l5(i),o=N0(r,"margin"),s=Q2(r.maxWidth,i,"clientWidth")||Y2,a=Q2(r.maxHeight,i,"clientHeight")||Y2,l=u0e(i,e,t),{width:c,height:d}=l;if(r.boxSizing==="content-box"){let p=N0(r,"border","width"),g=N0(r,"padding");c-=g.width+p.width,d-=g.height+p.height}return c=Math.max(0,c-o.width),d=Math.max(0,n?c/n:d-o.height),c=W2(Math.min(c,s,l.maxWidth)),d=W2(Math.min(d,a,l.maxHeight)),c&&!d&&(d=W2(c/2)),(e!==void 0||t!==void 0)&&n&&l.height&&d>l.height&&(d=l.height,c=W2(Math.floor(d*n))),{width:c,height:d}}function GD(i,e,t){let n=e||1,r=Math.floor(i.height*n),o=Math.floor(i.width*n);i.height=Math.floor(i.height),i.width=Math.floor(i.width);let s=i.canvas;return s.style&&(t||!s.style.height&&!s.style.width)&&(s.style.height=`${i.height}px`,s.style.width=`${i.width}px`),i.currentDevicePixelRatio!==n||s.height!==r||s.width!==o?(i.currentDevicePixelRatio=n,s.height=r,s.width=o,i.ctx.setTransform(n,0,0,n,0,0),!0):!1}var nV=function(){let i=!1;try{let e={get passive(){return i=!0,!1}};s5()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return i}();function $D(i,e){let t=a0e(i,e),n=t&&t.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function Wd(i,e,t,n){return{x:i.x+t*(e.x-i.x),y:i.y+t*(e.y-i.y)}}function iV(i,e,t,n){return{x:i.x+t*(e.x-i.x),y:n==="middle"?t<.5?i.y:e.y:n==="after"?t<1?i.y:e.y:t>0?e.y:i.y}}function rV(i,e,t,n){let r={x:i.cp2x,y:i.cp2y},o={x:e.cp1x,y:e.cp1y},s=Wd(i,r,t),a=Wd(r,o,t),l=Wd(o,e,t),c=Wd(s,a,t),d=Wd(a,l,t);return Wd(c,d,t)}var h0e=function(i,e){return{x(t){return i+i+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,n){return t-n},leftForLtr(t,n){return t-n}}},f0e=function(){return{x(i){return i},setWidth(i){},textAlign(i){return i},xPlus(i,e){return i+e},leftForLtr(i,e){return i}}};function z0(i,e,t){return i?h0e(e,t):f0e()}function WD(i,e){let t,n;(e==="ltr"||e==="rtl")&&(t=i.canvas.style,n=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),i.prevTextDirection=n)}function qD(i,e){e!==void 0&&(delete i.prevTextDirection,i.canvas.style.setProperty("direction",e[0],e[1]))}function oV(i){return i==="angle"?{between:Cg,compare:Aue,normalize:Ir}:{between:Dl,compare:(e,t)=>e-t,normalize:e=>e}}function kj({start:i,end:e,count:t,loop:n,style:r}){return{start:i%t,end:e%t,loop:n&&(e-i+1)%t===0,style:r}}function g0e(i,e,t){let{property:n,start:r,end:o}=t,{between:s,normalize:a}=oV(n),l=e.length,{start:c,end:d,loop:h}=i,p,g;if(h){for(c+=l,d+=l,p=0,g=l;p<g&&s(a(e[c%l][n]),r,o);++p)c--,d--;c%=l,d%=l}return d<c&&(d+=l),{start:c,end:d,loop:h,style:i.style}}function KD(i,e,t){if(!t)return[i];let{property:n,start:r,end:o}=t,s=e.length,{compare:a,between:l,normalize:c}=oV(n),{start:d,end:h,loop:p,style:g}=g0e(i,e,t),_=[],b=!1,C=null,y,M,O,A=()=>l(r,O,y)&&a(r,O)!==0,D=()=>a(o,y)===0||l(o,O,y),N=()=>b||A(),B=()=>!b||D();for(let T=d,H=d;T<=h;++T)M=e[T%s],!M.skip&&(y=c(M[n]),y!==O&&(b=l(y,r,o),C===null&&N()&&(C=a(y,r)===0?T:H),C!==null&&B()&&(_.push(kj({start:C,end:T,loop:p,count:s,style:g})),C=null),H=T,O=y));return C!==null&&_.push(kj({start:C,end:h,loop:p,count:s,style:g})),_}function YD(i,e){let t=[],n=i.segments;for(let r=0;r<n.length;r++){let o=KD(n[r],i.points,e);o.length&&t.push(...o)}return t}function p0e(i,e,t,n){let r=0,o=e-1;if(t&&!n)for(;r<e&&!i[r].skip;)r++;for(;r<e&&i[r].skip;)r++;for(r%=e,t&&(o+=r);o>r&&i[o%e].skip;)o--;return o%=e,{start:r,end:o}}function m0e(i,e,t,n){let r=i.length,o=[],s=e,a=i[e],l;for(l=e+1;l<=t;++l){let c=i[l%r];c.skip||c.stop?a.skip||(n=!1,o.push({start:e%r,end:(l-1)%r,loop:n}),e=s=c.stop?l:null):(s=l,a.skip&&(e=l)),a=c}return s!==null&&o.push({start:e%r,end:s%r,loop:n}),o}function sV(i,e){let t=i.points,n=i.options.spanGaps,r=t.length;if(!r)return[];let o=!!i._loop,{start:s,end:a}=p0e(t,r,o,n);if(n===!0)return Aj(i,[{start:s,end:a,loop:o}],t,e);let l=a<s?a+r:a,c=!!i._fullLoop&&s===0&&a===r-1;return Aj(i,m0e(t,s,l,c),t,e)}function Aj(i,e,t,n){return!n||!n.setContext||!t?e:x0e(i,e,t,n)}function x0e(i,e,t,n){let r=i._chart.getContext(),o=Dj(i.options),{_datasetIndex:s,options:{spanGaps:a}}=i,l=t.length,c=[],d=o,h=e[0].start,p=h;function g(_,b,C,y){let M=a?-1:1;if(_!==b){for(_+=l;t[_%l].skip;)_-=M;for(;t[b%l].skip;)b+=M;_%l!==b%l&&(c.push({start:_%l,end:b%l,loop:C,style:y}),d=y,h=b%l)}}for(let _ of e){h=a?h:_.start;let b=t[h%l],C;for(p=h+1;p<=_.end;p++){let y=t[p%l];C=Dj(n.setContext(Tc(r,{type:"segment",p0:b,p1:y,p0DataIndex:(p-1)%l,p1DataIndex:p%l,datasetIndex:s}))),_0e(C,d)&&g(h,p-1,_.loop,d),b=y,d=C}h<p-1&&g(h,p-1,_.loop,d)}return c}function Dj(i){return{backgroundColor:i.backgroundColor,borderCapStyle:i.borderCapStyle,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderJoinStyle:i.borderJoinStyle,borderWidth:i.borderWidth,borderColor:i.borderColor}}function _0e(i,e){if(!e)return!1;let t=[],n=function(r,o){return BD(o)?(t.includes(o)||t.push(o),t.indexOf(o)):o};return JSON.stringify(i,n)!==JSON.stringify(e,n)}function q2(i,e,t){return i.options.clip?i[t]:e[t]}function v0e(i,e){let{xScale:t,yScale:n}=i;return t&&n?{left:q2(t,e,"left"),right:q2(t,e,"right"),top:q2(n,e,"top"),bottom:q2(n,e,"bottom")}:e}function XD(i,e){let t=e._clip;if(t.disabled)return!1;let n=v0e(e,i.chartArea);return{left:t.left===!1?0:n.left-(t.left===!0?0:t.left),right:t.right===!1?i.width:n.right+(t.right===!0?0:t.right),top:t.top===!1?0:n.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?i.height:n.bottom+(t.bottom===!0?0:t.bottom)}}var l8=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,r){let o=t.listeners[r],s=t.duration;o.forEach(a=>a({chart:e,initial:t.initial,numSteps:s,currentStep:Math.min(n-t.start,s)}))}_refresh(){this._request||(this._running=!0,this._request=DD.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((n,r)=>{if(!n.running||!n.items.length)return;let o=n.items,s=o.length-1,a=!1,l;for(;s>=0;--s)l=o[s],l._active?(l._total>n.duration&&(n.duration=l._total),l.tick(e),a=!0):(o[s]=o[o.length-1],o.pop());a&&(r.draw(),this._notify(r,n,e,"progress")),o.length||(n.running=!1,this._notify(r,n,e,"complete"),n.initial=!1),t+=o.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){let t=this._charts,n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){let t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((n,r)=>Math.max(n,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;let t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){let t=this._charts.get(e);if(!t||!t.items.length)return;let n=t.items,r=n.length-1;for(;r>=0;--r)n[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}},Bc=new l8,aV="transparent",b0e={boolean(i,e,t){return t>.5?e:i},color(i,e,t){let n=ND(i||aV),r=n.valid&&ND(e||aV);return r&&r.valid?r.mix(n,t).hexString():e},number(i,e,t){return i+(e-i)*t}},c8=class{constructor(e,t,n,r){let o=t[n];r=Mg([e.to,r,o,e.from]);let s=Mg([e.from,o,r]);this._active=!0,this._fn=e.fn||b0e[e.type||typeof s],this._easing=pg[e.easing]||pg.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=s,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);let r=this._target[this._prop],o=n-this._start,s=this._duration-o;this._start=n,this._duration=Math.floor(Math.max(s,e.duration)),this._total+=o,this._loop=!!e.loop,this._to=Mg([e.to,t,r,e.from]),this._from=Mg([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){let t=e-this._start,n=this._duration,r=this._prop,o=this._from,s=this._loop,a=this._to,l;if(this._active=o!==a&&(s||t<n),!this._active){this._target[r]=a,this._notify(!0);return}if(t<0){this._target[r]=o;return}l=t/n%2,l=s&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(o,a,l)}wait(){let e=this._promises||(this._promises=[]);return new Promise((t,n)=>{e.push({res:t,rej:n})})}_notify(e){let t=e?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][t]()}},x5=class{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!ln(e))return;let t=Object.keys(pi.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{let o=e[r];if(!ln(o))return;let s={};for(let a of t)s[a]=o[a];(ui(o.properties)&&o.properties||[r]).forEach(a=>{(a===r||!n.has(a))&&n.set(a,s)})})}_animateOptions(e,t){let n=t.options,r=y0e(e,n);if(!r)return[];let o=this._createAnimations(r,n);return n.$shared&&C0e(e.options.$animations,n).then(()=>{e.options=n},()=>{}),o}_createAnimations(e,t){let n=this._properties,r=[],o=e.$animations||(e.$animations={}),s=Object.keys(t),a=Date.now(),l;for(l=s.length-1;l>=0;--l){let c=s[l];if(c.charAt(0)==="$")continue;if(c==="options"){r.push(...this._animateOptions(e,t));continue}let d=t[c],h=o[c],p=n.get(c);if(h)if(p&&h.active()){h.update(p,d,a);continue}else h.cancel();if(!p||!p.duration){e[c]=d;continue}o[c]=h=new c8(p,e,c,d),r.push(h)}return r}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}let n=this._createAnimations(e,t);if(n.length)return Bc.add(this._chart,n),!0}};function C0e(i,e){let t=[],n=Object.keys(e);for(let r=0;r<n.length;r++){let o=i[n[r]];o&&o.active()&&t.push(o.wait())}return Promise.all(t)}function y0e(i,e){if(!e)return;let t=i.options;if(!t){i.options=e;return}return t.$shared&&(i.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function lV(i,e){let t=i&&i.options||{},n=t.reverse,r=t.min===void 0?e:0,o=t.max===void 0?e:0;return{start:n?o:r,end:n?r:o}}function w0e(i,e,t){if(t===!1)return!1;let n=lV(i,t),r=lV(e,t);return{top:r.end,right:n.end,bottom:r.start,left:n.start}}function M0e(i){let e,t,n,r;return ln(i)?(e=i.top,t=i.right,n=i.bottom,r=i.left):e=t=n=r=i,{top:e,right:t,bottom:n,left:r,disabled:i===!1}}function aU(i,e){let t=[],n=i._getSortedDatasetMetas(e),r,o;for(r=0,o=n.length;r<o;++r)t.push(n[r].index);return t}function cV(i,e,t,n={}){let r=i.keys,o=n.mode==="single",s,a,l,c;if(e===null)return;let d=!1;for(s=0,a=r.length;s<a;++s){if(l=+r[s],l===t){if(d=!0,n.all)continue;break}c=i.values[l],Pi(c)&&(o||e===0||Ta(e)===Ta(c))&&(e+=c)}return!d&&!n.all?0:e}function E0e(i,e){let{iScale:t,vScale:n}=e,r=t.axis==="x"?"x":"y",o=n.axis==="x"?"x":"y",s=Object.keys(i),a=new Array(s.length),l,c,d;for(l=0,c=s.length;l<c;++l)d=s[l],a[l]={[r]:d,[o]:i[d]};return a}function QD(i,e){let t=i&&i.options.stacked;return t||t===void 0&&e.stack!==void 0}function P0e(i,e,t){return`${i.id}.${e.id}.${t.stack||t.type}`}function O0e(i){let{min:e,max:t,minDefined:n,maxDefined:r}=i.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:r?t:Number.POSITIVE_INFINITY}}function S0e(i,e,t){let n=i[e]||(i[e]={});return n[t]||(n[t]={})}function dV(i,e,t,n){for(let r of e.getMatchingVisibleMetas(n).reverse()){let o=i[r.index];if(t&&o>0||!t&&o<0)return r.index}return null}function uV(i,e){let{chart:t,_cachedMeta:n}=i,r=t._stacks||(t._stacks={}),{iScale:o,vScale:s,index:a}=n,l=o.axis,c=s.axis,d=P0e(o,s,n),h=e.length,p;for(let g=0;g<h;++g){let _=e[g],{[l]:b,[c]:C}=_,y=_._stacks||(_._stacks={});p=y[c]=S0e(r,d,b),p[a]=C,p._top=dV(p,s,!0,n.type),p._bottom=dV(p,s,!1,n.type);let M=p._visualValues||(p._visualValues={});M[a]=C}}function JD(i,e){let t=i.scales;return Object.keys(t).filter(n=>t[n].axis===e).shift()}function k0e(i,e){return Tc(i,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function A0e(i,e,t){return Tc(i,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function Xx(i,e){let t=i.controller.index,n=i.vScale&&i.vScale.axis;if(n){e=e||i._parsed;for(let r of e){let o=r._stacks;if(!o||o[n]===void 0||o[n][t]===void 0)return;delete o[n][t],o[n]._visualValues!==void 0&&o[n]._visualValues[t]!==void 0&&delete o[n]._visualValues[t]}}}var ZD=i=>i==="reset"||i==="none",hV=(i,e)=>e?i:Object.assign({},i),D0e=(i,e,t)=>i&&!e.hidden&&e._stacked&&{keys:aU(t,!0),values:null},Zd=(()=>{class i{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=QD(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Xx(this._cachedMeta),this.index=t}linkScales(){let t=this.chart,n=this._cachedMeta,r=this.getDataset(),o=(p,g,_,b)=>p==="x"?g:p==="r"?b:_,s=n.xAxisID=Bt(r.xAxisID,JD(t,"x")),a=n.yAxisID=Bt(r.yAxisID,JD(t,"y")),l=n.rAxisID=Bt(r.rAxisID,JD(t,"r")),c=n.indexAxis,d=n.iAxisID=o(c,s,a,l),h=n.vAxisID=o(c,a,s,l);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(a),n.rScale=this.getScaleForId(l),n.iScale=this.getScaleForId(d),n.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){let n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){let t=this._cachedMeta;this._data&&kD(this._data,this),t._stacked&&Xx(t)}_dataCheck(){let t=this.getDataset(),n=t.data||(t.data=[]),r=this._data;if(ln(n)){let o=this._cachedMeta;this._data=E0e(n,o)}else if(r!==n){if(r){kD(r,this);let o=this._cachedMeta;Xx(o),o._parsed=[]}n&&Object.isExtensible(n)&&Uj(n,this),this._syncList=[],this._data=n}}addElements(){let t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){let n=this._cachedMeta,r=this.getDataset(),o=!1;this._dataCheck();let s=n._stacked;n._stacked=QD(n.vScale,n),n.stack!==r.stack&&(o=!0,Xx(n),n.stack=r.stack),this._resyncElements(t),(o||s!==n._stacked)&&(uV(this,n._parsed),n._stacked=QD(n.vScale,n))}configure(){let t=this.chart.config,n=t.datasetScopeKeys(this._type),r=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){let{_cachedMeta:r,_data:o}=this,{iScale:s,_stacked:a}=r,l=s.axis,c=t===0&&n===o.length?!0:r._sorted,d=t>0&&r._parsed[t-1],h,p,g;if(this._parsing===!1)r._parsed=o,r._sorted=!0,g=o;else{ui(o[t])?g=this.parseArrayData(r,o,t,n):ln(o[t])?g=this.parseObjectData(r,o,t,n):g=this.parsePrimitiveData(r,o,t,n);let _=()=>p[l]===null||d&&p[l]<d[l];for(h=0;h<n;++h)r._parsed[h+t]=p=g[h],c&&(_()&&(c=!1),d=p);r._sorted=c}a&&uV(this,g)}parsePrimitiveData(t,n,r,o){let{iScale:s,vScale:a}=t,l=s.axis,c=a.axis,d=s.getLabels(),h=s===a,p=new Array(o),g,_,b;for(g=0,_=o;g<_;++g)b=g+r,p[g]={[l]:h||s.parse(d[b],b),[c]:a.parse(n[b],b)};return p}parseArrayData(t,n,r,o){let{xScale:s,yScale:a}=t,l=new Array(o),c,d,h,p;for(c=0,d=o;c<d;++c)h=c+r,p=n[h],l[c]={x:s.parse(p[0],h),y:a.parse(p[1],h)};return l}parseObjectData(t,n,r,o){let{xScale:s,yScale:a}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=new Array(o),h,p,g,_;for(h=0,p=o;h<p;++h)g=h+r,_=n[g],d[h]={x:s.parse(Ic(_,l),g),y:a.parse(Ic(_,c),g)};return d}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,r){let o=this.chart,s=this._cachedMeta,a=n[t.axis],l={keys:aU(o,!0),values:n._stacks[t.axis]._visualValues};return cV(l,a,s.index,{mode:r})}updateRangeFromParsed(t,n,r,o){let s=r[n.axis],a=s===null?NaN:s,l=o&&r._stacks[n.axis];o&&l&&(o.values=l,a=cV(o,s,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}getMinMax(t,n){let r=this._cachedMeta,o=r._parsed,s=r._sorted&&t===r.iScale,a=o.length,l=this._getOtherScale(t),c=D0e(n,r,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:p}=O0e(l),g,_;function b(){_=o[g];let C=_[l.axis];return!Pi(_[t.axis])||h>C||p<C}for(g=0;g<a&&!(!b()&&(this.updateRangeFromParsed(d,t,_,c),s));++g);if(s){for(g=a-1;g>=0;--g)if(!b()){this.updateRangeFromParsed(d,t,_,c);break}}return d}getAllParsedValues(t){let n=this._cachedMeta._parsed,r=[],o,s,a;for(o=0,s=n.length;o<s;++o)a=n[o][t.axis],Pi(a)&&r.push(a);return r}getMaxOverflow(){return!1}getLabelAndValue(t){let n=this._cachedMeta,r=n.iScale,o=n.vScale,s=this.getParsed(t);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:o?""+o.getLabelForValue(s[o.axis]):""}}_update(t){let n=this._cachedMeta;this.update(t||"default"),n._clip=M0e(Bt(this.options.clip,w0e(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){let t=this._ctx,n=this.chart,r=this._cachedMeta,o=r.data||[],s=n.chartArea,a=[],l=this._drawStart||0,c=this._drawCount||o.length-l,d=this.options.drawActiveElementsOnTop,h;for(r.dataset&&r.dataset.draw(t,s,l,c),h=l;h<l+c;++h){let p=o[h];p.hidden||(p.active&&d?a.push(p):p.draw(t,s))}for(h=0;h<a.length;++h)a[h].draw(t,s)}getStyle(t,n){let r=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(t||0,r)}getContext(t,n,r){let o=this.getDataset(),s;if(t>=0&&t<this._cachedMeta.data.length){let a=this._cachedMeta.data[t];s=a.$context||(a.$context=A0e(this.getContext(),t,a)),s.parsed=this.getParsed(t),s.raw=o.data[t],s.index=s.dataIndex=t}else s=this.$context||(this.$context=k0e(this.chart.getContext(),this.index)),s.dataset=o,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=r,s}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",r){let o=n==="active",s=this._cachedDataOpts,a=t+"-"+n,l=s[a],c=this.enableOptionSharing&&vg(r);if(l)return hV(l,c);let d=this.chart.config,h=d.datasetElementScopeKeys(this._type,t),p=o?[`${t}Hover`,"hover",t,""]:[t,""],g=d.getOptionScopes(this.getDataset(),h),_=Object.keys(pi.elements[t]),b=()=>this.getContext(r,o,n),C=d.resolveNamedOptions(g,_,b,p);return C.$shared&&(C.$shared=c,s[a]=Object.freeze(hV(C,c))),C}_resolveAnimations(t,n,r){let o=this.chart,s=this._cachedDataOpts,a=`animation-${n}`,l=s[a];if(l)return l;let c;if(o.options.animation!==!1){let h=this.chart.config,p=h.datasetAnimationScopeKeys(this._type,n),g=h.getOptionScopes(this.getDataset(),p);c=h.createResolver(g,this.getContext(t,r,n))}let d=new x5(o,c&&c.animations);return c&&c._cacheable&&(s[a]=Object.freeze(d)),d}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||ZD(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){let r=this.resolveDataElementOptions(t,n),o=this._sharedOptions,s=this.getSharedOptions(r),a=this.includeOptions(n,s)||s!==o;return this.updateSharedOptions(s,n,r),{sharedOptions:s,includeOptions:a}}updateElement(t,n,r,o){ZD(o)?Object.assign(t,r):this._resolveAnimations(n,o).update(t,r)}updateSharedOptions(t,n,r){t&&!ZD(n)&&this._resolveAnimations(void 0,n).update(t,r)}_setStyle(t,n,r,o){t.active=o;let s=this.getStyle(n,o);this._resolveAnimations(n,r,o).update(t,{options:!o&&this.getSharedOptions(s)||s})}removeHoverStyle(t,n,r){this._setStyle(t,r,"active",!1)}setHoverStyle(t,n,r){this._setStyle(t,r,"active",!0)}_removeDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){let n=this._data,r=this._cachedMeta.data;for(let[l,c,d]of this._syncList)this[l](c,d);this._syncList=[];let o=r.length,s=n.length,a=Math.min(s,o);a&&this.parse(0,a),s>o?this._insertElements(o,s-o,t):s<o&&this._removeElements(s,o-s)}_insertElements(t,n,r=!0){let o=this._cachedMeta,s=o.data,a=t+n,l,c=d=>{for(d.length+=n,l=d.length-1;l>=a;l--)d[l]=d[l-n]};for(c(s),l=t;l<a;++l)s[l]=new this.dataElementType;this._parsing&&c(o._parsed),this.parse(t,n),r&&this.updateElements(s,t,n,"reset")}updateElements(t,n,r,o){}_removeElements(t,n){let r=this._cachedMeta;if(this._parsing){let o=r._parsed.splice(t,n);r._stacked&&Xx(r,o)}r.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{let[n,r,o]=t;this[n](r,o)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){let t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);let r=arguments.length-2;r&&this._sync(["_insertElements",t,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return i})();function F0e(i,e){if(!i._cache.$bar){let t=i.getMatchingVisibleMetas(e),n=[];for(let r=0,o=t.length;r<o;r++)n=n.concat(t[r].controller.getAllParsedValues(i));i._cache.$bar=AD(n.sort((r,o)=>r-o))}return i._cache.$bar}function I0e(i){let e=i.iScale,t=F0e(e,i.type),n=e._length,r,o,s,a,l=()=>{s===32767||s===-32768||(vg(a)&&(n=Math.min(n,Math.abs(s-a)||n)),a=s)};for(r=0,o=t.length;r<o;++r)s=e.getPixelForValue(t[r]),l();for(a=void 0,r=0,o=e.ticks.length;r<o;++r)s=e.getPixelForTick(r),l();return n}function T0e(i,e,t,n){let r=t.barThickness,o,s;return on(r)?(o=e.min*t.categoryPercentage,s=t.barPercentage):(o=r*n,s=1),{chunk:o/n,ratio:s,start:e.pixels[i]-o/2}}function B0e(i,e,t,n){let r=e.pixels,o=r[i],s=i>0?r[i-1]:null,a=i<r.length-1?r[i+1]:null,l=t.categoryPercentage;s===null&&(s=o-(a===null?e.end-e.start:a-o)),a===null&&(a=o+o-s);let c=o-(o-Math.min(s,a))/2*l;return{chunk:Math.abs(a-s)/2*l/n,ratio:t.barPercentage,start:c}}function N0e(i,e,t,n){let r=t.parse(i[0],n),o=t.parse(i[1],n),s=Math.min(r,o),a=Math.max(r,o),l=s,c=a;Math.abs(s)>Math.abs(a)&&(l=a,c=s),e[t.axis]=c,e._custom={barStart:l,barEnd:c,start:r,end:o,min:s,max:a}}function lU(i,e,t,n){return ui(i)?N0e(i,e,t,n):e[t.axis]=t.parse(i,n),e}function fV(i,e,t,n){let r=i.iScale,o=i.vScale,s=r.getLabels(),a=r===o,l=[],c,d,h,p;for(c=t,d=t+n;c<d;++c)p=e[c],h={},h[r.axis]=a||r.parse(s[c],c),l.push(lU(p,h,o,c));return l}function e8(i){return i&&i.barStart!==void 0&&i.barEnd!==void 0}function L0e(i,e,t){return i!==0?Ta(i):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function R0e(i){let e,t,n,r,o;return i.horizontal?(e=i.base>i.x,t="left",n="right"):(e=i.base<i.y,t="bottom",n="top"),e?(r="end",o="start"):(r="start",o="end"),{start:t,end:n,reverse:e,top:r,bottom:o}}function z0e(i,e,t,n){let r=e.borderSkipped,o={};if(!r){i.borderSkipped=o;return}if(r===!0){i.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:s,end:a,reverse:l,top:c,bottom:d}=R0e(i);r==="middle"&&t&&(i.enableBorderRadius=!0,(t._top||0)===n?r=c:(t._bottom||0)===n?r=d:(o[gV(d,s,a,l)]=!0,r=c)),o[gV(r,s,a,l)]=!0,i.borderSkipped=o}function gV(i,e,t,n){return n?(i=j0e(i,e,t),i=pV(i,t,e)):i=pV(i,e,t),i}function j0e(i,e,t){return i===e?t:i===t?e:i}function pV(i,e,t){return i==="start"?e:i==="end"?t:i}function V0e(i,{inflateAmount:e},t){i.inflateAmount=e==="auto"?t===1?.33:0:e}var U0e=(()=>{class i extends Zd{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,n,r,o){return fV(t,n,r,o)}parseArrayData(t,n,r,o){return fV(t,n,r,o)}parseObjectData(t,n,r,o){let{iScale:s,vScale:a}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=s.axis==="x"?l:c,h=a.axis==="x"?l:c,p=[],g,_,b,C;for(g=r,_=r+o;g<_;++g)C=n[g],b={},b[s.axis]=s.parse(Ic(C,d),g),p.push(lU(Ic(C,h),b,a,g));return p}updateRangeFromParsed(t,n,r,o){super.updateRangeFromParsed(t,n,r,o);let s=r._custom;s&&n===this._cachedMeta.vScale&&(t.min=Math.min(t.min,s.min),t.max=Math.max(t.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(t){let n=this._cachedMeta,{iScale:r,vScale:o}=n,s=this.getParsed(t),a=s._custom,l=e8(a)?"["+a.start+", "+a.end+"]":""+o.getLabelForValue(s[o.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();let t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){let n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,t)}updateElements(t,n,r,o){let s=o==="reset",{index:a,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),d=l.isHorizontal(),h=this._getRuler(),{sharedOptions:p,includeOptions:g}=this._getSharedOptions(n,o);for(let _=n;_<n+r;_++){let b=this.getParsed(_),C=s||on(b[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(_),y=this._calculateBarIndexPixels(_,h),M=(b._stacks||{})[l.axis],O={horizontal:d,base:C.base,enableBorderRadius:!M||e8(b._custom)||a===M._top||a===M._bottom,x:d?C.head:y.center,y:d?y.center:C.head,height:d?y.size:Math.abs(C.size),width:d?Math.abs(C.size):y.size};g&&(O.options=p||this.resolveDataElementOptions(_,t[_].active?"active":o));let A=O.options||t[_].options;z0e(O,A,M,a),V0e(O,A,h.ratio),this.updateElement(t[_],_,O,o)}}_getStacks(t,n){let{iScale:r}=this._cachedMeta,o=r.getMatchingVisibleMetas(this._type).filter(h=>h.controller.options.grouped),s=r.options.stacked,a=[],l=this._cachedMeta.controller.getParsed(n),c=l&&l[r.axis],d=h=>{let p=h._parsed.find(_=>_[r.axis]===c),g=p&&p[h.vScale.axis];if(on(g)||isNaN(g))return!0};for(let h of o)if(!(n!==void 0&&d(h))&&((s===!1||a.indexOf(h.stack)===-1||s===void 0&&h.stack===void 0)&&a.push(h.stack),h.index===t))break;return a.length||a.push(void 0),a}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){let t=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(t).filter(r=>t[r].axis===n).shift()}_getAxis(){let t={},n=this.getFirstScaleIdForIndexAxis();for(let r of this.chart.data.datasets)t[Bt(this.chart.options.indexAxis==="x"?r.xAxisID:r.yAxisID,n)]=!0;return Object.keys(t)}_getStackIndex(t,n,r){let o=this._getStacks(t,r),s=n!==void 0?o.indexOf(n):-1;return s===-1?o.length-1:s}_getRuler(){let t=this.options,n=this._cachedMeta,r=n.iScale,o=[],s,a;for(s=0,a=n.data.length;s<a;++s)o.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));let l=t.barThickness;return{min:l||I0e(n),pixels:o,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:t.grouped,ratio:l?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){let{_cachedMeta:{vScale:n,_stacked:r,index:o},options:{base:s,minBarLength:a}}=this,l=s||0,c=this.getParsed(t),d=c._custom,h=e8(d),p=c[n.axis],g=0,_=r?this.applyStack(n,c,r):p,b,C;_!==p&&(g=_-p,_=p),h&&(p=d.barStart,_=d.barEnd-d.barStart,p!==0&&Ta(p)!==Ta(d.barEnd)&&(g=0),g+=p);let y=!on(s)&&!h?s:g,M=n.getPixelForValue(y);if(this.chart.getDataVisibility(t)?b=n.getPixelForValue(g+_):b=M,C=b-M,Math.abs(C)<a){C=L0e(C,n,l)*a,p===l&&(M-=C/2);let O=n.getPixelForDecimal(0),A=n.getPixelForDecimal(1),D=Math.min(O,A),N=Math.max(O,A);M=Math.max(Math.min(M,N),D),b=M+C,r&&!h&&(c._stacks[n.axis]._visualValues[o]=n.getValueForPixel(b)-n.getValueForPixel(M))}if(M===n.getPixelForValue(l)){let O=Ta(C)*n.getLineWidthForValue(l)/2;M+=O,C-=O}return{size:C,base:M,head:b,center:b+C/2}}_calculateBarIndexPixels(t,n){let r=n.scale,o=this.options,s=o.skipNull,a=Bt(o.maxBarThickness,1/0),l,c,d=this._getAxisCount();if(n.grouped){let h=s?this._getStackCount(t):n.stackCount,p=o.barThickness==="flex"?B0e(t,n,o,h*d):T0e(t,n,o,h*d),g=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,_=this._getAxis().indexOf(Bt(g,this.getFirstScaleIdForIndexAxis())),b=this._getStackIndex(this.index,this._cachedMeta.stack,s?t:void 0)+_;l=p.start+p.chunk*b+p.chunk/2,c=Math.min(a,p.chunk*p.ratio)}else l=r.getPixelForValue(this.getParsed(t)[r.axis],t),c=Math.min(a,n.min*n.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){let t=this._cachedMeta,n=t.vScale,r=t.data,o=r.length,s=0;for(;s<o;++s)this.getParsed(s)[n.axis]!==null&&!r[s].hidden&&r[s].draw(this._ctx)}}return i})(),H0e=(()=>{class i extends Zd{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,n,r,o){let s=super.parsePrimitiveData(t,n,r,o);for(let a=0;a<s.length;a++)s[a]._custom=this.resolveDataElementOptions(a+r).radius;return s}parseArrayData(t,n,r,o){let s=super.parseArrayData(t,n,r,o);for(let a=0;a<s.length;a++){let l=n[r+a];s[a]._custom=Bt(l[2],this.resolveDataElementOptions(a+r).radius)}return s}parseObjectData(t,n,r,o){let s=super.parseObjectData(t,n,r,o);for(let a=0;a<s.length;a++){let l=n[r+a];s[a]._custom=Bt(l&&l.r&&+l.r,this.resolveDataElementOptions(a+r).radius)}return s}getMaxOverflow(){let t=this._cachedMeta.data,n=0;for(let r=t.length-1;r>=0;--r)n=Math.max(n,t[r].size(this.resolveDataElementOptions(r))/2);return n>0&&n}getLabelAndValue(t){let n=this._cachedMeta,r=this.chart.data.labels||[],{xScale:o,yScale:s}=n,a=this.getParsed(t),l=o.getLabelForValue(a.x),c=s.getLabelForValue(a.y),d=a._custom;return{label:r[t]||"",value:"("+l+", "+c+(d?", "+d:"")+")"}}update(t){let n=this._cachedMeta.data;this.updateElements(n,0,n.length,t)}updateElements(t,n,r,o){let s=o==="reset",{iScale:a,vScale:l}=this._cachedMeta,{sharedOptions:c,includeOptions:d}=this._getSharedOptions(n,o),h=a.axis,p=l.axis;for(let g=n;g<n+r;g++){let _=t[g],b=!s&&this.getParsed(g),C={},y=C[h]=s?a.getPixelForDecimal(.5):a.getPixelForValue(b[h]),M=C[p]=s?l.getBasePixel():l.getPixelForValue(b[p]);C.skip=isNaN(y)||isNaN(M),d&&(C.options=c||this.resolveDataElementOptions(g,_.active?"active":o),s&&(C.options.radius=0)),this.updateElement(_,g,C,o)}}resolveDataElementOptions(t,n){let r=this.getParsed(t),o=super.resolveDataElementOptions(t,n);o.$shared&&(o=Object.assign({},o,{$shared:!1}));let s=o.radius;return n!=="active"&&(o.radius=0),o.radius+=Bt(r&&r._custom,s),o}}return i})();function G0e(i,e,t){let n=1,r=1,o=0,s=0;if(e<hi){let a=i,l=a+e,c=Math.cos(a),d=Math.sin(a),h=Math.cos(l),p=Math.sin(l),g=(O,A,D)=>Cg(O,a,l,!0)?1:Math.max(A,A*t,D,D*t),_=(O,A,D)=>Cg(O,a,l,!0)?-1:Math.min(A,A*t,D,D*t),b=g(0,c,h),C=g(Li,d,p),y=_(Mn,c,h),M=_(Mn+Li,d,p);n=(b-y)/2,r=(C-M)/2,o=-(b+y)/2,s=-(C+M)/2}return{ratioX:n,ratioY:r,offsetX:o,offsetY:s}}var k8=(()=>{class i extends Zd{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let n=t.data;if(n.labels.length&&n.datasets.length){let{labels:{pointStyle:r,color:o}}=t.legend.options;return n.labels.map((s,a)=>{let c=t.getDatasetMeta(0).controller.getStyle(a);return{text:s,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:o,lineWidth:c.borderWidth,pointStyle:r,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}};constructor(t,n){super(t,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,n){let r=this.getDataset().data,o=this._cachedMeta;if(this._parsing===!1)o._parsed=r;else{let s=c=>+r[c];if(ln(r[t])){let{key:c="value"}=this._parsing;s=d=>+Ic(r[d],c)}let a,l;for(a=t,l=t+n;a<l;++a)o._parsed[a]=s(a)}}_getRotation(){return Gs(this.options.rotation-90)}_getCircumference(){return Gs(this.options.circumference)}_getRotationExtents(){let t=hi,n=-hi;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){let o=this.chart.getDatasetMeta(r).controller,s=o._getRotation(),a=o._getCircumference();t=Math.min(t,s),n=Math.max(n,s+a)}return{rotation:t,circumference:n-t}}update(t){let n=this.chart,{chartArea:r}=n,o=this._cachedMeta,s=o.data,a=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,l=Math.max((Math.min(r.width,r.height)-a)/2,0),c=Math.min(Ij(this.options.cutout,l),1),d=this._getRingWeight(this.index),{circumference:h,rotation:p}=this._getRotationExtents(),{ratioX:g,ratioY:_,offsetX:b,offsetY:C}=G0e(p,h,c),y=(r.width-a)/g,M=(r.height-a)/_,O=Math.max(Math.min(y,M)/2,0),A=wD(this.options.radius,O),D=Math.max(A*c,0),N=(A-D)/this._getVisibleDatasetWeightTotal();this.offsetX=b*A,this.offsetY=C*A,o.total=this.calculateTotal(),this.outerRadius=A-N*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-N*d,0),this.updateElements(s,0,s.length,t)}_circumference(t,n){let r=this.options,o=this._cachedMeta,s=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(t)||o._parsed[t]===null||o.data[t].hidden?0:this.calculateCircumference(o._parsed[t]*s/hi)}updateElements(t,n,r,o){let s=o==="reset",a=this.chart,l=a.chartArea,d=a.options.animation,h=(l.left+l.right)/2,p=(l.top+l.bottom)/2,g=s&&d.animateScale,_=g?0:this.innerRadius,b=g?0:this.outerRadius,{sharedOptions:C,includeOptions:y}=this._getSharedOptions(n,o),M=this._getRotation(),O;for(O=0;O<n;++O)M+=this._circumference(O,s);for(O=n;O<n+r;++O){let A=this._circumference(O,s),D=t[O],N={x:h+this.offsetX,y:p+this.offsetY,startAngle:M,endAngle:M+A,circumference:A,outerRadius:b,innerRadius:_};y&&(N.options=C||this.resolveDataElementOptions(O,D.active?"active":o)),M+=A,this.updateElement(D,O,N,o)}}calculateTotal(){let t=this._cachedMeta,n=t.data,r=0,o;for(o=0;o<n.length;o++){let s=t._parsed[o];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(o)&&!n[o].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(t){let n=this._cachedMeta.total;return n>0&&!isNaN(t)?hi*(Math.abs(t)/n):0}getLabelAndValue(t){let n=this._cachedMeta,r=this.chart,o=r.data.labels||[],s=yg(n._parsed[t],r.options.locale);return{label:o[t]||"",value:s}}getMaxBorderWidth(t){let n=0,r=this.chart,o,s,a,l,c;if(!t){for(o=0,s=r.data.datasets.length;o<s;++o)if(r.isDatasetVisible(o)){a=r.getDatasetMeta(o),t=a.data,l=a.controller;break}}if(!t)return 0;for(o=0,s=t.length;o<s;++o)c=l.resolveDataElementOptions(o),c.borderAlign!=="inner"&&(n=Math.max(n,c.borderWidth||0,c.hoverBorderWidth||0));return n}getMaxOffset(t){let n=0;for(let r=0,o=t.length;r<o;++r){let s=this.resolveDataElementOptions(r);n=Math.max(n,s.offset||0,s.hoverOffset||0)}return n}_getRingWeightOffset(t){let n=0;for(let r=0;r<t;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(t){return Math.max(Bt(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return i})(),$0e=(()=>{class i extends Zd{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){let n=this._cachedMeta,{dataset:r,data:o=[],_dataset:s}=n,a=this.chart._animationsDisabled,{start:l,count:c}=ID(n,o,a);this._drawStart=l,this._drawCount=c,TD(n)&&(l=0,c=o.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=o;let d=this.resolveDatasetElementOptions(t);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(r,void 0,{animated:!a,options:d},t),this.updateElements(o,l,c,t)}updateElements(t,n,r,o){let s=o==="reset",{iScale:a,vScale:l,_stacked:c,_dataset:d}=this._cachedMeta,{sharedOptions:h,includeOptions:p}=this._getSharedOptions(n,o),g=a.axis,_=l.axis,{spanGaps:b,segment:C}=this.options,y=R0(b)?b:Number.POSITIVE_INFINITY,M=this.chart._animationsDisabled||s||o==="none",O=n+r,A=t.length,D=n>0&&this.getParsed(n-1);for(let N=0;N<A;++N){let B=t[N],T=M?B:{};if(N<n||N>=O){T.skip=!0;continue}let H=this.getParsed(N),te=on(H[_]),L=T[g]=a.getPixelForValue(H[g],N),z=T[_]=s||te?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,H,c):H[_],N);T.skip=isNaN(L)||isNaN(z)||te,T.stop=N>0&&Math.abs(H[g]-D[g])>y,C&&(T.parsed=H,T.raw=d.data[N]),p&&(T.options=h||this.resolveDataElementOptions(N,B.active?"active":o)),M||this.updateElement(B,N,T,o),D=H}}getMaxOverflow(){let t=this._cachedMeta,n=t.dataset,r=n.options&&n.options.borderWidth||0,o=t.data||[];if(!o.length)return r;let s=o[0].size(this.resolveDataElementOptions(0)),a=o[o.length-1].size(this.resolveDataElementOptions(o.length-1));return Math.max(r,s,a)/2}draw(){let t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}return i})(),cU=(()=>{class i extends Zd{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let n=t.data;if(n.labels.length&&n.datasets.length){let{labels:{pointStyle:r,color:o}}=t.legend.options;return n.labels.map((s,a)=>{let c=t.getDatasetMeta(0).controller.getStyle(a);return{text:s,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:o,lineWidth:c.borderWidth,pointStyle:r,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(t,n){super(t,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){let n=this._cachedMeta,r=this.chart,o=r.data.labels||[],s=yg(n._parsed[t].r,r.options.locale);return{label:o[t]||"",value:s}}parseObjectData(t,n,r,o){return HD.bind(this)(t,n,r,o)}update(t){let n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,t)}getMinMax(){let t=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((r,o)=>{let s=this.getParsed(o).r;!isNaN(s)&&this.chart.getDataVisibility(o)&&(s<n.min&&(n.min=s),s>n.max&&(n.max=s))}),n}_updateRadius(){let t=this.chart,n=t.chartArea,r=t.options,o=Math.min(n.right-n.left,n.bottom-n.top),s=Math.max(o/2,0),a=Math.max(r.cutoutPercentage?s/100*r.cutoutPercentage:1,0),l=(s-a)/t.getVisibleDatasetCount();this.outerRadius=s-l*this.index,this.innerRadius=this.outerRadius-l}updateElements(t,n,r,o){let s=o==="reset",a=this.chart,c=a.options.animation,d=this._cachedMeta.rScale,h=d.xCenter,p=d.yCenter,g=d.getIndexAngle(0)-.5*Mn,_=g,b,C=360/this.countVisibleElements();for(b=0;b<n;++b)_+=this._computeAngle(b,o,C);for(b=n;b<n+r;b++){let y=t[b],M=_,O=_+this._computeAngle(b,o,C),A=a.getDataVisibility(b)?d.getDistanceFromCenterForValue(this.getParsed(b).r):0;_=O,s&&(c.animateScale&&(A=0),c.animateRotate&&(M=O=g));let D={x:h,y:p,innerRadius:0,outerRadius:A,startAngle:M,endAngle:O,options:this.resolveDataElementOptions(b,y.active?"active":o)};this.updateElement(y,b,D,o)}}countVisibleElements(){let t=this._cachedMeta,n=0;return t.data.forEach((r,o)=>{!isNaN(this.getParsed(o).r)&&this.chart.getDataVisibility(o)&&n++}),n}_computeAngle(t,n,r){return this.chart.getDataVisibility(t)?Gs(this.resolveDataElementOptions(t,n).angle||r):0}}return i})(),W0e=(()=>{class i extends k8{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}return i})(),q0e=(()=>{class i extends Zd{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(t){let n=this._cachedMeta.vScale,r=this.getParsed(t);return{label:n.getLabels()[t],value:""+n.getLabelForValue(r[n.axis])}}parseObjectData(t,n,r,o){return HD.bind(this)(t,n,r,o)}update(t){let n=this._cachedMeta,r=n.dataset,o=n.data||[],s=n.iScale.getLabels();if(r.points=o,t!=="resize"){let a=this.resolveDatasetElementOptions(t);this.options.showLine||(a.borderWidth=0);let l={_loop:!0,_fullLoop:s.length===o.length,options:a};this.updateElement(r,void 0,l,t)}this.updateElements(o,0,o.length,t)}updateElements(t,n,r,o){let s=this._cachedMeta.rScale,a=o==="reset";for(let l=n;l<n+r;l++){let c=t[l],d=this.resolveDataElementOptions(l,c.active?"active":o),h=s.getPointPositionForValue(l,this.getParsed(l).r),p=a?s.xCenter:h.x,g=a?s.yCenter:h.y,_={x:p,y:g,angle:h.angle,skip:isNaN(p)||isNaN(g),options:d};this.updateElement(c,l,_,o)}}}return i})(),K0e=(()=>{class i extends Zd{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){let n=this._cachedMeta,r=this.chart.data.labels||[],{xScale:o,yScale:s}=n,a=this.getParsed(t),l=o.getLabelForValue(a.x),c=s.getLabelForValue(a.y);return{label:r[t]||"",value:"("+l+", "+c+")"}}update(t){let n=this._cachedMeta,{data:r=[]}=n,o=this.chart._animationsDisabled,{start:s,count:a}=ID(n,r,o);if(this._drawStart=s,this._drawCount=a,TD(n)&&(s=0,a=r.length),this.options.showLine){this.datasetElementType||this.addElements();let{dataset:l,_dataset:c}=n;l._chart=this.chart,l._datasetIndex=this.index,l._decimated=!!c._decimated,l.points=r;let d=this.resolveDatasetElementOptions(t);d.segment=this.options.segment,this.updateElement(l,void 0,{animated:!o,options:d},t)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(r,s,a,t)}addElements(){let{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,n,r,o){let s=o==="reset",{iScale:a,vScale:l,_stacked:c,_dataset:d}=this._cachedMeta,h=this.resolveDataElementOptions(n,o),p=this.getSharedOptions(h),g=this.includeOptions(o,p),_=a.axis,b=l.axis,{spanGaps:C,segment:y}=this.options,M=R0(C)?C:Number.POSITIVE_INFINITY,O=this.chart._animationsDisabled||s||o==="none",A=n>0&&this.getParsed(n-1);for(let D=n;D<n+r;++D){let N=t[D],B=this.getParsed(D),T=O?N:{},H=on(B[b]),te=T[_]=a.getPixelForValue(B[_],D),L=T[b]=s||H?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,B,c):B[b],D);T.skip=isNaN(te)||isNaN(L)||H,T.stop=D>0&&Math.abs(B[_]-A[_])>M,y&&(T.parsed=B,T.raw=d.data[D]),g&&(T.options=p||this.resolveDataElementOptions(D,N.active?"active":o)),O||this.updateElement(N,D,T,o),A=B}this.updateSharedOptions(p,o,h)}getMaxOverflow(){let t=this._cachedMeta,n=t.data||[];if(!this.options.showLine){let l=0;for(let c=n.length-1;c>=0;--c)l=Math.max(l,n[c].size(this.resolveDataElementOptions(c))/2);return l>0&&l}let r=t.dataset,o=r.options&&r.options.borderWidth||0;if(!n.length)return o;let s=n[0].size(this.resolveDataElementOptions(0)),a=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(o,s,a)/2}}return i})(),Y0e=Object.freeze({__proto__:null,BarController:U0e,BubbleController:H0e,DoughnutController:k8,LineController:$0e,PieController:W0e,PolarAreaController:cU,RadarController:q0e,ScatterController:K0e});function j0(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var d8=class i{static override(e){Object.assign(i.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return j0()}parse(){return j0()}format(){return j0()}add(){return j0()}diff(){return j0()}startOf(){return j0()}endOf(){return j0()}},X0e={_date:d8};function Q0e(i,e,t,n){let{controller:r,data:o,_sorted:s}=i,a=r._cachedMeta.iScale,l=i.dataset&&i.dataset.options?i.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&s&&o.length){let c=a._reversePixels?zj:Sl;if(n){if(r._sharedOptions){let d=o[0],h=typeof d.getRange=="function"&&d.getRange(e);if(h){let p=c(o,e,t-h),g=c(o,e,t+h);return{lo:p.lo,hi:g.hi}}}}else{let d=c(o,e,t);if(l){let{vScale:h}=r._cachedMeta,{_parsed:p}=i,g=p.slice(0,d.lo+1).reverse().findIndex(b=>!on(b[h.axis]));d.lo-=Math.max(0,g);let _=p.slice(d.hi).findIndex(b=>!on(b[h.axis]));d.hi+=Math.max(0,_)}return d}}return{lo:0,hi:o.length-1}}function s1(i,e,t,n,r){let o=i.getSortedVisibleDatasetMetas(),s=t[e];for(let a=0,l=o.length;a<l;++a){let{index:c,data:d}=o[a],{lo:h,hi:p}=Q0e(o[a],e,s,r);for(let g=h;g<=p;++g){let _=d[g];_.skip||n(_,c,g)}}}function J0e(i){let e=i.indexOf("x")!==-1,t=i.indexOf("y")!==-1;return function(n,r){let o=e?Math.abs(n.x-r.x):0,s=t?Math.abs(n.y-r.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(s,2))}}function t8(i,e,t,n,r){let o=[];return!r&&!i.isPointInArea(e)||s1(i,t,e,function(a,l,c){!r&&!kl(a,i.chartArea,0)||a.inRange(e.x,e.y,n)&&o.push({element:a,datasetIndex:l,index:c})},!0),o}function Z0e(i,e,t,n){let r=[];function o(s,a,l){let{startAngle:c,endAngle:d}=s.getProps(["startAngle","endAngle"],n),{angle:h}=SD(s,{x:e.x,y:e.y});Cg(h,c,d)&&r.push({element:s,datasetIndex:a,index:l})}return s1(i,t,e,o),r}function ehe(i,e,t,n,r,o){let s=[],a=J0e(t),l=Number.POSITIVE_INFINITY;function c(d,h,p){let g=d.inRange(e.x,e.y,r);if(n&&!g)return;let _=d.getCenterPoint(r);if(!(!!o||i.isPointInArea(_))&&!g)return;let C=a(e,_);C<l?(s=[{element:d,datasetIndex:h,index:p}],l=C):C===l&&s.push({element:d,datasetIndex:h,index:p})}return s1(i,t,e,c),s}function n8(i,e,t,n,r,o){return!o&&!i.isPointInArea(e)?[]:t==="r"&&!n?Z0e(i,e,t,r):ehe(i,e,t,n,r,o)}function mV(i,e,t,n,r){let o=[],s=t==="x"?"inXRange":"inYRange",a=!1;return s1(i,t,e,(l,c,d)=>{l[s]&&l[s](e[t],r)&&(o.push({element:l,datasetIndex:c,index:d}),a=a||l.inRange(e.x,e.y,r))}),n&&!a?[]:o}var the={evaluateInteractionItems:s1,modes:{index(i,e,t,n){let r=Qd(e,i),o=t.axis||"x",s=t.includeInvisible||!1,a=t.intersect?t8(i,r,o,n,s):n8(i,r,o,!1,n,s),l=[];return a.length?(i.getSortedVisibleDatasetMetas().forEach(c=>{let d=a[0].index,h=c.data[d];h&&!h.skip&&l.push({element:h,datasetIndex:c.index,index:d})}),l):[]},dataset(i,e,t,n){let r=Qd(e,i),o=t.axis||"xy",s=t.includeInvisible||!1,a=t.intersect?t8(i,r,o,n,s):n8(i,r,o,!1,n,s);if(a.length>0){let l=a[0].datasetIndex,c=i.getDatasetMeta(l).data;a=[];for(let d=0;d<c.length;++d)a.push({element:c[d],datasetIndex:l,index:d})}return a},point(i,e,t,n){let r=Qd(e,i),o=t.axis||"xy",s=t.includeInvisible||!1;return t8(i,r,o,n,s)},nearest(i,e,t,n){let r=Qd(e,i),o=t.axis||"xy",s=t.includeInvisible||!1;return n8(i,r,o,t.intersect,n,s)},x(i,e,t,n){let r=Qd(e,i);return mV(i,r,"x",t.intersect,n)},y(i,e,t,n){let r=Qd(e,i);return mV(i,r,"y",t.intersect,n)}}},dU=["left","top","right","bottom"];function Qx(i,e){return i.filter(t=>t.pos===e)}function xV(i,e){return i.filter(t=>dU.indexOf(t.pos)===-1&&t.box.axis===e)}function Jx(i,e){return i.sort((t,n)=>{let r=e?n:t,o=e?t:n;return r.weight===o.weight?r.index-o.index:r.weight-o.weight})}function nhe(i){let e=[],t,n,r,o,s,a;for(t=0,n=(i||[]).length;t<n;++t)r=i[t],{position:o,options:{stack:s,stackWeight:a=1}}=r,e.push({index:t,box:r,pos:o,horizontal:r.isHorizontal(),weight:r.weight,stack:s&&o+s,stackWeight:a});return e}function ihe(i){let e={};for(let t of i){let{stack:n,pos:r,stackWeight:o}=t;if(!n||!dU.includes(r))continue;let s=e[n]||(e[n]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=o}return e}function rhe(i,e){let t=ihe(i),{vBoxMaxWidth:n,hBoxMaxHeight:r}=e,o,s,a;for(o=0,s=i.length;o<s;++o){a=i[o];let{fullSize:l}=a.box,c=t[a.stack],d=c&&a.stackWeight/c.weight;a.horizontal?(a.width=d?d*n:l&&e.availableWidth,a.height=r):(a.width=n,a.height=d?d*r:l&&e.availableHeight)}return t}function ohe(i){let e=nhe(i),t=Jx(e.filter(c=>c.box.fullSize),!0),n=Jx(Qx(e,"left"),!0),r=Jx(Qx(e,"right")),o=Jx(Qx(e,"top"),!0),s=Jx(Qx(e,"bottom")),a=xV(e,"x"),l=xV(e,"y");return{fullSize:t,leftAndTop:n.concat(o),rightAndBottom:r.concat(l).concat(s).concat(a),chartArea:Qx(e,"chartArea"),vertical:n.concat(r).concat(l),horizontal:o.concat(s).concat(a)}}function _V(i,e,t,n){return Math.max(i[t],e[t])+Math.max(i[n],e[n])}function uU(i,e){i.top=Math.max(i.top,e.top),i.left=Math.max(i.left,e.left),i.bottom=Math.max(i.bottom,e.bottom),i.right=Math.max(i.right,e.right)}function she(i,e,t,n){let{pos:r,box:o}=t,s=i.maxPadding;if(!ln(r)){t.size&&(i[r]-=t.size);let h=n[t.stack]||{size:0,count:1};h.size=Math.max(h.size,t.horizontal?o.height:o.width),t.size=h.size/h.count,i[r]+=t.size}o.getPadding&&uU(s,o.getPadding());let a=Math.max(0,e.outerWidth-_V(s,i,"left","right")),l=Math.max(0,e.outerHeight-_V(s,i,"top","bottom")),c=a!==i.w,d=l!==i.h;return i.w=a,i.h=l,t.horizontal?{same:c,other:d}:{same:d,other:c}}function ahe(i){let e=i.maxPadding;function t(n){let r=Math.max(e[n]-i[n],0);return i[n]+=r,r}i.y+=t("top"),i.x+=t("left"),t("right"),t("bottom")}function lhe(i,e){let t=e.maxPadding;function n(r){let o={left:0,top:0,right:0,bottom:0};return r.forEach(s=>{o[s]=Math.max(e[s],t[s])}),o}return n(i?["left","right"]:["top","bottom"])}function t1(i,e,t,n){let r=[],o,s,a,l,c,d;for(o=0,s=i.length,c=0;o<s;++o){a=i[o],l=a.box,l.update(a.width||e.w,a.height||e.h,lhe(a.horizontal,e));let{same:h,other:p}=she(e,t,a,n);c|=h&&r.length,d=d||p,l.fullSize||r.push(a)}return c&&t1(r,e,t,n)||d}function c5(i,e,t,n,r){i.top=t,i.left=e,i.right=e+n,i.bottom=t+r,i.width=n,i.height=r}function vV(i,e,t,n){let r=t.padding,{x:o,y:s}=e;for(let a of i){let l=a.box,c=n[a.stack]||{count:1,placed:0,weight:1},d=a.stackWeight/c.weight||1;if(a.horizontal){let h=e.w*d,p=c.size||l.height;vg(c.start)&&(s=c.start),l.fullSize?c5(l,r.left,s,t.outerWidth-r.right-r.left,p):c5(l,e.left+c.placed,s,h,p),c.start=s,c.placed+=h,s=l.bottom}else{let h=e.h*d,p=c.size||l.width;vg(c.start)&&(o=c.start),l.fullSize?c5(l,o,r.top,p,t.outerHeight-r.bottom-r.top):c5(l,o,e.top+c.placed,p,h),c.start=o,c.placed+=h,o=l.right}}e.x=o,e.y=s}var eo={addBox(i,e){i.boxes||(i.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},i.boxes.push(e)},removeBox(i,e){let t=i.boxes?i.boxes.indexOf(e):-1;t!==-1&&i.boxes.splice(t,1)},configure(i,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(i,e,t,n){if(!i)return;let r=Br(i.options.layout.padding),o=Math.max(e-r.width,0),s=Math.max(t-r.height,0),a=ohe(i.boxes),l=a.vertical,c=a.horizontal;Rn(i.boxes,b=>{typeof b.beforeLayout=="function"&&b.beforeLayout()});let d=l.reduce((b,C)=>C.box.options&&C.box.options.display===!1?b:b+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:t,padding:r,availableWidth:o,availableHeight:s,vBoxMaxWidth:o/2/d,hBoxMaxHeight:s/2}),p=Object.assign({},r);uU(p,Br(n));let g=Object.assign({maxPadding:p,w:o,h:s,x:r.left,y:r.top},r),_=rhe(l.concat(c),h);t1(a.fullSize,g,h,_),t1(l,g,h,_),t1(c,g,h,_)&&t1(l,g,h,_),ahe(g),vV(a.leftAndTop,g,h,_),g.x+=g.w,g.y+=g.h,vV(a.rightAndBottom,g,h,_),i.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},Rn(a.chartArea,b=>{let C=b.box;Object.assign(C,i.chartArea),C.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}},_5=class{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,r){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):n)}}isAttached(e){return!0}updateConfig(e){}},u8=class extends _5{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}},p5="$chartjs",che={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},bV=i=>i===null||i==="";function dhe(i,e){let t=i.style,n=i.getAttribute("height"),r=i.getAttribute("width");if(i[p5]={initial:{height:n,width:r,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",bV(r)){let o=$D(i,"width");o!==void 0&&(i.width=o)}if(bV(n))if(i.style.height==="")i.height=i.width/(e||2);else{let o=$D(i,"height");o!==void 0&&(i.height=o)}return i}var hU=nV?{passive:!0}:!1;function uhe(i,e,t){i&&i.addEventListener(e,t,hU)}function hhe(i,e,t){i&&i.canvas&&i.canvas.removeEventListener(e,t,hU)}function fhe(i,e){let t=che[i.type]||i.type,{x:n,y:r}=Qd(i,e);return{type:t,chart:e,native:i,x:n!==void 0?n:null,y:r!==void 0?r:null}}function v5(i,e){for(let t of i)if(t===e||t.contains(e))return!0}function ghe(i,e,t){let n=i.canvas,r=new MutationObserver(o=>{let s=!1;for(let a of o)s=s||v5(a.addedNodes,n),s=s&&!v5(a.removedNodes,n);s&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}function phe(i,e,t){let n=i.canvas,r=new MutationObserver(o=>{let s=!1;for(let a of o)s=s||v5(a.removedNodes,n),s=s&&!v5(a.addedNodes,n);s&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}var i1=new Map,CV=0;function fU(){let i=window.devicePixelRatio;i!==CV&&(CV=i,i1.forEach((e,t)=>{t.currentDevicePixelRatio!==i&&e()}))}function mhe(i,e){i1.size||window.addEventListener("resize",fU),i1.set(i,e)}function xhe(i){i1.delete(i),i1.size||window.removeEventListener("resize",fU)}function _he(i,e,t){let n=i.canvas,r=n&&a5(n);if(!r)return;let o=FD((a,l)=>{let c=r.clientWidth;t(a,l),c<r.clientWidth&&t()},window),s=new ResizeObserver(a=>{let l=a[0],c=l.contentRect.width,d=l.contentRect.height;c===0&&d===0||o(c,d)});return s.observe(r),mhe(i,o),s}function i8(i,e,t){t&&t.disconnect(),e==="resize"&&xhe(i)}function vhe(i,e,t){let n=i.canvas,r=FD(o=>{i.ctx!==null&&t(fhe(o,i))},i);return uhe(n,e,r),r}var h8=class extends _5{acquireContext(e,t){let n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(dhe(e,t),n):null}releaseContext(e){let t=e.canvas;if(!t[p5])return!1;let n=t[p5].initial;["height","width"].forEach(o=>{let s=n[o];on(s)?t.removeAttribute(o):t.setAttribute(o,s)});let r=n.style||{};return Object.keys(r).forEach(o=>{t.style[o]=r[o]}),t.width=t.width,delete t[p5],!0}addEventListener(e,t,n){this.removeEventListener(e,t);let r=e.$proxies||(e.$proxies={}),s={attach:ghe,detach:phe,resize:_he}[t]||vhe;r[t]=s(e,t,n)}removeEventListener(e,t){let n=e.$proxies||(e.$proxies={}),r=n[t];if(!r)return;({attach:i8,detach:i8,resize:i8}[t]||hhe)(e,t,r),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,r){return tV(e,t,n,r)}isAttached(e){let t=e&&a5(e);return!!(t&&t.isConnected)}};function bhe(i){return!s5()||typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas?u8:h8}var Ba=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){let{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return R0(this.x)&&R0(this.y)}getProps(e,t){let n=this.$animations;if(!t||!n)return this;let r={};return e.forEach(o=>{r[o]=n[o]&&n[o].active()?n[o]._to:this[o]}),r}};function Che(i,e){let t=i.options.ticks,n=yhe(i),r=Math.min(t.maxTicksLimit||n,n),o=t.major.enabled?Mhe(e):[],s=o.length,a=o[0],l=o[s-1],c=[];if(s>r)return Ehe(e,c,o,s/r),c;let d=whe(o,e,r);if(s>0){let h,p,g=s>1?Math.round((l-a)/(s-1)):null;for(d5(e,c,d,on(g)?0:a-g,a),h=0,p=s-1;h<p;h++)d5(e,c,d,o[h],o[h+1]);return d5(e,c,d,l,on(g)?e.length:l+g),c}return d5(e,c,d),c}function yhe(i){let e=i.options.offset,t=i._tickSize(),n=i._length/t+(e?0:1),r=i._maxLength/t;return Math.floor(Math.min(n,r))}function whe(i,e,t){let n=Phe(i),r=e.length/t;if(!n)return Math.max(r,1);let o=Nj(n);for(let s=0,a=o.length-1;s<a;s++){let l=o[s];if(l>r)return l}return Math.max(r,1)}function Mhe(i){let e=[],t,n;for(t=0,n=i.length;t<n;t++)i[t].major&&e.push(t);return e}function Ehe(i,e,t,n){let r=0,o=t[0],s;for(n=Math.ceil(n),s=0;s<i.length;s++)s===o&&(e.push(i[s]),r++,o=t[r*n])}function d5(i,e,t,n,r){let o=Bt(n,0),s=Math.min(Bt(r,i.length),i.length),a=0,l,c,d;for(t=Math.ceil(t),r&&(l=r-n,t=l/Math.floor(l/t)),d=o;d<0;)a++,d=Math.round(o+a*t);for(c=Math.max(o,0);c<s;c++)c===d&&(e.push(i[c]),a++,d=Math.round(o+a*t))}function Phe(i){let e=i.length,t,n;if(e<2)return!1;for(n=i[0],t=1;t<e;++t)if(i[t]-i[t-1]!==n)return!1;return n}var Ohe=i=>i==="left"?"right":i==="right"?"left":i,yV=(i,e,t)=>e==="top"||e==="left"?i[e]+t:i[e]-t,wV=(i,e)=>Math.min(e||i,i);function MV(i,e){let t=[],n=i.length/e,r=i.length,o=0;for(;o<r;o+=n)t.push(i[Math.floor(o)]);return t}function She(i,e,t){let n=i.ticks.length,r=Math.min(e,n-1),o=i._startPixel,s=i._endPixel,a=1e-6,l=i.getPixelForTick(r),c;if(!(t&&(n===1?c=Math.max(l-o,s-l):e===0?c=(i.getPixelForTick(1)-l)/2:c=(l-i.getPixelForTick(r-1))/2,l+=r<e?c:-c,l<o-a||l>s+a)))return l}function khe(i,e){Rn(i,t=>{let n=t.gc,r=n.length/2,o;if(r>e){for(o=0;o<r;++o)delete t.data[n[o]];n.splice(0,r)}})}function Zx(i){return i.drawTicks?i.tickLength:0}function EV(i,e){if(!i.display)return 0;let t=cr(i.font,e),n=Br(i.padding);return(ui(i.text)?i.text.length:1)*t.lineHeight+n.height}function Ahe(i,e){return Tc(i,{scale:e,type:"scale"})}function Dhe(i,e,t){return Tc(i,{tick:t,index:e,type:"tick"})}function Fhe(i,e,t){let n=t5(i);return(t&&e!=="right"||!t&&e==="right")&&(n=Ohe(n)),n}function Ihe(i,e,t,n){let{top:r,left:o,bottom:s,right:a,chart:l}=i,{chartArea:c,scales:d}=l,h=0,p,g,_,b=s-r,C=a-o;if(i.isHorizontal()){if(g=Tr(n,o,a),ln(t)){let y=Object.keys(t)[0],M=t[y];_=d[y].getPixelForValue(M)+b-e}else t==="center"?_=(c.bottom+c.top)/2+b-e:_=yV(i,t,e);p=a-o}else{if(ln(t)){let y=Object.keys(t)[0],M=t[y];g=d[y].getPixelForValue(M)-C+e}else t==="center"?g=(c.left+c.right)/2-C+e:g=yV(i,t,e);_=Tr(n,s,r),h=t==="left"?-Li:Li}return{titleX:g,titleY:_,maxWidth:p,rotation:h}}var U0=class i extends Ba{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:r}=this;return e=Go(e,Number.POSITIVE_INFINITY),t=Go(t,Number.NEGATIVE_INFINITY),n=Go(n,Number.POSITIVE_INFINITY),r=Go(r,Number.NEGATIVE_INFINITY),{min:Go(e,n),max:Go(t,r),minDefined:Pi(e),maxDefined:Pi(t)}}getMinMax(e){let{min:t,max:n,minDefined:r,maxDefined:o}=this.getUserBounds(),s;if(r&&o)return{min:t,max:n};let a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)s=a[l].controller.getMinMax(this,e),r||(t=Math.min(t,s.min)),o||(n=Math.max(n,s.max));return t=o&&t>n?n:t,n=r&&t>n?t:n,{min:Go(t,Go(n,t)),max:Go(n,Go(t,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ni(this.options.beforeUpdate,[this])}update(e,t,n){let{beginAtZero:r,grace:o,ticks:s}=this.options,a=s.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Yj(this,o,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let l=a<this.ticks.length;this._convertTicksToLabels(l?MV(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||s.source==="auto")&&(this.ticks=Che(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,n;this.isHorizontal()?(t=this.left,n=this.right):(t=this.top,n=this.bottom,e=!e),this._startPixel=t,this._endPixel=n,this._reversePixels=e,this._length=n-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ni(this.options.afterUpdate,[this])}beforeSetDimensions(){ni(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ni(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),ni(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ni(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){let t=this.options.ticks,n,r,o;for(n=0,r=e.length;n<r;n++)o=e[n],o.label=ni(t.callback,[o.value,n,e],this)}afterTickToLabelConversion(){ni(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ni(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let e=this.options,t=e.ticks,n=wV(this.ticks.length,e.ticks.maxTicksLimit),r=t.minRotation||0,o=t.maxRotation,s=r,a,l,c;if(!this._isVisible()||!t.display||r>=o||n<=1||!this.isHorizontal()){this.labelRotation=r;return}let d=this._getLabelSizes(),h=d.widest.width,p=d.highest.height,g=br(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/n:g/(n-1),h+6>a&&(a=g/(n-(e.offset?.5:1)),l=this.maxHeight-Zx(e.grid)-t.padding-EV(e.title,this.chart.options.font),c=Math.sqrt(h*h+p*p),s=Z2(Math.min(Math.asin(br((d.highest.height+6)/a,-1,1)),Math.asin(br(l/c,-1,1))-Math.asin(br(p/c,-1,1)))),s=Math.max(r,Math.min(o,s))),this.labelRotation=s}afterCalculateLabelRotation(){ni(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ni(this.options.beforeFit,[this])}fit(){let e={width:0,height:0},{chart:t,options:{ticks:n,title:r,grid:o}}=this,s=this._isVisible(),a=this.isHorizontal();if(s){let l=EV(r,t.options.font);if(a?(e.width=this.maxWidth,e.height=Zx(o)+l):(e.height=this.maxHeight,e.width=Zx(o)+l),n.display&&this.ticks.length){let{first:c,last:d,widest:h,highest:p}=this._getLabelSizes(),g=n.padding*2,_=Gs(this.labelRotation),b=Math.cos(_),C=Math.sin(_);if(a){let y=n.mirror?0:C*h.width+b*p.height;e.height=Math.min(this.maxHeight,e.height+y+g)}else{let y=n.mirror?0:b*h.width+C*p.height;e.width=Math.min(this.maxWidth,e.width+y+g)}this._calculatePadding(c,d,C,b)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,r){let{ticks:{align:o,padding:s},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){let d=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1),p=0,g=0;l?c?(p=r*e.width,g=n*t.height):(p=n*e.height,g=r*t.width):o==="start"?g=t.width:o==="end"?p=e.width:o!=="inner"&&(p=e.width/2,g=t.width/2),this.paddingLeft=Math.max((p-d+s)*this.width/(this.width-d),0),this.paddingRight=Math.max((g-h+s)*this.width/(this.width-h),0)}else{let d=t.height/2,h=e.height/2;o==="start"?(d=0,h=e.height):o==="end"&&(d=t.height,h=0),this.paddingTop=d+s,this.paddingBottom=h+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ni(this.options.afterFit,[this])}isHorizontal(){let{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,n;for(t=0,n=e.length;t<n;t++)on(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){let t=this.options.ticks.sampleSize,n=this.ticks;t<n.length&&(n=MV(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,n){let{ctx:r,_longestTextCache:o}=this,s=[],a=[],l=Math.floor(t/wV(t,n)),c=0,d=0,h,p,g,_,b,C,y,M,O,A,D;for(h=0;h<t;h+=l){if(_=e[h].label,b=this._resolveTickFontOptions(h),r.font=C=b.string,y=o[C]=o[C]||{data:{},gc:[]},M=b.lineHeight,O=A=0,!on(_)&&!ui(_))O=$x(r,y.data,y.gc,O,_),A=M;else if(ui(_))for(p=0,g=_.length;p<g;++p)D=_[p],!on(D)&&!ui(D)&&(O=$x(r,y.data,y.gc,O,D),A+=M);s.push(O),a.push(A),c=Math.max(O,c),d=Math.max(A,d)}khe(o,t);let N=s.indexOf(c),B=a.indexOf(d),T=H=>({width:s[H]||0,height:a[H]||0});return{first:T(0),last:T(t-1),widest:T(N),highest:T(B),widths:s,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){let t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);let t=this._startPixel+e*this._length;return Rj(this._alignToPixels?Kd(this.chart,t,0):t)}getDecimalForPixel(e){let t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){let t=this.ticks||[];if(e>=0&&e<t.length){let n=t[e];return n.$context||(n.$context=Dhe(this.getContext(),e,n))}return this.$context||(this.$context=Ahe(this.chart.getContext(),this))}_tickSize(){let e=this.options.ticks,t=Gs(this.labelRotation),n=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),o=this._getLabelSizes(),s=e.autoSkipPadding||0,a=o?o.widest.width+s:0,l=o?o.highest.height+s:0;return this.isHorizontal()?l*n>a*r?a/n:l/r:l*r<a*n?l/n:a/r}_isVisible(){let e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){let t=this.axis,n=this.chart,r=this.options,{grid:o,position:s,border:a}=r,l=o.offset,c=this.isHorizontal(),h=this.ticks.length+(l?1:0),p=Zx(o),g=[],_=a.setContext(this.getContext()),b=_.display?_.width:0,C=b/2,y=function(X){return Kd(n,X,b)},M,O,A,D,N,B,T,H,te,L,z,J;if(s==="top")M=y(this.bottom),B=this.bottom-p,H=M-C,L=y(e.top)+C,J=e.bottom;else if(s==="bottom")M=y(this.top),L=e.top,J=y(e.bottom)-C,B=M+C,H=this.top+p;else if(s==="left")M=y(this.right),N=this.right-p,T=M-C,te=y(e.left)+C,z=e.right;else if(s==="right")M=y(this.left),te=e.left,z=y(e.right)-C,N=M+C,T=this.left+p;else if(t==="x"){if(s==="center")M=y((e.top+e.bottom)/2+.5);else if(ln(s)){let X=Object.keys(s)[0],ie=s[X];M=y(this.chart.scales[X].getPixelForValue(ie))}L=e.top,J=e.bottom,B=M+C,H=B+p}else if(t==="y"){if(s==="center")M=y((e.left+e.right)/2);else if(ln(s)){let X=Object.keys(s)[0],ie=s[X];M=y(this.chart.scales[X].getPixelForValue(ie))}N=M-C,T=N-p,te=e.left,z=e.right}let Q=Bt(r.ticks.maxTicksLimit,h),ce=Math.max(1,Math.ceil(h/Q));for(O=0;O<h;O+=ce){let X=this.getContext(O),ie=o.setContext(X),oe=a.setContext(X),le=ie.lineWidth,Ce=ie.color,Ne=oe.dash||[],R=oe.dashOffset,ne=ie.tickWidth,re=ie.tickColor,de=ie.tickBorderDash||[],fe=ie.tickBorderDashOffset;A=She(this,O,l),A!==void 0&&(D=Kd(n,A,le),c?N=T=te=z=D:B=H=L=J=D,g.push({tx1:N,ty1:B,tx2:T,ty2:H,x1:te,y1:L,x2:z,y2:J,width:le,color:Ce,borderDash:Ne,borderDashOffset:R,tickWidth:ne,tickColor:re,tickBorderDash:de,tickBorderDashOffset:fe}))}return this._ticksLength=h,this._borderValue=M,g}_computeLabelItems(e){let t=this.axis,n=this.options,{position:r,ticks:o}=n,s=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:d,mirror:h}=o,p=Zx(n.grid),g=p+d,_=h?-d:g,b=-Gs(this.labelRotation),C=[],y,M,O,A,D,N,B,T,H,te,L,z,J="middle";if(r==="top")N=this.bottom-_,B=this._getXAxisLabelAlignment();else if(r==="bottom")N=this.top+_,B=this._getXAxisLabelAlignment();else if(r==="left"){let ce=this._getYAxisLabelAlignment(p);B=ce.textAlign,D=ce.x}else if(r==="right"){let ce=this._getYAxisLabelAlignment(p);B=ce.textAlign,D=ce.x}else if(t==="x"){if(r==="center")N=(e.top+e.bottom)/2+g;else if(ln(r)){let ce=Object.keys(r)[0],X=r[ce];N=this.chart.scales[ce].getPixelForValue(X)+g}B=this._getXAxisLabelAlignment()}else if(t==="y"){if(r==="center")D=(e.left+e.right)/2-g;else if(ln(r)){let ce=Object.keys(r)[0],X=r[ce];D=this.chart.scales[ce].getPixelForValue(X)}B=this._getYAxisLabelAlignment(p).textAlign}t==="y"&&(l==="start"?J="top":l==="end"&&(J="bottom"));let Q=this._getLabelSizes();for(y=0,M=a.length;y<M;++y){O=a[y],A=O.label;let ce=o.setContext(this.getContext(y));T=this.getPixelForTick(y)+o.labelOffset,H=this._resolveTickFontOptions(y),te=H.lineHeight,L=ui(A)?A.length:1;let X=L/2,ie=ce.color,oe=ce.textStrokeColor,le=ce.textStrokeWidth,Ce=B;s?(D=T,B==="inner"&&(y===M-1?Ce=this.options.reverse?"left":"right":y===0?Ce=this.options.reverse?"right":"left":Ce="center"),r==="top"?c==="near"||b!==0?z=-L*te+te/2:c==="center"?z=-Q.highest.height/2-X*te+te:z=-Q.highest.height+te/2:c==="near"||b!==0?z=te/2:c==="center"?z=Q.highest.height/2-X*te:z=Q.highest.height-L*te,h&&(z*=-1),b!==0&&!ce.showLabelBackdrop&&(D+=te/2*Math.sin(b))):(N=T,z=(1-L)*te/2);let Ne;if(ce.showLabelBackdrop){let R=Br(ce.backdropPadding),ne=Q.heights[y],re=Q.widths[y],de=z-R.top,fe=0-R.left;switch(J){case"middle":de-=ne/2;break;case"bottom":de-=ne;break}switch(B){case"center":fe-=re/2;break;case"right":fe-=re;break;case"inner":y===M-1?fe-=re:y>0&&(fe-=re/2);break}Ne={left:fe,top:de,width:re+R.width,height:ne+R.height,color:ce.backdropColor}}C.push({label:A,font:H,textOffset:z,options:{rotation:b,color:ie,strokeColor:oe,strokeWidth:le,textAlign:Ce,textBaseline:J,translation:[D,N],backdrop:Ne}})}return C}_getXAxisLabelAlignment(){let{position:e,ticks:t}=this.options;if(-Gs(this.labelRotation))return e==="top"?"left":"right";let r="center";return t.align==="start"?r="left":t.align==="end"?r="right":t.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){let{position:t,ticks:{crossAlign:n,mirror:r,padding:o}}=this.options,s=this._getLabelSizes(),a=e+o,l=s.widest.width,c,d;return t==="left"?r?(d=this.right+o,n==="near"?c="left":n==="center"?(c="center",d+=l/2):(c="right",d+=l)):(d=this.right-a,n==="near"?c="right":n==="center"?(c="center",d-=l/2):(c="left",d=this.left)):t==="right"?r?(d=this.left+o,n==="near"?c="right":n==="center"?(c="center",d-=l/2):(c="left",d-=l)):(d=this.left+a,n==="near"?c="left":n==="center"?(c="center",d+=l/2):(c="right",d=this.right)):c="right",{textAlign:c,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;let e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){let{ctx:e,options:{backgroundColor:t},left:n,top:r,width:o,height:s}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,r,o,s),e.restore())}getLineWidthForValue(e){let t=this.options.grid;if(!this._isVisible()||!t.display)return 0;let r=this.ticks.findIndex(o=>o.value===e);return r>=0?t.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){let t=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e)),o,s,a=(l,c,d)=>{!d.width||!d.color||(n.save(),n.lineWidth=d.width,n.strokeStyle=d.color,n.setLineDash(d.borderDash||[]),n.lineDashOffset=d.borderDashOffset,n.beginPath(),n.moveTo(l.x,l.y),n.lineTo(c.x,c.y),n.stroke(),n.restore())};if(t.display)for(o=0,s=r.length;o<s;++o){let l=r[o];t.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),t.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){let{chart:e,ctx:t,options:{border:n,grid:r}}=this,o=n.setContext(this.getContext()),s=n.display?o.width:0;if(!s)return;let a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue,c,d,h,p;this.isHorizontal()?(c=Kd(e,this.left,s)-s/2,d=Kd(e,this.right,a)+a/2,h=p=l):(h=Kd(e,this.top,s)-s/2,p=Kd(e,this.bottom,a)+a/2,c=d=l),t.save(),t.lineWidth=o.width,t.strokeStyle=o.color,t.beginPath(),t.moveTo(c,h),t.lineTo(d,p),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;let n=this.ctx,r=this._computeLabelArea();r&&Kx(n,r);let o=this.getLabelItems(e);for(let s of o){let a=s.options,l=s.font,c=s.label,d=s.textOffset;Yd(n,c,0,d,l,a)}r&&Yx(n)}drawTitle(){let{ctx:e,options:{position:t,title:n,reverse:r}}=this;if(!n.display)return;let o=cr(n.font),s=Br(n.padding),a=n.align,l=o.lineHeight/2;t==="bottom"||t==="center"||ln(t)?(l+=s.bottom,ui(n.text)&&(l+=o.lineHeight*(n.text.length-1))):l+=s.top;let{titleX:c,titleY:d,maxWidth:h,rotation:p}=Ihe(this,l,t,a);Yd(e,n.text,0,0,o,{color:n.color,maxWidth:h,rotation:p,textAlign:Fhe(a,t,r),textBaseline:"middle",translation:[c,d]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){let e=this.options,t=e.ticks&&e.ticks.z||0,n=Bt(e.grid&&e.grid.z,-1),r=Bt(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==i.prototype.draw?[{z:t,draw:o=>{this.draw(o)}}]:[{z:n,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:t,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(e){let t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[],o,s;for(o=0,s=t.length;o<s;++o){let a=t[o];a[n]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){let t=this.options.ticks.setContext(this.getContext(e));return cr(t.font)}_maxDigits(){let e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}},Pg=class{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){let t=Object.getPrototypeOf(e),n;Nhe(t)&&(n=this.register(t));let r=this.items,o=e.id,s=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+e);return o in r||(r[o]=e,The(e,s,n),this.override&&pi.override(e.id,e.overrides)),s}get(e){return this.items[e]}unregister(e){let t=this.items,n=e.id,r=this.scope;n in t&&delete t[n],r&&n in pi[r]&&(delete pi[r][n],this.override&&delete qd[n])}};function The(i,e,t){let n=mg(Object.create(null),[t?pi.get(t):{},pi.get(e),i.defaults]);pi.set(e,n),i.defaultRoutes&&Bhe(e,i.defaultRoutes),i.descriptors&&pi.describe(e,i.descriptors)}function Bhe(i,e){Object.keys(e).forEach(t=>{let n=t.split("."),r=n.pop(),o=[i].concat(n).join("."),s=e[t].split("."),a=s.pop(),l=s.join(".");pi.route(o,r,l,a)})}function Nhe(i){return"id"in i&&"defaults"in i}var f8=class{constructor(){this.controllers=new Pg(Zd,"datasets",!0),this.elements=new Pg(Ba,"elements"),this.plugins=new Pg(Object,"plugins"),this.scales=new Pg(U0,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,n){[...t].forEach(r=>{let o=n||this._getRegistryForType(r);n||o.isForType(r)||o===this.plugins&&r.id?this._exec(e,o,r):Rn(r,s=>{let a=n||this._getRegistryForType(s);this._exec(e,a,s)})})}_exec(e,t,n){let r=J2(e);ni(n["before"+r],[],n),t[e](n),ni(n["after"+r],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){let n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){let r=t.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+n+".");return r}},Il=new f8,g8=class{constructor(){this._init=[]}notify(e,t,n,r){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));let o=r?this._descriptors(e).filter(r):this._descriptors(e),s=this._notify(o,e,t,n);return t==="afterDestroy"&&(this._notify(o,e,"stop"),this._notify(this._init,e,"uninstall")),s}_notify(e,t,n,r){r=r||{};for(let o of e){let s=o.plugin,a=s[n],l=[t,r,o.options];if(ni(a,l,s)===!1&&r.cancelable)return!1}return!0}invalidate(){on(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;let t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){let n=e&&e.config,r=Bt(n.options&&n.options.plugins,{}),o=Lhe(n);return r===!1&&!t?[]:zhe(e,o,r,t)}_notifyStateChanges(e){let t=this._oldCache||[],n=this._cache,r=(o,s)=>o.filter(a=>!s.some(l=>a.plugin.id===l.plugin.id));this._notify(r(t,n),e,"stop"),this._notify(r(n,t),e,"start")}};function Lhe(i){let e={},t=[],n=Object.keys(Il.plugins.items);for(let o=0;o<n.length;o++)t.push(Il.getPlugin(n[o]));let r=i.plugins||[];for(let o=0;o<r.length;o++){let s=r[o];t.indexOf(s)===-1&&(t.push(s),e[s.id]=!0)}return{plugins:t,localIds:e}}function Rhe(i,e){return!e&&i===!1?null:i===!0?{}:i}function zhe(i,{plugins:e,localIds:t},n,r){let o=[],s=i.getContext();for(let a of e){let l=a.id,c=Rhe(n[l],r);c!==null&&o.push({plugin:a,options:jhe(i.config,{plugin:a,local:t[l]},c,s)})}return o}function jhe(i,{plugin:e,local:t},n,r){let o=i.pluginScopeKeys(e),s=i.getOptionScopes(n,o);return t&&e.defaults&&s.push(e.defaults),i.createResolver(s,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function p8(i,e){let t=pi.datasets[i]||{};return((e.datasets||{})[i]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function Vhe(i,e){let t=i;return i==="_index_"?t=e:i==="_value_"&&(t=e==="x"?"y":"x"),t}function Uhe(i,e){return i===e?"_index_":"_value_"}function PV(i){if(i==="x"||i==="y"||i==="r")return i}function Hhe(i){if(i==="top"||i==="bottom")return"x";if(i==="left"||i==="right")return"y"}function m8(i,...e){if(PV(i))return i;for(let t of e){let n=t.axis||Hhe(t.position)||i.length>1&&PV(i[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${i}' axis. Please provide 'axis' or 'position' option.`)}function OV(i,e,t){if(t[e+"AxisID"]===i)return{axis:e}}function Ghe(i,e){if(e.data&&e.data.datasets){let t=e.data.datasets.filter(n=>n.xAxisID===i||n.yAxisID===i);if(t.length)return OV(i,"x",t[0])||OV(i,"y",t[0])}return{}}function $he(i,e){let t=qd[i.type]||{scales:{}},n=e.scales||{},r=p8(i.type,e),o=Object.create(null);return Object.keys(n).forEach(s=>{let a=n[s];if(!ln(a))return console.error(`Invalid scale configuration for scale: ${s}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${s}`);let l=m8(s,a,Ghe(s,i),pi.scales[a.type]),c=Uhe(l,r),d=t.scales||{};o[s]=_g(Object.create(null),[{axis:l},a,d[l],d[c]])}),i.data.datasets.forEach(s=>{let a=s.type||i.type,l=s.indexAxis||p8(a,e),d=(qd[a]||{}).scales||{};Object.keys(d).forEach(h=>{let p=Vhe(h,l),g=s[p+"AxisID"]||p;o[g]=o[g]||Object.create(null),_g(o[g],[{axis:p},n[g],d[h]])})}),Object.keys(o).forEach(s=>{let a=o[s];_g(a,[pi.scales[a.type],pi.scale])}),o}function gU(i){let e=i.options||(i.options={});e.plugins=Bt(e.plugins,{}),e.scales=$he(i,e)}function pU(i){return i=i||{},i.datasets=i.datasets||[],i.labels=i.labels||[],i}function Whe(i){return i=i||{},i.data=pU(i.data),gU(i),i}var SV=new Map,mU=new Set;function u5(i,e){let t=SV.get(i);return t||(t=e(),SV.set(i,t),mU.add(t)),t}var e1=(i,e,t)=>{let n=Ic(e,t);n!==void 0&&i.add(n)},x8=class{constructor(e){this._config=Whe(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=pU(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){let e=this._config;this.clearCache(),gU(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return u5(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return u5(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return u5(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){let t=e.id,n=this.type;return u5(`${n}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){let n=this._scopeCache,r=n.get(e);return(!r||t)&&(r=new Map,n.set(e,r)),r}getOptionScopes(e,t,n){let{options:r,type:o}=this,s=this._cachedScopes(e,n),a=s.get(t);if(a)return a;let l=new Set;t.forEach(d=>{e&&(l.add(e),d.forEach(h=>e1(l,e,h))),d.forEach(h=>e1(l,r,h)),d.forEach(h=>e1(l,qd[o]||{},h)),d.forEach(h=>e1(l,pi,h)),d.forEach(h=>e1(l,n5,h))});let c=Array.from(l);return c.length===0&&c.push(Object.create(null)),mU.has(t)&&s.set(t,c),c}chartOptionScopes(){let{options:e,type:t}=this;return[e,qd[t]||{},pi.datasets[t]||{},{type:t},pi,n5]}resolveNamedOptions(e,t,n,r=[""]){let o={$shared:!0},{resolver:s,subPrefixes:a}=kV(this._resolverCache,e,r),l=s;if(Khe(s,t)){o.$shared=!1,n=Dc(n)?n():n;let c=this.createResolver(e,n,a);l=L0(s,n,c)}for(let c of t)o[c]=l[c];return o}createResolver(e,t,n=[""],r){let{resolver:o}=kV(this._resolverCache,e,n);return ln(t)?L0(o,t,void 0,r):o}};function kV(i,e,t){let n=i.get(e);n||(n=new Map,i.set(e,n));let r=t.join(),o=n.get(r);return o||(o={resolver:o5(e,t),subPrefixes:t.filter(a=>!a.toLowerCase().includes("hover"))},n.set(r,o)),o}var qhe=i=>ln(i)&&Object.getOwnPropertyNames(i).some(e=>Dc(i[e]));function Khe(i,e){let{isScriptable:t,isIndexable:n}=jD(i);for(let r of e){let o=t(r),s=n(r),a=(s||o)&&i[r];if(o&&(Dc(a)||qhe(a))||s&&ui(a))return!0}return!1}var Yhe="4.5.0",Xhe=["top","bottom","left","right","chartArea"];function AV(i,e){return i==="top"||i==="bottom"||Xhe.indexOf(i)===-1&&e==="x"}function DV(i,e){return function(t,n){return t[i]===n[i]?t[e]-n[e]:t[i]-n[i]}}function FV(i){let e=i.chart,t=e.options.animation;e.notifyPlugins("afterRender"),ni(t&&t.onComplete,[i],e)}function Qhe(i){let e=i.chart,t=e.options.animation;ni(t&&t.onProgress,[i],e)}function xU(i){return s5()&&typeof i=="string"?i=document.getElementById(i):i&&i.length&&(i=i[0]),i&&i.canvas&&(i=i.canvas),i}var m5={},IV=i=>{let e=xU(i);return Object.values(m5).filter(t=>t.canvas===e).pop()};function Jhe(i,e,t){let n=Object.keys(i);for(let r of n){let o=+r;if(o>=e){let s=i[r];delete i[r],(t>0||o>e)&&(i[o+t]=s)}}}function Zhe(i,e,t,n){return!t||i.type==="mouseout"?null:n?e:i}var Lc=(()=>{class i{static defaults=pi;static instances=m5;static overrides=qd;static registry=Il;static version=Yhe;static getChart=IV;static register(...t){Il.add(...t),TV()}static unregister(...t){Il.remove(...t),TV()}constructor(t,n){let r=this.config=new x8(n),o=xU(t),s=IV(o);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");let a=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||bhe(o)),this.platform.updateConfig(r);let l=this.platform.acquireContext(o,a.aspectRatio),c=l&&l.canvas,d=c&&c.height,h=c&&c.width;if(this.id=Fj(),this.ctx=l,this.canvas=c,this.width=h,this.height=d,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new g8,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Hj(p=>this.update(p),a.resizeDelay||0),this._dataChanges=[],m5[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}Bc.listen(this,"complete",FV),Bc.listen(this,"progress",Qhe),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:t,maintainAspectRatio:n},width:r,height:o,_aspectRatio:s}=this;return on(t)?n&&s?s:o?r/o:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Il}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():GD(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return LD(this.canvas,this.ctx),this}stop(){return Bc.stop(this),this}resize(t,n){Bc.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){let r=this.options,o=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(o,t,n,s),l=r.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,GD(this,l,!0)&&(this.notifyPlugins("resize",{size:a}),ni(r.onResize,[this,a],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){let n=this.options.scales||{};Rn(n,(r,o)=>{r.id=o})}buildOrUpdateScales(){let t=this.options,n=t.scales,r=this.scales,o=Object.keys(r).reduce((a,l)=>(a[l]=!1,a),{}),s=[];n&&(s=s.concat(Object.keys(n).map(a=>{let l=n[a],c=m8(a,l),d=c==="r",h=c==="x";return{options:l,dposition:d?"chartArea":h?"bottom":"left",dtype:d?"radialLinear":h?"category":"linear"}}))),Rn(s,a=>{let l=a.options,c=l.id,d=m8(c,l),h=Bt(l.type,a.dtype);(l.position===void 0||AV(l.position,d)!==AV(a.dposition))&&(l.position=a.dposition),o[c]=!0;let p=null;if(c in r&&r[c].type===h)p=r[c];else{let g=Il.getScale(h);p=new g({id:c,type:h,ctx:this.ctx,chart:this}),r[p.id]=p}p.init(l,t)}),Rn(o,(a,l)=>{a||delete r[l]}),Rn(r,a=>{eo.configure(this,a,a.options),eo.addBox(this,a)})}_updateMetasets(){let t=this._metasets,n=this.data.datasets.length,r=t.length;if(t.sort((o,s)=>o.index-s.index),r>n){for(let o=n;o<r;++o)this._destroyDatasetMeta(o);t.splice(n,r-n)}this._sortedMetasets=t.slice(0).sort(DV("order","index"))}_removeUnreferencedMetasets(){let{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((r,o)=>{n.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(o)})}buildOrUpdateControllers(){let t=[],n=this.data.datasets,r,o;for(this._removeUnreferencedMetasets(),r=0,o=n.length;r<o;r++){let s=n[r],a=this.getDatasetMeta(r),l=s.type||this.config.type;if(a.type&&a.type!==l&&(this._destroyDatasetMeta(r),a=this.getDatasetMeta(r)),a.type=l,a.indexAxis=s.indexAxis||p8(l,this.options),a.order=s.order||0,a.index=r,a.label=""+s.label,a.visible=this.isDatasetVisible(r),a.controller)a.controller.updateIndex(r),a.controller.linkScales();else{let c=Il.getController(l),{datasetElementType:d,dataElementType:h}=pi.datasets[l];Object.assign(c,{dataElementType:Il.getElement(h),datasetElementType:d&&Il.getElement(d)}),a.controller=new c(this,r),t.push(a.controller)}}return this._updateMetasets(),t}_resetElements(){Rn(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){let n=this.config;n.update();let r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),o=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;let s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let d=0,h=this.data.datasets.length;d<h;d++){let{controller:p}=this.getDatasetMeta(d),g=!o&&s.indexOf(p)===-1;p.buildOrUpdateElements(g),a=Math.max(+p.getMaxOverflow(),a)}a=this._minPadding=r.layout.autoPadding?a:0,this._updateLayout(a),o||Rn(s,d=>{d.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(DV("z","_idx"));let{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){Rn(this.scales,t=>{eo.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let t=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(t.events);(!MD(n,r)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(let{method:r,start:o,count:s}of n){let a=r==="_removeElements"?-s:s;Jhe(t,o,a)}}_getUniformDataChanges(){let t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];let n=this.data.datasets.length,r=s=>new Set(t.filter(a=>a[0]===s).map((a,l)=>l+","+a.splice(1).join(","))),o=r(0);for(let s=1;s<n;s++)if(!MD(o,r(s)))return;return Array.from(o).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;eo.update(this,this.width,this.height,t);let n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],Rn(this.boxes,o=>{r&&o.position==="chartArea"||(o.configure&&o.configure(),this._layers.push(...o._layers()))},this),this._layers.forEach((o,s)=>{o._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,Dc(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){let r=this.getDatasetMeta(t),o={meta:r,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",o)!==!1&&(r.controller._update(n),o.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",o))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Bc.has(this)?this.attached&&!Bc.running(this)&&Bc.start(this):(this.draw(),FV({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){let{width:r,height:o}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,o)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){let n=this._sortedMetasets,r=[],o,s;for(o=0,s=n.length;o<s;++o){let a=n[o];(!t||a.visible)&&r.push(a)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){let n=this.ctx,r={meta:t,index:t.index,cancelable:!0},o=XD(this,t);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(o&&Kx(n,o),t.controller.draw(),o&&Yx(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(t){return kl(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,n,r,o){let s=the.modes[n];return typeof s=="function"?s(this,t,r,o):[]}getDatasetMeta(t){let n=this.data.datasets[t],r=this._metasets,o=r.filter(s=>s&&s._dataset===n).pop();return o||(o={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},r.push(o)),o}getContext(){return this.$context||(this.$context=Tc(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){let n=this.data.datasets[t];if(!n)return!1;let r=this.getDatasetMeta(t);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(t,n){let r=this.getDatasetMeta(t);r.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,r){let o=r?"show":"hide",s=this.getDatasetMeta(t),a=s.controller._resolveAnimations(void 0,o);vg(n)?(s.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(t,r),a.update(s,{visible:r}),this.update(l=>l.datasetIndex===t?o:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){let n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),Bc.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),LD(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete m5[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let t=this._listeners,n=this.platform,r=(s,a)=>{n.addEventListener(this,s,a),t[s]=a},o=(s,a,l)=>{s.offsetX=a,s.offsetY=l,this._eventHandler(s)};Rn(this.options.events,s=>r(s,o))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let t=this._responsiveListeners,n=this.platform,r=(c,d)=>{n.addEventListener(this,c,d),t[c]=d},o=(c,d)=>{t[c]&&(n.removeEventListener(this,c,d),delete t[c])},s=(c,d)=>{this.canvas&&this.resize(c,d)},a,l=()=>{o("attach",l),this.attached=!0,this.resize(),r("resize",s),r("detach",a)};a=()=>{this.attached=!1,o("resize",s),this._stop(),this._resize(0,0),r("attach",l)},n.isAttached(this.canvas)?l():a()}unbindEvents(){Rn(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},Rn(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,r){let o=r?"set":"remove",s,a,l,c;for(n==="dataset"&&(s=this.getDatasetMeta(t[0].datasetIndex),s.controller["_"+o+"DatasetHoverStyle"]()),l=0,c=t.length;l<c;++l){a=t[l];let d=a&&this.getDatasetMeta(a.datasetIndex).controller;d&&d[o+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){let n=this._active||[],r=t.map(({datasetIndex:s,index:a})=>{let l=this.getDatasetMeta(s);if(!l)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:l.data[a],index:a}});!Wx(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(t,n,r){return this._plugins.notify(this,t,n,r)}isPluginEnabled(t){return this._plugins._cache.filter(n=>n.plugin.id===t).length===1}_updateHoverStyles(t,n,r){let o=this.options.hover,s=(c,d)=>c.filter(h=>!d.some(p=>h.datasetIndex===p.datasetIndex&&h.index===p.index)),a=s(n,t),l=r?t:s(t,n);a.length&&this.updateHoverStyle(a,o.mode,!1),l.length&&o.mode&&this.updateHoverStyle(l,o.mode,!0)}_eventHandler(t,n){let r={event:t,replay:n,cancelable:!0,inChartArea:this.isPointInArea(t)},o=a=>(a.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",r,o)===!1)return;let s=this._handleEvent(t,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,o),(s||r.changed)&&this.render(),this}_handleEvent(t,n,r){let{_active:o=[],options:s}=this,a=n,l=this._getActiveElements(t,o,r,a),c=Bj(t),d=Zhe(t,this._lastEvent,r,c);r&&(this._lastEvent=null,ni(s.onHover,[t,l,this],this),c&&ni(s.onClick,[t,l,this],this));let h=!Wx(l,o);return(h||n)&&(this._active=l,this._updateHoverStyles(l,o,n)),this._lastEvent=d,h}_getActiveElements(t,n,r,o){if(t.type==="mouseout")return[];if(!r)return n;let s=this.options.hover;return this.getElementsAtEventForMode(t,s.mode,s,o)}}return i})();function TV(){return Rn(Lc.instances,i=>i._plugins.invalidate())}function efe(i,e,t){let{startAngle:n,x:r,y:o,outerRadius:s,innerRadius:a,options:l}=e,{borderWidth:c,borderJoinStyle:d}=l,h=Math.min(c/s,Ir(n-t));if(i.beginPath(),i.arc(r,o,s-c/2,n+h/2,t-h/2),a>0){let p=Math.min(c/a,Ir(n-t));i.arc(r,o,a+c/2,t-p/2,n+p/2,!0)}else{let p=Math.min(c/2,s*Ir(n-t));if(d==="round")i.arc(r,o,p,t-Mn/2,n+Mn/2,!0);else if(d==="bevel"){let g=2*p*p,_=-g*Math.cos(t+Mn/2)+r,b=-g*Math.sin(t+Mn/2)+o,C=g*Math.cos(n+Mn/2)+r,y=g*Math.sin(n+Mn/2)+o;i.lineTo(_,b),i.lineTo(C,y)}}i.closePath(),i.moveTo(0,0),i.rect(0,0,i.canvas.width,i.canvas.height),i.clip("evenodd")}function tfe(i,e,t){let{startAngle:n,pixelMargin:r,x:o,y:s,outerRadius:a,innerRadius:l}=e,c=r/a;i.beginPath(),i.arc(o,s,a,n-c,t+c),l>r?(c=r/l,i.arc(o,s,l,t+c,n-c,!0)):i.arc(o,s,r,t+Li,n-Li),i.closePath(),i.clip()}function nfe(i){return r5(i,["outerStart","outerEnd","innerStart","innerEnd"])}function ife(i,e,t,n){let r=nfe(i.options.borderRadius),o=(t-e)/2,s=Math.min(o,n*e/2),a=l=>{let c=(t-Math.min(o,l))*n/2;return br(l,0,Math.min(o,c))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:br(r.innerStart,0,s),innerEnd:br(r.innerEnd,0,s)}}function Eg(i,e,t,n){return{x:t+i*Math.cos(e),y:n+i*Math.sin(e)}}function b5(i,e,t,n,r,o){let{x:s,y:a,startAngle:l,pixelMargin:c,innerRadius:d}=e,h=Math.max(e.outerRadius+n+t-c,0),p=d>0?d+n+t+c:0,g=0,_=r-l;if(n){let ce=d>0?d-n:0,X=h>0?h-n:0,ie=(ce+X)/2,oe=ie!==0?_*ie/(ie+n):_;g=(_-oe)/2}let b=Math.max(.001,_*h-t/Mn)/h,C=(_-b)/2,y=l+C+g,M=r-C-g,{outerStart:O,outerEnd:A,innerStart:D,innerEnd:N}=ife(e,p,h,M-y),B=h-O,T=h-A,H=y+O/B,te=M-A/T,L=p+D,z=p+N,J=y+D/L,Q=M-N/z;if(i.beginPath(),o){let ce=(H+te)/2;if(i.arc(s,a,h,H,ce),i.arc(s,a,h,ce,te),A>0){let le=Eg(T,te,s,a);i.arc(le.x,le.y,A,te,M+Li)}let X=Eg(z,M,s,a);if(i.lineTo(X.x,X.y),N>0){let le=Eg(z,Q,s,a);i.arc(le.x,le.y,N,M+Li,Q+Math.PI)}let ie=(M-N/p+(y+D/p))/2;if(i.arc(s,a,p,M-N/p,ie,!0),i.arc(s,a,p,ie,y+D/p,!0),D>0){let le=Eg(L,J,s,a);i.arc(le.x,le.y,D,J+Math.PI,y-Li)}let oe=Eg(B,y,s,a);if(i.lineTo(oe.x,oe.y),O>0){let le=Eg(B,H,s,a);i.arc(le.x,le.y,O,y-Li,H)}}else{i.moveTo(s,a);let ce=Math.cos(H)*h+s,X=Math.sin(H)*h+a;i.lineTo(ce,X);let ie=Math.cos(te)*h+s,oe=Math.sin(te)*h+a;i.lineTo(ie,oe)}i.closePath()}function rfe(i,e,t,n,r){let{fullCircles:o,startAngle:s,circumference:a}=e,l=e.endAngle;if(o){b5(i,e,t,n,l,r);for(let c=0;c<o;++c)i.fill();isNaN(a)||(l=s+(a%hi||hi))}return b5(i,e,t,n,l,r),i.fill(),l}function ofe(i,e,t,n,r){let{fullCircles:o,startAngle:s,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:d,borderDash:h,borderDashOffset:p,borderRadius:g}=l,_=l.borderAlign==="inner";if(!c)return;i.setLineDash(h||[]),i.lineDashOffset=p,_?(i.lineWidth=c*2,i.lineJoin=d||"round"):(i.lineWidth=c,i.lineJoin=d||"bevel");let b=e.endAngle;if(o){b5(i,e,t,n,b,r);for(let C=0;C<o;++C)i.stroke();isNaN(a)||(b=s+(a%hi||hi))}_&&tfe(i,e,b),l.selfJoin&&b-s>=Mn&&g===0&&d!=="miter"&&efe(i,e,b),o||(b5(i,e,t,n,b,r),i.stroke())}var _8=class extends Ba{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,n){let r=this.getProps(["x","y"],n),{angle:o,distance:s}=SD(r,{x:e,y:t}),{startAngle:a,endAngle:l,innerRadius:c,outerRadius:d,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),p=(this.options.spacing+this.options.borderWidth)/2,g=Bt(h,l-a),_=Cg(o,a,l)&&a!==l,b=g>=hi||_,C=Dl(s,c+p,d+p);return b&&C}getCenterPoint(e){let{x:t,y:n,startAngle:r,endAngle:o,innerRadius:s,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:l,spacing:c}=this.options,d=(r+o)/2,h=(s+a+c+l)/2;return{x:t+Math.cos(d)*h,y:n+Math.sin(d)*h}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){let{options:t,circumference:n}=this,r=(t.offset||0)/4,o=(t.spacing||0)/2,s=t.circular;if(this.pixelMargin=t.borderAlign==="inner"?.33:0,this.fullCircles=n>hi?Math.floor(n/hi):0,n===0||this.innerRadius<0||this.outerRadius<0)return;e.save();let a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*r,Math.sin(a)*r);let l=1-Math.sin(Math.min(Mn,n||0)),c=r*l;e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,rfe(e,this,c,o,s),ofe(e,this,c,o,s),e.restore()}};function _U(i,e,t=e){i.lineCap=Bt(t.borderCapStyle,e.borderCapStyle),i.setLineDash(Bt(t.borderDash,e.borderDash)),i.lineDashOffset=Bt(t.borderDashOffset,e.borderDashOffset),i.lineJoin=Bt(t.borderJoinStyle,e.borderJoinStyle),i.lineWidth=Bt(t.borderWidth,e.borderWidth),i.strokeStyle=Bt(t.borderColor,e.borderColor)}function sfe(i,e,t){i.lineTo(t.x,t.y)}function afe(i){return i.stepped?qj:i.tension||i.cubicInterpolationMode==="monotone"?Kj:sfe}function vU(i,e,t={}){let n=i.length,{start:r=0,end:o=n-1}=t,{start:s,end:a}=e,l=Math.max(r,s),c=Math.min(o,a),d=r<s&&o<s||r>a&&o>a;return{count:n,start:l,loop:e.loop,ilen:c<l&&!d?n+c-l:c-l}}function lfe(i,e,t,n){let{points:r,options:o}=e,{count:s,start:a,loop:l,ilen:c}=vU(r,t,n),d=afe(o),{move:h=!0,reverse:p}=n||{},g,_,b;for(g=0;g<=c;++g)_=r[(a+(p?c-g:g))%s],!_.skip&&(h?(i.moveTo(_.x,_.y),h=!1):d(i,b,_,p,o.stepped),b=_);return l&&(_=r[(a+(p?c:0))%s],d(i,b,_,p,o.stepped)),!!l}function cfe(i,e,t,n){let r=e.points,{count:o,start:s,ilen:a}=vU(r,t,n),{move:l=!0,reverse:c}=n||{},d=0,h=0,p,g,_,b,C,y,M=A=>(s+(c?a-A:A))%o,O=()=>{b!==C&&(i.lineTo(d,C),i.lineTo(d,b),i.lineTo(d,y))};for(l&&(g=r[M(0)],i.moveTo(g.x,g.y)),p=0;p<=a;++p){if(g=r[M(p)],g.skip)continue;let A=g.x,D=g.y,N=A|0;N===_?(D<b?b=D:D>C&&(C=D),d=(h*d+A)/++h):(O(),i.lineTo(A,D),_=N,h=0,b=C=D),y=D}O()}function v8(i){let e=i.options,t=e.borderDash&&e.borderDash.length;return!i._decimated&&!i._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?cfe:lfe}function dfe(i){return i.stepped?iV:i.tension||i.cubicInterpolationMode==="monotone"?rV:Wd}function ufe(i,e,t,n){let r=e._path;r||(r=e._path=new Path2D,e.path(r,t,n)&&r.closePath()),_U(i,e.options),i.stroke(r)}function hfe(i,e,t,n){let{segments:r,options:o}=e,s=v8(e);for(let a of r)_U(i,o,a.style),i.beginPath(),s(i,e,a,{start:t,end:t+n-1})&&i.closePath(),i.stroke()}var ffe=typeof Path2D=="function";function gfe(i,e,t,n){ffe&&!e.options.segment?ufe(i,e,t,n):hfe(i,e,t,n)}var w5=(()=>{class i extends Ba{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,n){let r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){let o=r.spanGaps?this._loop:this._fullLoop;eV(this._points,r,t,o,n),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=sV(this,this.options.segment))}first(){let t=this.segments,n=this.points;return t.length&&n[t[0].start]}last(){let t=this.segments,n=this.points,r=t.length;return r&&n[t[r-1].end]}interpolate(t,n){let r=this.options,o=t[n],s=this.points,a=YD(this,{property:n,start:o,end:o});if(!a.length)return;let l=[],c=dfe(r),d,h;for(d=0,h=a.length;d<h;++d){let{start:p,end:g}=a[d],_=s[p],b=s[g];if(_===b){l.push(_);continue}let C=Math.abs((o-_[n])/(b[n]-_[n])),y=c(_,b,C,r.stepped);y[n]=t[n],l.push(y)}return l.length===1?l[0]:l}pathSegment(t,n,r){return v8(this)(t,this,n,r)}path(t,n,r){let o=this.segments,s=v8(this),a=this._loop;n=n||0,r=r||this.points.length-n;for(let l of o)a&=s(t,this,l,{start:n,end:n+r-1});return!!a}draw(t,n,r,o){let s=this.options||{};(this.points||[]).length&&s.borderWidth&&(t.save(),gfe(t,this,r,o),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return i})();function BV(i,e,t,n){let r=i.options,{[t]:o}=i.getProps([t],n);return Math.abs(e-o)<r.radius+r.hitRadius}var pfe=(()=>{class i extends Ba{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,n,r){let o=this.options,{x:s,y:a}=this.getProps(["x","y"],r);return Math.pow(t-s,2)+Math.pow(n-a,2)<Math.pow(o.hitRadius+o.radius,2)}inXRange(t,n){return BV(this,t,"x",n)}inYRange(t,n){return BV(this,t,"y",n)}getCenterPoint(t){let{x:n,y:r}=this.getProps(["x","y"],t);return{x:n,y:r}}size(t){t=t||this.options||{};let n=t.radius||0;n=Math.max(n,n&&t.hoverRadius||0);let r=n&&t.borderWidth||0;return(n+r)*2}draw(t,n){let r=this.options;this.skip||r.radius<.1||!kl(this,n,this.size(r)/2)||(t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.fillStyle=r.backgroundColor,i5(t,r,this.x,this.y))}getRange(){let t=this.options||{};return t.radius+t.hitRadius}}return i})();function bU(i,e){let{x:t,y:n,base:r,width:o,height:s}=i.getProps(["x","y","base","width","height"],e),a,l,c,d,h;return i.horizontal?(h=s/2,a=Math.min(t,r),l=Math.max(t,r),c=n-h,d=n+h):(h=o/2,a=t-h,l=t+h,c=Math.min(n,r),d=Math.max(n,r)),{left:a,top:c,right:l,bottom:d}}function Jd(i,e,t,n){return i?0:br(e,t,n)}function mfe(i,e,t){let n=i.options.borderWidth,r=i.borderSkipped,o=zD(n);return{t:Jd(r.top,o.top,0,t),r:Jd(r.right,o.right,0,e),b:Jd(r.bottom,o.bottom,0,t),l:Jd(r.left,o.left,0,e)}}function xfe(i,e,t){let{enableBorderRadius:n}=i.getProps(["enableBorderRadius"]),r=i.options.borderRadius,o=Xd(r),s=Math.min(e,t),a=i.borderSkipped,l=n||ln(r);return{topLeft:Jd(!l||a.top||a.left,o.topLeft,0,s),topRight:Jd(!l||a.top||a.right,o.topRight,0,s),bottomLeft:Jd(!l||a.bottom||a.left,o.bottomLeft,0,s),bottomRight:Jd(!l||a.bottom||a.right,o.bottomRight,0,s)}}function _fe(i){let e=bU(i),t=e.right-e.left,n=e.bottom-e.top,r=mfe(i,t/2,n/2),o=xfe(i,t/2,n/2);return{outer:{x:e.left,y:e.top,w:t,h:n,radius:o},inner:{x:e.left+r.l,y:e.top+r.t,w:t-r.l-r.r,h:n-r.t-r.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,o.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(r.b,r.r))}}}}function r8(i,e,t,n){let r=e===null,o=t===null,a=i&&!(r&&o)&&bU(i,n);return a&&(r||Dl(e,a.left,a.right))&&(o||Dl(t,a.top,a.bottom))}function vfe(i){return i.topLeft||i.topRight||i.bottomLeft||i.bottomRight}function bfe(i,e){i.rect(e.x,e.y,e.w,e.h)}function o8(i,e,t={}){let n=i.x!==t.x?-e:0,r=i.y!==t.y?-e:0,o=(i.x+i.w!==t.x+t.w?e:0)-n,s=(i.y+i.h!==t.y+t.h?e:0)-r;return{x:i.x+n,y:i.y+r,w:i.w+o,h:i.h+s,radius:i.radius}}var b8=class extends Ba{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){let{inflateAmount:t,options:{borderColor:n,backgroundColor:r}}=this,{inner:o,outer:s}=_fe(this),a=vfe(s.radius)?wg:bfe;e.save(),(s.w!==o.w||s.h!==o.h)&&(e.beginPath(),a(e,o8(s,t,o)),e.clip(),a(e,o8(o,-t,s)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),a(e,o8(o,t)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,t,n){return r8(this,e,t,n)}inXRange(e,t){return r8(this,e,null,t)}inYRange(e,t){return r8(this,null,e,t)}getCenterPoint(e){let{x:t,y:n,base:r,horizontal:o}=this.getProps(["x","y","base","horizontal"],e);return{x:o?(t+r)/2:t,y:o?n:(n+r)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}},Cfe=Object.freeze({__proto__:null,ArcElement:_8,BarElement:b8,LineElement:w5,PointElement:pfe}),C8=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],NV=C8.map(i=>i.replace("rgb(","rgba(").replace(")",", 0.5)"));function CU(i){return C8[i%C8.length]}function yU(i){return NV[i%NV.length]}function yfe(i,e){return i.borderColor=CU(e),i.backgroundColor=yU(e),++e}function wfe(i,e){return i.backgroundColor=i.data.map(()=>CU(e++)),e}function Mfe(i,e){return i.backgroundColor=i.data.map(()=>yU(e++)),e}function Efe(i){let e=0;return(t,n)=>{let r=i.getDatasetMeta(n).controller;r instanceof k8?e=wfe(t,e):r instanceof cU?e=Mfe(t,e):r&&(e=yfe(t,e))}}function LV(i){let e;for(e in i)if(i[e].borderColor||i[e].backgroundColor)return!0;return!1}function Pfe(i){return i&&(i.borderColor||i.backgroundColor)}function Ofe(){return pi.borderColor!=="rgba(0,0,0,0.1)"||pi.backgroundColor!=="rgba(0,0,0,0.1)"}var Sfe={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(i,e,t){if(!t.enabled)return;let{data:{datasets:n},options:r}=i.config,{elements:o}=r,s=LV(n)||Pfe(r)||o&&LV(o)||Ofe();if(!t.forceOverride&&s)return;let a=Efe(i);n.forEach(a)}};function kfe(i,e,t,n,r){let o=r.samples||n;if(o>=t)return i.slice(e,e+t);let s=[],a=(t-2)/(o-2),l=0,c=e+t-1,d=e,h,p,g,_,b;for(s[l++]=i[d],h=0;h<o-2;h++){let C=0,y=0,M,O=Math.floor((h+1)*a)+1+e,A=Math.min(Math.floor((h+2)*a)+1,t)+e,D=A-O;for(M=O;M<A;M++)C+=i[M].x,y+=i[M].y;C/=D,y/=D;let N=Math.floor(h*a)+1+e,B=Math.min(Math.floor((h+1)*a)+1,t)+e,{x:T,y:H}=i[d];for(g=_=-1,M=N;M<B;M++)_=.5*Math.abs((T-C)*(i[M].y-H)-(T-i[M].x)*(y-H)),_>g&&(g=_,p=i[M],b=M);s[l++]=p,d=b}return s[l++]=i[c],s}function Afe(i,e,t,n){let r=0,o=0,s,a,l,c,d,h,p,g,_,b,C=[],y=e+t-1,M=i[e].x,A=i[y].x-M;for(s=e;s<e+t;++s){a=i[s],l=(a.x-M)/A*n,c=a.y;let D=l|0;if(D===d)c<_?(_=c,h=s):c>b&&(b=c,p=s),r=(o*r+a.x)/++o;else{let N=s-1;if(!on(h)&&!on(p)){let B=Math.min(h,p),T=Math.max(h,p);B!==g&&B!==N&&C.push(ot(Ie({},i[B]),{x:r})),T!==g&&T!==N&&C.push(ot(Ie({},i[T]),{x:r}))}s>0&&N!==g&&C.push(i[N]),C.push(a),d=D,o=0,_=b=c,h=p=g=s}}return C}function wU(i){if(i._decimated){let e=i._data;delete i._decimated,delete i._data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function RV(i){i.data.datasets.forEach(e=>{wU(e)})}function Dfe(i,e){let t=e.length,n=0,r,{iScale:o}=i,{min:s,max:a,minDefined:l,maxDefined:c}=o.getUserBounds();return l&&(n=br(Sl(e,o.axis,s).lo,0,t-1)),c?r=br(Sl(e,o.axis,a).hi+1,n,t)-n:r=t-n,{start:n,count:r}}var Ffe={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(i,e,t)=>{if(!t.enabled){RV(i);return}let n=i.width;i.data.datasets.forEach((r,o)=>{let{_data:s,indexAxis:a}=r,l=i.getDatasetMeta(o),c=s||r.data;if(Mg([a,i.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;let d=i.scales[l.xAxisID];if(d.type!=="linear"&&d.type!=="time"||i.options.parsing)return;let{start:h,count:p}=Dfe(l,c),g=t.threshold||4*n;if(p<=g){wU(r);return}on(s)&&(r._data=c,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(b){this._data=b}}));let _;switch(t.algorithm){case"lttb":_=kfe(c,h,p,n,t);break;case"min-max":_=Afe(c,h,p,n);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}r._decimated=_})},destroy(i){RV(i)}};function Ife(i,e,t){let n=i.segments,r=i.points,o=e.points,s=[];for(let a of n){let{start:l,end:c}=a;c=M5(l,c,r);let d=y8(t,r[l],r[c],a.loop);if(!e.segments){s.push({source:a,target:d,start:r[l],end:r[c]});continue}let h=YD(e,d);for(let p of h){let g=y8(t,o[p.start],o[p.end],p.loop),_=KD(a,r,g);for(let b of _)s.push({source:b,target:p,start:{[t]:zV(d,g,"start",Math.max)},end:{[t]:zV(d,g,"end",Math.min)}})}}return s}function y8(i,e,t,n){if(n)return;let r=e[i],o=t[i];return i==="angle"&&(r=Ir(r),o=Ir(o)),{property:i,start:r,end:o}}function Tfe(i,e){let{x:t=null,y:n=null}=i||{},r=e.points,o=[];return e.segments.forEach(({start:s,end:a})=>{a=M5(s,a,r);let l=r[s],c=r[a];n!==null?(o.push({x:l.x,y:n}),o.push({x:c.x,y:n})):t!==null&&(o.push({x:t,y:l.y}),o.push({x:t,y:c.y}))}),o}function M5(i,e,t){for(;e>i;e--){let n=t[e];if(!isNaN(n.x)&&!isNaN(n.y))break}return e}function zV(i,e,t,n){return i&&e?n(i[t],e[t]):i?i[t]:e?e[t]:0}function MU(i,e){let t=[],n=!1;return ui(i)?(n=!0,t=i):t=Tfe(i,e),t.length?new w5({points:t,options:{tension:0},_loop:n,_fullLoop:n}):null}function jV(i){return i&&i.fill!==!1}function Bfe(i,e,t){let r=i[e].fill,o=[e],s;if(!t)return r;for(;r!==!1&&o.indexOf(r)===-1;){if(!Pi(r))return r;if(s=i[r],!s)return!1;if(s.visible)return r;o.push(r),r=s.fill}return!1}function Nfe(i,e,t){let n=jfe(i);if(ln(n))return isNaN(n.value)?!1:n;let r=parseFloat(n);return Pi(r)&&Math.floor(r)===r?Lfe(n[0],e,r,t):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function Lfe(i,e,t,n){return(i==="-"||i==="+")&&(t=e+t),t===e||t<0||t>=n?!1:t}function Rfe(i,e){let t=null;return i==="start"?t=e.bottom:i==="end"?t=e.top:ln(i)?t=e.getPixelForValue(i.value):e.getBasePixel&&(t=e.getBasePixel()),t}function zfe(i,e,t){let n;return i==="start"?n=t:i==="end"?n=e.options.reverse?e.min:e.max:ln(i)?n=i.value:n=e.getBaseValue(),n}function jfe(i){let e=i.options,t=e.fill,n=Bt(t&&t.target,t);return n===void 0&&(n=!!e.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function Vfe(i){let{scale:e,index:t,line:n}=i,r=[],o=n.segments,s=n.points,a=Ufe(e,t);a.push(MU({x:null,y:e.bottom},n));for(let l=0;l<o.length;l++){let c=o[l];for(let d=c.start;d<=c.end;d++)Hfe(r,s[d],a)}return new w5({points:r,options:{}})}function Ufe(i,e){let t=[],n=i.getMatchingVisibleMetas("line");for(let r=0;r<n.length;r++){let o=n[r];if(o.index===e)break;o.hidden||t.unshift(o.dataset)}return t}function Hfe(i,e,t){let n=[];for(let r=0;r<t.length;r++){let o=t[r],{first:s,last:a,point:l}=Gfe(o,e,"x");if(!(!l||s&&a)){if(s)n.unshift(l);else if(i.push(l),!a)break}}i.push(...n)}function Gfe(i,e,t){let n=i.interpolate(e,t);if(!n)return{};let r=n[t],o=i.segments,s=i.points,a=!1,l=!1;for(let c=0;c<o.length;c++){let d=o[c],h=s[d.start][t],p=s[d.end][t];if(Dl(r,h,p)){a=r===h,l=r===p;break}}return{first:a,last:l,point:n}}var C5=class{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,n){let{x:r,y:o,radius:s}=this;return t=t||{start:0,end:hi},e.arc(r,o,s,t.end,t.start,!0),!n.bounds}interpolate(e){let{x:t,y:n,radius:r}=this,o=e.angle;return{x:t+Math.cos(o)*r,y:n+Math.sin(o)*r,angle:o}}};function $fe(i){let{chart:e,fill:t,line:n}=i;if(Pi(t))return Wfe(e,t);if(t==="stack")return Vfe(i);if(t==="shape")return!0;let r=qfe(i);return r instanceof C5?r:MU(r,n)}function Wfe(i,e){let t=i.getDatasetMeta(e);return t&&i.isDatasetVisible(e)?t.dataset:null}function qfe(i){return(i.scale||{}).getPointPositionForValue?Yfe(i):Kfe(i)}function Kfe(i){let{scale:e={},fill:t}=i,n=Rfe(t,e);if(Pi(n)){let r=e.isHorizontal();return{x:r?n:null,y:r?null:n}}return null}function Yfe(i){let{scale:e,fill:t}=i,n=e.options,r=e.getLabels().length,o=n.reverse?e.max:e.min,s=zfe(t,e,o),a=[];if(n.grid.circular){let l=e.getPointPositionForValue(0,o);return new C5({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(s)})}for(let l=0;l<r;++l)a.push(e.getPointPositionForValue(l,s));return a}function s8(i,e,t){let n=$fe(e),{chart:r,index:o,line:s,scale:a,axis:l}=e,c=s.options,d=c.fill,h=c.backgroundColor,{above:p=h,below:g=h}=d||{},_=r.getDatasetMeta(o),b=XD(r,_);n&&s.points.length&&(Kx(i,t),Xfe(i,{line:s,target:n,above:p,below:g,area:t,scale:a,axis:l,clip:b}),Yx(i))}function Xfe(i,e){let{line:t,target:n,above:r,below:o,area:s,scale:a,clip:l}=e,c=t._loop?"angle":e.axis;i.save();let d=o;o!==r&&(c==="x"?(VV(i,n,s.top),a8(i,{line:t,target:n,color:r,scale:a,property:c,clip:l}),i.restore(),i.save(),VV(i,n,s.bottom)):c==="y"&&(UV(i,n,s.left),a8(i,{line:t,target:n,color:o,scale:a,property:c,clip:l}),i.restore(),i.save(),UV(i,n,s.right),d=r)),a8(i,{line:t,target:n,color:d,scale:a,property:c,clip:l}),i.restore()}function VV(i,e,t){let{segments:n,points:r}=e,o=!0,s=!1;i.beginPath();for(let a of n){let{start:l,end:c}=a,d=r[l],h=r[M5(l,c,r)];o?(i.moveTo(d.x,d.y),o=!1):(i.lineTo(d.x,t),i.lineTo(d.x,d.y)),s=!!e.pathSegment(i,a,{move:s}),s?i.closePath():i.lineTo(h.x,t)}i.lineTo(e.first().x,t),i.closePath(),i.clip()}function UV(i,e,t){let{segments:n,points:r}=e,o=!0,s=!1;i.beginPath();for(let a of n){let{start:l,end:c}=a,d=r[l],h=r[M5(l,c,r)];o?(i.moveTo(d.x,d.y),o=!1):(i.lineTo(t,d.y),i.lineTo(d.x,d.y)),s=!!e.pathSegment(i,a,{move:s}),s?i.closePath():i.lineTo(t,h.y)}i.lineTo(t,e.first().y),i.closePath(),i.clip()}function a8(i,e){let{line:t,target:n,property:r,color:o,scale:s,clip:a}=e,l=Ife(t,n,r);for(let{source:c,target:d,start:h,end:p}of l){let{style:{backgroundColor:g=o}={}}=c,_=n!==!0;i.save(),i.fillStyle=g,Qfe(i,s,a,_&&y8(r,h,p)),i.beginPath();let b=!!t.pathSegment(i,c),C;if(_){b?i.closePath():HV(i,n,p,r);let y=!!n.pathSegment(i,d,{move:b,reverse:!0});C=b&&y,C||HV(i,n,h,r)}i.closePath(),i.fill(C?"evenodd":"nonzero"),i.restore()}}function Qfe(i,e,t,n){let r=e.chart.chartArea,{property:o,start:s,end:a}=n||{};if(o==="x"||o==="y"){let l,c,d,h;o==="x"?(l=s,c=r.top,d=a,h=r.bottom):(l=r.left,c=s,d=r.right,h=a),i.beginPath(),t&&(l=Math.max(l,t.left),d=Math.min(d,t.right),c=Math.max(c,t.top),h=Math.min(h,t.bottom)),i.rect(l,c,d-l,h-c),i.clip()}}function HV(i,e,t,n){let r=e.interpolate(t,n);r&&i.lineTo(r.x,r.y)}var Jfe={id:"filler",afterDatasetsUpdate(i,e,t){let n=(i.data.datasets||[]).length,r=[],o,s,a,l;for(s=0;s<n;++s)o=i.getDatasetMeta(s),a=o.dataset,l=null,a&&a.options&&a instanceof w5&&(l={visible:i.isDatasetVisible(s),index:s,fill:Nfe(a,s,n),chart:i,axis:o.controller.options.indexAxis,scale:o.vScale,line:a}),o.$filler=l,r.push(l);for(s=0;s<n;++s)l=r[s],!(!l||l.fill===!1)&&(l.fill=Bfe(r,s,t.propagate))},beforeDraw(i,e,t){let n=t.drawTime==="beforeDraw",r=i.getSortedVisibleDatasetMetas(),o=i.chartArea;for(let s=r.length-1;s>=0;--s){let a=r[s].$filler;a&&(a.line.updateControlPoints(o,a.axis),n&&a.fill&&s8(i.ctx,a,o))}},beforeDatasetsDraw(i,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;let n=i.getSortedVisibleDatasetMetas();for(let r=n.length-1;r>=0;--r){let o=n[r].$filler;jV(o)&&s8(i.ctx,o,i.chartArea)}},beforeDatasetDraw(i,e,t){let n=e.meta.$filler;!jV(n)||t.drawTime!=="beforeDatasetDraw"||s8(i.ctx,n,i.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},GV=(i,e)=>{let{boxHeight:t=e,boxWidth:n=e}=i;return i.usePointStyle&&(t=Math.min(t,e),n=i.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:t,itemHeight:Math.max(e,t)}},Zfe=(i,e)=>i!==null&&e!==null&&i.datasetIndex===e.datasetIndex&&i.index===e.index,y5=class extends Ba{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let e=this.options.labels||{},t=ni(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(n=>e.filter(n,this.chart.data))),e.sort&&(t=t.sort((n,r)=>e.sort(n,r,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){let{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}let n=e.labels,r=cr(n.font),o=r.size,s=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=GV(n,o),c,d;t.font=r.string,this.isHorizontal()?(c=this.maxWidth,d=this._fitRows(s,o,a,l)+10):(d=this.maxHeight,c=this._fitCols(s,r,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(d,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,r){let{ctx:o,maxWidth:s,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],d=r+a,h=e;o.textAlign="left",o.textBaseline="middle";let p=-1,g=-d;return this.legendItems.forEach((_,b)=>{let C=n+t/2+o.measureText(_.text).width;(b===0||c[c.length-1]+C+2*a>s)&&(h+=d,c[c.length-(b>0?0:1)]=0,g+=d,p++),l[b]={left:0,top:g,row:p,width:C,height:r},c[c.length-1]+=C+a}),h}_fitCols(e,t,n,r){let{ctx:o,maxHeight:s,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],d=s-e,h=a,p=0,g=0,_=0,b=0;return this.legendItems.forEach((C,y)=>{let{itemWidth:M,itemHeight:O}=ege(n,t,o,C,r);y>0&&g+O+2*a>d&&(h+=p+a,c.push({width:p,height:g}),_+=p+a,b++,p=g=0),l[y]={left:_,top:g,col:b,width:M,height:O},p=Math.max(p,M),g+=O+a}),h+=p,c.push({width:p,height:g}),h}adjustHitBoxes(){if(!this.options.display)return;let e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:r},rtl:o}}=this,s=z0(o,this.left,this.width);if(this.isHorizontal()){let a=0,l=Tr(n,this.left+r,this.right-this.lineWidths[a]);for(let c of t)a!==c.row&&(a=c.row,l=Tr(n,this.left+r,this.right-this.lineWidths[a])),c.top+=this.top+e+r,c.left=s.leftForLtr(s.x(l),c.width),l+=c.width+r}else{let a=0,l=Tr(n,this.top+e+r,this.bottom-this.columnSizes[a].height);for(let c of t)c.col!==a&&(a=c.col,l=Tr(n,this.top+e+r,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+r,c.left=s.leftForLtr(s.x(c.left),c.width),l+=c.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let e=this.ctx;Kx(e,this),this._draw(),Yx(e)}}_draw(){let{options:e,columnSizes:t,lineWidths:n,ctx:r}=this,{align:o,labels:s}=e,a=pi.color,l=z0(e.rtl,this.left,this.width),c=cr(s.font),{padding:d}=s,h=c.size,p=h/2,g;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;let{boxWidth:_,boxHeight:b,itemHeight:C}=GV(s,h),y=function(N,B,T){if(isNaN(_)||_<=0||isNaN(b)||b<0)return;r.save();let H=Bt(T.lineWidth,1);if(r.fillStyle=Bt(T.fillStyle,a),r.lineCap=Bt(T.lineCap,"butt"),r.lineDashOffset=Bt(T.lineDashOffset,0),r.lineJoin=Bt(T.lineJoin,"miter"),r.lineWidth=H,r.strokeStyle=Bt(T.strokeStyle,a),r.setLineDash(Bt(T.lineDash,[])),s.usePointStyle){let te={radius:b*Math.SQRT2/2,pointStyle:T.pointStyle,rotation:T.rotation,borderWidth:H},L=l.xPlus(N,_/2),z=B+p;RD(r,te,L,z,s.pointStyleWidth&&_)}else{let te=B+Math.max((h-b)/2,0),L=l.leftForLtr(N,_),z=Xd(T.borderRadius);r.beginPath(),Object.values(z).some(J=>J!==0)?wg(r,{x:L,y:te,w:_,h:b,radius:z}):r.rect(L,te,_,b),r.fill(),H!==0&&r.stroke()}r.restore()},M=function(N,B,T){Yd(r,T.text,N,B+C/2,c,{strikethrough:T.hidden,textAlign:l.textAlign(T.textAlign)})},O=this.isHorizontal(),A=this._computeTitleHeight();O?g={x:Tr(o,this.left+d,this.right-n[0]),y:this.top+d+A,line:0}:g={x:this.left+d,y:Tr(o,this.top+A+d,this.bottom-t[0].height),line:0},WD(this.ctx,e.textDirection);let D=C+d;this.legendItems.forEach((N,B)=>{r.strokeStyle=N.fontColor,r.fillStyle=N.fontColor;let T=r.measureText(N.text).width,H=l.textAlign(N.textAlign||(N.textAlign=s.textAlign)),te=_+p+T,L=g.x,z=g.y;l.setWidth(this.width),O?B>0&&L+te+d>this.right&&(z=g.y+=D,g.line++,L=g.x=Tr(o,this.left+d,this.right-n[g.line])):B>0&&z+D>this.bottom&&(L=g.x=L+t[g.line].width+d,g.line++,z=g.y=Tr(o,this.top+A+d,this.bottom-t[g.line].height));let J=l.x(L);if(y(J,z,N),L=Gj(H,L+_+p,O?L+te:this.right,e.rtl),M(l.x(L),z,N),O)g.x+=te+d;else if(typeof N.text!="string"){let Q=c.lineHeight;g.y+=EU(N,Q)+d}else g.y+=D}),qD(this.ctx,e.textDirection)}drawTitle(){let e=this.options,t=e.title,n=cr(t.font),r=Br(t.padding);if(!t.display)return;let o=z0(e.rtl,this.left,this.width),s=this.ctx,a=t.position,l=n.size/2,c=r.top+l,d,h=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),d=this.top+c,h=Tr(e.align,h,this.right-p);else{let _=this.columnSizes.reduce((b,C)=>Math.max(b,C.height),0);d=c+Tr(e.align,this.top,this.bottom-_-e.labels.padding-this._computeTitleHeight())}let g=Tr(a,h,h+p);s.textAlign=o.textAlign(t5(a)),s.textBaseline="middle",s.strokeStyle=t.color,s.fillStyle=t.color,s.font=n.string,Yd(s,t.text,g,d,n)}_computeTitleHeight(){let e=this.options.title,t=cr(e.font),n=Br(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,r,o;if(Dl(e,this.left,this.right)&&Dl(t,this.top,this.bottom)){for(o=this.legendHitBoxes,n=0;n<o.length;++n)if(r=o[n],Dl(e,r.left,r.left+r.width)&&Dl(t,r.top,r.top+r.height))return this.legendItems[n]}return null}handleEvent(e){let t=this.options;if(!ige(e.type,t))return;let n=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){let r=this._hoveredItem,o=Zfe(r,n);r&&!o&&ni(t.onLeave,[e,r,this],this),this._hoveredItem=n,n&&!o&&ni(t.onHover,[e,n,this],this)}else n&&ni(t.onClick,[e,n,this],this)}};function ege(i,e,t,n,r){let o=tge(n,i,e,t),s=nge(r,n,e.lineHeight);return{itemWidth:o,itemHeight:s}}function tge(i,e,t,n){let r=i.text;return r&&typeof r!="string"&&(r=r.reduce((o,s)=>o.length>s.length?o:s)),e+t.size/2+n.measureText(r).width}function nge(i,e,t){let n=i;return typeof e.text!="string"&&(n=EU(e,t)),n}function EU(i,e){let t=i.text?i.text.length:0;return e*t}function ige(i,e){return!!((i==="mousemove"||i==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(i==="click"||i==="mouseup"))}var rge={id:"legend",_element:y5,start(i,e,t){let n=i.legend=new y5({ctx:i.ctx,options:t,chart:i});eo.configure(i,n,t),eo.addBox(i,n)},stop(i){eo.removeBox(i,i.legend),delete i.legend},beforeUpdate(i,e,t){let n=i.legend;eo.configure(i,n,t),n.options=t},afterUpdate(i){let e=i.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(i,e){e.replay||i.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(i,e,t){let n=e.datasetIndex,r=t.chart;r.isDatasetVisible(n)?(r.hide(n),e.hidden=!0):(r.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:i=>i.chart.options.color,boxWidth:40,padding:10,generateLabels(i){let e=i.data.datasets,{labels:{usePointStyle:t,pointStyle:n,textAlign:r,color:o,useBorderRadius:s,borderRadius:a}}=i.legend.options;return i._getSortedDatasetMetas().map(l=>{let c=l.controller.getStyle(t?0:void 0),d=Br(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:o,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:c.borderColor,pointStyle:n||c.pointStyle,rotation:c.rotation,textAlign:r||c.textAlign,borderRadius:s&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:i=>i.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:i=>!i.startsWith("on"),labels:{_scriptable:i=>!["generateLabels","filter","sort"].includes(i)}}},r1=class extends Ba{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){let n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;let r=ui(n.text)?n.text.length:1;this._padding=Br(n.padding);let o=r*cr(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){let e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){let{top:t,left:n,bottom:r,right:o,options:s}=this,a=s.align,l=0,c,d,h;return this.isHorizontal()?(d=Tr(a,n,o),h=t+e,c=o-n):(s.position==="left"?(d=n+e,h=Tr(a,r,t),l=Mn*-.5):(d=o-e,h=Tr(a,t,r),l=Mn*.5),c=r-t),{titleX:d,titleY:h,maxWidth:c,rotation:l}}draw(){let e=this.ctx,t=this.options;if(!t.display)return;let n=cr(t.font),o=n.lineHeight/2+this._padding.top,{titleX:s,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(o);Yd(e,t.text,0,0,n,{color:t.color,maxWidth:l,rotation:c,textAlign:t5(t.align),textBaseline:"middle",translation:[s,a]})}};function oge(i,e){let t=new r1({ctx:i.ctx,options:e,chart:i});eo.configure(i,t,e),eo.addBox(i,t),i.titleBlock=t}var sge={id:"title",_element:r1,start(i,e,t){oge(i,t)},stop(i){let e=i.titleBlock;eo.removeBox(i,e),delete i.titleBlock},beforeUpdate(i,e,t){let n=i.titleBlock;eo.configure(i,n,t),n.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},h5=new WeakMap,age={id:"subtitle",start(i,e,t){let n=new r1({ctx:i.ctx,options:t,chart:i});eo.configure(i,n,t),eo.addBox(i,n),h5.set(i,n)},stop(i){eo.removeBox(i,h5.get(i)),h5.delete(i)},beforeUpdate(i,e,t){let n=h5.get(i);eo.configure(i,n,t),n.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},n1={average(i){if(!i.length)return!1;let e,t,n=new Set,r=0,o=0;for(e=0,t=i.length;e<t;++e){let a=i[e].element;if(a&&a.hasValue()){let l=a.tooltipPosition();n.add(l.x),r+=l.y,++o}}return o===0||n.size===0?!1:{x:[...n].reduce((a,l)=>a+l)/n.size,y:r/o}},nearest(i,e){if(!i.length)return!1;let t=e.x,n=e.y,r=Number.POSITIVE_INFINITY,o,s,a;for(o=0,s=i.length;o<s;++o){let l=i[o].element;if(l&&l.hasValue()){let c=l.getCenterPoint(),d=X2(e,c);d<r&&(r=d,a=l)}}if(a){let l=a.tooltipPosition();t=l.x,n=l.y}return{x:t,y:n}}};function Fl(i,e){return e&&(ui(e)?Array.prototype.push.apply(i,e):i.push(e)),i}function Nc(i){return(typeof i=="string"||i instanceof String)&&i.indexOf(`
`)>-1?i.split(`
`):i}function lge(i,e){let{element:t,datasetIndex:n,index:r}=e,o=i.getDatasetMeta(n).controller,{label:s,value:a}=o.getLabelAndValue(r);return{chart:i,label:s,parsed:o.getParsed(r),raw:i.data.datasets[n].data[r],formattedValue:a,dataset:o.getDataset(),dataIndex:r,datasetIndex:n,element:t}}function $V(i,e){let t=i.chart.ctx,{body:n,footer:r,title:o}=i,{boxWidth:s,boxHeight:a}=e,l=cr(e.bodyFont),c=cr(e.titleFont),d=cr(e.footerFont),h=o.length,p=r.length,g=n.length,_=Br(e.padding),b=_.height,C=0,y=n.reduce((A,D)=>A+D.before.length+D.lines.length+D.after.length,0);if(y+=i.beforeBody.length+i.afterBody.length,h&&(b+=h*c.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),y){let A=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;b+=g*A+(y-g)*l.lineHeight+(y-1)*e.bodySpacing}p&&(b+=e.footerMarginTop+p*d.lineHeight+(p-1)*e.footerSpacing);let M=0,O=function(A){C=Math.max(C,t.measureText(A).width+M)};return t.save(),t.font=c.string,Rn(i.title,O),t.font=l.string,Rn(i.beforeBody.concat(i.afterBody),O),M=e.displayColors?s+2+e.boxPadding:0,Rn(n,A=>{Rn(A.before,O),Rn(A.lines,O),Rn(A.after,O)}),M=0,t.font=d.string,Rn(i.footer,O),t.restore(),C+=_.width,{width:C,height:b}}function cge(i,e){let{y:t,height:n}=e;return t<n/2?"top":t>i.height-n/2?"bottom":"center"}function dge(i,e,t,n){let{x:r,width:o}=n,s=t.caretSize+t.caretPadding;if(i==="left"&&r+o+s>e.width||i==="right"&&r-o-s<0)return!0}function uge(i,e,t,n){let{x:r,width:o}=t,{width:s,chartArea:{left:a,right:l}}=i,c="center";return n==="center"?c=r<=(a+l)/2?"left":"right":r<=o/2?c="left":r>=s-o/2&&(c="right"),dge(c,i,e,t)&&(c="center"),c}function WV(i,e,t){let n=t.yAlign||e.yAlign||cge(i,t);return{xAlign:t.xAlign||e.xAlign||uge(i,e,t,n),yAlign:n}}function hge(i,e){let{x:t,width:n}=i;return e==="right"?t-=n:e==="center"&&(t-=n/2),t}function fge(i,e,t){let{y:n,height:r}=i;return e==="top"?n+=t:e==="bottom"?n-=r+t:n-=r/2,n}function qV(i,e,t,n){let{caretSize:r,caretPadding:o,cornerRadius:s}=i,{xAlign:a,yAlign:l}=t,c=r+o,{topLeft:d,topRight:h,bottomLeft:p,bottomRight:g}=Xd(s),_=hge(e,a),b=fge(e,l,c);return l==="center"?a==="left"?_+=c:a==="right"&&(_-=c):a==="left"?_-=Math.max(d,p)+r:a==="right"&&(_+=Math.max(h,g)+r),{x:br(_,0,n.width-e.width),y:br(b,0,n.height-e.height)}}function f5(i,e,t){let n=Br(t.padding);return e==="center"?i.x+i.width/2:e==="right"?i.x+i.width-n.right:i.x+n.left}function KV(i){return Fl([],Nc(i))}function gge(i,e,t){return Tc(i,{tooltip:e,tooltipItems:t,type:"tooltip"})}function YV(i,e){let t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?i.override(t):i}var PU={beforeTitle:Al,title(i){if(i.length>0){let e=i[0],t=e.chart.data.labels,n=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return t[e.dataIndex]}return""},afterTitle:Al,beforeBody:Al,beforeLabel:Al,label(i){if(this&&this.options&&this.options.mode==="dataset")return i.label+": "+i.formattedValue||i.formattedValue;let e=i.dataset.label||"";e&&(e+=": ");let t=i.formattedValue;return on(t)||(e+=t),e},labelColor(i){let t=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(i){let t=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Al,afterBody:Al,beforeFooter:Al,footer:Al,afterFooter:Al};function $o(i,e,t,n){let r=i[e].call(t,n);return typeof r>"u"?PU[e].call(t,n):r}var XV=(()=>{class i extends Ba{static positioners=n1;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let t=this._cachedAnimations;if(t)return t;let n=this.chart,r=this.options.setContext(this.getContext()),o=r.enabled&&n.options.animation&&r.animations,s=new x5(this.chart,o);return o._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=gge(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){let{callbacks:r}=n,o=$o(r,"beforeTitle",this,t),s=$o(r,"title",this,t),a=$o(r,"afterTitle",this,t),l=[];return l=Fl(l,Nc(o)),l=Fl(l,Nc(s)),l=Fl(l,Nc(a)),l}getBeforeBody(t,n){return KV($o(n.callbacks,"beforeBody",this,t))}getBody(t,n){let{callbacks:r}=n,o=[];return Rn(t,s=>{let a={before:[],lines:[],after:[]},l=YV(r,s);Fl(a.before,Nc($o(l,"beforeLabel",this,s))),Fl(a.lines,$o(l,"label",this,s)),Fl(a.after,Nc($o(l,"afterLabel",this,s))),o.push(a)}),o}getAfterBody(t,n){return KV($o(n.callbacks,"afterBody",this,t))}getFooter(t,n){let{callbacks:r}=n,o=$o(r,"beforeFooter",this,t),s=$o(r,"footer",this,t),a=$o(r,"afterFooter",this,t),l=[];return l=Fl(l,Nc(o)),l=Fl(l,Nc(s)),l=Fl(l,Nc(a)),l}_createItems(t){let n=this._active,r=this.chart.data,o=[],s=[],a=[],l=[],c,d;for(c=0,d=n.length;c<d;++c)l.push(lge(this.chart,n[c]));return t.filter&&(l=l.filter((h,p,g)=>t.filter(h,p,g,r))),t.itemSort&&(l=l.sort((h,p)=>t.itemSort(h,p,r))),Rn(l,h=>{let p=YV(t.callbacks,h);o.push($o(p,"labelColor",this,h)),s.push($o(p,"labelPointStyle",this,h)),a.push($o(p,"labelTextColor",this,h))}),this.labelColors=o,this.labelPointStyles=s,this.labelTextColors=a,this.dataPoints=l,l}update(t,n){let r=this.options.setContext(this.getContext()),o=this._active,s,a=[];if(!o.length)this.opacity!==0&&(s={opacity:0});else{let l=n1[r.position].call(this,o,this._eventPosition);a=this._createItems(r),this.title=this.getTitle(a,r),this.beforeBody=this.getBeforeBody(a,r),this.body=this.getBody(a,r),this.afterBody=this.getAfterBody(a,r),this.footer=this.getFooter(a,r);let c=this._size=$V(this,r),d=Object.assign({},l,c),h=WV(this.chart,r,d),p=qV(r,d,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,s={opacity:1,x:p.x,y:p.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=a,this.$context=void 0,s&&this._resolveAnimations().update(this,s),t&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,r,o){let s=this.getCaretPosition(t,r,o);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(t,n,r){let{xAlign:o,yAlign:s}=this,{caretSize:a,cornerRadius:l}=r,{topLeft:c,topRight:d,bottomLeft:h,bottomRight:p}=Xd(l),{x:g,y:_}=t,{width:b,height:C}=n,y,M,O,A,D,N;return s==="center"?(D=_+C/2,o==="left"?(y=g,M=y-a,A=D+a,N=D-a):(y=g+b,M=y+a,A=D-a,N=D+a),O=y):(o==="left"?M=g+Math.max(c,h)+a:o==="right"?M=g+b-Math.max(d,p)-a:M=this.caretX,s==="top"?(A=_,D=A-a,y=M-a,O=M+a):(A=_+C,D=A+a,y=M+a,O=M-a),N=A),{x1:y,x2:M,x3:O,y1:A,y2:D,y3:N}}drawTitle(t,n,r){let o=this.title,s=o.length,a,l,c;if(s){let d=z0(r.rtl,this.x,this.width);for(t.x=f5(this,r.titleAlign,r),n.textAlign=d.textAlign(r.titleAlign),n.textBaseline="middle",a=cr(r.titleFont),l=r.titleSpacing,n.fillStyle=r.titleColor,n.font=a.string,c=0;c<s;++c)n.fillText(o[c],d.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+l,c+1===s&&(t.y+=r.titleMarginBottom-l)}}_drawColorBox(t,n,r,o,s){let a=this.labelColors[r],l=this.labelPointStyles[r],{boxHeight:c,boxWidth:d}=s,h=cr(s.bodyFont),p=f5(this,"left",s),g=o.x(p),_=c<h.lineHeight?(h.lineHeight-c)/2:0,b=n.y+_;if(s.usePointStyle){let C={radius:Math.min(d,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},y=o.leftForLtr(g,d)+d/2,M=b+c/2;t.strokeStyle=s.multiKeyBackground,t.fillStyle=s.multiKeyBackground,i5(t,C,y,M),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,i5(t,C,y,M)}else{t.lineWidth=ln(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;let C=o.leftForLtr(g,d),y=o.leftForLtr(o.xPlus(g,1),d-2),M=Xd(a.borderRadius);Object.values(M).some(O=>O!==0)?(t.beginPath(),t.fillStyle=s.multiKeyBackground,wg(t,{x:C,y:b,w:d,h:c,radius:M}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),wg(t,{x:y,y:b+1,w:d-2,h:c-2,radius:M}),t.fill()):(t.fillStyle=s.multiKeyBackground,t.fillRect(C,b,d,c),t.strokeRect(C,b,d,c),t.fillStyle=a.backgroundColor,t.fillRect(y,b+1,d-2,c-2))}t.fillStyle=this.labelTextColors[r]}drawBody(t,n,r){let{body:o}=this,{bodySpacing:s,bodyAlign:a,displayColors:l,boxHeight:c,boxWidth:d,boxPadding:h}=r,p=cr(r.bodyFont),g=p.lineHeight,_=0,b=z0(r.rtl,this.x,this.width),C=function(H){n.fillText(H,b.x(t.x+_),t.y+g/2),t.y+=g+s},y=b.textAlign(a),M,O,A,D,N,B,T;for(n.textAlign=a,n.textBaseline="middle",n.font=p.string,t.x=f5(this,y,r),n.fillStyle=r.bodyColor,Rn(this.beforeBody,C),_=l&&y!=="right"?a==="center"?d/2+h:d+2+h:0,D=0,B=o.length;D<B;++D){for(M=o[D],O=this.labelTextColors[D],n.fillStyle=O,Rn(M.before,C),A=M.lines,l&&A.length&&(this._drawColorBox(n,t,D,b,r),g=Math.max(p.lineHeight,c)),N=0,T=A.length;N<T;++N)C(A[N]),g=p.lineHeight;Rn(M.after,C)}_=0,g=p.lineHeight,Rn(this.afterBody,C),t.y-=s}drawFooter(t,n,r){let o=this.footer,s=o.length,a,l;if(s){let c=z0(r.rtl,this.x,this.width);for(t.x=f5(this,r.footerAlign,r),t.y+=r.footerMarginTop,n.textAlign=c.textAlign(r.footerAlign),n.textBaseline="middle",a=cr(r.footerFont),n.fillStyle=r.footerColor,n.font=a.string,l=0;l<s;++l)n.fillText(o[l],c.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+r.footerSpacing}}drawBackground(t,n,r,o){let{xAlign:s,yAlign:a}=this,{x:l,y:c}=t,{width:d,height:h}=r,{topLeft:p,topRight:g,bottomLeft:_,bottomRight:b}=Xd(o.cornerRadius);n.fillStyle=o.backgroundColor,n.strokeStyle=o.borderColor,n.lineWidth=o.borderWidth,n.beginPath(),n.moveTo(l+p,c),a==="top"&&this.drawCaret(t,n,r,o),n.lineTo(l+d-g,c),n.quadraticCurveTo(l+d,c,l+d,c+g),a==="center"&&s==="right"&&this.drawCaret(t,n,r,o),n.lineTo(l+d,c+h-b),n.quadraticCurveTo(l+d,c+h,l+d-b,c+h),a==="bottom"&&this.drawCaret(t,n,r,o),n.lineTo(l+_,c+h),n.quadraticCurveTo(l,c+h,l,c+h-_),a==="center"&&s==="left"&&this.drawCaret(t,n,r,o),n.lineTo(l,c+p),n.quadraticCurveTo(l,c,l+p,c),n.closePath(),n.fill(),o.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){let n=this.chart,r=this.$animations,o=r&&r.x,s=r&&r.y;if(o||s){let a=n1[t.position].call(this,this._active,this._eventPosition);if(!a)return;let l=this._size=$V(this,t),c=Object.assign({},a,this._size),d=WV(n,t,c),h=qV(t,c,d,n);(o._to!==h.x||s._to!==h.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=l.width,this.height=l.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(t){let n=this.options.setContext(this.getContext()),r=this.opacity;if(!r)return;this._updateAnimationTarget(n);let o={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;let a=Br(n.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&l&&(t.save(),t.globalAlpha=r,this.drawBackground(s,t,o,n),WD(t,n.textDirection),s.y+=a.top,this.drawTitle(s,t,n),this.drawBody(s,t,n),this.drawFooter(s,t,n),qD(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){let r=this._active,o=t.map(({datasetIndex:l,index:c})=>{let d=this.chart.getDatasetMeta(l);if(!d)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:d.data[c],index:c}}),s=!Wx(r,o),a=this._positionChanged(o,n);(s||a)&&(this._active=o,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let o=this.options,s=this._active||[],a=this._getActiveElements(t,s,n,r),l=this._positionChanged(a,t),c=n||!Wx(a,s)||l;return c&&(this._active=a,(o.enabled||o.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),c}_getActiveElements(t,n,r,o){let s=this.options;if(t.type==="mouseout")return[];if(!o)return n.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);let a=this.chart.getElementsAtEventForMode(t,s.mode,s,r);return s.reverse&&a.reverse(),a}_positionChanged(t,n){let{caretX:r,caretY:o,options:s}=this,a=n1[s.position].call(this,t,n);return a!==!1&&(r!==a.x||o!==a.y)}}return i})(),pge={id:"tooltip",_element:XV,positioners:n1,afterInit(i,e,t){t&&(i.tooltip=new XV({chart:i,options:t}))},beforeUpdate(i,e,t){i.tooltip&&i.tooltip.initialize(t)},reset(i,e,t){i.tooltip&&i.tooltip.initialize(t)},afterDraw(i){let e=i.tooltip;if(e&&e._willRender()){let t={tooltip:e};if(i.notifyPlugins("beforeTooltipDraw",ot(Ie({},t),{cancelable:!0}))===!1)return;e.draw(i.ctx),i.notifyPlugins("afterTooltipDraw",t)}},afterEvent(i,e){if(i.tooltip){let t=e.replay;i.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(i,e)=>e.bodyFont.size,boxWidth:(i,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:PU},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:i=>i!=="filter"&&i!=="itemSort"&&i!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},mge=Object.freeze({__proto__:null,Colors:Sfe,Decimation:Ffe,Filler:Jfe,Legend:rge,SubTitle:age,Title:sge,Tooltip:pge}),xge=(i,e,t,n)=>(typeof e=="string"?(t=i.push(e)-1,n.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function _ge(i,e,t,n){let r=i.indexOf(e);if(r===-1)return xge(i,e,t,n);let o=i.lastIndexOf(e);return r!==o?t:r}var vge=(i,e)=>i===null?null:br(Math.round(i),0,e);function QV(i){let e=this.getLabels();return i>=0&&i<e.length?e[i]:i}var bge=(()=>{class i extends U0{static id="category";static defaults={ticks:{callback:QV}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){let n=this._addedLabels;if(n.length){let r=this.getLabels();for(let{index:o,label:s}of n)r[o]===s&&r.splice(o,1);this._addedLabels=[]}super.init(t)}parse(t,n){if(on(t))return null;let r=this.getLabels();return n=isFinite(n)&&r[n]===t?n:_ge(r,t,Bt(n,t),this._addedLabels),vge(n,r.length-1)}determineDataLimits(){let{minDefined:t,maxDefined:n}=this.getUserBounds(),{min:r,max:o}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(r=0),n||(o=this.getLabels().length-1)),this.min=r,this.max=o}buildTicks(){let t=this.min,n=this.max,r=this.options.offset,o=[],s=this.getLabels();s=t===0&&n===s.length-1?s:s.slice(t,n+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let a=t;a<=n;a++)o.push({value:a});return o}getLabelForValue(t){return QV.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){let n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}return i})();function Cge(i,e){let t=[],{bounds:r,step:o,min:s,max:a,precision:l,count:c,maxTicks:d,maxDigits:h,includeBounds:p}=i,g=o||1,_=d-1,{min:b,max:C}=e,y=!on(s),M=!on(a),O=!on(c),A=(C-b)/(h+1),D=ED((C-b)/_/g)*g,N,B,T,H;if(D<1e-14&&!y&&!M)return[{value:b},{value:C}];H=Math.ceil(C/D)-Math.floor(b/D),H>_&&(D=ED(H*D/_/g)*g),on(l)||(N=Math.pow(10,l),D=Math.ceil(D*N)/N),r==="ticks"?(B=Math.floor(b/D)*D,T=Math.ceil(C/D)*D):(B=b,T=C),y&&M&&o&&Lj((a-s)/o,D/1e3)?(H=Math.round(Math.min((a-s)/D,d)),D=(a-s)/H,B=s,T=a):O?(B=y?s:B,T=M?a:T,H=c-1,D=(T-B)/H):(H=(T-B)/D,bg(H,Math.round(H),D/1e3)?H=Math.round(H):H=Math.ceil(H));let te=Math.max(OD(D),OD(B));N=Math.pow(10,on(l)?te:l),B=Math.round(B*N)/N,T=Math.round(T*N)/N;let L=0;for(y&&(p&&B!==s?(t.push({value:s}),B<s&&L++,bg(Math.round((B+L*D)*N)/N,s,JV(s,A,i))&&L++):B<s&&L++);L<H;++L){let z=Math.round((B+L*D)*N)/N;if(M&&z>a)break;t.push({value:z})}return M&&p&&T!==a?t.length&&bg(t[t.length-1].value,a,JV(a,A,i))?t[t.length-1].value=a:t.push({value:a}):(!M||T===a)&&t.push({value:T}),t}function JV(i,e,{horizontal:t,minRotation:n}){let r=Gs(n),o=(t?Math.sin(r):Math.cos(r))||.001,s=.75*e*(""+i).length;return Math.min(e/o,s)}var Og=class extends U0{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return on(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){let{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds(),{min:r,max:o}=this,s=l=>r=t?r:l,a=l=>o=n?o:l;if(e){let l=Ta(r),c=Ta(o);l<0&&c<0?a(0):l>0&&c>0&&s(0)}if(r===o){let l=o===0?1:Math.abs(o*.05);a(o+l),e||s(r-l)}this.min=r,this.max=o}getTickLimit(){let e=this.options.ticks,{maxTicksLimit:t,stepSize:n}=e,r;return n?(r=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),t=t||11),t&&(r=Math.min(t,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let e=this.options,t=e.ticks,n=this.getTickLimit();n=Math.max(2,n);let r={maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},o=this._range||this,s=Cge(r,o);return e.bounds==="ticks"&&PD(s,this,"value"),e.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}configure(){let e=this.ticks,t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){let r=(n-t)/Math.max(e.length-1,1)/2;t-=r,n+=r}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return yg(e,this.chart.options.locale,this.options.ticks.format)}},w8=class extends Og{static id="linear";static defaults={ticks:{callback:qx.formatters.numeric}};determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=Pi(e)?e:0,this.max=Pi(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){let e=this.isHorizontal(),t=e?this.width:this.height,n=Gs(this.options.ticks.minRotation),r=(e?Math.sin(n):Math.cos(n))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,o.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}},o1=i=>Math.floor(Fc(i)),V0=(i,e)=>Math.pow(10,o1(i)+e);function ZV(i){return i/Math.pow(10,o1(i))===1}function eU(i,e,t){let n=Math.pow(10,t),r=Math.floor(i/n);return Math.ceil(e/n)-r}function yge(i,e){let t=e-i,n=o1(t);for(;eU(i,e,n)>10;)n++;for(;eU(i,e,n)<10;)n--;return Math.min(n,o1(i))}function wge(i,{min:e,max:t}){e=Go(i.min,e);let n=[],r=o1(e),o=yge(e,t),s=o<0?Math.pow(10,Math.abs(o)):1,a=Math.pow(10,o),l=r>o?Math.pow(10,r):0,c=Math.round((e-l)*s)/s,d=Math.floor((e-l)/a/10)*a*10,h=Math.floor((c-d)/Math.pow(10,o)),p=Go(i.min,Math.round((l+d+h*Math.pow(10,o))*s)/s);for(;p<t;)n.push({value:p,major:ZV(p),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(o++,h=2,s=o>=0?1:s),p=Math.round((l+d+h*Math.pow(10,o))*s)/s;let g=Go(i.max,p);return n.push({value:g,major:ZV(g),significand:h}),n}var M8=class extends U0{static id="logarithmic";static defaults={ticks:{callback:qx.formatters.logarithmic,major:{enabled:!0}}};constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){let n=Og.prototype.parse.apply(this,[e,t]);if(n===0){this._zero=!0;return}return Pi(n)&&n>0?n:null}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=Pi(e)?Math.max(0,e):null,this.max=Pi(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Pi(this._userMin)&&(this.min=e===V0(this.min,0)?V0(this.min,-1):V0(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:e,maxDefined:t}=this.getUserBounds(),n=this.min,r=this.max,o=a=>n=e?n:a,s=a=>r=t?r:a;n===r&&(n<=0?(o(1),s(10)):(o(V0(n,-1)),s(V0(r,1)))),n<=0&&o(V0(r,-1)),r<=0&&s(V0(n,1)),this.min=n,this.max=r}buildTicks(){let e=this.options,t={min:this._userMin,max:this._userMax},n=wge(t,this);return e.bounds==="ticks"&&PD(n,this,"value"),e.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(e){return e===void 0?"0":yg(e,this.chart.options.locale,this.options.ticks.format)}configure(){let e=this.min;super.configure(),this._startValue=Fc(e),this._valueRange=Fc(this.max)-Fc(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Fc(e)-this._startValue)/this._valueRange)}getValueForPixel(e){let t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}};function E8(i){let e=i.ticks;if(e.display&&i.display){let t=Br(e.backdropPadding);return Bt(e.font&&e.font.size,pi.font.size)+t.height}return 0}function Mge(i,e,t){return t=ui(t)?t:[t],{w:Wj(i,e.string,t),h:t.length*e.lineHeight}}function tU(i,e,t,n,r){return i===n||i===r?{start:e-t/2,end:e+t/2}:i<n||i>r?{start:e-t,end:e}:{start:e,end:e+t}}function Ege(i){let e={l:i.left+i._padding.left,r:i.right-i._padding.right,t:i.top+i._padding.top,b:i.bottom-i._padding.bottom},t=Object.assign({},e),n=[],r=[],o=i._pointLabels.length,s=i.options.pointLabels,a=s.centerPointLabels?Mn/o:0;for(let l=0;l<o;l++){let c=s.setContext(i.getPointLabelContext(l));r[l]=c.padding;let d=i.getPointPosition(l,i.drawingArea+r[l],a),h=cr(c.font),p=Mge(i.ctx,h,i._pointLabels[l]);n[l]=p;let g=Ir(i.getIndexAngle(l)+a),_=Math.round(Z2(g)),b=tU(_,d.x,p.w,0,180),C=tU(_,d.y,p.h,90,270);Pge(t,e,g,b,C)}i.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),i._pointLabelItems=kge(i,n,r)}function Pge(i,e,t,n,r){let o=Math.abs(Math.sin(t)),s=Math.abs(Math.cos(t)),a=0,l=0;n.start<e.l?(a=(e.l-n.start)/o,i.l=Math.min(i.l,e.l-a)):n.end>e.r&&(a=(n.end-e.r)/o,i.r=Math.max(i.r,e.r+a)),r.start<e.t?(l=(e.t-r.start)/s,i.t=Math.min(i.t,e.t-l)):r.end>e.b&&(l=(r.end-e.b)/s,i.b=Math.max(i.b,e.b+l))}function Oge(i,e,t){let n=i.drawingArea,{extra:r,additionalAngle:o,padding:s,size:a}=t,l=i.getPointPosition(e,n+r+s,o),c=Math.round(Z2(Ir(l.angle+Li))),d=Fge(l.y,a.h,c),h=Age(c),p=Dge(l.x,a.w,h);return{visible:!0,x:l.x,y:d,textAlign:h,left:p,top:d,right:p+a.w,bottom:d+a.h}}function Sge(i,e){if(!e)return!0;let{left:t,top:n,right:r,bottom:o}=i;return!(kl({x:t,y:n},e)||kl({x:t,y:o},e)||kl({x:r,y:n},e)||kl({x:r,y:o},e))}function kge(i,e,t){let n=[],r=i._pointLabels.length,o=i.options,{centerPointLabels:s,display:a}=o.pointLabels,l={extra:E8(o)/2,additionalAngle:s?Mn/r:0},c;for(let d=0;d<r;d++){l.padding=t[d],l.size=e[d];let h=Oge(i,d,l);n.push(h),a==="auto"&&(h.visible=Sge(h,c),h.visible&&(c=h))}return n}function Age(i){return i===0||i===180?"center":i<180?"left":"right"}function Dge(i,e,t){return t==="right"?i-=e:t==="center"&&(i-=e/2),i}function Fge(i,e,t){return t===90||t===270?i-=e/2:(t>270||t<90)&&(i-=e),i}function Ige(i,e,t){let{left:n,top:r,right:o,bottom:s}=t,{backdropColor:a}=e;if(!on(a)){let l=Xd(e.borderRadius),c=Br(e.backdropPadding);i.fillStyle=a;let d=n-c.left,h=r-c.top,p=o-n+c.width,g=s-r+c.height;Object.values(l).some(_=>_!==0)?(i.beginPath(),wg(i,{x:d,y:h,w:p,h:g,radius:l}),i.fill()):i.fillRect(d,h,p,g)}}function Tge(i,e){let{ctx:t,options:{pointLabels:n}}=i;for(let r=e-1;r>=0;r--){let o=i._pointLabelItems[r];if(!o.visible)continue;let s=n.setContext(i.getPointLabelContext(r));Ige(t,s,o);let a=cr(s.font),{x:l,y:c,textAlign:d}=o;Yd(t,i._pointLabels[r],l,c+a.lineHeight/2,a,{color:s.color,textAlign:d,textBaseline:"middle"})}}function OU(i,e,t,n){let{ctx:r}=i;if(t)r.arc(i.xCenter,i.yCenter,e,0,hi);else{let o=i.getPointPosition(0,e);r.moveTo(o.x,o.y);for(let s=1;s<n;s++)o=i.getPointPosition(s,e),r.lineTo(o.x,o.y)}}function Bge(i,e,t,n,r){let o=i.ctx,s=e.circular,{color:a,lineWidth:l}=e;!s&&!n||!a||!l||t<0||(o.save(),o.strokeStyle=a,o.lineWidth=l,o.setLineDash(r.dash||[]),o.lineDashOffset=r.dashOffset,o.beginPath(),OU(i,t,s,n),o.closePath(),o.stroke(),o.restore())}function Nge(i,e,t){return Tc(i,{label:t,index:e,type:"pointLabel"})}var P8=class extends Og{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:qx.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let e=this._padding=Br(E8(this.options)/2),t=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!1);this.min=Pi(e)&&!isNaN(e)?e:0,this.max=Pi(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/E8(this.options))}generateTickLabels(e){Og.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,n)=>{let r=ni(this.options.pointLabels.callback,[t,n],this);return r||r===0?r:""}).filter((t,n)=>this.chart.getDataVisibility(n))}fit(){let e=this.options;e.display&&e.pointLabels.display?Ege(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,n,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,n,r))}getIndexAngle(e){let t=hi/(this._pointLabels.length||1),n=this.options.startAngle||0;return Ir(e*t+Gs(n))}getDistanceFromCenterForValue(e){if(on(e))return NaN;let t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(on(e))return NaN;let t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){let t=this._pointLabels||[];if(e>=0&&e<t.length){let n=t[e];return Nge(this.getContext(),e,n)}}getPointPosition(e,t,n=0){let r=this.getIndexAngle(e)-Li+n;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){let{left:t,top:n,right:r,bottom:o}=this._pointLabelItems[e];return{left:t,top:n,right:r,bottom:o}}drawBackground(){let{backgroundColor:e,grid:{circular:t}}=this.options;if(e){let n=this.ctx;n.save(),n.beginPath(),OU(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){let e=this.ctx,t=this.options,{angleLines:n,grid:r,border:o}=t,s=this._pointLabels.length,a,l,c;if(t.pointLabels.display&&Tge(this,s),r.display&&this.ticks.forEach((d,h)=>{if(h!==0||h===0&&this.min<0){l=this.getDistanceFromCenterForValue(d.value);let p=this.getContext(h),g=r.setContext(p),_=o.setContext(p);Bge(this,g,l,s,_)}}),n.display){for(e.save(),a=s-1;a>=0;a--){let d=n.setContext(this.getPointLabelContext(a)),{color:h,lineWidth:p}=d;!p||!h||(e.lineWidth=p,e.strokeStyle=h,e.setLineDash(d.borderDash),e.lineDashOffset=d.borderDashOffset,l=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){let e=this.ctx,t=this.options,n=t.ticks;if(!n.display)return;let r=this.getIndexAngle(0),o,s;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!t.reverse)return;let c=n.setContext(this.getContext(l)),d=cr(c.font);if(o=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=d.string,s=e.measureText(a.label).width,e.fillStyle=c.backdropColor;let h=Br(c.backdropPadding);e.fillRect(-s/2-h.left,-o-d.size/2-h.top,s+h.width,d.size+h.height)}Yd(e,a.label,0,-o,d,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}},E5={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Wo=Object.keys(E5);function nU(i,e){return i-e}function iU(i,e){if(on(e))return null;let t=i._adapter,{parser:n,round:r,isoWeekday:o}=i._parseOpts,s=e;return typeof n=="function"&&(s=n(s)),Pi(s)||(s=typeof n=="string"?t.parse(s,n):t.parse(s)),s===null?null:(r&&(s=r==="week"&&(R0(o)||o===!0)?t.startOf(s,"isoWeek",o):t.startOf(s,r)),+s)}function rU(i,e,t,n){let r=Wo.length;for(let o=Wo.indexOf(i);o<r-1;++o){let s=E5[Wo[o]],a=s.steps?s.steps:Number.MAX_SAFE_INTEGER;if(s.common&&Math.ceil((t-e)/(a*s.size))<=n)return Wo[o]}return Wo[r-1]}function Lge(i,e,t,n,r){for(let o=Wo.length-1;o>=Wo.indexOf(t);o--){let s=Wo[o];if(E5[s].common&&i._adapter.diff(r,n,s)>=e-1)return s}return Wo[t?Wo.indexOf(t):0]}function Rge(i){for(let e=Wo.indexOf(i)+1,t=Wo.length;e<t;++e)if(E5[Wo[e]].common)return Wo[e]}function oU(i,e,t){if(!t)i[e]=!0;else if(t.length){let{lo:n,hi:r}=e5(t,e),o=t[n]>=e?t[n]:t[r];i[o]=!0}}function zge(i,e,t,n){let r=i._adapter,o=+r.startOf(e[0].value,n),s=e[e.length-1].value,a,l;for(a=o;a<=s;a=+r.add(a,1,n))l=t[a],l>=0&&(e[l].major=!0);return e}function sU(i,e,t){let n=[],r={},o=e.length,s,a;for(s=0;s<o;++s)a=e[s],r[a]=s,n.push({value:a,major:!1});return o===0||!t?n:zge(i,n,r,t)}var O8=(()=>{class i extends U0{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n={}){let r=t.time||(t.time={}),o=this._adapter=new X0e._date(t.adapters.date);o.init(n),_g(r.displayFormats,o.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:iU(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let t=this.options,n=this._adapter,r=t.time.unit||"day",{min:o,max:s,minDefined:a,maxDefined:l}=this.getUserBounds();function c(d){!a&&!isNaN(d.min)&&(o=Math.min(o,d.min)),!l&&!isNaN(d.max)&&(s=Math.max(s,d.max))}(!a||!l)&&(c(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&c(this.getMinMax(!1))),o=Pi(o)&&!isNaN(o)?o:+n.startOf(Date.now(),r),s=Pi(s)&&!isNaN(s)?s:+n.endOf(Date.now(),r)+1,this.min=Math.min(o,s-1),this.max=Math.max(o+1,s)}_getLabelBounds(){let t=this.getLabelTimestamps(),n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],r=t[t.length-1]),{min:n,max:r}}buildTicks(){let t=this.options,n=t.time,r=t.ticks,o=r.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&o.length&&(this.min=this._userMin||o[0],this.max=this._userMax||o[o.length-1]);let s=this.min,a=this.max,l=jj(o,s,a);return this._unit=n.unit||(r.autoSkip?rU(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):Lge(this,l.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:Rge(this._unit),this.initOffsets(o),t.reverse&&l.reverse(),sU(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let n=0,r=0,o,s;this.options.offset&&t.length&&(o=this.getDecimalForValue(t[0]),t.length===1?n=1-o:n=(this.getDecimalForValue(t[1])-o)/2,s=this.getDecimalForValue(t[t.length-1]),t.length===1?r=s:r=(s-this.getDecimalForValue(t[t.length-2]))/2);let a=t.length<3?.5:.25;n=br(n,0,a),r=br(r,0,a),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){let t=this._adapter,n=this.min,r=this.max,o=this.options,s=o.time,a=s.unit||rU(s.minUnit,n,r,this._getLabelCapacity(n)),l=Bt(o.ticks.stepSize,1),c=a==="week"?s.isoWeekday:!1,d=R0(c)||c===!0,h={},p=n,g,_;if(d&&(p=+t.startOf(p,"isoWeek",c)),p=+t.startOf(p,d?"day":a),t.diff(r,n,a)>1e5*l)throw new Error(n+" and "+r+" are too far apart with stepSize of "+l+" "+a);let b=o.ticks.source==="data"&&this.getDataTimestamps();for(g=p,_=0;g<r;g=+t.add(g,l,a),_++)oU(h,g,b);return(g===r||o.bounds==="ticks"||_===1)&&oU(h,g,b),Object.keys(h).sort(nU).map(C=>+C)}getLabelForValue(t){let n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(t,r.tooltipFormat):n.format(t,r.displayFormats.datetime)}format(t,n){let o=this.options.time.displayFormats,s=this._unit,a=n||o[s];return this._adapter.format(t,a)}_tickFormatFunction(t,n,r,o){let s=this.options,a=s.ticks.callback;if(a)return ni(a,[t,n,r],this);let l=s.time.displayFormats,c=this._unit,d=this._majorUnit,h=c&&l[c],p=d&&l[d],g=r[n],_=d&&p&&g&&g.major;return this._adapter.format(t,o||(_?p:h))}generateTickLabels(t){let n,r,o;for(n=0,r=t.length;n<r;++n)o=t[n],o.label=this._tickFormatFunction(o.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){let n=this._offsets,r=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(t){let n=this._offsets,r=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(t){let n=this.options.ticks,r=this.ctx.measureText(t).width,o=Gs(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(o),a=Math.sin(o),l=this._resolveTickFontOptions(0).size;return{w:r*s+l*a,h:r*a+l*s}}_getLabelCapacity(t){let n=this.options.time,r=n.displayFormats,o=r[n.unit]||r.millisecond,s=this._tickFormatFunction(t,0,sU(this,[t],this._majorUnit),o),a=this._getLabelSize(s),l=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return l>0?l:1}getDataTimestamps(){let t=this._cache.data||[],n,r;if(t.length)return t;let o=this.getMatchingVisibleMetas();if(this._normalized&&o.length)return this._cache.data=o[0].controller.getAllParsedValues(this);for(n=0,r=o.length;n<r;++n)t=t.concat(o[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){let t=this._cache.labels||[],n,r;if(t.length)return t;let o=this.getLabels();for(n=0,r=o.length;n<r;++n)t.push(iU(this,o[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return AD(t.sort(nU))}}return i})();function g5(i,e,t){let n=0,r=i.length-1,o,s,a,l;t?(e>=i[n].pos&&e<=i[r].pos&&({lo:n,hi:r}=Sl(i,"pos",e)),{pos:o,time:a}=i[n],{pos:s,time:l}=i[r]):(e>=i[n].time&&e<=i[r].time&&({lo:n,hi:r}=Sl(i,"time",e)),{time:o,pos:a}=i[n],{time:s,pos:l}=i[r]);let c=s-o;return c?a+(l-a)*(e-o)/c:a}var S8=class extends O8{static id="timeseries";static defaults=O8.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=g5(t,this.min),this._tableRange=g5(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){let{min:t,max:n}=this,r=[],o=[],s,a,l,c,d;for(s=0,a=e.length;s<a;++s)c=e[s],c>=t&&c<=n&&r.push(c);if(r.length<2)return[{time:t,pos:0},{time:n,pos:1}];for(s=0,a=r.length;s<a;++s)d=r[s+1],l=r[s-1],c=r[s],Math.round((d+l)/2)!==c&&o.push({time:c,pos:s/(a-1)});return o}_generate(){let e=this.min,t=this.max,n=super.getDataTimestamps();return(!n.includes(e)||!n.length)&&n.splice(0,0,e),(!n.includes(t)||n.length===1)&&n.push(t),n.sort((r,o)=>r-o)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;let t=this.getDataTimestamps(),n=this.getLabelTimestamps();return t.length&&n.length?e=this.normalize(t.concat(n)):e=t.length?t:n,e=this._cache.all=e,e}getDecimalForValue(e){return(g5(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){let t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return g5(this._table,n*this._tableRange+this._minPos,!0)}},jge=Object.freeze({__proto__:null,CategoryScale:bge,LinearScale:w8,LogarithmicScale:M8,RadialLinearScale:P8,TimeScale:O8,TimeSeriesScale:S8}),P5=[Y0e,Cfe,mge,jge];function Vge(i,e){i&1&&(u(0,"div",32)(1,"div",33)(2,"span",34),m(3,"Y\xFCkleniyor..."),f()(),u(4,"p",35),m(5,"S\u0131nav sonu\xE7lar\u0131 y\xFCkleniyor..."),f()())}function Uge(i,e){i&1&&(u(0,"div",36),k(1,"canvas",37),f())}function Hge(i,e){if(i&1&&(u(0,"tr")(1,"td")(2,"span"),m(3),f()(),u(4,"td")(5,"span",44),m(6),f()(),u(7,"td")(8,"span",45),m(9),f()(),u(10,"td")(11,"span",46),m(12),f()(),u(13,"td")(14,"span",47),m(15),f()(),u(16,"td")(17,"span",48),m(18),f()(),u(19,"td")(20,"div",49)(21,"div",50),m(22),f()()(),u(23,"td"),k(24,"i",51),u(25,"span",52),m(26),f()(),u(27,"td"),k(28,"i",53),u(29,"span",52),m(30),f()(),u(31,"td")(32,"small",54),m(33),f()()()),i&2){let t=e.$implicit,n=F(2);It("border-left","4px solid "+n.getSinavTuruColor(t.sinav_turu)),x(3),W(t.sinav_adi),x(2),It("background-color",n.getSinavTuruColor(t.sinav_turu)),x(),he(" ",n.getSinavTuruLabel(t.sinav_turu)," "),x(3),W(t.dogru_sayisi),x(3),W(t.yanlis_sayisi),x(3),W(t.bos_sayisi),x(3),W(n.calculateNet(t)),x(3),It("width",n.getSuccessPercentage(t),"%")("background-color",n.getSinavTuruColor(t.sinav_turu)),x(),he(" ",n.getSuccessPercentage(t),"% "),x(4),W(t.katilimci_sayisi||"Bilinmiyor"),x(4),W(t.siralama||"Bilinmiyor"),x(3),W(n.formatDate(t.gonderim_tarihi))}}function Gge(i,e){if(i&1&&(u(0,"div",55)(1,"div",56)(2,"h6",57),m(3),f(),u(4,"small",54),m(5),f()(),u(6,"div",58)(7,"div",59)(8,"div",60)(9,"span",61),m(10),f(),u(11,"small",54),m(12,"Do\u011Fru"),f()(),u(13,"div",60)(14,"span",62),m(15),f(),u(16,"small",54),m(17,"Yanl\u0131\u015F"),f()(),u(18,"div",60)(19,"span",63),m(20),f(),u(21,"small",54),m(22,"Bo\u015F"),f()()(),u(23,"div",59)(24,"div",64)(25,"span",65),m(26),f(),u(27,"small",54),m(28,"Net"),f()(),u(29,"div",66)(30,"div",67)(31,"div",50),m(32),f()(),u(33,"small",54),m(34,"Ba\u015Far\u0131"),f()()(),u(35,"div",1)(36,"div",64),k(37,"i",68),u(38,"span",52),m(39),f(),k(40,"br"),u(41,"small",54),m(42,"Kat\u0131l\u0131mc\u0131"),f()(),u(43,"div",64),k(44,"i",69),u(45,"span",52),m(46),f(),k(47,"br"),u(48,"small",54),m(49,"S\u0131ralama"),f()()()()()),i&2){let t=e.$implicit,n=F(2);It("border-left","4px solid "+n.getSinavTuruColor(t.sinav_turu)),x(3),W(t.sinav_adi),x(2),W(n.formatDate(t.gonderim_tarihi)),x(5),W(t.dogru_sayisi),x(5),W(t.yanlis_sayisi),x(5),W(t.bos_sayisi),x(6),W(n.calculateNet(t)),x(5),It("width",n.getSuccessPercentage(t),"%")("background-color",n.getSinavTuruColor(t.sinav_turu)),x(),he(" ",n.getSuccessPercentage(t),"% "),x(7),W(t.katilimci_sayisi||"Bilinmiyor"),x(7),W(t.siralama||"Bilinmiyor")}}function $ge(i,e){if(i&1&&(u(0,"div",38)(1,"div",39)(2,"table",40)(3,"thead")(4,"tr")(5,"th"),m(6,"S\u0131nav Ad\u0131"),f(),u(7,"th"),m(8,"S\u0131nav T\xFCr\xFC"),f(),u(9,"th"),m(10,"Do\u011Fru"),f(),u(11,"th"),m(12,"Yanl\u0131\u015F"),f(),u(13,"th"),m(14,"Bo\u015F"),f(),u(15,"th"),m(16,"Net"),f(),u(17,"th"),m(18,"Ba\u015Far\u0131 %"),f(),u(19,"th"),m(20,"Kat\u0131l\u0131mc\u0131"),f(),u(21,"th"),m(22,"S\u0131ralama"),f(),u(23,"th"),m(24,"Tarih"),f()()(),u(25,"tbody"),ee(26,Hge,34,18,"tr",41),f()()(),u(27,"div",42),ee(28,Gge,50,15,"div",43),f()()),i&2){let t=F();x(26),S("ngForOf",t.sinavSonuclari),x(2),S("ngForOf",t.sinavSonuclari)}}function Wge(i,e){i&1&&(u(0,"div",32)(1,"div",33)(2,"span",34),m(3,"Y\xFCkleniyor..."),f()(),u(4,"p",35),m(5,"Konular y\xFCkleniyor..."),f()())}function qge(i,e){if(i&1&&(u(0,"span",80),m(1),f()),i&2){let t=F().$implicit;x(),he(" ",t.sinif_seviyesi," ")}}function Kge(i,e){if(i&1&&(u(0,"div",72)(1,"div",73),k(2,"i",74),f(),u(3,"div",75)(4,"h6",76),m(5),f(),u(6,"div",77)(7,"small"),k(8,"i",78),m(9),f(),ee(10,qge,2,1,"span",79),f()()()),i&2){let t=e.$implicit,n=F(2);x(5),W(t.konu_adi||t.konu_baslik),x(4),he(" ",n.formatDate(t.isleme_tarihi)," "),x(),S("ngIf",t.sinif_seviyesi)}}function Yge(i,e){if(i&1&&(u(0,"div",70),ee(1,Kge,11,3,"div",71),f()),i&2){let t=F();x(),S("ngForOf",t.sonIslenenKonular)}}function Xge(i,e){i&1&&(u(0,"div",81),k(1,"i",82),u(2,"p",83),m(3,"Hen\xFCz i\u015Flenen konu yok"),f()())}function Qge(i,e){i&1&&(u(0,"div",32)(1,"div",33)(2,"span",34),m(3,"Y\xFCkleniyor..."),f()(),u(4,"p",35),m(5,"Konu analizi y\xFCkleniyor..."),f()())}function Jge(i,e){if(i&1&&(u(0,"div",86)(1,"div",87)(2,"h6",88),m(3),f(),u(4,"span",80),m(5),f()(),u(6,"div",89)(7,"div",90)(8,"span",91),m(9),f()()(),u(10,"div",92)(11,"div",93)(12,"div",94)(13,"span",61),m(14),f(),u(15,"small",54),m(16,"Do\u011Fru"),f()(),u(17,"div",94)(18,"span",62),m(19),f(),u(20,"small",54),m(21,"Yanl\u0131\u015F"),f()(),u(22,"div",94)(23,"span",63),m(24),f(),u(25,"small",54),m(26,"Bo\u015F"),f()(),u(27,"div",94)(28,"span",65),m(29),f(),u(30,"small",54),m(31,"Toplam"),f()()()()()),i&2){let t=e.$implicit,n=F(2);x(3),W(t.konu_adi),x(),It("background-color",n.getKonuSuccessColor(t.basari_orani)),x(),he(" ",n.getKonuSuccessText(t.basari_orani)," "),x(2),It("width",t.basari_orani,"%")("background-color",n.getKonuSuccessColor(t.basari_orani)),wi("aria-valuenow",t.basari_orani),x(2),he("",t.basari_orani,"%"),x(5),W(t.dogru_sayisi),x(5),W(t.yanlis_sayisi),x(5),W(t.bos_sayisi),x(5),W(t.toplam_soru)}}function Zge(i,e){if(i&1&&(u(0,"div",84),ee(1,Jge,32,14,"div",85),f()),i&2){let t=F();x(),S("ngForOf",t.konuAnalizi)}}function epe(i,e){i&1&&(u(0,"div",95),k(1,"i",96),u(2,"h5",97),m(3,"Hen\xFCz Konu Analizi Yok"),f(),u(4,"p",54),m(5,"S\u0131nav \xE7\xF6zd\xFCk\xE7e konu ba\u015Far\u0131 analiziniz burada g\xF6r\xFCnecek"),f()())}Lc.register(...P5);var O5=class i{constructor(e){this.http=e}isSidebarOpen=!0;studentName="";studentAvatar="";studentClass="";studentTeacher="";studentGroup="";isLoading=!1;error="";sinavSonuclari=[];comparisonChart;loadingExamResults=!1;sonIslenenKonular=[];loadingTopics=!1;konuAnalizi=[];loadingKonuAnalizi=!1;konuAnaliziChart;sinavTurleri={TYT:{color:"#667eea",label:"TYT Deneme"},AYT:{color:"#4facfe",label:"AYT Deneme"},TAR:{color:"#43e97b",label:"Tarama S\u0131nav\u0131"},TEST:{color:"#fa709a",label:"Konu Testi"}};ngOnInit(){this.loadStudentInfo(),this.checkScreenSize(),this.loadSinavSonuclari(),this.loadSonIslenenKonular(),this.loadKonuAnalizi(),window.addEventListener("resize",()=>{this.checkScreenSize()})}ngAfterViewInit(){setTimeout(()=>{this.createComparisonChart()},500)}loadStudentInfo(){let e=localStorage.getItem("user")||sessionStorage.getItem("user");if(e)try{let t=JSON.parse(e);this.studentName=t.adi_soyadi||"\xD6\u011Frenci",this.studentClass=t.sinif||"S\u0131n\u0131f Bilgisi Yok",this.studentTeacher=t.ogretmeni||"\xD6\u011Fretmen Bilgisi Yok",this.studentGroup=t.grup||t.grubu||"",t.avatar&&t.avatar.trim()!==""?this.studentAvatar=t.avatar:this.studentAvatar=`https://ui-avatars.com/api/?name=${encodeURIComponent(this.studentName)}&background=28a745&color=fff&size=40&font-size=0.6&rounded=true`}catch{this.setDefaultStudentInfo()}else this.setDefaultStudentInfo()}setDefaultStudentInfo(){this.studentName="\xD6\u011Frenci",this.studentClass="S\u0131n\u0131f Bilgisi Yok",this.studentTeacher="\xD6\u011Fretmen Bilgisi Yok",this.studentAvatar="https://ui-avatars.com/api/?name=\xD6\u011Frenci&background=6c757d&color=fff&size=40&font-size=0.6&rounded=true"}toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen,localStorage.setItem("sidebarOpen",JSON.stringify(this.isSidebarOpen))}checkScreenSize(){if(window.innerWidth<768)this.isSidebarOpen=!1;else{let e=localStorage.getItem("sidebarOpen");this.isSidebarOpen=e?JSON.parse(e):!0}}getCurrentDate(){let e=new Date,t={day:"numeric",month:"long",year:"numeric"};return e.toLocaleDateString("tr-TR",t)}getCurrentTime(){let e=new Date,t={hour:"2-digit",minute:"2-digit"};return e.toLocaleTimeString("tr-TR",t)}loadSinavSonuclari(){this.loadingExamResults=!0;let e=localStorage.getItem("user")||sessionStorage.getItem("user");if(!e){this.loadingExamResults=!1;return}let t;try{t=JSON.parse(e)}catch{this.loadingExamResults=!1;return}let n=t.id;if(!n){this.loadingExamResults=!1;return}this.http.get("./server/api/ogrenci_tum_sinav_sonuclari.php").subscribe({next:r=>{if(this.loadingExamResults=!1,r.success&&r.data){let s=(r.data.sinav_sonuclari||[]).filter(a=>a.ogrenci_id==n);this.sinavSonuclari=s.slice(-5),setTimeout(()=>{this.createComparisonChart()},100)}},error:r=>{this.loadingExamResults=!1}})}createComparisonChart(){let e=document.getElementById("comparisonChart");if(!e||this.sinavSonuclari.length===0)return;this.comparisonChart&&this.comparisonChart.destroy();let t=this.sinavSonuclari.map(o=>{let s=o.sinav_adi;return s.length>15?s.substring(0,12)+"...":s}),n=this.sinavSonuclari.map(o=>this.getSuccessPercentage(o)),r=this.sinavSonuclari.map(o=>this.getSinavTuruColor(o.sinav_turu));this.comparisonChart=new Lc(e,{type:"bar",data:{labels:t,datasets:[{label:"Ba\u015Far\u0131 Oran\u0131 (%)",data:n,backgroundColor:r.map(o=>o+"80"),borderColor:r,borderWidth:2,borderRadius:8,borderSkipped:!1}]},options:{responsive:!0,maintainAspectRatio:!1,aspectRatio:2,plugins:{legend:{display:!1},tooltip:{titleFont:{size:14,weight:"bold"},bodyFont:{size:13},backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",borderColor:"#ddd",borderWidth:1,callbacks:{title:o=>{let s=o[0].dataIndex;return this.sinavSonuclari[s].sinav_adi},label:o=>{let s=o.dataIndex,a=this.sinavSonuclari[s];return[`Ba\u015Far\u0131 Oran\u0131: ${o.parsed.y}%`,`Do\u011Fru: ${a.dogru_sayisi}`,`Yanl\u0131\u015F: ${a.yanlis_sayisi}`,`Bo\u015F: ${a.bos_sayisi}`,`Tarih: ${this.formatDate(a.gonderim_tarihi)}`]}}}},scales:{y:{beginAtZero:!0,max:100,ticks:{callback:function(o){return o+"%"},font:{size:12,weight:"bold"}},title:{display:!0,text:"Ba\u015Far\u0131 Oran\u0131 (%)",font:{size:14,weight:"bold"}}},x:{title:{display:!0,text:"Son S\u0131navlar",font:{size:14,weight:"bold"}},ticks:{maxRotation:45,minRotation:0,font:{size:12,weight:"bold"}}}},interaction:{intersect:!1,mode:"index"},animation:{duration:1e3,easing:"easeInOutQuart"}}})}getSinavTuruColor(e){return this.sinavTurleri[e]?.color||"#6c757d"}getSuccessPercentage(e){let t=e.dogru_sayisi+e.yanlis_sayisi+e.bos_sayisi;return t===0?0:Math.round(e.dogru_sayisi/t*100)}formatDate(e){return new Date(e).toLocaleDateString("tr-TR")}getSinavTuruLabel(e){return this.sinavTurleri[e]?.label||e}calculateNet(e){return Math.max(0,Math.round(e.dogru_sayisi-e.yanlis_sayisi/4))}loadSonIslenenKonular(){this.loadingTopics=!0;let e=localStorage.getItem("user")||sessionStorage.getItem("user");if(!e){this.loadingTopics=!1;return}let t;try{t=JSON.parse(e)}catch{this.loadingTopics=!1;return}let n=t.grup||t.grubu;if(!n){this.loadingTopics=!1;return}this.http.get(`./server/api/ogrenci_islenen_konular.php?grup=${n}`).subscribe({next:r=>{this.loadingTopics=!1,r.success&&r.islenen_konular&&(this.sonIslenenKonular=r.islenen_konular.sort((o,s)=>new Date(s.isleme_tarihi).getTime()-new Date(o.isleme_tarihi).getTime()).slice(0,5))},error:r=>{this.loadingTopics=!1}})}loadKonuAnalizi(){this.loadingKonuAnalizi=!0;let e=localStorage.getItem("user")||sessionStorage.getItem("user");if(!e){this.loadingKonuAnalizi=!1;return}let t;try{t=JSON.parse(e)}catch{this.loadingKonuAnalizi=!1;return}let n=t.id;if(!n){this.loadingKonuAnalizi=!1;return}this.http.get(`./server/api/ogrenci_konu_analizi.php?ogrenci_id=${n}`).subscribe({next:r=>{this.loadingKonuAnalizi=!1,r.success&&r.data&&(this.konuAnalizi=r.data.konu_istatistikleri||[])},error:r=>{this.loadingKonuAnalizi=!1}})}getKonuSuccessColor(e){return e>=80?"#28a745":e>=60?"#ffc107":e>=40?"#fd7e14":"#dc3545"}getKonuSuccessText(e){return e>=80?"M\xFCkemmel":e>=60?"\u0130yi":e>=40?"Orta":"Geli\u015Ftirilmeli"}static \u0275fac=function(t){return new(t||i)(ke(gt))};static \u0275cmp=Ke({type:i,selectors:[["app-ogrenci-ana-sayfasi"]],standalone:!1,decls:68,vars:9,consts:[[1,"container-full"],[1,"row"],[1,"col-12","d-block","d-md-none","mt-5"],[1,"card-ana","bg-blue"],[1,"card-ana-header"],[1,"bi","bi-lightning-charge-fill"],[1,"bi","bi-bookmark-plus-fill"],[1,"card-ana-body"],[1,"modern-quick-actions"],["href","ogrenci-sayfasi/ogrenci-islene-konular-sayfasi",1,"modern-action-btn","gradient-blue"],[1,"action-icon"],[1,"bi","bi-book"],["href","ogrenci-sayfasi/ogrenci-islene-konularin-pdf-sayfasi",1,"modern-action-btn","gradient-red"],[1,"bi","bi-file-pdf"],["routerLink","ogrenci-qr-kod-sayfasi",1,"modern-action-btn","gradient-green"],[1,"bi","bi-qr-code"],["routerLink","ogrenci-sinav-islemleri-sayfasi",1,"modern-action-btn","gradient-purple"],[1,"bi","bi-clipboard-check"],[1,"col-12"],[1,"card-ana","bg-green"],[1,"bi","bi-bar-chart-fill"],["class","loading-section text-center py-3",4,"ngIf"],["class","chart-container",4,"ngIf"],["class","sinav-detay-bilgileri mt-4",4,"ngIf"],[1,"col-12","col-lg-4","mt-1"],[1,"card-ana","bg-orange"],[1,"bi","bi-book","me-2"],["class","topics-list",4,"ngIf"],["class","empty-state text-center py-3",4,"ngIf"],[1,"col-12","col-lg-8","mt-1"],["class","konu-analizi-container",4,"ngIf"],["class","empty-state text-center py-4",4,"ngIf"],[1,"loading-section","text-center","py-3"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-2"],[1,"chart-container"],["id","comparisonChart","width","100%","height","600px"],[1,"sinav-detay-bilgileri","mt-4"],[1,"table-responsive","d-none","d-lg-block"],[1,"table","table-striped","table-hover"],[3,"border-left",4,"ngFor","ngForOf"],[1,"d-lg-none"],["class","sinav-card mb-3",3,"border-left",4,"ngFor","ngForOf"],[1,"badge","me-2"],[1,"badge","bg-success"],[1,"badge","bg-danger"],[1,"badge","bg-warning"],[1,"badge","bg-info"],[1,"progress",2,"height","20px"],[1,"progress-bar"],[1,"bi","bi-people"],[1,"ms-1"],[1,"bi","bi-trophy"],[1,"text-muted"],[1,"sinav-card","mb-3"],[1,"sinav-card-header"],[1,"mb-0","fw-bold"],[1,"sinav-card-body"],[1,"row","mb-2"],[1,"col-4","text-center"],[1,"badge","bg-success","d-block","mb-1"],[1,"badge","bg-danger","d-block","mb-1"],[1,"badge","bg-warning","d-block","mb-1"],[1,"col-6","text-center"],[1,"badge","bg-info","d-block","mb-1"],[1,"col-6"],[1,"progress","mb-1",2,"height","20px"],[1,"bi","bi-people","text-primary"],[1,"bi","bi-trophy","text-warning"],[1,"topics-list"],["class","topic-item",4,"ngFor","ngForOf"],[1,"topic-item"],[1,"topic-icon"],[1,"bi","bi-bookmark-check-fill"],[1,"topic-content"],[1,"topic-title"],[1,"topic-meta"],[1,"bi","bi-calendar-check"],["class","badge",4,"ngIf"],[1,"badge"],[1,"empty-state","text-center","py-3"],[1,"bi","bi-journal-x","text-muted",2,"font-size","2rem"],[1,"text-muted","mt-2"],[1,"konu-analizi-container"],["class","konu-item mb-4",4,"ngFor","ngForOf"],[1,"konu-item","mb-4"],[1,"konu-header","d-flex","justify-content-between","align-items-center","mb-2"],[1,"konu-adi","mb-0","fw-bold"],[1,"progress","mb-2",2,"height","25px"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar"],[1,"fw-bold"],[1,"konu-detaylar"],[1,"row","text-center"],[1,"col-3"],[1,"empty-state","text-center","py-4"],[1,"bi","bi-graph-up","text-muted",2,"font-size","3rem"],[1,"text-muted","mt-3"]],template:function(t,n){t&1&&(u(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4"),k(6,"i",5),m(7,"H\u0131zl\u0131 Eri\u015Fim"),f(),u(8,"button"),k(9,"i",6),f()(),u(10,"div",7)(11,"div",8)(12,"a",9)(13,"div",10),k(14,"i",11),f(),u(15,"span"),m(16,"\u0130\u015Flenen Konular"),f()(),u(17,"a",12)(18,"div",10),k(19,"i",13),f(),u(20,"span"),m(21,"Konu PDF'leri"),f()(),u(22,"a",14)(23,"div",10),k(24,"i",15),f(),u(25,"span"),m(26,"QR Kod"),f()(),u(27,"a",16)(28,"div",10),k(29,"i",17),f(),u(30,"span"),m(31,"S\u0131navlar"),f()()()()()(),u(32,"div",18)(33,"div",19)(34,"div",4)(35,"h4"),k(36,"i",20),m(37," S\u0131nav Performans\u0131m"),f(),u(38,"button"),k(39,"i",6),f()(),u(40,"div",7),ee(41,Vge,6,0,"div",21)(42,Uge,2,0,"div",22)(43,$ge,29,2,"div",23),f()()(),u(44,"div",24)(45,"div",25)(46,"div",4)(47,"h4"),k(48,"i",26),m(49,"Son \u0130\u015Flenen Konular"),f(),u(50,"button"),k(51,"i",6),f()(),u(52,"div",7),ee(53,Wge,6,0,"div",21)(54,Yge,2,1,"div",27)(55,Xge,4,0,"div",28),f()()(),u(56,"div",29)(57,"div",3)(58,"div",4)(59,"h4"),k(60,"i",5),m(61,"Konu Analizi"),f(),u(62,"button"),k(63,"i",6),f()(),u(64,"div",7),ee(65,Qge,6,0,"div",21)(66,Zge,2,1,"div",30)(67,epe,6,0,"div",31),f()()()()()),t&2&&(x(41),S("ngIf",n.loadingExamResults),x(),S("ngIf",!n.loadingExamResults),x(),S("ngIf",n.sinavSonuclari.length>0),x(10),S("ngIf",n.loadingTopics),x(),S("ngIf",!n.loadingTopics&&n.sonIslenenKonular.length>0),x(),S("ngIf",!n.loadingTopics&&n.sonIslenenKonular.length===0),x(10),S("ngIf",n.loadingKonuAnalizi),x(),S("ngIf",!n.loadingKonuAnalizi&&n.konuAnalizi.length>0),x(),S("ngIf",!n.loadingKonuAnalizi&&n.konuAnalizi.length===0))},dependencies:[yt,lt,xi],styles:['@charset "UTF-8";.card-ana[_ngcontent-%COMP%]{border-radius:8px;box-shadow:0 2px 6px #00000014;overflow:hidden;background-color:#fff;width:100%;margin:0 auto 20px;font-family:sans-serif}.card-ana-header[_ngcontent-%COMP%]{color:#fff;padding:8px;display:flex;justify-content:space-between;align-items:center}.card-ana-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:16px;font-family:Roboto,sans-serif;font-weight:400;margin:0;padding-left:10px}.card-ana-body[_ngcontent-%COMP%]{background-color:#fff;padding:10px;color:#333}.card-ana-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#ffffff50;border:none;color:#fff;padding:4px 8px;font-size:14px;font-weight:500;border-radius:4px;cursor:pointer;transition:background-color .2s ease}.card-ana-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#ffffffe1;color:#333}.bg-blue[_ngcontent-%COMP%]{background:linear-gradient(135deg,#244bfc,#637ffd);color:#fff}.bg-orange[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f60,#fc924b);color:#fff}.bg-green[_ngcontent-%COMP%]{background:linear-gradient(135deg,#36a00d,#88fd02);color:#fff}.bg-red[_ngcontent-%COMP%]{background:linear-gradient(135deg,red,#fc4b4b);color:#fff}.bg-purple[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f700ff,#ed4bfc);color:#fff}.bg-yellow[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f7fc01,#f0fc4b);color:#fff}.modern-quick-actions[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}.modern-quick-actions[_ngcontent-%COMP%]   .modern-action-btn[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:20px 12px;border-radius:12px;text-decoration:none;color:#fff;transition:all .3s ease;position:relative;overflow:hidden}.modern-quick-actions[_ngcontent-%COMP%]   .modern-action-btn[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:#ffffff1a;opacity:0;transition:opacity .3s ease}.modern-quick-actions[_ngcontent-%COMP%]   .modern-action-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #0003;color:#fff;text-decoration:none}.modern-quick-actions[_ngcontent-%COMP%]   .modern-action-btn[_ngcontent-%COMP%]:hover:before{opacity:1}.modern-quick-actions[_ngcontent-%COMP%]   .modern-action-btn[_ngcontent-%COMP%]   .action-icon[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;display:flex;align-items:center;justify-content:center;background:#fff3;margin-bottom:8px;position:relative;z-index:1}.modern-quick-actions[_ngcontent-%COMP%]   .modern-action-btn[_ngcontent-%COMP%]   .action-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.4rem;color:#fff}.modern-quick-actions[_ngcontent-%COMP%]   .modern-action-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.85rem;font-weight:500;text-align:center;position:relative;z-index:1}.modern-quick-actions[_ngcontent-%COMP%]   .modern-action-btn.gradient-blue[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2)}.modern-quick-actions[_ngcontent-%COMP%]   .modern-action-btn.gradient-red[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f093fb,#f5576c)}.modern-quick-actions[_ngcontent-%COMP%]   .modern-action-btn.gradient-green[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4facfe,#00f2fe)}.modern-quick-actions[_ngcontent-%COMP%]   .modern-action-btn.gradient-purple[_ngcontent-%COMP%]{background:linear-gradient(135deg,#a8edea,#fed6e3);color:#333!important}.modern-quick-actions[_ngcontent-%COMP%]   .modern-action-btn.gradient-purple[_ngcontent-%COMP%]   .action-icon[_ngcontent-%COMP%]{background:#0000001a}.modern-quick-actions[_ngcontent-%COMP%]   .modern-action-btn.gradient-purple[_ngcontent-%COMP%]   .action-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .modern-quick-actions[_ngcontent-%COMP%]   .modern-action-btn.gradient-purple[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#333}.topic-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:start;padding:10px;border-bottom:1px solid #e0e0e0;font-size:14px;color:#333;box-shadow:0 2px 8px #00000026;margin-top:8px;border-radius:8px}.topic-icon[_ngcontent-%COMP%]{width:40px;height:40px;display:flex;align-items:center;justify-content:center;border-radius:50%;background-color:#f0f0f0;color:#f60;font-size:20px}.topic-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;padding-left:20px}.topic-content[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:500;color:#333}.chart-container[_ngcontent-%COMP%]{position:relative}.chart-container[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{max-width:100%;height:300px!important}.konu-analizi-container[_ngcontent-%COMP%]{max-height:400px;overflow-y:auto;padding:5px}.konu-analizi-container[_ngcontent-%COMP%]   .konu-item[_ngcontent-%COMP%]{background:#fff;box-shadow:#3c40434d 0 1px 2px,#3c404326 0 2px 6px 2px;margin-right:10px;padding:15px;border-radius:8px;border:1px solid rgba(255,255,255,.26)}.konu-analizi-container[_ngcontent-%COMP%]   .konu-item[_ngcontent-%COMP%]   .konu-adi[_ngcontent-%COMP%]{color:#4b4b4b;font-size:14px}.konu-analizi-container[_ngcontent-%COMP%]   .konu-item[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{background-color:#fff3;border-radius:12px;overflow:hidden}.konu-analizi-container[_ngcontent-%COMP%]   .konu-item[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:700;color:#fff;text-shadow:1px 1px 2px rgba(0,0,0,.3);transition:width .6s ease}.konu-analizi-container[_ngcontent-%COMP%]   .konu-item[_ngcontent-%COMP%]   .konu-detaylar[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{font-size:11px;min-width:25px}.konu-analizi-container[_ngcontent-%COMP%]   .konu-item[_ngcontent-%COMP%]   .konu-detaylar[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:10px}.konu-analizi-container[_ngcontent-%COMP%]   .konu-item[_ngcontent-%COMP%]   .konu-detaylar[_ngcontent-%COMP%]   .sinavlar-listesi[_ngcontent-%COMP%]{background:#ffffff1a;padding:8px;border-radius:6px}.konu-analizi-container[_ngcontent-%COMP%]   .konu-item[_ngcontent-%COMP%]   .konu-detaylar[_ngcontent-%COMP%]   .sinavlar-listesi[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#fffc;font-size:11px}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{opacity:.5}.empty-state[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fffc}@media (max-width: 768px){.konu-analizi-container[_ngcontent-%COMP%]   .konu-item[_ngcontent-%COMP%]{padding:12px}.konu-analizi-container[_ngcontent-%COMP%]   .konu-item[_ngcontent-%COMP%]   .konu-adi[_ngcontent-%COMP%]{font-size:13px}.konu-analizi-container[_ngcontent-%COMP%]   .konu-item[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{height:20px!important}.konu-analizi-container[_ngcontent-%COMP%]   .konu-item[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{font-size:11px}}.sinav-detay-bilgileri[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#333;margin-bottom:1rem;font-weight:600}.sinav-detay-bilgileri[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{border-radius:10px;overflow:hidden;box-shadow:0 2px 10px #0000001a}.sinav-detay-bilgileri[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:400;text-align:center;vertical-align:middle;border:none;color:#5e5e5e;font-weight:500}.sinav-detay-bilgileri[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center;vertical-align:middle;padding:12px 8px;border-color:#e9ecef}.sinav-detay-bilgileri[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .sinav-adi[_ngcontent-%COMP%]{text-align:left}.sinav-detay-bilgileri[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .sinav-adi[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{font-size:.7rem;color:#fff!important}.sinav-detay-bilgileri[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{margin:0}.sinav-detay-bilgileri[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{color:#fff;font-weight:600;font-size:.8rem}.sinav-detay-bilgileri[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{font-size:.8rem;min-width:30px}.sinav-detay-bilgileri[_ngcontent-%COMP%]   .sinav-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000001a;overflow:hidden}.sinav-detay-bilgileri[_ngcontent-%COMP%]   .sinav-card[_ngcontent-%COMP%]   .sinav-card-header[_ngcontent-%COMP%]{background:#f8f9fa;padding:12px 16px;border-bottom:1px solid #e9ecef;display:flex;justify-content:center;align-items:center;flex-direction:column}.sinav-detay-bilgileri[_ngcontent-%COMP%]   .sinav-card[_ngcontent-%COMP%]   .sinav-card-header[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{font-size:.7rem;color:#fff!important}.sinav-detay-bilgileri[_ngcontent-%COMP%]   .sinav-card[_ngcontent-%COMP%]   .sinav-card-header[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin:4px 0;color:#333;font-size:16px}.sinav-detay-bilgileri[_ngcontent-%COMP%]   .sinav-card[_ngcontent-%COMP%]   .sinav-card-header[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:block;margin-top:4px}.sinav-detay-bilgileri[_ngcontent-%COMP%]   .sinav-card[_ngcontent-%COMP%]   .sinav-card-body[_ngcontent-%COMP%]{padding:16px}.sinav-detay-bilgileri[_ngcontent-%COMP%]   .sinav-card[_ngcontent-%COMP%]   .sinav-card-body[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{font-size:.8rem;min-width:40px;padding:6px 8px}.sinav-detay-bilgileri[_ngcontent-%COMP%]   .sinav-card[_ngcontent-%COMP%]   .sinav-card-body[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{height:20px}.sinav-detay-bilgileri[_ngcontent-%COMP%]   .sinav-card[_ngcontent-%COMP%]   .sinav-card-body[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{color:#fff;font-weight:600;font-size:.8rem;display:flex;align-items:center;justify-content:center}.sinav-detay-bilgileri[_ngcontent-%COMP%]   .sinav-card[_ngcontent-%COMP%]   .sinav-card-body[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.75rem}.sinav-detay-bilgileri[_ngcontent-%COMP%]   .sinav-card[_ngcontent-%COMP%]   .sinav-card-body[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem}']})};var A8=yh(fD());var SU=yh(aM());var tpe=["entryQRCanvas"],npe=["exitQRCanvas"];function ipe(i,e){if(i&1){let t=Ae();u(0,"div",16),k(1,"i",17),m(2),u(3,"button",18),U("click",function(){K(t);let r=F();return Y(r.regenerateQRCodes())}),m(4," Tekrar Dene "),f()()}if(i&2){let t=F();x(2),he(" ",t.loadError," ")}}function rpe(i,e){if(i&1&&(u(0,"div",19)(1,"div",20)(2,"h3"),m(3,"Giri\u015F QR Kodu"),f(),k(4,"canvas",null,0),u(6,"p",21),m(7),f()(),u(8,"div",22)(9,"h3"),m(10,"\xC7\u0131k\u0131\u015F QR Kodu"),f(),k(11,"canvas",null,1),u(13,"p",21),m(14),f()()()),i&2){let t=F();x(7),W(t.entryQRData),x(7),W(t.exitQRData)}}function ope(i,e){if(i&1){let t=Ae();u(0,"button",23),U("click",function(){K(t);let r=F();return Y(r.printQRCodes())}),k(1,"i",24),m(2," Yazd\u0131r "),f()}}function spe(i,e){if(i&1){let t=Ae();u(0,"button",25),U("click",function(){K(t);let r=F();return Y(r.downloadAsPDF())}),k(1,"i",26),m(2," PDF \u0130ndir "),f()}}var S5=class i{entryQRCanvas;exitQRCanvas;studentData={id:0,name:"",email:"",ogretmeni:"",sinifi:"",ders_adi:""};currentDate="";entryQRData="";exitQRData="";isLibraryLoaded=!1;loadError="";constructor(){}loadStudentData(){let e=localStorage.getItem("user")||sessionStorage.getItem("user");if(e)try{let t=JSON.parse(e);t.rutbe==="ogrenci"?(this.studentData={id:t.id||0,name:t.adi_soyadi||"",email:t.email||"",ogretmeni:t.ogretmeni||"",sinifi:t.sinifi||"",ders_adi:t.ders_adi||"Kimya"},console.log("\xD6\u011Frenci bilgileri y\xFCklendi:",this.studentData)):console.warn("Giri\u015F yapan kullan\u0131c\u0131 \xF6\u011Frenci de\u011Fil")}catch(t){console.error("Kullan\u0131c\u0131 bilgileri parse edilemedi:",t)}else console.warn("Kullan\u0131c\u0131 bilgileri bulunamad\u0131")}ngOnInit(){this.loadStudentData(),this.updateDateTime(),setInterval(()=>this.updateDateTime(),1e3)}ngAfterViewInit(){this.isLibraryLoaded=!0,this.generateQRCodes()}updateDateTime(){let e=new Date;this.currentDate=e.toLocaleDateString("tr-TR")+" "+e.toLocaleTimeString("tr-TR")}generateQRData(e){let t=Date.now();return`${this.studentData.id}_${e}_${t}`}generateQRCodes(){if(!this.isLibraryLoaded){console.error("QRCode k\xFCt\xFCphanesi hen\xFCz y\xFCklenmedi");return}try{this.entryQRData=this.generateQRData("entry"),this.exitQRData=this.generateQRData("exit"),A8.toCanvas(this.entryQRCanvas.nativeElement,this.entryQRData,{width:200,margin:2,color:{dark:"#28a745",light:"#FFFFFF"}}).then(()=>{console.log("Giri\u015F QR kodu ba\u015Far\u0131yla olu\u015Fturuldu")}).catch(e=>{console.error("Giri\u015F QR kodu olu\u015Fturulamad\u0131:",e),this.loadError="Giri\u015F QR kodu olu\u015Fturulamad\u0131"}),A8.toCanvas(this.exitQRCanvas.nativeElement,this.exitQRData,{width:200,margin:2,color:{dark:"#dc3545",light:"#FFFFFF"}}).then(()=>{console.log("\xC7\u0131k\u0131\u015F QR kodu ba\u015Far\u0131yla olu\u015Fturuldu")}).catch(e=>{console.error("\xC7\u0131k\u0131\u015F QR kodu olu\u015Fturulamad\u0131:",e),this.loadError="\xC7\u0131k\u0131\u015F QR kodu olu\u015Fturulamad\u0131"})}catch(e){console.error("QR kod olu\u015Fturma hatas\u0131:",e),this.loadError="QR kodlar\u0131 olu\u015Fturulamad\u0131: "+e}}printQRCodes(){window.print()}regenerateQRCodes(){this.loadError="",this.generateQRCodes()}downloadAsPDF(){return Ge(this,null,function*(){try{let e=document.querySelector(".qr-generator-container");if(!e){console.error("QR Generator container bulunamad\u0131");return}let t=yield(0,SU.default)(e,{scale:2,useCORS:!0,allowTaint:!0}),n=new _t("p","mm","a4"),r=t.toDataURL("image/png"),o=210,s=295,a=t.height*o/t.width,l=a,c=0;for(n.addImage(r,"PNG",0,c,o,a),l-=s;l>=0;)c=l-a,n.addPage(),n.addImage(r,"PNG",0,c,o,a),l-=s;let d=`QR_Kodlari_${this.studentData.name.replace(/\s+/g,"_")}_${new Date().toISOString().split("T")[0]}.pdf`;n.save(d)}catch(e){console.error("PDF olu\u015Fturma hatas\u0131:",e),this.loadError="PDF olu\u015Fturulamad\u0131: "+e}})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=Ke({type:i,selectors:[["app-ogrenci-qr-kod-sayfasi"]],viewQuery:function(t,n){if(t&1&&(Gi(tpe,5),Gi(npe,5)),t&2){let r;Di(r=Fi())&&(n.entryQRCanvas=r.first),Di(r=Fi())&&(n.exitQRCanvas=r.first)}},standalone:!1,decls:31,vars:8,consts:[["entryQRCanvas",""],["exitQRCanvas",""],[1,"qr-generator-container"],[1,"header"],[1,"student-stats"],[1,"stat-item"],[1,"bi","bi-person-circle"],[1,"bi","bi-people-fill"],[1,"bi","bi-clock"],["class","alert alert-danger",4,"ngIf"],["class","qr-codes-section",4,"ngIf"],[1,"controls"],[1,"btn","btn-primary",3,"click"],[1,"bi","bi-arrow-clockwise"],["class","btn btn-success",3,"click",4,"ngIf"],["class","btn btn-danger",3,"click",4,"ngIf"],[1,"alert","alert-danger"],[1,"bi","bi-exclamation-triangle"],[1,"btn","btn-sm","btn-outline-danger","ms-2",3,"click"],[1,"qr-codes-section"],[1,"qr-code-card","entry-card"],[1,"qr-data"],[1,"qr-code-card","exit-card"],[1,"btn","btn-success",3,"click"],[1,"bi","bi-printer"],[1,"btn","btn-danger",3,"click"],[1,"bi","bi-file-earmark-pdf"]],template:function(t,n){t&1&&(u(0,"div",2)(1,"div",3)(2,"h2"),m(3,"QR Kod Generator"),f(),u(4,"div",4)(5,"div",5),k(6,"i",6),u(7,"span")(8,"strong"),m(9,"\xD6\u011Frenci:"),f(),m(10),f()(),u(11,"div",5),k(12,"i",7),u(13,"span")(14,"strong"),m(15,"\xD6\u011Frenci ID:"),f(),m(16),f()(),u(17,"div",5),k(18,"i",8),u(19,"span")(20,"strong"),m(21,"Olu\u015Fturulma:"),f(),m(22),f()()()(),ee(23,ipe,5,1,"div",9)(24,rpe,15,2,"div",10),u(25,"div",11)(26,"button",12),U("click",function(){return n.regenerateQRCodes()}),k(27,"i",13),m(28," Yenile "),f(),ee(29,ope,3,0,"button",14)(30,spe,3,0,"button",15),f()()),t&2&&(x(10),hn(" ",n.studentData.name," (",n.studentData.email,")"),x(6),he(" ",n.studentData.id,""),x(6),he(" ",n.currentDate,""),x(),S("ngIf",n.loadError),x(),S("ngIf",!n.loadError),x(5),S("ngIf",!n.loadError),x(),S("ngIf",!n.loadError))},dependencies:[lt],styles:[".qr-generator-container[_ngcontent-%COMP%]{width:100%;height:auto;margin:0 auto;padding:20px;font-family:Arial,sans-serif}.header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;margin-bottom:10px}.header[_ngcontent-%COMP%]   .student-info[_ngcontent-%COMP%]{font-size:18px;color:#666;margin-bottom:10px}.header[_ngcontent-%COMP%]   .current-time[_ngcontent-%COMP%]{font-size:14px;color:#888}.alert[_ngcontent-%COMP%]{padding:15px;border-radius:8px;margin-bottom:20px;display:flex;align-items:center}.alert.alert-danger[_ngcontent-%COMP%]{background-color:#f8d7da;border:1px solid #f5c6cb;color:#721c24}.alert[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:10px}.qr-codes-section[_ngcontent-%COMP%]{display:flex;gap:30px;justify-content:center;margin-bottom:30px;flex-wrap:wrap}.qr-code-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;box-shadow:0 4px 6px #0000001a;text-align:center;min-width:280px}.qr-code-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:15px;font-size:18px}.qr-code-card[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{display:block;margin:0 auto 15px;border:2px solid #eee;border-radius:8px}.qr-code-card[_ngcontent-%COMP%]   .qr-data[_ngcontent-%COMP%]{font-family:monospace;font-size:12px;color:#666;word-break:break-all;background:#f8f9fa;padding:8px;border-radius:4px}.qr-code-card.entry-card[_ngcontent-%COMP%]{border-top:4px solid #28a745}.qr-code-card.entry-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#28a745}.qr-code-card.exit-card[_ngcontent-%COMP%]{border-top:4px solid #dc3545}.qr-code-card.exit-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#dc3545}.controls[_ngcontent-%COMP%]{text-align:center;gap:15px;display:flex;justify-content:center;flex-wrap:wrap}.controls[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:6px;cursor:pointer;font-size:14px;display:inline-flex;align-items:center;text-decoration:none}.controls[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px}.controls[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.controls[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3}.controls[_ngcontent-%COMP%]   .btn.btn-success[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.controls[_ngcontent-%COMP%]   .btn.btn-success[_ngcontent-%COMP%]:hover{background-color:#1e7e34}.controls[_ngcontent-%COMP%]   .btn.btn-outline-danger[_ngcontent-%COMP%]{background-color:transparent;color:#dc3545;border:1px solid #dc3545}.controls[_ngcontent-%COMP%]   .btn.btn-outline-danger[_ngcontent-%COMP%]:hover{background-color:#dc3545;color:#fff}@media (max-width: 768px){.qr-codes-section[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.qr-code-card[_ngcontent-%COMP%]{min-width:250px}}@media print{.controls[_ngcontent-%COMP%]{display:none}.header[_ngcontent-%COMP%]   .current-time[_ngcontent-%COMP%]{display:block}.qr-generator-container[_ngcontent-%COMP%]{margin:0;padding:10px}}.qr-generator-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:20px}.header[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.student-stats[_ngcontent-%COMP%]{background:#f8f9fa;padding:20px;border-radius:10px;margin:20px 0;border-left:4px solid #4f46e5}.stat-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin:8px 0;font-size:1.1em;color:#666}.stat-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:10px;color:#4f46e5;font-size:1.2em}"]})};var k5=class i{isSidebarOpen=!0;studentName="";studentAvatar="";studentClass="";studentTeacher="";totalAttendance=0;thisWeekAttendance=0;totalLessons=0;completedLessons=0;totalExams=0;passedExams=0;currentGrade="";nextLesson="";constructor(){}ngOnInit(){this.loadStudentInfo(),this.loadStudentStats(),this.checkScreenSize(),window.addEventListener("resize",()=>{this.checkScreenSize()})}loadStudentInfo(){let e=localStorage.getItem("user")||sessionStorage.getItem("user");if(e)try{let t=JSON.parse(e);this.studentName=t.adi_soyadi||"\xD6\u011Frenci",this.studentClass=t.sinifi||"S\u0131n\u0131f Bilgisi Yok",this.studentTeacher=t.ogretmeni||"\xD6\u011Fretmen Bilgisi Yok",t.avatar&&t.avatar.trim()!==""?this.studentAvatar=t.avatar:this.studentAvatar=`https://ui-avatars.com/api/?name=${encodeURIComponent(this.studentName)}&background=28a745&color=fff&size=40&font-size=0.6&rounded=true`,console.log("\xD6\u011Frenci bilgileri y\xFCklendi:",{id:t.id,name:this.studentName,class:this.studentClass,teacher:this.studentTeacher,avatar:this.studentAvatar,userRole:t.rutbe})}catch(t){console.error("Kullan\u0131c\u0131 bilgileri ayr\u0131\u015Ft\u0131r\u0131l\u0131rken hata:",t),this.setDefaultStudentInfo()}else console.warn("Kullan\u0131c\u0131 giri\u015F bilgisi bulunamad\u0131"),this.setDefaultStudentInfo()}setDefaultStudentInfo(){this.studentName="\xD6\u011Frenci",this.studentClass="S\u0131n\u0131f Bilgisi Yok",this.studentTeacher="\xD6\u011Fretmen Bilgisi Yok",this.studentAvatar="https://ui-avatars.com/api/?name=\xD6\u011Frenci&background=6c757d&color=fff&size=40&font-size=0.6&rounded=true"}loadStudentStats(){this.totalAttendance=85,this.thisWeekAttendance=4,this.totalLessons=24,this.completedLessons=18,this.totalExams=8,this.passedExams=6,this.currentGrade="B+",this.nextLesson="Kimya Ba\u011Flar\u0131"}toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen,localStorage.setItem("sidebarOpen",JSON.stringify(this.isSidebarOpen))}checkScreenSize(){if(window.innerWidth<768)this.isSidebarOpen=!1;else{let t=localStorage.getItem("sidebarOpen");this.isSidebarOpen=t?JSON.parse(t):!0}}getAttendancePercentage(){return Math.round(this.thisWeekAttendance/5*100)}getLessonProgress(){return Math.round(this.completedLessons/this.totalLessons*100)}getExamSuccessRate(){return Math.round(this.passedExams/this.totalExams*100)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=Ke({type:i,selectors:[["app-ogrenci-navbar-sayfasi"]],standalone:!1,decls:23,vars:2,consts:[[1,"navbar"],[1,"logo"],["routerLink","./"],[1,"profil-button","ms-auto","dropdown"],["alt","Avatar",1,"user-avatar",3,"src"],[1,"ogrenci-bilgisi"],["href","#","id","userDropdown","data-bs-toggle","dropdown","aria-expanded","false"],[1,"user-name"],[1,"user-role"],["aria-labelledby","userDropdown",1,"dropdown-menu"],["href","#",1,"dropdown-item","text-danger"],[1,"cikis"],[1,"material-icons"],[1,"navbar-menu"]],template:function(t,n){t&1&&(u(0,"div",0)(1,"div",1)(2,"a",2),m(3,"Kimya"),u(4,"span"),m(5,"\xD6\u011Freniyorum"),f()()(),u(6,"div",3),k(7,"img",4),u(8,"div",5)(9,"a",6)(10,"div",7),m(11),f(),u(12,"div",8),m(13,"\xD6\u011Frenci"),f()(),u(14,"ul",9)(15,"li")(16,"a",10)(17,"div",11)(18,"p"),m(19,"G\xFCvenli \xC7\u0131k\u0131\u015F"),f(),u(20,"i",12),m(21,"logout"),f()()()()()()()(),k(22,"div",13)),t&2&&(x(7),S("src",n.studentAvatar,vt),x(4),W(n.studentName))},dependencies:[xi],styles:["a[_ngcontent-%COMP%]{text-decoration:none;color:inherit}.navbar-menu[_ngcontent-%COMP%]{width:100%;height:30px}.navbar[_ngcontent-%COMP%]{width:100%;height:45px;background-color:#fff;z-index:99999;box-shadow:0 0 5px #00000080!important;display:flex;flex-direction:row;justify-content:space-between;align-items:center;position:fixed}.navbar[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:150px;font-style:italic;font-weight:700;font-size:20px;font-family:Roboto,serif!important;padding-left:10px}.navbar[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#f60}.navbar[_ngcontent-%COMP%]   .profil-button[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:end;padding-right:10px}.navbar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:10px}.dropdown-menu[_ngcontent-%COMP%]{width:100%;margin-top:5px}.user-role[_ngcontent-%COMP%]{text-align:center}.menu_link[_ngcontent-%COMP%]{padding-bottom:10px}.user-name-menu[_ngcontent-%COMP%]{text-align:center;font-weight:500;font-size:16px;padding-top:10px;width:100%}.user-role-menu[_ngcontent-%COMP%]{width:100%;text-align:center;font-weight:500;font-size:14px}.menu-flex[_ngcontent-%COMP%]{width:100%;height:30px;display:flex;justify-content:center;align-items:center}.menu-flex[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:20px;padding:5px}.menu-flex[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-top:20px;padding-left:15px}.dropdown-item[_ngcontent-%COMP%]{padding:0!important}.dropdown-item[_ngcontent-%COMP%]   .cikis[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-around;align-items:center;flex-direction:row}.dropdown-item[_ngcontent-%COMP%]   .cikis[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-top:1px}.dropdown-item[_ngcontent-%COMP%]   .cikis[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-top:15px;font-weight:700;font-size:14px;padding-left:8px}"]})};function lpe(i,e){i&1&&(u(0,"div",7),m(1,"Kimya"),u(2,"span"),m(3,"\xD6\u011Freniyorum"),f()())}function cpe(i,e){if(i&1&&(u(0,"span",14),m(1),f()),i&2){let t=F(2).$implicit;x(),he(" ",t.badgeCount&&t.badgeCount>99?"99+":t.badgeCount," ")}}function dpe(i,e){if(i&1&&(u(0,"p")(1,"span",12),m(2),f(),ee(3,cpe,2,1,"span",13),f()),i&2){let t=F().$implicit;x(2),W(t.label),x(),S("ngIf",t.label==="Soru \xC7\xF6z\xFCm\xFC"&&(t.badgeCount==null?null:t.badgeCount.toString()))}}function upe(i,e){if(i&1&&(u(0,"li",8)(1,"a",9)(2,"div",10),k(3,"i"),ee(4,dpe,4,2,"p",11),f()()()),i&2){let t=e.$implicit,n=F();x(),Vp("href",t.link,vt),x(2),Uv("bi ",t.icon,""),x(),S("ngIf",!n.isClosed)}}var A5=class i{constructor(e){this.http=e}unreadMessageCount=0;refreshInterval;studentId=null;isClosed=!0;menuItems=[{icon:"bi-house",label:"AnaSayfa",link:"ogrenci-sayfasi"},{icon:"bi-filetype-pdf",label:"\u0130\u015Flenen Konular",link:"ogrenci-sayfasi/ogrenci-islene-konularin-pdf-sayfasi"},{icon:"bi-diagram-3",label:"Yol Haritas\u0131",link:"ogrenci-sayfasi/ogrenci-islene-konular-sayfasi"},{icon:"bi-camera-reels",label:"Konu Anlat\u0131m\u0131 Video",link:"ogrenci-sayfasi"},{icon:"bi-pencil-square",label:"S\u0131navlar",link:"ogrenci-sayfasi/ogrenci-sinav-islemleri-sayfasi"},{icon:"bi-archive",label:"Testler",link:"ogrenci-sayfasi/sinav-sonuclari"},{icon:"bi-graph-up-arrow",label:"Konu Analizi",link:"ogrenci-sayfasi/ogrenci-konu-analiz-sayfasi"},{icon:"bi-pencil",label:"Soru \xC7\xF6z\xFCm\xFC",link:"ogrenci-sayfasi/ogrenci-soru-cozumu-sayfasi",badgeCount:this.unreadMessageCount},{icon:"bi-credit-card-2-back",label:"\xDCcretler",link:"ogrenci-sayfasi"},{icon:"bi-qr-code-scan",label:"QR Kod",link:"ogrenci-sayfasi/ogrenci-qr-kod-sayfasi"}];ngOnInit(){this.loadStudentInfo(),this.loadUnreadMessageCount(),this.refreshInterval=setInterval(()=>{this.loadUnreadMessageCount()},3e4)}ngOnDestroy(){this.refreshInterval&&clearInterval(this.refreshInterval)}loadUnreadMessageCount(){if(!this.studentId)return;let e={Authorization:`Bearer ${this.getTokenFromStorage()}`};this.http.get(`./server/api/soru_mesajlari.php?ogrenci_id=${this.studentId}`,{headers:e}).toPromise().then(t=>{if(t&&t.success&&t.data){let n=t.data.filter(o=>o.gonderen_tip==="ogretmen"&&!o.okundu);this.unreadMessageCount=n.length;let r=this.menuItems.find(o=>o.label==="Soru \xC7\xF6z\xFCm\xFC");r&&(r.badgeCount=this.unreadMessageCount)}else{let n=this.menuItems.find(r=>r.label==="Soru \xC7\xF6z\xFCm\xFC");n&&(n.badgeCount=0)}}).catch(t=>{console.error("Mesaj say\u0131s\u0131 y\xFCklenirken hata:",t);let n=this.menuItems.find(r=>r.label==="Soru \xC7\xF6z\xFCm\xFC");n&&(n.badgeCount=0)})}loadStudentInfo(){let e=localStorage.getItem("user")||sessionStorage.getItem("user");if(e)try{let t=JSON.parse(e);this.studentId=t.id}catch(t){console.error("\xD6\u011Frenci bilgileri y\xFCklenirken hata:",t)}}getTokenFromStorage(){let e=localStorage.getItem("token");if(!e){let t=localStorage.getItem("user")||sessionStorage.getItem("user");if(t)try{e=JSON.parse(t).token}catch(n){console.error("Error parsing user data:",n)}}return e||""}toggleSidebar(){this.isClosed=!this.isClosed}static \u0275fac=function(t){return new(t||i)(ke(gt))};static \u0275cmp=Ke({type:i,selectors:[["app-ogrenci-sidebar-sayfasi"]],standalone:!1,decls:8,vars:7,consts:[[1,"toggle-button",3,"click"],[1,"material-icons"],[1,"sidebar"],[1,"menu-list"],["class","logo",4,"ngIf"],[1,"menu-sidebar"],["class","li-menu",4,"ngFor","ngForOf"],[1,"logo"],[1,"li-menu"],[2,"position","relative",3,"href"],[1,"menu-flex"],[4,"ngIf"],[1,"sidebar-item-text"],["class","badge bg-warning rounded-pill ms-auto","style","position: absolute; top: -5px; right: -5px; font-size: 10px; min-width: 18px; height: 18px; display: flex; align-items: center; justify-content: center;",4,"ngIf"],[1,"badge","bg-warning","rounded-pill","ms-auto",2,"position","absolute","top","-5px","right","-5px","font-size","10px","min-width","18px","height","18px","display","flex","align-items","center","justify-content","center"]],template:function(t,n){t&1&&(u(0,"div",0),U("click",function(){return n.toggleSidebar()}),u(1,"i",1),m(2),f()(),u(3,"div",2)(4,"ul",3),ee(5,lpe,4,0,"div",4),u(6,"div",5),ee(7,upe,5,5,"li",6),f()()()),t&2&&(xe("closed",n.isClosed),x(2),W(n.isClosed?"arrow_forward":"arrow_back"),x(),xe("closed",n.isClosed),x(2),S("ngIf",!n.isClosed),x(2),S("ngForOf",n.menuItems))},dependencies:[yt,lt],styles:["a[_ngcontent-%COMP%]{text-decoration:none;color:inherit}.sidebar[_ngcontent-%COMP%]{width:220px;background-color:#fff;height:calc(100vh - 80px);color:#202020;transition:width .3s;overflow:hidden;position:fixed;top:70px;left:15px;z-index:10;border-radius:8px;box-shadow:0 0 5px #00000080}.sidebar[_ngcontent-%COMP%]   .menu-list[_ngcontent-%COMP%]{width:100%;margin-top:40px;padding-left:7px;position:relative}.sidebar[_ngcontent-%COMP%]   .menu-list[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:90%;top:-35px;left:0;text-align:center;font-size:18px;font-weight:700;font-style:italic;color:#29303c;position:absolute}.sidebar[_ngcontent-%COMP%]   .menu-list[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#f60}.sidebar[_ngcontent-%COMP%]   .menu-list[_ngcontent-%COMP%]   .menu-sidebar[_ngcontent-%COMP%]{margin-top:50px}.sidebar[_ngcontent-%COMP%]   .li-menu[_ngcontent-%COMP%]{width:100%}.sidebar[_ngcontent-%COMP%]   .menu-flex[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center}.sidebar[_ngcontent-%COMP%]   .menu-flex[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:20px;padding:5px}.sidebar[_ngcontent-%COMP%]   .menu-flex[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-top:5px;padding-left:15px}.sidebar.closed[_ngcontent-%COMP%]{width:50px}.sidebar.closed[_ngcontent-%COMP%]   .toggle-button[_ngcontent-%COMP%]{z-index:12;margin-left:35px}.sidebar.closed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:none}.sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;line-height:35px;align-items:center;cursor:pointer;transition:background .2s}.sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#29303c}.sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:12px;font-size:24px;margin-bottom:10px}.sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{color:#f60}.toggle-button[_ngcontent-%COMP%]{z-index:12;position:fixed;background-color:#fff;margin-left:215px;margin-top:45px;border-radius:50%;padding-top:5px;box-shadow:0 0 5px #00000080;transition:margin-left .3s;width:32px;height:32px;text-align:center;cursor:pointer;font-size:18px}.toggle-button.closed[_ngcontent-%COMP%]{margin-left:45px}@media (max-width: 768px){.sidebar.closed[_ngcontent-%COMP%], .sidebar.closed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:none}.toggle-button[_ngcontent-%COMP%]{z-index:12;margin-left:215px;margin-top:45px;display:block}.toggle-button.closed[_ngcontent-%COMP%]{margin-left:8px;margin-top:25px;width:40px;height:40px;border-radius:8px!important;padding:8px}.toggle-button.closed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:none}}.nav-link[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:space-between}.nav-link[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{font-size:.75rem;min-width:20px;height:20px;border-radius:50%;display:flex;align-items:center;justify-content:center;animation:_ngcontent-%COMP%_pulse 2s infinite;box-shadow:0 0 #dc3545b3}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(.95);box-shadow:0 0 #dc3545b3}70%{transform:scale(1);box-shadow:0 0 0 10px #dc354500}to{transform:scale(.95);box-shadow:0 0 #dc354500}}@media (max-width: 768px){.badge[_ngcontent-%COMP%]{font-size:.7rem;min-width:18px;height:18px}}"]})};var D5=class i{isClosed=!0;toggleSidebar(){this.isClosed=!this.isClosed}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=Ke({type:i,selectors:[["app-ogrenci-taslak-sayfasi"]],standalone:!1,decls:6,vars:0,consts:[[1,"container-full"],[1,"sidebar"],[1,"main-container"]],template:function(t,n){t&1&&(k(0,"app-ogrenci-navbar-sayfasi"),u(1,"div",0)(2,"div",1),k(3,"app-ogrenci-sidebar-sayfasi"),f(),u(4,"div",2),k(5,"router-outlet"),f()())},dependencies:[va,k5,A5],styles:['.container-full[_ngcontent-%COMP%]{width:calc(100% - 8px);height:auto;display:grid;grid-template-columns:70px 1fr;grid-template-areas:"sidebar main-container"}.sidebar[_ngcontent-%COMP%]{grid-area:sidebar}.main-container[_ngcontent-%COMP%]{grid-area:main-container;margin-top:30px;padding:15px 10px 10px}.main-container.closed[_ngcontent-%COMP%]{right:0;width:calc(100% - 210px)}@media (max-width: 768px){.container-full[_ngcontent-%COMP%]{width:100%;height:auto;display:grid;grid-template-columns:1fr;grid-template-areas:"sidebar" "main-container"}}']})};function fpe(i,e){i&1&&(u(0,"div",7),m(1,"Kimya"),u(2,"span"),m(3,"\xD6\u011Freniyorum"),f()())}function gpe(i,e){if(i&1&&(u(0,"span",14),m(1),f()),i&2){let t=F(2).$implicit;x(),he(" ",t.badgeCount>99?"99+":t.badgeCount," ")}}function ppe(i,e){if(i&1&&(u(0,"p")(1,"span",12),m(2),f(),ee(3,gpe,2,1,"span",13),f()),i&2){let t=F().$implicit;x(2),W(t.label),x(),S("ngIf",t.badgeCount||t.badgeCount===0)}}function mpe(i,e){if(i&1&&(u(0,"li",8)(1,"a",9)(2,"div",10),k(3,"i"),ee(4,ppe,4,2,"p",11),f()()()),i&2){let t=e.$implicit,n=F();x(),Vp("href",t.link,vt),x(2),Uv("bi ",t.icon,""),x(),S("ngIf",!n.isClosed)}}var F5=class i{constructor(e){this.http=e}isClosed=!0;unreadMessageCount=0;refreshInterval;teacherId=null;menuItems=[{icon:"bi-house",label:"AnaSayfa",link:"ogretmen-sayfasi"},{icon:"bi-journal-plus",label:"Ders Anlat\u0131m\u0131",link:"ogretmen-sayfasi/ogretmen-ders-anlatma-tahtasi-sayfasi"},{icon:"bi-people-fill",label:"Gruplar",link:"ogretmen-sayfasi/ogretmen-gruplar-sayfasi"},{icon:"bi-camera-reels",label:"Konu Anlat\u0131m\u0131",link:"ogretmen-sayfasi/ogretmen-ogrenci-listesi-sayfasi"},{icon:"bi-pencil-square",label:"S\u0131navlar",link:"ogretmen-sayfasi/ogretmen-sinavlar-sayfasi"},{icon:"bi-archive",label:"Testler",link:"ogretmen-sayfasi/"},{icon:"bi-diagram-3",label:"Yol Haritas\u0131",link:"ogretmen-sayfasi/"},{icon:"bi-graph-up-arrow",label:"Konu Analizi",link:"ogretmen-sayfasi/"},{icon:"bi-filetype-pdf",label:"\u0130\u015Flenen Konular",link:"ogretmen-sayfasi/ogretmen-islenen-konular-sayfasi"},{icon:"bi-credit-card-2-back",label:"\xDCcretler",link:"ogretmen-sayfasi/ogretmen-ucret-sayfasi"},{icon:"bi-clipboard-check",label:"S\u0131n\u0131fta Kimler Var",link:"ogretmen-sayfasi/ogretmen-sinifta-kimler-var-sayfasi"},{icon:"bi-pencil-square",label:"Soru \xC7\xF6z\xFCm\xFC",link:"ogretmen-sayfasi/ogretmen-soru-cozumu-sayfasi",badgeCount:0}];ngOnInit(){this.loadTeacherInfo(),this.loadUnreadMessageCount(),this.refreshInterval=setInterval(()=>{this.loadUnreadMessageCount()},3e4)}ngOnDestroy(){this.refreshInterval&&clearInterval(this.refreshInterval)}loadTeacherInfo(){let e=localStorage.getItem("user")||sessionStorage.getItem("user");if(e)try{let t=JSON.parse(e);this.teacherId=t.id}catch(t){console.error("\xD6\u011Fretmen bilgileri y\xFCklenirken hata:",t)}}getTokenFromStorage(){let e=localStorage.getItem("token");if(!e){let t=localStorage.getItem("user")||sessionStorage.getItem("user");if(t)try{e=JSON.parse(t).token}catch(n){console.error("Error parsing user data:",n)}}return e||""}loadUnreadMessageCount(){if(!this.teacherId)return;let e={Authorization:`Bearer ${this.getTokenFromStorage()}`};this.http.get("./server/api/soru_mesajlari.php",{headers:e}).subscribe({next:t=>{if(t.success&&t.data){let n=t.data.filter(o=>o.gonderen_tip==="ogrenci"&&!o.okundu);this.unreadMessageCount=n.length;let r=this.menuItems.find(o=>o.label==="Soru \xC7\xF6z\xFCm\xFC");r&&(r.badgeCount=this.unreadMessageCount)}},error:t=>{console.error("Mesaj say\u0131s\u0131 y\xFCklenirken hata:",t)}})}toggleSidebar(){this.isClosed=!this.isClosed}static \u0275fac=function(t){return new(t||i)(ke(gt))};static \u0275cmp=Ke({type:i,selectors:[["app-ogretmen-sidebar-sayfasi"]],standalone:!1,decls:8,vars:7,consts:[[1,"toggle-button",3,"click"],[1,"material-icons"],[1,"sidebar"],[1,"menu-list"],["class","logo",4,"ngIf"],[1,"menu-sidebar"],["class","li-menu",4,"ngFor","ngForOf"],[1,"logo"],[1,"li-menu"],[3,"href"],[1,"menu-flex"],[4,"ngIf"],[1,"sidebar-item-text"],["class","badge bg-danger rounded-pill ms-auto",4,"ngIf"],[1,"badge","bg-danger","rounded-pill","ms-auto"]],template:function(t,n){t&1&&(u(0,"div",0),U("click",function(){return n.toggleSidebar()}),u(1,"i",1),m(2),f()(),u(3,"div",2)(4,"ul",3),ee(5,fpe,4,0,"div",4),u(6,"div",5),ee(7,mpe,5,5,"li",6),f()()()),t&2&&(xe("closed",n.isClosed),x(2),W(n.isClosed?"arrow_forward":"arrow_back"),x(),xe("closed",n.isClosed),x(2),S("ngIf",!n.isClosed),x(2),S("ngForOf",n.menuItems))},dependencies:[yt,lt],styles:["a[_ngcontent-%COMP%]{text-decoration:none;color:inherit}.sidebar[_ngcontent-%COMP%]{width:220px;background-color:#fff;height:calc(100vh - 80px);color:#202020;transition:width .3s;overflow:hidden;position:fixed;top:70px;left:15px;z-index:10;border-radius:8px;box-shadow:0 0 5px #00000080}.sidebar[_ngcontent-%COMP%]   .menu-list[_ngcontent-%COMP%]{width:100%;margin-top:40px;padding-left:7px;position:relative}.sidebar[_ngcontent-%COMP%]   .menu-list[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:90%;top:-35px;left:0;text-align:center;font-size:18px;font-weight:700;font-style:italic;color:#29303c;position:absolute}.sidebar[_ngcontent-%COMP%]   .menu-list[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#f60}.sidebar[_ngcontent-%COMP%]   .menu-list[_ngcontent-%COMP%]   .menu-sidebar[_ngcontent-%COMP%]{margin-top:50px}.sidebar[_ngcontent-%COMP%]   .li-menu[_ngcontent-%COMP%]{width:100%}.sidebar[_ngcontent-%COMP%]   .menu-flex[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center}.sidebar[_ngcontent-%COMP%]   .menu-flex[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:20px;padding:5px}.sidebar[_ngcontent-%COMP%]   .menu-flex[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-top:5px;padding-left:15px}.sidebar.closed[_ngcontent-%COMP%]{width:50px}.sidebar.closed[_ngcontent-%COMP%]   .toggle-button[_ngcontent-%COMP%]{z-index:12;margin-left:35px}.sidebar.closed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:none}.sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;line-height:35px;align-items:center;cursor:pointer;transition:background .2s}.sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#29303c}.sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:12px;font-size:24px;margin-bottom:10px}.sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{color:#f60}.sidebar[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{font-size:.7rem;min-width:18px;height:18px;line-height:18px;border-radius:9px!important;padding:0 6px;font-weight:600;animation:_ngcontent-%COMP%_pulse 2s infinite}.sidebar[_ngcontent-%COMP%]   .badge.bg-danger[_ngcontent-%COMP%]{background-color:#dc3545!important;box-shadow:0 0 0 2px #dc354540}@keyframes _ngcontent-%COMP%_pulse{0%{box-shadow:0 0 #dc3545b3}70%{box-shadow:0 0 0 10px #dc354500}to{box-shadow:0 0 #dc354500}}.toggle-button[_ngcontent-%COMP%]{z-index:12;position:fixed;background-color:#fff;margin-left:215px;margin-top:50px;border-radius:50%;padding-top:5px;box-shadow:0 0 5px #00000080;transition:margin-left .3s;width:32px;height:32px;text-align:center;cursor:pointer;font-size:18px}.toggle-button.closed[_ngcontent-%COMP%]{margin-left:45px}@media (max-width: 768px){.sidebar.closed[_ngcontent-%COMP%], .sidebar.closed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:none}.toggle-button[_ngcontent-%COMP%]{z-index:12;margin-left:215px;margin-top:25px;display:block}.toggle-button.closed[_ngcontent-%COMP%]{margin-left:12px;margin-top:5px}.toggle-button.closed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:none}}"]})};var I5=class i{isSidebarOpen=!0;teacherName="";teacherAvatar="";totalStudents=45;activeStudents=42;totalGroups=8;activeGroups=6;totalTopics=24;completedTopics=18;totalExams=12;pendingExams=3;constructor(){}ngOnInit(){this.loadTeacherInfo(),this.checkScreenSize(),window.addEventListener("resize",()=>{this.checkScreenSize()})}loadTeacherInfo(){let e=localStorage.getItem("user")||sessionStorage.getItem("user");if(e)try{let t=JSON.parse(e);this.teacherName=t.adi_soyadi||"\xD6\u011Fretmen",t.avatar&&t.avatar.trim()!==""?this.teacherAvatar=t.avatar:this.teacherAvatar=`https://ui-avatars.com/api/?name=${encodeURIComponent(this.teacherName)}&background=4f46e5&color=fff&size=40&font-size=0.6&rounded=true`,console.log("\xD6\u011Fretmen bilgileri y\xFCklendi:",{id:t.id,name:this.teacherName,avatar:this.teacherAvatar,userRole:t.rutbe})}catch(t){console.error("Kullan\u0131c\u0131 bilgileri ayr\u0131\u015Ft\u0131r\u0131l\u0131rken hata:",t),this.setDefaultTeacherInfo()}else console.warn("Kullan\u0131c\u0131 giri\u015F bilgisi bulunamad\u0131"),this.setDefaultTeacherInfo()}setDefaultTeacherInfo(){this.teacherName="\xD6\u011Fretmen",this.teacherAvatar="https://ui-avatars.com/api/?name=\xD6\u011Fretmen&background=6c757d&color=fff&size=40&font-size=0.6&rounded=true"}toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen,localStorage.setItem("sidebarOpen",JSON.stringify(this.isSidebarOpen))}checkScreenSize(){if(window.innerWidth<768)this.isSidebarOpen=!1;else{let e=localStorage.getItem("sidebarOpen");this.isSidebarOpen=e?JSON.parse(e):!0}}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=Ke({type:i,selectors:[["app-ogretmen-navbar-sayfasi"]],standalone:!1,decls:29,vars:2,consts:[[1,"navbar"],[1,"logo"],["routerLink","./"],[1,"profil-button","ms-auto","dropdown"],["alt","Avatar",1,"user-avatar",3,"src"],[1,"ogrenci-bilgisi"],["href","#","id","userDropdown","data-bs-toggle","dropdown","aria-expanded","false"],[1,"user-name"],[1,"user-role"],["aria-labelledby","userDropdown",1,"dropdown-menu"],[1,"dropdown-user-info"],[1,"user-name-menu"],[1,"user-role-menu"],[1,"dropdown-divider"],["href","#",1,"dropdown-item","text-danger","text-end"],[1,"material-icons"],[1,"navbar-menu"]],template:function(t,n){t&1&&(u(0,"div",0)(1,"div",1)(2,"a",2),m(3,"Kimya"),u(4,"span"),m(5,"\xD6\u011Freniyorum"),f()()(),u(6,"div",3),k(7,"img",4),u(8,"div",5)(9,"a",6)(10,"div",7),m(11),f(),u(12,"div",8),m(13,"\xD6\u011Fretmen"),f()(),u(14,"ul",9)(15,"li",10)(16,"div",5)(17,"div",11)(18,"p"),m(19,"\u{1F9D1}\u{1F3FB}\u200D\u{1F3EB} \xD6\u011Fretmeni"),f()(),u(20,"div",12),m(21,"deneme"),f()()(),u(22,"li"),k(23,"hr",13),f(),u(24,"li")(25,"a",14)(26,"i",15),m(27,"logout"),f()()()()()()(),k(28,"div",16)),t&2&&(x(7),S("src",n.teacherAvatar,vt),x(4),W(n.teacherName))},dependencies:[xi],styles:["a[_ngcontent-%COMP%]{text-decoration:none;color:inherit}.navbar-menu[_ngcontent-%COMP%]{width:100%;height:30px}.navbar[_ngcontent-%COMP%]{width:100%;height:45px;background-color:#fff;margin-bottom:20px;z-index:11;box-shadow:0 0 5px #00000080!important;display:flex;flex-direction:row;justify-content:space-between;align-items:center;position:fixed}.navbar[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:150px;font-style:italic;font-weight:700;font-size:20px;font-family:Roboto,serif!important;padding-left:10px}.navbar[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#f60}.navbar[_ngcontent-%COMP%]   .profil-button[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:end;padding-right:10px}.navbar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:10px}.dropdown-menu[_ngcontent-%COMP%]{width:100%;margin-top:5px}.user-role[_ngcontent-%COMP%]{text-align:center}.menu_link[_ngcontent-%COMP%]{padding-bottom:10px}.user-name-menu[_ngcontent-%COMP%]{text-align:center;font-weight:500;font-size:16px;padding-top:10px;width:100%}.user-role-menu[_ngcontent-%COMP%]{width:100%;text-align:center;font-weight:500;font-size:14px}.menu-flex[_ngcontent-%COMP%]{width:100%;height:30px;display:flex;justify-content:center;align-items:center}.menu-flex[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:20px;padding:5px}.menu-flex[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-top:20px;padding-left:15px}"]})};var T5=class i{isClosed=!0;toggleSidebar(){this.isClosed=!this.isClosed}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=Ke({type:i,selectors:[["app-ogretmen-taaslak-sayfasi"]],standalone:!1,decls:6,vars:0,consts:[[1,"container-full"],[1,"sidebar"],[1,"main-container"]],template:function(t,n){t&1&&(k(0,"app-ogretmen-navbar-sayfasi"),u(1,"div",0)(2,"div",1),k(3,"app-ogretmen-sidebar-sayfasi"),f(),u(4,"div",2),k(5,"router-outlet"),f()())},dependencies:[va,F5,I5],styles:['.container-full[_ngcontent-%COMP%]{width:100%;height:auto;display:grid;grid-template-columns:70px 1fr;grid-template-areas:"sidebar main-container"}.sidebar[_ngcontent-%COMP%]{grid-area:sidebar}.main-container[_ngcontent-%COMP%]{grid-area:main-container;padding:15px 10px 10px}.main-container.closed[_ngcontent-%COMP%]{right:0;width:calc(100% - 210px)}@media (max-width: 768px){.container-full[_ngcontent-%COMP%]{width:100%;height:auto;display:grid;grid-template-columns:1fr;grid-template-areas:"sidebar" "main-container"}}']})};var a1=class i{id;sinav_adi;sinav_turu;soru_sayisi;tarih;sinav_kapagi;cevaplar;konular;videolar;aktiflik;constructor(e){this.id=e?.id,this.sinav_adi=e?.sinav_adi||"",this.sinav_turu=e?.sinav_turu||"",this.soru_sayisi=e?.soru_sayisi||0,this.tarih=e?.tarih||"",this.sinav_kapagi=e?.sinav_kapagi||"",this.cevaplar=e?.cevaplar||{},this.konular=e?.konular||{},this.videolar=e?.videolar||{},this.aktiflik=e?.aktiflik??!0}static fromJson(e){return new i({id:e.id,sinav_adi:e.sinav_adi,sinav_turu:e.sinav_turu,soru_sayisi:e.soru_sayisi,tarih:e.tarih,sinav_kapagi:e.sinav_kapagi,cevaplar:typeof e.cevaplar=="object"?e.cevaplar:JSON.parse(e.cevaplar||"{}"),konular:typeof e.konular=="object"?e.konular:JSON.parse(e.konular||"{}"),videolar:typeof e.videolar=="object"?e.videolar:JSON.parse(e.videolar||"{}"),aktiflik:e.aktiflik!==void 0?!!e.aktiflik:!0})}toJson(){return{id:this.id,sinav_adi:this.sinav_adi,sinav_turu:this.sinav_turu,soru_sayisi:this.soru_sayisi,tarih:this.tarih,sinav_kapagi:this.sinav_kapagi,cevaplar:this.cevaplar,konular:this.konular,videolar:this.videolar,aktiflik:this.aktiflik}}};function vpe(i,e){if(i&1){let t=Ae();u(0,"button",44),U("click",function(){K(t);let r=F();return Y(r.searchQuery="")}),k(1,"i",37),f()}}function bpe(i,e){if(i&1){let t=Ae();u(0,"div",48)(1,"div",49),k(2,"i",15),f(),u(3,"div",50),m(4),f(),u(5,"button",51),U("click",function(){K(t);let r=F(2);return Y(r.successMessage="")}),k(6,"i",37),f()()}if(i&2){let t=F(2);x(4),W(t.successMessage)}}function Cpe(i,e){if(i&1){let t=Ae();u(0,"div",52)(1,"div",49),k(2,"i",53),f(),u(3,"div",50),m(4),f(),u(5,"button",51),U("click",function(){K(t);let r=F(2);return Y(r.errorMessage="")}),k(6,"i",37),f()()}if(i&2){let t=F(2);x(4),W(t.errorMessage)}}function ype(i,e){if(i&1&&(u(0,"div",45),ee(1,bpe,7,1,"div",46)(2,Cpe,7,1,"div",47),f()),i&2){let t=F();x(),S("ngIf",t.successMessage),x(),S("ngIf",t.errorMessage)}}function wpe(i,e){if(i&1&&(u(0,"option",88),m(1),f()),i&2){let t=e.$implicit;S("value",t.id),x(),W(t.label)}}function Mpe(i,e){i&1&&(u(0,"div",89),k(1,"i",90),u(2,"span"),m(3,"Dosya y\xFCklemek i\xE7in t\u0131klay\u0131n"),f(),u(4,"small"),m(5,"PNG, JPG, JPEG (Max: 5MB)"),f()())}function Epe(i,e){if(i&1&&(u(0,"div",91),k(1,"img",92),u(2,"div",93),k(3,"i",94),u(4,"span"),m(5,"De\u011Fi\u015Ftir"),f()()()),i&2){let t=F(2);x(),S("src",t.imagePreview,vt)}}function Ppe(i,e){if(i&1){let t=Ae();u(0,"div",100)(1,"div",101),m(2),f(),u(3,"div",102)(4,"input",103),at("ngModelChange",function(r){let o=K(t).index,s=F(3);return dt(s.cevapAnahtari.cevaplar["ca"+(o+1)],r)||(s.cevapAnahtari.cevaplar["ca"+(o+1)]=r),Y(r)}),f(),u(5,"input",104),at("ngModelChange",function(r){let o=K(t).index,s=F(3);return dt(s.cevapAnahtari.konular["ka"+(o+1)],r)||(s.cevapAnahtari.konular["ka"+(o+1)]=r),Y(r)}),f(),u(6,"input",105),at("ngModelChange",function(r){let o=K(t).index,s=F(3);return dt(s.cevapAnahtari.videolar["va"+(o+1)],r)||(s.cevapAnahtari.videolar["va"+(o+1)]=r),Y(r)}),f()()()}if(i&2){let t=e.index,n=F(3);x(2),W(t+1),x(2),st("ngModel",n.cevapAnahtari.cevaplar["ca"+(t+1)]),S("name","ca"+(t+1)),x(),st("ngModel",n.cevapAnahtari.konular["ka"+(t+1)]),S("name","ka"+(t+1)),x(),st("ngModel",n.cevapAnahtari.videolar["va"+(t+1)]),S("name","va"+(t+1))}}function Ope(i,e){if(i&1&&(u(0,"div",95)(1,"h3",96),k(2,"i",97),m(3," Cevap Anahtar\u0131 "),f(),u(4,"div",98),ee(5,Ppe,7,7,"div",99),f()()),i&2){let t=F(2);x(5),S("ngForOf",t.sorular)}}function Spe(i,e){if(i&1){let t=Ae();u(0,"div",54)(1,"div",55)(2,"div",56)(3,"h2"),k(4,"i",57),m(5," Yeni Cevap Anahtar\u0131 Ekle "),f(),u(6,"button",58),U("click",function(){K(t);let r=F();return Y(r.showAddForm=!1)}),k(7,"i",37),f()(),u(8,"form",59),U("ngSubmit",function(){K(t);let r=F();return Y(r.submitForm())}),u(9,"div",60)(10,"div",61)(11,"label",62),k(12,"i",63),m(13," S\u0131nav Ad\u0131 "),f(),u(14,"input",64),at("ngModelChange",function(r){K(t);let o=F();return dt(o.cevapAnahtari.sinav_adi,r)||(o.cevapAnahtari.sinav_adi=r),Y(r)}),f()(),u(15,"div",61)(16,"label",62),k(17,"i",65),m(18," S\u0131nav T\xFCr\xFC "),f(),u(19,"select",66),at("ngModelChange",function(r){K(t);let o=F();return dt(o.cevapAnahtari.sinav_turu,r)||(o.cevapAnahtari.sinav_turu=r),Y(r)}),u(20,"option",67),m(21,"S\u0131nav t\xFCr\xFCn\xFC se\xE7in"),f(),ee(22,wpe,2,2,"option",68),f()(),u(23,"div",61)(24,"label",62),k(25,"i",69),m(26," Soru Say\u0131s\u0131 "),f(),u(27,"input",70),at("ngModelChange",function(r){K(t);let o=F();return dt(o.cevapAnahtari.soru_sayisi,r)||(o.cevapAnahtari.soru_sayisi=r),Y(r)}),U("ngModelChange",function(r){K(t);let o=F();return Y(o.updateSorular(r))}),f()(),u(28,"div",61)(29,"label",62),k(30,"i",71),m(31," S\u0131nav Tarihi "),f(),u(32,"input",72),at("ngModelChange",function(r){K(t);let o=F();return dt(o.cevapAnahtari.tarih,r)||(o.cevapAnahtari.tarih=r),Y(r)}),f()(),u(33,"div",61)(34,"label",62),k(35,"i",73),m(36," S\u0131nav Durumu "),f(),u(37,"div",74)(38,"input",75),at("ngModelChange",function(r){K(t);let o=F();return dt(o.cevapAnahtari.aktiflik,r)||(o.cevapAnahtari.aktiflik=r),Y(r)}),f(),u(39,"label",76)(40,"span",77),m(41),f()()()()(),u(42,"div",61)(43,"label",62),k(44,"i",78),m(45," S\u0131nav Kapa\u011F\u0131 "),f(),u(46,"div",79)(47,"input",80),U("change",function(r){K(t);let o=F();return Y(o.onImageSelected(r))}),f(),u(48,"label",81),ee(49,Mpe,6,0,"div",82)(50,Epe,6,1,"div",83),f()()(),ee(51,Ope,6,1,"div",84),u(52,"div",85)(53,"button",40),U("click",function(){K(t);let r=F();return Y(r.initModel())}),k(54,"i",86),m(55," S\u0131f\u0131rla "),f(),u(56,"button",87),k(57,"i",43),m(58),f()()()()()}if(i&2){let t=F();S("@slideInOut",void 0),x(14),st("ngModel",t.cevapAnahtari.sinav_adi),x(5),st("ngModel",t.cevapAnahtari.sinav_turu),x(3),S("ngForOf",t.sinavTurleri),x(5),st("ngModel",t.cevapAnahtari.soru_sayisi),S("max",t.maxSoruSayisi),x(5),st("ngModel",t.cevapAnahtari.tarih),x(6),st("ngModel",t.cevapAnahtari.aktiflik),x(3),W(t.cevapAnahtari.aktiflik?"Aktif":"Pasif"),x(5),xe("has-file",t.imagePreview),x(3),S("ngIf",!t.imagePreview),x(),S("ngIf",t.imagePreview),x(),S("ngIf",t.sorular.length>0),x(5),S("disabled",t.submitting),x(2),he(" ",t.submitting?"Kaydediliyor...":"Kaydet"," ")}}function kpe(i,e){i&1&&(u(0,"div",106)(1,"div",107),k(2,"div",108),u(3,"p"),m(4,"S\u0131navlar y\xFCkleniyor..."),f()()())}function Ape(i,e){if(i&1){let t=Ae();u(0,"div",109)(1,"div",110),k(2,"i",111),u(3,"h3"),m(4,"Hata Olu\u015Ftu"),f(),u(5,"p"),m(6),f(),u(7,"button",112),U("click",function(){K(t);let r=F();return Y(r.loadCevapAnahtarlari())}),k(8,"i",86),m(9," Tekrar Dene "),f()()()}if(i&2){let t=F();x(6),W(t.error)}}function Dpe(i,e){if(i&1&&(u(0,"div",135),k(1,"img",136),f()),i&2){let t=F().$implicit;x(),S("src","/uploads/"+t.sinav_kapagi,vt)}}function Fpe(i,e){if(i&1&&(u(0,"div",140)(1,"span",141),m(2),f(),u(3,"span",142),m(4),f()()),i&2){let t=e.index,n=F(2).$implicit;xe("has-tooltip",n.konular&&n.konular["ka"+(t+1)]),wi("data-tooltip",n.konular&&n.konular["ka"+(t+1)]?n.konular["ka"+(t+1)]:"Konu bilgisi yok"),x(2),he("",t+1,"."),x(2),W(n.cevaplar["ca"+(t+1)]||"-")}}function Ipe(i,e){if(i&1&&(u(0,"div",137)(1,"h4"),k(2,"i",43),m(3," Cevap Anahtar\u0131 "),f(),u(4,"div",138),ee(5,Fpe,5,5,"div",139),f()()),i&2){let t=F().$implicit,n=F(2);x(5),S("ngForOf",n.getSoruDizisi(t))}}function Tpe(i,e){if(i&1){let t=Ae();u(0,"div",115)(1,"div",116)(2,"div",117)(3,"div",118),k(4,"i",10),f(),u(5,"div",119)(6,"h3",120),m(7),f(),u(8,"div",121)(9,"span",122),k(10,"i",123),m(11),f(),u(12,"span",124),k(13,"i",71),m(14),f(),u(15,"span",125),k(16,"i",69),m(17),f(),u(18,"span",126),k(19,"i",127),m(20),f()()()(),u(21,"div",128)(22,"button",129),U("click",function(){let r=K(t).$implicit,o=F(2);return Y(o.editCevapAnahtari(r))}),k(23,"i",94),u(24,"span"),m(25,"D\xFCzenle"),f()(),u(26,"button",130),U("click",function(){let r=K(t).$implicit,o=F(2);return Y(r.id&&o.deleteCevapAnahtari(r.id))}),k(27,"i",131),u(28,"span"),m(29,"Sil"),f()()()(),u(30,"div",132),ee(31,Dpe,2,1,"div",133)(32,Ipe,6,1,"div",134),f()()}if(i&2){let t=e.$implicit,n=F(2);x(),It("background",n.getExamTypeColor(t.sinav_turu)),x(6),W(t.sinav_adi),x(4),he(" ",n.getSinavTuruLabel(t.sinav_turu)," "),x(3),he(" ",t.tarih," "),x(3),he(" ",t.soru_sayisi," soru "),x(),xe("active",t.aktiflik)("inactive",!t.aktiflik),x(),xe("bi-check-circle-fill",t.aktiflik)("bi-x-circle-fill",!t.aktiflik),x(),he(" ",t.aktiflik?"Aktif":"Pasif"," "),x(11),S("ngIf",t.sinav_kapagi),x(),S("ngIf",t.cevaplar)}}function Bpe(i,e){if(i&1&&(u(0,"div",113),ee(1,Tpe,33,17,"div",114),f()),i&2){let t=F();x(),S("ngForOf",t.filteredCevapAnahtarlari)}}function Npe(i,e){if(i&1){let t=Ae();u(0,"div",143)(1,"div",144)(2,"div",145),k(3,"i",146),f(),u(4,"h3"),m(5,"Arama Sonucu Bulunamad\u0131"),f(),u(6,"p"),m(7,"Arad\u0131\u011F\u0131n\u0131z kriterlere uygun s\u0131nav bulunamad\u0131."),f(),u(8,"button",147),U("click",function(){K(t);let r=F();return Y(r.searchQuery="")}),k(9,"i",86),m(10," Filtreleri Temizle "),f()()()}}function Lpe(i,e){if(i&1){let t=Ae();u(0,"div",143)(1,"div",144)(2,"div",145),k(3,"i",148),f(),u(4,"h3"),m(5,"Hen\xFCz S\u0131nav Bulunmuyor"),f(),u(6,"p"),m(7,'\u0130lk cevap anahtar\u0131n\u0131z\u0131 olu\u015Fturmak i\xE7in yukar\u0131daki "Yeni S\u0131nav Ekle" butonunu kullan\u0131n.'),f(),u(8,"button",147),U("click",function(){K(t);let r=F();return Y(r.showAddForm=!0)}),k(9,"i",25),m(10," \u0130lk S\u0131nav\u0131 Ekle "),f()()()}}function Rpe(i,e){if(i&1&&(u(0,"option",88),m(1),f()),i&2){let t=e.$implicit;S("value",t.id),x(),W(t.label)}}function zpe(i,e){if(i&1){let t=Ae();u(0,"div",100)(1,"div",101),m(2),f(),u(3,"div",102)(4,"input",103),at("ngModelChange",function(r){let o=K(t).index,s=F(3);return dt(s.currentEditingCevapAnahtari.cevaplar["ca"+(o+1)],r)||(s.currentEditingCevapAnahtari.cevaplar["ca"+(o+1)]=r),Y(r)}),f(),u(5,"input",104),at("ngModelChange",function(r){let o=K(t).index,s=F(3);return dt(s.currentEditingCevapAnahtari.konular["ka"+(o+1)],r)||(s.currentEditingCevapAnahtari.konular["ka"+(o+1)]=r),Y(r)}),f(),u(6,"input",105),at("ngModelChange",function(r){let o=K(t).index,s=F(3);return dt(s.currentEditingCevapAnahtari.videolar["va"+(o+1)],r)||(s.currentEditingCevapAnahtari.videolar["va"+(o+1)]=r),Y(r)}),f()()()}if(i&2){let t=e.index,n=F(3);x(2),W(t+1),x(2),st("ngModel",n.currentEditingCevapAnahtari.cevaplar["ca"+(t+1)]),S("name","edit_ca"+(t+1)),x(),st("ngModel",n.currentEditingCevapAnahtari.konular["ka"+(t+1)]),S("name","edit_ka"+(t+1)),x(),st("ngModel",n.currentEditingCevapAnahtari.videolar["va"+(t+1)]),S("name","edit_va"+(t+1))}}function jpe(i,e){if(i&1&&(u(0,"div",95)(1,"h3",96),m(2,"Cevap Anahtar\u0131"),f(),u(3,"div",98),ee(4,zpe,7,7,"div",99),f()()),i&2){let t=F(2);x(4),S("ngForOf",t.getSoruDizisi(t.currentEditingCevapAnahtari))}}function Vpe(i,e){if(i&1){let t=Ae();u(0,"div",149)(1,"form",59),U("ngSubmit",function(){K(t);let r=F();return Y(r.submitEditForm())}),u(2,"div",60)(3,"div",61)(4,"label",62),m(5,"S\u0131nav Ad\u0131"),f(),u(6,"input",150),at("ngModelChange",function(r){K(t);let o=F();return dt(o.currentEditingCevapAnahtari.sinav_adi,r)||(o.currentEditingCevapAnahtari.sinav_adi=r),Y(r)}),f()(),u(7,"div",61)(8,"label",62),m(9,"S\u0131nav T\xFCr\xFC"),f(),u(10,"select",151),at("ngModelChange",function(r){K(t);let o=F();return dt(o.currentEditingCevapAnahtari.sinav_turu,r)||(o.currentEditingCevapAnahtari.sinav_turu=r),Y(r)}),u(11,"option",67),m(12,"S\u0131nav t\xFCr\xFCn\xFC se\xE7in"),f(),ee(13,Rpe,2,2,"option",68),f()(),u(14,"div",61)(15,"label",62),m(16,"Soru Say\u0131s\u0131"),f(),u(17,"input",152),at("ngModelChange",function(r){K(t);let o=F();return dt(o.currentEditingCevapAnahtari.soru_sayisi,r)||(o.currentEditingCevapAnahtari.soru_sayisi=r),Y(r)}),U("ngModelChange",function(r){K(t);let o=F();return Y(o.updateSorular(r))}),f()(),u(18,"div",61)(19,"label",62),m(20,"S\u0131nav Tarihi"),f(),u(21,"input",153),at("ngModelChange",function(r){K(t);let o=F();return dt(o.currentEditingCevapAnahtari.tarih,r)||(o.currentEditingCevapAnahtari.tarih=r),Y(r)}),f()(),u(22,"div",61)(23,"label",62),m(24,"S\u0131nav Durumu"),f(),u(25,"div",74)(26,"input",154),at("ngModelChange",function(r){K(t);let o=F();return dt(o.currentEditingCevapAnahtari.aktiflik,r)||(o.currentEditingCevapAnahtari.aktiflik=r),Y(r)}),f(),u(27,"label",155)(28,"span",77),m(29),f()()()()(),ee(30,jpe,5,1,"div",84),f()()}if(i&2){let t=F();x(6),st("ngModel",t.currentEditingCevapAnahtari.sinav_adi),x(4),st("ngModel",t.currentEditingCevapAnahtari.sinav_turu),x(3),S("ngForOf",t.sinavTurleri),x(4),st("ngModel",t.currentEditingCevapAnahtari.soru_sayisi),S("max",t.maxSoruSayisi),x(4),st("ngModel",t.currentEditingCevapAnahtari.tarih),x(5),st("ngModel",t.currentEditingCevapAnahtari.aktiflik),x(3),W(t.currentEditingCevapAnahtari.aktiflik?"Aktif":"Pasif"),x(),S("ngIf",t.getSoruDizisi(t.currentEditingCevapAnahtari).length>0)}}var B5=class i{constructor(e){this.http=e}cevapAnahtari=new a1;imagePreview=null;submitting=!1;successMessage="";errorMessage="";cevapAnahtarlari=[];loading=!0;maxSoruSayisi=100;searchQuery="";showAddForm=!1;error=null;sinavTurleri=[{id:"TYT",label:"TYT Deneme"},{id:"AYT",label:"AYT Deneme"},{id:"TAR",label:"Tarama S\u0131nav\u0131"},{id:"TEST",label:"Konu Testi"}];sorular=[];cevapForm;ngOnInit(){this.initModel(),this.loadCevapAnahtarlari(),document.addEventListener("keydown",e=>{e.key==="Escape"&&this.editMode&&this.cancelEdit()})}initModel(){let e=new Date;this.cevapAnahtari=new a1({sinav_adi:"",sinav_turu:"",soru_sayisi:30,tarih:this.formatDate(e),sinav_kapagi:"",cevaplar:{},konular:{},videolar:{},aktiflik:!0}),this.updateSorular(7)}updateSorular(e){this.cevapAnahtari.soru_sayisi=e,this.sorular=Array(e).fill(0).map((t,n)=>n+1);for(let t=1;t<=e;t++)this.cevapAnahtari.cevaplar[`ca${t}`]||(this.cevapAnahtari.cevaplar[`ca${t}`]=""),this.cevapAnahtari.konular[`ka${t}`]||(this.cevapAnahtari.konular[`ka${t}`]=""),this.cevapAnahtari.videolar[`va${t}`]||(this.cevapAnahtari.videolar[`va${t}`]="")}onImageSelected(e){let t=e.target.files[0];if(t){let n=new FileReader;n.onload=()=>{this.imagePreview=n.result},n.readAsDataURL(t),this.cevapAnahtari.sinav_kapagi=t.name}}submitForm(){if(!this.cevapAnahtari.sinav_adi||!this.cevapAnahtari.sinav_turu||this.cevapAnahtari.soru_sayisi<=0||!this.cevapAnahtari.tarih){this.showError("L\xFCtfen zorunlu alanlar\u0131 doldurun.");return}let e=!0;for(let r=1;r<=this.cevapAnahtari.soru_sayisi;r++)if(!this.cevapAnahtari.cevaplar[`ca${r}`]){e=!1;break}if(!e){this.showError("L\xFCtfen t\xFCm sorular\u0131n cevaplar\u0131n\u0131 girin.");return}this.submitting=!0,this.successMessage="",this.errorMessage="";let t=new FormData;t.append("sinav_adi",this.cevapAnahtari.sinav_adi),t.append("sinav_turu",this.cevapAnahtari.sinav_turu),t.append("soru_sayisi",this.cevapAnahtari.soru_sayisi.toString()),t.append("tarih",this.cevapAnahtari.tarih),t.append("cevaplar",JSON.stringify(this.cevapAnahtari.cevaplar)),t.append("konular",JSON.stringify(this.cevapAnahtari.konular)),t.append("videolar",JSON.stringify(this.cevapAnahtari.videolar)),t.append("aktiflik",this.cevapAnahtari.aktiflik?"1":"0");let n=document.getElementById("sinav_kapagi");n.files&&n.files.length>0&&t.append("sinav_kapagi",n.files[0]),this.http.post("./server/api/cevap-anahtari-ekle.php",t).subscribe(r=>{this.submitting=!1,r.success?(this.showSuccess("Cevap anahtar\u0131 ba\u015Far\u0131yla kaydedildi."),this.initModel(),this.imagePreview=null,n&&(n.value=""),this.loadCevapAnahtarlari()):this.showError(r.message||"Bir hata olu\u015Ftu.")},r=>{this.submitting=!1,this.showError("Sunucu hatas\u0131: "+(r.message||"Bilinmeyen bir hata olu\u015Ftu."))})}loadCevapAnahtarlari(){this.loading=!0,this.http.get("./server/api/cevap-anahtarlari-listele.php").subscribe({next:e=>{this.loading=!1,e.success?(this.cevapAnahtarlari=e.data||[],console.log("Y\xFCklenen cevap anahtarlar\u0131:",this.cevapAnahtarlari)):(console.error("API hatas\u0131:",e.message),this.cevapAnahtarlari=[],this.showError("Cevap anahtarlar\u0131 y\xFCklenirken bir hata olu\u015Ftu: "+(e.message||"Bilinmeyen hata")))},error:e=>{console.error("HTTP hatas\u0131:",e),this.loading=!1,this.cevapAnahtarlari=[],this.showError("Sunucu hatas\u0131: "+(e.message||"Ba\u011Flant\u0131 hatas\u0131"))}})}getSoruDizisi(e){if(e.soru_sayisi&&!isNaN(Number(e.soru_sayisi)))return console.log("Soru say\u0131s\u0131:",e.soru_sayisi),Array(Number(e.soru_sayisi)).fill(0).map((t,n)=>n);if(e.cevaplar){console.log("Cevaplar:",e.cevaplar);let t=Object.keys(e.cevaplar),n=0;for(let r of t)if(r.startsWith("ca")){let o=parseInt(r.substring(2));!isNaN(o)&&o>n&&(n=o)}return Array(n).fill(0).map((r,o)=>o)}return[]}editMode=!1;currentEditingCevapAnahtari=null;editCevapAnahtari(e){this.editMode=!0,this.currentEditingCevapAnahtari=JSON.parse(JSON.stringify(e)),this.currentEditingCevapAnahtari.sinav_kapagi?this.imagePreview="/uploads/"+this.currentEditingCevapAnahtari.sinav_kapagi:this.imagePreview=null,document.body.style.overflow="hidden"}cancelEdit(){this.editMode=!1,this.currentEditingCevapAnahtari=null,this.imagePreview=null,document.body.style.overflow=""}onModalBackdropClick(e){e.target===e.currentTarget&&this.cancelEdit()}submitEditForm(){if(!this.currentEditingCevapAnahtari||!this.currentEditingCevapAnahtari.id){this.showError("D\xFCzenlenecek kay\u0131t bulunamad\u0131.");return}if(!this.currentEditingCevapAnahtari.sinav_adi||!this.currentEditingCevapAnahtari.sinav_turu||this.currentEditingCevapAnahtari.soru_sayisi<=0||!this.currentEditingCevapAnahtari.tarih){this.showError("L\xFCtfen t\xFCm zorunlu alanlar\u0131 doldurun.");return}this.submitting=!0,this.successMessage="",this.errorMessage="";let e=new FormData;e.append("id",this.currentEditingCevapAnahtari.id),e.append("sinav_adi",this.currentEditingCevapAnahtari.sinav_adi),e.append("sinav_turu",this.currentEditingCevapAnahtari.sinav_turu),e.append("soru_sayisi",this.currentEditingCevapAnahtari.soru_sayisi.toString()),e.append("tarih",this.currentEditingCevapAnahtari.tarih),e.append("cevaplar",JSON.stringify(this.currentEditingCevapAnahtari.cevaplar)),e.append("konular",JSON.stringify(this.currentEditingCevapAnahtari.konular)),e.append("videolar",JSON.stringify(this.currentEditingCevapAnahtari.videolar)),e.append("aktiflik",this.currentEditingCevapAnahtari.aktiflik?"1":"0");let t=document.getElementById("edit_sinav_kapagi");t&&t.files&&t.files.length>0&&e.append("sinav_kapagi",t.files[0]),this.http.post("./server/api/cevap-anahtari-guncelle.php",e).subscribe(n=>{this.submitting=!1,n.success?(this.showSuccess("Cevap anahtar\u0131 ba\u015Far\u0131yla g\xFCncellendi."),this.editMode=!1,this.currentEditingCevapAnahtari=null,this.imagePreview=null,this.loadCevapAnahtarlari(),document.body.style.overflow=""):this.showError(n.message||"Bir hata olu\u015Ftu.")},n=>{this.submitting=!1,console.error("G\xFCncelleme hatas\u0131:",n),this.showError("Sunucu hatas\u0131: "+(n.message||"Bilinmeyen bir hata olu\u015Ftu."))})}ngOnDestroy(){document.body.style.overflow=""}deleteCevapAnahtari(e){confirm("Bu cevap anahtar\u0131n\u0131 silmek istedi\u011Finize emin misiniz?")&&this.http.post("./server/api/cevap-anahtari-sil.php",{id:e}).subscribe(t=>{t.success?(this.showSuccess("Cevap anahtar\u0131 ba\u015Far\u0131yla silindi."),this.loadCevapAnahtarlari()):this.showError(t.message||"Silme i\u015Flemi ba\u015Far\u0131s\u0131z.")},t=>{this.showError("Sunucu hatas\u0131: "+(t.message||"Bilinmeyen bir hata olu\u015Ftu."))})}formatDate(e){let t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${r}`}getSinavTuruLabel(e){let t=this.sinavTurleri.find(n=>n.id===e);return t?t.label:e}showSuccess(e){this.successMessage=e,setTimeout(()=>this.successMessage="",5e3)}showError(e){this.errorMessage=e,setTimeout(()=>this.errorMessage="",5e3)}trackByFn(e,t){return e}get filteredCevapAnahtarlari(){if(!this.searchQuery.trim())return this.cevapAnahtarlari;let e=this.searchQuery.toLowerCase().trim();return this.cevapAnahtarlari.filter(t=>t.sinav_adi.toLowerCase().includes(e)||this.getSinavTuruLabel(t.sinav_turu).toLowerCase().includes(e))}getActiveSinavCount(){let e=new Date,t=new Date;return t.setMonth(e.getMonth()-1),this.cevapAnahtarlari.filter(n=>new Date(n.tarih)>=t).length}getThisMonthCount(){let e=new Date,t=new Date(e.getFullYear(),e.getMonth(),1);return this.cevapAnahtarlari.filter(n=>new Date(n.tarih)>=t).length}getExamTypeColor(e){return{TYT:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",AYT:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",TAR:"linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)",TEST:"linear-gradient(135deg, #fa709a 0%, #fee140 100%)"}[e]||"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"}static \u0275fac=function(t){return new(t||i)(ke(gt))};static \u0275cmp=Ke({type:i,selectors:[["app-ogretmen-sinavlar-sayfasi"]],standalone:!1,decls:66,vars:17,consts:[[1,"groups-container"],[1,"page-header"],[1,"header-content"],[1,"header-text"],[1,"page-title"],[1,"bi","bi-clipboard2-check-fill","me-2"],[1,"page-description"],[1,"stats-row"],[1,"stat-card"],[1,"stat-icon","bg-primary"],[1,"bi","bi-file-earmark-text-fill"],[1,"stat-content"],[1,"stat-number"],[1,"stat-label"],[1,"stat-icon","bg-success"],[1,"bi","bi-check-circle-fill"],[1,"stat-icon","bg-info"],[1,"bi","bi-calendar3"],[1,"search-section"],[1,"search-container"],[1,"search-input-wrapper"],[1,"bi","bi-search","search-icon"],["type","text","placeholder","S\u0131nav ara...",1,"search-input",3,"ngModelChange","ngModel"],["class","clear-search-btn",3,"click",4,"ngIf"],[1,"add-exam-btn",3,"click"],[1,"bi","bi-plus-circle","me-1"],["class","alerts-container",4,"ngIf"],["class","add-form-container",4,"ngIf"],["class","loading-container",4,"ngIf"],["class","error-container",4,"ngIf"],["class","exams-list",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"edit-modal",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"bi","bi-pencil-square","me-2"],[1,"modal-close",3,"click"],[1,"bi","bi-x"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn-secondary",3,"click"],[1,"bi","bi-x","me-1"],["type","button",1,"btn-primary",3,"click","disabled"],[1,"bi","bi-check-circle","me-1"],[1,"clear-search-btn",3,"click"],[1,"alerts-container"],["class","modern-alert success",4,"ngIf"],["class","modern-alert error",4,"ngIf"],[1,"modern-alert","success"],[1,"alert-icon"],[1,"alert-content"],[1,"alert-close",3,"click"],[1,"modern-alert","error"],[1,"bi","bi-exclamation-circle-fill"],[1,"add-form-container"],[1,"form-card"],[1,"form-header"],[1,"bi","bi-plus-circle","me-2"],[1,"close-btn",3,"click"],[1,"exam-form",3,"ngSubmit"],[1,"form-grid"],[1,"form-field"],[1,"field-label"],[1,"bi","bi-file-earmark-text","me-1"],["type","text","name","sinav_adi","placeholder","\xD6rn: TYT-AYT Kimya S\u0131nav\u0131","required","",1,"form-input",3,"ngModelChange","ngModel"],[1,"bi","bi-tag","me-1"],["name","sinav_turu","required","",1,"form-select",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"bi","bi-list-ol","me-1"],["type","number","name","soru_sayisi","min","1","required","",1,"form-input",3,"ngModelChange","ngModel","max"],[1,"bi","bi-calendar3","me-1"],["type","date","name","tarih","required","",1,"form-input",3,"ngModelChange","ngModel"],[1,"bi","bi-toggle-on","me-1"],[1,"checkbox-wrapper"],["type","checkbox","id","aktiflik","name","aktiflik",1,"checkbox-input",3,"ngModelChange","ngModel"],["for","aktiflik",1,"checkbox-label"],[1,"checkbox-text"],[1,"bi","bi-image","me-1"],[1,"upload-area"],["type","file","id","sinav_kapagi","accept","image/*",1,"file-input",3,"change"],["for","sinav_kapagi",1,"upload-label"],["class","upload-content",4,"ngIf"],["class","image-preview",4,"ngIf"],["class","answers-section",4,"ngIf"],[1,"form-actions"],[1,"bi","bi-arrow-clockwise","me-1"],["type","submit",1,"btn-primary",3,"disabled"],[3,"value"],[1,"upload-content"],[1,"bi","bi-cloud-upload"],[1,"image-preview"],["alt","\xD6nizleme",3,"src"],[1,"image-overlay"],[1,"bi","bi-pencil-square"],[1,"answers-section"],[1,"section-title"],[1,"bi","bi-list-check","me-2"],[1,"answers-grid"],["class","answer-item",4,"ngFor","ngForOf"],[1,"answer-item"],[1,"question-number"],[1,"answer-inputs"],["type","text","maxlength","1","placeholder","A","required","",1,"answer-input",3,"ngModelChange","ngModel","name"],["type","text","placeholder","Konu",1,"topic-input",3,"ngModelChange","ngModel","name"],["type","text","placeholder","Video URL",1,"video-input",3,"ngModelChange","ngModel","name"],[1,"loading-container"],[1,"loading-spinner"],[1,"spinner"],[1,"error-container"],[1,"error-card"],[1,"bi","bi-exclamation-triangle-fill","error-icon"],[1,"retry-button",3,"click"],[1,"exams-list"],["class","exam-card",4,"ngFor","ngForOf"],[1,"exam-card"],[1,"exam-header"],[1,"exam-header-left"],[1,"exam-icon"],[1,"exam-info"],[1,"exam-title"],[1,"exam-meta"],[1,"exam-type"],[1,"bi","bi-tag-fill","me-1"],[1,"exam-date"],[1,"question-count"],[1,"aktiflik-badge"],[1,"bi"],[1,"exam-header-actions"],[1,"header-action-btn","edit-btn",3,"click"],[1,"header-action-btn","delete-btn",3,"click"],[1,"bi","bi-trash3-fill"],[1,"exam-content"],["class","exam-image",4,"ngIf"],["class","answers-preview",4,"ngIf"],[1,"exam-image"],["alt","S\u0131nav Kapa\u011F\u0131",1,"exam-cover",3,"src"],[1,"answers-preview"],[1,"answers-grid-preview"],["class","answer-preview",3,"has-tooltip",4,"ngFor","ngForOf"],[1,"answer-preview"],[1,"q-num"],[1,"q-answer"],[1,"empty-state"],[1,"empty-content"],[1,"empty-icon"],[1,"bi","bi-search"],[1,"empty-action-btn",3,"click"],[1,"bi","bi-file-earmark-plus"],[1,"modal-body"],["type","text","name","edit_sinav_adi","required","",1,"form-input",3,"ngModelChange","ngModel"],["name","edit_sinav_turu","required","",1,"form-select",3,"ngModelChange","ngModel"],["type","number","name","edit_soru_sayisi","min","1","required","",1,"form-input",3,"ngModelChange","ngModel","max"],["type","date","name","edit_tarih","required","",1,"form-input",3,"ngModelChange","ngModel"],["type","checkbox","id","edit_aktiflik","name","edit_aktiflik",1,"checkbox-input",3,"ngModelChange","ngModel"],["for","edit_aktiflik",1,"checkbox-label"]],template:function(t,n){t&1&&(u(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),k(5,"i",5),m(6," Cevap Anahtar\u0131 Y\xF6netimi "),f(),u(7,"p",6),m(8,"S\u0131nav cevap anahtarlar\u0131n\u0131z\u0131 kolayca y\xF6netin ve d\xFCzenleyin"),f()(),u(9,"div",7)(10,"div",8)(11,"div",9),k(12,"i",10),f(),u(13,"div",11)(14,"div",12),m(15),f(),u(16,"div",13),m(17,"Toplam S\u0131nav"),f()()(),u(18,"div",8)(19,"div",14),k(20,"i",15),f(),u(21,"div",11)(22,"div",12),m(23),f(),u(24,"div",13),m(25,"Aktif S\u0131nav"),f()()(),u(26,"div",8)(27,"div",16),k(28,"i",17),f(),u(29,"div",11)(30,"div",12),m(31),f(),u(32,"div",13),m(33,"Bu Ay Eklenen"),f()()()()(),u(34,"div",18)(35,"div",19)(36,"div",20),k(37,"i",21),u(38,"input",22),at("ngModelChange",function(o){return dt(n.searchQuery,o)||(n.searchQuery=o),o}),f(),ee(39,vpe,2,0,"button",23),f(),u(40,"button",24),U("click",function(){return n.showAddForm=!n.showAddForm}),k(41,"i",25),m(42," Yeni S\u0131nav Ekle "),f()()()(),ee(43,ype,3,2,"div",26)(44,Spe,59,16,"div",27)(45,kpe,5,0,"div",28)(46,Ape,10,1,"div",29)(47,Bpe,2,1,"div",30)(48,Npe,11,0,"div",31)(49,Lpe,11,0,"div",31),u(50,"div",32),U("click",function(o){return n.onModalBackdropClick(o)}),u(51,"div",33),U("click",function(o){return o.stopPropagation()}),u(52,"div",34)(53,"h3"),k(54,"i",35),m(55," Cevap Anahtar\u0131 D\xFCzenle "),f(),u(56,"button",36),U("click",function(){return n.cancelEdit()}),k(57,"i",37),f()(),ee(58,Vpe,31,9,"div",38),u(59,"div",39)(60,"button",40),U("click",function(){return n.cancelEdit()}),k(61,"i",41),m(62," \u0130ptal "),f(),u(63,"button",42),U("click",function(){return n.submitEditForm()}),k(64,"i",43),m(65),f()()()()()),t&2&&(x(15),W(n.cevapAnahtarlari.length),x(8),W(n.getActiveSinavCount()),x(8),W(n.getThisMonthCount()),x(7),st("ngModel",n.searchQuery),x(),S("ngIf",n.searchQuery),x(4),S("ngIf",n.successMessage||n.errorMessage),x(),S("ngIf",n.showAddForm),x(),S("ngIf",n.loading),x(),S("ngIf",n.error&&!n.loading),x(),S("ngIf",!n.loading&&!n.error&&n.filteredCevapAnahtarlari.length>0),x(),S("ngIf",!n.loading&&!n.error&&n.filteredCevapAnahtarlari.length===0&&n.cevapAnahtarlari.length>0),x(),S("ngIf",!n.loading&&!n.error&&n.cevapAnahtarlari.length===0),x(),xe("active",n.editMode),x(8),S("ngIf",n.currentEditingCevapAnahtari),x(5),S("disabled",n.submitting),x(2),he(" ",n.submitting?"G\xFCncelleniyor...":"G\xFCncelle"," "))},dependencies:[yt,lt,$r,Kn,Yn,rn,hc,$u,qn,fn,Gr,Dm,uS,dS,cS,Un,Wu],styles:['.groups-container[_ngcontent-%COMP%]{padding:2rem;background:#f8fafc;min-height:100vh;font-family:Inter,-apple-system,BlinkMacSystemFont,sans-serif}.page-header[_ngcontent-%COMP%]{background:#fffffff2;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border-radius:16px;padding:2rem;margin-bottom:2rem;box-shadow:0 20px 40px #0000001a;border:1px solid rgba(255,255,255,.2)}.header-content[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.header-content[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;background:linear-gradient(135deg,#667eea,#764ba2);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:.5rem;display:flex;align-items:center;justify-content:center}.header-content[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent}.header-content[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   .page-description[_ngcontent-%COMP%]{color:#64748b;font-size:1.1rem;margin:0}.header-content[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1.5rem}.header-content[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{background:#fff;padding:1.5rem;border-radius:16px;display:flex;align-items:center;gap:1rem;box-shadow:0 4px 12px #0000000d;border:1px solid rgba(0,0,0,.05);transition:all .3s ease}.header-content[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 24px #0000001a}.header-content[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:12px;display:flex;align-items:center;justify-content:center;color:#fff;font-size:1.5rem}.header-content[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon.bg-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2)}.header-content[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon.bg-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4facfe,#00f2fe)}.header-content[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon.bg-info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#43e97b,#38f9d7)}.header-content[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-number[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;color:#1e293b;display:block}.header-content[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:.875rem;color:#64748b;margin-top:.25rem}.search-section[_ngcontent-%COMP%]{margin-top:1.5rem}.search-section[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:1rem}.search-section[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]{position:relative;flex:1;max-width:400px}.search-section[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{position:absolute;left:1rem;top:50%;transform:translateY(-50%);color:#64748b;font-size:1.1rem;z-index:2}.search-section[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:100%;padding:.875rem 1rem .875rem 3rem;border:2px solid rgba(0,0,0,.1);border-radius:12px;font-size:1rem;background:#fff;transition:all .3s ease}.search-section[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.search-section[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.search-section[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .clear-search-btn[_ngcontent-%COMP%]{position:absolute;right:.75rem;top:50%;transform:translateY(-50%);background:none;border:none;color:#9ca3af;cursor:pointer;font-size:1.2rem;padding:.25rem;border-radius:4px;transition:all .2s ease}.search-section[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .clear-search-btn[_ngcontent-%COMP%]:hover{color:#ef4444;background:#ef44441a}.search-section[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .add-exam-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;padding:.875rem 1.5rem;border-radius:12px;font-weight:600;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;white-space:nowrap}.search-section[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .add-exam-btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #667eea4d}.alerts-container[_ngcontent-%COMP%]{margin-bottom:1.5rem}.alerts-container[_ngcontent-%COMP%]   .modern-alert[_ngcontent-%COMP%]{display:flex;align-items:center;padding:1rem 1.5rem;border-radius:12px;margin-bottom:1rem;box-shadow:0 4px 12px #0000000d;animation:_ngcontent-%COMP%_slideInDown .3s ease-out}.alerts-container[_ngcontent-%COMP%]   .modern-alert.success[_ngcontent-%COMP%]{background:#ecfdf5;border:1px solid #bbf7d0;color:#065f46}.alerts-container[_ngcontent-%COMP%]   .modern-alert.success[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{color:#10b981}.alerts-container[_ngcontent-%COMP%]   .modern-alert.error[_ngcontent-%COMP%]{background:#fef2f2;border:1px solid #fecaca;color:#991b1b}.alerts-container[_ngcontent-%COMP%]   .modern-alert.error[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{color:#ef4444}.alerts-container[_ngcontent-%COMP%]   .modern-alert[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{font-size:1.25rem;margin-right:.75rem}.alerts-container[_ngcontent-%COMP%]   .modern-alert[_ngcontent-%COMP%]   .alert-content[_ngcontent-%COMP%]{flex:1;font-weight:500}.alerts-container[_ngcontent-%COMP%]   .modern-alert[_ngcontent-%COMP%]   .alert-close[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:.25rem;border-radius:6px;opacity:.7;transition:opacity .2s}.alerts-container[_ngcontent-%COMP%]   .modern-alert[_ngcontent-%COMP%]   .alert-close[_ngcontent-%COMP%]:hover{opacity:1}.add-form-container[_ngcontent-%COMP%]{margin-bottom:2rem}.form-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;box-shadow:0 8px 32px #00000014;border:1px solid rgba(0,0,0,.05);overflow:hidden}.form-card[_ngcontent-%COMP%]   .form-header[_ngcontent-%COMP%]{background:#f8fafc;padding:1.5rem 2rem;border-bottom:1px solid #e2e8f0;display:flex;justify-content:space-between;align-items:center}.form-card[_ngcontent-%COMP%]   .form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#1e293b;margin:0;display:flex;align-items:center}.form-card[_ngcontent-%COMP%]   .form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#667eea}.form-card[_ngcontent-%COMP%]   .form-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.25rem;color:#64748b;cursor:pointer;width:32px;height:32px;border-radius:8px;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.form-card[_ngcontent-%COMP%]   .form-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#e2e8f0;color:#1e293b}.exam-form[_ngcontent-%COMP%]{padding:2.5rem}.exam-form[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:2rem;margin-bottom:2.5rem}.exam-form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]{display:flex;flex-direction:column}.exam-form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .field-label[_ngcontent-%COMP%]{font-weight:600;color:#1e293b;margin-bottom:.75rem;display:flex;align-items:center;font-size:1rem}.exam-form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .field-label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#667eea;font-size:1.1rem}.exam-form[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%], .exam-form[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]{padding:1rem 1.25rem;border:2px solid #e2e8f0;border-radius:12px;font-size:1rem;transition:all .3s ease;background:#fff;font-weight:500}.exam-form[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]:focus, .exam-form[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 4px #667eea26;transform:translateY(-1px)}.exam-form[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]::placeholder, .exam-form[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]::placeholder{color:#9ca3af;font-weight:400}.exam-form[_ngcontent-%COMP%]   .upload-area[_ngcontent-%COMP%]{border:2px dashed #e2e8f0;border-radius:12px;transition:all .2s ease;overflow:hidden}.exam-form[_ngcontent-%COMP%]   .upload-area[_ngcontent-%COMP%]:hover{border-color:#667eea;background:#667eea05}.exam-form[_ngcontent-%COMP%]   .upload-area.has-file[_ngcontent-%COMP%]{border-style:solid;border-color:#10b981}.exam-form[_ngcontent-%COMP%]   .upload-area[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]{display:none}.exam-form[_ngcontent-%COMP%]   .upload-area[_ngcontent-%COMP%]   .upload-label[_ngcontent-%COMP%]{display:block;cursor:pointer}.exam-form[_ngcontent-%COMP%]   .upload-area[_ngcontent-%COMP%]   .upload-label[_ngcontent-%COMP%]   .upload-content[_ngcontent-%COMP%]{padding:2rem;text-align:center;color:#64748b}.exam-form[_ngcontent-%COMP%]   .upload-area[_ngcontent-%COMP%]   .upload-label[_ngcontent-%COMP%]   .upload-content[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem;color:#667eea;margin-bottom:.5rem;display:block}.exam-form[_ngcontent-%COMP%]   .upload-area[_ngcontent-%COMP%]   .upload-label[_ngcontent-%COMP%]   .upload-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;font-size:1rem;font-weight:500;margin-bottom:.25rem}.exam-form[_ngcontent-%COMP%]   .upload-area[_ngcontent-%COMP%]   .upload-label[_ngcontent-%COMP%]   .upload-content[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#9ca3af}.exam-form[_ngcontent-%COMP%]   .upload-area[_ngcontent-%COMP%]   .upload-label[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]{position:relative}.exam-form[_ngcontent-%COMP%]   .upload-area[_ngcontent-%COMP%]   .upload-label[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-height:150px;object-fit:cover;display:block}.exam-form[_ngcontent-%COMP%]   .upload-area[_ngcontent-%COMP%]   .upload-label[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   .image-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#000000b3;display:flex;flex-direction:column;align-items:center;justify-content:center;color:#fff;opacity:0;transition:opacity .2s}.exam-form[_ngcontent-%COMP%]   .upload-area[_ngcontent-%COMP%]   .upload-label[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   .image-overlay[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:.25rem}.exam-form[_ngcontent-%COMP%]   .upload-area[_ngcontent-%COMP%]   .upload-label[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]:hover   .image-overlay[_ngcontent-%COMP%]{opacity:1}.exam-form[_ngcontent-%COMP%]   .answers-section[_ngcontent-%COMP%]{margin-top:2rem}.exam-form[_ngcontent-%COMP%]   .answers-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:#1e293b;margin-bottom:1rem;display:flex;align-items:center}.exam-form[_ngcontent-%COMP%]   .answers-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#667eea}.exam-form[_ngcontent-%COMP%]   .answers-grid[_ngcontent-%COMP%]{display:grid;gap:1rem;max-height:300px;overflow-y:auto;padding:1rem;background:#f8fafc;border-radius:12px}.exam-form[_ngcontent-%COMP%]   .answers-grid[_ngcontent-%COMP%]   .answer-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;background:#fff;padding:1rem;border-radius:8px;box-shadow:0 2px 4px #0000000d}.exam-form[_ngcontent-%COMP%]   .answers-grid[_ngcontent-%COMP%]   .answer-item[_ngcontent-%COMP%]   .question-number[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;background:#667eea;color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:600;flex-shrink:0;font-size:.9rem}.exam-form[_ngcontent-%COMP%]   .answers-grid[_ngcontent-%COMP%]   .answer-item[_ngcontent-%COMP%]   .answer-inputs[_ngcontent-%COMP%]{display:flex;gap:.75rem;flex:1}.exam-form[_ngcontent-%COMP%]   .answers-grid[_ngcontent-%COMP%]   .answer-item[_ngcontent-%COMP%]   .answer-inputs[_ngcontent-%COMP%]   .answer-input[_ngcontent-%COMP%]{width:60px;text-align:center;font-weight:600;text-transform:uppercase}.exam-form[_ngcontent-%COMP%]   .answers-grid[_ngcontent-%COMP%]   .answer-item[_ngcontent-%COMP%]   .answer-inputs[_ngcontent-%COMP%]   .topic-input[_ngcontent-%COMP%], .exam-form[_ngcontent-%COMP%]   .answers-grid[_ngcontent-%COMP%]   .answer-item[_ngcontent-%COMP%]   .answer-inputs[_ngcontent-%COMP%]   .video-input[_ngcontent-%COMP%]{flex:1}.exam-form[_ngcontent-%COMP%]   .answers-grid[_ngcontent-%COMP%]   .answer-item[_ngcontent-%COMP%]   .answer-inputs[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.5rem;border:1px solid #e2e8f0;border-radius:6px;font-size:.875rem}.exam-form[_ngcontent-%COMP%]   .answers-grid[_ngcontent-%COMP%]   .answer-item[_ngcontent-%COMP%]   .answer-inputs[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 2px #667eea1a}.exam-form[_ngcontent-%COMP%]   .checkbox-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.exam-form[_ngcontent-%COMP%]   .checkbox-wrapper[_ngcontent-%COMP%]   .checkbox-input[_ngcontent-%COMP%]{width:18px;height:18px;accent-color:#667eea;cursor:pointer}.exam-form[_ngcontent-%COMP%]   .checkbox-wrapper[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]{cursor:pointer;display:flex;align-items:center}.exam-form[_ngcontent-%COMP%]   .checkbox-wrapper[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]   .checkbox-text[_ngcontent-%COMP%]{font-weight:500;color:#374151}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;margin-top:2rem;padding-top:2rem;border-top:1px solid #e2e8f0}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:.75rem 1.5rem;border:none;border-radius:8px;font-weight:500;font-size:.875rem;cursor:pointer;transition:all .2s ease;text-decoration:none}.btn-primary[_ngcontent-%COMP%]{background:#667eea;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#5a67d8;transform:translateY(-1px);box-shadow:0 4px 12px #667eea4d}.btn-secondary[_ngcontent-%COMP%]{background:#f1f5f9;color:#64748b}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#e2e8f0}.btn-primary[_ngcontent-%COMP%]:disabled, .btn-secondary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none!important}.loading-container[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem}.loading-container[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:48px;height:48px;border:4px solid rgba(102,126,234,.2);border-top:4px solid #667eea;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 1rem}.loading-container[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;font-size:1.1rem;margin:0}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.error-container[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:4rem 2rem}.error-container[_ngcontent-%COMP%]   .error-card[_ngcontent-%COMP%]{background:#fff;padding:3rem 2rem;border-radius:16px;text-align:center;max-width:400px;box-shadow:0 8px 24px #0000001a}.error-container[_ngcontent-%COMP%]   .error-card[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{font-size:3rem;color:#ef4444;margin-bottom:1rem}.error-container[_ngcontent-%COMP%]   .error-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#1e293b;margin-bottom:1rem;font-weight:600}.error-container[_ngcontent-%COMP%]   .error-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;margin-bottom:2rem}.error-container[_ngcontent-%COMP%]   .error-card[_ngcontent-%COMP%]   .retry-button[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;padding:.75rem 1.5rem;border-radius:8px;font-weight:500;cursor:pointer;transition:all .3s ease}.error-container[_ngcontent-%COMP%]   .error-card[_ngcontent-%COMP%]   .retry-button[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #667eea4d}.exams-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}.exams-list[_ngcontent-%COMP%]   .exam-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;box-shadow:0 8px 32px #00000014;border:1px solid rgba(0,0,0,.05);overflow:hidden;transition:all .3s ease}.exams-list[_ngcontent-%COMP%]   .exam-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 16px 48px #0000001f}.exams-list[_ngcontent-%COMP%]   .exam-card[_ngcontent-%COMP%]   .exam-header[_ngcontent-%COMP%]{padding:2rem;color:#fff;display:flex;align-items:center;justify-content:space-between;position:relative;overflow:hidden}.exams-list[_ngcontent-%COMP%]   .exam-card[_ngcontent-%COMP%]   .exam-header[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:#ffffff1a;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);z-index:0}.exams-list[_ngcontent-%COMP%]   .exam-card[_ngcontent-%COMP%]   .exam-header[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{position:relative;z-index:1}.exams-list[_ngcontent-%COMP%]   .exam-card[_ngcontent-%COMP%]   .exam-header[_ngcontent-%COMP%]   .exam-header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5rem}.exams-list[_ngcontent-%COMP%]   .exam-card[_ngcontent-%COMP%]   .exam-header[_ngcontent-%COMP%]   .exam-header-left[_ngcontent-%COMP%]   .exam-icon[_ngcontent-%COMP%]{width:64px;height:64px;background:#fff3;border-radius:16px;display:flex;align-items:center;justify-content:center;font-size:2rem;color:#fff}.exams-list[_ngcontent-%COMP%]   .exam-card[_ngcontent-%COMP%]   .exam-header[_ngcontent-%COMP%]   .exam-header-left[_ngcontent-%COMP%]   .exam-info[_ngcontent-%COMP%]   .exam-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;margin:0 0 .5rem;color:#fff}.exams-list[_ngcontent-%COMP%]   .exam-card[_ngcontent-%COMP%]   .exam-header[_ngcontent-%COMP%]   .exam-header-left[_ngcontent-%COMP%]   .exam-info[_ngcontent-%COMP%]   .exam-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5rem;flex-wrap:wrap}.exams-list[_ngcontent-%COMP%]   .exam-card[_ngcontent-%COMP%]   .exam-header[_ngcontent-%COMP%]   .exam-header-left[_ngcontent-%COMP%]   .exam-info[_ngcontent-%COMP%]   .exam-meta[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff3;padding:.5rem 1rem;border-radius:20px;font-size:.875rem;font-weight:500;display:flex;align-items:center;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.exams-list[_ngcontent-%COMP%]   .exam-card[_ngcontent-%COMP%]   .exam-header[_ngcontent-%COMP%]   .exam-header-left[_ngcontent-%COMP%]   .exam-info[_ngcontent-%COMP%]   .exam-meta[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.25rem}.exams-list[_ngcontent-%COMP%]   .exam-card[_ngcontent-%COMP%]   .exam-header[_ngcontent-%COMP%]   .exam-header-actions[_ngcontent-%COMP%]{display:flex;gap:1rem}.exams-list[_ngcontent-%COMP%]   .exam-card[_ngcontent-%COMP%]   .exam-header[_ngcontent-%COMP%]   .exam-header-actions[_ngcontent-%COMP%]   .header-action-btn[_ngcontent-%COMP%]{background:#fff3;color:#fff;border:none;padding:1rem 1.5rem;border-radius:12px;font-weight:600;display:flex;align-items:center;gap:.5rem;cursor:pointer;transition:all .3s ease;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.exams-list[_ngcontent-%COMP%]   .exam-card[_ngcontent-%COMP%]   .exam-header[_ngcontent-%COMP%]   .exam-header-actions[_ngcontent-%COMP%]   .header-action-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:translateY(-2px)}.exams-list[_ngcontent-%COMP%]   .exam-card[_ngcontent-%COMP%]   .exam-header[_ngcontent-%COMP%]   .exam-header-actions[_ngcontent-%COMP%]   .header-action-btn.delete-btn[_ngcontent-%COMP%]:hover{background:#ef444433}.exams-list[_ngcontent-%COMP%]   .exam-card[_ngcontent-%COMP%]   .exam-header[_ngcontent-%COMP%]   .exam-header-actions[_ngcontent-%COMP%]   .header-action-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem}.exams-list[_ngcontent-%COMP%]   .exam-card[_ngcontent-%COMP%]   .exam-content[_ngcontent-%COMP%]{padding:2rem;display:block}.exams-list[_ngcontent-%COMP%]   .exam-card[_ngcontent-%COMP%]   .exam-content[_ngcontent-%COMP%]:after{content:"";display:table;clear:both}.exams-list[_ngcontent-%COMP%]   .exam-card[_ngcontent-%COMP%]   .exam-content[_ngcontent-%COMP%]   .exam-image[_ngcontent-%COMP%]   .exam-cover[_ngcontent-%COMP%]{width:200px;height:120px;object-fit:cover;border-radius:12px;box-shadow:0 4px 12px #0000001a;float:left;margin-right:1.5rem;margin-bottom:1rem}@keyframes _ngcontent-%COMP%_tooltipFadeIn{0%{opacity:0;transform:translate(-50%) translateY(-5px)}to{opacity:1;transform:translate(-50%) translateY(0)}}.exams-list[_ngcontent-%COMP%]   .exam-card[_ngcontent-%COMP%]   .exam-content[_ngcontent-%COMP%]   .answers-grid-preview[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.75rem;line-height:1.4}.exams-list[_ngcontent-%COMP%]   .exam-card[_ngcontent-%COMP%]   .exam-content[_ngcontent-%COMP%]   .answers-grid-preview[_ngcontent-%COMP%]   .answer-preview[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:.5rem .75rem;background:#f8fafc;border:1px solid #e2e8f0;border-radius:8px;font-size:.875rem;min-width:60px;transition:all .2s ease;position:relative;cursor:pointer}.exams-list[_ngcontent-%COMP%]   .exam-card[_ngcontent-%COMP%]   .exam-content[_ngcontent-%COMP%]   .answers-grid-preview[_ngcontent-%COMP%]   .answer-preview[_ngcontent-%COMP%]:hover{background:#e2e8f0;transform:translateY(-1px)}.exams-list[_ngcontent-%COMP%]   .exam-card[_ngcontent-%COMP%]   .exam-content[_ngcontent-%COMP%]   .answers-grid-preview[_ngcontent-%COMP%]   .answer-preview.has-tooltip[_ngcontent-%COMP%]:hover:after{content:attr(data-tooltip);position:absolute;bottom:-40px;left:50%;transform:translate(-50%);background:#1e293b;color:#fff;padding:.5rem .75rem;border-radius:6px;font-size:.75rem;white-space:nowrap;z-index:1000;box-shadow:0 4px 12px #00000026;animation:_ngcontent-%COMP%_tooltipFadeIn .2s ease-out}.exams-list[_ngcontent-%COMP%]   .exam-card[_ngcontent-%COMP%]   .exam-content[_ngcontent-%COMP%]   .answers-grid-preview[_ngcontent-%COMP%]   .answer-preview.has-tooltip[_ngcontent-%COMP%]:hover:before{content:"";position:absolute;bottom:-8px;left:50%;transform:translate(-50%);width:0;height:0;border-left:6px solid transparent;border-right:6px solid transparent;border-bottom:8px solid #1e293b;z-index:1001;animation:_ngcontent-%COMP%_tooltipFadeIn .2s ease-out}.exams-list[_ngcontent-%COMP%]   .exam-card[_ngcontent-%COMP%]   .exam-content[_ngcontent-%COMP%]   .answers-grid-preview[_ngcontent-%COMP%]   .answer-preview[_ngcontent-%COMP%]   .q-num[_ngcontent-%COMP%]{color:#64748b;margin-right:.5rem;font-weight:500;font-size:.8rem}.exams-list[_ngcontent-%COMP%]   .exam-card[_ngcontent-%COMP%]   .exam-content[_ngcontent-%COMP%]   .answers-grid-preview[_ngcontent-%COMP%]   .answer-preview[_ngcontent-%COMP%]   .q-answer[_ngcontent-%COMP%]{font-weight:700;color:#667eea;font-size:.9rem}.empty-state[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:400px}.empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]{text-align:center;max-width:400px;background:#fff;padding:3rem 2rem;border-radius:16px;box-shadow:0 8px 24px #00000014}.empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:4rem;color:#cbd5e1;margin-bottom:1.5rem}.empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#1e293b;margin-bottom:1rem;font-weight:600}.empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;margin-bottom:2rem;line-height:1.6}.empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   .empty-action-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;padding:.75rem 1.5rem;border-radius:8px;font-weight:500;cursor:pointer;transition:all .3s ease}.empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   .empty-action-btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #667eea4d}.edit-modal[_ngcontent-%COMP%]{display:none;position:fixed;top:0;left:0;width:100%;height:100%;z-index:9999;justify-content:center;align-items:center}.edit-modal.active[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.edit-modal[_ngcontent-%COMP%]   .modal-backdrop[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:#0009;-webkit-backdrop-filter:none;backdrop-filter:none;z-index:1}.edit-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{position:relative;background:#fff;border-radius:16px;box-shadow:0 20px 60px #0000004d;border:2px solid rgba(102,126,234,.1);width:95%;max-width:1200px;max-height:95vh;overflow:hidden;animation:_ngcontent-%COMP%_slideUp .3s ease-out;transform:scale(1)}.edit-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{padding:2rem 2.5rem;background:linear-gradient(135deg,#f8fafc,#e2e8f0);border-bottom:2px solid #e2e8f0;display:flex;justify-content:space-between;align-items:center}.edit-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#1e293b;margin:0;display:flex;align-items:center;text-shadow:0 1px 2px rgba(0,0,0,.05)}.edit-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#667eea;font-size:1.4rem}.edit-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .modal-close[_ngcontent-%COMP%]{width:40px;height:40px;border:none;background:#64748b1a;border-radius:12px;cursor:pointer;color:#64748b;transition:all .3s ease;display:flex;align-items:center;justify-content:center;font-size:1.4rem}.edit-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .modal-close[_ngcontent-%COMP%]:hover{background:#ef44441a;color:#ef4444;transform:scale(1.05)}.edit-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{overflow-y:auto;max-height:calc(95vh - 180px);background:#fff}.edit-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{padding:2rem 2.5rem;background:linear-gradient(135deg,#f8fafc,#e2e8f0);border-top:2px solid #e2e8f0;display:flex;justify-content:flex-end;gap:1.5rem}.edit-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%], .edit-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{padding:1rem 2rem;font-size:1rem;font-weight:600;border-radius:12px;text-transform:none;letter-spacing:.025em;box-shadow:0 4px 12px #0000001a}.edit-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover, .edit-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 20px #00000026}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(30px) scale(.95);opacity:0}to{transform:translateY(0) scale(1);opacity:1}}@keyframes _ngcontent-%COMP%_slideInDown{0%{transform:translateY(-20px);opacity:0}to{transform:translateY(0);opacity:1}}@media (max-width: 768px){.groups-container[_ngcontent-%COMP%]{padding:1rem}.page-header[_ngcontent-%COMP%]{padding:1.5rem}.header-content[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:2rem}.stats-row[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}.search-container[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.search-container[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]{max-width:none}.search-container[_ngcontent-%COMP%]   .add-exam-btn[_ngcontent-%COMP%]{justify-content:center}.exam-card[_ngcontent-%COMP%]   .exam-header[_ngcontent-%COMP%]{padding:1.5rem;flex-direction:column;gap:1.5rem;align-items:flex-start}.exam-card[_ngcontent-%COMP%]   .exam-header[_ngcontent-%COMP%]   .exam-header-left[_ngcontent-%COMP%]{width:100%}.exam-card[_ngcontent-%COMP%]   .exam-header[_ngcontent-%COMP%]   .exam-header-actions[_ngcontent-%COMP%]{width:100%;justify-content:flex-start}.exam-card[_ngcontent-%COMP%]   .exam-content[_ngcontent-%COMP%]{padding:1.5rem}.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}.form-actions[_ngcontent-%COMP%]{flex-direction:column}.form-actions[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%], .form-actions[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{width:100%;justify-content:center}.answers-grid[_ngcontent-%COMP%]   .answer-item[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:.75rem}.answers-grid[_ngcontent-%COMP%]   .answer-item[_ngcontent-%COMP%]   .answer-inputs[_ngcontent-%COMP%]{flex-direction:column}.answers-grid[_ngcontent-%COMP%]   .answer-item[_ngcontent-%COMP%]   .answer-inputs[_ngcontent-%COMP%]   .answer-input[_ngcontent-%COMP%]{width:100%;text-align:left}.modal-content[_ngcontent-%COMP%]{width:95%;max-height:95vh}.modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{padding:1rem 1.5rem}}@media (max-width: 480px){.page-header[_ngcontent-%COMP%]{padding:1rem}.header-content[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:1.75rem;flex-direction:column;gap:.5rem}.answers-grid-preview[_ngcontent-%COMP%]{gap:.5rem}.exam-content[_ngcontent-%COMP%]   .exam-image[_ngcontent-%COMP%]   .exam-cover[_ngcontent-%COMP%]{float:none;width:100%;max-width:200px;height:120px;margin:0 auto 1rem;display:block}.answers-grid-preview[_ngcontent-%COMP%]   .answer-preview.has-tooltip[_ngcontent-%COMP%]:hover:after{font-size:.7rem;padding:.4rem .6rem;bottom:-35px;max-width:150px;white-space:normal;text-align:center}.exam-header-actions[_ngcontent-%COMP%]{gap:.5rem}.exam-header-actions[_ngcontent-%COMP%]   .header-action-btn[_ngcontent-%COMP%]{padding:.75rem 1rem;font-size:.875rem}}.question-count[_ngcontent-%COMP%]{color:#ffffffe6;font-size:.875rem;display:flex;align-items:center}.aktiflik-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:.25rem .5rem;border-radius:12px;font-size:.75rem;font-weight:600;gap:.25rem}.aktiflik-badge.active[_ngcontent-%COMP%]{background-color:#22c55e33;color:#15803d;border:1px solid rgba(34,197,94,.3)}.aktiflik-badge.inactive[_ngcontent-%COMP%]{background-color:#ef444433;color:#dc2626;border:1px solid rgba(239,68,68,.3)}']})};var Upe=()=>[];function Hpe(i,e){i&1&&(u(0,"div",5)(1,"div",6)(2,"span",7),m(3,"Y\xFCkleniyor..."),f()(),u(4,"p",8),m(5,"Veriler y\xFCkleniyor..."),f()())}function Gpe(i,e){if(i&1){let t=Ae();u(0,"div",9),k(1,"i",10),m(2),u(3,"button",11),U("click",function(){K(t);let r=F();return Y(r.loadData())}),m(4," Tekrar Dene "),f()()}if(i&2){let t=F();x(2),he(" ",t.error," ")}}function $pe(i,e){if(i&1&&(u(0,"div",57),k(1,"div",58),f()),i&2){let t=F().$implicit,n=F(3);x(),It("width",t.toplam_gelir/n.getHighestMonthlyIncome()*100,"%")}}function Wpe(i,e){if(i&1&&(u(0,"div",48)(1,"div",49)(2,"div",50),m(3),f(),u(4,"div",51),m(5),f()(),u(6,"div",52),m(7),f(),u(8,"div",53)(9,"span",54),k(10,"i",55),m(11),f()(),ee(12,$pe,2,2,"div",56),f()),i&2){let t=e.$implicit,n=F(3);xe("current-month",n.isCurrentMonth(t.ay,t.yil)),x(3),W(t.ay_adi),x(2),W(t.yil),x(2),W(n.formatCurrency(t.toplam_gelir)),x(4),he(" ",t.odeme_sayisi," \xF6deme "),x(),S("ngIf",n.incomeOverview.son_12_ay_ortalama>0)}}function qpe(i,e){if(i&1&&(u(0,"div",27)(1,"div",28)(2,"h3"),k(3,"i",29),m(4," Ayl\u0131k Gelir Durumu"),f()(),u(5,"div",30),ee(6,Wpe,13,7,"div",31),f(),u(7,"div",32)(8,"div",33)(9,"div",34),k(10,"i",35),f(),u(11,"div",36)(12,"div",37),m(13),f(),u(14,"div",38),m(15,"Toplam Gelir"),f()()(),u(16,"div",33)(17,"div",39),k(18,"i",40),f(),u(19,"div",36)(20,"div",37),m(21),f(),u(22,"div",38),m(23,"Ayl\u0131k Ortalama"),f()()(),u(24,"div",33)(25,"div",41),k(26,"i",42),f(),u(27,"div",36)(28,"div",37),m(29),f(),u(30,"div",38),m(31,"En Y\xFCksek Ay"),f()()(),u(32,"div",33)(33,"div",43),k(34,"i",44),f(),u(35,"div",36)(36,"div",37),m(37),f(),u(38,"div",38),m(39,"Bu Ay"),f()()()(),u(40,"div",45)(41,"div",33)(42,"div",34),k(43,"i",46),f(),u(44,"div",36)(45,"div",37),m(46),f(),u(47,"div",38),m(48,"Beklenen Gelir"),f()()(),u(49,"div",33)(50,"div",39),k(51,"i",47),f(),u(52,"div",36)(53,"div",37),m(54),f(),u(55,"div",38),m(56,"Al\u0131nan Gelir"),f()()(),u(57,"div",33)(58,"div",41),k(59,"i",42),f(),u(60,"div",36)(61,"div",37),m(62),f(),u(63,"div",38),m(64,"Toplama Oran\u0131"),f()()(),u(65,"div",33)(66,"div",43),k(67,"i",44),f(),u(68,"div",36)(69,"div",37),m(70),f(),u(71,"div",38),m(72,"Bu Ay \xD6deme"),f()()()()()),i&2){let t=F(2);x(6),S("ngForOf",t.incomeOverview.aylik_gelirler),x(7),W(t.formatCurrency(t.incomeOverview.toplam_gelir)),x(8),W(t.formatCurrency(t.incomeOverview.son_12_ay_ortalama)),x(8),W(t.formatCurrency(t.getHighestMonthlyIncome())),x(8),W(t.getCurrentMonthIncome()),x(9),W(t.formatCurrency(t.summary.totalExpected)),x(8),W(t.formatCurrency(t.summary.totalReceived)),x(8),he("%",t.getCollectionRate().toFixed(1),""),x(8),W(t.payments.length)}}function Kpe(i,e){if(i&1){let t=Ae();u(0,"div",61)(1,"div",62)(2,"div",17)(3,"h6",63),m(4),f(),u(5,"p",64),m(6),f(),u(7,"span",65),m(8),f(),u(9,"button",66),U("click",function(){let r=K(t).$implicit,o=F(3);return Y(o.openPaymentForm(r))}),m(10," Ek \xD6deme "),f()()()()}if(i&2){let t=e.$implicit,n=F(3);x(4),W(t.adi_soyadi),x(2),W(t.email),x(2),W(n.formatCurrency(n.parseFloat(t.ucret||"0")))}}function Ype(i,e){if(i&1&&(u(0,"div",59),ee(1,Kpe,11,3,"div",60),f()),i&2){let t=F(2);x(),S("ngForOf",t.summary.studentsWhoPayThis)}}function Xpe(i,e){i&1&&(u(0,"div",67),k(1,"i",68),u(2,"p"),m(3,"Bu ay hen\xFCz \xF6deme yapan \xF6\u011Frenci yok."),f()())}function Qpe(i,e){if(i&1){let t=Ae();u(0,"div",61)(1,"div",69)(2,"div",17)(3,"h6",63),m(4),f(),u(5,"p",64),m(6),f(),u(7,"span",70),m(8),f(),u(9,"button",71),U("click",function(){let r=K(t).$implicit,o=F(3);return Y(o.openPaymentForm(r))}),m(10," \xD6deme Al "),f()()()()}if(i&2){let t=e.$implicit,n=F(3);x(4),W(t.adi_soyadi),x(2),W(t.email),x(2),W(n.formatCurrency(n.parseFloat(t.ucret||"0")))}}function Jpe(i,e){if(i&1&&(u(0,"div",59),ee(1,Qpe,11,3,"div",60),f()),i&2){let t=F(2);x(),S("ngForOf",t.summary.studentsWhoDidntPay)}}function Zpe(i,e){i&1&&(u(0,"div",72),k(1,"i",73),u(2,"p"),m(3,"T\xFCm \xF6\u011Frenciler bu ay \xF6demelerini yapm\u0131\u015F!"),f()())}function eme(i,e){if(i&1&&(u(0,"tr")(1,"td"),m(2),f(),u(3,"td"),m(4),f(),u(5,"td"),m(6),ha(7,"date"),f(),u(8,"td"),m(9),f()()),i&2){let t=e.$implicit,n=F(3);x(2),W(t.ogrenci_adi),x(2),W(n.formatCurrency(t.tutar)),x(2),W(ol(7,4,t.odeme_tarihi,"dd/MM/yyyy")),x(3),W(t.aciklama||"-")}}function tme(i,e){if(i&1&&(u(0,"div",74)(1,"table",75)(2,"thead")(3,"tr")(4,"th"),m(5,"\xD6\u011Frenci"),f(),u(6,"th"),m(7,"Tutar"),f(),u(8,"th"),m(9,"Tarih"),f(),u(10,"th"),m(11,"A\xE7\u0131klama"),f()()(),u(12,"tbody"),ee(13,eme,10,7,"tr",76),f()()()),i&2){let t=F(2);x(13),S("ngForOf",t.payments)}}function nme(i,e){i&1&&(u(0,"div",67),k(1,"i",77),u(2,"p"),m(3,"Bu ay hen\xFCz \xF6deme kayd\u0131 yok."),f()())}function ime(i,e){if(i&1){let t=Ae();u(0,"div"),ee(1,qpe,73,9,"div",12),u(2,"div",13)(3,"div",14)(4,"h5",15),k(5,"i",16),m(6),f()(),u(7,"div",17),ee(8,Ype,2,1,"div",18)(9,Xpe,4,0,"div",19),f()(),u(10,"div",13)(11,"div",14)(12,"h5",15),k(13,"i",20),m(14),f()(),u(15,"div",17),ee(16,Jpe,2,1,"div",18)(17,Zpe,4,0,"div",21),f()(),u(18,"div",13)(19,"div",14)(20,"h5",15),k(21,"i",22),m(22),f()(),u(23,"div",17),ee(24,tme,14,1,"div",23)(25,nme,4,0,"div",19),f()(),u(26,"div",24)(27,"button",25),U("click",function(){K(t);let r=F();return Y(r.openPaymentForm())}),k(28,"i",26),m(29," Yeni \xD6deme Kayd\u0131 "),f()()()}if(i&2){let t=F();x(),S("ngIf",t.incomeOverview&&t.incomeOverview.aylik_gelirler&&t.incomeOverview.aylik_gelirler.length>0),x(5),he(" Bu Ay \xD6deme Yapan \xD6\u011Frenciler (",t.summary.studentsWhoPayThis.length,") "),x(2),S("ngIf",t.summary.studentsWhoPayThis.length>0),x(),S("ngIf",t.summary.studentsWhoPayThis.length===0),x(5),he(" Bu Ay \xD6deme Yapmayan \xD6\u011Frenciler (",t.summary.studentsWhoDidntPay.length,") "),x(2),S("ngIf",t.summary.studentsWhoDidntPay.length>0),x(),S("ngIf",t.summary.studentsWhoDidntPay.length===0),x(5),he(" Bu Ay Yap\u0131lan \xD6demeler (",t.payments.length,") "),x(2),S("ngIf",t.payments.length>0),x(),S("ngIf",t.payments.length===0)}}function rme(i,e){if(i&1&&(u(0,"p"),m(1),f()),i&2){let t=F(2);x(),W(t.selectedStudent.adi_soyadi)}}function ome(i,e){if(i&1&&(u(0,"option",109),m(1),f()),i&2){let t=e.$implicit;S("value",t.id),x(),he(" ",t.adi_soyadi," ")}}function sme(i,e){if(i&1){let t=Ae();u(0,"div",90)(1,"label",91),k(2,"i",105),m(3," \xD6\u011Frenci Se\xE7in "),f(),u(4,"select",106),at("ngModelChange",function(r){K(t);let o=F(2);return dt(o.paymentForm.ogrenci_id,r)||(o.paymentForm.ogrenci_id=r),Y(r)}),u(5,"option",107),m(6,"\xD6\u011Frenci se\xE7in"),f(),ee(7,ome,2,2,"option",108),f()()}if(i&2){let t=F(2);x(4),st("ngModel",t.paymentForm.ogrenci_id),x(3),S("ngForOf",t.students||rl(2,Upe))}}function ame(i,e){if(i&1){let t=Ae();u(0,"div",78),U("click",function(){K(t);let r=F();return Y(r.closePaymentForm())}),u(1,"div",79),U("click",function(r){return K(t),Y(r.stopPropagation())}),u(2,"div",80)(3,"div",81)(4,"div",82),k(5,"i",83),f(),u(6,"div",84)(7,"h4"),m(8),f(),ee(9,rme,2,1,"p",3),f()(),u(10,"button",85),U("click",function(){K(t);let r=F();return Y(r.closePaymentForm())}),k(11,"i",86),f()(),u(12,"div",87)(13,"form",88),ee(14,sme,8,3,"div",89),u(15,"div",90)(16,"label",91),k(17,"i",92),m(18," Tutar (\u20BA) "),f(),u(19,"div",93)(20,"input",94),at("ngModelChange",function(r){K(t);let o=F();return dt(o.paymentForm.tutar,r)||(o.paymentForm.tutar=r),Y(r)}),f(),u(21,"span",95),m(22,"\u20BA"),f()()(),u(23,"div",90)(24,"label",91),k(25,"i",96),m(26," \xD6deme Tarihi "),f(),u(27,"input",97),at("ngModelChange",function(r){K(t);let o=F();return dt(o.paymentForm.odeme_tarihi,r)||(o.paymentForm.odeme_tarihi=r),Y(r)}),f()(),u(28,"div",90)(29,"label",91),k(30,"i",98),m(31," A\xE7\u0131klama (Opsiyonel) "),f(),u(32,"textarea",99),at("ngModelChange",function(r){K(t);let o=F();return dt(o.paymentForm.aciklama,r)||(o.paymentForm.aciklama=r),Y(r)}),f()()()(),u(33,"div",100)(34,"button",101),U("click",function(){K(t);let r=F();return Y(r.closePaymentForm())}),k(35,"i",102),m(36," \u0130ptal "),f(),u(37,"button",103),U("click",function(){K(t);let r=F();return Y(r.submitPayment())}),k(38,"i",104),m(39," \xD6demeyi Kaydet "),f()()()()}if(i&2){let t=F();x(8),W(t.selectedStudent?"\xD6deme Kaydet":"Yeni \xD6deme Kayd\u0131"),x(),S("ngIf",t.selectedStudent),x(5),S("ngIf",!t.selectedStudent),x(6),st("ngModel",t.paymentForm.tutar),x(7),st("ngModel",t.paymentForm.odeme_tarihi),x(5),st("ngModel",t.paymentForm.aciklama)}}var N5=class i{constructor(e,t){this.http=e;this.toastr=t}students=[];payments=[];summary={totalExpected:0,totalReceived:0,studentsWhoPayThis:[],studentsWhoDidntPay:[],currentMonth:new Date().getMonth()+1,currentYear:new Date().getFullYear()};incomeOverview={aylik_gelirler:[],toplam_gelir:0,son_12_ay_ortalama:0};showPaymentForm=!1;selectedStudent=null;isLoading=!0;error=null;paymentForm={ogrenci_id:0,tutar:0,odeme_tarihi:new Date().toISOString().split("T")[0],aciklama:"",ay:new Date().getMonth()+1,yil:new Date().getFullYear()};ngOnInit(){this.loadPaymentData(),this.loadIncomeOverview()}getAuthHeaders(){let e="",t=localStorage.getItem("user")||sessionStorage.getItem("user");return t&&(e=JSON.parse(t).token||""),new xt({Authorization:`Bearer ${e}`,"Content-Type":"application/json"})}loadPaymentData(){this.isLoading=!0;let e=this.getAuthHeaders();console.log("API \xE7a\u011Fr\u0131s\u0131 yap\u0131l\u0131yor..."),this.http.get("./server/api/ucret_yonetimi.php",{headers:e}).subscribe({next:t=>{console.log("API Response:",t),t&&t.success?(this.students=t.data.students||[],this.payments=t.data.payments||[],this.summary=t.data.summary||this.summary,console.log("Y\xFCklenen veriler:",{students:this.students.length,payments:this.payments.length,summary:this.summary})):(console.error("API ba\u015Far\u0131s\u0131z response:",t),this.error="Veri y\xFCklenemedi: "+(t?.message||"Bilinmeyen hata"),this.toastr.error(this.error)),this.isLoading=!1},error:t=>{console.error("API Error:",t),this.error="Ba\u011Flant\u0131 hatas\u0131: "+(t.message||"Bilinmeyen hata"),this.toastr.error(this.error),this.isLoading=!1}})}openPaymentForm(e){e?(this.selectedStudent=e,this.paymentForm.ogrenci_id=e.id,this.paymentForm.tutar=parseFloat(e.ucret||"0")):(this.selectedStudent=null,this.paymentForm.ogrenci_id=0,this.paymentForm.tutar=0),this.paymentForm.aciklama="",this.paymentForm.odeme_tarihi=new Date().toISOString().split("T")[0],this.paymentForm.ay=new Date().getMonth()+1,this.paymentForm.yil=new Date().getFullYear(),this.showPaymentForm=!0}closePaymentForm(){this.showPaymentForm=!1,this.selectedStudent=null}submitPayment(){if(!this.paymentForm.ogrenci_id||!this.paymentForm.tutar){this.toastr.error("\xD6\u011Frenci ve tutar alanlar\u0131 zorunludur.");return}let e=this.getAuthHeaders();this.http.post("./server/api/ucret_yonetimi.php",this.paymentForm,{headers:e}).subscribe({next:t=>{t&&t.success?(this.toastr.success("\xD6deme ba\u015Far\u0131yla kaydedildi!"),this.closePaymentForm(),this.loadPaymentData()):this.toastr.error("\xD6deme kaydedilemedi: "+(t?.message||"Bilinmeyen hata"))},error:t=>{console.error("\xD6deme kaydetme hatas\u0131:",t),this.toastr.error("Ba\u011Flant\u0131 hatas\u0131: "+(t.message||"Bilinmeyen hata"))}})}formatCurrency(e){return new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(e)}parseFloat(e){return parseFloat(e)}loadData(){this.error=null,this.loadPaymentData()}getCollectionRate(){return this.summary.totalExpected===0?0:this.summary.totalReceived/this.summary.totalExpected*100}loadIncomeOverview(){let e=this.getAuthHeaders(),t=localStorage.getItem("user")||sessionStorage.getItem("user"),n="";if(t)try{n=JSON.parse(t).adi_soyadi||""}catch(r){console.error("Kullan\u0131c\u0131 bilgileri al\u0131namad\u0131:",r);return}if(!n){console.error("\xD6\u011Fretmen ad\u0131 bulunamad\u0131");return}this.http.post("./server/api/aylik_gelir_ozeti.php",{ogretmen_adi:n},{headers:e}).subscribe({next:r=>{r&&r.success&&(this.incomeOverview=r.data)},error:r=>{console.error("Ayl\u0131k gelir \xF6zeti y\xFCklenirken hata:",r)}})}getHighestMonthlyIncome(){return this.incomeOverview.aylik_gelirler.length===0?0:Math.max(...this.incomeOverview.aylik_gelirler.map(e=>e.toplam_gelir))}isCurrentMonth(e,t){let n=new Date;return e===n.getMonth()+1&&t===n.getFullYear()}getCurrentMonthIncome(){let e=new Date,t=e.getMonth()+1,n=e.getFullYear(),r=this.incomeOverview.aylik_gelirler.find(o=>o.ay===t&&o.yil===n);return r?this.formatCurrency(r.toplam_gelir):this.formatCurrency(0)}calculateSummary(){let e=new Date().getMonth()+1,t=new Date().getFullYear();Array.isArray(this.payments)||(this.payments=[]),Array.isArray(this.students)||(this.students=[]),this.payments=this.payments.filter(r=>{if(!r||!r.odeme_tarihi)return!1;let o=new Date(r.odeme_tarihi);return o.getMonth()+1===e&&o.getFullYear()===t});let n=this.payments.map(r=>r.ogrenci_id);this.summary.studentsWhoPayThis=this.students.filter(r=>n.includes(r.id)),this.summary.studentsWhoDidntPay=this.students.filter(r=>!n.includes(r.id))}static \u0275fac=function(t){return new(t||i)(ke(gt),ke(Bs))};static \u0275cmp=Ke({type:i,selectors:[["app-ogretmen-ucret-sayfasi"]],standalone:!1,decls:5,vars:4,consts:[[1,"container-fluid","p-4"],["class","text-center py-5",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[4,"ngIf"],["class","modern-modal-overlay",3,"click",4,"ngIf"],[1,"text-center","py-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-2","text-muted"],[1,"alert","alert-danger"],[1,"bi","bi-exclamation-triangle"],[1,"btn","btn-sm","btn-outline-danger","ms-2",3,"click"],["class","monthly-income-header mb-4",4,"ngIf"],[1,"card","mb-4"],[1,"card-header"],[1,"mb-0"],[1,"bi","bi-check-circle","text-success"],[1,"card-body"],["class","row",4,"ngIf"],["class","text-center text-muted",4,"ngIf"],[1,"bi","bi-x-circle","text-danger"],["class","text-center text-success",4,"ngIf"],[1,"bi","bi-clock-history"],["class","table-responsive",4,"ngIf"],[1,"text-center"],[1,"btn","btn-primary","btn-lg",3,"click"],[1,"bi","bi-plus-circle"],[1,"monthly-income-header","mb-4"],[1,"income-header-title"],[1,"bi","bi-calendar-month"],[1,"monthly-income-cards"],["class","income-month-card",3,"current-month",4,"ngFor","ngForOf"],[1,"income-summary-stats"],[1,"summary-item"],[1,"summary-icon","bg-primary"],[1,"bi","bi-safe"],[1,"summary-content"],[1,"summary-value"],[1,"summary-label"],[1,"summary-icon","bg-info"],[1,"bi","bi-graph-up"],[1,"summary-icon","bg-success"],[1,"bi","bi-trophy"],[1,"summary-icon","bg-warning"],[1,"bi","bi-calendar-check"],[1,"income-summary-stats","mt-4"],[1,"bi","bi-cash-coin"],[1,"bi","bi-coin"],[1,"income-month-card"],[1,"month-header"],[1,"month-name"],[1,"month-year"],[1,"month-amount"],[1,"month-details"],[1,"payment-count"],[1,"bi","bi-credit-card"],["class","income-progress",4,"ngIf"],[1,"income-progress"],[1,"progress-bar"],[1,"row"],["class","col-md-6 col-lg-4 mb-3",4,"ngFor","ngForOf"],[1,"col-md-6","col-lg-4","mb-3"],[1,"card","border-success"],[1,"card-title"],[1,"card-text","small","text-muted"],[1,"badge","bg-success"],[1,"btn","btn-sm","btn-outline-primary","ms-2",3,"click"],[1,"text-center","text-muted"],[1,"bi","bi-inbox","fs-1"],[1,"card","border-danger"],[1,"badge","bg-warning"],[1,"btn","btn-sm","btn-success","ms-2",3,"click"],[1,"text-center","text-success"],[1,"bi","bi-check-circle","fs-1"],[1,"table-responsive"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],[1,"bi","bi-receipt","fs-1"],[1,"modern-modal-overlay",3,"click"],[1,"modern-modal-content",3,"click"],[1,"modern-modal-header"],[1,"modal-title-section"],[1,"modal-icon"],[1,"bi","bi-credit-card-2-front"],[1,"modal-title-text"],["type","button",1,"modern-close-btn",3,"click"],[1,"bi","bi-x"],[1,"modern-modal-body"],[1,"modern-form"],["class","form-group",4,"ngIf"],[1,"form-group"],[1,"modern-label"],[1,"bi","bi-currency-exchange"],[1,"input-with-icon"],["type","number","name","tutar","step","0.01","placeholder","0.00",1,"modern-input",3,"ngModelChange","ngModel"],[1,"input-icon"],[1,"bi","bi-calendar-event"],["type","date","name","odeme_tarihi",1,"modern-input",3,"ngModelChange","ngModel"],[1,"bi","bi-journal-text"],["name","aciklama","rows","3","placeholder","\xD6deme ile ilgili not ekleyebilirsiniz...",1,"modern-textarea",3,"ngModelChange","ngModel"],[1,"modern-modal-footer"],["type","button",1,"modern-btn","modern-btn-secondary",3,"click"],[1,"bi","bi-x-circle"],["type","button",1,"modern-btn","modern-btn-primary",3,"click"],[1,"bi","bi-check-circle"],[1,"bi","bi-person-fill"],["name","ogrenci_id",1,"modern-select",3,"ngModelChange","ngModel"],["value","0"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,n){t&1&&(u(0,"div",0),ee(1,Hpe,6,0,"div",1)(2,Gpe,5,1,"div",2)(3,ime,30,10,"div",3)(4,ame,40,6,"div",4),f()),t&2&&(x(),S("ngIf",n.isLoading),x(),S("ngIf",n.error&&!n.isLoading),x(),S("ngIf",!n.isLoading&&!n.error),x(),S("ngIf",n.showPaymentForm))},dependencies:[yt,lt,$r,Kn,Yn,rn,hc,qn,fn,Gr,Un,Wu,cc],styles:['@charset "UTF-8";.ucret-sayfasi-container[_ngcontent-%COMP%]{padding:20px;max-width:1400px;margin:0 auto}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px}.page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#2c3e50}.page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:10px;color:#27ae60}.loading-container[_ngcontent-%COMP%]{text-align:center;padding:50px}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:15px;color:#6c757d}.summary-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:20px;margin-bottom:30px}.summary-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:25px;box-shadow:0 2px 10px #0000001a;display:flex;align-items:center;border-left:4px solid;transition:transform .2s ease}.summary-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.summary-card.expected[_ngcontent-%COMP%]{border-left-color:#3498db}.summary-card.expected[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{background:#3498db1a;color:#3498db}.summary-card.received[_ngcontent-%COMP%]{border-left-color:#27ae60}.summary-card.received[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{background:#27ae601a;color:#27ae60}.summary-card.yearly[_ngcontent-%COMP%]{border-left-color:#9b59b6}.summary-card.yearly[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{background:#9b59b61a;color:#9b59b6}.summary-card.rate[_ngcontent-%COMP%]{border-left-color:#f39c12}.summary-card.rate[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{background:#f39c121a;color:#f39c12}.card-icon[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;display:flex;align-items:center;justify-content:center;margin-right:20px}.card-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:24px}.card-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 5px;font-size:14px;color:#7f8c8d;text-transform:uppercase;font-weight:600}.card-content[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{margin:0 0 5px;font-size:24px;font-weight:700;color:#2c3e50}.card-content[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:12px;color:#95a5a6}.progress-section[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:25px;margin-bottom:30px;box-shadow:0 2px 10px #0000001a}.progress-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}.progress-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{font-weight:600;color:#2c3e50}.progress-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{font-weight:700;color:#27ae60}.progress[_ngcontent-%COMP%]{height:12px;background-color:#ecf0f1;border-radius:6px;overflow:hidden}.progress-bar[_ngcontent-%COMP%]{height:100%;transition:width .6s ease}.students-section[_ngcontent-%COMP%]{margin-bottom:40px}.students-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:20px;color:#2c3e50;border-bottom:2px solid #ecf0f1;padding-bottom:10px}.students-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:10px}.students-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:15px}.student-card[_ngcontent-%COMP%]{background:#fff;border-radius:10px;padding:20px;box-shadow:0 2px 8px #0000001a;display:flex;justify-content:space-between;align-items:center;border-left:4px solid}.student-card.paid[_ngcontent-%COMP%]{border-left-color:#27ae60}.student-card.unpaid[_ngcontent-%COMP%]{border-left-color:#e74c3c}.student-info[_ngcontent-%COMP%]{display:flex;align-items:center;flex:1}.student-avatar[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;background:#ecf0f1;display:flex;align-items:center;justify-content:center;margin-right:15px}.student-avatar[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:24px;color:#7f8c8d}.student-details[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 5px;font-size:16px;color:#2c3e50}.student-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 5px;font-size:14px;color:#7f8c8d}.group-badge[_ngcontent-%COMP%]{background:#3498db;color:#fff;padding:2px 8px;border-radius:12px;font-size:12px;font-weight:500}.payment-info[_ngcontent-%COMP%]{text-align:right}.payment-info[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{display:block;font-size:18px;font-weight:700;color:#27ae60;margin-bottom:10px}.payment-info[_ngcontent-%COMP%]   .amount.pending[_ngcontent-%COMP%]{color:#e74c3c}.payments-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:20px;color:#2c3e50;border-bottom:2px solid #ecf0f1;padding-bottom:10px}.payments-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:10px}.payments-table[_ngcontent-%COMP%]{background:#fff;border-radius:10px;overflow:hidden;box-shadow:0 2px 8px #0000001a}.payment-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr 1fr 1.5fr;padding:15px 20px;border-bottom:1px solid #ecf0f1}.payment-row.header[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;color:#2c3e50}.payment-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.payment-row[_ngcontent-%COMP%]   .student-name[_ngcontent-%COMP%]{font-weight:500;color:#2c3e50}.payment-row[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-weight:700;color:#27ae60}.payment-row[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%], .payment-row[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#7f8c8d;font-size:14px}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:50px;color:#7f8c8d}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:48px;margin-bottom:15px;display:block}.empty-state.success[_ngcontent-%COMP%]{color:#27ae60}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;width:90%;max-width:500px;max-height:90vh;overflow-y:auto;box-shadow:0 10px 30px #0000004d}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 25px;border-bottom:1px solid #ecf0f1}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#2c3e50}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:10px;color:#27ae60}.modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{background:none;border:none;font-size:20px;color:#7f8c8d;cursor:pointer;padding:5px}.modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{color:#e74c3c}.modal-body[_ngcontent-%COMP%]{padding:25px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:600;color:#2c3e50}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%;padding:12px;border:2px solid #ecf0f1;border-radius:8px;font-size:14px;transition:border-color .3s ease}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#3498db;outline:none}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:15px}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;margin-top:30px;padding-top:20px;border-top:1px solid #ecf0f1}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:6px;font-weight:600;cursor:pointer;transition:all .3s ease}.btn.btn-primary[_ngcontent-%COMP%]{background:#3498db;color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover{background:#2980b9}.btn.btn-success[_ngcontent-%COMP%]{background:#27ae60;color:#fff}.btn.btn-success[_ngcontent-%COMP%]:hover{background:#219a52}.btn.btn-secondary[_ngcontent-%COMP%]{background:#95a5a6;color:#fff}.btn.btn-secondary[_ngcontent-%COMP%]:hover{background:#7f8c8d}.btn.btn-sm[_ngcontent-%COMP%]{padding:6px 12px;font-size:12px}.btn.btn-outline-primary[_ngcontent-%COMP%]{background:transparent;color:#3498db;border:1px solid #3498db}.btn.btn-outline-primary[_ngcontent-%COMP%]:hover{background:#3498db;color:#fff}.btn.btn-outline-danger[_ngcontent-%COMP%]{background:transparent;color:#e74c3c;border:1px solid #e74c3c}.btn.btn-outline-danger[_ngcontent-%COMP%]:hover{background:#e74c3c;color:#fff}@media (max-width: 768px){.ucret-sayfasi-container[_ngcontent-%COMP%]{padding:15px}.page-header[_ngcontent-%COMP%]{flex-direction:column;gap:15px;text-align:center}.summary-grid[_ngcontent-%COMP%], .students-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.student-card[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:15px}.payment-row[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:5px}.payment-row.header[_ngcontent-%COMP%]{display:none}.payment-row[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:before{content:attr(data-label) ": ";font-weight:700;color:#2c3e50}.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}.modal-content[_ngcontent-%COMP%]{width:95%;margin:20px}}.monthly-income-chart[_ngcontent-%COMP%]   .income-month-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8fafc,#e2e8f0);border:1px solid #e2e8f0;border-radius:12px;padding:1rem;text-align:center;transition:all .3s ease}.monthly-income-chart[_ngcontent-%COMP%]   .income-month-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a;border-color:#3b82f6}.monthly-income-chart[_ngcontent-%COMP%]   .income-month-card[_ngcontent-%COMP%]   .month-name[_ngcontent-%COMP%]{font-size:.75rem;color:#64748b;font-weight:600;margin-bottom:.5rem}.monthly-income-chart[_ngcontent-%COMP%]   .income-month-card[_ngcontent-%COMP%]   .month-amount[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;color:#1e293b;margin-bottom:.25rem}.monthly-income-chart[_ngcontent-%COMP%]   .income-month-card[_ngcontent-%COMP%]   .month-payments[_ngcontent-%COMP%]{font-size:.7rem;color:#94a3b8}.modern-modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#0f172acc;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);display:flex;align-items:center;justify-content:center;z-index:1050;animation:_ngcontent-%COMP%_modalFadeIn .3s ease}.modern-modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:20px;width:90%;max-width:500px;max-height:90vh;overflow:hidden;box-shadow:0 25px 50px #00000040;animation:_ngcontent-%COMP%_modalSlideUp .3s ease}.modern-modal-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#1d4ed8);color:#fff;padding:2rem;display:flex;align-items:center;justify-content:space-between}.modern-modal-header[_ngcontent-%COMP%]   .modal-title-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.modern-modal-header[_ngcontent-%COMP%]   .modal-title-section[_ngcontent-%COMP%]   .modal-icon[_ngcontent-%COMP%]{width:48px;height:48px;background:#fff3;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:1.5rem}.modern-modal-header[_ngcontent-%COMP%]   .modal-title-section[_ngcontent-%COMP%]   .modal-title-text[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:700}.modern-modal-header[_ngcontent-%COMP%]   .modal-title-section[_ngcontent-%COMP%]   .modal-title-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.25rem 0 0;opacity:.9;font-size:.9rem}.modern-modal-header[_ngcontent-%COMP%]   .modern-close-btn[_ngcontent-%COMP%]{width:40px;height:40px;background:#fff3;border:none;border-radius:10px;color:#fff;font-size:1.5rem;cursor:pointer;transition:all .2s ease}.modern-modal-header[_ngcontent-%COMP%]   .modern-close-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:scale(1.05)}.modern-modal-body[_ngcontent-%COMP%]{padding:2rem;max-height:400px;overflow-y:auto}.modern-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.modern-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]:last-child{margin-bottom:0}.modern-form[_ngcontent-%COMP%]   .modern-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-weight:600;color:#374151;margin-bottom:.75rem;font-size:.9rem}.modern-form[_ngcontent-%COMP%]   .modern-label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#3b82f6}.modern-form[_ngcontent-%COMP%]   .modern-input[_ngcontent-%COMP%], .modern-form[_ngcontent-%COMP%]   .modern-select[_ngcontent-%COMP%], .modern-form[_ngcontent-%COMP%]   .modern-textarea[_ngcontent-%COMP%]{width:100%;padding:.875rem 1rem;border:2px solid #e5e7eb;border-radius:12px;font-size:1rem;transition:all .3s ease;background:#f9fafb}.modern-form[_ngcontent-%COMP%]   .modern-input[_ngcontent-%COMP%]:focus, .modern-form[_ngcontent-%COMP%]   .modern-select[_ngcontent-%COMP%]:focus, .modern-form[_ngcontent-%COMP%]   .modern-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;background:#fff;box-shadow:0 0 0 3px #3b82f61a}.modern-form[_ngcontent-%COMP%]   .modern-input[_ngcontent-%COMP%]::placeholder, .modern-form[_ngcontent-%COMP%]   .modern-select[_ngcontent-%COMP%]::placeholder, .modern-form[_ngcontent-%COMP%]   .modern-textarea[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.modern-form[_ngcontent-%COMP%]   .input-with-icon[_ngcontent-%COMP%]{position:relative}.modern-form[_ngcontent-%COMP%]   .input-with-icon[_ngcontent-%COMP%]   .modern-input[_ngcontent-%COMP%]{padding-right:3rem}.modern-form[_ngcontent-%COMP%]   .input-with-icon[_ngcontent-%COMP%]   .input-icon[_ngcontent-%COMP%]{position:absolute;right:1rem;top:50%;transform:translateY(-50%);color:#6b7280;font-weight:600}.modern-form[_ngcontent-%COMP%]   .modern-textarea[_ngcontent-%COMP%]{resize:vertical;min-height:100px}.modern-modal-footer[_ngcontent-%COMP%]{padding:1.5rem 2rem;background:#f9fafb;display:flex;gap:1rem;justify-content:flex-end;border-top:1px solid #e5e7eb}.modern-btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:none;border-radius:10px;font-weight:600;font-size:.9rem;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;gap:.5rem}.modern-btn.modern-btn-secondary[_ngcontent-%COMP%]{background:#f3f4f6;color:#6b7280}.modern-btn.modern-btn-secondary[_ngcontent-%COMP%]:hover{background:#e5e7eb;color:#374151}.modern-btn.modern-btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#1d4ed8);color:#fff}.modern-btn.modern-btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #3b82f666}@keyframes _ngcontent-%COMP%_modalFadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_modalSlideUp{0%{opacity:0;transform:translateY(20px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}@media (max-width: 768px){.modern-modal-content[_ngcontent-%COMP%]{width:95%;margin:1rem}.modern-modal-header[_ngcontent-%COMP%]{padding:1.5rem}.modern-modal-header[_ngcontent-%COMP%]   .modal-title-section[_ngcontent-%COMP%]   .modal-icon[_ngcontent-%COMP%]{width:40px;height:40px;font-size:1.25rem}.modern-modal-header[_ngcontent-%COMP%]   .modal-title-section[_ngcontent-%COMP%]   .modal-title-text[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.25rem}.modern-modal-body[_ngcontent-%COMP%]{padding:1.5rem}.modern-modal-footer[_ngcontent-%COMP%]{padding:1rem 1.5rem;flex-direction:column}.modern-btn[_ngcontent-%COMP%]{justify-content:center}.monthly-income-chart[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-6[_ngcontent-%COMP%]{flex:0 0 50%;max-width:50%}}.monthly-income-header[_ngcontent-%COMP%]{background:#fff;border:1px solid #e2e8f0;border-radius:8px;padding:1.5rem;margin-bottom:1.5rem;box-shadow:0 1px 3px #0000001a}.monthly-income-header[_ngcontent-%COMP%]   .income-header-title[_ngcontent-%COMP%]{margin-bottom:1.5rem}.monthly-income-header[_ngcontent-%COMP%]   .income-header-title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;margin-bottom:.5rem;color:#1e293b;display:flex;align-items:center}.monthly-income-header[_ngcontent-%COMP%]   .income-header-title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#059669;margin-right:.5rem}.monthly-income-header[_ngcontent-%COMP%]   .income-header-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;margin:0}.monthly-income-header[_ngcontent-%COMP%]   .monthly-income-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem}.monthly-income-header[_ngcontent-%COMP%]   .monthly-income-cards[_ngcontent-%COMP%]   .income-month-card[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:8px;padding:1rem;transition:all .3s ease}.monthly-income-header[_ngcontent-%COMP%]   .monthly-income-cards[_ngcontent-%COMP%]   .income-month-card[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #0000001a;border-color:#cbd5e1}.monthly-income-header[_ngcontent-%COMP%]   .monthly-income-cards[_ngcontent-%COMP%]   .income-month-card.current-month[_ngcontent-%COMP%]{border:2px solid #059669;background:#f0fdf4}.monthly-income-header[_ngcontent-%COMP%]   .monthly-income-cards[_ngcontent-%COMP%]   .income-month-card[_ngcontent-%COMP%]   .month-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.75rem}.monthly-income-header[_ngcontent-%COMP%]   .monthly-income-cards[_ngcontent-%COMP%]   .income-month-card[_ngcontent-%COMP%]   .month-header[_ngcontent-%COMP%]   .month-name[_ngcontent-%COMP%]{font-weight:600;font-size:1rem;color:#1e293b}.monthly-income-header[_ngcontent-%COMP%]   .monthly-income-cards[_ngcontent-%COMP%]   .income-month-card[_ngcontent-%COMP%]   .month-header[_ngcontent-%COMP%]   .month-year[_ngcontent-%COMP%]{font-size:.875rem;color:#64748b}.monthly-income-header[_ngcontent-%COMP%]   .monthly-income-cards[_ngcontent-%COMP%]   .income-month-card[_ngcontent-%COMP%]   .month-amount[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:700;color:#059669;margin-bottom:.5rem}.monthly-income-header[_ngcontent-%COMP%]   .monthly-income-cards[_ngcontent-%COMP%]   .income-month-card[_ngcontent-%COMP%]   .month-details[_ngcontent-%COMP%]   .payment-count[_ngcontent-%COMP%]{font-size:.8rem;color:#64748b;display:flex;align-items:center;gap:.25rem}.monthly-income-header[_ngcontent-%COMP%]   .monthly-income-cards[_ngcontent-%COMP%]   .income-month-card[_ngcontent-%COMP%]   .income-progress[_ngcontent-%COMP%]{margin-top:.75rem;height:4px;background:#e2e8f0;border-radius:2px;overflow:hidden}.monthly-income-header[_ngcontent-%COMP%]   .monthly-income-cards[_ngcontent-%COMP%]   .income-month-card[_ngcontent-%COMP%]   .income-progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{height:100%;background:#059669;transition:width .3s ease}.monthly-income-header[_ngcontent-%COMP%]{background:#fff;border:1px solid #e2e8f0;padding:1.5rem;border-radius:8px;margin-bottom:1.5rem;box-shadow:0 1px 3px #0000001a}.monthly-income-header[_ngcontent-%COMP%]   .income-header-title[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.monthly-income-header[_ngcontent-%COMP%]   .income-header-title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin-bottom:10px;text-shadow:0 2px 4px rgba(0,0,0,.3)}.monthly-income-header[_ngcontent-%COMP%]   .income-header-title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:15px;color:#ff7b00}.monthly-income-header[_ngcontent-%COMP%]   .income-header-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;opacity:.9;margin:0}.monthly-income-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-bottom:30px}@media (max-width: 768px){.monthly-income-cards[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:15px}}@media (max-width: 480px){.monthly-income-cards[_ngcontent-%COMP%]{grid-template-columns:1fr}}.income-month-card[_ngcontent-%COMP%]{background:#ffffff59;box-shadow:0 2px 10px #0000001a;border-radius:15px;padding:20px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);transition:all .3s ease;position:relative;overflow:hidden}.income-month-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);background:#ffffff40;box-shadow:0 10px 30px #0003}.income-month-card.current-month[_ngcontent-%COMP%]{background:#ff66005b;border:2px solid #ff6600;box-shadow:0 0 10px #ff660041}.income-month-card.current-month[_ngcontent-%COMP%]:before{content:"Bu Ay";position:absolute;top:-5px;right:-15px;background:#ffd7 \\437\\43e\\43b\\43e\\442\\43e\\439;color:#333;padding:5px 20px;font-size:.8rem;font-weight:700;border-radius:0 0 10px 10px;transform:rotate(15deg)}.income-month-card[_ngcontent-%COMP%]   .month-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}.income-month-card[_ngcontent-%COMP%]   .month-header[_ngcontent-%COMP%]   .month-name[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700;text-shadow:0 1px 2px rgba(0,0,0,.3)}.income-month-card[_ngcontent-%COMP%]   .month-header[_ngcontent-%COMP%]   .month-year[_ngcontent-%COMP%]{font-size:.9rem;opacity:.8;background:#fff3;padding:4px 8px;border-radius:10px}.income-month-card[_ngcontent-%COMP%]   .month-amount[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:800;margin-bottom:10px;text-shadow:0 2px 4px rgba(0,0,0,.3);color:#000}.income-month-card[_ngcontent-%COMP%]   .month-details[_ngcontent-%COMP%]{font-size:.9rem;opacity:.9;margin-bottom:15px}.income-month-card[_ngcontent-%COMP%]   .month-details[_ngcontent-%COMP%]   .payment-count[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}.income-month-card[_ngcontent-%COMP%]   .month-details[_ngcontent-%COMP%]   .payment-count[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#676767;font-size:18px}.income-month-card[_ngcontent-%COMP%]   .income-progress[_ngcontent-%COMP%]{height:4px;background:#fff3;border-radius:2px;overflow:hidden}.income-month-card[_ngcontent-%COMP%]   .income-progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,silver,#d7d7d7);border-radius:2px;transition:width .8s ease}.income-summary-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px}@media (max-width: 768px){.income-summary-stats[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:15px}}@media (max-width: 480px){.income-summary-stats[_ngcontent-%COMP%]{grid-template-columns:1fr}}.summary-item[_ngcontent-%COMP%]{display:flex;align-items:center;background:#ffffffe6;border-radius:12px;padding:15px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.15);box-shadow:0 2px 10px #0003}.summary-item[_ngcontent-%COMP%]   .summary-icon[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:12px;display:flex;align-items:center;justify-content:center;margin-right:15px;font-size:1.3rem;color:#fff}.summary-item[_ngcontent-%COMP%]   .summary-icon.bg-primary[_ngcontent-%COMP%]{background:linear-gradient(45deg,#007bff,#0056b3)}.summary-item[_ngcontent-%COMP%]   .summary-icon.bg-info[_ngcontent-%COMP%]{background:linear-gradient(45deg,#17a2b8,#138496)}.summary-item[_ngcontent-%COMP%]   .summary-icon.bg-success[_ngcontent-%COMP%]{background:linear-gradient(45deg,#28a745,#1e7e34)}.summary-item[_ngcontent-%COMP%]   .summary-icon.bg-warning[_ngcontent-%COMP%]{background:linear-gradient(45deg,#ffc107,#d39e00)}.summary-item[_ngcontent-%COMP%]   .summary-content[_ngcontent-%COMP%]{flex:1}.summary-item[_ngcontent-%COMP%]   .summary-content[_ngcontent-%COMP%]   .summary-value[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:700;margin-bottom:2px;text-shadow:0 1px 2px rgba(0,0,0,.3)}.summary-item[_ngcontent-%COMP%]   .summary-content[_ngcontent-%COMP%]   .summary-label[_ngcontent-%COMP%]{font-size:.9rem;opacity:.8}.income-summary-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem;margin-top:1.5rem}.income-summary-stats[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:8px;padding:1.25rem;transition:all .3s ease;display:flex;align-items:center;gap:1rem}.income-summary-stats[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #0000001a;border-color:#cbd5e1}.income-summary-stats[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .summary-icon[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:8px;display:flex;align-items:center;justify-content:center;color:#fff;font-size:18px;flex-shrink:0}.income-summary-stats[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .summary-icon.bg-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6366f1,#4f46e5)}.income-summary-stats[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .summary-icon.bg-info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#2563eb)}.income-summary-stats[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .summary-icon.bg-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669)}.income-summary-stats[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .summary-icon.bg-warning[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#d97706)}.income-summary-stats[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .summary-content[_ngcontent-%COMP%]   .summary-value[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#1e293b;margin-bottom:.25rem}.income-summary-stats[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .summary-content[_ngcontent-%COMP%]   .summary-label[_ngcontent-%COMP%]{font-size:.875rem;color:#64748b;margin:0}']})};function lme(i,e){i&1&&(u(0,"div",12)(1,"div",13)(2,"span",14),m(3,"Y\xFCkleniyor..."),f()(),u(4,"p",15),m(5,"Veriler y\xFCkleniyor..."),f()())}function cme(i,e){if(i&1){let t=Ae();u(0,"div",16),k(1,"i",17),m(2),u(3,"button",18),U("click",function(){K(t);let r=F();return Y(r.loadKonular())}),m(4," Tekrar Dene "),f()()}if(i&2){let t=F();x(2),he(" ",t.error," ")}}function dme(i,e){if(i&1&&(u(0,"div",44),k(1,"i",45),u(2,"span"),m(3),f()()),i&2){let t=e.$implicit;x(3),W(t.konu_adi||t.konu_baslik||t.konu_ismi||t.baslik||"Konu ad\u0131 bulunamad\u0131")}}function ume(i,e){if(i&1&&(u(0,"div",40)(1,"h6"),m(2,"Son \u0130\u015Flenen: "),u(3,"small",41),m(4),f()(),u(5,"div",42),ee(6,dme,4,1,"div",43),f()()),i&2){let t=F().$implicit,n=F(2);x(4),he("(",n.getGroupClassLevels(t.name),")"),x(2),S("ngForOf",n.getIslenenKonularByGrup(t.name).slice(0,2))}}function hme(i,e){if(i&1){let t=Ae();u(0,"div",25),U("click",function(){let r=K(t).$implicit,o=F(2);return Y(o.selectGroup(r.name))}),u(1,"div",26)(2,"div",27),k(3,"i",28),m(4),f(),u(5,"div",29)(6,"span",30),m(7),f()()(),u(8,"div",31)(9,"div",32)(10,"div",33)(11,"span",34),m(12),f(),u(13,"span",35),m(14),f()(),u(15,"div",36)(16,"div",37),k(17,"div",38),f()()(),ee(18,ume,7,2,"div",39),f()()}if(i&2){let t=e.$implicit,n=F(2);xe("selected",n.selectedGrup===t.name),x(),It("background-color",t.color),x(3),he(" ",t.name," "),x(3),he("",t.students.length," \xF6\u011Frenci"),x(5),hn(" ",n.getToplamIslenenKonu(t.name)," / ",n.getToplamKonuSayisiByGroup(t.name)," konu i\u015Flendi "),x(2),he(" ",n.Math.round(n.getToplamIslenenKonu(t.name)/n.getToplamKonuSayisiByGroup(t.name)*100)||0,"% "),x(3),It("width",n.getToplamIslenenKonu(t.name)/n.getToplamKonuSayisiByGroup(t.name)*100,"%"),x(),S("ngIf",n.getIslenenKonularByGrup(t.name).length>0)}}function fme(i,e){i&1&&(u(0,"div",52),k(1,"i",53),u(2,"p",41),m(3,"Hen\xFCz konu eklenmemi\u015F."),f(),u(4,"p",54),m(5,'Konular\u0131 "Konu \u0130\u015Flemleri" sayfas\u0131ndan ekleyebilirsiniz.'),f()())}function gme(i,e){if(i&1&&(u(0,"div",78)(1,"small",41),m(2),f()()),i&2){let t=F().$implicit;x(2),W(t.aciklama)}}function pme(i,e){if(i&1){let t=Ae();u(0,"div",68)(1,"div",69)(2,"div",70)(3,"span",71),m(4),f(),u(5,"span",72),m(6),f(),u(7,"span",73),m(8),f()(),u(9,"div",74)(10,"button",75),U("click",function(){let r=K(t).$implicit,o=F(5);return Y(o.toggleKonuDurumu(r,o.selectedGrup))}),k(11,"i",76),m(12),f()()(),ee(13,gme,3,1,"div",77),f()}if(i&2){let t=e.$implicit,n=e.index,r=F(5);x(4),he("",n+1,". Konu :"),x(2),W(t.konu_adi),x(2),W(t.sinif_seviyesi),x(2),xe("completed",r.konuIslendi(t.id,r.selectedGrup)),S("title",r.konuIslendi(t.id,r.selectedGrup)?"\u0130\u015Flenmi\u015F konuyu kald\u0131r":"Konuyu i\u015Flenmi\u015F olarak i\u015Faretle"),x(),xe("bi-check-circle-fill",r.konuIslendi(t.id,r.selectedGrup))("bi-circle",!r.konuIslendi(t.id,r.selectedGrup)),x(),he(" ",r.konuIslendi(t.id,r.selectedGrup)?"\u0130\u015Flendi":"\u0130\u015Faretle"," "),x(),S("ngIf",t.aciklama)}}function mme(i,e){if(i&1&&(u(0,"div",59)(1,"div",60)(2,"div",61),k(3,"i",62),u(4,"span",63),m(5),f(),u(6,"span",64),m(7),f()(),u(8,"span",65),m(9),f()(),u(10,"div",66),ee(11,pme,14,12,"div",67),f()()),i&2){let t=e.$implicit,n=e.index;x(5),he("",n+1,"."),x(2),W(t.unite_adi),x(2),he("",t.konular.length," konu"),x(2),S("ngForOf",t.konular)}}function xme(i,e){i&1&&(u(0,"div",79),k(1,"i",80),u(2,"span"),m(3,"Bu grup i\xE7in uygun konu bulunamad\u0131. \xD6nce konular eklenmelidir."),f()())}function _me(i,e){if(i&1&&(u(0,"div",55)(1,"div",56),ee(2,mme,12,4,"div",57),f(),ee(3,xme,4,0,"div",58),f()),i&2){let t=F(3);x(2),S("ngForOf",t.getUnitesByGroup(t.selectedGrup)),x(),S("ngIf",t.getUnitesByGroup(t.selectedGrup).length===0)}}function vme(i,e){if(i&1){let t=Ae();u(0,"div",46)(1,"div",47)(2,"h3"),k(3,"i",28),m(4),f(),u(5,"button",48),U("click",function(){K(t);let r=F(2);return Y(r.selectedGrup="")}),k(6,"i",49),f()(),u(7,"div",50),ee(8,fme,6,0,"div",24)(9,_me,4,2,"div",51),f()()}if(i&2){let t=F(2);x(4),he(" ",t.selectedGrup," - Konu Detaylar\u0131 "),x(4),S("ngIf",t.konular.length===0),x(),S("ngIf",t.konular.length>0)}}function bme(i,e){i&1&&(u(0,"div",81)(1,"div",82),k(2,"i",83),u(3,"h4"),m(4,"Grup Se\xE7in"),f(),u(5,"p",41),m(6,"Konular\u0131 g\xF6r\xFCnt\xFClemek ve i\u015Flemek i\xE7in yukar\u0131dan bir grup se\xE7in"),f()()())}function Cme(i,e){i&1&&(u(0,"div",52),k(1,"i",84),u(2,"h4"),m(3,"Hen\xFCz Grup Bulunmuyor"),f(),u(4,"p",41),m(5,"Hen\xFCz hi\xE7 \xF6\u011Frenci grubunuz yok. \xD6\u011Frenciler otomatik olarak gruplar\u0131na g\xF6re burada g\xF6r\xFCnecektir."),f()())}function yme(i,e){if(i&1&&(u(0,"div",19)(1,"div",20),ee(2,hme,19,12,"div",21),f(),ee(3,vme,10,3,"div",22)(4,bme,7,0,"div",23)(5,Cme,6,0,"div",24),f()),i&2){let t=F();x(2),S("ngForOf",t.groups),x(),S("ngIf",t.selectedGrup),x(),S("ngIf",!t.selectedGrup&&t.groups.length>0),x(),S("ngIf",t.groups.length===0)}}var L5=class i{constructor(e,t){this.http=e;this.cdr=t}destroy$=new Pn;konular=[];islenenKonular=[];groups=[];selectedGrup="";isLoading=!1;error="";groupColors=["#4f46e5","#06b6d4","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899","#84cc16","#f97316","#6366f1","#14b8a6","#eab308"];apiUrl="./server/api";getCurrentUser(){let e=localStorage.getItem("user")||sessionStorage.getItem("user");if(e)try{return JSON.parse(e)}catch(t){return console.error("User data parse error:",t),null}return null}ngOnInit(){this.loadKonular(),this.loadGroups()}loadGroups(){let e=this.getCurrentUser(),t=e?.token||"",n=new xt({Authorization:`Bearer ${t}`});this.http.get("./server/api/ogrenciler_listesi.php",{headers:n}).subscribe({next:r=>{r.success&&(this.organizeStudentsByGroups(r.data,e?.adi_soyadi||""),this.loadIslenenKonular())},error:r=>{console.error("Gruplar y\xFCklenirken hata:",r)}})}organizeStudentsByGroups(e,t){let n=new Map;e.filter(o=>o.rutbe==="ogrenci"&&o.ogretmeni===t).forEach(o=>{let s=o.grubu||"Grup Atanmam\u0131\u015F";n.has(s)||n.set(s,[]),n.get(s).push(o)}),this.groups=Array.from(n.entries()).map(([o,s],a)=>({name:o,students:s,studentCount:s.length,color:this.groupColors[a%this.groupColors.length]})),this.groups.sort((o,s)=>o.name==="Grup Atanmam\u0131\u015F"?1:s.name==="Grup Atanmam\u0131\u015F"?-1:o.name.localeCompare(s.name))}selectGroup(e){this.selectedGrup=e}getHeaders(){return new xt({"Content-Type":"application/json"})}loadKonular(){this.isLoading=!0,this.error="",this.http.get("./server/api/konu_listesi.php",{headers:this.getHeaders()}).subscribe({next:e=>{console.log("Konular API response:",e),e.success?this.konular=e.konular||[]:this.error=e.message||"Konular y\xFCklenemedi",this.isLoading=!1,this.cdr.detectChanges()},error:e=>{console.error("Konular y\xFCklenirken hata:",e),this.error="Sunucu ile ba\u011Flant\u0131 kurulamad\u0131. L\xFCtfen tekrar deneyin.",this.isLoading=!1,this.cdr.detectChanges()}})}Math=Math;loadIslenenKonular(){let t=this.getCurrentUser()?.id;if(!t){console.error("\xD6\u011Fretmen ID bulunamad\u0131"),this.error="Kullan\u0131c\u0131 bilgileri bulunamad\u0131. L\xFCtfen tekrar giri\u015F yap\u0131n.",this.isLoading=!1,this.cdr.detectChanges();return}console.log("\u0130\u015Flenen konular y\xFCkleniyor, \xF6\u011Fretmen ID:",t),this.http.get(`./server/api/islenen_konular.php?ogretmen_id=${t}`,{headers:this.getHeaders()}).subscribe({next:n=>{console.log("\u0130\u015Flenen konular API response:",n),n.success?(this.islenenKonular=n.islenen_konular||[],this.error=""):(console.error("\u0130\u015Flenen konular y\xFCklenirken hata:",n.message),this.error=n.message||"\u0130\u015Flenen konular y\xFCklenemedi"),this.isLoading=!1,this.cdr.detectChanges()},error:n=>{console.error("\u0130\u015Flenen konular y\xFCklenirken hata:",n),this.error="Sunucu ile ba\u011Flant\u0131 kurulamad\u0131. L\xFCtfen tekrar deneyin.",this.isLoading=!1,this.cdr.detectChanges()}})}getUnitesByGroup(e){let t=[...this.konular].sort((c,d)=>(c.id||0)-(d.id||0)),n=[],r=this.groups.find(c=>c.name===e),o=[];r&&r.students&&r.students.length>0&&(o=r.students.map(c=>c.sinifi||c.sinif_seviyesi||c.sinif).filter(c=>c).filter((c,d,h)=>h.indexOf(c)===d)),console.log(`${e} grubu s\u0131n\u0131f seviyeleri:`,o),o.some(c=>c.toLowerCase().includes("mezun")||c==="12"||c==="12.S\u0131n\u0131f")?(n=t,console.log(`${e} grubu - 12.S\u0131n\u0131f/Mezun var, t\xFCm konular g\xF6steriliyor:`,n.length)):o.length>0?(n=t.filter(c=>o.some(d=>{let h=c.sinif_seviyesi,p=h.replace(".S\u0131n\u0131f",""),g=d.replace(".S\u0131n\u0131f","");return p===g||h===d||h===d+".S\u0131n\u0131f"||h+".S\u0131n\u0131f"===d})),console.log(`${e} grubu - S\u0131n\u0131f seviyesi filtrelemesi yap\u0131ld\u0131:`,n.length)):(n=t,console.log(`${e} grubu - S\u0131n\u0131f seviyesi yok, t\xFCm konular g\xF6steriliyor:`,n.length));let a=new Map;return n.forEach(c=>{a.has(c.unite_adi)||a.set(c.unite_adi,{unite_adi:c.unite_adi,konular:[]}),a.get(c.unite_adi).konular.push(c)}),Array.from(a.values())}konuIslendi(e,t){return this.islenenKonular.some(n=>n.konu_id===e&&n.grup_adi===t)}toggleKonuDurumu(e,t){if(this.konuIslendi(e.id,t)){let r=this.islenenKonular.find(o=>o.konu_id===e.id&&o.grup_adi===t);r&&this.removeIslenenKonu(r.id)}else this.addIslenenKonu(e.id,t)}addIslenenKonu(e,t){let r=this.getCurrentUser()?.id;if(!e||!t||!r){this.error="Konu ID, grup ad\u0131 ve \xF6\u011Fretmen ID gerekli",console.error("Eksik veri:",{konuId:e,grupAdi:t,ogretmenId:r});return}let o={konu_id:e,grup_adi:t,ogretmen_id:r,isleme_tarihi:new Date().toISOString().split("T")[0]};this.http.post("./server/api/islenen_konu_ekle.php",o,{headers:this.getHeaders()}).subscribe({next:s=>{s.success?(this.loadIslenenKonular(),this.error=""):(this.error=s.message||"Konu i\u015Faretlenirken hata olu\u015Ftu",console.error("API hatas\u0131:",s.message))},error:s=>{console.error("Konu i\u015Faretlenirken hata:",s),this.error="Konu i\u015Faretlenirken hata olu\u015Ftu"}})}removeIslenenKonu(e){this.http.delete(`./server/api/islenen_konu_sil.php?id=${e}`,{headers:this.getHeaders()}).subscribe({next:t=>{t.success?this.loadIslenenKonular():this.error=t.message||"Konu i\u015Fareti kald\u0131r\u0131l\u0131rken hata olu\u015Ftu"},error:t=>{console.error("Konu i\u015Fareti kald\u0131r\u0131l\u0131rken hata:",t),this.error="Konu i\u015Fareti kald\u0131r\u0131l\u0131rken hata olu\u015Ftu"}})}getIslenenKonularByGrup(e){let n=this.islenenKonular.filter(r=>r.grup_adi===e).sort((r,o)=>{let s=new Date(r.isleme_tarihi);return new Date(o.isleme_tarihi).getTime()-s.getTime()});return console.log(`${e} grubu i\xE7in i\u015Flenen konular:`,n),console.log(`${e} grubu i\xE7in ilk konunun field'lar\u0131:`,n[0]?Object.keys(n[0]):"Bo\u015F array"),n.length>0&&console.log(`${e} grubu i\xE7in ilk konu verisi:`,n[0]),n}getToplamIslenenKonu(e){return this.islenenKonular.filter(t=>t.grup_adi===e).length}getToplamKonuSayisiByGroup(e){return this.getUnitesByGroup(e).reduce((n,r)=>n+r.konular.length,0)}formatDate(e){return new Date(e).toLocaleDateString("tr-TR")}getGroupClassLevels(e){let t=this.groups.find(r=>r.name===e);if(!t||!t.students||t.students.length===0)return"S\u0131n\u0131f bilgisi yok";let n=t.students.map(r=>r.sinifi).filter(r=>r).filter((r,o,s)=>s.indexOf(r)===o).sort();return n.length===0?"S\u0131n\u0131f bilgisi yok":n.join()}getUniqueGroups(){let t=[...new Set(this.islenenKonular.map(n=>n.grup_adi))].filter(n=>n&&n.trim()!=="");return console.log("Unique groups found:",t),console.log("All islenen konular:",this.islenenKonular),t}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(t){return new(t||i)(ke(gt),ke(as))};static \u0275cmp=Ke({type:i,selectors:[["app-ogretmen-islenen-konular-sayfasi"]],standalone:!1,decls:14,vars:3,consts:[[1,"modern-page-container"],[1,"minimal-navbar"],[1,"navbar-content"],[1,"page-info"],[1,"page-title"],[1,"bi","bi-check2-square","me-2"],[1,"navbar-actions"],["routerLink","../konular","aria-label","Konu i\u015Flemleri sayfas\u0131na git",1,"modern-btn","modern-btn-primary"],["aria-hidden","true",1,"bi","bi-gear-fill"],["class","loading-container",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["class","content-wrapper",4,"ngIf"],[1,"loading-container"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-2","text-muted"],[1,"alert","alert-danger"],[1,"bi","bi-exclamation-triangle"],[1,"btn","btn-sm","btn-outline-danger","ms-2",3,"click"],[1,"content-wrapper"],[1,"groups-grid"],["class","group-card",3,"selected","click",4,"ngFor","ngForOf"],["class","selected-group-details",4,"ngIf"],["class","no-group-selected",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"group-card",3,"click"],[1,"group-header"],[1,"group-title"],[1,"bi","bi-people-fill","me-2"],[1,"group-stats"],[1,"student-count"],[1,"group-body"],[1,"konu-progress"],[1,"progress-info"],[1,"progress-text"],[1,"progress-percentage"],[1,"progress-bar-container"],[1,"progress-bar"],[1,"progress-fill"],["class","last-topics",4,"ngIf"],[1,"last-topics"],[1,"text-muted"],[1,"topic-list"],["class","topic-item",4,"ngFor","ngForOf"],[1,"topic-item"],[1,"bi","bi-check-circle-fill","text-success","me-1"],[1,"selected-group-details"],[1,"group-detail-header"],[1,"close-detail-btn",3,"click"],[1,"bi","bi-x"],[1,"all-topics-container"],["class","topics-hierarchical",4,"ngIf"],[1,"empty-state"],[1,"bi","bi-journal-x","fs-1","text-muted"],[1,"text-muted","small"],[1,"topics-hierarchical"],[1,"unite-hierarchy"],["class","unite-section",4,"ngFor","ngForOf"],["class","no-topics-message",4,"ngIf"],[1,"unite-section"],[1,"unite-header"],[1,"unite-title"],[1,"bi","bi-folder-fill","me-2"],[1,"unite-number"],[1,"unite-name"],[1,"unite-topic-count"],[1,"konular-hierarchy"],["class","konu-item-hierarchical",4,"ngFor","ngForOf"],[1,"konu-item-hierarchical"],[1,"konu-structure"],[1,"konu-hierarchy-info"],[1,"konu-number"],[1,"konu-name"],[1,"konu-class-badge"],[1,"konu-actions"],[1,"btn-toggle-konu-hierarchical",3,"click","title"],[1,"bi"],["class","konu-description",4,"ngIf"],[1,"konu-description"],[1,"no-topics-message"],[1,"bi","bi-info-circle","me-2"],[1,"no-group-selected"],[1,"selection-prompt"],[1,"bi","bi-hand-index","fs-1","text-muted"],[1,"bi","bi-people","fs-1","text-muted"]],template:function(t,n){t&1&&(u(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),k(5,"i",5),m(6," \u0130\u015Flenen Konular "),f()(),u(7,"div",6)(8,"button",7),k(9,"i",8),m(10," Konu \u0130\u015Flemleri "),f()()()(),ee(11,lme,6,0,"div",9)(12,cme,5,1,"div",10)(13,yme,6,4,"div",11),f()),t&2&&(x(11),S("ngIf",n.isLoading),x(),S("ngIf",n.error&&!n.isLoading),x(),S("ngIf",!n.isLoading&&!n.error))},dependencies:[yt,lt,xi],styles:[".modern-page-container[_ngcontent-%COMP%]{padding:0;background:#f8fafc;min-height:100vh}.minimal-navbar[_ngcontent-%COMP%]{background:#fff;border-bottom:1px solid #e2e8f0;padding:1rem 1.5rem;margin-bottom:1.5rem}.minimal-navbar[_ngcontent-%COMP%]   .navbar-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;max-width:1200px;margin:0 auto}.minimal-navbar[_ngcontent-%COMP%]   .page-info[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#1e293b;margin:0;display:flex;align-items:center}.minimal-navbar[_ngcontent-%COMP%]   .page-info[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#3b82f6}.minimal-navbar[_ngcontent-%COMP%]   .navbar-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem}.modern-btn[_ngcontent-%COMP%]{padding:.5rem 1rem;border:none;border-radius:6px;font-weight:500;text-decoration:none;display:inline-flex;align-items:center;gap:.5rem;transition:all .2s ease;cursor:pointer}.modern-btn.modern-btn-primary[_ngcontent-%COMP%]{background:#3b82f6;color:#fff}.modern-btn.modern-btn-primary[_ngcontent-%COMP%]:hover{background:#2563eb;transform:translateY(-1px)}.modern-btn.modern-btn-secondary[_ngcontent-%COMP%]{background:#6b7280;color:#fff}.modern-btn.modern-btn-secondary[_ngcontent-%COMP%]:hover{background:#4b5563;transform:translateY(-1px)}.groups-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:1.5rem;margin-bottom:2rem}.group-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;border:2px solid #e5e7eb;overflow:hidden;transition:all .3s ease;cursor:pointer}.group-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 12px 32px #00000026;border-color:#3b82f6}.group-card.selected[_ngcontent-%COMP%]{border-color:#3b82f6;box-shadow:0 8px 24px #3b82f633}.group-header[_ngcontent-%COMP%]{color:#fff;padding:1.25rem;background:linear-gradient(135deg,#3b82f6,#1d4ed8)}.group-header[_ngcontent-%COMP%]   .group-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;margin-bottom:.5rem;display:flex;align-items:center}.group-header[_ngcontent-%COMP%]   .group-stats[_ngcontent-%COMP%]   .student-count[_ngcontent-%COMP%]{background:#fff3;padding:.25rem .75rem;border-radius:20px;font-size:.8rem;font-weight:600}.group-body[_ngcontent-%COMP%]{padding:1.25rem}.group-body[_ngcontent-%COMP%]   .konu-progress[_ngcontent-%COMP%]{margin-bottom:1rem}.group-body[_ngcontent-%COMP%]   .konu-progress[_ngcontent-%COMP%]   .progress-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem;font-size:.875rem}.group-body[_ngcontent-%COMP%]   .konu-progress[_ngcontent-%COMP%]   .progress-info[_ngcontent-%COMP%]   .progress-text[_ngcontent-%COMP%]{color:#374151;font-weight:500}.group-body[_ngcontent-%COMP%]   .konu-progress[_ngcontent-%COMP%]   .progress-info[_ngcontent-%COMP%]   .progress-percentage[_ngcontent-%COMP%]{color:#3b82f6;font-weight:700}.group-body[_ngcontent-%COMP%]   .konu-progress[_ngcontent-%COMP%]   .progress-bar-container[_ngcontent-%COMP%]{background:#f3f4f6;border-radius:20px;height:8px;overflow:hidden}.group-body[_ngcontent-%COMP%]   .konu-progress[_ngcontent-%COMP%]   .progress-bar-container[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%], .group-body[_ngcontent-%COMP%]   .konu-progress[_ngcontent-%COMP%]   .progress-bar-container[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{height:100%;background:#3b82f6;border-radius:20px;transition:width .3s ease}.group-body[_ngcontent-%COMP%]   .last-topics[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#374151;font-size:.875rem;font-weight:600;margin-bottom:.5rem}.group-body[_ngcontent-%COMP%]   .last-topics[_ngcontent-%COMP%]   .topic-list[_ngcontent-%COMP%]   .topic-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.25rem 0;font-size:.8rem;color:#6b7280}.group-body[_ngcontent-%COMP%]   .last-topics[_ngcontent-%COMP%]   .topic-list[_ngcontent-%COMP%]   .topic-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem}.group-body[_ngcontent-%COMP%]   .last-topics[_ngcontent-%COMP%]   .topic-list[_ngcontent-%COMP%]   .topic-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{line-height:1.3}.content-wrapper[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 1.5rem}.selected-group-details[_ngcontent-%COMP%]{background:#fff;border-radius:12px;border:1px solid #e2e8f0;overflow:hidden;margin-top:2rem}.selected-group-details[_ngcontent-%COMP%]   .group-detail-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.5rem;background:linear-gradient(135deg,#3b82f6,#1d4ed8);color:#fff}.selected-group-details[_ngcontent-%COMP%]   .group-detail-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:600;display:flex;align-items:center}.selected-group-details[_ngcontent-%COMP%]   .group-detail-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem}.selected-group-details[_ngcontent-%COMP%]   .group-detail-header[_ngcontent-%COMP%]   .close-detail-btn[_ngcontent-%COMP%]{background:#fff3;border:none;border-radius:50%;width:36px;height:36px;display:flex;align-items:center;justify-content:center;color:#fff;cursor:pointer;transition:all .2s ease}.selected-group-details[_ngcontent-%COMP%]   .group-detail-header[_ngcontent-%COMP%]   .close-detail-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:scale(1.1)}.selected-group-details[_ngcontent-%COMP%]   .group-detail-header[_ngcontent-%COMP%]   .close-detail-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem}.all-topics-container[_ngcontent-%COMP%]{padding:1.5rem}.all-topics-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{text-align:center;padding:3rem 1rem;color:#6b7280}.all-topics-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:1rem;display:block}.all-topics-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:.5rem;font-size:1rem}.all-topics-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p.small[_ngcontent-%COMP%]{font-size:.875rem}.topics-hierarchical[_ngcontent-%COMP%]   .unite-hierarchy[_ngcontent-%COMP%]   .unite-section[_ngcontent-%COMP%]{margin-bottom:2rem;border:1px solid #e5e7eb;border-radius:8px;overflow:hidden}.topics-hierarchical[_ngcontent-%COMP%]   .unite-hierarchy[_ngcontent-%COMP%]   .unite-section[_ngcontent-%COMP%]:last-child{margin-bottom:0}.topics-hierarchical[_ngcontent-%COMP%]   .unite-hierarchy[_ngcontent-%COMP%]   .unite-section[_ngcontent-%COMP%]   .unite-header[_ngcontent-%COMP%]{background:#f8fafc;padding:1rem 1.25rem;border-bottom:1px solid #e5e7eb;display:flex;justify-content:space-between;align-items:center}.topics-hierarchical[_ngcontent-%COMP%]   .unite-hierarchy[_ngcontent-%COMP%]   .unite-section[_ngcontent-%COMP%]   .unite-header[_ngcontent-%COMP%]   .unite-title[_ngcontent-%COMP%]{display:flex;align-items:center;font-weight:600;color:#1e293b}.topics-hierarchical[_ngcontent-%COMP%]   .unite-hierarchy[_ngcontent-%COMP%]   .unite-section[_ngcontent-%COMP%]   .unite-header[_ngcontent-%COMP%]   .unite-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#3b82f6;margin-right:.5rem}.topics-hierarchical[_ngcontent-%COMP%]   .unite-hierarchy[_ngcontent-%COMP%]   .unite-section[_ngcontent-%COMP%]   .unite-header[_ngcontent-%COMP%]   .unite-title[_ngcontent-%COMP%]   .unite-number[_ngcontent-%COMP%]{font-weight:700;margin-right:.5rem}.topics-hierarchical[_ngcontent-%COMP%]   .unite-hierarchy[_ngcontent-%COMP%]   .unite-section[_ngcontent-%COMP%]   .unite-header[_ngcontent-%COMP%]   .unite-title[_ngcontent-%COMP%]   .unite-name[_ngcontent-%COMP%]{font-size:1.1rem}.topics-hierarchical[_ngcontent-%COMP%]   .unite-hierarchy[_ngcontent-%COMP%]   .unite-section[_ngcontent-%COMP%]   .unite-header[_ngcontent-%COMP%]   .unite-topic-count[_ngcontent-%COMP%]{background:#e0e7ff;color:#3730a3;padding:.25rem .75rem;border-radius:20px;font-size:.8rem;font-weight:600}.topics-hierarchical[_ngcontent-%COMP%]   .unite-hierarchy[_ngcontent-%COMP%]   .unite-section[_ngcontent-%COMP%]   .konular-hierarchy[_ngcontent-%COMP%]   .konu-item-hierarchical[_ngcontent-%COMP%]{padding:1rem 1.25rem;border-bottom:1px solid #f1f5f9}.topics-hierarchical[_ngcontent-%COMP%]   .unite-hierarchy[_ngcontent-%COMP%]   .unite-section[_ngcontent-%COMP%]   .konular-hierarchy[_ngcontent-%COMP%]   .konu-item-hierarchical[_ngcontent-%COMP%]:last-child{border-bottom:none}.topics-hierarchical[_ngcontent-%COMP%]   .unite-hierarchy[_ngcontent-%COMP%]   .unite-section[_ngcontent-%COMP%]   .konular-hierarchy[_ngcontent-%COMP%]   .konu-item-hierarchical[_ngcontent-%COMP%]:hover{background:#f8fafc}.topics-hierarchical[_ngcontent-%COMP%]   .unite-hierarchy[_ngcontent-%COMP%]   .unite-section[_ngcontent-%COMP%]   .konular-hierarchy[_ngcontent-%COMP%]   .konu-item-hierarchical[_ngcontent-%COMP%]   .konu-structure[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:.5rem}.topics-hierarchical[_ngcontent-%COMP%]   .unite-hierarchy[_ngcontent-%COMP%]   .unite-section[_ngcontent-%COMP%]   .konular-hierarchy[_ngcontent-%COMP%]   .konu-item-hierarchical[_ngcontent-%COMP%]   .konu-structure[_ngcontent-%COMP%]   .konu-hierarchy-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:.25rem}.topics-hierarchical[_ngcontent-%COMP%]   .unite-hierarchy[_ngcontent-%COMP%]   .unite-section[_ngcontent-%COMP%]   .konular-hierarchy[_ngcontent-%COMP%]   .konu-item-hierarchical[_ngcontent-%COMP%]   .konu-structure[_ngcontent-%COMP%]   .konu-hierarchy-info[_ngcontent-%COMP%]   .konu-number[_ngcontent-%COMP%]{font-size:.8rem;color:#6b7280;font-weight:500}.topics-hierarchical[_ngcontent-%COMP%]   .unite-hierarchy[_ngcontent-%COMP%]   .unite-section[_ngcontent-%COMP%]   .konular-hierarchy[_ngcontent-%COMP%]   .konu-item-hierarchical[_ngcontent-%COMP%]   .konu-structure[_ngcontent-%COMP%]   .konu-hierarchy-info[_ngcontent-%COMP%]   .konu-name[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#1e293b;line-height:1.4}.topics-hierarchical[_ngcontent-%COMP%]   .unite-hierarchy[_ngcontent-%COMP%]   .unite-section[_ngcontent-%COMP%]   .konular-hierarchy[_ngcontent-%COMP%]   .konu-item-hierarchical[_ngcontent-%COMP%]   .konu-structure[_ngcontent-%COMP%]   .konu-hierarchy-info[_ngcontent-%COMP%]   .konu-class-badge[_ngcontent-%COMP%]{background:#dbeafe;color:#1e40af;padding:.125rem .5rem;border-radius:12px;font-size:.75rem;font-weight:600;align-self:flex-start}.topics-hierarchical[_ngcontent-%COMP%]   .unite-hierarchy[_ngcontent-%COMP%]   .unite-section[_ngcontent-%COMP%]   .konular-hierarchy[_ngcontent-%COMP%]   .konu-item-hierarchical[_ngcontent-%COMP%]   .konu-structure[_ngcontent-%COMP%]   .konu-actions[_ngcontent-%COMP%]{margin-left:1rem}.topics-hierarchical[_ngcontent-%COMP%]   .unite-hierarchy[_ngcontent-%COMP%]   .unite-section[_ngcontent-%COMP%]   .konular-hierarchy[_ngcontent-%COMP%]   .konu-item-hierarchical[_ngcontent-%COMP%]   .konu-structure[_ngcontent-%COMP%]   .konu-actions[_ngcontent-%COMP%]   .btn-toggle-konu-hierarchical[_ngcontent-%COMP%]{padding:.5rem 1rem;border:2px solid #e5e7eb;border-radius:6px;background:#fff;color:#6b7280;font-size:.875rem;font-weight:500;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;gap:.5rem}.topics-hierarchical[_ngcontent-%COMP%]   .unite-hierarchy[_ngcontent-%COMP%]   .unite-section[_ngcontent-%COMP%]   .konular-hierarchy[_ngcontent-%COMP%]   .konu-item-hierarchical[_ngcontent-%COMP%]   .konu-structure[_ngcontent-%COMP%]   .konu-actions[_ngcontent-%COMP%]   .btn-toggle-konu-hierarchical[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}.topics-hierarchical[_ngcontent-%COMP%]   .unite-hierarchy[_ngcontent-%COMP%]   .unite-section[_ngcontent-%COMP%]   .konular-hierarchy[_ngcontent-%COMP%]   .konu-item-hierarchical[_ngcontent-%COMP%]   .konu-structure[_ngcontent-%COMP%]   .konu-actions[_ngcontent-%COMP%]   .btn-toggle-konu-hierarchical[_ngcontent-%COMP%]:hover{border-color:#3b82f6;color:#3b82f6;transform:translateY(-1px)}.topics-hierarchical[_ngcontent-%COMP%]   .unite-hierarchy[_ngcontent-%COMP%]   .unite-section[_ngcontent-%COMP%]   .konular-hierarchy[_ngcontent-%COMP%]   .konu-item-hierarchical[_ngcontent-%COMP%]   .konu-structure[_ngcontent-%COMP%]   .konu-actions[_ngcontent-%COMP%]   .btn-toggle-konu-hierarchical.completed[_ngcontent-%COMP%]{background:#dcfce7;border-color:#16a34a;color:#15803d}.topics-hierarchical[_ngcontent-%COMP%]   .unite-hierarchy[_ngcontent-%COMP%]   .unite-section[_ngcontent-%COMP%]   .konular-hierarchy[_ngcontent-%COMP%]   .konu-item-hierarchical[_ngcontent-%COMP%]   .konu-structure[_ngcontent-%COMP%]   .konu-actions[_ngcontent-%COMP%]   .btn-toggle-konu-hierarchical.completed[_ngcontent-%COMP%]:hover{background:#bbf7d0;transform:translateY(-1px)}.topics-hierarchical[_ngcontent-%COMP%]   .unite-hierarchy[_ngcontent-%COMP%]   .unite-section[_ngcontent-%COMP%]   .konular-hierarchy[_ngcontent-%COMP%]   .konu-item-hierarchical[_ngcontent-%COMP%]   .konu-description[_ngcontent-%COMP%]{padding-left:0;margin-top:.5rem}.topics-hierarchical[_ngcontent-%COMP%]   .unite-hierarchy[_ngcontent-%COMP%]   .unite-section[_ngcontent-%COMP%]   .konular-hierarchy[_ngcontent-%COMP%]   .konu-item-hierarchical[_ngcontent-%COMP%]   .konu-description[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#6b7280;font-style:italic;line-height:1.4}.topics-hierarchical[_ngcontent-%COMP%]   .no-topics-message[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#6b7280;font-style:italic}.topics-hierarchical[_ngcontent-%COMP%]   .no-topics-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem}.no-group-selected[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem}.no-group-selected[_ngcontent-%COMP%]   .selection-prompt[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#9ca3af;margin-bottom:1rem}.no-group-selected[_ngcontent-%COMP%]   .selection-prompt[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#374151;margin-bottom:1rem;font-weight:600}.no-group-selected[_ngcontent-%COMP%]   .selection-prompt[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6b7280;font-size:1rem}.loading-container[_ngcontent-%COMP%]{text-align:center;padding:3rem}.loading-container[_ngcontent-%COMP%]   .spinner-border[_ngcontent-%COMP%]{width:3rem;height:3rem}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:1rem;color:#6b7280}.alert[_ngcontent-%COMP%]{margin:1.5rem;border-radius:8px;display:flex;align-items:center;justify-content:space-between}.alert[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem}.alert[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-left:auto}@media (max-width: 768px){.groups-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}.minimal-navbar[_ngcontent-%COMP%]{padding:1rem}.minimal-navbar[_ngcontent-%COMP%]   .navbar-content[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;align-items:flex-start}.minimal-navbar[_ngcontent-%COMP%]   .page-info[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:1.25rem}.content-wrapper[_ngcontent-%COMP%]{padding:0 1rem}.selected-group-details[_ngcontent-%COMP%]{margin-top:1rem}.selected-group-details[_ngcontent-%COMP%]   .group-detail-header[_ngcontent-%COMP%]{padding:1rem;flex-direction:column;gap:1rem;align-items:flex-start}.selected-group-details[_ngcontent-%COMP%]   .group-detail-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem}.all-topics-container[_ngcontent-%COMP%]{padding:1rem}.unite-section[_ngcontent-%COMP%]   .unite-header[_ngcontent-%COMP%]{padding:.75rem 1rem;flex-direction:column;gap:.5rem;align-items:flex-start}.konu-item-hierarchical[_ngcontent-%COMP%]{padding:.75rem 1rem!important}.konu-item-hierarchical[_ngcontent-%COMP%]   .konu-structure[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.konu-item-hierarchical[_ngcontent-%COMP%]   .konu-structure[_ngcontent-%COMP%]   .konu-actions[_ngcontent-%COMP%]{margin-left:0;align-self:flex-start}}"],changeDetection:0})};function wme(i,e){if(i&1&&(u(0,"option",64),m(1),f()),i&2){let t=e.$implicit;S("value",t),x(),he("",t,". S\u0131n\u0131f")}}function Mme(i,e){if(i&1&&(u(0,"option",64),m(1),f()),i&2){let t=e.$implicit;S("value",t),x(),W(t)}}function Eme(i,e){i&1&&(u(0,"div",65)(1,"div",66)(2,"span",67),m(3,"Y\xFCkleniyor..."),f()(),u(4,"p",68),m(5,"Konular y\xFCkleniyor..."),f()())}function Pme(i,e){if(i&1){let t=Ae();u(0,"div",69),k(1,"i",57),m(2),u(3,"button",70),U("click",function(){K(t);let r=F();return Y(r.loadKonular())}),k(4,"i",71),m(5," Tekrar Dene "),f()()}if(i&2){let t=F();x(2),he(" ",t.error," ")}}function Ome(i,e){if(i&1&&(u(0,"p",93),m(1),f()),i&2){let t=F().$implicit;x(),he(" ",t.aciklama," ")}}function Sme(i,e){if(i&1){let t=Ae();u(0,"div",77)(1,"div",78)(2,"div",79)(3,"span",80),m(4),f()(),u(5,"div",81)(6,"button",82),U("click",function(){let r=K(t).$implicit,o=F(3);return Y(o.openKonuModal(r))}),k(7,"i",83),f(),u(8,"button",84),U("click",function(){let r=K(t).$implicit,o=F(3);return Y(o.openDeleteModal(r))}),k(9,"i",85),f()()(),u(10,"div",86)(11,"h4",87),m(12),f(),u(13,"p",88),k(14,"i",89),m(15),f(),ee(16,Ome,2,1,"p",90),f(),u(17,"div",91)(18,"small",4),k(19,"i",92),m(20),f()()()}if(i&2){let t=e.$implicit,n=F(3);x(4),he("",t.sinif_seviyesi,". S\u0131n\u0131f"),x(8),W(t.konu_adi),x(3),he(" ",t.unite_adi," "),x(),S("ngIf",t.aciklama),x(4),he(" ",n.formatDate(t.olusturma_tarihi)," ")}}function kme(i,e){if(i&1&&(u(0,"div",75),ee(1,Sme,21,5,"div",76),f()),i&2){let t=F(2);x(),S("ngForOf",t.filteredKonular)}}function Ame(i,e){i&1&&(u(0,"span"),m(1," Arama kriterinize uygun konu bulunamad\u0131. "),f())}function Dme(i,e){i&1&&(u(0,"span"),m(1," Hen\xFCz hi\xE7 konu eklenmemi\u015F. "),f())}function Fme(i,e){if(i&1){let t=Ae();u(0,"div",94)(1,"div",95),k(2,"i",96),f(),u(3,"h3"),m(4,"Konu Bulunamad\u0131"),f(),u(5,"p",4),ee(6,Ame,2,0,"span",97)(7,Dme,2,0,"span",97),f(),u(8,"button",5),U("click",function(){K(t);let r=F(2);return Y(r.openKonuModal())}),k(9,"i",6),m(10," \u0130lk Konuyu Ekle "),f()()}if(i&2){let t=F(2);x(6),S("ngIf",t.searchQuery||t.selectedSinif||t.selectedUnite),x(),S("ngIf",!t.searchQuery&&!t.selectedSinif&&!t.selectedUnite)}}function Ime(i,e){if(i&1&&(u(0,"div",72),ee(1,kme,2,1,"div",73)(2,Fme,11,2,"div",74),f()),i&2){let t=F();x(),S("ngIf",t.filteredKonular.length>0),x(),S("ngIf",t.filteredKonular.length===0)}}function Tme(i,e){if(i&1&&(u(0,"option",64),m(1),f()),i&2){let t=e.$implicit;S("value",t+".S\u0131n\u0131f"),x(),he("",t,".S\u0131n\u0131f")}}function Bme(i,e){if(i&1&&(u(0,"div",98)(1,"strong"),m(2),f(),k(3,"br"),u(4,"small"),m(5),f()()),i&2){let t=F();x(2),W(t.deletingKonu.konu_adi),x(3),hn("",t.deletingKonu.unite_adi," - ",t.deletingKonu.sinif_seviyesi,". S\u0131n\u0131f")}}function Nme(i,e){if(i&1){let t=Ae();u(0,"div",99),U("click",function(){K(t);let r=F();return Y(r.showKonuModal?r.closeKonuModal():r.closeDeleteModal())}),f()}if(i&2){let t=F();xe("show",t.showKonuModal||t.showDeleteModal)}}var R5=class i{constructor(e){this.http=e}konular=[];filteredKonular=[];isLoading=!1;error="";searchQuery="";selectedSinif="";selectedUnite="";showKonuModal=!1;showDeleteModal=!1;editingKonu=null;deletingKonu=null;formData={konu_adi:"",unite_adi:"",sinif_seviyesi:"9",aciklama:""};sinifOptions=["9","10","11","12"];uniteOptions=[];ngOnInit(){this.loadKonular()}getAuthHeaders(){let e=localStorage.getItem("user")||sessionStorage.getItem("user"),t=new xt({"Content-Type":"application/json"});if(e){let n=JSON.parse(e);n.token&&(t=t.set("Authorization",`Bearer ${n.token}`))}return t}loadKonular(){this.isLoading=!0,this.error="",this.http.get("https://www.kimyaogreniyorum.com/server/api/konu_listesi.php",{headers:this.getAuthHeaders()}).subscribe({next:e=>{this.isLoading=!1,e.success?(this.konular=e.konular||[],this.filteredKonular=[...this.konular],this.extractUniteOptions(),this.applyFilters()):this.error=e.message||"Konular y\xFCklenirken hata olu\u015Ftu"},error:e=>{this.isLoading=!1,this.error="Konular y\xFCklenirken hata olu\u015Ftu: "+(e.message||"Bilinmeyen hata"),console.error("Konu listesi hatas\u0131:",e)}})}extractUniteOptions(){let e=new Set;this.konular.forEach(t=>{t.unite_adi&&e.add(t.unite_adi)}),this.uniteOptions=Array.from(e).sort()}applyFilters(){this.filteredKonular=this.konular.filter(e=>{let t=!this.searchQuery||e.konu_adi.toLowerCase().includes(this.searchQuery.toLowerCase())||e.unite_adi.toLowerCase().includes(this.searchQuery.toLowerCase()),n=!this.selectedSinif||e.sinif_seviyesi===this.selectedSinif,r=!this.selectedUnite||e.unite_adi===this.selectedUnite;return t&&n&&r})}onSearchChange(){this.applyFilters()}onSinifChange(){this.applyFilters()}onUniteChange(){this.applyFilters()}clearFilters(){this.searchQuery="",this.selectedSinif="",this.selectedUnite="",this.applyFilters()}openKonuModal(e){this.editingKonu=e||null,e?this.formData={konu_adi:e.konu_adi,unite_adi:e.unite_adi,sinif_seviyesi:e.sinif_seviyesi,aciklama:e.aciklama||""}:this.formData={konu_adi:"",unite_adi:"",sinif_seviyesi:"9",aciklama:""},this.showKonuModal=!0}closeKonuModal(){this.showKonuModal=!1,this.editingKonu=null}saveKonu(){if(!this.formData.konu_adi.trim()||!this.formData.unite_adi.trim()){alert("Konu ad\u0131 ve \xFCnite ad\u0131 gereklidir!");return}let e=this.editingKonu?"https://www.kimyaogreniyorum.com/server/api/konu_guncelle.php":"https://www.kimyaogreniyorum.com/server/api/konu_ekle.php",t=this.editingKonu?ot(Ie({},this.formData),{id:this.editingKonu.id}):this.formData;this.http.post(e,t,{headers:this.getAuthHeaders()}).subscribe({next:n=>{n.success?(this.closeKonuModal(),this.loadKonular(),alert(this.editingKonu?"Konu ba\u015Far\u0131yla g\xFCncellendi!":"Konu ba\u015Far\u0131yla eklendi!")):alert(n.message||"\u0130\u015Flem ba\u015Far\u0131s\u0131z!")},error:n=>{console.error("Konu kaydetme hatas\u0131:",n),alert("Konu kaydedilirken hata olu\u015Ftu!")}})}openDeleteModal(e){this.deletingKonu=e,this.showDeleteModal=!0}closeDeleteModal(){this.showDeleteModal=!1,this.deletingKonu=null}deleteKonu(){this.deletingKonu&&this.http.delete(`https://www.kimyaogreniyorum.com/server/api/konu_sil.php?id=${this.deletingKonu.id}`,{headers:this.getAuthHeaders()}).subscribe({next:e=>{e.success?(this.closeDeleteModal(),this.loadKonular(),alert("Konu ba\u015Far\u0131yla silindi!")):alert(e.message||"Silme i\u015Flemi ba\u015Far\u0131s\u0131z!")},error:e=>{console.error("Konu silme hatas\u0131:",e),alert("Konu silinirken hata olu\u015Ftu!")}})}formatDate(e){return e?new Date(e).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):""}static \u0275fac=function(t){return new(t||i)(ke(gt))};static \u0275cmp=Ke({type:i,selectors:[["app-ogretmen-konu-islemleri-sayfasi"]],standalone:!1,decls:128,vars:31,consts:[[1,"konu-islemleri-container"],[1,"page-header"],[1,"header-content"],[1,"bi","bi-journal-text","me-2"],[1,"text-muted"],[1,"btn","btn-primary",3,"click"],[1,"bi","bi-plus-circle","me-2"],[1,"filters-section"],[1,"row","g-3"],[1,"col-md-4"],[1,"search-box"],[1,"bi","bi-search"],["type","text","placeholder","Konu veya \xFCnite ara...",1,"form-control",3,"ngModelChange","input","ngModel"],[1,"col-md-3"],[1,"form-select",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-2"],[1,"btn","btn-outline-secondary","w-100",3,"click"],[1,"bi","bi-funnel","me-1"],[1,"stats-section"],[1,"stat-card"],[1,"stat-icon","bg-primary"],[1,"bi","bi-journal-text"],[1,"stat-content"],[1,"stat-icon","bg-success"],[1,"stat-icon","bg-info"],[1,"bi","bi-collection"],[1,"stat-icon","bg-warning"],[1,"bi","bi-mortarboard"],["class","loading-section",4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","konular-section",4,"ngIf"],["tabindex","-1",1,"modal","fade"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"bi","bi-journal-plus","me-2"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"col-md-8"],["for","uniteAdi",1,"form-label"],["type","text","id","uniteAdi","name","uniteAdi","placeholder","\xD6rn: Atom ve Periyodik Sistem","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","sinifSeviyesi",1,"form-label"],["id","sinifSeviyesi","name","sinifSeviyesi","required","",1,"form-select",3,"ngModelChange","ngModel"],[1,"col-12"],["for","konuAdi",1,"form-label"],["type","text","id","konuAdi","name","konuAdi","placeholder","\xD6rn: Atomun Yap\u0131s\u0131","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","aciklama",1,"form-label"],["id","aciklama","name","aciklama","rows","3","placeholder","Konu hakk\u0131nda k\u0131sa a\xE7\u0131klama...",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"bi","bi-check-lg","me-1"],[1,"modal-dialog"],[1,"modal-title","text-danger"],[1,"bi","bi-exclamation-triangle","me-2"],["class","alert alert-warning",4,"ngIf"],[1,"text-muted","small"],[1,"bi","bi-info-circle","me-1"],["type","button",1,"btn","btn-danger",3,"click"],[1,"bi","bi-trash","me-1"],["class","modal-backdrop fade",3,"show","click",4,"ngIf"],[3,"value"],[1,"loading-section"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-2","text-muted"],["role","alert",1,"alert","alert-danger"],[1,"btn","btn-outline-danger","btn-sm","ms-2",3,"click"],[1,"bi","bi-arrow-clockwise","me-1"],[1,"konular-section"],["class","konular-grid",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"konular-grid"],["class","konu-card",4,"ngFor","ngForOf"],[1,"konu-card"],[1,"konu-header"],[1,"konu-badge"],[1,"sinif-badge"],[1,"konu-actions"],["title","D\xFCzenle",1,"action-btn","edit-btn",3,"click"],[1,"bi","bi-pencil"],["title","Sil",1,"action-btn","delete-btn",3,"click"],[1,"bi","bi-trash"],[1,"konu-content"],[1,"konu-title"],[1,"konu-unite"],[1,"bi","bi-collection","me-1"],["class","konu-description",4,"ngIf"],[1,"konu-footer"],[1,"bi","bi-calendar","me-1"],[1,"konu-description"],[1,"empty-state"],[1,"empty-icon"],[1,"bi","bi-journal-x"],[4,"ngIf"],[1,"alert","alert-warning"],[1,"modal-backdrop","fade",3,"click"]],template:function(t,n){t&1&&(u(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),k(4,"i",3),m(5," Konu Y\xF6netimi "),f(),u(6,"p",4),m(7,"Konular\u0131 ekleyin, d\xFCzenleyin ve y\xF6netin"),f()(),u(8,"button",5),U("click",function(){return n.openKonuModal()}),k(9,"i",6),m(10," Yeni Konu Ekle "),f()(),u(11,"div",7)(12,"div",8)(13,"div",9)(14,"div",10),k(15,"i",11),u(16,"input",12),at("ngModelChange",function(o){return dt(n.searchQuery,o)||(n.searchQuery=o),o}),U("input",function(){return n.onSearchChange()}),f()()(),u(17,"div",13)(18,"select",14),at("ngModelChange",function(o){return dt(n.selectedSinif,o)||(n.selectedSinif=o),o}),U("change",function(){return n.onSinifChange()}),u(19,"option",15),m(20,"T\xFCm s\u0131n\u0131flar"),f(),ee(21,wme,2,2,"option",16),f()(),u(22,"div",13)(23,"select",14),at("ngModelChange",function(o){return dt(n.selectedUnite,o)||(n.selectedUnite=o),o}),U("change",function(){return n.onUniteChange()}),u(24,"option",15),m(25,"T\xFCm \xFCniteler"),f(),ee(26,Mme,2,2,"option",16),f()(),u(27,"div",17)(28,"button",18),U("click",function(){return n.clearFilters()}),k(29,"i",19),m(30," Temizle "),f()()()(),u(31,"div",20)(32,"div",8)(33,"div",13)(34,"div",21)(35,"div",22),k(36,"i",23),f(),u(37,"div",24)(38,"h3"),m(39),f(),u(40,"p"),m(41,"Toplam Konu"),f()()()(),u(42,"div",13)(43,"div",21)(44,"div",25),k(45,"i",11),f(),u(46,"div",24)(47,"h3"),m(48),f(),u(49,"p"),m(50,"G\xF6r\xFCnt\xFClenen"),f()()()(),u(51,"div",13)(52,"div",21)(53,"div",26),k(54,"i",27),f(),u(55,"div",24)(56,"h3"),m(57),f(),u(58,"p"),m(59,"Toplam \xDCnite"),f()()()(),u(60,"div",13)(61,"div",21)(62,"div",28),k(63,"i",29),f(),u(64,"div",24)(65,"h3"),m(66),f(),u(67,"p"),m(68,"S\u0131n\u0131f Seviyesi"),f()()()()()(),ee(69,Eme,6,0,"div",30)(70,Pme,6,1,"div",31)(71,Ime,3,2,"div",32),f(),u(72,"div",33)(73,"div",34)(74,"div",35)(75,"div",36)(76,"h5",37),k(77,"i",38),m(78),f(),u(79,"button",39),U("click",function(){return n.closeKonuModal()}),f()(),u(80,"div",40)(81,"form")(82,"div",8)(83,"div",41)(84,"label",42),m(85,"\xDCnite Ad\u0131 *"),f(),u(86,"input",43),at("ngModelChange",function(o){return dt(n.formData.unite_adi,o)||(n.formData.unite_adi=o),o}),f()(),u(87,"div",9)(88,"label",44),m(89,"S\u0131n\u0131f Seviyesi *"),f(),u(90,"select",45),at("ngModelChange",function(o){return dt(n.formData.sinif_seviyesi,o)||(n.formData.sinif_seviyesi=o),o}),ee(91,Tme,2,2,"option",16),f()(),u(92,"div",46)(93,"label",47),m(94,"Konu Ad\u0131 *"),f(),u(95,"input",48),at("ngModelChange",function(o){return dt(n.formData.konu_adi,o)||(n.formData.konu_adi=o),o}),f()(),u(96,"div",46)(97,"label",49),m(98,"A\xE7\u0131klama"),f(),u(99,"textarea",50),at("ngModelChange",function(o){return dt(n.formData.aciklama,o)||(n.formData.aciklama=o),o}),f()()()()(),u(100,"div",51)(101,"button",52),U("click",function(){return n.closeKonuModal()}),m(102,"\u0130ptal"),f(),u(103,"button",53),U("click",function(){return n.saveKonu()}),k(104,"i",54),m(105),f()()()()(),u(106,"div",33)(107,"div",55)(108,"div",35)(109,"div",36)(110,"h5",56),k(111,"i",57),m(112," Konu Sil "),f(),u(113,"button",39),U("click",function(){return n.closeDeleteModal()}),f()(),u(114,"div",40)(115,"p"),m(116,"Bu konuyu silmek istedi\u011Finizden emin misiniz?"),f(),ee(117,Bme,6,3,"div",58),u(118,"p",59),k(119,"i",60),m(120," Bu i\u015Flem geri al\u0131namaz! "),f()(),u(121,"div",51)(122,"button",52),U("click",function(){return n.closeDeleteModal()}),m(123,"\u0130ptal"),f(),u(124,"button",61),U("click",function(){return n.deleteKonu()}),k(125,"i",62),m(126," Sil "),f()()()()(),ee(127,Nme,1,2,"div",63)),t&2&&(x(16),st("ngModel",n.searchQuery),x(2),st("ngModel",n.selectedSinif),x(3),S("ngForOf",n.sinifOptions),x(2),st("ngModel",n.selectedUnite),x(3),S("ngForOf",n.uniteOptions),x(13),W(n.konular.length),x(9),W(n.filteredKonular.length),x(9),W(n.uniteOptions.length),x(9),W(n.sinifOptions.length),x(3),S("ngIf",n.isLoading),x(),S("ngIf",n.error&&!n.isLoading),x(),S("ngIf",!n.isLoading&&!n.error),x(),It("display",n.showKonuModal?"block":"none"),xe("show",n.showKonuModal),wi("aria-hidden",!n.showKonuModal),x(6),he(" ",n.editingKonu?"Konu D\xFCzenle":"Yeni Konu Ekle"," "),x(8),st("ngModel",n.formData.unite_adi),x(4),st("ngModel",n.formData.sinif_seviyesi),x(),S("ngForOf",n.sinifOptions),x(4),st("ngModel",n.formData.konu_adi),x(4),st("ngModel",n.formData.aciklama),x(6),he(" ",n.editingKonu?"G\xFCncelle":"Kaydet"," "),x(),It("display",n.showDeleteModal?"block":"none"),xe("show",n.showDeleteModal),wi("aria-hidden",!n.showDeleteModal),x(11),S("ngIf",n.deletingKonu),x(10),S("ngIf",n.showKonuModal||n.showDeleteModal))},dependencies:[yt,lt,$r,Kn,Yn,rn,qn,fn,Gr,Dm,Un,Wu],styles:[".konu-islemleri-container[_ngcontent-%COMP%]{padding:20px;background-color:#f8f9fa;min-height:100vh}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;padding:20px;background:#fff;border-radius:12px;box-shadow:0 2px 10px #0000001a}.page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#2c3e50;font-weight:600}.page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0 0;font-size:14px}.filters-section[_ngcontent-%COMP%]{margin-bottom:25px;padding:20px;background:#fff;border-radius:12px;box-shadow:0 2px 10px #0000001a}.filters-section[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]{position:relative}.filters-section[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:12px;top:50%;transform:translateY(-50%);color:#6c757d;z-index:5}.filters-section[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{padding-left:40px;border:1px solid #e0e0e0;border-radius:8px}.filters-section[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 0 .2rem #007bff40}.stats-section[_ngcontent-%COMP%]{margin-bottom:25px}.stats-section[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{display:flex;align-items:center;padding:20px;background:#fff;border-radius:12px;box-shadow:0 2px 10px #0000001a;transition:transform .2s ease}.stats-section[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.stats-section[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:10px;display:flex;align-items:center;justify-content:center;margin-right:15px}.stats-section[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px;color:#fff}.stats-section[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:600;color:#2c3e50}.stats-section[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px;color:#6c757d}.loading-section[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;background:#fff;border-radius:12px;box-shadow:0 2px 10px #0000001a}.konular-section[_ngcontent-%COMP%]   .konular-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:20px}.konular-section[_ngcontent-%COMP%]   .konu-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 10px #0000001a;transition:transform .2s ease,box-shadow .2s ease;overflow:hidden}.konular-section[_ngcontent-%COMP%]   .konu-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 4px 20px #00000026}.konular-section[_ngcontent-%COMP%]   .konu-card[_ngcontent-%COMP%]   .konu-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:15px 20px 10px;border-bottom:1px solid #f0f0f0}.konular-section[_ngcontent-%COMP%]   .konu-card[_ngcontent-%COMP%]   .konu-header[_ngcontent-%COMP%]   .konu-badge[_ngcontent-%COMP%]   .sinif-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:4px 12px;border-radius:20px;font-size:12px;font-weight:500}.konular-section[_ngcontent-%COMP%]   .konu-card[_ngcontent-%COMP%]   .konu-header[_ngcontent-%COMP%]   .konu-actions[_ngcontent-%COMP%]{display:flex;gap:8px}.konular-section[_ngcontent-%COMP%]   .konu-card[_ngcontent-%COMP%]   .konu-header[_ngcontent-%COMP%]   .konu-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{border:none;background:none;width:35px;height:35px;border-radius:8px;display:flex;align-items:center;justify-content:center;transition:all .2s ease;cursor:pointer}.konular-section[_ngcontent-%COMP%]   .konu-card[_ngcontent-%COMP%]   .konu-header[_ngcontent-%COMP%]   .konu-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.konular-section[_ngcontent-%COMP%]   .konu-card[_ngcontent-%COMP%]   .konu-header[_ngcontent-%COMP%]   .konu-actions[_ngcontent-%COMP%]   .action-btn.edit-btn[_ngcontent-%COMP%]{color:#007bff;background-color:#007bff1a}.konular-section[_ngcontent-%COMP%]   .konu-card[_ngcontent-%COMP%]   .konu-header[_ngcontent-%COMP%]   .konu-actions[_ngcontent-%COMP%]   .action-btn.edit-btn[_ngcontent-%COMP%]:hover{background-color:#007bff33}.konular-section[_ngcontent-%COMP%]   .konu-card[_ngcontent-%COMP%]   .konu-header[_ngcontent-%COMP%]   .konu-actions[_ngcontent-%COMP%]   .action-btn.delete-btn[_ngcontent-%COMP%]{color:#dc3545;background-color:#dc35451a}.konular-section[_ngcontent-%COMP%]   .konu-card[_ngcontent-%COMP%]   .konu-header[_ngcontent-%COMP%]   .konu-actions[_ngcontent-%COMP%]   .action-btn.delete-btn[_ngcontent-%COMP%]:hover{background-color:#dc354533}.konular-section[_ngcontent-%COMP%]   .konu-card[_ngcontent-%COMP%]   .konu-content[_ngcontent-%COMP%]{padding:15px 20px}.konular-section[_ngcontent-%COMP%]   .konu-card[_ngcontent-%COMP%]   .konu-content[_ngcontent-%COMP%]   .konu-title[_ngcontent-%COMP%]{margin:0 0 10px;font-size:18px;font-weight:600;color:#2c3e50;line-height:1.3}.konular-section[_ngcontent-%COMP%]   .konu-card[_ngcontent-%COMP%]   .konu-content[_ngcontent-%COMP%]   .konu-unite[_ngcontent-%COMP%]{margin:0 0 10px;color:#6c757d;font-size:14px;display:flex;align-items:center}.konular-section[_ngcontent-%COMP%]   .konu-card[_ngcontent-%COMP%]   .konu-content[_ngcontent-%COMP%]   .konu-description[_ngcontent-%COMP%]{margin:0;color:#868e96;font-size:13px;line-height:1.4;max-height:40px;overflow:hidden;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.konular-section[_ngcontent-%COMP%]   .konu-card[_ngcontent-%COMP%]   .konu-footer[_ngcontent-%COMP%]{padding:10px 20px 15px;border-top:1px solid #f0f0f0}.konular-section[_ngcontent-%COMP%]   .konu-card[_ngcontent-%COMP%]   .konu-footer[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:12px}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:80px 20px;background:#fff;border-radius:12px;box-shadow:0 2px 10px #0000001a}.empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{margin-bottom:20px}.empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:64px;color:#dee2e6}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#495057;margin-bottom:10px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6c757d;margin-bottom:30px}.modal[_ngcontent-%COMP%]{z-index:1050}.modal.show[_ngcontent-%COMP%]{display:block!important}.modal[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{margin:1.75rem auto}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{border:none;border-radius:12px;box-shadow:0 10px 40px #0003}.modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border-radius:12px 12px 0 0;border-bottom:none}.modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]{font-weight:600}.modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{filter:invert(1)}.modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:30px}.modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{font-weight:500;color:#495057;margin-bottom:8px}.modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%], .modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]{border:1px solid #e0e0e0;border-radius:8px;padding:10px 12px}.modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus, .modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 .2rem #667eea40}.modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   textarea.form-control[_ngcontent-%COMP%]{resize:vertical}.modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{border-top:1px solid #e9ecef;padding:20px 30px}.modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:8px 20px;border-radius:6px;font-weight:500}.modal-backdrop[_ngcontent-%COMP%]{z-index:1040;background-color:#00000080}.modal-backdrop.show[_ngcontent-%COMP%]{opacity:1}.alert[_ngcontent-%COMP%]{border:none;border-radius:8px;padding:15px 20px;margin-bottom:20px}.alert.alert-danger[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24;border-left:4px solid #dc3545}.alert.alert-warning[_ngcontent-%COMP%]{background-color:#fff3cd;color:#856404;border-left:4px solid #ffc107}@media (max-width: 768px){.konu-islemleri-container[_ngcontent-%COMP%]{padding:15px}.page-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:15px;padding:15px}.filters-section[_ngcontent-%COMP%], .stats-section[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{padding:15px}.konular-section[_ngcontent-%COMP%]   .konular-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:15px}.modal-dialog[_ngcontent-%COMP%]{margin:1rem}.modal-body[_ngcontent-%COMP%]{padding:20px}}@media (max-width: 576px){.stats-section[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-3[_ngcontent-%COMP%]{margin-bottom:15px}.filters-section[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-4[_ngcontent-%COMP%], .filters-section[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-3[_ngcontent-%COMP%], .filters-section[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-2[_ngcontent-%COMP%]{margin-bottom:10px}}"]})};function Lme(i,e){i&1&&(u(0,"div",4)(1,"div",5)(2,"span",6),m(3,"Y\xFCkleniyor..."),f()(),u(4,"p",7),m(5,"Konular y\xFCkleniyor..."),f()())}function Rme(i,e){if(i&1){let t=Ae();u(0,"div",8),k(1,"i",9),m(2),u(3,"button",10),U("click",function(){K(t);let r=F();return Y(r.loadData())}),k(4,"i",11),m(5," Tekrar Dene "),f()()}if(i&2){let t=F();x(2),he(" ",t.error," ")}}function zme(i,e){if(i&1&&(u(0,"span",22),k(1,"i",25),m(2),f()),i&2){let t=F(3);x(2),he(" ",t.studentInfo.grup||t.studentInfo.grubu," ")}}function jme(i,e){if(i&1&&(u(0,"span",22),k(1,"i",26),m(2),f()),i&2){let t=F(3);x(2),he(" ",t.studentInfo.ogretmeni," ")}}function Vme(i,e){if(i&1&&(u(0,"div",16)(1,"div",17)(2,"div",18),k(3,"i",19),f(),u(4,"div",20)(5,"h3"),m(6),f(),u(7,"div",21)(8,"span",22),k(9,"i",23),m(10),f(),ee(11,zme,3,1,"span",24)(12,jme,3,1,"span",24),f()()()()),i&2){let t=F(2);x(6),W(t.studentInfo.adi_soyadi),x(4),he(" ",t.studentInfo.sinifi," "),x(),S("ngIf",t.studentInfo.grup||t.studentInfo.grubu),x(),S("ngIf",t.studentInfo.ogretmeni)}}function Ume(i,e){if(i&1&&(u(0,"div",27)(1,"div",28)(2,"div",29)(3,"div",30),k(4,"i",31),f(),u(5,"div",32)(6,"h4"),m(7),f(),u(8,"p"),m(9,"\u0130\u015Flenen Konu"),f()()(),u(10,"div",29)(11,"div",30),k(12,"i",33),f(),u(13,"div",32)(14,"h4"),m(15),f(),u(16,"p"),m(17,"Toplam Konu"),f()()(),u(18,"div",29)(19,"div",30),k(20,"i",34),f(),u(21,"div",32)(22,"h4"),m(23),f(),u(24,"p"),m(25,"\u0130lerleme"),f()()(),u(26,"div",29)(27,"div",30),k(28,"i",35),f(),u(29,"div",32)(30,"h4"),m(31),f(),u(32,"p"),m(33,"\xDCnite"),f()()()()()),i&2){let t=F(2);x(7),W(t.getTotalProcessedTopics()),x(8),W(t.getTotalTopics()),x(8),he("",t.getOverallProgress(),"%"),x(8),W(t.getUnitesByGroup().length)}}function Hme(i,e){if(i&1&&(u(0,"p",64),m(1),f()),i&2){let t=F().$implicit;x(),he(" ",t.aciklama," ")}}function Gme(i,e){if(i&1&&(u(0,"div",65)(1,"small",66),k(2,"i",67),m(3),f()()),i&2){let t=F().$implicit,n=F(4);x(3),he(" ",n.formatDate(n.getKonuIslemeTarihi(t.id))," ")}}function $me(i,e){i&1&&(u(0,"div",68)(1,"span",69),k(2,"i",70),m(3," Tamamland\u0131 "),f()())}function Wme(i,e){if(i&1&&(u(0,"div",54)(1,"div",55),k(2,"i",56),f(),u(3,"div",57)(4,"div",58)(5,"h5",59),m(6),f(),u(7,"span",60),m(8),f()(),ee(9,Hme,2,1,"p",61)(10,Gme,4,1,"div",62),f(),ee(11,$me,4,0,"div",63),f()),i&2){let t=e.$implicit,n=e.index,r=F(4);xe("completed",r.konuIslendi(t.id)),x(2),xe("bi-check-circle-fill",r.konuIslendi(t.id))("bi-circle",!r.konuIslendi(t.id))("text-success",r.konuIslendi(t.id))("text-muted",!r.konuIslendi(t.id)),x(4),hn(" ",n+1,". ",t.konu_adi," "),x(2),W(t.sinif_seviyesi),x(),S("ngIf",t.aciklama),x(),S("ngIf",r.konuIslendi(t.id)),x(),S("ngIf",r.konuIslendi(t.id))}}function qme(i,e){if(i&1&&(u(0,"div",38)(1,"div",39)(2,"div",40)(3,"div",41),k(4,"i",42),f(),u(5,"div",43)(6,"h4"),m(7),f()()(),u(8,"div",44)(9,"div",45)(10,"span",46),m(11),f(),u(12,"span",47),m(13,"\u0130\u015Flenen"),f()(),u(14,"div",45)(15,"span",46),m(16),f(),u(17,"span",47),m(18,"Toplam"),f()(),u(19,"div",45)(20,"span",48),m(21),f()()()(),u(22,"div",49)(23,"div",50),k(24,"div",51),f()(),u(25,"div",52),ee(26,Wme,12,16,"div",53),f()()),i&2){let t=e.$implicit,n=e.index,r=F(3);x(7),hn("",n+1,". ",t.unite_adi,""),x(4),W(r.getProcessedTopicsInUnit(t)),x(5),W(t.konular.length),x(5),he("",r.getUnitProgress(t),"%"),x(3),It("width",r.getUnitProgress(t),"%"),x(2),S("ngForOf",t.konular)}}function Kme(i,e){if(i&1&&(u(0,"div",36),ee(1,qme,27,8,"div",37),f()),i&2){let t=F(2);x(),S("ngForOf",t.getUnitesByGroup())}}function Yme(i,e){i&1&&(u(0,"div",71)(1,"div",72),k(2,"i",73),u(3,"h3"),m(4,"Hen\xFCz \u0130\u015Flenen Konu Yok"),f(),u(5,"p"),m(6,"\xD6\u011Fretmeniniz konular\u0131 i\u015Fledik\xE7e burada g\xF6r\xFCnecek. Sab\u0131rl\u0131 ol! \u{1F4DA}"),f()()())}function Xme(i,e){if(i&1&&(u(0,"div"),ee(1,Vme,13,4,"div",12)(2,Ume,34,4,"div",13)(3,Kme,2,1,"div",14)(4,Yme,7,0,"div",15),f()),i&2){let t=F();x(),S("ngIf",t.studentInfo),x(),S("ngIf",t.getUnitesByGroup().length>0),x(),S("ngIf",t.getUnitesByGroup().length>0),x(),S("ngIf",!t.isLoading&&!t.error&&t.getUnitesByGroup().length===0)}}var z5=class i{constructor(e){this.http=e}studentInfo=null;konular=[];islenenKonular=[];isLoading=!0;error=null;apiBaseUrl="./server/api";ngOnInit(){this.loadData()}loadData(){this.isLoading=!0,this.error=null,this.loadStudentInfo().then(()=>{this.studentInfo?Promise.all([this.loadKonular(),this.loadIslenenKonular()]).then(()=>{this.isLoading=!1}).catch(e=>{console.error("Error loading data:",e),this.error="Veriler y\xFCklenirken hata olu\u015Ftu.",this.isLoading=!1}):(this.error="\xD6\u011Frenci bilgileri al\u0131namad\u0131.",this.isLoading=!1)})}loadStudentInfo(){return new Promise((e,t)=>{let n="",r=localStorage.getItem("user")||sessionStorage.getItem("user");if(r)try{n=JSON.parse(r).token||""}catch(o){console.error("Error parsing user data:",o)}if(!n){this.error="Oturum bulunamad\u0131. L\xFCtfen tekrar giri\u015F yap\u0131n.",t("No token");return}this.http.post(`${this.apiBaseUrl}/ogrenci_profil.php`,{},{headers:{Authorization:`Bearer ${n}`}}).subscribe({next:o=>{o.success?(this.studentInfo=o.data,e()):t(o.message||"\xD6\u011Frenci bilgileri al\u0131namad\u0131")},error:o=>{console.error("Error loading student info:",o),t("\xD6\u011Frenci bilgileri y\xFCklenemedi")}})})}loadKonular(){return new Promise((e,t)=>{let n="",r=localStorage.getItem("user")||sessionStorage.getItem("user");if(r)try{n=JSON.parse(r).token||""}catch(s){console.error("Error parsing user data:",s)}let o={};n&&(o.Authorization=`Bearer ${n}`),this.http.get(`${this.apiBaseUrl}/konu_listesi.php`,{headers:o}).subscribe({next:s=>{s.success?(this.konular=s.konular||[],e()):t(s.message||"Konular y\xFCklenemedi")},error:s=>{console.error("Error loading topics:",s),t("Konular y\xFCklenirken hata olu\u015Ftu")}})})}loadIslenenKonular(){return new Promise(e=>{let t=this.studentInfo?.grup||this.studentInfo?.grubu;if(!t){e();return}let n="",r=localStorage.getItem("user")||sessionStorage.getItem("user");if(r)try{n=JSON.parse(r).token||""}catch(a){console.error("Error parsing user data:",a)}let o={};n&&(o.Authorization=`Bearer ${n}`);let s=`${this.apiBaseUrl}/ogrenci_islenen_konular.php?grup=${encodeURIComponent(t)}`;this.http.get(s,{headers:o}).subscribe({next:a=>{a.success&&a.islenen_konular?this.islenenKonular=a.islenen_konular.map(l=>ot(Ie({},l),{ogretmen_adi:this.studentInfo?.ogretmeni||"Bilinmeyen \xD6\u011Fretmen"})):this.islenenKonular=[],e()},error:a=>{this.islenenKonular=[],e()}})})}getUnitesByGroup(){if(!(this.studentInfo?.grup||this.studentInfo?.grubu))return[];let t=[...this.konular].sort((a,l)=>(a.id||0)-(l.id||0)),n=[],r=this.studentInfo?this.studentInfo.sinifi:"";r&&(r.toLowerCase().includes("mezun")||r==="12"||r==="12.S\u0131n\u0131f")?n=t:r?n=t.filter(a=>{let l=a.sinif_seviyesi,c=l.replace(".S\u0131n\u0131f",""),d=r.replace(".S\u0131n\u0131f","");return c===d||l===r||l===r+".S\u0131n\u0131f"||l+".S\u0131n\u0131f"===r}):n=t;let s=new Map;return n.forEach(a=>{s.has(a.unite_adi)||s.set(a.unite_adi,{unite_adi:a.unite_adi,konular:[]}),s.get(a.unite_adi).konular.push(a)}),Array.from(s.values())}konuIslendi(e){let t=this.studentInfo?.grup||this.studentInfo?.grubu;return t?this.islenenKonular.some(n=>n.konu_id===e&&n.grup_adi===t):!1}getKonuIslemeTarihi(e){let t=this.studentInfo?.grup||this.studentInfo?.grubu;if(!t)return null;let n=this.islenenKonular.find(r=>r.konu_id===e&&r.grup_adi===t);return n?n.isleme_tarihi:null}getProcessedTopicsInUnit(e){return e.konular.filter(t=>this.konuIslendi(t.id)).length}getUnitProgress(e){return e.konular.length===0?0:Math.round(this.getProcessedTopicsInUnit(e)/e.konular.length*100)}getTotalTopics(){return this.getUnitesByGroup().reduce((t,n)=>t+n.konular.length,0)}getTotalProcessedTopics(){let e=this.studentInfo?.grup||this.studentInfo?.grubu;return e?this.islenenKonular.filter(t=>t.grup_adi===e).length:0}getOverallProgress(){let e=this.getTotalTopics();return e===0?0:Math.round(this.getTotalProcessedTopics()/e*100)}formatDate(e){return new Date(e).toLocaleDateString("tr-TR")}Math=Math;static \u0275fac=function(t){return new(t||i)(ke(gt))};static \u0275cmp=Ke({type:i,selectors:[["app-ogrenci-islenen-konular-sayfasi"]],standalone:!1,decls:4,vars:3,consts:[[1,"student-processed-topics-page"],["class","loading-section",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[4,"ngIf"],[1,"loading-section"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-3","text-muted"],[1,"alert","alert-danger"],[1,"bi","bi-exclamation-triangle","me-2"],[1,"btn","btn-sm","btn-outline-danger","ms-3",3,"click"],[1,"bi","bi-arrow-clockwise","me-1"],["class","student-info-card",4,"ngIf"],["class","summary-stats",4,"ngIf"],["class","topics-container",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"student-info-card"],[1,"student-details"],[1,"student-avatar"],[1,"bi","bi-person-circle"],[1,"student-text"],[1,"student-meta"],[1,"meta-item"],[1,"bi","bi-mortarboard","me-1"],["class","meta-item",4,"ngIf"],[1,"bi","bi-people","me-1"],[1,"bi","bi-person-badge","me-1"],[1,"summary-stats"],[1,"stats-grid"],[1,"stat-card"],[1,"stat-icon"],[1,"bi","bi-bookmark-check-fill"],[1,"stat-content"],[1,"bi","bi-journal-text"],[1,"bi","bi-graph-up"],[1,"bi","bi-folder-check"],[1,"topics-container"],["class","unit-section",4,"ngFor","ngForOf"],[1,"unit-section"],[1,"unit-header"],[1,"unit-title"],[1,"unit-icon"],[1,"bi","bi-folder-fill"],[1,"unit-info"],[1,"unit-stats"],[1,"stat-item"],[1,"stat-number"],[1,"stat-label"],[1,"stat-percentage"],[1,"unit-progress"],[1,"progress-bar"],[1,"progress-fill"],[1,"topics-list"],["class","topic-item",3,"completed",4,"ngFor","ngForOf"],[1,"topic-item"],[1,"topic-status"],[1,"bi"],[1,"topic-content"],[1,"topic-header"],[1,"topic-title"],[1,"topic-class-badge"],["class","topic-description",4,"ngIf"],["class","topic-meta",4,"ngIf"],["class","topic-actions",4,"ngIf"],[1,"topic-description"],[1,"topic-meta"],[1,"processed-date"],[1,"bi","bi-calendar-check","me-1"],[1,"topic-actions"],[1,"completed-badge"],[1,"bi","bi-check-lg","me-1"],[1,"empty-state"],[1,"empty-content"],[1,"bi","bi-journal-x"]],template:function(t,n){t&1&&(u(0,"div",0),ee(1,Lme,6,0,"div",1)(2,Rme,6,1,"div",2)(3,Xme,5,4,"div",3),f()),t&2&&(x(),S("ngIf",n.isLoading),x(),S("ngIf",n.error&&!n.isLoading),x(),S("ngIf",!n.isLoading&&!n.error))},dependencies:[yt,lt],styles:[".student-processed-topics-page[_ngcontent-%COMP%]{min-height:100vh;background:#f8f9fa;color:#333;font-family:Inter,-apple-system,BlinkMacSystemFont,sans-serif}.student-processed-topics-page[_ngcontent-%COMP%]   .loading-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:50vh;color:#6c757d}.student-processed-topics-page[_ngcontent-%COMP%]   .loading-section[_ngcontent-%COMP%]   .spinner-border[_ngcontent-%COMP%]{width:3rem;height:3rem}.student-processed-topics-page[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{margin:1rem;border-radius:12px;box-shadow:0 4px 12px #0000001a}.student-processed-topics-page[_ngcontent-%COMP%]   .student-info-card[_ngcontent-%COMP%]{background:#fffffff2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:20px;padding:2rem;margin:1rem;box-shadow:0 8px 32px #0000001a;border:1px solid rgba(255,255,255,.2)}.student-processed-topics-page[_ngcontent-%COMP%]   .student-info-card[_ngcontent-%COMP%]   .student-details[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5rem}.student-processed-topics-page[_ngcontent-%COMP%]   .student-info-card[_ngcontent-%COMP%]   .student-details[_ngcontent-%COMP%]   .student-avatar[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;background:linear-gradient(135deg,#667eea,#764ba2);display:flex;align-items:center;justify-content:center;color:#fff;font-size:2rem;box-shadow:0 4px 12px #667eea4d}.student-processed-topics-page[_ngcontent-%COMP%]   .student-info-card[_ngcontent-%COMP%]   .student-details[_ngcontent-%COMP%]   .student-text[_ngcontent-%COMP%]{flex:1}.student-processed-topics-page[_ngcontent-%COMP%]   .student-info-card[_ngcontent-%COMP%]   .student-details[_ngcontent-%COMP%]   .student-text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:1.5rem;font-weight:600;color:#2d3748}.student-processed-topics-page[_ngcontent-%COMP%]   .student-info-card[_ngcontent-%COMP%]   .student-details[_ngcontent-%COMP%]   .student-text[_ngcontent-%COMP%]   .student-meta[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem}.student-processed-topics-page[_ngcontent-%COMP%]   .student-info-card[_ngcontent-%COMP%]   .student-details[_ngcontent-%COMP%]   .student-text[_ngcontent-%COMP%]   .student-meta[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%]{display:flex;align-items:center;background:#667eea1a;padding:.5rem 1rem;border-radius:25px;font-size:.9rem;color:#4a5568;font-weight:500}.student-processed-topics-page[_ngcontent-%COMP%]   .student-info-card[_ngcontent-%COMP%]   .student-details[_ngcontent-%COMP%]   .student-text[_ngcontent-%COMP%]   .student-meta[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#667eea}.student-processed-topics-page[_ngcontent-%COMP%]   .topics-container[_ngcontent-%COMP%]{margin:1rem;display:flex;flex-direction:column;gap:1.5rem}.student-processed-topics-page[_ngcontent-%COMP%]   .unit-section[_ngcontent-%COMP%]{background:#fffffff2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:16px;overflow:hidden;box-shadow:0 8px 32px #0000001a;border:1px solid rgba(255,255,255,.2)}.student-processed-topics-page[_ngcontent-%COMP%]   .unit-section[_ngcontent-%COMP%]   .unit-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:1.5rem;display:flex;justify-content:space-between;align-items:center}.student-processed-topics-page[_ngcontent-%COMP%]   .unit-section[_ngcontent-%COMP%]   .unit-header[_ngcontent-%COMP%]   .unit-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.student-processed-topics-page[_ngcontent-%COMP%]   .unit-section[_ngcontent-%COMP%]   .unit-header[_ngcontent-%COMP%]   .unit-title[_ngcontent-%COMP%]   .unit-icon[_ngcontent-%COMP%]{width:48px;height:48px;background:#fff3;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:1.5rem}.student-processed-topics-page[_ngcontent-%COMP%]   .unit-section[_ngcontent-%COMP%]   .unit-header[_ngcontent-%COMP%]   .unit-title[_ngcontent-%COMP%]   .unit-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:1.3rem;font-weight:600}.student-processed-topics-page[_ngcontent-%COMP%]   .unit-section[_ngcontent-%COMP%]   .unit-header[_ngcontent-%COMP%]   .unit-stats[_ngcontent-%COMP%]{display:flex;gap:1.5rem;align-items:center}.student-processed-topics-page[_ngcontent-%COMP%]   .unit-section[_ngcontent-%COMP%]   .unit-header[_ngcontent-%COMP%]   .unit-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{text-align:center}.student-processed-topics-page[_ngcontent-%COMP%]   .unit-section[_ngcontent-%COMP%]   .unit-header[_ngcontent-%COMP%]   .unit-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-number[_ngcontent-%COMP%]{display:block;font-size:1.5rem;font-weight:700;line-height:1}.student-processed-topics-page[_ngcontent-%COMP%]   .unit-section[_ngcontent-%COMP%]   .unit-header[_ngcontent-%COMP%]   .unit-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{display:block;font-size:.8rem;opacity:.9;margin-top:.2rem}.student-processed-topics-page[_ngcontent-%COMP%]   .unit-section[_ngcontent-%COMP%]   .unit-header[_ngcontent-%COMP%]   .unit-stats[_ngcontent-%COMP%]   .stat-percentage[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;background:#fff3;padding:.5rem 1rem;border-radius:25px;min-width:80px;text-align:center}.student-processed-topics-page[_ngcontent-%COMP%]   .unit-section[_ngcontent-%COMP%]   .unit-progress[_ngcontent-%COMP%]{padding:0 1.5rem 1rem;margin-top:-.5rem}.student-processed-topics-page[_ngcontent-%COMP%]   .unit-section[_ngcontent-%COMP%]   .unit-progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{width:100%;height:8px;background:#667eea33;border-radius:4px;overflow:hidden}.student-processed-topics-page[_ngcontent-%COMP%]   .unit-section[_ngcontent-%COMP%]   .unit-progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#667eea,#764ba2);border-radius:4px;transition:width .5s ease}.student-processed-topics-page[_ngcontent-%COMP%]   .unit-section[_ngcontent-%COMP%]   .topics-list[_ngcontent-%COMP%]{padding:0}.student-processed-topics-page[_ngcontent-%COMP%]   .unit-section[_ngcontent-%COMP%]   .topics-list[_ngcontent-%COMP%]   .topic-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;padding:1.5rem;border-bottom:1px solid rgba(0,0,0,.05);transition:all .3s ease}.student-processed-topics-page[_ngcontent-%COMP%]   .unit-section[_ngcontent-%COMP%]   .topics-list[_ngcontent-%COMP%]   .topic-item[_ngcontent-%COMP%]:hover{background:#667eea05}.student-processed-topics-page[_ngcontent-%COMP%]   .unit-section[_ngcontent-%COMP%]   .topics-list[_ngcontent-%COMP%]   .topic-item.completed[_ngcontent-%COMP%]{background:#48bb780d;border-left:4px solid #48bb78}.student-processed-topics-page[_ngcontent-%COMP%]   .unit-section[_ngcontent-%COMP%]   .topics-list[_ngcontent-%COMP%]   .topic-item.completed[_ngcontent-%COMP%]   .topic-status[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#48bb78!important;animation:_ngcontent-%COMP%_checkAnimation .5s ease}.student-processed-topics-page[_ngcontent-%COMP%]   .unit-section[_ngcontent-%COMP%]   .topics-list[_ngcontent-%COMP%]   .topic-item.completed[_ngcontent-%COMP%]   .topic-title[_ngcontent-%COMP%]{color:#2d3748;text-decoration:line-through;opacity:.8}.student-processed-topics-page[_ngcontent-%COMP%]   .unit-section[_ngcontent-%COMP%]   .topics-list[_ngcontent-%COMP%]   .topic-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.student-processed-topics-page[_ngcontent-%COMP%]   .unit-section[_ngcontent-%COMP%]   .topics-list[_ngcontent-%COMP%]   .topic-item[_ngcontent-%COMP%]   .topic-status[_ngcontent-%COMP%]{margin-right:1rem;margin-top:.2rem}.student-processed-topics-page[_ngcontent-%COMP%]   .unit-section[_ngcontent-%COMP%]   .topics-list[_ngcontent-%COMP%]   .topic-item[_ngcontent-%COMP%]   .topic-status[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem;color:#cbd5e0;transition:all .3s ease}.student-processed-topics-page[_ngcontent-%COMP%]   .unit-section[_ngcontent-%COMP%]   .topics-list[_ngcontent-%COMP%]   .topic-item[_ngcontent-%COMP%]   .topic-content[_ngcontent-%COMP%]{flex:1}.student-processed-topics-page[_ngcontent-%COMP%]   .unit-section[_ngcontent-%COMP%]   .topics-list[_ngcontent-%COMP%]   .topic-item[_ngcontent-%COMP%]   .topic-content[_ngcontent-%COMP%]   .topic-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:.5rem}.student-processed-topics-page[_ngcontent-%COMP%]   .unit-section[_ngcontent-%COMP%]   .topics-list[_ngcontent-%COMP%]   .topic-item[_ngcontent-%COMP%]   .topic-content[_ngcontent-%COMP%]   .topic-header[_ngcontent-%COMP%]   .topic-title[_ngcontent-%COMP%]{margin:0;font-size:1.1rem;font-weight:600;color:#2d3748;line-height:1.4}.student-processed-topics-page[_ngcontent-%COMP%]   .unit-section[_ngcontent-%COMP%]   .topics-list[_ngcontent-%COMP%]   .topic-item[_ngcontent-%COMP%]   .topic-content[_ngcontent-%COMP%]   .topic-header[_ngcontent-%COMP%]   .topic-class-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:.25rem .75rem;border-radius:15px;font-size:.8rem;font-weight:500;white-space:nowrap;margin-left:1rem}.student-processed-topics-page[_ngcontent-%COMP%]   .unit-section[_ngcontent-%COMP%]   .topics-list[_ngcontent-%COMP%]   .topic-item[_ngcontent-%COMP%]   .topic-content[_ngcontent-%COMP%]   .topic-description[_ngcontent-%COMP%]{color:#718096;font-size:.9rem;line-height:1.5;margin-bottom:.5rem}.student-processed-topics-page[_ngcontent-%COMP%]   .unit-section[_ngcontent-%COMP%]   .topics-list[_ngcontent-%COMP%]   .topic-item[_ngcontent-%COMP%]   .topic-content[_ngcontent-%COMP%]   .topic-meta[_ngcontent-%COMP%]   .processed-date[_ngcontent-%COMP%]{color:#48bb78;font-weight:500;display:flex;align-items:center}.student-processed-topics-page[_ngcontent-%COMP%]   .unit-section[_ngcontent-%COMP%]   .topics-list[_ngcontent-%COMP%]   .topic-item[_ngcontent-%COMP%]   .topic-content[_ngcontent-%COMP%]   .topic-meta[_ngcontent-%COMP%]   .processed-date[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.25rem}.student-processed-topics-page[_ngcontent-%COMP%]   .unit-section[_ngcontent-%COMP%]   .topics-list[_ngcontent-%COMP%]   .topic-item[_ngcontent-%COMP%]   .topic-actions[_ngcontent-%COMP%]   .completed-badge[_ngcontent-%COMP%]{background:#48bb781a;color:#48bb78;padding:.5rem 1rem;border-radius:20px;font-size:.9rem;font-weight:600;display:flex;align-items:center;white-space:nowrap}.student-processed-topics-page[_ngcontent-%COMP%]   .unit-section[_ngcontent-%COMP%]   .topics-list[_ngcontent-%COMP%]   .topic-item[_ngcontent-%COMP%]   .topic-actions[_ngcontent-%COMP%]   .completed-badge[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.25rem}.student-processed-topics-page[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem;color:#6c757d}.student-processed-topics-page[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]{max-width:400px;margin:0 auto}.student-processed-topics-page[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:1rem;opacity:.7}.student-processed-topics-page[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:1rem;font-weight:600}.student-processed-topics-page[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;opacity:.8;line-height:1.6}.student-processed-topics-page[_ngcontent-%COMP%]   .summary-stats[_ngcontent-%COMP%]{margin:2rem 1rem}.student-processed-topics-page[_ngcontent-%COMP%]   .summary-stats[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem}.student-processed-topics-page[_ngcontent-%COMP%]   .summary-stats[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{background:#fffffff2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:16px;padding:1.5rem;display:flex;align-items:center;gap:1rem;box-shadow:0 8px 32px #0000001a;border:1px solid rgba(255,255,255,.2);transition:transform .3s ease}.student-processed-topics-page[_ngcontent-%COMP%]   .summary-stats[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.student-processed-topics-page[_ngcontent-%COMP%]   .summary-stats[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:12px;background:linear-gradient(135deg,#667eea,#764ba2);display:flex;align-items:center;justify-content:center;color:#fff;font-size:1.5rem}.student-processed-topics-page[_ngcontent-%COMP%]   .summary-stats[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 .25rem;font-size:2rem;font-weight:700;color:#2d3748}.student-processed-topics-page[_ngcontent-%COMP%]   .summary-stats[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#718096;font-weight:500}@keyframes _ngcontent-%COMP%_checkAnimation{0%{transform:scale(1)}50%{transform:scale(1.2)}to{transform:scale(1)}}@media (max-width: 768px){.student-processed-topics-page[_ngcontent-%COMP%]   .student-info-card[_ngcontent-%COMP%]   .student-details[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:1rem}.student-processed-topics-page[_ngcontent-%COMP%]   .student-info-card[_ngcontent-%COMP%]   .student-details[_ngcontent-%COMP%]   .student-meta[_ngcontent-%COMP%]{justify-content:center}.student-processed-topics-page[_ngcontent-%COMP%]   .unit-header[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;text-align:center}.student-processed-topics-page[_ngcontent-%COMP%]   .unit-header[_ngcontent-%COMP%]   .unit-stats[_ngcontent-%COMP%]{justify-content:center}.student-processed-topics-page[_ngcontent-%COMP%]   .topic-item[_ngcontent-%COMP%], .student-processed-topics-page[_ngcontent-%COMP%]   .topic-item[_ngcontent-%COMP%]   .topic-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start!important}.student-processed-topics-page[_ngcontent-%COMP%]   .topic-item[_ngcontent-%COMP%]   .topic-header[_ngcontent-%COMP%]   .topic-class-badge[_ngcontent-%COMP%]{margin-left:0;margin-top:.5rem}.student-processed-topics-page[_ngcontent-%COMP%]   .topic-item[_ngcontent-%COMP%]   .topic-actions[_ngcontent-%COMP%]{align-self:flex-start;margin-top:1rem}.student-processed-topics-page[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};function Qme(i,e){i&1&&(u(0,"div",5)(1,"div",6)(2,"span",7),m(3,"Y\xFCkleniyor..."),f()(),u(4,"p",8),m(5,"Ders notlar\u0131 y\xFCkleniyor..."),f()())}function Jme(i,e){if(i&1){let t=Ae();u(0,"div",9),k(1,"i",10),m(2),u(3,"button",11),U("click",function(){K(t);let r=F();return Y(r.loadDersKayitlari())}),m(4," Tekrar Dene "),f()()}if(i&2){let t=F();x(2),he(" ",t.error," ")}}function Zme(i,e){if(i&1&&(u(0,"span",19),m(1),f()),i&2){let t=F(2);x(),he(" ",t.dersKayitlari.length," d\xF6k\xFCman ")}}function exe(i,e){i&1&&(u(0,"div",20),k(1,"i",21),u(2,"h4"),m(3,"Hen\xFCz Ders Notu Bulunmuyor"),f(),u(4,"p",22),m(5,"Bu grup i\xE7in hen\xFCz hi\xE7 ders notu y\xFCklenmemi\u015F."),f()())}function txe(i,e){if(i&1){let t=Ae();u(0,"div",25)(1,"div",26)(2,"div",27),k(3,"i",28),f(),u(4,"div",29)(5,"h3"),m(6),f(),u(7,"span",30),m(8,"PDF Dok\xFCman\u0131"),f()()(),u(9,"div",31)(10,"div",32)(11,"span",33),k(12,"i",34),m(13," Tarih: "),f(),u(14,"span",35),m(15),f()(),u(16,"div",32)(17,"span",33),k(18,"i",36),m(19," Sayfa Say\u0131s\u0131: "),f(),u(20,"span",35),m(21),f()(),u(22,"div",32)(23,"span",33),k(24,"i",37),m(25," \xD6\u011Fretmen: "),f(),u(26,"span",35),m(27),f()()(),u(28,"div",38)(29,"button",39),U("click",function(){let r=K(t).$implicit,o=F(3);return Y(o.viewLessonPdf(r.pdf_dosya_yolu))}),k(30,"i",40),m(31," PDF G\xF6r\xFCnt\xFCle "),f()()()}if(i&2){let t=e.$implicit,n=F(3);x(6),W(t.pdf_adi),x(9),W(n.formatDate(t.olusturma_zamani)),x(6),he("",t.sayfa_sayisi," sayfa"),x(6),W(t.ogretmen_adi||"Belirtilmemi\u015F"),x(2),S("disabled",!t.pdf_dosya_yolu)}}function nxe(i,e){if(i&1&&(u(0,"div",23),ee(1,txe,32,5,"div",24),f()),i&2){let t=F(2);x(),S("ngForOf",t.dersKayitlari)}}function ixe(i,e){if(i&1&&(u(0,"div",12)(1,"div",13)(2,"div",14),k(3,"i",15),u(4,"h2"),m(5,"Ders Notlar\u0131 ve Dok\xFCmanlar"),f(),ee(6,Zme,2,1,"span",16),f(),ee(7,exe,6,0,"div",17)(8,nxe,2,1,"div",18),f()()),i&2){let t=F();x(6),S("ngIf",t.dersKayitlari.length>0),x(),S("ngIf",t.dersKayitlari.length===0),x(),S("ngIf",t.dersKayitlari.length>0)}}function rxe(i,e){if(i&1){let t=Ae();u(0,"button",53),U("click",function(){K(t);let r=F(2);return Y(r.openPdfInNewTab())}),k(1,"i",54),m(2," Yeni Sekmede A\xE7 "),f()}}function oxe(i,e){if(i&1){let t=Ae();u(0,"button",53),U("click",function(){K(t);let r=F(2);return Y(r.downloadPdf())}),k(1,"i",55),m(2," \u0130ndir "),f()}}function sxe(i,e){i&1&&(u(0,"div",56)(1,"div",6)(2,"span",7),m(3,"PDF y\xFCkleniyor..."),f()(),u(4,"p",57),m(5,"PDF y\xFCkleniyor..."),f()())}function axe(i,e){if(i&1){let t=Ae();u(0,"iframe",58),U("load",function(){K(t);let r=F(2);return Y(r.onPdfLoad())})("error",function(r){K(t);let o=F(2);return Y(o.onPdfLoadError(r))}),f()}if(i&2){let t=F(2);S("src",t.selectedPdf+"#toolbar=1",Bp)}}function lxe(i,e){i&1&&(u(0,"div",59)(1,"div",60),k(2,"i",61),u(3,"h4"),m(4,"PDF Se\xE7ilmedi"),f(),u(5,"p"),m(6,"G\xF6r\xFCnt\xFClemek i\xE7in bir PDF se\xE7in."),f()()())}function cxe(i,e){if(i&1){let t=Ae();u(0,"div",41),U("click",function(){K(t);let r=F();return Y(r.closePdfViewer())}),u(1,"div",42),U("click",function(r){return K(t),Y(r.stopPropagation())}),u(2,"div",43)(3,"h3"),k(4,"i",44),m(5," PDF G\xF6r\xFCnt\xFCleyici "),f(),u(6,"div",45),ee(7,rxe,3,0,"button",46)(8,oxe,3,0,"button",46),u(9,"button",47),U("click",function(){K(t);let r=F();return Y(r.closePdfViewer())}),k(10,"i",48),f()()(),u(11,"div",49),ee(12,sxe,6,0,"div",50)(13,axe,1,1,"iframe",51)(14,lxe,7,0,"div",52),f()()()}if(i&2){let t=F();x(7),S("ngIf",t.selectedPdf),x(),S("ngIf",t.selectedPdf),x(4),S("ngIf",!t.pdfLoaded&&t.selectedPdf),x(),S("ngIf",t.selectedPdf),x(),S("ngIf",!t.selectedPdf)}}var j5=class i{constructor(e){this.http=e}dersKayitlari=[];isLoading=!0;error=null;selectedPdf=null;showPdfModal=!1;pdfLoaded=!1;studentInfo=null;ngOnInit(){this.loadData()}loadData(){this.isLoading=!0,this.error=null,this.loadStudentInfo().then(()=>{this.studentInfo?this.loadDersKayitlari().then(()=>{this.isLoading=!1}).catch(e=>{console.error("Error loading lessons:",e),this.error="Ders kay\u0131tlar\u0131 y\xFCklenirken hata olu\u015Ftu.",this.isLoading=!1}):(this.error="\xD6\u011Frenci bilgileri al\u0131namad\u0131.",this.isLoading=!1)}).catch(e=>{console.error("Error loading student info:",e),this.error="\xD6\u011Frenci bilgileri y\xFCklenirken hata olu\u015Ftu.",this.isLoading=!1})}loadStudentInfo(){return new Promise((e,t)=>{let n=localStorage.getItem("user")||sessionStorage.getItem("user");n?(this.studentInfo=JSON.parse(n),e()):t("Kullan\u0131c\u0131 bilgisi bulunamad\u0131.")})}loadDersKayitlari(){return new Promise((e,t)=>{if(!this.studentInfo||!this.studentInfo.grubu){this.error="\xD6\u011Frenci grup bilgisi bulunamad\u0131",this.isLoading=!1,t("\xD6\u011Frenci grup bilgisi bulunamad\u0131");return}let n="",r=localStorage.getItem("user")||sessionStorage.getItem("user");r&&(n=JSON.parse(r).token||"");let o=new xt({Authorization:`Bearer ${n}`}),s=`./server/api/grup_ders_kayitlari.php?grup=${encodeURIComponent(this.studentInfo.grubu)}`;this.http.get(s,{headers:o}).subscribe({next:a=>{a.success&&a.data?this.dersKayitlari=a.data.map(l=>ot(Ie({},l),{ogretmen_adi:this.studentInfo?.ogretmeni||"Bilinmeyen \xD6\u011Fretmen"})):this.dersKayitlari=[],e()},error:a=>{this.error="Sunucu hatas\u0131: "+(a.error?.message||a.message),this.isLoading=!1,t(a)}})})}viewLessonPdf(e){if(!e){alert("PDF dosya ad\u0131 bulunamad\u0131!");return}this.pdfLoaded=!1,this.selectedPdf=null,this.showPdfModal=!0,setTimeout(()=>{this.selectedPdf=`./server/api/pdf_viewer.php?file=${encodeURIComponent(e)}`},100)}closePdfViewer(){this.showPdfModal=!1,this.selectedPdf=null,this.pdfLoaded=!1}onPdfLoad(){this.pdfLoaded=!0}onPdfLoadError(e){console.error("PDF y\xFCklenemedi:",this.selectedPdf,e),this.pdfLoaded=!1,setTimeout(()=>{alert("PDF dosyas\u0131 y\xFCklenirken hata olu\u015Ftu. Dosya mevcut olmayabilir veya bozuk olabilir.")},100)}formatDate(e){return new Date(e).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}openPdfInNewTab(){this.selectedPdf&&window.open(this.selectedPdf,"_blank")}downloadPdf(){if(this.selectedPdf){let e=document.createElement("a");e.href=this.selectedPdf,e.download="ders_notlari.pdf",document.body.appendChild(e),e.click(),document.body.removeChild(e)}}static \u0275fac=function(t){return new(t||i)(ke(gt))};static \u0275cmp=Ke({type:i,selectors:[["app-ogrenci-islenen-konular-pdf-sayfasi"]],standalone:!1,decls:5,vars:4,consts:[[1,"modern-page-container"],["class","loading-container",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["class","content-wrapper",4,"ngIf"],["class","pdf-modal-overlay",3,"click",4,"ngIf"],[1,"loading-container"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-2","text-muted"],[1,"alert","alert-danger"],[1,"bi","bi-exclamation-triangle"],[1,"btn","btn-sm","btn-outline-danger","ms-2",3,"click"],[1,"content-wrapper"],[1,"lessons-section"],[1,"section-header"],[1,"bi","bi-collection-fill","me-2"],["class","lessons-count",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","lessons-grid",4,"ngIf"],[1,"lessons-count"],[1,"empty-state"],[1,"bi","bi-file-earmark-pdf","fs-1","text-muted"],[1,"text-muted"],[1,"lessons-grid"],["class","lesson-card",4,"ngFor","ngForOf"],[1,"lesson-card"],[1,"lesson-header"],[1,"lesson-icon"],[1,"bi","bi-file-earmark-pdf-fill"],[1,"lesson-title"],[1,"lesson-type"],[1,"lesson-info"],[1,"info-item"],[1,"label"],[1,"bi","bi-calendar3","me-1"],[1,"value"],[1,"bi","bi-file-text","me-1"],[1,"bi","bi-person-badge","me-1"],[1,"lesson-actions"],[1,"action-btn","view-btn",3,"click","disabled"],[1,"bi","bi-eye-fill"],[1,"pdf-modal-overlay",3,"click"],[1,"pdf-modal-content",3,"click"],[1,"pdf-modal-header"],[1,"bi","bi-file-earmark-pdf-fill","me-2"],[1,"modal-actions"],["class","header-action-btn",3,"click",4,"ngIf"],[1,"close-btn",3,"click"],[1,"bi","bi-x-lg"],[1,"pdf-viewer"],["class","pdf-loading",4,"ngIf"],["width","100%","height","600px","style","border: none;",3,"src","load","error",4,"ngIf"],["class","pdf-fallback",4,"ngIf"],[1,"header-action-btn",3,"click"],[1,"bi","bi-box-arrow-up-right"],[1,"bi","bi-download"],[1,"pdf-loading"],[1,"mt-2"],["width","100%","height","600px",2,"border","none",3,"load","error","src"],[1,"pdf-fallback"],[1,"fallback-content"],[1,"bi","bi-file-earmark-pdf","pdf-icon"]],template:function(t,n){t&1&&(u(0,"div",0),ee(1,Qme,6,0,"div",1)(2,Jme,5,1,"div",2)(3,ixe,9,3,"div",3),f(),ee(4,cxe,15,5,"div",4)),t&2&&(x(),S("ngIf",n.isLoading),x(),S("ngIf",n.error&&!n.isLoading),x(),S("ngIf",!n.isLoading&&!n.error),x(),S("ngIf",n.showPdfModal))},dependencies:[yt,lt],styles:[".modern-page-container[_ngcontent-%COMP%]{height:auto;font-family:Roboto,sans-serif}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem 2rem;text-align:center}.content-wrapper[_ngcontent-%COMP%]{width:100%;margin:0 auto;padding:2rem}.lessons-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-bottom:1.5rem;padding-bottom:1rem;border-bottom:2px solid rgba(0,0,0,.1)}.lessons-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:600;color:#2d3748;flex:1}.lessons-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#667eea;font-size:1.25rem}.lessons-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .lessons-count[_ngcontent-%COMP%]{background:#667eea;color:#fff;padding:.25rem .75rem;border-radius:20px;font-size:.8rem;font-weight:500}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem;background:#ffffffe6;border-radius:16px;box-shadow:0 4px 20px #0000001a}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#a0aec0;margin-bottom:1rem}.empty-state[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#4a5568;margin-bottom:.5rem}.lessons-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:1.5rem}.lesson-card[_ngcontent-%COMP%]{background:#ffffffe6;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:16px;padding:1.5rem;box-shadow:0 4px 20px #0000001a;transition:all .3s ease;border:1px solid rgba(255,255,255,.2)}.lesson-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 8px 30px #00000026}.lesson-card[_ngcontent-%COMP%]   .lesson-header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:1rem;margin-bottom:1rem}.lesson-card[_ngcontent-%COMP%]   .lesson-header[_ngcontent-%COMP%]   .lesson-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:8px;background:linear-gradient(135deg,#e53e3e,#ff6b6b);display:flex;align-items:center;justify-content:center;color:#fff;font-size:1.2rem;flex-shrink:0}.lesson-card[_ngcontent-%COMP%]   .lesson-header[_ngcontent-%COMP%]   .lesson-title[_ngcontent-%COMP%]{flex:1}.lesson-card[_ngcontent-%COMP%]   .lesson-header[_ngcontent-%COMP%]   .lesson-title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .25rem;font-size:1.1rem;font-weight:600;color:#2d3748;line-height:1.3}.lesson-card[_ngcontent-%COMP%]   .lesson-header[_ngcontent-%COMP%]   .lesson-title[_ngcontent-%COMP%]   .lesson-type[_ngcontent-%COMP%]{font-size:.8rem;color:#718096;font-weight:500}.lesson-card[_ngcontent-%COMP%]   .lesson-info[_ngcontent-%COMP%]{margin-bottom:1.5rem}.lesson-card[_ngcontent-%COMP%]   .lesson-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.5rem 0;border-bottom:1px solid rgba(0,0,0,.05)}.lesson-card[_ngcontent-%COMP%]   .lesson-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.lesson-card[_ngcontent-%COMP%]   .lesson-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:.85rem;color:#718096;font-weight:500;display:flex;align-items:center}.lesson-card[_ngcontent-%COMP%]   .lesson-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#a0aec0}.lesson-card[_ngcontent-%COMP%]   .lesson-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:.85rem;color:#2d3748;font-weight:500}.lesson-card[_ngcontent-%COMP%]   .lesson-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem}.lesson-card[_ngcontent-%COMP%]   .lesson-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{flex:1;padding:.75rem 1rem;border:none;border-radius:8px;font-weight:500;display:flex;align-items:center;justify-content:center;gap:.5rem;transition:all .2s ease;cursor:pointer;font-size:.9rem}.lesson-card[_ngcontent-%COMP%]   .lesson-actions[_ngcontent-%COMP%]   .action-btn.view-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.lesson-card[_ngcontent-%COMP%]   .lesson-actions[_ngcontent-%COMP%]   .action-btn.view-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 4px 15px #667eea66}.lesson-card[_ngcontent-%COMP%]   .lesson-actions[_ngcontent-%COMP%]   .action-btn.view-btn[_ngcontent-%COMP%]:disabled{background:#e2e8f0;color:#a0aec0;cursor:not-allowed}.pdf-modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000c;display:flex;align-items:center;justify-content:center;z-index:1000;padding:1rem}.pdf-modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;width:90vw;height:85vh;max-width:1000px;display:flex;flex-direction:column;overflow:hidden;box-shadow:0 20px 60px #0000004d}.pdf-modal-header[_ngcontent-%COMP%]{padding:1rem 1.5rem;border-bottom:1px solid #e2e8f0;display:flex;justify-content:space-between;align-items:center;background:#f8fafc}.pdf-modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.1rem;font-weight:600;color:#2d3748;display:flex;align-items:center}.pdf-modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#e53e3e}.pdf-modal-header[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.pdf-modal-header[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   .header-action-btn[_ngcontent-%COMP%]{padding:.5rem 1rem;border:1px solid #e2e8f0;background:#fff;border-radius:6px;font-size:.85rem;color:#4a5568;display:flex;align-items:center;gap:.5rem;cursor:pointer;transition:all .2s ease}.pdf-modal-header[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   .header-action-btn[_ngcontent-%COMP%]:hover{background:#f7fafc;border-color:#cbd5e0}.pdf-modal-header[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{padding:.5rem;border:none;background:#fed7d7;color:#c53030;border-radius:6px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.pdf-modal-header[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#feb2b2}.pdf-viewer[_ngcontent-%COMP%]{flex:1;position:relative;display:flex;align-items:center;justify-content:center}.pdf-viewer[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{width:100%;height:100%}.pdf-viewer[_ngcontent-%COMP%]   .pdf-loading[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1rem;color:#718096}.pdf-viewer[_ngcontent-%COMP%]   .pdf-fallback[_ngcontent-%COMP%]   .fallback-content[_ngcontent-%COMP%]{text-align:center;color:#718096}.pdf-viewer[_ngcontent-%COMP%]   .pdf-fallback[_ngcontent-%COMP%]   .fallback-content[_ngcontent-%COMP%]   .pdf-icon[_ngcontent-%COMP%]{font-size:3rem;color:#e2e8f0;margin-bottom:1rem}.pdf-viewer[_ngcontent-%COMP%]   .pdf-fallback[_ngcontent-%COMP%]   .fallback-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:.5rem;color:#4a5568}@media (max-width: 768px){.content-wrapper[_ngcontent-%COMP%]{padding:1rem}.lessons-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.pdf-modal-overlay[_ngcontent-%COMP%]{padding:.5rem}.pdf-modal-content[_ngcontent-%COMP%]{width:95vw;height:90vh}.pdf-modal-header[_ngcontent-%COMP%]{padding:1rem}.pdf-modal-header[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]{flex-wrap:wrap;gap:.25rem}.pdf-modal-header[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   .header-action-btn[_ngcontent-%COMP%]{padding:.4rem .8rem;font-size:.8rem}}"]})};Lc.register(...P5);var kU=(i,e,t)=>({"bg-success":i,"bg-danger":e,"bg-warning text-dark":t}),dxe=(i,e,t)=>({"bi-check-circle-fill":i,"bi-x-circle-fill":e,"bi-dash-circle-fill":t});function uxe(i,e){i&1&&(u(0,"div",14)(1,"div",15),k(2,"div",16),u(3,"p"),m(4,"S\u0131nav sonu\xE7lar\u0131 y\xFCkleniyor..."),f()()())}function hxe(i,e){if(i&1){let t=Ae();u(0,"div",17)(1,"div",18),k(2,"i",19),u(3,"h3"),m(4,"Hata Olu\u015Ftu"),f(),u(5,"p"),m(6),f(),u(7,"button",20),U("click",function(){K(t);let r=F();return Y(r.loadAllSinavSonuclari())}),k(8,"i",21),m(9," Tekrar Dene "),f()()()}if(i&2){let t=F();x(6),W(t.error)}}function fxe(i,e){i&1&&(u(0,"div",22)(1,"div",23)(2,"h2"),k(3,"i",24),m(4," S\u0131nav Kar\u015F\u0131la\u015Ft\u0131rmas\u0131 "),f(),u(5,"p",25),m(6,"T\xFCm s\u0131navlar\u0131n\u0131z\u0131n ba\u015Far\u0131 oranlar\u0131n\u0131 kar\u015F\u0131la\u015Ft\u0131r\u0131n"),f()(),u(7,"div",26),k(8,"canvas",27),f()())}function gxe(i,e){if(i&1){let t=Ae();u(0,"div",30),U("click",function(){let r=K(t).$implicit,o=F(2);return Y(o.selectSinav(r))}),u(1,"div",31)(2,"div",32),m(3),f()(),u(4,"div",33)(5,"h3",34),m(6),f(),u(7,"div",35)(8,"div",36)(9,"span",37),m(10),f(),u(11,"span",38),m(12,"Do\u011Fru"),f()(),u(13,"div",39)(14,"span",37),m(15),f(),u(16,"span",38),m(17,"Yanl\u0131\u015F"),f()(),u(18,"div",40)(19,"span",37),m(20),f(),u(21,"span",38),m(22,"Bo\u015F"),f()()(),u(23,"div",41),k(24,"canvas",42),f(),u(25,"div",43)(26,"div",44),m(27),f(),u(28,"div",45),m(29,"Ba\u015Far\u0131 Oran\u0131"),f()()()()}if(i&2){let t=e.$implicit,n=e.index,r=F(2);x(),It("background",r.getSinavTuruColor(t.sinav_turu)),x(2),W(r.getSinavTuruLabel(t.sinav_turu)),x(3),W(t.sinav_adi),x(4),W(t.dogru_sayisi),x(5),W(t.yanlis_sayisi),x(5),W(t.bos_sayisi),x(4),S("id","miniChart-"+n),x(3),he("",r.getSuccessPercentage(t),"%")}}function pxe(i,e){if(i&1&&(u(0,"div",28),ee(1,gxe,30,9,"div",29),f()),i&2){let t=F();x(),S("ngForOf",t.sinavSonuclari)}}function mxe(i,e){i&1&&(u(0,"div",60)(1,"div",61)(2,"span",62),m(3,"Y\xFCkleniyor..."),f()(),u(4,"p",63),m(5,"Detayl\u0131 sonu\xE7lar y\xFCkleniyor..."),f()())}function xxe(i,e){if(i&1&&(u(0,"tr")(1,"td",87),m(2),f(),u(3,"td")(4,"span",88),m(5),f()(),u(6,"td")(7,"span",89),m(8),f()(),u(9,"td")(10,"span",89),k(11,"i",90),m(12),f()()()),i&2){let t=e.$implicit,n=F(3);x(2),W(t.soru_numarasi||t.soru_no),x(3),W(t.dogru_cevap),x(2),S("ngClass",Hv(7,kU,t.ogrenci_cevabi===t.dogru_cevap,t.ogrenci_cevabi&&t.ogrenci_cevabi!==t.dogru_cevap,!t.ogrenci_cevabi)),x(),he(" ",t.ogrenci_cevabi||"Bo\u015F"," "),x(2),S("ngClass",Hv(11,kU,t.ogrenci_cevabi===t.dogru_cevap,t.ogrenci_cevabi&&t.ogrenci_cevabi!==t.dogru_cevap,!t.ogrenci_cevabi)),x(),S("ngClass",Hv(15,dxe,t.ogrenci_cevabi===t.dogru_cevap,t.ogrenci_cevabi&&t.ogrenci_cevabi!==t.dogru_cevap,!t.ogrenci_cevabi)),x(),he(" ",n.getQuestionStatus(t)," ")}}function _xe(i,e){if(i&1&&(u(0,"div")(1,"div",64)(2,"div",65)(3,"div",66)(4,"div",67),k(5,"i",68),f(),u(6,"div",69)(7,"div",37),m(8),f(),u(9,"div",38),m(10,"Do\u011Fru"),f()()()(),u(11,"div",65)(12,"div",70)(13,"div",71),k(14,"i",72),f(),u(15,"div",69)(16,"div",37),m(17),f(),u(18,"div",38),m(19,"Yanl\u0131\u015F"),f()()()(),u(20,"div",65)(21,"div",73)(22,"div",74),k(23,"i",75),f(),u(24,"div",69)(25,"div",37),m(26),f(),u(27,"div",38),m(28,"Bo\u015F"),f()()()(),u(29,"div",65)(30,"div",76)(31,"div",77),k(32,"i",78),f(),u(33,"div",69)(34,"div",37),m(35),f(),u(36,"div",38),m(37,"Ba\u015Far\u0131"),f()()()()(),u(38,"div",79)(39,"h5",80),k(40,"i",81),m(41," Soru Detaylar\u0131 "),f(),u(42,"div",82)(43,"table",83)(44,"thead",84)(45,"tr")(46,"th",85),m(47,"#"),f(),u(48,"th",85),m(49,"Do\u011Fru Cevap"),f(),u(50,"th",85),m(51,"Verilen Cevap"),f(),u(52,"th",85),m(53,"Durum"),f()()(),u(54,"tbody"),ee(55,xxe,13,19,"tr",86),f()()()()()),i&2){let t=F(2);x(8),W(t.selectedSinavDetails.dogru_sayisi),x(9),W(t.selectedSinavDetails.yanlis_sayisi),x(9),W(t.selectedSinavDetails.bos_sayisi),x(9),he("",t.getSuccessPercentage(t.selectedSinav),"%"),x(20),S("ngForOf",t.selectedSinavDetails.sorular)}}function vxe(i,e){if(i&1){let t=Ae();u(0,"div",46),U("click",function(){K(t);let r=F();return Y(r.closeModal())}),u(1,"div",47),U("click",function(r){return K(t),Y(r.stopPropagation())}),u(2,"div",48)(3,"div",49)(4,"h5",50),k(5,"i",51),m(6),f(),u(7,"button",52),U("click",function(){K(t);let r=F();return Y(r.closeModal())}),f()(),u(8,"div",53),ee(9,mxe,6,0,"div",54)(10,_xe,56,5,"div",55),f(),u(11,"div",56)(12,"button",57),U("click",function(){K(t);let r=F();return Y(r.closeModal())}),k(13,"i",58),m(14," Kapat "),f(),u(15,"button",59),U("click",function(){K(t);let r=F();return Y(r.retakeExam(r.selectedSinav))}),k(16,"i",21),m(17," S\u0131nav\u0131 Tekrar \xC7\xF6z "),f()()()()()}if(i&2){let t=F();x(6),he(" ",t.selectedSinav.sinav_adi," - Detayl\u0131 Sonu\xE7 "),x(3),S("ngIf",t.loadingDetails),x(),S("ngIf",!t.loadingDetails&&t.selectedSinavDetails)}}function bxe(i,e){if(i&1){let t=Ae();u(0,"div",91)(1,"div",92)(2,"div",93),k(3,"i",94),f(),u(4,"h3"),m(5,"Hen\xFCz S\u0131nav Sonucunuz Yok"),f(),u(6,"p"),m(7,"S\u0131nav \xE7\xF6zmeye ba\u015Flad\u0131\u011F\u0131n\u0131zda sonu\xE7lar\u0131n\u0131z burada g\xF6r\xFCnecektir."),f(),u(8,"button",20),U("click",function(){K(t);let r=F();return Y(r.goToExams())}),k(9,"i",95),m(10," S\u0131nava Ba\u015Fla "),f()()()}}var Sg=class i{constructor(e,t,n){this.http=e;this.route=t;this.router=n}sinavSonuclari=[];selectedSinav=null;selectedSinavDetails=null;loading=!0;loadingDetails=!1;error=null;chart;comparisonChart;sinavTurleri={TYT:{color:"#667eea",label:"TYT Deneme"},AYT:{color:"#4facfe",label:"AYT Deneme"},TAR:{color:"#43e97b",label:"Tarama S\u0131nav\u0131"},TEST:{color:"#fa709a",label:"Konu Testi"}};ngOnInit(){this.route.queryParams.subscribe(e=>{let t=e.sinavId?parseInt(e.sinavId):void 0;this.loadAllSinavSonuclari(t)})}ngAfterViewInit(){setTimeout(()=>{this.createMiniCharts(),this.createComparisonChart()},500)}loadAllSinavSonuclari(e){this.loading=!0,this.error=null;let t=localStorage.getItem("user")||sessionStorage.getItem("user");if(!t){this.loading=!1,this.error="Kullan\u0131c\u0131 oturum bilgisi bulunamad\u0131";return}let n;try{n=JSON.parse(t),console.log("User data parsed:",n)}catch{this.loading=!1,this.error="Kullan\u0131c\u0131 bilgileri ayr\u0131\u015Ft\u0131r\u0131lamad\u0131";return}let r=n.id;if(!r){this.loading=!1,this.error="\xD6\u011Frenci ID'si bulunamad\u0131";return}console.log("S\u0131nav sonu\xE7lar\u0131 y\xFCkleniyor:",{ogrenciId:r,selectedSinavId:e}),this.http.get("./server/api/ogrenci_tum_sinav_sonuclari.php").subscribe({next:o=>{if(this.loading=!1,o.success&&o.data){let s=o.data.sinav_sonuclari||[];if(this.sinavSonuclari=s.filter(a=>a.ogrenci_id==r),console.log("Filtrelenmi\u015F s\u0131nav sonu\xE7lar\u0131 y\xFCklendi:",this.sinavSonuclari),e){let a=this.sinavSonuclari.find(l=>l.sinav_id==e);a&&this.selectSinav(a)}setTimeout(()=>{this.createMiniCharts(),this.createComparisonChart()},100)}else this.error=o.message||"Hen\xFCz s\u0131nav sonucunuz bulunmuyor"},error:o=>{this.loading=!1,this.error="S\u0131nav sonu\xE7lar\u0131 y\xFCklenirken hata olu\u015Ftu: "+o.message,console.error("S\u0131nav sonu\xE7lar\u0131 y\xFCkleme hatas\u0131:",o)}})}selectSinav(e){this.selectedSinav=e,this.selectedSinavDetails=null,this.loadingDetails=!0,document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%",this.loadSinavDetails(e)}getSinavTuruColor(e){return this.sinavTurleri[e]?.color||"#6c757d"}getSinavTuruLabel(e){return this.sinavTurleri[e]?.label||e}getSuccessPercentage(e){let t=e.dogru_sayisi+e.yanlis_sayisi+e.bos_sayisi;return t===0?0:Math.round(e.dogru_sayisi/t*100)}formatDate(e){return new Date(e).toLocaleDateString("tr-TR")}createMiniCharts(){this.sinavSonuclari.forEach((e,t)=>{let n=`miniChart-${t}`,r=document.getElementById(n);if(!r)return;let o=e.dogru_sayisi,s=e.yanlis_sayisi,a=e.bos_sayisi;new Lc(r,{type:"doughnut",data:{labels:["Do\u011Fru","Yanl\u0131\u015F","Bo\u015F"],datasets:[{data:[o,s,a],backgroundColor:["#28a745","#dc3545","#ffc107"],borderWidth:0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{enabled:!1}},elements:{arc:{borderWidth:0}}}})})}retakeExam(e){if(!e)return;let t=localStorage.getItem("user")||sessionStorage.getItem("user");if(!t){alert("Kullan\u0131c\u0131 oturum bilgisi bulunamad\u0131");return}let n;try{n=JSON.parse(t)}catch{alert("Kullan\u0131c\u0131 bilgileri ayr\u0131\u015Ft\u0131r\u0131lamad\u0131");return}let r=n.id;this.http.get(`./server/api/sinav_sonucu_getir.php?sinav_id=${e.sinav_id}&ogrenci_id=${r}`).subscribe({next:o=>{o.success&&o.data?alert("Bu s\u0131nav\u0131 daha \xF6nce \xE7\xF6zm\xFC\u015Fs\xFCn\xFCz. Tekrar \xE7\xF6zemezsiniz."):this.router.navigate(["/ogrenci-sayfasi/optik"],{queryParams:{sinavId:e.sinav_id,sinavAdi:e.sinav_adi,sinavTuru:e.sinav_turu,soruSayisi:e.soru_sayisi||e.dogru_sayisi+e.yanlis_sayisi+e.bos_sayisi}})},error:o=>{console.error("S\u0131nav kontrol\xFC hatas\u0131:",o),this.router.navigate(["/ogrenci-sayfasi/optik"],{queryParams:{sinavId:e.sinav_id,sinavAdi:e.sinav_adi,sinavTuru:e.sinav_turu,soruSayisi:e.soru_sayisi||e.dogru_sayisi+e.yanlis_sayisi+e.bos_sayisi}})}})}openVideo(e){e&&window.open(e,"_blank")}watchVideo(e,t){e?(console.log(`Konu ${e} videosu a\xE7\u0131lacak - Soru ${t}`),alert(`Soru ${t} i\xE7in konu videosu yak\u0131nda eklenecek!`)):(console.log(`Soru ${t} i\xE7in video bulunamad\u0131`),alert(`Soru ${t} i\xE7in video bulunamad\u0131.`))}goBackToExams(){this.router.navigate(["/ogrenci-sayfasi/ogrenci-sinav-islemleri-sayfasi"])}createComparisonChart(){let e=document.getElementById("comparisonChart");if(!e||this.sinavSonuclari.length===0)return;this.comparisonChart&&this.comparisonChart.destroy();let t=this.sinavSonuclari.map(o=>{let s=o.sinav_adi;return s.length>20?s.substring(0,17)+"...":s}),n=this.sinavSonuclari.map(o=>this.getSuccessPercentage(o)),r=this.sinavSonuclari.map(o=>this.getSinavTuruColor(o.sinav_turu));this.comparisonChart=new Lc(e,{type:"bar",data:{labels:t,datasets:[{label:"Ba\u015Far\u0131 Oran\u0131 (%)",data:n,backgroundColor:r.map(o=>o+"80"),borderColor:r,borderWidth:2,borderRadius:8,borderSkipped:!1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{title:o=>{let s=o[0].dataIndex;return this.sinavSonuclari[s].sinav_adi},label:o=>{let s=o.dataIndex,a=this.sinavSonuclari[s];return[`Ba\u015Far\u0131 Oran\u0131: ${o.parsed.y}%`,`Do\u011Fru: ${a.dogru_sayisi}`,`Yanl\u0131\u015F: ${a.yanlis_sayisi}`,`Bo\u015F: ${a.bos_sayisi}`,`Tarih: ${this.formatDate(a.cozum_tarihi)}`]}}}},scales:{y:{beginAtZero:!0,max:100,ticks:{callback:function(o){return o+"%"}},title:{display:!0,text:"Ba\u015Far\u0131 Oran\u0131 (%)"}},x:{title:{display:!0,text:"S\u0131navlar"},ticks:{maxRotation:45,minRotation:0}}},interaction:{intersect:!1,mode:"index"},animation:{duration:1e3,easing:"easeInOutQuart"}}})}goToExams(){this.router.navigate(["/ogrenci-sayfasi/ogrenci-sinav-islemleri-sayfasi"])}loadSinavDetails(e){this.loadingDetails=!0,this.http.get(`./server/api/sinav_detay_sonuc.php?sinav_id=${e.sinav_id}&ogrenci_id=${e.ogrenci_id}`).subscribe({next:t=>{if(this.loadingDetails=!1,t.success&&t.data){if(this.selectedSinavDetails=t.data,!this.selectedSinavDetails.sorular||!Array.isArray(this.selectedSinavDetails.sorular)){this.selectedSinavDetails.sorular=[];let n=this.selectedSinavDetails.toplam_soru||e.toplam_soru||40;for(let r=1;r<=n;r++){let o=`soru_${r}`,s=`dogru_cevap_${r}`,a=`ogrenci_cevabi_${r}`;this.selectedSinavDetails.sorular.push({soru_numarasi:r,soru_no:r,dogru_cevap:this.selectedSinavDetails[s]||this.selectedSinavDetails.cevap_anahtari?.[`ca${r}`]||"A",ogrenci_cevabi:this.selectedSinavDetails[a]||this.selectedSinavDetails.ogrenci_cevaplari?.[`ca${r}`]||null,is_correct:!1})}this.selectedSinavDetails.sorular.forEach(r=>{r.is_correct=r.ogrenci_cevabi===r.dogru_cevap})}console.log("Detayl\u0131 sonu\xE7lar:",this.selectedSinavDetails)}else console.error("Detayl\u0131 sonu\xE7lar y\xFCklenemedi:",t.message)},error:t=>{this.loadingDetails=!1,console.error("Detayl\u0131 sonu\xE7lar y\xFCklenirken hata:",t)}})}closeModal(){document.body.style.overflow="",document.body.style.position="",document.body.style.width="",this.selectedSinav=null,this.selectedSinavDetails=null,this.loadingDetails=!1}getQuestionStatus(e){return e.ogrenci_cevabi?e.ogrenci_cevabi===e.dogru_cevap?"Do\u011Fru":"Yanl\u0131\u015F":"Bo\u015F"}static \u0275fac=function(t){return new(t||i)(ke(gt),ke(Mi),ke(an))};static \u0275cmp=Ke({type:i,selectors:[["app-ogrenci-sinav-sonuclari-sayfasi"]],standalone:!1,decls:17,vars:6,consts:[[1,"sinav-sonuclari-container"],[1,"page-header"],[1,"header-content"],[1,"page-title"],[1,"bi","bi-trophy"],[1,"page-subtitle"],[1,"btn","btn-outline-primary",3,"click"],[1,"bi","bi-arrow-left","me-1"],["class","loading-container",4,"ngIf"],["class","error-container",4,"ngIf"],["class","comparison-chart-section",4,"ngIf"],["class","exam-results-grid",4,"ngIf"],["class","modal fade show d-block","tabindex","-1","role","dialog","style","background-color: rgba(0,0,0,0.5);",3,"click",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"loading-container"],[1,"loading-spinner"],[1,"spinner"],[1,"error-container"],[1,"error-card"],[1,"bi","bi-exclamation-triangle-fill"],[1,"btn","btn-primary",3,"click"],[1,"bi","bi-arrow-clockwise","me-1"],[1,"comparison-chart-section"],[1,"chart-header"],[1,"bi","bi-bar-chart-fill","me-2"],[1,"chart-description"],[1,"comparison-chart-container"],["id","comparisonChart","width","800","height","400"],[1,"exam-results-grid"],["class","exam-card",3,"click",4,"ngFor","ngForOf"],[1,"exam-card",3,"click"],[1,"exam-card-header"],[1,"exam-type-badge"],[1,"exam-card-body"],[1,"exam-title"],[1,"exam-stats"],[1,"stat-item","success"],[1,"stat-number"],[1,"stat-label"],[1,"stat-item","error"],[1,"stat-item","empty"],[1,"mini-chart-container"],["width","200","height","100",3,"id"],[1,"exam-success-rate"],[1,"success-percentage"],[1,"success-label"],["tabindex","-1","role","dialog",1,"modal","fade","show","d-block",2,"background-color","rgba(0,0,0,0.5)",3,"click"],["role","document",1,"modal-dialog","modal-dialog-scrollable","modal-lg",3,"click"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"bi","bi-clipboard-data","me-2"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],["class","loading-section text-center py-5",4,"ngIf"],[4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"bi","bi-x-lg","me-1"],["type","button",1,"btn","btn-primary",3,"click"],[1,"loading-section","text-center","py-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-3"],[1,"summary-stats","row","g-3","mb-4"],[1,"col-6","col-md-3"],[1,"stat-card","correct"],[1,"stat-icon","correct"],[1,"bi","bi-check-circle-fill"],[1,"stat-info"],[1,"stat-card","incorrect"],[1,"stat-icon","incorrect"],[1,"bi","bi-x-circle-fill"],[1,"stat-card","empty"],[1,"stat-icon","empty"],[1,"bi","bi-dash-circle-fill"],[1,"stat-card","total"],[1,"stat-icon","total"],[1,"bi","bi-percent"],[1,"question-details"],[1,"mb-3"],[1,"bi","bi-list-check","me-2"],[1,"questions-table-container"],[1,"table","table-striped","table-hover"],[1,"table-primary"],["scope","col"],[4,"ngFor","ngForOf"],[1,"fw-bold"],[1,"badge","bg-success","fs-6"],[1,"badge","fs-6",3,"ngClass"],[1,"bi","me-1",3,"ngClass"],[1,"empty-state"],[1,"empty-content"],[1,"empty-icon"],[1,"bi","bi-clipboard-x"],[1,"bi","bi-pencil-square","me-1"]],template:function(t,n){t&1&&(u(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),k(4,"i",4),m(5," S\u0131nav Sonu\xE7lar\u0131m "),f(),u(6,"p",5),m(7,"Ge\xE7mi\u015F s\u0131nav performans\u0131n\u0131z\u0131 inceleyin"),f()(),u(8,"button",6),U("click",function(){return n.goToExams()}),k(9,"i",7),m(10," S\u0131navlara D\xF6n "),f()(),ee(11,uxe,5,0,"div",8)(12,hxe,10,1,"div",9)(13,fxe,9,0,"div",10)(14,pxe,2,1,"div",11)(15,vxe,18,3,"div",12)(16,bxe,11,0,"div",13),f()),t&2&&(x(11),S("ngIf",n.loading),x(),S("ngIf",n.error&&!n.loading),x(),S("ngIf",!n.loading&&!n.error&&n.sinavSonuclari.length>0),x(),S("ngIf",!n.loading&&!n.error&&n.sinavSonuclari.length>0),x(),S("ngIf",n.selectedSinav),x(),S("ngIf",!n.loading&&!n.error&&n.sinavSonuclari.length===0))},dependencies:[ma,yt,lt],styles:[".sinav-sonuclari-container[_ngcontent-%COMP%]{padding:20px;max-width:1200px;margin:0 auto;min-height:100vh;background:linear-gradient(135deg,#f5f7fa,#c3cfe2)}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;background:#fff;padding:20px;border-radius:15px;box-shadow:0 4px 15px #0000001a}.page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{flex:1}.page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:2rem;color:#2c3e50;margin:0;display:flex;align-items:center;gap:10px}.page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#f39c12}.page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .page-subtitle[_ngcontent-%COMP%]{color:#7f8c8d;margin:5px 0 0;font-size:1.1rem}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:400px}.loading-container[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{text-align:center}.loading-container[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:50px;height:50px;border:4px solid #f3f3f3;border-top:4px solid #3498db;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:20px}.loading-container[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#7f8c8d;font-size:1.1rem}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.error-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:400px}.error-container[_ngcontent-%COMP%]   .error-card[_ngcontent-%COMP%]{background:#fff;padding:40px;border-radius:15px;text-align:center;box-shadow:0 4px 15px #0000001a}.error-container[_ngcontent-%COMP%]   .error-card[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;color:#e74c3c;margin-bottom:20px}.error-container[_ngcontent-%COMP%]   .error-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#2c3e50;margin-bottom:15px}.error-container[_ngcontent-%COMP%]   .error-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#7f8c8d;margin-bottom:25px}.exam-results-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));gap:20px;margin-top:20px}.exam-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 4px 12px #0000001a;overflow:hidden;transition:all .3s ease;cursor:pointer}.exam-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 25px #00000026}.exam-card-header[_ngcontent-%COMP%]{padding:15px 20px;color:#fff;display:flex;justify-content:space-between;align-items:center}.exam-card-header[_ngcontent-%COMP%]   .exam-type-badge[_ngcontent-%COMP%]{font-weight:600;font-size:14px}.exam-card-header[_ngcontent-%COMP%]   .exam-date[_ngcontent-%COMP%]{font-size:12px;opacity:.9}.exam-card-body[_ngcontent-%COMP%]{padding:20px}.exam-card-body[_ngcontent-%COMP%]   .exam-title[_ngcontent-%COMP%]{font-size:18px;font-weight:600;margin-bottom:15px;color:#2c3e50}.exam-card-body[_ngcontent-%COMP%]   .exam-stats[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:20px;gap:10px}.exam-card-body[_ngcontent-%COMP%]   .exam-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{text-align:center;flex:1;padding:10px;border-radius:8px}.exam-card-body[_ngcontent-%COMP%]   .exam-stats[_ngcontent-%COMP%]   .stat-item.success[_ngcontent-%COMP%]{background-color:#28a7451a;color:#28a745}.exam-card-body[_ngcontent-%COMP%]   .exam-stats[_ngcontent-%COMP%]   .stat-item.error[_ngcontent-%COMP%]{background-color:#dc35451a;color:#dc3545}.exam-card-body[_ngcontent-%COMP%]   .exam-stats[_ngcontent-%COMP%]   .stat-item.empty[_ngcontent-%COMP%]{background-color:#ffc1071a;color:#ffc107}.exam-card-body[_ngcontent-%COMP%]   .exam-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-number[_ngcontent-%COMP%]{display:block;font-size:20px;font-weight:600;line-height:1}.exam-card-body[_ngcontent-%COMP%]   .exam-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:12px;font-weight:500;opacity:.8}.exam-card-body[_ngcontent-%COMP%]   .mini-chart-container[_ngcontent-%COMP%]{height:100px;margin:15px 0;display:flex;justify-content:center;align-items:center}.exam-card-body[_ngcontent-%COMP%]   .mini-chart-container[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{max-height:100px;max-width:150px}.exam-card-body[_ngcontent-%COMP%]   .exam-success-rate[_ngcontent-%COMP%]{text-align:center;margin-top:15px}.exam-card-body[_ngcontent-%COMP%]   .exam-success-rate[_ngcontent-%COMP%]   .success-percentage[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#28a745;line-height:1}.exam-card-body[_ngcontent-%COMP%]   .exam-success-rate[_ngcontent-%COMP%]   .success-label[_ngcontent-%COMP%]{font-size:12px;color:#6c757d;font-weight:500}.modal[_ngcontent-%COMP%]{background:#0009;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px)}.modal[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{max-width:900px;height:90vh}.modal[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{height:100%;border-radius:15px;border:none;box-shadow:0 20px 60px #0000004d}.modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border-radius:15px 15px 0 0;border-bottom:none;padding:1.5rem}.modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;margin:0}.modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{filter:invert(1);opacity:.8}.modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{opacity:1}.modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:1.5rem}.modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:4px}.modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:4px}.modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a8a8a8}.modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{border-top:1px solid #e9ecef;background:#f8f9fa;border-radius:0 0 15px 15px;padding:1rem 1.5rem}@media (max-width: 768px){.modal[_ngcontent-%COMP%]{padding:10px}.modal-dialog[_ngcontent-%COMP%]{height:95vh}.modal-header[_ngcontent-%COMP%]{padding:20px 24px}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}.summary-stats[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:16px;padding:24px}.questions-section[_ngcontent-%COMP%]{padding:24px}.answers-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.modal-footer[_ngcontent-%COMP%]{padding:16px 24px;flex-direction:column;gap:12px}.modal-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%}}@media (max-width: 480px){.summary-stats[_ngcontent-%COMP%]{grid-template-columns:1fr}.stat-card[_ngcontent-%COMP%]{padding:20px}}.modal[_ngcontent-%COMP%]{z-index:1050}.modal-dialog[_ngcontent-%COMP%]{max-width:800px;margin:1.75rem auto}.modal-content[_ngcontent-%COMP%]{border:none;border-radius:15px;box-shadow:0 15px 50px #0000004d}.modal-header[_ngcontent-%COMP%]{border-bottom:1px solid #e9ecef;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border-radius:15px 15px 0 0}.modal-header[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]{font-weight:600;font-size:1.2rem}.modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{filter:brightness(0) invert(1)}.modal-body[_ngcontent-%COMP%]{padding:2rem;max-height:70vh;overflow-y:auto}.modal-footer[_ngcontent-%COMP%]{border-top:1px solid #e9ecef;padding:1rem 2rem}.question-details[_ngcontent-%COMP%]{margin-top:20px}.question-details[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#2c3e50;font-weight:600;margin-bottom:1rem}.question-details[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#3498db}.question-details[_ngcontent-%COMP%]   .questions-table-container[_ngcontent-%COMP%]{border-radius:12px;overflow:hidden;box-shadow:0 4px 20px #0000001a}.question-details[_ngcontent-%COMP%]   .questions-table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{margin-bottom:0}.question-details[_ngcontent-%COMP%]   .questions-table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-bottom:2px solid #dee2e6;font-weight:600;font-size:.9rem;text-align:center;background-color:#f8f9fa}.question-details[_ngcontent-%COMP%]   .questions-table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:all .2s ease}.question-details[_ngcontent-%COMP%]   .questions-table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#007bff0d}.question-details[_ngcontent-%COMP%]   .questions-table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle;padding:12px;text-align:center;border-top:1px solid #e9ecef}.question-details[_ngcontent-%COMP%]   .questions-table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{font-weight:600;padding:6px 12px;font-size:.85rem;border-radius:6px}.question-details[_ngcontent-%COMP%]   .questions-table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .badge.fs-6[_ngcontent-%COMP%]{font-size:.9rem!important}.question-details[_ngcontent-%COMP%]   .questions-table-container[_ngcontent-%COMP%]   .table.table-striped[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-of-type(odd){background-color:#00000006}.question-details[_ngcontent-%COMP%]   .questions-table-container[_ngcontent-%COMP%]   .table.table-hover[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#007bff0d}h3[_ngcontent-%COMP%]{color:#2c3e50;margin-bottom:25px;font-size:1.5rem;display:flex;align-items:center;gap:10px}h3[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#3498db;font-size:1.2rem;display:inline-block;font-style:normal;font-variant:normal;text-rendering:auto;line-height:1}.result-badge[_ngcontent-%COMP%]{padding:8px 16px;border-radius:20px;font-weight:600;font-size:.9rem;display:flex;align-items:center;gap:6px}.result-badge[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem;display:inline-block;font-style:normal}.result-badge.correct[_ngcontent-%COMP%]{background:#28a745;color:#fff}.result-badge.incorrect[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.result-badge.empty[_ngcontent-%COMP%]{background:#ffc107;color:#212529}"]})};function yxe(i,e){i&1&&(u(0,"div",27)(1,"div",28),k(2,"div",29)(3,"div",29)(4,"div",29),f(),u(5,"h3"),m(6,"S\u0131navlar y\xFCkleniyor..."),f(),u(7,"p"),m(8,"L\xFCtfen bekleyin"),f()())}function wxe(i,e){if(i&1){let t=Ae();u(0,"div",30)(1,"div",31),k(2,"i",32),f(),u(3,"h3"),m(4,"Bir \u015Feyler ters gitti"),f(),u(5,"p",33),m(6),f(),u(7,"button",34),U("click",function(){K(t);let r=F();return Y(r.loadSinavlar())}),k(8,"i",35),m(9," Tekrar Dene "),f()()}if(i&2){let t=F();x(6),W(t.error)}}function Mxe(i,e){if(i&1){let t=Ae();u(0,"button",42),U("click",function(){let r=K(t).$implicit,o=F(3);return Y(o.setFilter(r.id))}),k(1,"i"),m(2),u(3,"span",44),m(4),f()()}if(i&2){let t=e.$implicit,n=F(3);It("--tab-color",t.color),xe("active",n.selectedFilter===t.id),x(),ei(t.icon),x(),he(" ",t.label," "),x(2),W(n.getSinavlarByType(t.id).length)}}function Exe(i,e){if(i&1){let t=Ae();u(0,"div",40)(1,"div",41)(2,"button",42),U("click",function(){K(t);let r=F(2);return Y(r.setFilter("ALL"))}),k(3,"i",43),m(4," T\xFCm\xFC "),u(5,"span",44),m(6),f()(),ee(7,Mxe,5,9,"button",45),f()()}if(i&2){let t=F(2);x(2),xe("active",t.selectedFilter==="ALL"),x(4),W(t.sinavlar.length),x(),S("ngForOf",t.sinavTurleri)}}function Pxe(i,e){if(i&1&&(u(0,"div",72),k(1,"img",73),f()),i&2){let t=F().$implicit;x(),S("src","/uploads/"+t.sinav_kapagi,vt)("alt",t.sinav_adi)}}function Oxe(i,e){if(i&1&&(u(0,"div",74),k(1,"i"),f()),i&2){let t=F().$implicit,n=F(3);x(),ei(n.getSinavTuruInfo(t.sinav_turu).icon)}}function Sxe(i,e){if(i&1){let t=Ae();u(0,"div",49)(1,"div",50)(2,"div",51),k(3,"i"),m(4),f(),u(5,"div",52),k(6,"i",53),m(7),f()(),u(8,"div",54),ee(9,Pxe,2,2,"div",55)(10,Oxe,2,3,"div",56),f(),u(11,"div",57)(12,"h3",58),m(13),f(),u(14,"div",59)(15,"div",60),k(16,"i",61),u(17,"span"),m(18),f()(),u(19,"div",60),k(20,"i",62),u(21,"span"),m(22),f()()(),u(23,"div",63)(24,"div",64),m(25,"Zorluk:"),f(),u(26,"div",65),k(27,"div",66)(28,"div",66)(29,"div",66),f()()(),u(30,"div",67)(31,"button",68),U("click",function(){let r=K(t).$implicit,o=F(3);return Y(o.startExam(r))}),u(32,"div",69),k(33,"i",70),u(34,"span"),m(35,"S\u0131nava Ba\u015Fla"),f()(),k(36,"div",71),f()()()}if(i&2){let t=e.$implicit,n=F(3);It("--exam-color",n.getSinavTuruInfo(t.sinav_turu).color),x(3),ei(n.getSinavTuruInfo(t.sinav_turu).icon),x(),he(" ",n.getSinavTuruInfo(t.sinav_turu).label," "),x(3),he(" ",n.formatDate(t.tarih)," "),x(2),S("ngIf",t.sinav_kapagi),x(),S("ngIf",!t.sinav_kapagi),x(3),W(t.sinav_adi),x(5),he("",t.soru_sayisi," Soru"),x(4),he("",n.calculateEstimatedTime(t.soru_sayisi)," dk"),x(5),xe("active",n.getDifficultyLevel(t.sinav_turu)>=1),x(),xe("active",n.getDifficultyLevel(t.sinav_turu)>=2),x(),xe("active",n.getDifficultyLevel(t.sinav_turu)>=3)}}function kxe(i,e){if(i&1&&(u(0,"div",46)(1,"div",47),ee(2,Sxe,37,18,"div",48),f()()),i&2){let t=F(2);x(2),S("ngForOf",t.getFilteredSinavlar())("ngForTrackBy",t.trackBySinavId)}}function Axe(i,e){if(i&1){let t=Ae();u(0,"div",75)(1,"div",76),k(2,"i",77),f(),u(3,"h3"),m(4,"Hen\xFCz s\u0131nav yok"),f(),u(5,"p"),m(6,"\u015Eu anda kat\u0131labilece\u011Fin aktif bir s\u0131nav bulunmuyor."),f(),u(7,"button",78),U("click",function(){K(t);let r=F(2);return Y(r.loadSinavlar())}),k(8,"i",35),m(9," Yenile "),f()()}}function Dxe(i,e){if(i&1){let t=Ae();u(0,"div",75)(1,"div",76),k(2,"i",79),f(),u(3,"h3"),m(4,"Bu kategoride s\u0131nav yok"),f(),u(5,"p"),m(6,"Se\xE7ti\u011Fin kategoriyde s\u0131nav bulunmuyor."),f(),u(7,"button",80),U("click",function(){K(t);let r=F(2);return Y(r.setFilter("ALL"))}),k(8,"i",81),m(9," Filtreyi Temizle "),f()()}}function Fxe(i,e){if(i&1&&(u(0,"div",36),ee(1,Exe,8,4,"div",37)(2,kxe,3,2,"div",38)(3,Axe,10,0,"div",39)(4,Dxe,10,0,"div",39),f()),i&2){let t=F();x(),S("ngIf",t.sinavlar.length>0),x(),S("ngIf",t.getFilteredSinavlar().length>0),x(),S("ngIf",!t.loading&&!t.error&&t.sinavlar.length===0),x(),S("ngIf",!t.loading&&!t.error&&t.sinavlar.length>0&&t.getFilteredSinavlar().length===0)}}function Ixe(i,e){if(i&1&&(u(0,"div",82)(1,"div",83)(2,"strong"),m(3,"Uyar\u0131:"),f(),m(4," Bu s\u0131nav\u0131 daha \xF6nce \xE7\xF6zm\xFC\u015Fs\xFCn\xFCz. Her s\u0131nav sadece bir kez \xE7\xF6z\xFClebilir. "),f(),u(5,"div",84)(6,"h6",85),m(7),f(),u(8,"div",86)(9,"div",87)(10,"div",88)(11,"div",89),m(12),f(),u(13,"small"),m(14,"Do\u011Fru"),f()()(),u(15,"div",87)(16,"div",90)(17,"div",89),m(18),f(),u(19,"small"),m(20,"Yanl\u0131\u015F"),f()()(),u(21,"div",87)(22,"div",91)(23,"div",89),m(24),f(),u(25,"small"),m(26,"Bo\u015F"),f()()(),u(27,"div",87)(28,"div",92)(29,"div",89),m(30),f(),u(31,"small"),m(32,"Net"),f()()()(),u(33,"div",93)(34,"div",94)(35,"div",95)(36,"strong"),m(37,"Ba\u015Far\u0131 Y\xFCzdesi:"),f(),u(38,"span",96),m(39),f()()(),u(40,"div",94)(41,"div",95)(42,"strong"),m(43,"Puan:"),f(),u(44,"span",97),m(45),f()()()(),u(46,"div",98)(47,"small"),k(48,"i",99),m(49),f()()()()),i&2){let t=F();x(7),he("",t.examResult.sinav_adi," - Sonu\xE7lar\u0131n\u0131z:"),x(5),W(t.examResult.dogru_sayisi),x(6),W(t.examResult.yanlis_sayisi),x(6),W(t.examResult.bos_sayisi),x(6),W(t.calculateNet(t.examResult)),x(9),he("",t.examResult.yuzde,"%"),x(6),W(t.examResult.puan),x(4),he(" \xC7\xF6z\xFCm Tarihi: ",t.formatDate(t.examResult.gonderim_tarihi)," ")}}var V5=class i{constructor(e,t){this.http=e;this.router=t}sinavlar=[];loading=!0;error=null;selectedFilter="ALL";sinavTurleri=[{id:"TYT",label:"TYT Deneme",icon:"bi-journal-text",color:"#667eea"},{id:"AYT",label:"AYT Deneme",icon:"bi-journal-code",color:"#4facfe"},{id:"TAR",label:"Tarama",icon:"bi-search",color:"#43e97b"},{id:"TEST",label:"Konu Testi",icon:"bi-clipboard-check",color:"#fa709a"}];ngOnInit(){this.loadSinavlar()}loadSinavlar(){this.loading=!0,this.error=null,this.http.get("./server/api/cevap-anahtarlari-listele.php").subscribe({next:e=>{this.loading=!1,e.success?this.sinavlar=(e.data||[]).filter(t=>t.aktiflik):this.error="S\u0131navlar y\xFCklenirken hata olu\u015Ftu."},error:e=>{this.loading=!1,this.error="Sunucu hatas\u0131: "+(e.message||"Ba\u011Flant\u0131 hatas\u0131")}})}getSinavlarByType(e){return this.sinavlar.filter(t=>t.sinav_turu===e)}getFilteredSinavlar(){return this.selectedFilter==="ALL"?this.sinavlar:this.getSinavlarByType(this.selectedFilter)}setFilter(e){this.selectedFilter=e}getSinavTuruInfo(e){return this.sinavTurleri.find(t=>t.id===e)||{id:e,label:e,icon:"bi-file-text",color:"#6c757d"}}getTotalQuestions(){return this.sinavlar.reduce((e,t)=>e+(t.soru_sayisi||0),0)}calculateEstimatedTime(e){return Math.ceil(e*1.5)}getDifficultyLevel(e){return{TEST:1,TAR:2,TYT:3,AYT:3}[e]||2}trackBySinavId(e,t){return t.id||e}showExamAlreadyTakenModal=!1;examResult=null;startExam(e){this.checkExamStatus(e)}checkExamStatus(e){let t=localStorage.getItem("user")||sessionStorage.getItem("user");if(!t){console.error("Kullan\u0131c\u0131 bilgisi bulunamad\u0131");return}let r=JSON.parse(t).id;this.http.get("./server/api/sinav_kontrol.php",{params:{sinav_id:e.id.toString(),ogrenci_id:r.toString()}}).subscribe({next:o=>{o.success?o.sinav_cozulmus?(this.examResult=o.sonuc,this.showExamAlreadyTakenModal=!0):this.router.navigate(["/ogrenci-sayfasi/optik"],{queryParams:{sinavId:e.id,sinavAdi:e.sinav_adi,sinavTuru:e.sinav_turu,soruSayisi:e.soru_sayisi}}):console.error(o.message||"S\u0131nav kontrol edilemedi")},error:o=>{console.error("S\u0131nav kontrol hatas\u0131:",o),console.error("S\u0131nav kontrol edilirken hata olu\u015Ftu")}})}closeExamAlreadyTakenModal(){this.showExamAlreadyTakenModal=!1,this.examResult=null}viewExamResults(){this.closeExamAlreadyTakenModal(),this.router.navigate(["/ogrenci-sayfasi/ogrenci-sinav-islemleri-sayfasi/ogrenci-sinav-sonuclari-sayfasi"])}calculateNet(e){return e?Math.max(0,e.dogru_sayisi-e.yanlis_sayisi/4):0}formatDate(e){let t=new Date(e),n={day:"numeric",month:"short",year:"numeric"};return t.toLocaleDateString("tr-TR",n)}getAuthHeaders(){return{Authorization:`Bearer ${localStorage.getItem("token")}`}}static \u0275fac=function(t){return new(t||i)(ke(gt),ke(an))};static \u0275cmp=Ke({type:i,selectors:[["app-ogrenci-sinav-islemleri-sayfasi"]],standalone:!1,decls:40,vars:14,consts:[[1,"sinav-container"],[1,"main-header"],[1,"header-content"],[1,"title-section"],[1,"main-title"],[1,"bi","bi-clipboard-check-fill"],[1,"subtitle"],[1,"stats-cards"],[1,"stat-card"],[1,"stat-number"],[1,"stat-label"],["class","loading-state",4,"ngIf"],["class","error-state",4,"ngIf"],["class","content-area",4,"ngIf"],["tabindex","-1","role","dialog",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header","bg-warning","text-dark"],[1,"modal-title"],[1,"bi","bi-exclamation-triangle-fill","me-2"],["type","button",1,"btn-close",3,"click"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"click"],[1,"bi","bi-bar-chart-line","me-1"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"modal-backdrop","fade",3,"click"],[1,"loading-state"],[1,"loading-animation"],[1,"pulse-ring"],[1,"error-state"],[1,"error-icon"],[1,"bi","bi-exclamation-triangle-fill"],[1,"error-message"],[1,"retry-button",3,"click"],[1,"bi","bi-arrow-clockwise"],[1,"content-area"],["class","filter-section",4,"ngIf"],["class","exams-section",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"filter-section"],[1,"filter-tabs"],[1,"filter-tab",3,"click"],[1,"bi","bi-grid-3x3-gap"],[1,"count"],["class","filter-tab",3,"active","--tab-color","click",4,"ngFor","ngForOf"],[1,"exams-section"],[1,"exams-grid"],["class","exam-item",3,"--exam-color",4,"ngFor","ngForOf","ngForTrackBy"],[1,"exam-item"],[1,"exam-card-header"],[1,"exam-type-badge"],[1,"exam-date"],[1,"bi","bi-calendar3"],[1,"exam-visual"],["class","exam-cover",4,"ngIf"],["class","exam-placeholder",4,"ngIf"],[1,"exam-info"],[1,"exam-title"],[1,"exam-details"],[1,"detail-item"],[1,"bi","bi-list-ol"],[1,"bi","bi-clock"],[1,"difficulty-indicator"],[1,"difficulty-label"],[1,"difficulty-bars"],[1,"bar"],[1,"exam-action"],[1,"start-exam-btn",3,"click"],[1,"btn-content"],[1,"bi","bi-play-circle-fill"],[1,"btn-shine"],[1,"exam-cover"],[3,"src","alt"],[1,"exam-placeholder"],[1,"empty-state"],[1,"empty-illustration"],[1,"bi","bi-clipboard-x"],[1,"refresh-btn",3,"click"],[1,"bi","bi-funnel"],[1,"clear-filter-btn",3,"click"],[1,"bi","bi-x-circle"],[1,"modal-body"],["role","alert",1,"alert","alert-warning"],[1,"exam-result-summary"],[1,"fw-bold","mb-3"],[1,"row","text-center","mb-3"],[1,"col-3"],[1,"result-stat","bg-success","text-white","rounded","p-2"],[1,"fs-4","fw-bold"],[1,"result-stat","bg-danger","text-white","rounded","p-2"],[1,"result-stat","bg-warning","text-white","rounded","p-2"],[1,"result-stat","bg-info","text-white","rounded","p-2"],[1,"row","mb-3"],[1,"col-6"],[1,"d-flex","align-items-center"],[1,"badge","bg-primary","ms-2","fs-6"],[1,"badge","bg-secondary","ms-2","fs-6"],[1,"text-muted"],[1,"bi","bi-calendar-check","me-1"]],template:function(t,n){t&1&&(k(0,"app-ogrenci-sinav-sonuclari-sayfasi"),u(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"h1",4),k(6,"i",5),m(7," S\u0131navlar\u0131m "),f(),u(8,"p",6),m(9,"Kat\u0131labilece\u011Fin aktif s\u0131navlar\u0131 g\xF6r\xFCnt\xFCle ve hemen ba\u015Fla"),f()(),u(10,"div",7)(11,"div",8)(12,"div",9),m(13),f(),u(14,"div",10),m(15,"Aktif S\u0131nav"),f()(),u(16,"div",8)(17,"div",9),m(18),f(),u(19,"div",10),m(20,"Toplam Soru"),f()()()()(),ee(21,yxe,9,0,"div",11)(22,wxe,10,1,"div",12)(23,Fxe,5,4,"div",13),f(),u(24,"div",14)(25,"div",15)(26,"div",16)(27,"div",17)(28,"h5",18),k(29,"i",19),m(30," S\u0131nav Daha \xD6nce \xC7\xF6z\xFClm\xFC\u015F "),f(),u(31,"button",20),U("click",function(){return n.closeExamAlreadyTakenModal()}),f()(),ee(32,Ixe,50,8,"div",21),u(33,"div",22)(34,"button",23),U("click",function(){return n.viewExamResults()}),k(35,"i",24),m(36," T\xFCm Sonu\xE7lar\u0131m\u0131 G\xF6r\xFCnt\xFCle "),f(),u(37,"button",25),U("click",function(){return n.closeExamAlreadyTakenModal()}),m(38," Kapat "),f()()()()(),u(39,"div",26),U("click",function(){return n.closeExamAlreadyTakenModal()}),f()),t&2&&(x(13),W(n.sinavlar.length),x(5),W(n.getTotalQuestions()),x(3),S("ngIf",n.loading),x(),S("ngIf",n.error&&!n.loading),x(),S("ngIf",!n.loading&&!n.error),x(),It("display",n.showExamAlreadyTakenModal?"block":"none"),xe("show",n.showExamAlreadyTakenModal),x(8),S("ngIf",n.examResult),x(7),It("display",n.showExamAlreadyTakenModal?"block":"none"),xe("show",n.showExamAlreadyTakenModal))},dependencies:[yt,lt,Sg],styles:['.sinav-container[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#667eea,#764ba2);position:relative;overflow-x:hidden}.sinav-container[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:radial-gradient(circle at 20% 80%,rgba(120,119,198,.3) 0%,transparent 50%),radial-gradient(circle at 80% 20%,rgba(255,119,198,.15) 0%,transparent 50%);pointer-events:none}.main-header[_ngcontent-%COMP%]{padding:2rem 1.5rem;background:#ffffff1a;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border-bottom:1px solid rgba(255,255,255,.2);position:relative;z-index:2}.main-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto;display:flex;justify-content:space-between;align-items:center;gap:2rem}@media (max-width: 768px){.main-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:1.5rem}}.main-header[_ngcontent-%COMP%]   .title-section[_ngcontent-%COMP%]   .main-title[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;color:#fff;margin:0 0 .5rem;display:flex;align-items:center;gap:1rem;text-shadow:0 2px 4px rgba(0,0,0,.1)}.main-header[_ngcontent-%COMP%]   .title-section[_ngcontent-%COMP%]   .main-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem;color:gold}@media (max-width: 768px){.main-header[_ngcontent-%COMP%]   .title-section[_ngcontent-%COMP%]   .main-title[_ngcontent-%COMP%]{font-size:2rem;justify-content:center}}.main-header[_ngcontent-%COMP%]   .title-section[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:1.1rem;color:#ffffffe6;margin:0;font-weight:300}.main-header[_ngcontent-%COMP%]   .stats-cards[_ngcontent-%COMP%]{display:flex;gap:1rem}.main-header[_ngcontent-%COMP%]   .stats-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{background:#ffffff26;padding:1.5rem;border-radius:1rem;text-align:center;border:1px solid rgba(255,255,255,.2);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);min-width:120px}.main-header[_ngcontent-%COMP%]   .stats-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-number[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#fff;line-height:1;margin-bottom:.25rem}.main-header[_ngcontent-%COMP%]   .stats-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:.875rem;color:#fffc;font-weight:500}.content-area[_ngcontent-%COMP%]{padding:2rem 1.5rem;max-width:1400px;margin:0 auto;position:relative;z-index:2}.filter-section[_ngcontent-%COMP%]{margin-bottom:2rem}.filter-section[_ngcontent-%COMP%]   .filter-tabs[_ngcontent-%COMP%]{display:flex;gap:.5rem;background:#ffffff1a;padding:.5rem;border-radius:1rem;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);overflow-x:auto}@media (max-width: 768px){.filter-section[_ngcontent-%COMP%]   .filter-tabs[_ngcontent-%COMP%]{justify-content:flex-start}}.filter-section[_ngcontent-%COMP%]   .filter-tabs[_ngcontent-%COMP%]   .filter-tab[_ngcontent-%COMP%]{background:transparent;border:none;padding:.75rem 1.5rem;border-radius:.75rem;color:#ffffffb3;font-weight:500;display:flex;align-items:center;gap:.5rem;cursor:pointer;transition:all .3s ease;white-space:nowrap;--tab-color: #667eea}.filter-section[_ngcontent-%COMP%]   .filter-tabs[_ngcontent-%COMP%]   .filter-tab[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}.filter-section[_ngcontent-%COMP%]   .filter-tabs[_ngcontent-%COMP%]   .filter-tab[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{background:#fff3;padding:.125rem .5rem;border-radius:10px;font-size:.75rem;font-weight:600}.filter-section[_ngcontent-%COMP%]   .filter-tabs[_ngcontent-%COMP%]   .filter-tab[_ngcontent-%COMP%]:hover{background:#ffffff1a;color:#fff}.filter-section[_ngcontent-%COMP%]   .filter-tabs[_ngcontent-%COMP%]   .filter-tab.active[_ngcontent-%COMP%]{background:var(--tab-color, #667eea);color:#fff;box-shadow:0 4px 15px #0003}.filter-section[_ngcontent-%COMP%]   .filter-tabs[_ngcontent-%COMP%]   .filter-tab.active[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{background:#ffffff4d}.exams-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:1.5rem}@media (max-width: 768px){.exams-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}}.exam-item[_ngcontent-%COMP%]{background:#fffffff2;border-radius:1.5rem;overflow:hidden;box-shadow:0 8px 32px #0000001a;transition:all .3s ease;border:1px solid rgba(255,255,255,.2);--exam-color: #667eea}.exam-item[_ngcontent-%COMP%]:hover{transform:translateY(-8px);box-shadow:0 20px 40px #00000026}.exam-item[_ngcontent-%COMP%]   .exam-card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--exam-color),color-mix(in srgb,var(--exam-color) 80%,#000));color:#fff;padding:1rem 1.5rem;display:flex;justify-content:space-between;align-items:center}.exam-item[_ngcontent-%COMP%]   .exam-card-header[_ngcontent-%COMP%]   .exam-type-badge[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-weight:600;font-size:.875rem}.exam-item[_ngcontent-%COMP%]   .exam-card-header[_ngcontent-%COMP%]   .exam-type-badge[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}.exam-item[_ngcontent-%COMP%]   .exam-card-header[_ngcontent-%COMP%]   .exam-date[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem;font-size:.8rem;opacity:.9}.exam-item[_ngcontent-%COMP%]   .exam-card-header[_ngcontent-%COMP%]   .exam-date[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.875rem}.exam-item[_ngcontent-%COMP%]   .exam-visual[_ngcontent-%COMP%]{height:160px;position:relative;overflow:hidden;background:linear-gradient(135deg,#f8f9fa,#e9ecef)}.exam-item[_ngcontent-%COMP%]   .exam-visual[_ngcontent-%COMP%]   .exam-cover[_ngcontent-%COMP%]{width:100%;height:100%}.exam-item[_ngcontent-%COMP%]   .exam-visual[_ngcontent-%COMP%]   .exam-cover[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.exam-item[_ngcontent-%COMP%]   .exam-visual[_ngcontent-%COMP%]   .exam-placeholder[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;height:100%;color:var(--exam-color)}.exam-item[_ngcontent-%COMP%]   .exam-visual[_ngcontent-%COMP%]   .exam-placeholder[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;opacity:.3}.exam-item[_ngcontent-%COMP%]   .exam-info[_ngcontent-%COMP%]{padding:1.5rem}.exam-item[_ngcontent-%COMP%]   .exam-info[_ngcontent-%COMP%]   .exam-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:#2d3748;margin:0 0 1rem;line-height:1.3}.exam-item[_ngcontent-%COMP%]   .exam-info[_ngcontent-%COMP%]   .exam-details[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:1rem}.exam-item[_ngcontent-%COMP%]   .exam-info[_ngcontent-%COMP%]   .exam-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:#718096;font-size:.875rem;font-weight:500}.exam-item[_ngcontent-%COMP%]   .exam-info[_ngcontent-%COMP%]   .exam-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--exam-color);font-size:1rem}.exam-item[_ngcontent-%COMP%]   .exam-info[_ngcontent-%COMP%]   .difficulty-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.exam-item[_ngcontent-%COMP%]   .exam-info[_ngcontent-%COMP%]   .difficulty-indicator[_ngcontent-%COMP%]   .difficulty-label[_ngcontent-%COMP%]{font-size:.875rem;color:#718096;font-weight:500}.exam-item[_ngcontent-%COMP%]   .exam-info[_ngcontent-%COMP%]   .difficulty-indicator[_ngcontent-%COMP%]   .difficulty-bars[_ngcontent-%COMP%]{display:flex;gap:.25rem}.exam-item[_ngcontent-%COMP%]   .exam-info[_ngcontent-%COMP%]   .difficulty-indicator[_ngcontent-%COMP%]   .difficulty-bars[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{width:20px;height:6px;background:#e2e8f0;border-radius:3px;transition:all .2s ease}.exam-item[_ngcontent-%COMP%]   .exam-info[_ngcontent-%COMP%]   .difficulty-indicator[_ngcontent-%COMP%]   .difficulty-bars[_ngcontent-%COMP%]   .bar.active[_ngcontent-%COMP%]{background:var(--exam-color)}.exam-item[_ngcontent-%COMP%]   .exam-action[_ngcontent-%COMP%]{padding:0 1.5rem 1.5rem}.exam-item[_ngcontent-%COMP%]   .exam-action[_ngcontent-%COMP%]   .start-exam-btn[_ngcontent-%COMP%]{width:100%;background:linear-gradient(135deg,var(--exam-color),color-mix(in srgb,var(--exam-color) 90%,#000));color:#fff;border:none;padding:1rem;border-radius:.75rem;font-weight:600;cursor:pointer;position:relative;overflow:hidden;transition:all .3s ease}.exam-item[_ngcontent-%COMP%]   .exam-action[_ngcontent-%COMP%]   .start-exam-btn[_ngcontent-%COMP%]   .btn-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.5rem;position:relative;z-index:2}.exam-item[_ngcontent-%COMP%]   .exam-action[_ngcontent-%COMP%]   .start-exam-btn[_ngcontent-%COMP%]   .btn-content[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.125rem}.exam-item[_ngcontent-%COMP%]   .exam-action[_ngcontent-%COMP%]   .start-exam-btn[_ngcontent-%COMP%]   .btn-shine[_ngcontent-%COMP%]{position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.4),transparent);transition:left .5s ease}.exam-item[_ngcontent-%COMP%]   .exam-action[_ngcontent-%COMP%]   .start-exam-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #0003}.exam-item[_ngcontent-%COMP%]   .exam-action[_ngcontent-%COMP%]   .start-exam-btn[_ngcontent-%COMP%]:hover   .btn-shine[_ngcontent-%COMP%]{left:100%}.exam-item[_ngcontent-%COMP%]   .exam-action[_ngcontent-%COMP%]   .start-exam-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem 2rem;text-align:center;color:#fff}.loading-state[_ngcontent-%COMP%]   .loading-animation[_ngcontent-%COMP%]{position:relative;width:80px;height:80px;margin-bottom:2rem}.loading-state[_ngcontent-%COMP%]   .loading-animation[_ngcontent-%COMP%]   .pulse-ring[_ngcontent-%COMP%]{position:absolute;border:2px solid rgba(255,255,255,.3);border-radius:50%;animation:_ngcontent-%COMP%_pulse 2s cubic-bezier(.455,.03,.515,.955) infinite}.loading-state[_ngcontent-%COMP%]   .loading-animation[_ngcontent-%COMP%]   .pulse-ring[_ngcontent-%COMP%]:nth-child(1){width:60px;height:60px;top:10px;left:10px;animation-delay:0s}.loading-state[_ngcontent-%COMP%]   .loading-animation[_ngcontent-%COMP%]   .pulse-ring[_ngcontent-%COMP%]:nth-child(2){width:70px;height:70px;top:5px;left:5px;animation-delay:.3s}.loading-state[_ngcontent-%COMP%]   .loading-animation[_ngcontent-%COMP%]   .pulse-ring[_ngcontent-%COMP%]:nth-child(3){width:80px;height:80px;top:0;left:0;animation-delay:.6s}.loading-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;margin:0 0 .5rem}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fffc;margin:0}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(.8);opacity:1}to{transform:scale(1.2);opacity:0}}.error-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem 2rem;text-align:center;color:#fff}.error-state[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{font-size:4rem;color:#fed7d7;margin-bottom:1.5rem}.error-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;margin:0 0 .5rem}.error-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:#fffc;margin:0 0 2rem;max-width:400px}.error-state[_ngcontent-%COMP%]   .retry-button[_ngcontent-%COMP%]{background:#fff3;color:#fff;border:2px solid rgba(255,255,255,.3);padding:.75rem 2rem;border-radius:.75rem;font-weight:600;cursor:pointer;display:flex;align-items:center;gap:.5rem;transition:all .3s ease}.error-state[_ngcontent-%COMP%]   .retry-button[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:translateY(-2px)}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem 2rem;text-align:center;background:#ffffff1a;border-radius:1.5rem;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);color:#fff}.empty-state[_ngcontent-%COMP%]   .empty-illustration[_ngcontent-%COMP%]{font-size:4rem;color:#fff9;margin-bottom:1.5rem}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;margin:0 0 .5rem}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fffc;margin:0 0 2rem;max-width:400px}.empty-state[_ngcontent-%COMP%]   .refresh-btn[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   .clear-filter-btn[_ngcontent-%COMP%]{background:#fff3;color:#fff;border:2px solid rgba(255,255,255,.3);padding:.75rem 2rem;border-radius:.75rem;font-weight:600;cursor:pointer;display:flex;align-items:center;gap:.5rem;transition:all .3s ease}.empty-state[_ngcontent-%COMP%]   .refresh-btn[_ngcontent-%COMP%]:hover, .empty-state[_ngcontent-%COMP%]   .clear-filter-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:translateY(-2px)}@media (max-width: 768px){.sinav-container[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2)}.main-header[_ngcontent-%COMP%], .content-area[_ngcontent-%COMP%]{padding:1.5rem 1rem}.filter-section[_ngcontent-%COMP%]   .filter-tabs[_ngcontent-%COMP%]{padding:.25rem;gap:.25rem}.filter-section[_ngcontent-%COMP%]   .filter-tabs[_ngcontent-%COMP%]   .filter-tab[_ngcontent-%COMP%]{padding:.5rem 1rem;font-size:.875rem}.exam-item[_ngcontent-%COMP%]   .exam-info[_ngcontent-%COMP%]{padding:1rem}.exam-item[_ngcontent-%COMP%]   .exam-info[_ngcontent-%COMP%]   .exam-details[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}.exam-item[_ngcontent-%COMP%]   .exam-action[_ngcontent-%COMP%]{padding:0 1rem 1rem}}[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#ffffff1a;border-radius:4px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ffffff4d;border-radius:4px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#ffffff80}.modal[_ngcontent-%COMP%]{z-index:1050}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{border:none;border-radius:15px;box-shadow:0 10px 30px #0003}.modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{border-radius:15px 15px 0 0;border-bottom:1px solid rgba(0,0,0,.125)}.modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]{font-weight:600}.modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{border-top:1px solid rgba(0,0,0,.125);border-radius:0 0 15px 15px}.modal-backdrop[_ngcontent-%COMP%]{z-index:1040;background-color:#00000080}.exam-result-summary[_ngcontent-%COMP%]   .result-stat[_ngcontent-%COMP%]{margin-bottom:10px;transition:transform .2s ease}.exam-result-summary[_ngcontent-%COMP%]   .result-stat[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.exam-result-summary[_ngcontent-%COMP%]   .result-stat[_ngcontent-%COMP%]   .fs-4[_ngcontent-%COMP%]{font-size:1.5rem!important}.exam-result-summary[_ngcontent-%COMP%]   .result-stat[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.8rem;opacity:.9}.alert-warning[_ngcontent-%COMP%]{border-left:4px solid #f0ad4e;background-color:#fcf8e3;border-color:#faebcc}']})};function Txe(i,e){if(i&1&&(u(0,"div",30),k(1,"i",31),m(2),f()),i&2){let t=F();x(2),he(" ",t.error," ")}}function Bxe(i,e){if(i&1&&(u(0,"div",32),k(1,"i",33),m(2),f()),i&2){let t=F();x(2),he(" ",t.successMessage," ")}}function Nxe(i,e){if(i&1){let t=Ae();u(0,"button",39),U("click",function(){K(t);let r=F().$implicit,o=F();return Y(o.clearAnswer(r))}),k(1,"i",40),f()}}function Lxe(i,e){if(i&1){let t=Ae();u(0,"button",41),U("click",function(){let r=K(t).$implicit,o=F().$implicit,s=F();return Y(s.selectAnswer(o,r))}),m(1),f()}if(i&2){let t=e.$implicit,n=F().$implicit,r=F();xe("selected",r.isSelected(n,t)),x(),he(" ",t," ")}}function Rxe(i,e){if(i&1&&(u(0,"div",34)(1,"div",35)(2,"span",11),m(3),f(),ee(4,Nxe,2,0,"button",36),f(),u(5,"div",37),ee(6,Lxe,2,3,"button",38),f()()),i&2){let t=e.$implicit,n=F();x(3),W(t),x(),S("ngIf",n.cevaplar["soru"+t]),x(2),S("ngForOf",n.siklar)}}function zxe(i,e){if(i&1&&(u(0,"p",42),k(1,"i",43),m(2),f()),i&2){let t=F();x(2),he(" ",t.getUnansweredCount()," soru bo\u015F kald\u0131 ")}}function jxe(i,e){i&1&&(u(0,"p",44),k(1,"i",45),m(2," T\xFCm sorular cevapland\u0131 "),f())}function Vxe(i,e){i&1&&(u(0,"span"),m(1,"S\u0131nav\u0131 Bitir"),f())}function Uxe(i,e){i&1&&(u(0,"span"),m(1,"Kaydediliyor..."),f())}var U5=class i{constructor(e,t,n){this.route=e;this.router=t;this.http=n}sinavId=0;sinavAdi="";sinavTuru="";soruSayisi=0;cevaplar={};siklar=["A","B","C","D","E"];sorular=[];submitting=!1;error=null;successMessage="";message="";messageType="info";ngOnInit(){this.route.queryParams.subscribe(e=>{if(this.sinavId=+e.sinavId||0,this.sinavAdi=e.sinavAdi||"",this.sinavTuru=e.sinavTuru||"",this.soruSayisi=+e.soruSayisi||0,e.retake==="true"&&this.showRetakeWarning(),!this.sinavId||!this.soruSayisi){this.router.navigate(["/ogrenci/sinav-islemleri"]);return}this.initializeSorular()})}initializeSorular(){this.sorular=Array(this.soruSayisi).fill(0).map((e,t)=>t+1);for(let e=1;e<=this.soruSayisi;e++)this.cevaplar[`soru${e}`]=""}selectAnswer(e,t){this.cevaplar[`soru${e}`]=t}isSelected(e,t){return this.cevaplar[`soru${e}`]===t}getAnsweredCount(){return Object.values(this.cevaplar).filter(e=>e!=="").length}getUnansweredCount(){return this.soruSayisi-this.getAnsweredCount()}clearAnswer(e){this.cevaplar[`soru${e}`]=""}submitAnswers(){if(this.getUnansweredCount()>0&&!confirm(`${this.getUnansweredCount()} soru bo\u015F kald\u0131. Yine de s\u0131nav\u0131 bitirmek istiyor musunuz?`))return;this.submitting=!0,this.error=null,this.successMessage="";let e=localStorage.getItem("user")||sessionStorage.getItem("user");if(!e){this.error="\xD6\u011Frenci bilgisi bulunamad\u0131.",this.submitting=!1;return}let t=0;try{t=JSON.parse(e).id||0}catch{this.error="\xD6\u011Frenci bilgisi ge\xE7ersiz.",this.submitting=!1;return}let n={sinav_id:this.sinavId,ogrenci_id:t,cevaplar:this.cevaplar,sinav_adi:this.sinavAdi,sinav_turu:this.sinavTuru,soru_sayisi:this.soruSayisi};this.http.post("./server/api/sinav_cevaplari_kaydet.php",n).subscribe({next:r=>{r.success?(this.submitting=!1,this.successMessage="Cevaplar\u0131n\u0131z ba\u015Far\u0131yla kaydedildi! Sonu\xE7lar sayfas\u0131na y\xF6nlendiriliyorsunuz...",this.error=null,console.log("Cevaplar kaydedildi:",r),setTimeout(()=>{let s=JSON.parse(localStorage.getItem("user")||"{}").id;this.router.navigate(["/ogrenci-sayfasi/sinav-sonuclari"],{queryParams:{sinavId:this.sinavId,ogrenciId:s}})},1500)):this.error=r.message||"Cevaplar kaydedilirken hata olu\u015Ftu."},error:r=>{this.submitting=!1,this.error="Sunucu hatas\u0131: "+(r.message||"Ba\u011Flant\u0131 hatas\u0131"),console.error("Cevap kaydetme hatas\u0131:",r)}})}goBack(){confirm("S\u0131navdan \xE7\u0131kmak istedi\u011Finize emin misiniz? Cevaplar\u0131n\u0131z kaydedilmeyecek!")&&this.router.navigate(["/ogrenci-sayfasi/ogrenci-sinav-islemleri-sayfasi"])}getSinavTuruColor(){return{TYT:"#667eea",AYT:"#4facfe",TAR:"#43e97b",TEST:"#fa709a"}[this.sinavTuru]||"#6c757d"}showRetakeWarning(){this.message="Bu s\u0131nav\u0131 daha \xF6nce \xE7\xF6zm\xFC\u015Ft\xFCn\xFCz. Yeni cevaplar\u0131n\u0131z \xF6nceki sonu\xE7lar\u0131n\u0131z\u0131n yerine ge\xE7ecektir.",this.messageType="warning",setTimeout(()=>{this.message=""},5e3)}getCompletionPercent(){return!this.soruSayisi||this.soruSayisi===0?0:Math.round(this.getAnsweredCount()/this.soruSayisi*100)}formatTime(e){let t=Math.floor(e/60),n=e%60;return`${t.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`}getOgrenciId(){let e=localStorage.getItem("userData");if(e)try{return JSON.parse(e).id||0}catch(t){return console.error("\xD6\u011Frenci ID al\u0131namad\u0131:",t),0}return 0}static \u0275fac=function(t){return new(t||i)(ke(Mi),ke(an),ke(gt))};static \u0275cmp=Ke({type:i,selectors:[["app-ogrenci-optik-sayfasi"]],standalone:!1,decls:47,vars:23,consts:[[1,"optik-container"],[1,"exam-header"],[1,"header-content"],[1,"exam-info"],[1,"exam-type"],[1,"question-count"],[1,"back-btn",3,"click"],[1,"bi","bi-arrow-left"],[1,"progress-section"],[1,"progress-stats"],[1,"stat","answered"],[1,"number"],[1,"label"],[1,"stat","unanswered"],[1,"stat","total"],[1,"progress-bar-container"],[1,"progress-bar"],[1,"progress-text"],["class","alert alert-error",4,"ngIf"],["class","alert alert-success",4,"ngIf"],[1,"optik-form"],[1,"questions-grid"],["class","question-row",4,"ngFor","ngForOf"],[1,"submit-section"],[1,"submit-info"],["class","warning",4,"ngIf"],["class","success",4,"ngIf"],[1,"submit-btn",3,"click","disabled"],[1,"bi"],[4,"ngIf"],[1,"alert","alert-error"],[1,"bi","bi-exclamation-triangle-fill"],[1,"alert","alert-success"],[1,"bi","bi-check-circle-fill"],[1,"question-row"],[1,"question-number"],["class","clear-btn","title","Cevab\u0131 Temizle",3,"click",4,"ngIf"],[1,"answer-options"],["class","option-btn",3,"selected","click",4,"ngFor","ngForOf"],["title","Cevab\u0131 Temizle",1,"clear-btn",3,"click"],[1,"bi","bi-x"],[1,"option-btn",3,"click"],[1,"warning"],[1,"bi","bi-exclamation-triangle"],[1,"success"],[1,"bi","bi-check-circle"]],template:function(t,n){t&1&&(u(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),m(4),f(),u(5,"div",3)(6,"span",4),m(7),f(),u(8,"span",5),m(9),f()()(),u(10,"button",6),U("click",function(){return n.goBack()}),k(11,"i",7),m(12," Geri D\xF6n "),f()(),u(13,"div",8)(14,"div",9)(15,"div",10)(16,"span",11),m(17),f(),u(18,"span",12),m(19,"Cevaplanan"),f()(),u(20,"div",13)(21,"span",11),m(22),f(),u(23,"span",12),m(24,"Bo\u015F"),f()(),u(25,"div",14)(26,"span",11),m(27),f(),u(28,"span",12),m(29,"Toplam"),f()()(),u(30,"div",15),k(31,"div",16),f(),u(32,"div",17),m(33),f()(),ee(34,Txe,3,1,"div",18)(35,Bxe,3,1,"div",19),u(36,"div",20)(37,"div",21),ee(38,Rxe,7,3,"div",22),f()(),u(39,"div",23)(40,"div",24),ee(41,zxe,3,1,"p",25)(42,jxe,3,0,"p",26),f(),u(43,"button",27),U("click",function(){return n.submitAnswers()}),k(44,"i",28),ee(45,Vxe,2,0,"span",29)(46,Uxe,2,0,"span",29),f()()()),t&2&&(x(),It("background","linear-gradient(135deg, "+n.getSinavTuruColor()+" 0%, "+n.getSinavTuruColor()+"aa 100%)"),x(3),W(n.sinavAdi),x(3),W(n.sinavTuru),x(2),he("",n.soruSayisi," Soru"),x(8),W(n.getAnsweredCount()),x(5),W(n.getUnansweredCount()),x(5),W(n.soruSayisi),x(4),It("width",n.getAnsweredCount()/n.soruSayisi*100,"%"),x(2),he(" %",n.getCompletionPercent()," Tamamland\u0131 "),x(),S("ngIf",n.error),x(),S("ngIf",n.successMessage),x(3),S("ngForOf",n.sorular),x(3),S("ngIf",n.getUnansweredCount()>0),x(),S("ngIf",n.getUnansweredCount()===0),x(),S("disabled",n.submitting),x(),xe("bi-hourglass-split",n.submitting)("bi-check-lg",!n.submitting),x(),S("ngIf",!n.submitting),x(),S("ngIf",n.submitting))},dependencies:[yt,lt],styles:[".optik-container[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto;padding:20px}.exam-header[_ngcontent-%COMP%]{color:#fff;padding:30px;border-radius:20px 20px 0 0;position:relative;margin-bottom:0}.exam-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{text-align:center}.exam-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.2rem;font-weight:700;margin-bottom:15px}.exam-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .exam-info[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:20px;font-size:1.1rem}.exam-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .exam-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff3;padding:8px 16px;border-radius:15px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.exam-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{position:absolute;left:30px;top:50%;transform:translateY(-50%);background:#fff3;color:#fff;border:2px solid rgba(255,255,255,.3);padding:12px 20px;border-radius:25px;cursor:pointer;font-weight:600;transition:all .3s ease}.exam-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:translateY(-50%) translate(-5px)}.exam-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px}.progress-section[_ngcontent-%COMP%]{background:#fff;padding:25px;border-left:5px solid #007bff;box-shadow:0 2px 10px #0000001a}.progress-section[_ngcontent-%COMP%]   .progress-stats[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:40px;margin-bottom:20px}.progress-section[_ngcontent-%COMP%]   .progress-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]{text-align:center}.progress-section[_ngcontent-%COMP%]   .progress-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{display:block;font-size:2rem;font-weight:700;margin-bottom:5px}.progress-section[_ngcontent-%COMP%]   .progress-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:.9rem;color:#6c757d;text-transform:uppercase;font-weight:600}.progress-section[_ngcontent-%COMP%]   .progress-stats[_ngcontent-%COMP%]   .stat.answered[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{color:#28a745}.progress-section[_ngcontent-%COMP%]   .progress-stats[_ngcontent-%COMP%]   .stat.unanswered[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{color:#ffc107}.progress-section[_ngcontent-%COMP%]   .progress-stats[_ngcontent-%COMP%]   .stat.total[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{color:#007bff}.progress-section[_ngcontent-%COMP%]   .progress-bar-container[_ngcontent-%COMP%]{background:#e9ecef;height:10px;border-radius:5px;overflow:hidden;margin-bottom:10px}.progress-section[_ngcontent-%COMP%]   .progress-bar-container[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#28a745,#20c997);transition:width .3s ease}.progress-section[_ngcontent-%COMP%]   .progress-text[_ngcontent-%COMP%]{text-align:center;font-weight:600;color:#495057}.alert[_ngcontent-%COMP%]{padding:15px 20px;border-radius:10px;margin:20px 0;display:flex;align-items:center;gap:10px;font-weight:600}.alert.alert-error[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;border:1px solid #f5c6cb}.alert.alert-error[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#dc3545}.alert.alert-success[_ngcontent-%COMP%]{background:#d4edda;color:#155724;border:1px solid #c3e6cb}.alert.alert-success[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#28a745}.optik-form[_ngcontent-%COMP%]{background:#fff;padding:30px;box-shadow:0 5px 20px #0000001a}.optik-form[_ngcontent-%COMP%]   .questions-grid[_ngcontent-%COMP%]{display:grid;gap:20px}.optik-form[_ngcontent-%COMP%]   .question-row[_ngcontent-%COMP%]{display:flex;align-items:center;padding:20px;background:#f8f9fa;border-radius:15px;transition:all .3s ease;border:2px solid transparent}.optik-form[_ngcontent-%COMP%]   .question-row[_ngcontent-%COMP%]:hover{background:#e9ecef;border-color:#007bff}.optik-form[_ngcontent-%COMP%]   .question-row[_ngcontent-%COMP%]   .question-number[_ngcontent-%COMP%]{min-width:80px;display:flex;align-items:center;gap:10px}.optik-form[_ngcontent-%COMP%]   .question-row[_ngcontent-%COMP%]   .question-number[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{width:50px;height:50px;background:#007bff;color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:1.1rem}.optik-form[_ngcontent-%COMP%]   .question-row[_ngcontent-%COMP%]   .question-number[_ngcontent-%COMP%]   .clear-btn[_ngcontent-%COMP%]{width:25px;height:25px;background:#dc3545;color:#fff;border:none;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:.8rem;transition:all .2s ease}.optik-form[_ngcontent-%COMP%]   .question-row[_ngcontent-%COMP%]   .question-number[_ngcontent-%COMP%]   .clear-btn[_ngcontent-%COMP%]:hover{background:#c82333;transform:scale(1.1)}.optik-form[_ngcontent-%COMP%]   .question-row[_ngcontent-%COMP%]   .answer-options[_ngcontent-%COMP%]{display:flex;gap:15px;margin-left:20px}.optik-form[_ngcontent-%COMP%]   .question-row[_ngcontent-%COMP%]   .answer-options[_ngcontent-%COMP%]   .option-btn[_ngcontent-%COMP%]{width:60px;height:60px;border:3px solid #dee2e6;background:#fff;border-radius:50%;font-size:1.3rem;font-weight:700;cursor:pointer;transition:all .3s ease;color:#495057}.optik-form[_ngcontent-%COMP%]   .question-row[_ngcontent-%COMP%]   .answer-options[_ngcontent-%COMP%]   .option-btn[_ngcontent-%COMP%]:hover{border-color:#007bff;transform:scale(1.05);box-shadow:0 5px 15px #007bff33}.optik-form[_ngcontent-%COMP%]   .question-row[_ngcontent-%COMP%]   .answer-options[_ngcontent-%COMP%]   .option-btn.selected[_ngcontent-%COMP%]{background:#f60;color:#fff;border-color:#f60;transform:scale(1.1);box-shadow:0 8px 20px #ff66004d}.submit-section[_ngcontent-%COMP%]{background:#fff;padding:30px;border-radius:0 0 20px 20px;box-shadow:0 5px 20px #0000001a;text-align:center;border-top:3px solid #007bff}.submit-section[_ngcontent-%COMP%]   .submit-info[_ngcontent-%COMP%]{margin-bottom:25px}.submit-section[_ngcontent-%COMP%]   .submit-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;margin:0;display:flex;align-items:center;justify-content:center;gap:10px}.submit-section[_ngcontent-%COMP%]   .submit-info[_ngcontent-%COMP%]   p.warning[_ngcontent-%COMP%]{color:#ffc107}.submit-section[_ngcontent-%COMP%]   .submit-info[_ngcontent-%COMP%]   p.warning[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#ff8c00}.submit-section[_ngcontent-%COMP%]   .submit-info[_ngcontent-%COMP%]   p.success[_ngcontent-%COMP%]{color:#28a745}.submit-section[_ngcontent-%COMP%]   .submit-info[_ngcontent-%COMP%]   p.success[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#20c997}.submit-section[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#20c997);color:#fff;border:none;padding:15px 40px;border-radius:25px;font-size:1.2rem;font-weight:700;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;gap:10px;margin:0 auto}.submit-section[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-3px);box-shadow:0 10px 30px #28a7454d}.submit-section[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed;transform:none}.submit-section[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem}@media (max-width: 768px){.optik-container[_ngcontent-%COMP%]{padding:10px}.exam-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.8rem}.exam-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .exam-info[_ngcontent-%COMP%]{flex-direction:column;gap:10px}.exam-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{position:static;transform:none;margin-bottom:20px}.progress-stats[_ngcontent-%COMP%]{gap:20px!important}.question-row[_ngcontent-%COMP%]{flex-direction:column;gap:15px;text-align:center}.question-row[_ngcontent-%COMP%]   .answer-options[_ngcontent-%COMP%]{margin-left:0!important;justify-content:center}.submit-btn[_ngcontent-%COMP%]{padding:12px 30px!important;font-size:1rem!important}}"]})};function Hxe(i,e){if(i&1&&(u(0,"span",15),k(1,"i",18),m(2),f()),i&2){let t=F(2);x(2),he(" ",t.studentInfo.grup," ")}}function Gxe(i,e){if(i&1&&(u(0,"span",15),k(1,"i",19),m(2),f()),i&2){let t=F(2);x(2),he(" ",t.studentInfo.ogretmeni," ")}}function $xe(i,e){if(i&1&&(u(0,"div",10)(1,"div",11),k(2,"img",12),f(),u(3,"div",13)(4,"h4"),m(5),f(),u(6,"div",14)(7,"span",15),k(8,"i",16),m(9),f(),ee(10,Hxe,3,1,"span",17)(11,Gxe,3,1,"span",17),f()()()),i&2){let t=F();x(2),S("src",t.studentInfo.avatar,vt)("alt",t.studentInfo.adi_soyadi),x(3),W(t.studentInfo.adi_soyadi),x(4),he(" ",t.studentInfo.sinifi," "),x(),S("ngIf",t.studentInfo.grup),x(),S("ngIf",t.studentInfo.ogretmeni)}}function Wxe(i,e){i&1&&(u(0,"div",20)(1,"div",21)(2,"span",22),m(3,"Y\xFCkleniyor..."),f()(),u(4,"p",23),m(5,"Konu analizi y\xFCkleniyor..."),f()())}function qxe(i,e){if(i&1){let t=Ae();u(0,"div",24),k(1,"i",25),m(2),u(3,"button",26),U("click",function(){K(t);let r=F();return Y(r.loadData())}),k(4,"i",27),m(5," Tekrar Dene "),f()()}if(i&2){let t=F();x(2),he(" ",t.error," ")}}function Kxe(i,e){if(i&1&&(u(0,"div",33)(1,"div",34)(2,"div",35)(3,"div",36),k(4,"i",37),f(),u(5,"div",38)(6,"h3"),m(7),f(),u(8,"p"),m(9,"Toplam Konu"),f()()(),u(10,"div",39)(11,"div",36),k(12,"i",40),f(),u(13,"div",38)(14,"h3"),m(15),f(),u(16,"p"),m(17,"Ortalama Ba\u015Far\u0131"),f()()(),u(18,"div",41)(19,"div",36),k(20,"i",42),f(),u(21,"div",38)(22,"h3"),m(23),f(),u(24,"p"),m(25,"Toplam Soru"),f()()(),u(26,"div",43)(27,"div",36),k(28,"i",44),f(),u(29,"div",38)(30,"h3"),m(31),f(),u(32,"p"),m(33,"Do\u011Fru Cevap"),f()()()()()),i&2){let t=F(2);x(7),W(t.getTotalTopics()),x(8),he("",t.getAverageSuccess(),"%"),x(8),W(t.getTotalQuestions()),x(8),W(t.getTotalCorrect())}}function Yxe(i,e){if(i&1&&(u(0,"div",45)(1,"h3"),k(2,"i",46),m(3,"Ba\u015Far\u0131 Seviyesi Da\u011F\u0131l\u0131m\u0131"),f(),u(4,"div",47)(5,"div",48)(6,"div",49),k(7,"i",50),f(),u(8,"div",51)(9,"h4"),m(10),f(),u(11,"p"),m(12,"M\xFCkemmel (80%+)"),f()()(),u(13,"div",52)(14,"div",49),k(15,"i",53),f(),u(16,"div",51)(17,"h4"),m(18),f(),u(19,"p"),m(20,"\u0130yi (60-79%)"),f()()(),u(21,"div",54)(22,"div",49),k(23,"i",55),f(),u(24,"div",51)(25,"h4"),m(26),f(),u(27,"p"),m(28,"Orta (40-59%)"),f()()(),u(29,"div",56)(30,"div",49),k(31,"i",57),f(),u(32,"div",51)(33,"h4"),m(34),f(),u(35,"p"),m(36,"Geli\u015Ftirilmeli (0-39%)"),f()()()()()),i&2){let t=F(2);x(10),W(t.getMukemmelKonuSayisi()),x(8),W(t.getIyiKonuSayisi()),x(8),W(t.getOrtaKonuSayisi()),x(8),W(t.getGelistirilmeliKonuSayisi())}}function Xxe(i,e){if(i&1&&(u(0,"div",67)(1,"div",68),m(2),f(),u(3,"div",69)(4,"h6"),m(5),f(),u(6,"div",70)(7,"span",71),m(8),f(),u(9,"small",5),m(10),f()()(),u(11,"div",72),k(12,"i",73),f()()),i&2){let t=e.$implicit,n=e.index;x(2),W(n+1),x(3),W(t.konu_adi),x(3),he("",t.basari_orani,"%"),x(2),hn("",t.dogru_sayisi,"/",t.toplam_soru,"")}}function Qxe(i,e){if(i&1&&(u(0,"div",67)(1,"div",74),m(2),f(),u(3,"div",69)(4,"h6"),m(5),f(),u(6,"div",70)(7,"span",75),m(8),f(),u(9,"small",5),m(10),f()()(),u(11,"div",76),k(12,"i",77),f()()),i&2){let t=e.$implicit,n=e.index;x(2),W(n+1),x(3),W(t.konu_adi),x(3),he("",t.basari_orani,"%"),x(2),hn("",t.dogru_sayisi,"/",t.toplam_soru,"")}}function Jxe(i,e){if(i&1&&(u(0,"div",58)(1,"div",59)(2,"div",60)(3,"div",61)(4,"h4"),k(5,"i",62),m(6,"En \u0130yi Konular\u0131n\u0131z"),f(),u(7,"div",63),ee(8,Xxe,13,5,"div",64),f()()(),u(9,"div",60)(10,"div",65)(11,"h4"),k(12,"i",66),m(13,"Geli\u015Ftirilmesi Gereken Konular"),f(),u(14,"div",63),ee(15,Qxe,13,5,"div",64),f()()()()()),i&2){let t=F(2);x(8),S("ngForOf",t.getEnIyiKonular()),x(7),S("ngForOf",t.getGelistirilmesiGerekenKonular())}}function Zxe(i,e){if(i&1&&(u(0,"div",82)(1,"div",83)(2,"h6",84),m(3),f(),u(4,"span",85),m(5),f()(),u(6,"div",86)(7,"div",87)(8,"span",88),m(9),f()()(),u(10,"div",89)(11,"div",90)(12,"div",91)(13,"span",92),m(14),f(),u(15,"small",5),m(16,"Do\u011Fru"),f()(),u(17,"div",91)(18,"span",93),m(19),f(),u(20,"small",5),m(21,"Yanl\u0131\u015F"),f()(),u(22,"div",91)(23,"span",94),m(24),f(),u(25,"small",5),m(26,"Bo\u015F"),f()(),u(27,"div",91)(28,"span",95),m(29),f(),u(30,"small",5),m(31,"Toplam"),f()()()()()),i&2){let t=e.$implicit,n=F(3);x(3),W(t.konu_adi),x(),It("background-color",n.getKonuSuccessColor(t.basari_orani)),x(),he(" ",n.getKonuSuccessText(t.basari_orani)," "),x(2),It("width",t.basari_orani,"%")("background-color",n.getKonuSuccessColor(t.basari_orani)),wi("aria-valuenow",t.basari_orani),x(2),he("",t.basari_orani,"%"),x(5),W(t.dogru_sayisi),x(5),W(t.yanlis_sayisi),x(5),W(t.bos_sayisi),x(5),W(t.toplam_soru)}}function e1e(i,e){if(i&1&&(u(0,"div",78)(1,"h3"),k(2,"i",79),m(3,"Detayl\u0131 Konu Analizi"),f(),u(4,"div",80),ee(5,Zxe,32,14,"div",81),f()()),i&2){let t=F(2);x(5),S("ngForOf",t.konuAnalizi)}}function t1e(i,e){i&1&&(u(0,"div",96)(1,"div",97),k(2,"i",98),u(3,"h3",99),m(4,"Hen\xFCz Konu Analizi Yok"),f(),u(5,"p",5),m(6,"S\u0131nav \xE7\xF6zd\xFCk\xE7e konu ba\u015Far\u0131 analiziniz burada g\xF6r\xFCnecek"),f(),u(7,"p",5),m(8,"Hadi ilk s\u0131nav\u0131n\u0131 \xE7\xF6z! \u{1F4CA}"),f()()())}function n1e(i,e){if(i&1&&(u(0,"div"),ee(1,Kxe,34,4,"div",28)(2,Yxe,37,4,"div",29)(3,Jxe,16,2,"div",30)(4,e1e,6,1,"div",31)(5,t1e,9,0,"div",32),f()),i&2){let t=F();x(),S("ngIf",t.konuAnalizi.length>0),x(),S("ngIf",t.konuAnalizi.length>0),x(),S("ngIf",t.konuAnalizi.length>0),x(),S("ngIf",t.konuAnalizi.length>0),x(),S("ngIf",!t.loadingKonuAnalizi&&!t.error&&t.konuAnalizi.length===0)}}var H5=class i{constructor(e){this.http=e}studentInfo=null;konuAnalizi=[];loadingKonuAnalizi=!1;error=null;ngOnInit(){this.loadData()}loadData(){this.loadingKonuAnalizi=!0,this.error=null,this.loadStudentInfo().then(()=>{this.studentInfo?this.loadKonuAnalizi():(this.error="\xD6\u011Frenci bilgileri al\u0131namad\u0131.",this.loadingKonuAnalizi=!1)}).catch(e=>{console.error("Error loading student info:",e),this.error="\xD6\u011Frenci bilgileri y\xFCklenirken hata olu\u015Ftu.",this.loadingKonuAnalizi=!1})}loadStudentInfo(){return new Promise((e,t)=>{let n=localStorage.getItem("user")||sessionStorage.getItem("user");if(n)try{let r=JSON.parse(n);this.studentInfo={id:r.id,adi_soyadi:r.adi_soyadi||"\xD6\u011Frenci",email:r.email||"",sinifi:r.sinifi||r.sinif||"S\u0131n\u0131f Bilgisi Yok",grup:r.grup||r.grubu||"",ogretmeni:r.ogretmeni||"\xD6\u011Fretmen Bilgisi Yok",avatar:r.avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(r.adi_soyadi||"\xD6\u011Frenci")}&background=28a745&color=fff&size=40&font-size=0.6&rounded=true`},e()}catch(r){t(r)}else t("Kullan\u0131c\u0131 bilgisi bulunamad\u0131.")})}loadKonuAnalizi(){if(this.loadingKonuAnalizi=!0,this.error=null,!this.studentInfo){this.loadingKonuAnalizi=!1,this.error="\xD6\u011Frenci bilgileri bulunamad\u0131";return}let e=this.studentInfo.id;if(!e){this.loadingKonuAnalizi=!1,this.error="\xD6\u011Frenci ID bulunamad\u0131";return}this.http.get(`./server/api/ogrenci_konu_analizi.php?ogrenci_id=${e}`).subscribe({next:t=>{this.loadingKonuAnalizi=!1,t.success&&t.data?this.konuAnalizi=t.data.konu_istatistikleri||[]:this.konuAnalizi=[]},error:t=>{this.loadingKonuAnalizi=!1,this.error="Konu analizi y\xFCklenirken hata olu\u015Ftu: "+(t.error?.message||t.message),console.error("Error loading konu analizi:",t)}})}getKonuSuccessColor(e){return e>=80?"#28a745":e>=60?"#ffc107":e>=40?"#fd7e14":"#dc3545"}getKonuSuccessText(e){return e>=80?"M\xFCkemmel":e>=60?"\u0130yi":e>=40?"Orta":"Geli\u015Ftirilmeli"}getTotalTopics(){return this.konuAnalizi.length}getAverageSuccess(){if(this.konuAnalizi.length===0)return 0;let e=this.konuAnalizi.reduce((t,n)=>t+n.basari_orani,0);return Math.round(e/this.konuAnalizi.length)}getTotalQuestions(){return this.konuAnalizi.reduce((e,t)=>e+t.toplam_soru,0)}getTotalCorrect(){return this.konuAnalizi.reduce((e,t)=>e+t.dogru_sayisi,0)}getMukemmelKonuSayisi(){return this.konuAnalizi.filter(e=>e.basari_orani>=80).length}getIyiKonuSayisi(){return this.konuAnalizi.filter(e=>e.basari_orani>=60&&e.basari_orani<80).length}getOrtaKonuSayisi(){return this.konuAnalizi.filter(e=>e.basari_orani>=40&&e.basari_orani<60).length}getGelistirilmeliKonuSayisi(){return this.konuAnalizi.filter(e=>e.basari_orani<40).length}getEnIyiKonular(){return this.konuAnalizi.filter(e=>e.basari_orani>0).sort((e,t)=>t.basari_orani-e.basari_orani).slice(0,3)}getGelistirilmesiGerekenKonular(){return this.konuAnalizi.filter(e=>e.basari_orani<60).sort((e,t)=>e.basari_orani-t.basari_orani).slice(0,3)}static \u0275fac=function(t){return new(t||i)(ke(gt))};static \u0275cmp=Ke({type:i,selectors:[["app-ogrenci-konu-analiz-sayfasi"]],standalone:!1,decls:13,vars:4,consts:[[1,"konu-analiz-container"],[1,"page-header"],[1,"header-content"],[1,"header-text"],[1,"bi","bi-graph-up","me-2"],[1,"text-muted"],["class","student-info-card",4,"ngIf"],["class","loading-section text-center py-5",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[4,"ngIf"],[1,"student-info-card"],[1,"student-avatar"],[3,"src","alt"],[1,"student-details"],[1,"student-meta"],[1,"meta-item"],[1,"bi","bi-mortarboard","me-1"],["class","meta-item",4,"ngIf"],[1,"bi","bi-people","me-1"],[1,"bi","bi-person-badge","me-1"],[1,"loading-section","text-center","py-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-3","text-muted"],[1,"alert","alert-danger"],[1,"bi","bi-exclamation-triangle","me-2"],[1,"btn","btn-sm","btn-outline-danger","ms-3",3,"click"],[1,"bi","bi-arrow-clockwise","me-1"],["class","summary-stats-section",4,"ngIf"],["class","performance-distribution",4,"ngIf"],["class","topics-highlights",4,"ngIf"],["class","detailed-analysis",4,"ngIf"],["class","empty-state text-center py-5",4,"ngIf"],[1,"summary-stats-section"],[1,"stats-grid"],[1,"stat-card","primary"],[1,"stat-icon"],[1,"bi","bi-book"],[1,"stat-content"],[1,"stat-card","success"],[1,"bi","bi-percent"],[1,"stat-card","info"],[1,"bi","bi-question-circle"],[1,"stat-card","warning"],[1,"bi","bi-check-circle"],[1,"performance-distribution"],[1,"bi","bi-pie-chart","me-2"],[1,"distribution-grid"],[1,"distribution-card","excellent"],[1,"distribution-icon"],[1,"bi","bi-trophy-fill"],[1,"distribution-content"],[1,"distribution-card","good"],[1,"bi","bi-star-fill"],[1,"distribution-card","average"],[1,"bi","bi-dash-circle-fill"],[1,"distribution-card","needs-improvement"],[1,"bi","bi-exclamation-triangle-fill"],[1,"topics-highlights"],[1,"row"],[1,"col-md-6"],[1,"highlight-card","success-topics"],[1,"bi","bi-award","me-2"],[1,"topics-list"],["class","topic-highlight-item",4,"ngFor","ngForOf"],[1,"highlight-card","improvement-topics"],[1,"bi","bi-arrow-up-circle","me-2"],[1,"topic-highlight-item"],[1,"topic-rank"],[1,"topic-info"],[1,"topic-stats"],[1,"success-rate"],[1,"topic-badge","excellent"],[1,"bi","bi-trophy"],[1,"topic-rank","warning"],[1,"success-rate","warning"],[1,"topic-badge","needs-work"],[1,"bi","bi-arrow-up"],[1,"detailed-analysis"],[1,"bi","bi-list-check","me-2"],[1,"konu-analizi-container"],["class","konu-item mb-4",4,"ngFor","ngForOf"],[1,"konu-item","mb-4"],[1,"konu-header","d-flex","justify-content-between","align-items-center","mb-2"],[1,"konu-adi","mb-0","fw-bold"],[1,"badge"],[1,"progress","mb-2",2,"height","25px"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar"],[1,"fw-bold"],[1,"konu-detaylar"],[1,"row","text-center"],[1,"col-3"],[1,"badge","bg-success","d-block","mb-1"],[1,"badge","bg-danger","d-block","mb-1"],[1,"badge","bg-warning","d-block","mb-1"],[1,"badge","bg-info","d-block","mb-1"],[1,"empty-state","text-center","py-5"],[1,"empty-content"],[1,"bi","bi-graph-up","text-muted",2,"font-size","4rem"],[1,"text-muted","mt-3"]],template:function(t,n){t&1&&(u(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1"),k(5,"i",4),m(6,"Konu Analizi"),f(),u(7,"p",5),m(8,"S\u0131nav performans\u0131n\u0131za g\xF6re konu ba\u015Far\u0131 analiziniz"),f()(),ee(9,$xe,12,6,"div",6),f()(),ee(10,Wxe,6,0,"div",7)(11,qxe,6,1,"div",8)(12,n1e,6,5,"div",9),f()),t&2&&(x(9),S("ngIf",n.studentInfo),x(),S("ngIf",n.loadingKonuAnalizi),x(),S("ngIf",n.error&&!n.loadingKonuAnalizi),x(),S("ngIf",!n.loadingKonuAnalizi&&!n.error))},dependencies:[yt,lt],styles:[".konu-analiz-container[_ngcontent-%COMP%]{padding:20px;background:linear-gradient(135deg,#667eea,#764ba2);min-height:100vh}.konu-analiz-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{margin-bottom:30px}.konu-analiz-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:20px}.konu-analiz-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-weight:700;margin-bottom:5px;font-size:2.5rem}.konu-analiz-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fffc;margin-bottom:0;font-size:1.1rem}.konu-analiz-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .student-info-card[_ngcontent-%COMP%]{background:#ffffff1a;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);border-radius:15px;padding:20px;display:flex;align-items:center;gap:15px;color:#fff}.konu-analiz-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .student-info-card[_ngcontent-%COMP%]   .student-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;border:3px solid rgba(255,255,255,.3)}.konu-analiz-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .student-info-card[_ngcontent-%COMP%]   .student-details[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:8px;font-weight:600}.konu-analiz-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .student-info-card[_ngcontent-%COMP%]   .student-details[_ngcontent-%COMP%]   .student-meta[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.konu-analiz-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .student-info-card[_ngcontent-%COMP%]   .student-details[_ngcontent-%COMP%]   .student-meta[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%]{font-size:.9rem;color:#ffffffe6}.konu-analiz-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .student-info-card[_ngcontent-%COMP%]   .student-details[_ngcontent-%COMP%]   .student-meta[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#ffffffb3}.konu-analiz-container[_ngcontent-%COMP%]   .loading-section[_ngcontent-%COMP%]{background:#fff;border-radius:15px;padding:40px;box-shadow:0 10px 30px #0000001a}.konu-analiz-container[_ngcontent-%COMP%]   .loading-section[_ngcontent-%COMP%]   .spinner-border[_ngcontent-%COMP%]{width:3rem;height:3rem}.konu-analiz-container[_ngcontent-%COMP%]   .loading-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;color:#6c757d}.konu-analiz-container[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{border-radius:15px;border:none;font-size:1.1rem}.konu-analiz-container[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-radius:8px}.konu-analiz-container[_ngcontent-%COMP%]   .summary-stats-section[_ngcontent-%COMP%]{margin-bottom:30px}.konu-analiz-container[_ngcontent-%COMP%]   .summary-stats-section[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px}.konu-analiz-container[_ngcontent-%COMP%]   .summary-stats-section[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:15px;padding:25px;box-shadow:0 10px 30px #0000001a;display:flex;align-items:center;gap:20px;transition:all .3s ease}.konu-analiz-container[_ngcontent-%COMP%]   .summary-stats-section[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 15px 40px #00000026}.konu-analiz-container[_ngcontent-%COMP%]   .summary-stats-section[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:1.5rem;color:#fff}.konu-analiz-container[_ngcontent-%COMP%]   .summary-stats-section[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin-bottom:5px;color:#2c3e50}.konu-analiz-container[_ngcontent-%COMP%]   .summary-stats-section[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6c757d;margin-bottom:0;font-weight:500}.konu-analiz-container[_ngcontent-%COMP%]   .summary-stats-section[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-card.primary[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2)}.konu-analiz-container[_ngcontent-%COMP%]   .summary-stats-section[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-card.success[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#56ab2f,#a8e6cf)}.konu-analiz-container[_ngcontent-%COMP%]   .summary-stats-section[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-card.info[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3498db,#2980b9)}.konu-analiz-container[_ngcontent-%COMP%]   .summary-stats-section[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-card.warning[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f39c12,#f1c40f)}.konu-analiz-container[_ngcontent-%COMP%]   .performance-distribution[_ngcontent-%COMP%]{margin-bottom:30px;background:#fff;border-radius:15px;padding:25px;box-shadow:0 10px 30px #0000001a}.konu-analiz-container[_ngcontent-%COMP%]   .performance-distribution[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#2c3e50;font-weight:700;margin-bottom:20px}.konu-analiz-container[_ngcontent-%COMP%]   .performance-distribution[_ngcontent-%COMP%]   .distribution-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px}.konu-analiz-container[_ngcontent-%COMP%]   .performance-distribution[_ngcontent-%COMP%]   .distribution-grid[_ngcontent-%COMP%]   .distribution-card[_ngcontent-%COMP%]{border-radius:12px;padding:20px;text-align:center;transition:all .3s ease}.konu-analiz-container[_ngcontent-%COMP%]   .performance-distribution[_ngcontent-%COMP%]   .distribution-grid[_ngcontent-%COMP%]   .distribution-card[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.konu-analiz-container[_ngcontent-%COMP%]   .performance-distribution[_ngcontent-%COMP%]   .distribution-grid[_ngcontent-%COMP%]   .distribution-card[_ngcontent-%COMP%]   .distribution-icon[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:10px}.konu-analiz-container[_ngcontent-%COMP%]   .performance-distribution[_ngcontent-%COMP%]   .distribution-grid[_ngcontent-%COMP%]   .distribution-card[_ngcontent-%COMP%]   .distribution-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;margin-bottom:5px}.konu-analiz-container[_ngcontent-%COMP%]   .performance-distribution[_ngcontent-%COMP%]   .distribution-grid[_ngcontent-%COMP%]   .distribution-card[_ngcontent-%COMP%]   .distribution-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0;font-weight:500}.konu-analiz-container[_ngcontent-%COMP%]   .performance-distribution[_ngcontent-%COMP%]   .distribution-grid[_ngcontent-%COMP%]   .distribution-card.excellent[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#20c997);color:#fff}.konu-analiz-container[_ngcontent-%COMP%]   .performance-distribution[_ngcontent-%COMP%]   .distribution-grid[_ngcontent-%COMP%]   .distribution-card.good[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffc107,#fd7e14);color:#fff}.konu-analiz-container[_ngcontent-%COMP%]   .performance-distribution[_ngcontent-%COMP%]   .distribution-grid[_ngcontent-%COMP%]   .distribution-card.average[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6f42c1,#e83e8c);color:#fff}.konu-analiz-container[_ngcontent-%COMP%]   .performance-distribution[_ngcontent-%COMP%]   .distribution-grid[_ngcontent-%COMP%]   .distribution-card.needs-improvement[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dc3545,#c82333);color:#fff}.konu-analiz-container[_ngcontent-%COMP%]   .topics-highlights[_ngcontent-%COMP%]{margin-bottom:30px}.konu-analiz-container[_ngcontent-%COMP%]   .topics-highlights[_ngcontent-%COMP%]   .highlight-card[_ngcontent-%COMP%]{background:#fff;border-radius:15px;padding:25px;box-shadow:0 10px 30px #0000001a;height:100%}.konu-analiz-container[_ngcontent-%COMP%]   .topics-highlights[_ngcontent-%COMP%]   .highlight-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#2c3e50;font-weight:700;margin-bottom:20px;padding-bottom:10px;border-bottom:2px solid #e9ecef}.konu-analiz-container[_ngcontent-%COMP%]   .topics-highlights[_ngcontent-%COMP%]   .highlight-card[_ngcontent-%COMP%]   .topics-list[_ngcontent-%COMP%]   .topic-highlight-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;padding:15px;border-radius:10px;margin-bottom:10px;transition:all .3s ease}.konu-analiz-container[_ngcontent-%COMP%]   .topics-highlights[_ngcontent-%COMP%]   .highlight-card[_ngcontent-%COMP%]   .topics-list[_ngcontent-%COMP%]   .topic-highlight-item[_ngcontent-%COMP%]:hover{background:#f8f9fa;transform:translate(5px)}.konu-analiz-container[_ngcontent-%COMP%]   .topics-highlights[_ngcontent-%COMP%]   .highlight-card[_ngcontent-%COMP%]   .topics-list[_ngcontent-%COMP%]   .topic-highlight-item[_ngcontent-%COMP%]   .topic-rank[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:.9rem}.konu-analiz-container[_ngcontent-%COMP%]   .topics-highlights[_ngcontent-%COMP%]   .highlight-card[_ngcontent-%COMP%]   .topics-list[_ngcontent-%COMP%]   .topic-highlight-item[_ngcontent-%COMP%]   .topic-rank.warning[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dc3545,#c82333)}.konu-analiz-container[_ngcontent-%COMP%]   .topics-highlights[_ngcontent-%COMP%]   .highlight-card[_ngcontent-%COMP%]   .topics-list[_ngcontent-%COMP%]   .topic-highlight-item[_ngcontent-%COMP%]   .topic-info[_ngcontent-%COMP%]{flex:1}.konu-analiz-container[_ngcontent-%COMP%]   .topics-highlights[_ngcontent-%COMP%]   .highlight-card[_ngcontent-%COMP%]   .topics-list[_ngcontent-%COMP%]   .topic-highlight-item[_ngcontent-%COMP%]   .topic-info[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin-bottom:5px;color:#2c3e50;font-weight:600}.konu-analiz-container[_ngcontent-%COMP%]   .topics-highlights[_ngcontent-%COMP%]   .highlight-card[_ngcontent-%COMP%]   .topics-list[_ngcontent-%COMP%]   .topic-highlight-item[_ngcontent-%COMP%]   .topic-info[_ngcontent-%COMP%]   .topic-stats[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.konu-analiz-container[_ngcontent-%COMP%]   .topics-highlights[_ngcontent-%COMP%]   .highlight-card[_ngcontent-%COMP%]   .topics-list[_ngcontent-%COMP%]   .topic-highlight-item[_ngcontent-%COMP%]   .topic-info[_ngcontent-%COMP%]   .topic-stats[_ngcontent-%COMP%]   .success-rate[_ngcontent-%COMP%]{font-weight:700;color:#28a745}.konu-analiz-container[_ngcontent-%COMP%]   .topics-highlights[_ngcontent-%COMP%]   .highlight-card[_ngcontent-%COMP%]   .topics-list[_ngcontent-%COMP%]   .topic-highlight-item[_ngcontent-%COMP%]   .topic-info[_ngcontent-%COMP%]   .topic-stats[_ngcontent-%COMP%]   .success-rate.warning[_ngcontent-%COMP%]{color:#dc3545}.konu-analiz-container[_ngcontent-%COMP%]   .topics-highlights[_ngcontent-%COMP%]   .highlight-card[_ngcontent-%COMP%]   .topics-list[_ngcontent-%COMP%]   .topic-highlight-item[_ngcontent-%COMP%]   .topic-badge[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:1.2rem}.konu-analiz-container[_ngcontent-%COMP%]   .topics-highlights[_ngcontent-%COMP%]   .highlight-card[_ngcontent-%COMP%]   .topics-list[_ngcontent-%COMP%]   .topic-highlight-item[_ngcontent-%COMP%]   .topic-badge.excellent[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#20c997);color:#fff}.konu-analiz-container[_ngcontent-%COMP%]   .topics-highlights[_ngcontent-%COMP%]   .highlight-card[_ngcontent-%COMP%]   .topics-list[_ngcontent-%COMP%]   .topic-highlight-item[_ngcontent-%COMP%]   .topic-badge.needs-work[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffc107,#fd7e14);color:#fff}.konu-analiz-container[_ngcontent-%COMP%]   .detailed-analysis[_ngcontent-%COMP%]{background:#fff;border-radius:15px;padding:25px;box-shadow:0 10px 30px #0000001a}.konu-analiz-container[_ngcontent-%COMP%]   .detailed-analysis[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#2c3e50;font-weight:700;margin-bottom:25px;padding-bottom:15px;border-bottom:3px solid #e9ecef}.konu-analiz-container[_ngcontent-%COMP%]   .detailed-analysis[_ngcontent-%COMP%]   .konu-analizi-container[_ngcontent-%COMP%]   .konu-item[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:12px;padding:20px;border-left:5px solid #667eea;transition:all .3s ease}.konu-analiz-container[_ngcontent-%COMP%]   .detailed-analysis[_ngcontent-%COMP%]   .konu-analizi-container[_ngcontent-%COMP%]   .konu-item[_ngcontent-%COMP%]:hover{box-shadow:0 5px 15px #0000001a;transform:translateY(-2px)}.konu-analiz-container[_ngcontent-%COMP%]   .detailed-analysis[_ngcontent-%COMP%]   .konu-analizi-container[_ngcontent-%COMP%]   .konu-item[_ngcontent-%COMP%]   .konu-header[_ngcontent-%COMP%]   .konu-adi[_ngcontent-%COMP%]{color:#2c3e50;font-size:1.1rem}.konu-analiz-container[_ngcontent-%COMP%]   .detailed-analysis[_ngcontent-%COMP%]   .konu-analizi-container[_ngcontent-%COMP%]   .konu-item[_ngcontent-%COMP%]   .konu-header[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{color:#fff;font-weight:600;padding:8px 12px;border-radius:8px}.konu-analiz-container[_ngcontent-%COMP%]   .detailed-analysis[_ngcontent-%COMP%]   .konu-analizi-container[_ngcontent-%COMP%]   .konu-item[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{background-color:#e9ecef;border-radius:10px;overflow:hidden}.konu-analiz-container[_ngcontent-%COMP%]   .detailed-analysis[_ngcontent-%COMP%]   .konu-analizi-container[_ngcontent-%COMP%]   .konu-item[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{border-radius:10px;transition:width .6s ease}.konu-analiz-container[_ngcontent-%COMP%]   .detailed-analysis[_ngcontent-%COMP%]   .konu-analizi-container[_ngcontent-%COMP%]   .konu-item[_ngcontent-%COMP%]   .konu-detaylar[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{font-size:.9rem;padding:8px 10px;border-radius:8px}.konu-analiz-container[_ngcontent-%COMP%]   .detailed-analysis[_ngcontent-%COMP%]   .konu-analizi-container[_ngcontent-%COMP%]   .konu-item[_ngcontent-%COMP%]   .konu-detaylar[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.8rem;font-weight:500}.konu-analiz-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{background:#fff;border-radius:15px;padding:60px 40px;box-shadow:0 10px 30px #0000001a}.konu-analiz-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:600}.konu-analiz-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;max-width:500px;margin:0 auto}@media (max-width: 768px){.konu-analiz-container[_ngcontent-%COMP%]{padding:15px}.konu-analiz-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.konu-analiz-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.konu-analiz-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .student-info-card[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.konu-analiz-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .student-info-card[_ngcontent-%COMP%]   .student-details[_ngcontent-%COMP%]   .student-meta[_ngcontent-%COMP%]{align-items:center}.konu-analiz-container[_ngcontent-%COMP%]   .summary-stats-section[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:15px}.konu-analiz-container[_ngcontent-%COMP%]   .performance-distribution[_ngcontent-%COMP%]   .distribution-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.konu-analiz-container[_ngcontent-%COMP%]   .topics-highlights[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-6[_ngcontent-%COMP%]{margin-bottom:20px}}@media (max-width: 480px){.konu-analiz-container[_ngcontent-%COMP%]   .performance-distribution[_ngcontent-%COMP%]   .distribution-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.konu-analiz-container[_ngcontent-%COMP%]   .summary-stats-section[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:15px}}"]})};var i1e=["fileInput"],r1e=["messageContainer"],o1e=(i,e)=>({"message-own":i,"message-other":e});function s1e(i,e){i&1&&(u(0,"div",19)(1,"div",20)(2,"span",21),m(3,"Y\xFCkleniyor..."),f()(),u(4,"p",22),m(5,"Soru \xE7\xF6z\xFCm\xFC sayfas\u0131 y\xFCkleniyor..."),f()())}function a1e(i,e){if(i&1){let t=Ae();u(0,"div",23),k(1,"i",24),m(2),u(3,"button",25),U("click",function(){K(t);let r=F();return Y(r.error=null)}),f()()}if(i&2){let t=F();x(2),he(" ",t.error," ")}}function l1e(i,e){if(i&1){let t=Ae();u(0,"div",45)(1,"div",46),k(2,"i",47),f(),u(3,"h4"),m(4,"Hen\xFCz mesaj yok"),f(),u(5,"p"),m(6,"\xD6\u011Fretmeninle soru \xE7\xF6z\xFCm\xFC konusunda konu\u015Fmaya ba\u015Fla!"),f(),u(7,"div",48)(8,"button",49),U("click",function(){K(t);let r=F(2);return Y(r.yeniMesaj="Bu soruyu nas\u0131l \xE7\xF6zebilirim?")}),m(9,' "Bu soruyu nas\u0131l \xE7\xF6zebilirim?" '),f(),u(10,"button",50),U("click",function(){K(t);let r=F(2);return Y(r.yeniMesaj="Bu konuyu anlayamad\u0131m, a\xE7\u0131klayabilir misiniz?")}),m(11,' "Bu konuyu anlayamad\u0131m" '),f()()()}}function c1e(i,e){if(i&1){let t=Ae();u(0,"div",62)(1,"img",63),U("click",function(){K(t);let r=F().$implicit,o=F(3);return Y(o.openImageModal(r.resim_url))}),f()()}if(i&2){let t=F().$implicit,n=F(3);x(),S("src",n.getImageUrl(t.resim_url),vt)}}function d1e(i,e){if(i&1&&(u(0,"div",64),m(1),f()),i&2){let t=F().$implicit;x(),he(" ",t.mesaj_metni," ")}}function u1e(i,e){if(i&1&&(u(0,"div",53)(1,"div",54),k(2,"i",55),f(),u(3,"div",56)(4,"div",57)(5,"span",58),m(6),f(),u(7,"span",59),m(8),f()(),ee(9,c1e,2,1,"div",60)(10,d1e,2,1,"div",61),f()()),i&2){let t=e.$implicit,n=F(3);S("ngClass",Up(6,o1e,t.gonderen_tip==="ogrenci",t.gonderen_tip==="ogretmen")),x(2),S("ngClass",t.gonderen_tip==="ogrenci"?"bi-person-circle":"bi-person-check-fill"),x(4),W(t.gonderen_adi),x(2),W(n.formatDate(t.gonderim_tarihi)),x(),S("ngIf",t.resim_url),x(),S("ngIf",t.mesaj_metni)}}function h1e(i,e){if(i&1&&(u(0,"div",51),ee(1,u1e,11,9,"div",52),f()),i&2){let t=F(2);x(),S("ngForOf",t.mesajlar)("ngForTrackBy",t.trackByMessageId)}}function f1e(i,e){if(i&1){let t=Ae();u(0,"div",65)(1,"div",66),k(2,"img",67),u(3,"button",68),U("click",function(){K(t);let r=F(2);return Y(r.removeSelectedFile())}),k(4,"i",69),f()()()}if(i&2){let t=F(2);x(2),S("src",t.previewUrl,vt)}}function g1e(i,e){i&1&&(u(0,"span"),k(1,"i",70),f())}function p1e(i,e){i&1&&k(0,"span",71)}function m1e(i,e){i&1&&(u(0,"span"),m(1,"G\xF6nderiliyor..."),f())}function x1e(i,e){if(i&1){let t=Ae();u(0,"div",26)(1,"div",27)(2,"div",28,0),ee(4,l1e,12,0,"div",29)(5,h1e,2,2,"div",30),f()(),u(6,"div",31),ee(7,f1e,5,1,"div",32),u(8,"div",33)(9,"div",34)(10,"button",35),U("click",function(){K(t);let r=ua(18);return Y(r.click())}),k(11,"i",36),f(),u(12,"input",37),at("ngModelChange",function(r){K(t);let o=F();return dt(o.yeniMesaj,r)||(o.yeniMesaj=r),Y(r)}),U("keyup.enter",function(){K(t);let r=F();return Y(r.gonderMesaj())}),f(),u(13,"button",38),U("click",function(){K(t);let r=F();return Y(r.gonderMesaj())}),ee(14,g1e,2,0,"span",39)(15,p1e,1,0,"span",40)(16,m1e,2,0,"span",39),f()(),u(17,"input",41,1),U("change",function(r){K(t);let o=F();return Y(o.onFileSelected(r))}),f()(),u(19,"div",42)(20,"small",43),k(21,"i",44),m(22," JPG, PNG ve GIF dosyalar\u0131 y\xFCkleyebilirsiniz (Maks. 5MB) "),f()()()()}if(i&2){let t=F();x(4),S("ngIf",t.mesajlar.length===0),x(),S("ngIf",t.mesajlar.length>0),x(2),S("ngIf",t.previewUrl),x(3),S("disabled",t.isSending),x(2),st("ngModel",t.yeniMesaj),S("disabled",t.isSending),x(),S("disabled",t.isSending||!t.yeniMesaj.trim()&&!t.selectedFile),x(),S("ngIf",!t.isSending),x(),S("ngIf",t.isSending),x(),S("ngIf",t.isSending)}}function _1e(i,e){if(i&1){let t=Ae();u(0,"div",72),U("click",function(){K(t);let r=F();return Y(r.closeImageModal())}),u(1,"div",73),U("click",function(r){return K(t),Y(r.stopPropagation())}),u(2,"div",74)(3,"h5",75),k(4,"i",76),m(5," Resim G\xF6r\xFCnt\xFCleme "),f(),u(6,"button",25),U("click",function(){K(t);let r=F();return Y(r.closeImageModal())}),k(7,"i",77),f()(),u(8,"div",78),k(9,"img",79),f(),u(10,"div",80)(11,"button",81),U("click",function(){K(t);let r=F();return Y(r.closeImageModal())}),k(12,"i",82),m(13," Kapat "),f(),u(14,"a",83),k(15,"i",84),m(16," \u0130ndir "),f()()()()}if(i&2){let t=F();x(9),S("src",t.selectedImageUrl,vt),x(5),S("href",t.selectedImageUrl,vt)("download",t.getImageFileName(t.selectedImageUrl))}}function v1e(i,e){if(i&1){let t=Ae();u(0,"div",85)(1,"div",86),k(2,"i",87),u(3,"strong",88),m(4,"Bildirim"),f(),u(5,"button",25),U("click",function(){K(t);let r=F();return Y(r.hideToast())}),f()(),u(6,"div",89),m(7),f()()}if(i&2){let t=F();S("ngClass","toast-"+t.toastType),x(7),he(" ",t.toastMessage," ")}}var G5=class i{constructor(e){this.http=e;this.requestNotificationPermission()}fileInput;messageContainer;studentInfo=null;mesajlar=[];yeniMesaj="";selectedFile=null;previewUrl=null;isLoading=!1;isLoadingMessages=!1;isSending=!1;error=null;autoRefresh=!0;refreshInterval;notificationsEnabled=!1;lastMessageCount=0;showToast=!1;toastMessage="";toastType="info";showImageModal=!1;selectedImageUrl="";apiBaseUrl="./server/api";ngOnInit(){this.loadData(),this.startAutoRefresh()}ngOnDestroy(){this.refreshInterval&&clearInterval(this.refreshInterval)}loadData(){this.isLoading=!0,this.error=null,this.loadStudentInfo().then(()=>{this.studentInfo?this.loadMesajlar():(this.error="\xD6\u011Frenci bilgileri al\u0131namad\u0131.",this.isLoading=!1)}).catch(e=>{console.error("Error loading student info:",e),this.error="\xD6\u011Frenci bilgileri y\xFCklenirken hata olu\u015Ftu.",this.isLoading=!1})}loadStudentInfo(){return new Promise((e,t)=>{let n=localStorage.getItem("user")||sessionStorage.getItem("user");if(n)try{let r=JSON.parse(n);this.studentInfo={id:r.id,adi_soyadi:r.adi_soyadi||"\xD6\u011Frenci",email:r.email||"",sinifi:r.sinif||r.sinifi||"Bilinmiyor",grup:r.grup||r.grubu,ogretmeni:r.ogretmeni,avatar:r.avatar,token:r.token},e()}catch(r){t(r)}else t(new Error("User not found"))})}loadMesajlar(){if(!this.studentInfo){console.error("Student info not available");return}this.isLoadingMessages=!0;let e=new xt({Authorization:`Bearer ${this.studentInfo.token}`});console.log("Loading messages for student ID:",this.studentInfo.id),console.log("API URL:",`${this.apiBaseUrl}/soru_mesajlari.php?ogrenci_id=${this.studentInfo.id}`),this.http.get(`${this.apiBaseUrl}/soru_mesajlari.php?ogrenci_id=${this.studentInfo.id}`,{headers:e}).subscribe({next:t=>{console.log("Messages loaded successfully:",t),t.success?(this.mesajlar=t.data||[],this.markMessagesAsRead()):(this.error=t.error||"Mesajlar y\xFCklenirken hata olu\u015Ftu.",console.error("API Error:",t.error)),this.isLoadingMessages=!1,this.isLoading=!1,setTimeout(()=>{this.scrollToBottom()},100)},error:t=>{console.error("Full API Error:",t),console.error("Error status:",t.status),console.error("Error message:",t.message),console.error("Error details:",t.error),this.error=`Mesajlar y\xFCklenirken hata olu\u015Ftu. (${t.status}: ${t.statusText})`,this.isLoadingMessages=!1,this.isLoading=!1}})}onFileSelected(e){let t=e.target.files[0];if(t){if(!["image/jpeg","image/png","image/gif"].includes(t.type)){this.error="Sadece JPG, PNG ve GIF dosyalar\u0131 y\xFCkleyebilirsiniz.";return}if(t.size>5*1024*1024){this.error="Dosya boyutu 5MB'dan k\xFC\xE7\xFCk olmal\u0131d\u0131r.";return}this.selectedFile=t,this.error=null;let r=new FileReader;r.onload=o=>{this.previewUrl=o.target?.result},r.readAsDataURL(t)}}removeSelectedFile(){this.selectedFile=null,this.previewUrl=null,this.fileInput&&(this.fileInput.nativeElement.value="")}gonderMesaj(){if(!this.studentInfo||!this.yeniMesaj.trim()&&!this.selectedFile)return;this.isSending=!0,this.error=null;let e=new xt({Authorization:`Bearer ${this.studentInfo.token}`}),t=new FormData;t.append("ogrenci_id",this.studentInfo.id.toString()),t.append("mesaj_metni",this.yeniMesaj.trim()),t.append("gonderen_tip","ogrenci"),t.append("gonderen_adi",this.studentInfo.adi_soyadi),this.selectedFile&&t.append("resim",this.selectedFile),this.http.post(`${this.apiBaseUrl}/soru_mesajlari.php`,t,{headers:e}).subscribe({next:n=>{n.success?(this.yeniMesaj="",this.removeSelectedFile(),this.loadMesajlar()):this.error=n.error||"Mesaj g\xF6nderilirken hata olu\u015Ftu.",this.isSending=!1},error:n=>{console.error("Error sending message:",n),this.error="Mesaj g\xF6nderilirken hata olu\u015Ftu.",this.isSending=!1}})}scrollToBottom(){if(this.messageContainer){let e=this.messageContainer.nativeElement;e.scrollTop=e.scrollHeight}}startAutoRefresh(){this.autoRefresh&&(this.refreshInterval=setInterval(()=>{this.checkForNewMessages()},1e4))}toggleAutoRefresh(){this.autoRefresh=!this.autoRefresh,this.autoRefresh?this.startAutoRefresh():this.refreshInterval&&clearInterval(this.refreshInterval)}formatDate(e){let t=new Date(e),r=new Date().getTime()-t.getTime(),o=Math.floor(r/(1e3*60)),s=Math.floor(r/(1e3*60*60)),a=Math.floor(r/(1e3*60*60*24));return o<1?"\u015Eimdi":o<60?`${o} dakika \xF6nce`:s<24?`${s} saat \xF6nce`:a<7?`${a} g\xFCn \xF6nce`:t.toLocaleDateString("tr-TR",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}temizleMesajlar(){if(confirm("T\xFCm mesajlar\u0131 silmek istedi\u011Finizden emin misiniz?")){if(!this.studentInfo)return;let e=new xt({Authorization:`Bearer ${this.studentInfo.token}`});this.mesajlar.forEach(t=>{t.id&&this.http.delete(`${this.apiBaseUrl}/soru_mesajlari.php?id=${t.id}`,{headers:e}).subscribe({next:()=>{this.loadMesajlar()},error:n=>{console.error("Error deleting message:",n)}})})}}yeniSoruBaslat(){this.yeniMesaj="",this.removeSelectedFile(),this.error=null}openImageModal(e){this.selectedImageUrl=e,this.showImageModal=!0,document.body.style.overflow="hidden"}closeImageModal(){this.showImageModal=!1,this.selectedImageUrl="",document.body.style.overflow="auto"}getImageFileName(e){if(!e)return"resim.jpg";let t=e.split("/");return t[t.length-1]||"resim.jpg"}getImageUrl(e){return e?e.startsWith("http")?e:`./${e}`:""}requestNotificationPermission(){"Notification"in window&&(Notification.permission==="default"?Notification.requestPermission().then(e=>{this.notificationsEnabled=e==="granted"}):Notification.permission==="granted"&&(this.notificationsEnabled=!0))}showNotification(e,t){if(this.notificationsEnabled&&"Notification"in window&&Notification.permission==="granted"){let n=new Notification(e,{body:t,icon:"./assets/siyah-turuncu.png",badge:"./assets/siyah-turuncu.png",tag:"teacher-reply",requireInteraction:!0});n.onclick=()=>{window.focus(),n.close()},setTimeout(()=>{n.close()},5e3)}}checkForNewMessages(){if(!this.studentInfo)return;let e=new xt({Authorization:`Bearer ${this.studentInfo.token}`});this.http.get(`${this.apiBaseUrl}/soru_mesajlari.php?ogrenci_id=${this.studentInfo.id}`,{headers:e}).subscribe({next:t=>{if(t.success){let n=t.data||[];if(this.lastMessageCount>0&&n.length>this.lastMessageCount){let r=n[n.length-1];r.gonderen_tip==="ogretmen"&&this.showNotification("\xD6\u011Fretmeninizden Cevap!",`${r.gonderen_adi} sorunuza cevap verdi.`)}this.lastMessageCount=n.length,n.length!==this.mesajlar.length&&(this.mesajlar=n,setTimeout(()=>{this.scrollToBottom()},100))}},error:t=>{console.error("Background message check error:",t)}})}toggleNotifications(e){let t=e.target.checked;t&&"Notification"in window?Notification.permission==="default"?Notification.requestPermission().then(n=>{this.notificationsEnabled=n==="granted",this.notificationsEnabled||(e.target.checked=!1)}):Notification.permission==="granted"?this.notificationsEnabled=!0:(this.notificationsEnabled=!1,e.target.checked=!1,alert("Taray\u0131c\u0131 ayarlar\u0131ndan bildirim izni vermelisiniz.")):this.notificationsEnabled=t}hideToast(){this.showToast=!1}trackByMessageId(e,t){return t.id||e}loadMessages(){this.studentInfo?.id&&(this.isLoadingMessages=!0,this.error=null,this.http.get(`${this.apiBaseUrl}/soru_mesajlari.php?ogrenci_id=${this.studentInfo.id}`).subscribe({next:e=>{this.isLoadingMessages=!1,e.success&&e.data&&(this.mesajlar=e.data.sort((t,n)=>new Date(t.gonderim_tarihi).getTime()-new Date(n.gonderim_tarihi).getTime()),this.markMessagesAsRead(),setTimeout(()=>{this.scrollToBottom()},100))},error:e=>{this.isLoadingMessages=!1,this.error="Mesajlar y\xFCklenirken bir hata olu\u015Ftu.",console.error("Mesaj y\xFCkleme hatas\u0131:",e)}}))}markMessagesAsRead(){this.studentInfo?.id&&this.http.get(`${this.apiBaseUrl}/mesaj_okundu.php?ogrenci_id=${this.studentInfo.id}`).subscribe({next:e=>{console.log("Mesajlar okundu olarak i\u015Faretlendi:",e),this.mesajlar.forEach(t=>{t.gonderen_tip==="ogretmen"&&(t.okundu=!0)})},error:e=>{console.error("Mesajlar okundu i\u015Faretlenirken hata:",e)}})}static \u0275fac=function(t){return new(t||i)(ke(gt))};static \u0275cmp=Ke({type:i,selectors:[["app-ogrenci-soru-cozumu-sayfasi"]],viewQuery:function(t,n){if(t&1&&(Gi(i1e,5),Gi(r1e,5)),t&2){let r;Di(r=Fi())&&(n.fileInput=r.first),Di(r=Fi())&&(n.messageContainer=r.first)}},standalone:!1,decls:22,vars:5,consts:[["messageContainer",""],["fileInput",""],[1,"container-full"],[1,"row"],[1,"col"],[1,"col-12","col-lg-10","mt-1"],[1,"card-ana","bg-orange"],[1,"card-ana-header"],[1,"bi","bi-book","me-2"],[1,"header-buttons",3,"click"],[1,"bi","bi-bookmark-plus-fill"],[1,"bi","bi","bi-trash"],[1,"card-ana-body"],["class","loading-section",4,"ngIf"],["class","alert alert-danger alert-dismissible",4,"ngIf"],["class","chat-container",4,"ngIf"],["class","image-modal-overlay",3,"click",4,"ngIf"],[1,"toast-container","position-fixed","top-0","end-0","p-3",2,"z-index","11000"],["class","toast show","role","alert",3,"ngClass",4,"ngIf"],[1,"loading-section"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-3","text-muted"],[1,"alert","alert-danger","alert-dismissible"],[1,"bi","bi-exclamation-triangle","me-2"],["type","button",1,"btn-close",3,"click"],[1,"chat-container"],[1,"chat-messages-container"],[1,"messages-wrapper"],["class","empty-chat-state",4,"ngIf"],["class","messages-list",4,"ngIf"],[1,"message-input-container"],["class","file-preview",4,"ngIf"],[1,"input-form"],[1,"input-group"],["type","button",1,"btn","btn-outline-secondary",3,"click","disabled"],[1,"bi","bi-paperclip"],["type","text","placeholder","Sorunuzu yaz\u0131n veya resim y\xFCkleyin...",1,"form-control",3,"ngModelChange","keyup.enter","ngModel","disabled"],[1,"btn","btn-primary",3,"click","disabled"],[4,"ngIf"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],["type","file","accept","image/jpeg,image/png,image/gif",1,"d-none",3,"change"],[1,"file-info"],[1,"text-muted"],[1,"bi","bi-info-circle","me-1"],[1,"empty-chat-state"],[1,"empty-icon"],[1,"bi","bi-chat-square-dots"],[1,"suggestion-buttons"],[1,"btn","btn-outline-primary","btn-sm","me-2",3,"click"],[1,"btn","btn-outline-primary","btn-sm",3,"click"],[1,"messages-list"],["class","message-item",3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],[1,"message-item",3,"ngClass"],[1,"message-avatar"],[1,"bi",3,"ngClass"],[1,"message-content"],[1,"message-header"],[1,"sender-name"],[1,"message-time"],["class","message-image",4,"ngIf"],["class","message-text",4,"ngIf"],[1,"message-image"],["alt","Soru resmi",1,"img-fluid","rounded","cursor-pointer",2,"max-width","300px","max-height","400px",3,"click","src"],[1,"message-text"],[1,"file-preview"],[1,"preview-image"],["alt","\xD6nizleme",1,"img-thumbnail",3,"src"],[1,"btn","btn-sm","btn-danger","preview-remove",3,"click"],[1,"bi","bi-x"],[1,"bi","bi-send"],[1,"spinner-border","spinner-border-sm","me-1"],[1,"image-modal-overlay",3,"click"],[1,"image-modal-content",3,"click"],[1,"image-modal-header"],[1,"modal-title"],[1,"bi","bi-image","me-2"],[1,"bi","bi-x-lg"],[1,"image-modal-body"],["alt","B\xFCy\xFCt\xFClm\xFC\u015F resim",1,"modal-image",3,"src"],[1,"image-modal-footer"],[1,"btn","btn-secondary",3,"click"],[1,"bi","bi-x-circle","me-1"],[1,"btn","btn-primary",3,"href","download"],[1,"bi","bi-download","me-1"],["role","alert",1,"toast","show",3,"ngClass"],[1,"toast-header"],[1,"bi","bi-bell-fill","me-2"],[1,"me-auto"],[1,"toast-body"]],template:function(t,n){t&1&&(u(0,"div",2)(1,"div",3),k(2,"div",4),u(3,"div",5)(4,"div",6)(5,"div",7)(6,"h4"),k(7,"i",8),m(8,"Soru \xC7\xFCz\xFCm\xFC"),f(),u(9,"div")(10,"button",9),U("click",function(){return n.yeniSoruBaslat()}),k(11,"i",10),f(),u(12,"button",9),U("click",function(){return n.temizleMesajlar()}),k(13,"i",11),f()()(),u(14,"div",12),ee(15,s1e,6,0,"div",13)(16,a1e,4,1,"div",14)(17,x1e,23,10,"div",15),f()()(),k(18,"div",4),f()(),ee(19,_1e,17,3,"div",16),u(20,"div",17),ee(21,v1e,8,2,"div",18),f()),t&2&&(x(15),S("ngIf",n.isLoading),x(),S("ngIf",n.error&&!n.isLoading),x(),S("ngIf",!n.isLoading&&!n.error),x(2),S("ngIf",n.showImageModal),x(2),S("ngIf",n.showToast))},dependencies:[ma,yt,lt,rn,fn,Un],styles:[".card-ana[_ngcontent-%COMP%]{border-radius:8px;box-shadow:0 2px 6px #00000014;overflow:hidden;background-color:#fff;width:100%;margin:0 auto 20px;font-family:sans-serif}.card-ana-header[_ngcontent-%COMP%]{color:#fff;padding:8px;display:flex;justify-content:space-between;align-items:center}.header-buttons[_ngcontent-%COMP%]{margin:5px}.card-ana-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:16px;font-family:Roboto,sans-serif;font-weight:400;margin:0;padding-left:10px}.card-ana-body[_ngcontent-%COMP%]{background-color:#fff;padding:10px;color:#333}.card-ana-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#ffffff50;border:none;color:#fff;padding:4px 8px;font-size:14px;font-weight:500;border-radius:4px;cursor:pointer;transition:background-color .2s ease}.card-ana-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#ffffffe1;color:#333}.bg-blue[_ngcontent-%COMP%]{background:linear-gradient(135deg,#244bfc,#637ffd);color:#fff}.bg-orange[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f60,#fc924b);color:#fff}.bg-green[_ngcontent-%COMP%]{background:linear-gradient(135deg,#36a00d,#88fd02);color:#fff}.bg-red[_ngcontent-%COMP%]{background:linear-gradient(135deg,red,#fc4b4b);color:#fff}.bg-purple[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f700ff,#ed4bfc);color:#fff}.bg-yellow[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f7fc01,#f0fc4b);color:#fff}.page-header[_ngcontent-%COMP%]{background:#fffffff2;border-radius:15px;padding:20px;box-shadow:0 8px 32px #0000001a;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]{font-size:2.5rem;color:#667eea}.page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#2d3748;font-weight:700}.page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#718096;font-size:.9rem}.page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;gap:10px}.loading-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:300px;background:#fffffff2;border-radius:15px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.chat-container[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:20px;min-height:0}.chat-container[_ngcontent-%COMP%]   .student-info-card[_ngcontent-%COMP%]{background:#fffffff2;border-radius:15px;padding:20px;display:flex;align-items:center;gap:15px;box-shadow:0 8px 32px #0000001a;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.chat-container[_ngcontent-%COMP%]   .student-info-card[_ngcontent-%COMP%]   .student-avatar[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;color:#667eea}.chat-container[_ngcontent-%COMP%]   .student-info-card[_ngcontent-%COMP%]   .student-details[_ngcontent-%COMP%]{flex:1}.chat-container[_ngcontent-%COMP%]   .student-info-card[_ngcontent-%COMP%]   .student-details[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 8px;color:#2d3748;font-weight:600}.chat-container[_ngcontent-%COMP%]   .student-info-card[_ngcontent-%COMP%]   .student-details[_ngcontent-%COMP%]   .student-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;flex-wrap:wrap}.chat-container[_ngcontent-%COMP%]   .student-info-card[_ngcontent-%COMP%]   .auto-refresh-toggle[_ngcontent-%COMP%]   .form-check-label[_ngcontent-%COMP%]{font-size:.9rem;color:#718096}.chat-container[_ngcontent-%COMP%]   .chat-messages-container[_ngcontent-%COMP%]{flex:1;background:#fffffff2;border-radius:8px;display:flex;flex-direction:column;min-height:0;box-shadow:0 8px 32px #0000001a;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.chat-container[_ngcontent-%COMP%]   .chat-messages-container[_ngcontent-%COMP%]   .messages-wrapper[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:20px;min-height:0}.chat-container[_ngcontent-%COMP%]   .chat-messages-container[_ngcontent-%COMP%]   .messages-wrapper[_ngcontent-%COMP%]   .empty-chat-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;text-align:center;color:#718096}.chat-container[_ngcontent-%COMP%]   .chat-messages-container[_ngcontent-%COMP%]   .messages-wrapper[_ngcontent-%COMP%]   .empty-chat-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:4rem;color:#cbd5e0;margin-bottom:20px}.chat-container[_ngcontent-%COMP%]   .chat-messages-container[_ngcontent-%COMP%]   .messages-wrapper[_ngcontent-%COMP%]   .empty-chat-state[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#4a5568;margin-bottom:10px}.chat-container[_ngcontent-%COMP%]   .chat-messages-container[_ngcontent-%COMP%]   .messages-wrapper[_ngcontent-%COMP%]   .empty-chat-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:30px}.chat-container[_ngcontent-%COMP%]   .chat-messages-container[_ngcontent-%COMP%]   .messages-wrapper[_ngcontent-%COMP%]   .empty-chat-state[_ngcontent-%COMP%]   .suggestion-buttons[_ngcontent-%COMP%]{display:flex;gap:10px;flex-wrap:wrap;justify-content:center}.chat-container[_ngcontent-%COMP%]   .chat-messages-container[_ngcontent-%COMP%]   .messages-wrapper[_ngcontent-%COMP%]   .messages-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.chat-container[_ngcontent-%COMP%]   .chat-messages-container[_ngcontent-%COMP%]   .messages-wrapper[_ngcontent-%COMP%]   .messages-list[_ngcontent-%COMP%]   .message-item[_ngcontent-%COMP%]{display:flex;gap:12px}.chat-container[_ngcontent-%COMP%]   .chat-messages-container[_ngcontent-%COMP%]   .messages-wrapper[_ngcontent-%COMP%]   .messages-list[_ngcontent-%COMP%]   .message-item.message-own[_ngcontent-%COMP%]{flex-direction:row-reverse}.chat-container[_ngcontent-%COMP%]   .chat-messages-container[_ngcontent-%COMP%]   .messages-wrapper[_ngcontent-%COMP%]   .messages-list[_ngcontent-%COMP%]   .message-item.message-own[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff,#f5f5f5);color:#525050;border-radius:8px 5px 5px 8px;min-width:320px}.chat-container[_ngcontent-%COMP%]   .chat-messages-container[_ngcontent-%COMP%]   .messages-wrapper[_ngcontent-%COMP%]   .messages-list[_ngcontent-%COMP%]   .message-item.message-own[_ngcontent-%COMP%]   .message-avatar[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#f60}.chat-container[_ngcontent-%COMP%]   .chat-messages-container[_ngcontent-%COMP%]   .messages-wrapper[_ngcontent-%COMP%]   .messages-list[_ngcontent-%COMP%]   .message-item.message-other[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{background:#f7fafc;color:#2d3748;border:1px solid #e2e8f0;border-radius:5px 8px 8px 5px;min-width:320px}.chat-container[_ngcontent-%COMP%]   .chat-messages-container[_ngcontent-%COMP%]   .messages-wrapper[_ngcontent-%COMP%]   .messages-list[_ngcontent-%COMP%]   .message-item.message-other[_ngcontent-%COMP%]   .message-avatar[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#48bb78}.chat-container[_ngcontent-%COMP%]   .chat-messages-container[_ngcontent-%COMP%]   .messages-wrapper[_ngcontent-%COMP%]   .messages-list[_ngcontent-%COMP%]   .message-item[_ngcontent-%COMP%]   .message-avatar[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem}.chat-container[_ngcontent-%COMP%]   .chat-messages-container[_ngcontent-%COMP%]   .messages-wrapper[_ngcontent-%COMP%]   .messages-list[_ngcontent-%COMP%]   .message-item[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{max-width:70%;padding:15px 20px;box-shadow:0 2px 8px #0000001a}.chat-container[_ngcontent-%COMP%]   .chat-messages-container[_ngcontent-%COMP%]   .messages-wrapper[_ngcontent-%COMP%]   .messages-list[_ngcontent-%COMP%]   .message-item[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]   .message-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;font-size:.8rem;opacity:.8}.chat-container[_ngcontent-%COMP%]   .chat-messages-container[_ngcontent-%COMP%]   .messages-wrapper[_ngcontent-%COMP%]   .messages-list[_ngcontent-%COMP%]   .message-item[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]   .message-header[_ngcontent-%COMP%]   .message-time[_ngcontent-%COMP%]{color:#a0aec0;font-style:italic;font-size:10px}.chat-container[_ngcontent-%COMP%]   .chat-messages-container[_ngcontent-%COMP%]   .messages-wrapper[_ngcontent-%COMP%]   .messages-list[_ngcontent-%COMP%]   .message-item[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]   .message-header[_ngcontent-%COMP%]   .sender-name[_ngcontent-%COMP%]{font-weight:600}.chat-container[_ngcontent-%COMP%]   .chat-messages-container[_ngcontent-%COMP%]   .messages-wrapper[_ngcontent-%COMP%]   .messages-list[_ngcontent-%COMP%]   .message-item[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]   .message-image[_ngcontent-%COMP%]{margin-bottom:10px}.chat-container[_ngcontent-%COMP%]   .chat-messages-container[_ngcontent-%COMP%]   .messages-wrapper[_ngcontent-%COMP%]   .messages-list[_ngcontent-%COMP%]   .message-item[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]   .message-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:10px;transition:transform .2s ease}.chat-container[_ngcontent-%COMP%]   .chat-messages-container[_ngcontent-%COMP%]   .messages-wrapper[_ngcontent-%COMP%]   .messages-list[_ngcontent-%COMP%]   .message-item[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]   .message-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.02)}.chat-container[_ngcontent-%COMP%]   .chat-messages-container[_ngcontent-%COMP%]   .messages-wrapper[_ngcontent-%COMP%]   .messages-list[_ngcontent-%COMP%]   .message-item[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]   .message-text[_ngcontent-%COMP%]{line-height:1.5;word-wrap:break-word;font-size:12px}.chat-container[_ngcontent-%COMP%]   .message-input-container[_ngcontent-%COMP%]{background:#f60;border-radius:8px;padding:20px;box-shadow:0 8px 32px #0000001a;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.chat-container[_ngcontent-%COMP%]   .message-input-container[_ngcontent-%COMP%]   .file-preview[_ngcontent-%COMP%]{margin-bottom:15px}.chat-container[_ngcontent-%COMP%]   .message-input-container[_ngcontent-%COMP%]   .file-preview[_ngcontent-%COMP%]   .preview-image[_ngcontent-%COMP%]{position:relative;display:inline-block}.chat-container[_ngcontent-%COMP%]   .message-input-container[_ngcontent-%COMP%]   .file-preview[_ngcontent-%COMP%]   .preview-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:200px;max-height:150px;border-radius:10px}.chat-container[_ngcontent-%COMP%]   .message-input-container[_ngcontent-%COMP%]   .file-preview[_ngcontent-%COMP%]   .preview-image[_ngcontent-%COMP%]   .preview-remove[_ngcontent-%COMP%]{position:absolute;top:-8px;right:-8px;border-radius:50%;width:30px;height:30px;display:flex;align-items:center;justify-content:center;padding:0}.chat-container[_ngcontent-%COMP%]   .message-input-container[_ngcontent-%COMP%]   .input-form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{border-radius:8px;overflow:hidden;box-shadow:0 2px 8px #0000001a}.chat-container[_ngcontent-%COMP%]   .message-input-container[_ngcontent-%COMP%]   .input-form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border:none;padding:15px 20px;font-size:1rem}.chat-container[_ngcontent-%COMP%]   .message-input-container[_ngcontent-%COMP%]   .input-form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{box-shadow:none;border-color:transparent}.chat-container[_ngcontent-%COMP%]   .message-input-container[_ngcontent-%COMP%]   .input-form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border:none;padding:15px 20px;cursor:pointer}.chat-container[_ngcontent-%COMP%]   .message-input-container[_ngcontent-%COMP%]   .input-form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .btn.btn-outline-secondary[_ngcontent-%COMP%]{background:#f7fafc;color:#718096}.chat-container[_ngcontent-%COMP%]   .message-input-container[_ngcontent-%COMP%]   .input-form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .btn.btn-outline-secondary[_ngcontent-%COMP%]:hover{background:#edf2f7;color:#4a5568}.chat-container[_ngcontent-%COMP%]   .message-input-container[_ngcontent-%COMP%]   .input-form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#29303c,#3e444e);border:none;cursor:pointer}.chat-container[_ngcontent-%COMP%]   .message-input-container[_ngcontent-%COMP%]   .input-form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#f89603,#f8b051)}.chat-container[_ngcontent-%COMP%]   .message-input-container[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]{margin-top:10px;text-align:center}@media (max-width: 768px){.page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{flex-direction:column;gap:15px;text-align:center}.page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{justify-content:center}.student-info-card[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:10px}.student-info-card[_ngcontent-%COMP%]   .student-details[_ngcontent-%COMP%]{text-align:center}.chat-messages-container[_ngcontent-%COMP%]   .messages-wrapper[_ngcontent-%COMP%]   .messages-list[_ngcontent-%COMP%]   .message-item[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{max-width:85%}.message-input-container[_ngcontent-%COMP%]   .file-preview[_ngcontent-%COMP%]   .preview-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:150px;max-height:100px}}@media (max-width: 480px){.page-header[_ngcontent-%COMP%], .student-info-card[_ngcontent-%COMP%], .chat-messages-container[_ngcontent-%COMP%], .message-input-container[_ngcontent-%COMP%]{border-radius:10px;padding:15px}.chat-messages-container[_ngcontent-%COMP%]   .messages-wrapper[_ngcontent-%COMP%]   .messages-list[_ngcontent-%COMP%]   .message-item[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{max-width:90%;padding:12px 15px}}.messages-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.messages-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:10px}.messages-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cbd5e0;border-radius:10px}.messages-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a0aec0}.loading-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#fffc;z-index:1000;display:flex;align-items:center;justify-content:center}.image-modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000c;z-index:2000;display:flex;align-items:center;justify-content:center;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}.image-modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 20px 60px #0000004d;max-width:90vw;max-height:90vh;display:flex;flex-direction:column;overflow:hidden}.image-modal-header[_ngcontent-%COMP%]{padding:1rem 1.5rem;border-bottom:1px solid #dee2e6;display:flex;justify-content:space-between;align-items:center;background-color:#f8f9fa}.image-modal-header[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:600;color:#495057}.image-modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{background:none;border:none;font-size:1.2rem;color:#6c757d;cursor:pointer;padding:.5rem;border-radius:4px;transition:all .2s ease}.image-modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{background-color:#e9ecef;color:#495057}.image-modal-body[_ngcontent-%COMP%]{padding:1rem;display:flex;justify-content:center;align-items:center;max-height:calc(90vh - 140px);overflow:auto}.image-modal-body[_ngcontent-%COMP%]   .modal-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:contain;border-radius:8px;box-shadow:0 4px 12px #0000001a}.image-modal-footer[_ngcontent-%COMP%]{padding:1rem 1.5rem;border-top:1px solid #dee2e6;display:flex;justify-content:space-between;background-color:#f8f9fa}.image-modal-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.5rem 1rem;border-radius:6px;font-weight:500;text-decoration:none;transition:all .2s ease}.image-modal-footer[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;border-color:#6c757d;color:#fff}.image-modal-footer[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#5a6268;border-color:#545b62}.image-modal-footer[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;border-color:#007bff;color:#fff}.image-modal-footer[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3;border-color:#004085}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer;transition:opacity .2s ease}.cursor-pointer[_ngcontent-%COMP%]:hover{opacity:.8}@media (max-width: 768px){.soru-cozumu-container[_ngcontent-%COMP%]{padding:10px;margin:5px}.page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{flex-direction:column;gap:15px}.page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{align-self:stretch}.page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;margin:0 5px}.student-info-card[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:10px}.student-info-card[_ngcontent-%COMP%]   .auto-refresh-toggle[_ngcontent-%COMP%]{margin-left:0}.chat-container[_ngcontent-%COMP%]{height:calc(100vh - 200px)}.image-modal-content[_ngcontent-%COMP%]{max-width:95%;max-height:95%;margin:10px}}.soru-cozumu-container[_ngcontent-%COMP%]{padding:20px;background:linear-gradient(135deg,#f8f9fa,#e9ecef);border-radius:15px;box-shadow:0 4px 20px #0000001a;min-height:calc(100vh - 40px)}.chat-messages-container[_ngcontent-%COMP%]{flex-grow:1;overflow-y:auto;padding:15px}.chat-messages-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.chat-messages-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:10px}.chat-messages-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:10px}.chat-messages-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a8a8a8}"]})};var b1e=["fileInput"],C1e=["messageContainer"],y1e=(i,e)=>({"d-none":i,"d-md-block":e}),w1e=i=>({active:i}),M1e=(i,e)=>({"message-own":i,"message-other":e}),E1e=(i,e,t,n)=>({"border-info":i,"border-success":e,"border-warning":t,"border-danger":n}),P1e=(i,e,t,n)=>({"bg-info":i,"bg-success":e,"bg-warning":t,"bg-danger":n}),O1e=(i,e,t,n)=>({"bi-info-circle":i,"bi-check-circle":e,"bi-exclamation-triangle":t,"bi-x-circle":n});function S1e(i,e){i&1&&(u(0,"div",18)(1,"div",19)(2,"span",20),m(3,"Y\xFCkleniyor..."),f()(),u(4,"p",21),m(5,"\xD6\u011Frenciler y\xFCkleniyor..."),f()())}function k1e(i,e){if(i&1&&(u(0,"small",33),m(1),f()),i&2){let t=F().$implicit;x(),W(t.grubu)}}function A1e(i,e){if(i&1&&(u(0,"span",34),m(1),f()),i&2){let t=F().$implicit,n=F(2);x(),he(" ",n.getUnreadMessageCount(t.id)," okunmam\u0131\u015F ")}}function D1e(i,e){if(i&1){let t=Ae();u(0,"div",24),U("click",function(){let r=K(t).$implicit,o=F(2);return Y(o.selectStudent(r))}),u(1,"div",25),k(2,"i",26),f(),u(3,"div",27)(4,"h6",28),m(5),f(),ee(6,k1e,2,1,"small",29),u(7,"div",30)(8,"span",31),m(9),f(),ee(10,A1e,2,1,"span",32),f()()()}if(i&2){let t=e.$implicit,n=F(2);S("ngClass",Do(5,w1e,(n.selectedStudent==null?null:n.selectedStudent.id)===t.id)),x(5),W(t.adi_soyadi),x(),S("ngIf",t.grubu),x(3),he("",n.getStudentMessageCount(t.id)," mesaj"),x(),S("ngIf",n.getUnreadMessageCount(t.id)>0)}}function F1e(i,e){i&1&&(u(0,"div",18),k(1,"i",35),u(2,"p",36),m(3,"Hen\xFCz \xF6\u011Frenciniz yok"),f()())}function I1e(i,e){if(i&1&&(u(0,"div",22),ee(1,D1e,11,7,"div",23)(2,F1e,4,0,"div",10),f()),i&2){let t=F();x(),S("ngForOf",t.students)("ngForTrackBy",t.trackByStudentId),x(),S("ngIf",t.students.length===0)}}function T1e(i,e){if(i&1&&(u(0,"p",52)(1,"strong"),m(2,"Son mesaj:"),f(),m(3),f()),i&2){let t,n=F().$implicit,r=F(2);x(3),he(" ",(t=r.getLatestMessageForStudent(n))==null?null:t.mesaj_metni," ")}}function B1e(i,e){i&1&&(u(0,"p",60),k(1,"i",61),u(2,"strong"),m(3,"Son mesaj:"),f(),m(4," Resim g\xF6nderdi "),f())}function N1e(i,e){if(i&1&&(u(0,"span",34),m(1),f()),i&2){let t=F().$implicit,n=F(2);x(),he(" ",n.getUnreadMessageCount(t)," okunmam\u0131\u015F ")}}function L1e(i,e){if(i&1){let t=Ae();u(0,"div",49),U("click",function(){let r=K(t).$implicit,o=F(2);return Y(o.selectStudentFromGroupedMessage(r))}),u(1,"div",50)(2,"div",51)(3,"h6",52),k(4,"i",53),m(5),f(),u(6,"div",39)(7,"span",54),m(8),f(),u(9,"small",33),m(10),f()()()(),u(11,"div",55),ee(12,T1e,4,1,"p",56)(13,B1e,5,0,"p",57),u(14,"div",58)(15,"span",59),m(16),f(),ee(17,N1e,2,1,"span",32),f()()()}if(i&2){let t,n,r,o,s,a=e.$implicit,l=F(2);x(5),he(" ",l.getStudentName(a)," "),x(3),he("",l.getMessageCountForStudent(a)," mesaj"),x(2),W(l.formatDate(((t=l.getLatestMessageForStudent(a))==null?null:t.gonderim_tarihi)||"")),x(2),S("ngIf",(n=l.getLatestMessageForStudent(a))==null?null:n.mesaj_metni),x(),S("ngIf",!((r=l.getLatestMessageForStudent(a))!=null&&r.mesaj_metni)&&((r=l.getLatestMessageForStudent(a))==null?null:r.resim_url)),x(2),S("ngClass",((o=l.getLatestMessageForStudent(a))==null?null:o.gonderen_tip)==="ogrenci"?"bg-primary":"bg-success"),x(),he(" Son: ",((s=l.getLatestMessageForStudent(a))==null?null:s.gonderen_tip)==="ogrenci"?"\xD6\u011Frenci":"\xD6\u011Fretmen"," "),x(),S("ngIf",l.getUnreadMessageCount(a)>0)}}function R1e(i,e){i&1&&(u(0,"div",62),k(1,"i",63),u(2,"h5",64),m(3,"Hen\xFCz Mesaj Yok"),f(),u(4,"p",33),m(5,"\xD6\u011Frencilerinizden hen\xFCz soru \xE7\xF6z\xFCm\xFC talebi gelmedi"),f()())}function z1e(i,e){if(i&1){let t=Ae();u(0,"div",5)(1,"div",6)(2,"div",37)(3,"h5",7),k(4,"i",38),m(5," \xD6\u011Frenci Mesajlar\u0131 "),f(),u(6,"div",39)(7,"small",40),m(8,"Bildirimler:"),f(),u(9,"div",41)(10,"input",42),U("change",function(r){K(t);let o=F();return Y(o.toggleNotifications(r))}),f(),u(11,"label",43),k(12,"i",44),f()()()()(),u(13,"div",45)(14,"div",46),ee(15,L1e,18,8,"div",47)(16,R1e,6,0,"div",48),f()()()}if(i&2){let t=F();x(10),S("checked",t.notificationsEnabled),x(2),S("ngClass",t.notificationsEnabled?"bi-bell-fill":"bi-bell-slash-fill"),x(3),S("ngForOf",t.getGroupedStudentIds())("ngForTrackBy",t.trackByStudentIdNumber),x(),S("ngIf",t.getGroupedStudentIds().length===0)}}function j1e(i,e){i&1&&(u(0,"div",85)(1,"div",19)(2,"span",20),m(3,"Y\xFCkleniyor..."),f()(),u(4,"p",86),m(5,"Mesajlar y\xFCkleniyor..."),f()())}function V1e(i,e){if(i&1&&(u(0,"p",98),m(1),f()),i&2){let t=F().$implicit;x(),W(t.mesaj_metni)}}function U1e(i,e){if(i&1){let t=Ae();u(0,"div",99)(1,"img",100),U("click",function(){K(t);let r=F().$implicit,o=F(3);return Y(o.openImageModal(r.resim_url))}),f()()}if(i&2){let t=F().$implicit;x(),S("src",t.resim_url,vt)}}function H1e(i,e){if(i&1&&(u(0,"div",89)(1,"div",90),k(2,"i",44),f(),u(3,"div",91)(4,"div",92)(5,"span",93),m(6),f(),u(7,"span",94),m(8),f()(),u(9,"div",95),ee(10,V1e,2,1,"p",96)(11,U1e,2,1,"div",97),f()()()),i&2){let t=e.$implicit,n=F(3);S("ngClass",Up(6,M1e,t.gonderen_tip==="ogretmen",t.gonderen_tip==="ogrenci")),x(2),S("ngClass",t.gonderen_tip==="ogrenci"?"bi-person-circle":"bi-person-check-fill"),x(4),W(t.gonderen_adi),x(2),W(n.formatDate(t.gonderim_tarihi)),x(2),S("ngIf",t.mesaj_metni),x(),S("ngIf",t.resim_url)}}function G1e(i,e){i&1&&(u(0,"div",101),k(1,"i",102),u(2,"p",36),m(3,"Hen\xFCz mesaj yok. \xD6\u011Frencinizle sohbete ba\u015Flay\u0131n!"),f()())}function $1e(i,e){if(i&1&&(u(0,"div"),ee(1,H1e,12,9,"div",87)(2,G1e,4,0,"div",88),f()),i&2){let t=F(2);x(),S("ngForOf",t.studentMessages)("ngForTrackBy",t.trackByMessageId),x(),S("ngIf",t.studentMessages.length===0)}}function W1e(i,e){if(i&1){let t=Ae();u(0,"div",103),m(1),u(2,"button",104),U("click",function(){K(t);let r=F(2);return Y(r.error=null)}),f()()}if(i&2){let t=F(2);x(),he(" ",t.error," ")}}function q1e(i,e){if(i&1){let t=Ae();u(0,"div",105)(1,"div",106),k(2,"img",107),u(3,"button",108),U("click",function(){K(t);let r=F(2);return Y(r.removeFile())}),k(4,"i",109),f()()()}if(i&2){let t=F(2);x(2),S("src",t.previewUrl,vt)}}function K1e(i,e){i&1&&k(0,"span",110)}function Y1e(i,e){if(i&1){let t=Ae();u(0,"div",5)(1,"div",6)(2,"div",37)(3,"h5",7)(4,"button",65),U("click",function(){K(t);let r=F();return Y(r.backToAllMessages())}),k(5,"i",66),f(),k(6,"i",53),m(7),f(),u(8,"button",67),U("click",function(){K(t);let r=F();return Y(r.backToAllMessages())}),k(9,"i",68),m(10," Geri "),f()()(),u(11,"div",69)(12,"div",70,0),ee(14,j1e,6,0,"div",71)(15,$1e,3,3,"div",72),f()(),u(16,"div",73),ee(17,W1e,3,1,"div",74)(18,q1e,5,1,"div",75),u(19,"div",76)(20,"div",77)(21,"input",78,1),U("change",function(r){K(t);let o=F();return Y(o.onFileSelected(r))}),f(),u(23,"button",79),U("click",function(){K(t);let r=ua(22);return Y(r.click())}),k(24,"i",80),f(),u(25,"input",81),at("ngModelChange",function(r){K(t);let o=F();return dt(o.yeniMesaj,r)||(o.yeniMesaj=r),Y(r)}),U("keyup.enter",function(){K(t);let r=F();return Y(r.sendMessage())}),f(),u(26,"button",82),U("click",function(){K(t);let r=F();return Y(r.sendMessage())}),ee(27,K1e,1,0,"span",83),k(28,"i",84),f()()()()()}if(i&2){let t=F();x(7),he(" ",t.selectedStudent.adi_soyadi," "),x(7),S("ngIf",t.isLoadingMessages),x(),S("ngIf",!t.isLoadingMessages),x(2),S("ngIf",t.error),x(),S("ngIf",t.previewUrl),x(5),S("disabled",t.isSending),x(2),st("ngModel",t.yeniMesaj),S("disabled",t.isSending),x(),S("disabled",t.isSending||!t.yeniMesaj.trim()&&!t.selectedFile),x(),S("ngIf",t.isSending)}}function X1e(i,e){if(i&1){let t=Ae();u(0,"div",111)(1,"div",112),k(2,"i",113),u(3,"strong",114),m(4),f(),u(5,"button",115),U("click",function(){K(t);let r=F();return Y(r.hideToast())}),f()(),u(6,"div",116),m(7),f()()}if(i&2){let t=F();S("ngClass",Gv(5,E1e,t.toastType==="info",t.toastType==="success",t.toastType==="warning",t.toastType==="error")),x(),S("ngClass",Gv(10,P1e,t.toastType==="info",t.toastType==="success",t.toastType==="warning",t.toastType==="error")),x(),S("ngClass",Gv(15,O1e,t.toastType==="info",t.toastType==="success",t.toastType==="warning",t.toastType==="error")),x(2),he(" ",t.toastType==="info"?"Bilgi":t.toastType==="success"?"Ba\u015Far\u0131l\u0131":t.toastType==="warning"?"Uyar\u0131":"Hata"," "),x(3),he(" ",t.toastMessage," ")}}function Q1e(i,e){if(i&1){let t=Ae();u(0,"div",117),U("click",function(){K(t);let r=F();return Y(r.closeImageModal())}),u(1,"div",118),U("click",function(r){return K(t),Y(r.stopPropagation())}),u(2,"div",119)(3,"h5",120),k(4,"i",121),m(5," Resim G\xF6r\xFCnt\xFCleme "),f(),u(6,"button",104),U("click",function(){K(t);let r=F();return Y(r.closeImageModal())}),k(7,"i",122),f()(),u(8,"div",123),k(9,"img",124),f(),u(10,"div",125)(11,"button",126),U("click",function(){K(t);let r=F();return Y(r.closeImageModal())}),k(12,"i",127),m(13," Kapat "),f(),u(14,"a",128),k(15,"i",129),m(16," \u0130ndir "),f()()()()}if(i&2){let t=F();x(9),S("src",t.selectedImageUrl,vt),x(5),S("href",t.selectedImageUrl,vt)("download",t.getImageFileName(t.selectedImageUrl))}}function J1e(i,e){i&1&&(u(0,"div",130)(1,"div",131)(2,"div",19)(3,"span",20),m(4,"Y\xFCkleniyor..."),f()(),u(5,"p",86),m(6,"Y\xFCkleniyor..."),f()()())}var $5=class i{constructor(e){this.http=e;this.requestNotificationPermission()}fileInput;messageContainer;students=[];selectedStudent=null;allMessages=[];studentMessages=[];groupedMessages={};yeniMesaj="";selectedFile=null;previewUrl=null;isLoading=!1;isLoadingMessages=!1;isLoadingStudents=!1;isSending=!1;error=null;viewMode="all";notificationsEnabled=!1;lastMessageCount=0;showToast=!1;toastMessage="";toastType="info";showImageModal=!1;selectedImageUrl="";apiBaseUrl="./server/api";getTokenFromStorage(){let e=localStorage.getItem("token");if(!e){let t=localStorage.getItem("user")||sessionStorage.getItem("user");if(t)try{e=JSON.parse(t).token}catch(n){console.error("Error parsing user data:",n)}}return e||""}ngOnInit(){this.loadStudents(),this.loadAllMessages(),this.startMessageCheckInterval()}ngOnDestroy(){this.messageCheckInterval&&clearInterval(this.messageCheckInterval)}messageCheckInterval;getHeaders(){let e=localStorage.getItem("token");if(!e){let t=localStorage.getItem("user")||sessionStorage.getItem("user");if(t)try{let r=JSON.parse(t).token;if(r)return new xt({Authorization:`Bearer ${r}`})}catch(n){console.error("Error parsing user data:",n)}}return new xt({Authorization:`Bearer ${e||""}`})}loadStudents(){this.isLoadingStudents=!0,this.error=null;let e=new xt({Authorization:`Bearer ${this.getTokenFromStorage()}`,"Content-Type":"application/json"});this.http.get(`${this.apiBaseUrl}/ogretmen_ogrencileri.php`,{headers:e}).subscribe({next:t=>{t.success?this.students=t.data:this.error=t.message||"\xD6\u011Frenciler y\xFCklenemedi",this.isLoadingStudents=!1},error:t=>{console.error("Students loading error:",t),this.error="\xD6\u011Frenciler y\xFCklenirken hata olu\u015Ftu",this.isLoadingStudents=!1}})}loadAllMessages(){this.isLoadingMessages=!0,this.error=null;let e=new xt({Authorization:`Bearer ${this.getTokenFromStorage()}`,"Content-Type":"application/json"});console.log("Loading all messages with token:",this.getTokenFromStorage().substring(0,20)+"..."),this.http.get(`${this.apiBaseUrl}/soru_mesajlari.php`,{headers:e}).subscribe({next:t=>{console.log("All messages response:",t),t.success?(this.allMessages=t.data||[],console.log("Loaded messages count:",this.allMessages.length),this.allMessages.forEach(n=>{n.resim_url&&!n.resim_url.startsWith("http")&&(n.resim_url.startsWith("./")||(n.resim_url="./"+n.resim_url))}),this.groupMessagesByStudent()):(this.error=t.message||t.error||"Mesajlar y\xFCklenemedi",console.error("API Error:",t)),this.isLoadingMessages=!1},error:t=>{console.error("Messages loading error:",t),console.error("Error details:",t.error),this.error="Mesajlar y\xFCklenirken hata olu\u015Ftu: "+(t.error?.error||t.message),this.isLoadingMessages=!1}})}selectStudent(e){this.selectedStudent=e,this.viewMode="student",this.loadStudentMessages(e.id),setTimeout(()=>{this.markStudentMessagesAsRead(e.id)},1e3)}loadStudentMessages(e){this.isLoadingMessages=!0,this.error=null;let t=new xt({Authorization:`Bearer ${this.getTokenFromStorage()}`,"Content-Type":"application/json"});console.log("Loading messages for student ID:",e),this.http.get(`${this.apiBaseUrl}/soru_mesajlari.php?ogrenci_id=${e}`,{headers:t}).subscribe({next:n=>{console.log("Student messages response:",n),n.success?(this.studentMessages=n.data||[],this.studentMessages.forEach(r=>{r.resim_url&&!r.resim_url.startsWith("http")&&(r.resim_url.startsWith("./")||(r.resim_url="./"+r.resim_url))}),setTimeout(()=>this.scrollToBottom(),100)):(this.error=n.message||n.error||"Mesajlar y\xFCklenemedi",console.error("API Error:",n)),this.isLoadingMessages=!1},error:n=>{console.error("Student messages loading error:",n),console.error("Error details:",n.error),this.error="Mesajlar y\xFCklenirken hata olu\u015Ftu: "+(n.error?.error||n.message),this.isLoadingMessages=!1}})}sendMessage(){if(!this.selectedStudent||!this.yeniMesaj.trim()&&!this.selectedFile)return;this.isSending=!0;let e=new FormData;e.append("ogrenci_id",this.selectedStudent.id.toString()),e.append("mesaj_metni",this.yeniMesaj),e.append("gonderen_tip","ogretmen"),this.selectedFile&&e.append("resim",this.selectedFile);let n=localStorage.getItem("token");if(!n){let o=localStorage.getItem("user")||sessionStorage.getItem("user");if(o)try{n=JSON.parse(o).token}catch(s){console.error("Error parsing user data:",s)}}let r=new xt({Authorization:`Bearer ${n||""}`});this.http.post(`${this.apiBaseUrl}/soru_mesajlari.php`,e,{headers:r}).subscribe({next:o=>{o.success?(this.yeniMesaj="",this.selectedFile=null,this.previewUrl=null,this.loadStudentMessages(this.selectedStudent.id),this.loadAllMessages()):this.error=o.message||"Mesaj g\xF6nderilemedi",this.isSending=!1},error:o=>{console.error("Message sending error:",o),this.error="Mesaj g\xF6nderilirken hata olu\u015Ftu",this.isSending=!1}})}onFileSelected(e){let t=e.target.files[0];if(t){if(t.size>5*1024*1024){this.error="Dosya boyutu 5MB'dan b\xFCy\xFCk olamaz";return}this.selectedFile=t;let n=new FileReader;n.onload=r=>{this.previewUrl=r.target?.result},n.readAsDataURL(t)}}removeFile(){this.selectedFile=null,this.previewUrl=null,this.fileInput&&(this.fileInput.nativeElement.value="")}backToAllMessages(){this.viewMode="all",this.selectedStudent=null,this.studentMessages=[],this.yeniMesaj="",this.selectedFile=null,this.previewUrl=null}formatDate(e){let t=new Date(e),r=new Date().getTime()-t.getTime(),o=Math.floor(r/(1e3*60*60*24));return o===0?"Bug\xFCn "+t.toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"}):o===1?"D\xFCn "+t.toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"}):t.toLocaleDateString("tr-TR")+" "+t.toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"})}scrollToBottom(){this.messageContainer&&setTimeout(()=>{this.messageContainer.nativeElement.scrollTop=this.messageContainer.nativeElement.scrollHeight},100)}trackByMessageId(e,t){return t.id||e}trackByStudentId(e,t){return t.id||e}trackByStudentIdNumber(e,t){return t}selectStudentFromMessage(e){let t=this.students.find(n=>n.id===e.ogrenci_id);t&&this.selectStudent(t)}getStudentMessageCount(e){return this.allMessages.filter(t=>t.ogrenci_id===e).length}getUnreadMessageCount(e){return this.allMessages.filter(t=>t.ogrenci_id===e&&!t.okundu&&t.gonderen_tip==="ogrenci").length}requestNotificationPermission(){"Notification"in window&&(Notification.permission==="default"?Notification.requestPermission().then(e=>{this.notificationsEnabled=e==="granted"}):Notification.permission==="granted"&&(this.notificationsEnabled=!0))}showNotification(e,t,n){if(this.notificationsEnabled&&"Notification"in window&&Notification.permission==="granted"){let r=new Notification(e,{body:t,icon:"./assets/siyah-turuncu.png",badge:"./assets/siyah-turuncu.png",tag:"new-message",requireInteraction:!0});r.onclick=()=>{if(window.focus(),r.close(),n){let o=this.students.find(s=>s.adi_soyadi===n);o&&this.selectStudent(o)}},setTimeout(()=>{r.close()},5e3)}}startMessageCheckInterval(){this.messageCheckInterval=setInterval(()=>{this.checkForNewMessages()},1e4)}groupMessagesByStudent(){this.groupedMessages={},this.allMessages.forEach(e=>{this.groupedMessages[e.ogrenci_id]||(this.groupedMessages[e.ogrenci_id]=[]),this.groupedMessages[e.ogrenci_id].push(e)}),Object.keys(this.groupedMessages).forEach(e=>{this.groupedMessages[+e].sort((t,n)=>new Date(n.gonderim_tarihi).getTime()-new Date(t.gonderim_tarihi).getTime())})}getGroupedStudentIds(){return Object.keys(this.groupedMessages).map(e=>+e)}getLatestMessageForStudent(e){let t=this.groupedMessages[e];return t&&t.length>0?t[0]:null}getMessageCountForStudent(e){let t=this.groupedMessages[e];return t?t.length:0}getStudentName(e){let t=this.students.find(r=>r.id===e);if(t)return t.adi_soyadi;let n=this.groupedMessages[e];return n&&n.length>0&&n[0].ogrenci_adi||"Bilinmeyen \xD6\u011Frenci"}selectStudentFromGroupedMessage(e){let t=this.students.find(n=>n.id===e);if(!t){let n=this.getStudentName(e);t={id:e,adi_soyadi:n,email:"",grubu:""}}this.selectStudent(t)}showToastNotification(e,t="info"){this.toastMessage=e,this.toastType=t,this.showToast=!0,setTimeout(()=>{this.showToast=!1},5e3)}hideToast(){this.showToast=!1}checkForNewMessages(){let e=new xt({Authorization:`Bearer ${this.getTokenFromStorage()}`,"Content-Type":"application/json"});this.http.get(`${this.apiBaseUrl}/soru_mesajlari.php`,{headers:e}).subscribe({next:t=>{if(t.success){let n=t.data||[];if(this.lastMessageCount>0&&n.length>this.lastMessageCount){let o=n[0].ogrenci_adi||"Bir \xF6\u011Frenci";this.showToastNotification(`${o} size yeni bir mesaj g\xF6nderdi!`,"info"),this.showNotification("Yeni Mesaj!",`${o} size yeni bir mesaj g\xF6nderdi.`,o)}this.lastMessageCount=n.length,n.length!==this.allMessages.length&&(this.allMessages=n,this.allMessages.forEach(r=>{r.resim_url&&!r.resim_url.startsWith("http")&&(r.resim_url.startsWith("./")||(r.resim_url="./"+r.resim_url))}),this.groupMessagesByStudent())}},error:t=>{console.error("Background message check error:",t)}})}toggleNotifications(e){let t=e.target.checked;t&&"Notification"in window?Notification.permission==="default"?Notification.requestPermission().then(n=>{this.notificationsEnabled=n==="granted",this.notificationsEnabled||(e.target.checked=!1)}):Notification.permission==="granted"?this.notificationsEnabled=!0:(this.notificationsEnabled=!1,e.target.checked=!1,alert("Taray\u0131c\u0131 ayarlar\u0131ndan bildirim izni vermelisiniz.")):this.notificationsEnabled=t}openImageModal(e){this.selectedImageUrl=e,this.showImageModal=!0,document.body.style.overflow="hidden"}closeImageModal(){this.showImageModal=!1,this.selectedImageUrl="",document.body.style.overflow="auto"}getImageFileName(e){if(!e)return"resim.jpg";let t=e.split("/");return t[t.length-1]||"resim.jpg"}markMessageAsRead(e){let t=new xt({Authorization:`Bearer ${this.getTokenFromStorage()}`,"Content-Type":"application/json"}),n={mesaj_id:e,okundu:!0};this.http.post(`${this.apiBaseUrl}/mesaj_okundu_isaretle.php`,n,{headers:t}).subscribe({next:r=>{if(r.success){let o=this.studentMessages.find(a=>a.id===e);o&&(o.okundu=!0);let s=this.allMessages.find(a=>a.id===e);s&&(s.okundu=!0)}},error:r=>{console.error("Mesaj okundu i\u015Faretlenirken hata:",r)}})}markStudentMessagesAsRead(e){this.studentMessages.filter(n=>n.ogrenci_id===e&&n.gonderen_tip==="ogrenci"&&!n.okundu).forEach(n=>{this.markMessageAsRead(n.id)})}static \u0275fac=function(t){return new(t||i)(ke(gt))};static \u0275cmp=Ke({type:i,selectors:[["app-ogretmen-soru-cozumu-sayfasi"]],viewQuery:function(t,n){if(t&1&&(Gi(b1e,5),Gi(C1e,5)),t&2){let r;Di(r=Fi())&&(n.fileInput=r.first),Di(r=Fi())&&(n.messageContainer=r.first)}},standalone:!1,decls:18,vars:11,consts:[["messageContainer",""],["fileInput",""],[1,"container-fluid"],[1,"row"],[1,"col-md-4","col-lg-3",3,"ngClass"],[1,"card","h-100"],[1,"card-header","bg-primary","text-white"],[1,"mb-0"],[1,"bi","bi-people-fill","me-2"],[1,"card-body","p-0"],["class","text-center p-3",4,"ngIf"],["class","student-list",4,"ngIf"],[1,"col-md-8","col-lg-9"],["class","card h-100",4,"ngIf"],[1,"toast-container","position-fixed","top-0","end-0","p-3",2,"z-index","11000"],["class","toast show","role","alert",3,"ngClass",4,"ngIf"],["class","image-modal-overlay",3,"click",4,"ngIf"],["class","loading-overlay",4,"ngIf"],[1,"text-center","p-3"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-2","mb-0"],[1,"student-list"],["class","student-item",3,"ngClass","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"student-item",3,"click","ngClass"],[1,"student-avatar"],[1,"bi","bi-person-circle"],[1,"student-info"],[1,"student-name"],["class","text-muted",4,"ngIf"],[1,"message-stats"],[1,"badge","bg-info","me-1"],["class","badge bg-warning",4,"ngIf"],[1,"text-muted"],[1,"badge","bg-warning"],[1,"bi","bi-person-x","text-muted",2,"font-size","2rem"],[1,"text-muted","mt-2"],[1,"d-flex","justify-content-between","align-items-center"],[1,"bi","bi-chat-dots","me-2"],[1,"d-flex","align-items-center"],[1,"me-2"],[1,"form-check","form-switch"],["type","checkbox","id","notificationSwitch",1,"form-check-input",2,"cursor","pointer",3,"change","checked"],["for","notificationSwitch",1,"form-check-label","text-white",2,"cursor","pointer"],[1,"bi",3,"ngClass"],[1,"card-body","overflow-auto",2,"max-height","500px"],[1,"message-summary-list"],["class","message-summary-item p-3 border-bottom cursor-pointer",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],["class","text-center py-5",4,"ngIf"],[1,"message-summary-item","p-3","border-bottom","cursor-pointer",3,"click"],[1,"d-flex","justify-content-between","align-items-start","mb-2"],[1,"d-flex","justify-content-between","align-items-center","w-100"],[1,"mb-1"],[1,"bi","bi-person-circle","me-2"],[1,"badge","bg-info","me-2"],[1,"message-summary-content"],["class","mb-1",4,"ngIf"],["class","mb-1 text-muted",4,"ngIf"],[1,"d-flex","justify-content-between","align-items-center","mt-2"],[1,"badge",3,"ngClass"],[1,"mb-1","text-muted"],[1,"bi","bi-image"],[1,"text-center","py-5"],[1,"bi","bi-chat-x","text-muted",2,"font-size","3rem"],[1,"text-muted","mt-3"],[1,"btn","btn-light","btn-sm","me-2","d-md-none",3,"click"],[1,"bi","bi-arrow-left"],[1,"btn","btn-light","btn-sm","d-none","d-md-inline-block",3,"click"],[1,"bi","bi-arrow-left","me-1"],[1,"card-body","p-0","position-relative",2,"height","400px"],[1,"messages-container","h-100","overflow-auto","p-3"],["class","text-center py-3",4,"ngIf"],[4,"ngIf"],[1,"card-footer"],["class","alert alert-danger alert-dismissible fade show","role","alert",4,"ngIf"],["class","file-preview mb-3",4,"ngIf"],[1,"message-form"],[1,"input-group"],["type","file","accept","image/*",2,"display","none",3,"change"],["type","button",1,"btn","btn-outline-secondary",3,"click","disabled"],[1,"bi","bi-paperclip"],["type","text","placeholder","\xD6\u011Frencinize mesaj yaz\u0131n...",1,"form-control",3,"ngModelChange","keyup.enter","ngModel","disabled"],["type","button",1,"btn","btn-primary",3,"click","disabled"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],[1,"bi","bi-send"],[1,"text-center","py-3"],[1,"mt-2"],["class","message-item",3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],["class","text-center py-4",4,"ngIf"],[1,"message-item",3,"ngClass"],[1,"message-avatar"],[1,"message-content"],[1,"message-header"],[1,"sender-name"],[1,"message-time"],[1,"message-body"],["class","message-text",4,"ngIf"],["class","message-image",4,"ngIf"],[1,"message-text"],[1,"message-image"],["alt","Soru resmi",1,"img-fluid","rounded","cursor-pointer",3,"click","src"],[1,"text-center","py-4"],[1,"bi","bi-chat","text-muted",2,"font-size","2rem"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],["type","button",1,"btn-close",3,"click"],[1,"file-preview","mb-3"],[1,"position-relative","d-inline-block"],["alt","\xD6nizleme",1,"preview-image",3,"src"],["type","button",1,"btn","btn-sm","btn-danger","preview-close",3,"click"],[1,"bi","bi-x"],[1,"spinner-border","spinner-border-sm","me-1"],["role","alert",1,"toast","show",3,"ngClass"],[1,"toast-header",3,"ngClass"],[1,"bi","me-2",3,"ngClass"],[1,"me-auto","text-white"],["type","button",1,"btn-close","btn-close-white",3,"click"],[1,"toast-body"],[1,"image-modal-overlay",3,"click"],[1,"image-modal-content",3,"click"],[1,"image-modal-header"],[1,"modal-title"],[1,"bi","bi-image","me-2"],[1,"bi","bi-x-lg"],[1,"image-modal-body"],["alt","B\xFCy\xFCt\xFClm\xFC\u015F resim",1,"modal-image",3,"src"],[1,"image-modal-footer"],[1,"btn","btn-secondary",3,"click"],[1,"bi","bi-x-circle","me-1"],[1,"btn","btn-primary",3,"href","download"],[1,"bi","bi-download","me-1"],[1,"loading-overlay"],[1,"text-center"]],template:function(t,n){t&1&&(u(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"h5",7),k(6,"i",8),m(7," \xD6\u011Frencilerim "),f()(),u(8,"div",9),ee(9,S1e,6,0,"div",10)(10,I1e,3,3,"div",11),f()()(),u(11,"div",12),ee(12,z1e,17,5,"div",13)(13,Y1e,29,10,"div",13),f()()(),u(14,"div",14),ee(15,X1e,8,20,"div",15),f(),ee(16,Q1e,17,3,"div",16)(17,J1e,7,0,"div",17)),t&2&&(x(2),S("ngClass",Up(8,y1e,n.viewMode==="student",n.viewMode==="student")),x(7),S("ngIf",n.isLoadingStudents),x(),S("ngIf",!n.isLoadingStudents),x(2),S("ngIf",n.viewMode==="all"),x(),S("ngIf",n.viewMode==="student"&&n.selectedStudent),x(2),S("ngIf",n.showToast),x(),S("ngIf",n.showImageModal),x(),S("ngIf",n.isLoading))},dependencies:[ma,yt,lt,rn,fn,Un],styles:[".student-list[_ngcontent-%COMP%]{max-height:600px;overflow-y:auto}.student-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:12px 16px;border-bottom:1px solid #eee;cursor:pointer;transition:background-color .2s}.student-item[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.student-item.active[_ngcontent-%COMP%]{background-color:#e3f2fd;border-left:4px solid #2196f3}.student-item[_ngcontent-%COMP%]   .student-avatar[_ngcontent-%COMP%]{margin-right:12px}.student-item[_ngcontent-%COMP%]   .student-avatar[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem;color:#6c757d}.student-item[_ngcontent-%COMP%]   .student-info[_ngcontent-%COMP%]{flex:1}.student-item[_ngcontent-%COMP%]   .student-info[_ngcontent-%COMP%]   .student-name[_ngcontent-%COMP%]{margin:0;font-size:.95rem;font-weight:600}.student-item[_ngcontent-%COMP%]   .student-info[_ngcontent-%COMP%]   .message-stats[_ngcontent-%COMP%]{margin-top:4px}.all-messages-container[_ngcontent-%COMP%]{max-height:600px;overflow-y:auto}.message-summary[_ngcontent-%COMP%]{border:1px solid #dee2e6;border-radius:8px;padding:16px;margin-bottom:12px;transition:all .2s}.message-summary[_ngcontent-%COMP%]:hover{box-shadow:0 2px 8px #0000001a;transform:translateY(-1px)}.message-summary[_ngcontent-%COMP%]   .message-summary-header[_ngcontent-%COMP%]{margin-bottom:8px}.message-summary[_ngcontent-%COMP%]   .message-summary-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6c757d;font-size:.9rem;line-height:1.4;max-height:3rem;overflow:hidden;text-overflow:ellipsis}.messages-container[_ngcontent-%COMP%]{padding:16px;background-color:#f8f9fa}.message-item[_ngcontent-%COMP%]{display:flex;margin-bottom:16px}.message-item.message-own[_ngcontent-%COMP%]{flex-direction:row-reverse}.message-item.message-own[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;margin-right:8px;margin-left:40px}.message-item.message-own[_ngcontent-%COMP%]   .message-avatar[_ngcontent-%COMP%]{margin-left:8px;margin-right:0}.message-item.message-other[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{background-color:#fff;color:#333;margin-left:8px;margin-right:40px}.message-item.message-other[_ngcontent-%COMP%]   .message-avatar[_ngcontent-%COMP%]{margin-right:8px;margin-left:0}.message-avatar[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.8rem;color:#6c757d}.message-content[_ngcontent-%COMP%]{max-width:70%;padding:12px 16px;border-radius:18px;box-shadow:0 1px 3px #0000001a}.message-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:4px;font-size:.8rem;opacity:.8}.sender-name[_ngcontent-%COMP%]{font-weight:600}.message-time[_ngcontent-%COMP%]{font-size:.75rem}.message-body[_ngcontent-%COMP%]   .message-text[_ngcontent-%COMP%]{margin:0;line-height:1.4;word-wrap:break-word}.message-body[_ngcontent-%COMP%]   .message-image[_ngcontent-%COMP%]{margin-top:8px}.message-body[_ngcontent-%COMP%]   .message-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:200px;max-height:200px;border-radius:8px}.file-preview[_ngcontent-%COMP%]   .preview-image[_ngcontent-%COMP%]{max-width:100px;max-height:100px;border-radius:8px;object-fit:cover}.file-preview[_ngcontent-%COMP%]   .preview-close[_ngcontent-%COMP%]{position:absolute;top:-8px;right:-8px;border-radius:50%;width:24px;height:24px;padding:0;display:flex;align-items:center;justify-content:center}.message-form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-color:#ced4da}@media (max-width: 768px){.message-item.message-own[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{margin-left:20px}.message-item.message-other[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{margin-right:20px}.message-content[_ngcontent-%COMP%]{max-width:85%}}.overlay[_ngcontent-%COMP%]{width:100%;height:100%;z-index:1000;display:flex;align-items:center;justify-content:center}.image-modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000c;z-index:2000;display:flex;align-items:center;justify-content:center;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}.image-modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 20px 60px #0000004d;max-width:90vw;max-height:90vh;display:flex;flex-direction:column;overflow:hidden}.image-modal-header[_ngcontent-%COMP%]{padding:1rem 1.5rem;border-bottom:1px solid #dee2e6;display:flex;justify-content:between;align-items:center;background-color:#f8f9fa}.image-modal-header[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:600;color:#495057}.image-modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{background:none;border:none;font-size:1.2rem;color:#6c757d;cursor:pointer;padding:.5rem;border-radius:4px;transition:all .2s ease}.image-modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{background-color:#e9ecef;color:#495057}.image-modal-body[_ngcontent-%COMP%]{padding:1rem;display:flex;justify-content:center;align-items:center;max-height:calc(90vh - 140px);overflow:auto}.image-modal-body[_ngcontent-%COMP%]   .modal-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:contain;border-radius:8px;box-shadow:0 4px 12px #0000001a}.image-modal-footer[_ngcontent-%COMP%]{padding:1rem 1.5rem;border-top:1px solid #dee2e6;display:flex;justify-content:space-between;background-color:#f8f9fa}.image-modal-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.5rem 1rem;border-radius:6px;font-weight:500;text-decoration:none;transition:all .2s ease}.image-modal-footer[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;border-color:#6c757d;color:#fff}.image-modal-footer[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#5a6268;border-color:#545b62}.image-modal-footer[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;border-color:#007bff;color:#fff}.image-modal-footer[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3;border-color:#004085}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer;transition:opacity .2s ease}.cursor-pointer[_ngcontent-%COMP%]:hover{opacity:.8}.toast-container[_ngcontent-%COMP%]{z-index:11000}.toast[_ngcontent-%COMP%]{min-width:300px;box-shadow:0 4px 6px #0000001a}.toast[_ngcontent-%COMP%]   .toast-header[_ngcontent-%COMP%]{color:#fff}.toast[_ngcontent-%COMP%]   .toast-header.bg-info[_ngcontent-%COMP%]{background-color:#0dcaf0!important}.toast[_ngcontent-%COMP%]   .toast-header.bg-success[_ngcontent-%COMP%]{background-color:#198754!important}.toast[_ngcontent-%COMP%]   .toast-header.bg-warning[_ngcontent-%COMP%]{background-color:#ffc107!important;color:#000!important}.toast[_ngcontent-%COMP%]   .toast-header.bg-warning[_ngcontent-%COMP%]   .btn-close-white[_ngcontent-%COMP%]{filter:invert(1) grayscale(100%) brightness(0%)}.toast[_ngcontent-%COMP%]   .toast-header.bg-danger[_ngcontent-%COMP%]{background-color:#dc3545!important}.toast[_ngcontent-%COMP%]   .toast-body[_ngcontent-%COMP%]{font-size:14px;line-height:1.4}"]})};var Z1e=[{path:"",redirectTo:"/giris-sayfasi",pathMatch:"full"},{path:"giris-sayfasi",component:aC},{path:"kayit-sayfasi",component:lC},{path:"onay-sayfasi",component:cC},{path:"yonetici-sayfasi",component:dC,children:[{path:"",component:Bm},{path:"ogrenci-liste-sayfasi",component:Bm},{path:"ogrenci-detay-sayfasi/:id",component:uC},{path:"konu-anlat\u0131m-sayfasi",component:Cy},{path:"mysql-sayfasi",component:yy},{path:"ogrenci-gruplar",component:wy},{path:"ogrenci-ucretler",component:My},{path:"grup-detay/:grupAdi",component:Ey}]},{path:"ogrenci-sayfasi",component:D5,children:[{path:"",component:O5},{path:"ogrenci-konu-analiz-sayfasi",component:H5},{path:"ogrenci-islene-konular-sayfasi",component:z5},{path:"ogrenci-islene-konularin-pdf-sayfasi",component:j5},{path:"ogrenci-soru-cozumu-sayfasi",component:G5},{path:"ogrenci-qr-kod-sayfasi",component:S5},{path:"ogrenci-sinav-islemleri-sayfasi",component:V5},{path:"optik",component:U5},{path:"sinav-sonuclari",component:Sg}]},{path:"ogretmen-sayfasi",component:T5,children:[{path:"",component:C2},{path:"ogretmen-ogrenci-listesi-sayfasi",component:b2},{path:"ogretmen-ogrenci-detay-sayfasi/:id",component:E2},{path:"ogretmen-sinifta-kimler-var-sayfasi",component:Fx},{path:"ogretmen-sinifta-kimler-var-sayfasi/:grupAdi",component:Fx},{path:"devamsizlik/:grupAdi",component:w2},{path:"ogretmen-gruplar-sayfasi",component:y2},{path:"ogretmen-gruplar-detay-sayfasi/:grupAdi",component:M2},{path:"ogretmen-ders-anlatma-tahtasi-sayfasi",component:v2},{path:"ogretmen-islenen-konular-sayfasi",component:L5},{path:"konular",component:R5},{path:"qr-generator",component:j2},{path:"ogretmen-soru-cozumu-sayfasi",component:$5},{path:"ogretmen-sinavlar-sayfasi",component:B5},{path:"ogretmen-ucret-sayfasi",component:N5}]}],eu=class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=bn({type:i});static \u0275inj=vn({imports:[md.forRoot(Z1e),md]})};var W5=class i{title="kimyaogreniyorum";constructor(){window.addEventListener("unhandledrejection",e=>{console.error("Unhandled promise rejection:",e.reason),e.preventDefault()})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=Ke({type:i,selectors:[["app-root"]],standalone:!1,decls:1,vars:0,template:function(t,n){t&1&&k(0,"router-outlet")},dependencies:[va],encapsulation:2})};var q5=class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=bn({type:i});static \u0275inj=vn({imports:[cs,fl,xa,ds,eu,hl]})};function AU(i){return new je(3e3,!1)}function e_e(){return new je(3100,!1)}function t_e(){return new je(3101,!1)}function n_e(i){return new je(3001,!1)}function i_e(i){return new je(3003,!1)}function r_e(i){return new je(3004,!1)}function FU(i,e){return new je(3005,!1)}function IU(){return new je(3006,!1)}function TU(){return new je(3007,!1)}function BU(i,e){return new je(3008,!1)}function NU(i){return new je(3002,!1)}function LU(i,e,t,n,r){return new je(3010,!1)}function RU(){return new je(3011,!1)}function zU(){return new je(3012,!1)}function jU(){return new je(3200,!1)}function VU(){return new je(3202,!1)}function UU(){return new je(3013,!1)}function HU(i){return new je(3014,!1)}function GU(i){return new je(3015,!1)}function $U(i){return new je(3016,!1)}function WU(i,e){return new je(3404,!1)}function o_e(i){return new je(3502,!1)}function qU(i){return new je(3503,!1)}function KU(){return new je(3300,!1)}function YU(i){return new je(3504,!1)}function XU(i){return new je(3301,!1)}function QU(i,e){return new je(3302,!1)}function JU(i){return new je(3303,!1)}function ZU(i,e){return new je(3400,!1)}function eH(i){return new je(3401,!1)}function tH(i){return new je(3402,!1)}function nH(i,e){return new je(3505,!1)}function Rc(i){switch(i.length){case 0:return new gl;case 1:return i[0];default:return new qu(i)}}function T8(i,e,t=new Map,n=new Map){let r=[],o=[],s=-1,a=null;if(e.forEach(l=>{let c=l.get("offset"),d=c==s,h=d&&a||new Map;l.forEach((p,g)=>{let _=g,b=p;if(g!=="offset")switch(_=i.normalizePropertyName(_,r),b){case Pf:b=t.get(g);break;case Ts:b=n.get(g);break;default:b=i.normalizeStyleValue(g,_,b,r);break}h.set(_,b)}),d||o.push(h),a=h,s=c}),r.length)throw o_e(r);return o}function K5(i,e,t,n){switch(e){case"start":i.onStart(()=>n(t&&D8(t,"start",i)));break;case"done":i.onDone(()=>n(t&&D8(t,"done",i)));break;case"destroy":i.onDestroy(()=>n(t&&D8(t,"destroy",i)));break}}function D8(i,e,t){let n=t.totalTime,r=!!t.disabled,o=Y5(i.element,i.triggerName,i.fromState,i.toState,e||i.phaseName,n??i.totalTime,r),s=i._data;return s!=null&&(o._data=s),o}function Y5(i,e,t,n,r="",o=0,s){return{element:i,triggerName:e,fromState:t,toState:n,phaseName:r,totalTime:o,disabled:!!s}}function qo(i,e,t){let n=i.get(e);return n||i.set(e,n=t),n}function B8(i){let e=i.indexOf(":"),t=i.substring(1,e),n=i.slice(e+1);return[t,n]}var s_e=typeof document>"u"?null:document.documentElement;function X5(i){let e=i.parentNode||i.host||null;return e===s_e?null:e}function a_e(i){return i.substring(1,6)=="ebkit"}var H0=null,DU=!1;function iH(i){H0||(H0=l_e()||{},DU=H0.style?"WebkitAppearance"in H0.style:!1);let e=!0;return H0.style&&!a_e(i)&&(e=i in H0.style,!e&&DU&&(e="Webkit"+i.charAt(0).toUpperCase()+i.slice(1)in H0.style)),e}function l_e(){return typeof document<"u"?document.body:null}function N8(i,e){for(;e;){if(e===i)return!0;e=X5(e)}return!1}function L8(i,e,t){if(t)return Array.from(i.querySelectorAll(e));let n=i.querySelector(e);return n?[n]:[]}var c_e=1e3,R8="{{",d_e="}}",z8="ng-enter",Q5="ng-leave",l1="ng-trigger",c1=".ng-trigger",j8="ng-animating",J5=".ng-animating";function Tl(i){if(typeof i=="number")return i;let e=i.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:F8(parseFloat(e[1]),e[2])}function F8(i,e){switch(e){case"s":return i*c_e;default:return i}}function d1(i,e,t){return i.hasOwnProperty("duration")?i:u_e(i,e,t)}function u_e(i,e,t){let n=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,r,o=0,s="";if(typeof i=="string"){let a=i.match(n);if(a===null)return e.push(AU(i)),{duration:0,delay:0,easing:""};r=F8(parseFloat(a[1]),a[2]);let l=a[3];l!=null&&(o=F8(parseFloat(l),a[4]));let c=a[5];c&&(s=c)}else r=i;if(!t){let a=!1,l=e.length;r<0&&(e.push(e_e()),a=!0),o<0&&(e.push(t_e()),a=!0),a&&e.splice(l,0,AU(i))}return{duration:r,delay:o,easing:s}}function rH(i){return i.length?i[0]instanceof Map?i:i.map(e=>new Map(Object.entries(e))):[]}function Na(i,e,t){e.forEach((n,r)=>{let o=Z5(r);t&&!t.has(r)&&t.set(r,i.style[o]),i.style[o]=n})}function tu(i,e){e.forEach((t,n)=>{let r=Z5(n);i.style[r]=""})}function kg(i){return Array.isArray(i)?i.length==1?i[0]:bB(i):i}function oH(i,e,t){let n=e.params||{},r=V8(i);r.length&&r.forEach(o=>{n.hasOwnProperty(o)||t.push(n_e(o))})}var I8=new RegExp(`${R8}\\s*(.+?)\\s*${d_e}`,"g");function V8(i){let e=[];if(typeof i=="string"){let t;for(;t=I8.exec(i);)e.push(t[1]);I8.lastIndex=0}return e}function Ag(i,e,t){let n=`${i}`,r=n.replace(I8,(o,s)=>{let a=e[s];return a==null&&(t.push(i_e(s)),a=""),a.toString()});return r==n?i:r}var h_e=/-+([a-z0-9])/g;function Z5(i){return i.replace(h_e,(...e)=>e[1].toUpperCase())}function sH(i,e){return i===0||e===0}function aH(i,e,t){if(t.size&&e.length){let n=e[0],r=[];if(t.forEach((o,s)=>{n.has(s)||r.push(s),n.set(s,o)}),r.length)for(let o=1;o<e.length;o++){let s=e[o];r.forEach(a=>s.set(a,ew(i,a)))}}return e}function Ko(i,e,t){switch(e.type){case jt.Trigger:return i.visitTrigger(e,t);case jt.State:return i.visitState(e,t);case jt.Transition:return i.visitTransition(e,t);case jt.Sequence:return i.visitSequence(e,t);case jt.Group:return i.visitGroup(e,t);case jt.Animate:return i.visitAnimate(e,t);case jt.Keyframes:return i.visitKeyframes(e,t);case jt.Style:return i.visitStyle(e,t);case jt.Reference:return i.visitReference(e,t);case jt.AnimateChild:return i.visitAnimateChild(e,t);case jt.AnimateRef:return i.visitAnimateRef(e,t);case jt.Query:return i.visitQuery(e,t);case jt.Stagger:return i.visitStagger(e,t);default:throw r_e(e.type)}}function ew(i,e){return window.getComputedStyle(i)[e]}var r4=(()=>{class i{validateStyleProperty(t){return iH(t)}containsElement(t,n){return N8(t,n)}getParentElement(t){return X5(t)}query(t,n,r){return L8(t,n,r)}computeStyle(t,n,r){return r||""}animate(t,n,r,o,s,a=[],l){return new gl(r,o)}static \u0275fac=function(n){return new(n||i)};static \u0275prov=tt({token:i,factory:i.\u0275fac})}return i})(),$0=class{static NOOP=new r4},W0=class{};var f_e=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),ow=class extends W0{normalizePropertyName(e,t){return Z5(e)}normalizeStyleValue(e,t,n,r){let o="",s=n.toString().trim();if(f_e.has(t)&&n!==0&&n!=="0")if(typeof n=="number")o="px";else{let a=n.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&r.push(FU(e,n))}return s+o}};var sw="*";function g_e(i,e){let t=[];return typeof i=="string"?i.split(/\s*,\s*/).forEach(n=>p_e(n,t,e)):t.push(i),t}function p_e(i,e,t){if(i[0]==":"){let l=m_e(i,t);if(typeof l=="function"){e.push(l);return}i=l}let n=i.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(n==null||n.length<4)return t.push(GU(i)),e;let r=n[1],o=n[2],s=n[3];e.push(lH(r,s));let a=r==sw&&s==sw;o[0]=="<"&&!a&&e.push(lH(s,r))}function m_e(i,e){switch(i){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,n)=>parseFloat(n)>parseFloat(t);case":decrement":return(t,n)=>parseFloat(n)<parseFloat(t);default:return e.push($U(i)),"* => *"}}var tw=new Set(["true","1"]),nw=new Set(["false","0"]);function lH(i,e){let t=tw.has(i)||nw.has(i),n=tw.has(e)||nw.has(e);return(r,o)=>{let s=i==sw||i==r,a=e==sw||e==o;return!s&&t&&typeof r=="boolean"&&(s=r?tw.has(i):nw.has(i)),!a&&n&&typeof o=="boolean"&&(a=o?tw.has(e):nw.has(e)),s&&a}}var _H=":self",x_e=new RegExp(`s*${_H}s*,?`,"g");function vH(i,e,t,n){return new q8(i).build(e,t,n)}var cH="",q8=class{_driver;constructor(e){this._driver=e}build(e,t,n){let r=new K8(t);return this._resetContextStyleTimingState(r),Ko(this,kg(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector=cH,e.collectedStyles=new Map,e.collectedStyles.set(cH,new Map),e.currentTime=0}visitTrigger(e,t){let n=t.queryCount=0,r=t.depCount=0,o=[],s=[];return e.name.charAt(0)=="@"&&t.errors.push(IU()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==jt.State){let l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(d=>{l.name=d,o.push(this.visitState(l,t))}),l.name=c}else if(a.type==jt.Transition){let l=this.visitTransition(a,t);n+=l.queryCount,r+=l.depCount,s.push(l)}else t.errors.push(TU())}),{type:jt.Trigger,name:e.name,states:o,transitions:s,queryCount:n,depCount:r,options:null}}visitState(e,t){let n=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(n.containsDynamicStyles){let o=new Set,s=r||{};n.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{V8(l).forEach(c=>{s.hasOwnProperty(c)||o.add(c)})})}),o.size&&t.errors.push(BU(e.name,[...o.values()]))}return{type:jt.State,name:e.name,style:n,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let n=Ko(this,kg(e.animation),t),r=g_e(e.expr,t.errors);return{type:jt.Transition,matchers:r,animation:n,queryCount:t.queryCount,depCount:t.depCount,options:G0(e.options)}}visitSequence(e,t){return{type:jt.Sequence,steps:e.steps.map(n=>Ko(this,n,t)),options:G0(e.options)}}visitGroup(e,t){let n=t.currentTime,r=0,o=e.steps.map(s=>{t.currentTime=n;let a=Ko(this,s,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:jt.Group,steps:o,options:G0(e.options)}}visitAnimate(e,t){let n=C_e(e.timings,t.errors);t.currentAnimateTimings=n;let r,o=e.styles?e.styles:vd({});if(o.type==jt.Keyframes)r=this.visitKeyframes(o,t);else{let s=e.styles,a=!1;if(!s){a=!0;let c={};n.easing&&(c.easing=n.easing),s=vd(c)}t.currentTime+=n.duration+n.delay;let l=this.visitStyle(s,t);l.isEmptyStep=a,r=l}return t.currentAnimateTimings=null,{type:jt.Animate,timings:n,style:r,options:null}}visitStyle(e,t){let n=this._makeStyleAst(e,t);return this._validateStyleAst(n,t),n}_makeStyleAst(e,t){let n=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)typeof a=="string"?a===Ts?n.push(a):t.errors.push(NU(a)):n.push(new Map(Object.entries(a)));let o=!1,s=null;return n.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o)){for(let l of a.values())if(l.toString().indexOf(R8)>=0){o=!0;break}}}),{type:jt.Style,styles:n,easing:s,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){let n=t.currentAnimateTimings,r=t.currentTime,o=t.currentTime;n&&o>0&&(o-=n.duration+n.delay),e.styles.forEach(s=>{typeof s!="string"&&s.forEach((a,l)=>{let c=t.collectedStyles.get(t.currentQuerySelector),d=c.get(l),h=!0;d&&(o!=r&&o>=d.startTime&&r<=d.endTime&&(t.errors.push(LU(l,d.startTime,d.endTime,o,r)),h=!1),o=d.startTime),h&&c.set(l,{startTime:o,endTime:r}),t.options&&oH(a,t.options,t.errors)})})}visitKeyframes(e,t){let n={type:jt.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(RU()),n;let r=1,o=0,s=[],a=!1,l=!1,c=0,d=e.steps.map(y=>{let M=this._makeStyleAst(y,t),O=M.offset!=null?M.offset:b_e(M.styles),A=0;return O!=null&&(o++,A=M.offset=O),l=l||A<0||A>1,a=a||A<c,c=A,s.push(A),M});l&&t.errors.push(zU()),a&&t.errors.push(jU());let h=e.steps.length,p=0;o>0&&o<h?t.errors.push(VU()):o==0&&(p=r/(h-1));let g=h-1,_=t.currentTime,b=t.currentAnimateTimings,C=b.duration;return d.forEach((y,M)=>{let O=p>0?M==g?1:p*M:s[M],A=O*C;t.currentTime=_+b.delay+A,b.duration=A,this._validateStyleAst(y,t),y.offset=O,n.styles.push(y)}),n}visitReference(e,t){return{type:jt.Reference,animation:Ko(this,kg(e.animation),t),options:G0(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:jt.AnimateChild,options:G0(e.options)}}visitAnimateRef(e,t){return{type:jt.AnimateRef,animation:this.visitReference(e.animation,t),options:G0(e.options)}}visitQuery(e,t){let n=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;let[o,s]=__e(e.selector);t.currentQuerySelector=n.length?n+" "+o:o,qo(t.collectedStyles,t.currentQuerySelector,new Map);let a=Ko(this,kg(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=n,{type:jt.Query,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:a,originalSelector:e.selector,options:G0(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(UU());let n=e.timings==="full"?{duration:0,delay:0,easing:"full"}:d1(e.timings,t.errors,!0);return{type:jt.Stagger,animation:Ko(this,kg(e.animation),t),timings:n,options:null}}};function __e(i){let e=!!i.split(/\s*,\s*/).find(t=>t==_H);return e&&(i=i.replace(x_e,"")),i=i.replace(/@\*/g,c1).replace(/@\w+/g,t=>c1+"-"+t.slice(1)).replace(/:animating/g,J5),[i,e]}function v_e(i){return i?Ie({},i):null}var K8=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(e){this.errors=e}};function b_e(i){if(typeof i=="string")return null;let e=null;if(Array.isArray(i))i.forEach(t=>{if(t instanceof Map&&t.has("offset")){let n=t;e=parseFloat(n.get("offset")),n.delete("offset")}});else if(i instanceof Map&&i.has("offset")){let t=i;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function C_e(i,e){if(i.hasOwnProperty("duration"))return i;if(typeof i=="number"){let o=d1(i,e).duration;return U8(o,0,"")}let t=i;if(t.split(/\s+/).some(o=>o.charAt(0)=="{"&&o.charAt(1)=="{")){let o=U8(0,0,"");return o.dynamic=!0,o.strValue=t,o}let r=d1(t,e);return U8(r.duration,r.delay,r.easing)}function G0(i){return i?(i=Ie({},i),i.params&&(i.params=v_e(i.params))):i={},i}function U8(i,e,t){return{duration:i,delay:e,easing:t}}function o4(i,e,t,n,r,o,s=null,a=!1){return{type:1,element:i,keyframes:e,preStyleProps:t,postStyleProps:n,duration:r,delay:o,totalTime:r+o,easing:s,subTimeline:a}}var h1=class{_map=new Map;get(e){return this._map.get(e)||[]}append(e,t){let n=this._map.get(e);n||this._map.set(e,n=[]),n.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},y_e=1,w_e=":enter",M_e=new RegExp(w_e,"g"),E_e=":leave",P_e=new RegExp(E_e,"g");function bH(i,e,t,n,r,o=new Map,s=new Map,a,l,c=[]){return new Y8().buildKeyframes(i,e,t,n,r,o,s,a,l,c)}var Y8=class{buildKeyframes(e,t,n,r,o,s,a,l,c,d=[]){c=c||new h1;let h=new X8(e,t,c,r,o,d,[]);h.options=l;let p=l.delay?Tl(l.delay):0;h.currentTimeline.delayNextStep(p),h.currentTimeline.setStyles([s],null,h.errors,l),Ko(this,n,h);let g=h.timelines.filter(_=>_.containsAnimation());if(g.length&&a.size){let _;for(let b=g.length-1;b>=0;b--){let C=g[b];if(C.element===t){_=C;break}}_&&!_.allowOnlyTimelineStyles()&&_.setStyles([a],null,h.errors,l)}return g.length?g.map(_=>_.buildKeyframes()):[o4(t,[],[],[],0,p,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let n=t.subInstructions.get(t.element);if(n){let r=t.createSubContext(e.options),o=t.currentTimeline.currentTime,s=this._visitSubInstructions(n,r,r.options);o!=s&&t.transformIntoNewTimeline(s)}t.previousNode=e}visitAnimateRef(e,t){let n=t.createSubContext(e.options);n.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,n),this.visitReference(e.animation,n),t.transformIntoNewTimeline(n.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,n){for(let r of e){let o=r?.delay;if(o){let s=typeof o=="number"?o:Tl(Ag(o,r?.params??{},t.errors));n.delayNextStep(s)}}}_visitSubInstructions(e,t,n){let o=t.currentTimeline.currentTime,s=n.duration!=null?Tl(n.duration):null,a=n.delay!=null?Tl(n.delay):null;return s!==0&&e.forEach(l=>{let c=t.appendInstructionToTimeline(l,s,a);o=Math.max(o,c.duration+c.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),Ko(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let n=t.subContextCount,r=t,o=e.options;if(o&&(o.params||o.delay)&&(r=t.createSubContext(o),r.transformIntoNewTimeline(),o.delay!=null)){r.previousNode.type==jt.Style&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=aw);let s=Tl(o.delay);r.delayNextStep(s)}e.steps.length&&(e.steps.forEach(s=>Ko(this,s,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let n=[],r=t.currentTimeline.currentTime,o=e.options&&e.options.delay?Tl(e.options.delay):0;e.steps.forEach(s=>{let a=t.createSubContext(e.options);o&&a.delayNextStep(o),Ko(this,s,a),r=Math.max(r,a.currentTimeline.currentTime),n.push(a.currentTimeline)}),n.forEach(s=>t.currentTimeline.mergeTimelineCollectedStyles(s)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let n=e.strValue,r=t.params?Ag(n,t.params,t.errors):n;return d1(r,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let n=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;n.delay&&(t.incrementTime(n.delay),r.snapshotCurrentStyles());let o=e.style;o.type==jt.Keyframes?this.visitKeyframes(o,t):(t.incrementTime(n.duration),this.visitStyle(o,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let n=t.currentTimeline,r=t.currentAnimateTimings;!r&&n.hasCurrentStyleProperties()&&n.forwardFrame();let o=r&&r.easing||e.easing;e.isEmptyStep?n.applyEmptyStep(o):n.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let n=t.currentAnimateTimings,r=t.currentTimeline.duration,o=n.duration,a=t.createSubContext().currentTimeline;a.easing=n.easing,e.styles.forEach(l=>{let c=l.offset||0;a.forwardTime(c*o),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+o),t.previousNode=e}visitQuery(e,t){let n=t.currentTimeline.currentTime,r=e.options||{},o=r.delay?Tl(r.delay):0;o&&(t.previousNode.type===jt.Style||n==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=aw);let s=n,a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,d)=>{t.currentQueryIndex=d;let h=t.createSubContext(e.options,c);o&&h.delayNextStep(o),c===t.element&&(l=h.currentTimeline),Ko(this,e.animation,h),h.currentTimeline.applyStylesToKeyframe();let p=h.currentTimeline.currentTime;s=Math.max(s,p)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(s),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let n=t.parentContext,r=t.currentTimeline,o=e.timings,s=Math.abs(o.duration),a=s*(t.currentQueryTotal-1),l=s*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":l=a-l;break;case"full":l=n.currentStaggerTime;break}let d=t.currentTimeline;l&&d.delayNextStep(l);let h=d.currentTime;Ko(this,e.animation,t),t.previousNode=e,n.currentStaggerTime=r.currentTime-h+(r.startTime-n.currentTimeline.startTime)}},aw={},X8=class i{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=aw;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(e,t,n,r,o,s,a,l){this._driver=e,this.element=t,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=o,this.errors=s,this.timelines=a,this.currentTimeline=l||new lw(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let n=e,r=this.options;n.duration!=null&&(r.duration=Tl(n.duration)),n.delay!=null&&(r.delay=Tl(n.delay));let o=n.params;if(o){let s=r.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!t||!s.hasOwnProperty(a))&&(s[a]=Ag(o[a],s,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let n=e.params={};Object.keys(t).forEach(r=>{n[r]=t[r]})}}return e}createSubContext(e=null,t,n){let r=t||this.element,o=new i(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=aw,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,n){let r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(n??0)+e.delay,easing:""},o=new Q8(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(o),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,n,r,o,s){let a=[];if(r&&a.push(this.element),e.length>0){e=e.replace(M_e,"."+this._enterClassName),e=e.replace(P_e,"."+this._leaveClassName);let l=n!=1,c=this._driver.query(this.element,e,l);n!==0&&(c=n<0?c.slice(c.length+n,c.length):c.slice(0,n)),a.push(...c)}return!o&&a.length==0&&s.push(HU(t)),a}},lw=class i{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(e,t,n,r){this._driver=e,this.element=t,this.startTime=n,this._elementTimelineStylesLookup=r,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new i(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=y_e,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,n]of this._globalTimelineStyles)this._backFill.set(t,n||Ts),this._currentKeyframe.set(t,Ts);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,n,r){t&&this._previousKeyframe.set("easing",t);let o=r&&r.params||{},s=O_e(e,this._globalTimelineStyles);for(let[a,l]of s){let c=Ag(l,o,n);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Ts),this._updateStyle(a,c)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,n)=>{let r=this._styleSummary.get(n);(!r||t.time>r.time)&&this._updateStyle(n,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,n=this._keyframes.size===1&&this.duration===0,r=[];this._keyframes.forEach((a,l)=>{let c=new Map([...this._backFill,...a]);c.forEach((d,h)=>{d===Pf?e.add(h):d===Ts&&t.add(h)}),n||c.set("offset",l/this.duration),r.push(c)});let o=[...e.values()],s=[...t.values()];if(n){let a=r[0],l=new Map(a);a.set("offset",0),l.set("offset",1),r=[a,l]}return o4(this.element,r,o,s,this.duration,this.startTime,this.easing,!1)}},Q8=class extends lw{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(e,t,n,r,o,s,a=!1){super(e,t,s.delay),this.keyframes=n,this.preStyleProps=r,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){let o=[],s=n+t,a=t/s,l=new Map(e[0]);l.set("offset",0),o.push(l);let c=new Map(e[0]);c.set("offset",dH(a)),o.push(c);let d=e.length-1;for(let h=1;h<=d;h++){let p=new Map(e[h]),g=p.get("offset"),_=t+g*n;p.set("offset",dH(_/s)),o.push(p)}n=s,t=0,r="",e=o}return o4(this.element,e,this.preStyleProps,this.postStyleProps,n,t,r,!0)}};function dH(i,e=3){let t=Math.pow(10,e-1);return Math.round(i*t)/t}function O_e(i,e){let t=new Map,n;return i.forEach(r=>{if(r==="*"){n??=e.keys();for(let o of n)t.set(o,Ts)}else for(let[o,s]of r)t.set(o,s)}),t}function uH(i,e,t,n,r,o,s,a,l,c,d,h,p){return{type:0,element:i,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:o,toState:n,toStyles:s,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:d,totalTime:h,errors:p}}var H8={},cw=class{_triggerName;ast;_stateStyles;constructor(e,t,n){this._triggerName=e,this.ast=t,this._stateStyles=n}match(e,t,n,r){return S_e(this.ast.matchers,e,t,n,r)}buildStyles(e,t,n){let r=this._stateStyles.get("*");return e!==void 0&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,n):new Map}build(e,t,n,r,o,s,a,l,c,d){let h=[],p=this.ast.options&&this.ast.options.params||H8,g=a&&a.params||H8,_=this.buildStyles(n,g,h),b=l&&l.params||H8,C=this.buildStyles(r,b,h),y=new Set,M=new Map,O=new Map,A=r==="void",D={params:CH(b,p),delay:this.ast.options?.delay},N=d?[]:bH(e,t,this.ast.animation,o,s,_,C,D,c,h),B=0;return N.forEach(T=>{B=Math.max(T.duration+T.delay,B)}),h.length?uH(t,this._triggerName,n,r,A,_,C,[],[],M,O,B,h):(N.forEach(T=>{let H=T.element,te=qo(M,H,new Set);T.preStyleProps.forEach(z=>te.add(z));let L=qo(O,H,new Set);T.postStyleProps.forEach(z=>L.add(z)),H!==t&&y.add(H)}),uH(t,this._triggerName,n,r,A,_,C,N,[...y.values()],M,O,B))}};function S_e(i,e,t,n,r){return i.some(o=>o(e,t,n,r))}function CH(i,e){let t=Ie({},e);return Object.entries(i).forEach(([n,r])=>{r!=null&&(t[n]=r)}),t}var J8=class{styles;defaultParams;normalizer;constructor(e,t,n){this.styles=e,this.defaultParams=t,this.normalizer=n}buildStyles(e,t){let n=new Map,r=CH(e,this.defaultParams);return this.styles.styles.forEach(o=>{typeof o!="string"&&o.forEach((s,a)=>{s&&(s=Ag(s,r,t));let l=this.normalizer.normalizePropertyName(a,t);s=this.normalizer.normalizeStyleValue(a,l,s,t),n.set(a,s)})}),n}};function k_e(i,e,t){return new Z8(i,e,t)}var Z8=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(e,t,n){this.name=e,this.ast=t,this._normalizer=n,t.states.forEach(r=>{let o=r.options&&r.options.params||{};this.states.set(r.name,new J8(r.style,o,n))}),hH(this.states,"true","1"),hH(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new cw(e,r,this.states))}),this.fallbackTransition=A_e(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,n,r){return this.transitionFactories.find(s=>s.match(e,t,n,r))||null}matchStyles(e,t,n){return this.fallbackTransition.buildStyles(e,t,n)}};function A_e(i,e,t){let n=[(s,a)=>!0],r={type:jt.Sequence,steps:[],options:null},o={type:jt.Transition,animation:r,matchers:n,options:null,queryCount:0,depCount:0};return new cw(i,o,e)}function hH(i,e,t){i.has(e)?i.has(t)||i.set(t,i.get(e)):i.has(t)&&i.set(e,i.get(t))}var D_e=new h1,e4=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n}register(e,t){let n=[],r=[],o=vH(this._driver,t,n,r);if(n.length)throw qU(n);this._animations.set(e,o)}_buildPlayer(e,t,n){let r=e.element,o=T8(this._normalizer,e.keyframes,t,n);return this._driver.animate(r,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,n={}){let r=[],o=this._animations.get(e),s,a=new Map;if(o?(s=bH(this._driver,t,o,z8,Q5,new Map,new Map,n,D_e,r),s.forEach(d=>{let h=qo(a,d.element,new Map);d.postStyleProps.forEach(p=>h.set(p,null))})):(r.push(KU()),s=[]),r.length)throw YU(r);a.forEach((d,h)=>{d.forEach((p,g)=>{d.set(g,this._driver.computeStyle(h,g,Ts))})});let l=s.map(d=>{let h=a.get(d.element);return this._buildPlayer(d,new Map,h)}),c=Rc(l);return this._playersById.set(e,c),c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let n=this.players.indexOf(t);n>=0&&this.players.splice(n,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw XU(e);return t}listen(e,t,n,r){let o=Y5(t,"","","");return K5(this._getPlayer(e),n,o,r),()=>{}}command(e,t,n,r){if(n=="register"){this.register(e,r[0]);return}if(n=="create"){let s=r[0]||{};this.create(e,t,s);return}let o=this._getPlayer(e);switch(n){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e);break}}},fH="ng-animate-queued",F_e=".ng-animate-queued",G8="ng-animate-disabled",I_e=".ng-animate-disabled",T_e="ng-star-inserted",B_e=".ng-star-inserted",N_e=[],yH={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},L_e={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},La="__ng_removed",f1=class{namespaceId;value;options;get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let n=e&&e.hasOwnProperty("value"),r=n?e.value:e;if(this.value=z_e(r),n){let o=e,{value:s}=o,a=sM(o,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let n=this.options.params;Object.keys(t).forEach(r=>{n[r]==null&&(n[r]=t[r])})}}},u1="void",$8=new f1(u1),t4=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(e,t,n){this.id=e,this.hostElement=t,this._engine=n,this._hostClassName="ng-tns-"+e,$s(t,this._hostClassName)}listen(e,t,n,r){if(!this._triggers.has(t))throw QU(n,t);if(n==null||n.length==0)throw JU(t);if(!j_e(n))throw ZU(n,t);let o=qo(this._elementListeners,e,[]),s={name:t,phase:n,callback:r};o.push(s);let a=qo(this._engine.statesByElement,e,new Map);return a.has(t)||($s(e,l1),$s(e,l1+"-"+t),a.set(t,$8)),()=>{this._engine.afterFlush(()=>{let l=o.indexOf(s);l>=0&&o.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw eH(e);return t}trigger(e,t,n,r=!0){let o=this._getTrigger(t),s=new g1(this.id,t,e),a=this._engine.statesByElement.get(e);a||($s(e,l1),$s(e,l1+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t),c=new f1(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(t,c),l||(l=$8),!(c.value===u1)&&l.value===c.value){if(!H_e(l.params,c.params)){let b=[],C=o.matchStyles(l.value,l.params,b),y=o.matchStyles(c.value,c.params,b);b.length?this._engine.reportError(b):this._engine.afterFlush(()=>{tu(e,C),Na(e,y)})}return}let p=qo(this._engine.playersByElement,e,[]);p.forEach(b=>{b.namespaceId==this.id&&b.triggerName==t&&b.queued&&b.destroy()});let g=o.matchTransition(l.value,c.value,e,c.params),_=!1;if(!g){if(!r)return;g=o.fallbackTransition,_=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:g,fromState:l,toState:c,player:s,isFallbackTransition:_}),_||($s(e,fH),s.onStart(()=>{Dg(e,fH)})),s.onDone(()=>{let b=this.players.indexOf(s);b>=0&&this.players.splice(b,1);let C=this._engine.playersByElement.get(e);if(C){let y=C.indexOf(s);y>=0&&C.splice(y,1)}}),this.players.push(s),p.push(s),s}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,n)=>{this._elementListeners.set(n,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(n=>n.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let n=this._engine.driver.query(e,c1,!0);n.forEach(r=>{if(r[La])return;let o=this._engine.fetchNamespacesByElement(r);o.size?o.forEach(s=>s.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,n,r){let o=this._engine.statesByElement.get(e),s=new Map;if(o){let a=[];if(o.forEach((l,c)=>{if(s.set(c,l.value),this._triggers.has(c)){let d=this.trigger(e,c,u1,r);d&&a.push(d)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,s),n&&Rc(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),n=this._engine.statesByElement.get(e);if(t&&n){let r=new Set;t.forEach(o=>{let s=o.name;if(r.has(s))return;r.add(s);let l=this._triggers.get(s).fallbackTransition,c=n.get(s)||$8,d=new f1(u1),h=new g1(this.id,s,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:s,transition:l,fromState:c,toState:d,player:h,isFallbackTransition:!0})})}}removeNode(e,t){let n=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(n.totalAnimations){let o=n.players.length?n.playersByQueriedElement.get(e):[];if(o&&o.length)r=!0;else{let s=e;for(;s=s.parentNode;)if(n.statesByElement.get(s)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)n.markElementAsRemoved(this.id,e,!1,t);else{let o=e[La];(!o||o===yH)&&(n.afterFlush(()=>this.clearElementCache(e)),n.destroyInnerAnimations(e),n._onRemovalComplete(e,t))}}insertNode(e,t){$s(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(n=>{let r=n.player;if(r.destroyed)return;let o=n.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==n.triggerName){let l=Y5(o,n.triggerName,n.fromState.value,n.toState.value);l._data=e,K5(n.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(n)}),this._queue=[],t.sort((n,r)=>{let o=n.transition.ast.depCount,s=r.transition.ast.depCount;return o==0||s==0?o-s:this._engine.driver.containsElement(n.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},n4=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(e,t)=>{};_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,n){this.bodyNode=e,this.driver=t,this._normalizer=n}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(n=>{n.queued&&e.push(n)})}),e}createNamespace(e,t){let n=new t4(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(n,t):(this.newHostElements.set(t,n),this.collectEnterElement(t)),this._namespaceLookup[e]=n}_balanceNamespaceList(e,t){let n=this._namespaceList,r=this.namespacesByHostElement;if(n.length-1>=0){let s=!1,a=this.driver.getParentElement(t);for(;a;){let l=r.get(a);if(l){let c=n.indexOf(l);n.splice(c+1,0,e),s=!0;break}a=this.driver.getParentElement(a)}s||n.unshift(e)}else n.push(e);return r.set(t,e),e}register(e,t){let n=this._namespaceLookup[e];return n||(n=this.createNamespace(e,t)),n}registerTrigger(e,t,n){let r=this._namespaceLookup[e];r&&r.register(t,n)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let n=this._fetchNamespace(e);this.namespacesByHostElement.delete(n.hostElement);let r=this._namespaceList.indexOf(n);r>=0&&this._namespaceList.splice(r,1),n.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,n=this.statesByElement.get(e);if(n){for(let r of n.values())if(r.namespaceId){let o=this._fetchNamespace(r.namespaceId);o&&t.add(o)}}return t}trigger(e,t,n,r){if(iw(t)){let o=this._fetchNamespace(e);if(o)return o.trigger(t,n,r),!0}return!1}insertNode(e,t,n,r){if(!iw(t))return;let o=t[La];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;let s=this.collectedLeaveElements.indexOf(t);s>=0&&this.collectedLeaveElements.splice(s,1)}if(e){let s=this._fetchNamespace(e);s&&s.insertNode(t,n)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),$s(e,G8)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Dg(e,G8))}removeNode(e,t,n){if(iw(t)){let r=e?this._fetchNamespace(e):null;r?r.removeNode(t,n):this.markElementAsRemoved(e,t,!1,n);let o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,n)}else this._onRemovalComplete(t,n)}markElementAsRemoved(e,t,n,r,o){this.collectedLeaveElements.push(t),t[La]={namespaceId:e,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,n,r,o){return iw(t)?this._fetchNamespace(e).listen(t,n,r,o):()=>{}}_buildInstruction(e,t,n,r,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,n,r,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,c1,!0);t.forEach(n=>this.destroyActiveAnimationsForElement(n)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,J5,!0),t.forEach(n=>this.finishActiveQueriedAnimationOnElement(n)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(n=>{n.queued?n.markedForDestroy=!0:n.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(n=>n.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Rc(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[La];if(t&&t.setForRemoval){if(e[La]=yH,t.namespaceId){this.destroyInnerAnimations(e);let n=this._fetchNamespace(t.namespaceId);n&&n.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(G8)&&this.markElementAsDisabled(e,!1),this.driver.query(e,I_e,!0).forEach(n=>{this.markElementAsDisabled(n,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((n,r)=>this._balanceNamespaceList(n,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++){let r=this.collectedEnterElements[n];$s(r,T_e)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let n=[];try{t=this._flushAnimations(n,e)}finally{for(let r=0;r<n.length;r++)n[r]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++){let r=this.collectedLeaveElements[n];this.processLeaveNode(r)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(n=>n()),this._flushFns=[],this._whenQuietFns.length){let n=this._whenQuietFns;this._whenQuietFns=[],t.length?Rc(t).onDone(()=>{n.forEach(r=>r())}):n.forEach(r=>r())}}reportError(e){throw tH(e)}_flushAnimations(e,t){let n=new h1,r=[],o=new Map,s=[],a=new Map,l=new Map,c=new Map,d=new Set;this.disabledNodes.forEach(X=>{d.add(X);let ie=this.driver.query(X,F_e,!0);for(let oe=0;oe<ie.length;oe++)d.add(ie[oe])});let h=this.bodyNode,p=Array.from(this.statesByElement.keys()),g=mH(p,this.collectedEnterElements),_=new Map,b=0;g.forEach((X,ie)=>{let oe=z8+b++;_.set(ie,oe),X.forEach(le=>$s(le,oe))});let C=[],y=new Set,M=new Set;for(let X=0;X<this.collectedLeaveElements.length;X++){let ie=this.collectedLeaveElements[X],oe=ie[La];oe&&oe.setForRemoval&&(C.push(ie),y.add(ie),oe.hasAnimation?this.driver.query(ie,B_e,!0).forEach(le=>y.add(le)):M.add(ie))}let O=new Map,A=mH(p,Array.from(y));A.forEach((X,ie)=>{let oe=Q5+b++;O.set(ie,oe),X.forEach(le=>$s(le,oe))}),e.push(()=>{g.forEach((X,ie)=>{let oe=_.get(ie);X.forEach(le=>Dg(le,oe))}),A.forEach((X,ie)=>{let oe=O.get(ie);X.forEach(le=>Dg(le,oe))}),C.forEach(X=>{this.processLeaveNode(X)})});let D=[],N=[];for(let X=this._namespaceList.length-1;X>=0;X--)this._namespaceList[X].drainQueuedTransitions(t).forEach(oe=>{let le=oe.player,Ce=oe.element;if(D.push(le),this.collectedEnterElements.length){let me=Ce[La];if(me&&me.setForMove){if(me.previousTriggersValues&&me.previousTriggersValues.has(oe.triggerName)){let Pe=me.previousTriggersValues.get(oe.triggerName),Me=this.statesByElement.get(oe.element);if(Me&&Me.has(oe.triggerName)){let Ue=Me.get(oe.triggerName);Ue.value=Pe,Me.set(oe.triggerName,Ue)}}le.destroy();return}}let Ne=!h||!this.driver.containsElement(h,Ce),R=O.get(Ce),ne=_.get(Ce),re=this._buildInstruction(oe,n,ne,R,Ne);if(re.errors&&re.errors.length){N.push(re);return}if(Ne){le.onStart(()=>tu(Ce,re.fromStyles)),le.onDestroy(()=>Na(Ce,re.toStyles)),r.push(le);return}if(oe.isFallbackTransition){le.onStart(()=>tu(Ce,re.fromStyles)),le.onDestroy(()=>Na(Ce,re.toStyles)),r.push(le);return}let de=[];re.timelines.forEach(me=>{me.stretchStartingKeyframe=!0,this.disabledNodes.has(me.element)||de.push(me)}),re.timelines=de,n.append(Ce,re.timelines);let fe={instruction:re,player:le,element:Ce};s.push(fe),re.queriedElements.forEach(me=>qo(a,me,[]).push(le)),re.preStyleProps.forEach((me,Pe)=>{if(me.size){let Me=l.get(Pe);Me||l.set(Pe,Me=new Set),me.forEach((Ue,He)=>Me.add(He))}}),re.postStyleProps.forEach((me,Pe)=>{let Me=c.get(Pe);Me||c.set(Pe,Me=new Set),me.forEach((Ue,He)=>Me.add(He))})});if(N.length){let X=[];N.forEach(ie=>{X.push(nH(ie.triggerName,ie.errors))}),D.forEach(ie=>ie.destroy()),this.reportError(X)}let B=new Map,T=new Map;s.forEach(X=>{let ie=X.element;n.has(ie)&&(T.set(ie,ie),this._beforeAnimationBuild(X.player.namespaceId,X.instruction,B))}),r.forEach(X=>{let ie=X.element;this._getPreviousPlayers(ie,!1,X.namespaceId,X.triggerName,null).forEach(le=>{qo(B,ie,[]).push(le),le.destroy()})});let H=C.filter(X=>xH(X,l,c)),te=new Map;pH(te,this.driver,M,c,Ts).forEach(X=>{xH(X,l,c)&&H.push(X)});let z=new Map;g.forEach((X,ie)=>{pH(z,this.driver,new Set(X),l,Pf)}),H.forEach(X=>{let ie=te.get(X),oe=z.get(X);te.set(X,new Map([...ie?.entries()??[],...oe?.entries()??[]]))});let J=[],Q=[],ce={};s.forEach(X=>{let{element:ie,player:oe,instruction:le}=X;if(n.has(ie)){if(d.has(ie)){oe.onDestroy(()=>Na(ie,le.toStyles)),oe.disabled=!0,oe.overrideTotalTime(le.totalTime),r.push(oe);return}let Ce=ce;if(T.size>1){let R=ie,ne=[];for(;R=R.parentNode;){let re=T.get(R);if(re){Ce=re;break}ne.push(R)}ne.forEach(re=>T.set(re,Ce))}let Ne=this._buildAnimation(oe.namespaceId,le,B,o,z,te);if(oe.setRealPlayer(Ne),Ce===ce)J.push(oe);else{let R=this.playersByElement.get(Ce);R&&R.length&&(oe.parentPlayer=Rc(R)),r.push(oe)}}else tu(ie,le.fromStyles),oe.onDestroy(()=>Na(ie,le.toStyles)),Q.push(oe),d.has(ie)&&r.push(oe)}),Q.forEach(X=>{let ie=o.get(X.element);if(ie&&ie.length){let oe=Rc(ie);X.setRealPlayer(oe)}}),r.forEach(X=>{X.parentPlayer?X.syncPlayerEvents(X.parentPlayer):X.destroy()});for(let X=0;X<C.length;X++){let ie=C[X],oe=ie[La];if(Dg(ie,Q5),oe&&oe.hasAnimation)continue;let le=[];if(a.size){let Ne=a.get(ie);Ne&&Ne.length&&le.push(...Ne);let R=this.driver.query(ie,J5,!0);for(let ne=0;ne<R.length;ne++){let re=a.get(R[ne]);re&&re.length&&le.push(...re)}}let Ce=le.filter(Ne=>!Ne.destroyed);Ce.length?V_e(this,ie,Ce):this.processLeaveNode(ie)}return C.length=0,J.forEach(X=>{this.players.push(X),X.onDone(()=>{X.destroy();let ie=this.players.indexOf(X);this.players.splice(ie,1)}),X.play()}),J}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,n,r,o){let s=[];if(t){let a=this.playersByQueriedElement.get(e);a&&(s=a)}else{let a=this.playersByElement.get(e);if(a){let l=!o||o==u1;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||s.push(c)})}}return(n||r)&&(s=s.filter(a=>!(n&&n!=a.namespaceId||r&&r!=a.triggerName))),s}_beforeAnimationBuild(e,t,n){let r=t.triggerName,o=t.element,s=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:r;for(let l of t.timelines){let c=l.element,d=c!==o,h=qo(n,c,[]);this._getPreviousPlayers(c,d,s,a,t.toState).forEach(g=>{let _=g.getRealPlayer();_.beforeDestroy&&_.beforeDestroy(),g.destroy(),h.push(g)})}tu(o,t.fromStyles)}_buildAnimation(e,t,n,r,o,s){let a=t.triggerName,l=t.element,c=[],d=new Set,h=new Set,p=t.timelines.map(_=>{let b=_.element;d.add(b);let C=b[La];if(C&&C.removedBeforeQueried)return new gl(_.duration,_.delay);let y=b!==l,M=U_e((n.get(b)||N_e).map(B=>B.getRealPlayer())).filter(B=>{let T=B;return T.element?T.element===b:!1}),O=o.get(b),A=s.get(b),D=T8(this._normalizer,_.keyframes,O,A),N=this._buildPlayer(_,D,M);if(_.subTimeline&&r&&h.add(b),y){let B=new g1(e,a,b);B.setRealPlayer(N),c.push(B)}return N});c.forEach(_=>{qo(this.playersByQueriedElement,_.element,[]).push(_),_.onDone(()=>R_e(this.playersByQueriedElement,_.element,_))}),d.forEach(_=>$s(_,j8));let g=Rc(p);return g.onDestroy(()=>{d.forEach(_=>Dg(_,j8)),Na(l,t.toStyles)}),h.forEach(_=>{qo(r,_,[]).push(g)}),g}_buildPlayer(e,t,n){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,n):new gl(e.duration,e.delay)}},g1=class{namespaceId;triggerName;element;_player=new gl;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(e,t,n){this.namespaceId=e,this.triggerName=t,this.element=n}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,n)=>{t.forEach(r=>K5(e,n,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){qo(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function R_e(i,e,t){let n=i.get(e);if(n){if(n.length){let r=n.indexOf(t);n.splice(r,1)}n.length==0&&i.delete(e)}return n}function z_e(i){return i??null}function iw(i){return i&&i.nodeType===1}function j_e(i){return i=="start"||i=="done"}function gH(i,e){let t=i.style.display;return i.style.display=e??"none",t}function pH(i,e,t,n,r){let o=[];t.forEach(l=>o.push(gH(l)));let s=[];n.forEach((l,c)=>{let d=new Map;l.forEach(h=>{let p=e.computeStyle(c,h,r);d.set(h,p),(!p||p.length==0)&&(c[La]=L_e,s.push(c))}),i.set(c,d)});let a=0;return t.forEach(l=>gH(l,o[a++])),s}function mH(i,e){let t=new Map;if(i.forEach(a=>t.set(a,[])),e.length==0)return t;let n=1,r=new Set(e),o=new Map;function s(a){if(!a)return n;let l=o.get(a);if(l)return l;let c=a.parentNode;return t.has(c)?l=c:r.has(c)?l=n:l=s(c),o.set(a,l),l}return e.forEach(a=>{let l=s(a);l!==n&&t.get(l).push(a)}),t}function $s(i,e){i.classList?.add(e)}function Dg(i,e){i.classList?.remove(e)}function V_e(i,e,t){Rc(t).onDone(()=>i.processLeaveNode(e))}function U_e(i){let e=[];return wH(i,e),e}function wH(i,e){for(let t=0;t<i.length;t++){let n=i[t];n instanceof qu?wH(n.players,e):e.push(n)}}function H_e(i,e){let t=Object.keys(i),n=Object.keys(e);if(t.length!=n.length)return!1;for(let r=0;r<t.length;r++){let o=t[r];if(!e.hasOwnProperty(o)||i[o]!==e[o])return!1}return!0}function xH(i,e,t){let n=t.get(i);if(!n)return!1;let r=e.get(i);return r?n.forEach(o=>r.add(o)):e.set(i,n),t.delete(i),!0}var Fg=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(e,t)=>{};constructor(e,t,n){this._driver=t,this._normalizer=n,this._transitionEngine=new n4(e.body,t,n),this._timelineEngine=new e4(e.body,t,n),this._transitionEngine.onRemovalComplete=(r,o)=>this.onRemovalComplete(r,o)}registerTrigger(e,t,n,r,o){let s=e+"-"+r,a=this._triggerCache[s];if(!a){let l=[],c=[],d=vH(this._driver,o,l,c);if(l.length)throw WU(r,l);a=k_e(r,d,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,n,r){this._transitionEngine.insertNode(e,t,n,r)}onRemove(e,t,n){this._transitionEngine.removeNode(e,t,n)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,n,r){if(n.charAt(0)=="@"){let[o,s]=B8(n),a=r;this._timelineEngine.command(o,t,s,a)}else this._transitionEngine.trigger(e,t,n,r)}listen(e,t,n,r,o){if(n.charAt(0)=="@"){let[s,a]=B8(n);return this._timelineEngine.listen(s,t,a,o)}return this._transitionEngine.listen(e,t,n,r,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function G_e(i,e){let t=null,n=null;return Array.isArray(e)&&e.length?(t=W8(e[0]),e.length>1&&(n=W8(e[e.length-1]))):e instanceof Map&&(t=W8(e)),t||n?new $_e(i,t,n):null}var $_e=(()=>{class i{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(t,n,r){this._element=t,this._startStyles=n,this._endStyles=r;let o=i.initialStylesByElement.get(t);o||i.initialStylesByElement.set(t,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&Na(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Na(this._element,this._initialStyles),this._endStyles&&(Na(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(i.initialStylesByElement.delete(this._element),this._startStyles&&(tu(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(tu(this._element,this._endStyles),this._endStyles=null),Na(this._element,this._initialStyles),this._state=3)}}return i})();function W8(i){let e=null;return i.forEach((t,n)=>{W_e(n)&&(e=e||new Map,e.set(n,t))}),e}function W_e(i){return i==="display"||i==="position"}var dw=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(e,t,n,r){this.element=e,this.keyframes=t,this.options=n,this._specialStyles=r,this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(n=>{t.push(Object.fromEntries(n))}),t}_triggerWebAnimation(e,t,n){return e.animate(this._convertKeyframesToObject(t),n)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((n,r)=>{r!=="offset"&&e.set(r,this._finished?n:ew(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}},uw=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return N8(e,t)}getParentElement(e){return X5(e)}query(e,t,n){return L8(e,t,n)}computeStyle(e,t,n){return ew(e,t)}animate(e,t,n,r,o,s=[]){let a=r==0?"both":"forwards",l={duration:n,delay:r,fill:a};o&&(l.easing=o);let c=new Map,d=s.filter(g=>g instanceof dw);sH(n,r)&&d.forEach(g=>{g.currentSnapshot.forEach((_,b)=>c.set(b,_))});let h=rH(t).map(g=>new Map(g));h=aH(e,h,c);let p=G_e(e,h);return new dw(e,h,l,p)}};var rw="@",MH="@.disabled",hw=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(e,t,n,r){this.namespaceId=e,this.delegate=t,this.engine=n,this._onDestroy=r}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,n,r=!0){this.delegate.insertBefore(e,t,n),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,n){this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,n,r){this.delegate.setAttribute(e,t,n,r)}removeAttribute(e,t,n){this.delegate.removeAttribute(e,t,n)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,n,r){this.delegate.setStyle(e,t,n,r)}removeStyle(e,t,n){this.delegate.removeStyle(e,t,n)}setProperty(e,t,n){t.charAt(0)==rw&&t==MH?this.disableAnimations(e,!!n):this.delegate.setProperty(e,t,n)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,n,r){return this.delegate.listen(e,t,n,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},i4=class extends hw{factory;constructor(e,t,n,r,o){super(t,n,r,o),this.factory=e,this.namespaceId=t}setProperty(e,t,n){t.charAt(0)==rw?t.charAt(1)=="."&&t==MH?(n=n===void 0?!0:!!n,this.disableAnimations(e,n)):this.engine.process(this.namespaceId,e,t.slice(1),n):this.delegate.setProperty(e,t,n)}listen(e,t,n,r){if(t.charAt(0)==rw){let o=q_e(e),s=t.slice(1),a="";return s.charAt(0)!=rw&&([s,a]=K_e(s)),this.engine.listen(this.namespaceId,o,s,a,l=>{let c=l._data||-1;this.factory.scheduleListenerCallback(c,n,l)})}return this.delegate.listen(e,t,n,r)}};function q_e(i){switch(i){case"body":return document.body;case"document":return document;case"window":return window;default:return i}}function K_e(i){let e=i.indexOf("."),t=i.substring(0,e),n=i.slice(e+1);return[t,n]}var fw=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(e,t,n){this.delegate=e,this.engine=t,this._zone=n,t.onRemovalComplete=(r,o)=>{o?.removeChild(null,r)}}createRenderer(e,t){let n="",r=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let c=this._rendererCache,d=c.get(r);if(!d){let h=()=>c.delete(r);d=new hw(n,r,this.engine,h),c.set(r,d)}return d}let o=t.id,s=t.id+"-"+this._currentId;this._currentId++,this.engine.register(s,e);let a=c=>{Array.isArray(c)?c.forEach(a):this.engine.registerTrigger(o,s,e,c.name,c)};return t.data.animation.forEach(a),new i4(this,s,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,n){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(n));return}let r=this._animationCallbacksBuffer;r.length==0&&queueMicrotask(()=>{this._zone.run(()=>{r.forEach(o=>{let[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),r.push([t,n])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(e){this.engine.flush(),this.delegate.componentReplaced?.(e)}};var X_e=(()=>{class i extends Fg{constructor(t,n,r){super(t,n,r)}ngOnDestroy(){this.flush()}static \u0275fac=function(n){return new(n||i)(ht(ai),ht($0),ht(W0))};static \u0275prov=tt({token:i,factory:i.\u0275fac})}return i})();function Q_e(){return new ow}function J_e(i,e,t){return new fw(i,e,t)}var PH=[{provide:W0,useFactory:Q_e},{provide:Fg,useClass:X_e},{provide:rd,useFactory:J_e,deps:[Zp,Fg,On]}],Z_e=[{provide:$0,useClass:r4},{provide:EP,useValue:"NoopAnimations"},...PH],EH=[{provide:$0,useFactory:()=>new uw},{provide:EP,useFactory:()=>"BrowserAnimations"},...PH],OH=(()=>{class i{static withConfig(t){return{ngModule:i,providers:t.disableAnimations?Z_e:EH}}static \u0275fac=function(n){return new(n||i)};static \u0275mod=bn({type:i});static \u0275inj=vn({providers:EH,imports:[ds]})}return i})();var s4=class{constructor(){this.change=new Ci,this.instances={},this.DEFAULT_ID="DEFAULT_PAGINATION_ID"}defaultId(){return this.DEFAULT_ID}register(e){return e.id==null&&(e.id=this.DEFAULT_ID),this.instances[e.id]?this.updateInstance(e):(this.instances[e.id]=e,!0)}updateInstance(e){let t=!1;for(let n in this.instances[e.id])e[n]!==this.instances[e.id][n]&&(this.instances[e.id][n]=e[n],t=!0);return t}getCurrentPage(e){return this.instances[e]?this.instances[e].currentPage:1}setCurrentPage(e,t){if(this.instances[e]){let n=this.instances[e],r=Math.ceil(n.totalItems/n.itemsPerPage);t<=r&&1<=t&&(this.instances[e].currentPage=t,this.change.emit(e))}}setTotalItems(e,t){this.instances[e]&&0<=t&&(this.instances[e].totalItems=t,this.change.emit(e))}setItemsPerPage(e,t){this.instances[e]&&(this.instances[e].itemsPerPage=t,this.change.emit(e))}getInstance(e=this.DEFAULT_ID){return this.instances[e]?this.clone(this.instances[e]):{}}clone(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}},xDe=Number.MAX_SAFE_INTEGER;var SH=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=bn({type:i}),i.\u0275inj=vn({providers:[s4],imports:[[cs]]}),i})();var gw=class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=bn({type:i});static \u0275inj=vn({imports:[cs,fl,xa,ds,eu,hl]})};var pw=class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=bn({type:i});static \u0275inj=vn({imports:[cs,fl,xa,ds,hl,md]})};var mw=class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=bn({type:i});static \u0275inj=vn({imports:[cs,fl,xa,ds,hl,md]})};var xw=class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=bn({type:i,bootstrap:[W5]});static \u0275inj=vn({imports:[ds,OH,eu,xa,hl,fl,MB.forRoot({closeButton:!0,progressBar:!0,positionClass:"toast-bottom-right"}),OB,SH,q5,gw,pw,mw]})};_O().bootstrapModule(xw,{ngZoneEventCoalescing:!0}).catch(i=>console.error(i));
